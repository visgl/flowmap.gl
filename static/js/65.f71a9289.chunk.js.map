{"version":3,"file":"static/js/65.f71a9289.chunk.js","mappings":"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","sources":["../../../node_modules/@loaders.gl/core/src/javascript-utils/is-type.ts","../../../node_modules/@loaders.gl/core/node_modules/@loaders.gl/loader-utils/src/lib/env-utils/assert.ts","../../../node_modules/@loaders.gl/core/src/lib/loader-utils/normalize-loader.ts","../../../node_modules/@loaders.gl/core/node_modules/@loaders.gl/loader-utils/src/lib/path-utils/file-aliases.ts","../../../node_modules/@loaders.gl/core/src/lib/utils/mime-type-utils.ts","../../../node_modules/@loaders.gl/core/src/lib/utils/resource-utils.ts","../../../node_modules/@loaders.gl/core/src/lib/utils/response-utils.ts","../../../node_modules/@loaders.gl/core/src/lib/fetch/fetch-file.ts","../../../node_modules/@probe.gl/env/src/lib/is-browser.ts","../../../node_modules/@probe.gl/env/src/lib/is-electron.ts","../../../node_modules/@probe.gl/env/src/utils/globals.ts","../../../node_modules/@probe.gl/log/src/utils/local-storage.ts","../../../node_modules/@probe.gl/log/src/utils/formatters.ts","../../../node_modules/@probe.gl/log/src/utils/color.ts","../../../node_modules/@probe.gl/log/src/utils/assert.ts","../../../node_modules/@probe.gl/env/src/lib/globals.ts","../../../node_modules/@probe.gl/log/src/utils/hi-res-timestamp.ts","../../../node_modules/@probe.gl/log/src/log.ts","../../../node_modules/@probe.gl/log/src/utils/autobind.ts","../../../node_modules/@loaders.gl/core/src/lib/loader-utils/loggers.ts","../../../node_modules/@loaders.gl/core/src/lib/loader-utils/option-defaults.ts","../../../node_modules/@loaders.gl/core/src/lib/loader-utils/option-utils.ts","../../../node_modules/@loaders.gl/core/node_modules/@loaders.gl/worker-utils/src/lib/env-utils/assert.ts","../../../node_modules/@loaders.gl/core/node_modules/@loaders.gl/worker-utils/src/lib/env-utils/version.ts","../../../node_modules/@loaders.gl/core/node_modules/@loaders.gl/worker-utils/src/lib/env-utils/globals.ts","../../../node_modules/@loaders.gl/core/node_modules/@loaders.gl/worker-utils/src/lib/worker-utils/get-loadable-worker-url.ts","../../../node_modules/@loaders.gl/core/node_modules/@loaders.gl/worker-utils/src/lib/worker-utils/get-transfer-list.ts","../../../node_modules/@loaders.gl/core/node_modules/@loaders.gl/worker-utils/src/lib/worker-farm/worker-thread.ts","../../../node_modules/@loaders.gl/core/node_modules/@loaders.gl/worker-utils/src/lib/worker-farm/worker-job.ts","../../../node_modules/@loaders.gl/core/node_modules/@loaders.gl/worker-utils/src/lib/worker-farm/worker-pool.ts","../../../node_modules/@loaders.gl/core/node_modules/@loaders.gl/worker-utils/src/lib/worker-farm/worker-farm.ts","../../../node_modules/@loaders.gl/core/node_modules/@loaders.gl/worker-utils/src/lib/worker-api/get-worker-url.ts","../../../node_modules/@loaders.gl/core/node_modules/@loaders.gl/loader-utils/src/lib/worker-loader-utils/parse-with-worker.ts","../../../node_modules/@loaders.gl/core/node_modules/@loaders.gl/loader-utils/src/lib/binary-utils/buffer-utils.ts","../../../node_modules/@loaders.gl/core/node_modules/@loaders.gl/loader-utils/src/lib/binary-utils/array-buffer-utils.ts","../../../node_modules/@loaders.gl/core/node_modules/@loaders.gl/loader-utils/src/lib/iterators/async-iteration.ts","../../../node_modules/@loaders.gl/core/src/iterators/make-iterator/make-array-buffer-iterator.ts","../../../node_modules/@loaders.gl/core/node_modules/@loaders.gl/loader-utils/src/lib/env-utils/globals.ts","../../../node_modules/@loaders.gl/core/src/iterators/make-iterator/make-stream-iterator.ts","../../../node_modules/@loaders.gl/core/src/iterators/make-iterator/make-iterator.ts","../../../node_modules/@loaders.gl/core/src/iterators/make-iterator/make-string-iterator.ts","../../../node_modules/@loaders.gl/core/src/iterators/make-iterator/make-blob-iterator.ts","../../../node_modules/@loaders.gl/core/src/lib/loader-utils/get-data.ts","../../../node_modules/@loaders.gl/core/src/lib/api/register-loaders.ts","../../../node_modules/@loaders.gl/core/src/lib/api/select-loader.ts","../../../node_modules/@loaders.gl/core/node_modules/@loaders.gl/loader-utils/src/lib/path-utils/path.ts","../../../node_modules/@loaders.gl/core/src/lib/api/parse.ts","../../../node_modules/@loaders.gl/core/src/lib/loader-utils/loader-context.ts","../../../node_modules/@loaders.gl/core/node_modules/@loaders.gl/worker-utils/src/lib/worker-api/validate-worker-version.ts","../../../node_modules/@loaders.gl/core/src/lib/api/load.ts","../../../node_modules/@loaders.gl/csv/src/csv-loader.ts","../../../node_modules/@loaders.gl/csv/src/papaparse/async-iterator-streamer.ts","../../../node_modules/@loaders.gl/csv/src/papaparse/papaparse.ts","../../../node_modules/@loaders.gl/schema/src/lib/batches/base-table-batch-aggregator.ts","../../../node_modules/@loaders.gl/schema/src/lib/batches/columnar-table-batch-aggregator.ts","../../../node_modules/@loaders.gl/schema/src/lib/batches/row-table-batch-aggregator.ts","../../../node_modules/@loaders.gl/schema/src/lib/batches/table-batch-builder.ts","../../../node_modules/@loaders.gl/schema/src/lib/utils/async-queue.ts","../../../node_modules/@loaders.gl/schema/src/lib/utils/row-utils.ts","../../../node_modules/@math.gl/web-mercator/src/assert.js","../../../node_modules/@math.gl/web-mercator/src/fit-bounds.js","../../../node_modules/@math.gl/web-mercator/src/get-bounds.js","../../../node_modules/@math.gl/web-mercator/src/math-utils.js","../../../node_modules/@math.gl/web-mercator/src/web-mercator-utils.js","../../../node_modules/@math.gl/web-mercator/src/web-mercator-viewport.js","../../../node_modules/d3-collection/src/map.js","../../../node_modules/d3-collection/src/nest.js","../../../node_modules/d3-collection/src/set.js","../../../node_modules/gl-matrix/esm/common.js","../../../node_modules/gl-matrix/esm/mat4.js","../../../node_modules/gl-matrix/esm/vec2.js","../../../node_modules/gl-matrix/esm/vec3.js","../../../node_modules/gl-matrix/esm/vec4.js","../../../node_modules/kdbush/src/index.js","../../../node_modules/kdbush/src/range.js","../../../node_modules/kdbush/src/sort.js","../../../node_modules/kdbush/src/within.js","../../../node_modules/reselect/es/defaultMemoize.js","../../../node_modules/reselect/es/index.js","../../../node_modules/seedrandom/index.js","../../../node_modules/seedrandom/lib/alea.js","../../../node_modules/seedrandom/lib/tychei.js","../../../node_modules/seedrandom/lib/xor128.js","../../../node_modules/seedrandom/lib/xor4096.js","../../../node_modules/seedrandom/lib/xorshift7.js","../../../node_modules/seedrandom/lib/xorwow.js","../../../node_modules/seedrandom/seedrandom.js","../javascript/esm|/Users/iboyandin/Workspace/flowmap.gl-next/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../../node_modules/comlink/src/comlink.ts","../../../node_modules/d3-array/src/ascending.js","../../../node_modules/d3-array/src/bisect.js","../../../node_modules/d3-array/src/bisector.js","../../../node_modules/d3-array/src/descending.js","../../../node_modules/d3-array/src/extent.js","../../../node_modules/d3-array/src/fsum.js","../../../node_modules/d3-array/src/group.js","../../../node_modules/d3-array/src/identity.js","../../../node_modules/d3-array/src/min.js","../../../node_modules/d3-array/src/number.js","../../../node_modules/d3-array/src/range.js","../../../node_modules/d3-array/src/ticks.js","../../../node_modules/d3-color/src/color.js","../../../node_modules/d3-color/src/cubehelix.js","../../../node_modules/d3-color/src/define.js","../../../node_modules/d3-color/src/lab.js","../../../node_modules/d3-color/src/math.js","../../../node_modules/d3-format/src/defaultLocale.js","../../../node_modules/d3-format/src/exponent.js","../../../node_modules/d3-format/src/formatDecimal.js","../../../node_modules/d3-format/src/formatGroup.js","../../../node_modules/d3-format/src/formatNumerals.js","../../../node_modules/d3-format/src/formatPrefixAuto.js","../../../node_modules/d3-format/src/formatRounded.js","../../../node_modules/d3-format/src/formatSpecifier.js","../../../node_modules/d3-format/src/formatTrim.js","../../../node_modules/d3-format/src/formatTypes.js","../../../node_modules/d3-format/src/identity.js","../../../node_modules/d3-format/src/locale.js","../../../node_modules/d3-format/src/precisionFixed.js","../../../node_modules/d3-format/src/precisionPrefix.js","../../../node_modules/d3-format/src/precisionRound.js","../../../node_modules/d3-geo/src/area.js","../../../node_modules/d3-geo/src/bounds.js","../../../node_modules/d3-geo/src/cartesian.js","../../../node_modules/d3-geo/src/math.js","../../../node_modules/d3-geo/src/noop.js","../../../node_modules/d3-geo/src/stream.js","../../../node_modules/d3-interpolate/src/array.js","../../../node_modules/d3-interpolate/src/basis.js","../../../node_modules/d3-interpolate/src/basisClosed.js","../../../node_modules/d3-interpolate/src/color.js","../../../node_modules/d3-interpolate/src/constant.js","../../../node_modules/d3-interpolate/src/cubehelix.js","../../../node_modules/d3-interpolate/src/date.js","../../../node_modules/d3-interpolate/src/number.js","../../../node_modules/d3-interpolate/src/numberArray.js","../../../node_modules/d3-interpolate/src/object.js","../../../node_modules/d3-interpolate/src/rgb.js","../../../node_modules/d3-interpolate/src/round.js","../../../node_modules/d3-interpolate/src/string.js","../../../node_modules/d3-interpolate/src/value.js","../../../node_modules/d3-scale-chromatic/src/colors.js","../../../node_modules/d3-scale-chromatic/src/ramp.js","../../../node_modules/d3-scale-chromatic/src/sequential-multi/BuGn.js","../../../node_modules/d3-scale-chromatic/src/sequential-multi/BuPu.js","../../../node_modules/d3-scale-chromatic/src/sequential-multi/GnBu.js","../../../node_modules/d3-scale-chromatic/src/sequential-multi/OrRd.js","../../../node_modules/d3-scale-chromatic/src/sequential-multi/PuBu.js","../../../node_modules/d3-scale-chromatic/src/sequential-multi/PuBuGn.js","../../../node_modules/d3-scale-chromatic/src/sequential-multi/PuRd.js","../../../node_modules/d3-scale-chromatic/src/sequential-multi/RdPu.js","../../../node_modules/d3-scale-chromatic/src/sequential-multi/YlGn.js","../../../node_modules/d3-scale-chromatic/src/sequential-multi/YlGnBu.js","../../../node_modules/d3-scale-chromatic/src/sequential-multi/YlOrBr.js","../../../node_modules/d3-scale-chromatic/src/sequential-multi/YlOrRd.js","../../../node_modules/d3-scale-chromatic/src/sequential-multi/rainbow.js","../../../node_modules/d3-scale-chromatic/src/sequential-multi/viridis.js","../../../node_modules/d3-scale-chromatic/src/sequential-single/Blues.js","../../../node_modules/d3-scale-chromatic/src/sequential-single/Greens.js","../../../node_modules/d3-scale-chromatic/src/sequential-single/Greys.js","../../../node_modules/d3-scale-chromatic/src/sequential-single/Oranges.js","../../../node_modules/d3-scale-chromatic/src/sequential-single/Purples.js","../../../node_modules/d3-scale-chromatic/src/sequential-single/Reds.js","../../../node_modules/d3-scale/src/constant.js","../../../node_modules/d3-scale/src/continuous.js","../../../node_modules/d3-scale/src/init.js","../../../node_modules/d3-scale/src/linear.js","../../../node_modules/d3-scale/src/number.js","../../../node_modules/d3-scale/src/pow.js","../../../node_modules/d3-scale/src/sequential.js","../../../node_modules/d3-scale/src/tickFormat.js","../../../node_modules/d3-time-format/src/defaultLocale.js","../../../node_modules/d3-time-format/src/locale.js","../../../node_modules/d3-time/src/day.js","../../../node_modules/d3-time/src/duration.js","../../../node_modules/d3-time/src/hour.js","../../../node_modules/d3-time/src/interval.js","../../../node_modules/d3-time/src/minute.js","../../../node_modules/d3-time/src/month.js","../../../node_modules/d3-time/src/second.js","../../../node_modules/d3-time/src/utcDay.js","../../../node_modules/d3-time/src/utcWeek.js","../../../node_modules/d3-time/src/utcYear.js","../../../node_modules/d3-time/src/week.js","../../../node_modules/d3-time/src/year.js","../../../node_modules/internmap/src/index.js"],"sourcesContent":["import type {Readable} from 'stream';\n\n/** A DOM or Node readable stream */\nexport type ReadableStreamType = ReadableStream | Readable;\n\nconst isBoolean: (x: any) => boolean = (x) => typeof x === 'boolean';\nconst isFunction: (x: any) => boolean = (x) => typeof x === 'function';\n\nexport const isObject: (x: any) => boolean = (x) => x !== null && typeof x === 'object';\nexport const isPureObject: (x: any) => boolean = (x) =>\n  isObject(x) && x.constructor === {}.constructor;\nexport const isPromise: (x: any) => boolean = (x) => isObject(x) && isFunction(x.then);\n\nexport const isIterable: (x: any) => boolean = (x) => x && typeof x[Symbol.iterator] === 'function';\nexport const isAsyncIterable: (x: any) => boolean = (x) =>\n  x && typeof x[Symbol.asyncIterator] === 'function';\nexport const isIterator: (x: any) => boolean = (x) => x && isFunction(x.next);\n\nexport const isResponse: (x: any) => boolean = (x) =>\n  (typeof Response !== 'undefined' && x instanceof Response) ||\n  (x && x.arrayBuffer && x.text && x.json);\n\nexport const isFile: (x: any) => boolean = (x) => typeof File !== 'undefined' && x instanceof File;\nexport const isBlob: (x: any) => boolean = (x) => typeof Blob !== 'undefined' && x instanceof Blob;\n\n/** Check for Node.js `Buffer` without triggering bundler to include buffer polyfill */\nexport const isBuffer: (x: any) => boolean = (x) => x && typeof x === 'object' && x.isBuffer;\n\nexport const isWritableDOMStream: (x: any) => boolean = (x) =>\n  isObject(x) && isFunction(x.abort) && isFunction(x.getWriter);\n\nexport const isReadableDOMStream: (x: any) => boolean = (x) =>\n  (typeof ReadableStream !== 'undefined' && x instanceof ReadableStream) ||\n  (isObject(x) && isFunction(x.tee) && isFunction(x.cancel) && isFunction(x.getReader));\n// Not implemented in Firefox: && isFunction(x.pipeTo)\n\nexport const isWritableNodeStream: (x: any) => boolean = (x) =>\n  isObject(x) && isFunction(x.end) && isFunction(x.write) && isBoolean(x.writable);\nexport const isReadableNodeStream: (x: any) => boolean = (x) =>\n  isObject(x) && isFunction(x.read) && isFunction(x.pipe) && isBoolean(x.readable);\nexport const isReadableStream: (x: any) => boolean = (x) =>\n  isReadableDOMStream(x) || isReadableNodeStream(x);\nexport const isWritableStream: (x: any) => boolean = (x) =>\n  isWritableDOMStream(x) || isWritableNodeStream(x);\n","/**\n * Throws an `Error` with the optional `message` if `condition` is falsy\n * @note Replacement for the external assert method to reduce bundle size\n */\nexport function assert(condition: any, message?: string): void {\n  if (!condition) {\n    throw new Error(message || 'loader assertion failed.');\n  }\n}\n","import type {Loader} from '@loaders.gl/loader-utils';\nimport {assert} from '@loaders.gl/loader-utils';\n\nexport function isLoaderObject(loader?: any): boolean {\n  if (!loader) {\n    return false;\n  }\n\n  if (Array.isArray(loader)) {\n    loader = loader[0];\n  }\n\n  const hasExtensions = Array.isArray(loader?.extensions);\n\n  /* Now handled by types and worker loaders do not have these\n  let hasParser =\n    loader.parseTextSync ||\n    loader.parseSync ||\n    loader.parse ||\n    loader.parseStream || // TODO Remove, Replace with parseInBatches\n    loader.parseInBatches;\n  */\n\n  return hasExtensions;\n}\n\nexport function normalizeLoader(loader: Loader): Loader {\n  // This error is fairly easy to trigger by mixing up import statements etc\n  // So we make an exception and add a developer error message for this case\n  // To help new users from getting stuck here\n  assert(loader, 'null loader');\n  assert(isLoaderObject(loader), 'invalid loader');\n\n  // NORMALIZE [LOADER, OPTIONS] => LOADER\n\n  // If [loader, options], create a new loaders object with options merged in\n  let options;\n  if (Array.isArray(loader)) {\n    options = loader[1];\n    loader = loader[0];\n    loader = {\n      ...loader,\n      options: {...loader.options, ...options}\n    };\n  }\n\n  // NORMALIZE text and binary flags\n  // Ensure at least one of text/binary flags are properly set\n\n  // @ts-expect-error\n  if (loader?.parseTextSync || loader?.parseText) {\n    loader.text = true;\n  }\n\n  if (!loader.text) {\n    loader.binary = true;\n  }\n\n  return loader;\n}\n","// Simple file alias mechanisms for tests.\n\nlet pathPrefix = '';\nconst fileAliases: {[aliasPath: string]: string} = {};\n\n/*\n * Set a relative path prefix\n */\nexport function setPathPrefix(prefix: string): void {\n  pathPrefix = prefix;\n}\n\n/*\n * Get the relative path prefix\n */\nexport function getPathPrefix(): string {\n  return pathPrefix;\n}\n\n/**\n *\n * @param aliases\n *\n * Note: addAliases are an experimental export, they are only for testing of loaders.gl loaders\n * not intended as a generic aliasing mechanism\n */\nexport function addAliases(aliases: {[aliasPath: string]: string}): void {\n  Object.assign(fileAliases, aliases);\n}\n\n/**\n * Resolves aliases and adds path-prefix to paths\n */\nexport function resolvePath(filename: string): string {\n  for (const alias in fileAliases) {\n    if (filename.startsWith(alias)) {\n      const replacement = fileAliases[alias];\n      filename = filename.replace(alias, replacement);\n    }\n  }\n  if (!filename.startsWith('http://') && !filename.startsWith('https://')) {\n    filename = `${pathPrefix}${filename}`;\n  }\n  return filename;\n}\n","// TODO - build/integrate proper MIME type parsing\n// https://mimesniff.spec.whatwg.org/\n\nconst DATA_URL_PATTERN = /^data:([-\\w.]+\\/[-\\w.+]+)(;|,)/;\nconst MIME_TYPE_PATTERN = /^([-\\w.]+\\/[-\\w.+]+)/;\n\n/**\n * Remove extra data like `charset` from MIME types\n * @param mimeString\n * @returns A clean MIME type, or an empty string\n *\n * @todo - handle more advanced MIMETYpes, multiple types\n * @todo - extract charset etc\n */\nexport function parseMIMEType(mimeString: string): string {\n  // If resource is a data url, extract any embedded mime type\n  const matches = MIME_TYPE_PATTERN.exec(mimeString);\n  if (matches) {\n    return matches[1];\n  }\n  return mimeString;\n}\n\n/**\n * Extract MIME type from data URL\n *\n * @param mimeString\n * @returns A clean MIME type, or an empty string\n *\n * @todo - handle more advanced MIMETYpes, multiple types\n * @todo - extract charset etc\n */\nexport function parseMIMETypeFromURL(url: string): string {\n  // If resource is a data URL, extract any embedded mime type\n  const matches = DATA_URL_PATTERN.exec(url);\n  if (matches) {\n    return matches[1];\n  }\n  return '';\n}\n","import {isResponse, isBlob} from '../../javascript-utils/is-type';\nimport {parseMIMEType, parseMIMETypeFromURL} from './mime-type-utils';\n\nconst QUERY_STRING_PATTERN = /\\?.*/;\n\n/**\n * Returns an object with `url` and (MIME) `type` fields\n * If it cannot determine url or type, the corresponding value will be an empty string\n *\n * @param resource Any type, but only Responses, string URLs and data URLs are processed\n *\n * @todo string parameters are assumed to be URLs\n */\nexport function getResourceUrlAndType(resource: any): {url: string; type: string} {\n  // If resource is a response, it contains the information directly\n  if (isResponse(resource)) {\n    const url = stripQueryString(resource.url || '');\n    const contentTypeHeader = resource.headers.get('content-type') || '';\n    return {\n      url,\n      type: parseMIMEType(contentTypeHeader) || parseMIMETypeFromURL(url)\n    };\n  }\n\n  // If the resource is a Blob or a File (subclass of Blob)\n  if (isBlob(resource)) {\n    return {\n      // File objects have a \"name\" property. Blob objects don't have any\n      // url (name) information\n      url: stripQueryString(resource.name || ''),\n      type: resource.type || ''\n    };\n  }\n\n  if (typeof resource === 'string') {\n    return {\n      // TODO this could mess up data URL but it doesn't matter as it is just used for inference\n      url: stripQueryString(resource),\n      // If a data url\n      type: parseMIMETypeFromURL(resource)\n    };\n  }\n\n  // Unknown\n  return {\n    url: '',\n    type: ''\n  };\n}\n\n/**\n  * Returns (approximate) content length for a resource if it can be determined.\n  * Returns -1 if content length cannot be determined.\n  * @param resource\n\n  * @note string parameters are NOT assumed to be URLs\n  */\nexport function getResourceContentLength(resource: any): number {\n  if (isResponse(resource)) {\n    return resource.headers['content-length'] || -1;\n  }\n  if (isBlob(resource)) {\n    return resource.size;\n  }\n  if (typeof resource === 'string') {\n    // TODO - handle data URL?\n    return resource.length;\n  }\n  if (resource instanceof ArrayBuffer) {\n    return resource.byteLength;\n  }\n  if (ArrayBuffer.isView(resource)) {\n    return resource.byteLength;\n  }\n  return -1;\n}\n\nfunction stripQueryString(url) {\n  return url.replace(QUERY_STRING_PATTERN, '');\n}\n","import {isResponse} from '../../javascript-utils/is-type';\nimport {getResourceContentLength, getResourceUrlAndType} from './resource-utils';\n\n/**\n * Returns a Response object\n * Adds content-length header when possible\n *\n * @param resource\n */\nexport async function makeResponse(resource: any): Promise<Response> {\n  if (isResponse(resource)) {\n    return resource;\n  }\n\n  // Add content-length header if possible\n  const headers: {[header: string]: string} = {};\n\n  const contentLength = getResourceContentLength(resource);\n  if (contentLength >= 0) {\n    headers['content-length'] = String(contentLength);\n  }\n\n  // `new Response(File)` does not preserve content-type and URL\n  // so we add them here\n  const {url, type} = getResourceUrlAndType(resource);\n  if (type) {\n    headers['content-type'] = type;\n  }\n\n  // Add a custom header with initial bytes if available\n  const initialDataUrl = await getInitialDataUrl(resource);\n  if (initialDataUrl) {\n    headers['x-first-bytes'] = initialDataUrl;\n  }\n\n  // TODO - is this the best way of handling strings?\n  // Maybe package as data URL instead?\n  if (typeof resource === 'string') {\n    // Convert to ArrayBuffer to avoid Response treating it as a URL\n    resource = new TextEncoder().encode(resource);\n  }\n\n  // Attempt to create a Response from the resource, adding headers and setting url\n  const response = new Response(resource, {headers});\n  // We can't control `Response.url` via constructor, use a property override to record URL.\n  Object.defineProperty(response, 'url', {value: url});\n  return response;\n}\n\n/**\n * Checks response status (async) and throws a helpful error message if status is not OK.\n * @param response\n */\nexport async function checkResponse(response: Response): Promise<void> {\n  if (!response.ok) {\n    const message = await getResponseError(response);\n    throw new Error(message);\n  }\n}\n\n/**\n * Checks response status (sync) and throws a helpful error message if status is not OK.\n * @param response\n */\nexport function checkResponseSync(response: Response): void {\n  if (!response.ok) {\n    let message = `${response.status} ${response.statusText}`;\n    message = message.length > 60 ? `${message.slice(60)}...` : message;\n    throw new Error(message);\n  }\n}\n\n// HELPERS\n\nasync function getResponseError(response): Promise<string> {\n  let message = `Failed to fetch resource ${response.url} (${response.status}): `;\n  try {\n    const contentType = response.headers.get('Content-Type');\n    let text = response.statusText;\n    if (contentType.includes('application/json')) {\n      text += ` ${await response.text()}`;\n    }\n    message += text;\n    message = message.length > 60 ? `${message.slice(60)}...` : message;\n  } catch (error) {\n    // eslint forbids return in a finally statement, so we just catch here\n  }\n  return message;\n}\n\nasync function getInitialDataUrl(resource): Promise<string | null> {\n  const INITIAL_DATA_LENGTH = 5;\n  if (typeof resource === 'string') {\n    return `data:,${resource.slice(0, INITIAL_DATA_LENGTH)}`;\n  }\n  if (resource instanceof Blob) {\n    const blobSlice = resource.slice(0, 5);\n    return await new Promise((resolve) => {\n      const reader = new FileReader();\n      reader.onload = (event) => resolve(event?.target?.result as string);\n      reader.readAsDataURL(blobSlice);\n    });\n  }\n  if (resource instanceof ArrayBuffer) {\n    const slice = resource.slice(0, INITIAL_DATA_LENGTH);\n    const base64 = arrayBufferToBase64(slice);\n    return `data:base64,${base64}`;\n  }\n  return null;\n}\n\n// https://stackoverflow.com/questions/9267899/arraybuffer-to-base64-encoded-string\nfunction arrayBufferToBase64(buffer) {\n  let binary = '';\n  const bytes = new Uint8Array(buffer);\n  for (let i = 0; i < bytes.byteLength; i++) {\n    binary += String.fromCharCode(bytes[i]);\n  }\n  return btoa(binary);\n}\n","import {resolvePath} from '@loaders.gl/loader-utils';\nimport {makeResponse} from '../utils/response-utils';\n// import {getErrorMessageFromResponse} from './fetch-error-message';\n\n/**\n * fetch compatible function\n * Reads file data from:\n * - http/http urls\n * - data urls\n * - File/Blob objects\n * Leverages `@loaders.gl/polyfills` for Node.js support\n * Respects pathPrefix and file aliases\n */\nexport async function fetchFile(\n  url: string | Blob,\n  options?: RequestInit & {fetch?: RequestInit | Function}\n): Promise<Response> {\n  if (typeof url === 'string') {\n    url = resolvePath(url);\n\n    let fetchOptions: RequestInit = options as RequestInit;\n    if (options?.fetch && typeof options?.fetch !== 'function') {\n      fetchOptions = options.fetch;\n    }\n\n    return await fetch(url, fetchOptions);\n  }\n\n  return await makeResponse(url);\n}\n","// This function is needed in initialization stages,\n// make sure it can be imported in isolation\n\nimport isElectron from './is-electron';\n\nexport default function isBrowser(): boolean {\n  // Check if in browser by duck-typing Node context\n  const isNode =\n    // @ts-expect-error\n    typeof process === 'object' && String(process) === '[object process]' && !process.browser;\n\n  return !isNode || isElectron();\n}\n\n// document does not exist on worker thread\nexport function isBrowserMainThread(): boolean {\n  return isBrowser() && typeof document !== 'undefined';\n}\n","// based on https://github.com/cheton/is-electron\n// https://github.com/electron/electron/issues/2288\n/* eslint-disable complexity */\nexport default function isElectron(mockUserAgent?: string): boolean {\n  // Renderer process\n  if (\n    typeof window !== 'undefined' &&\n    typeof window.process === 'object' &&\n    // @ts-expect-error\n    window.process.type === 'renderer'\n  ) {\n    return true;\n  }\n  // Main process\n  if (\n    typeof process !== 'undefined' &&\n    typeof process.versions === 'object' &&\n    Boolean(process.versions.electron)\n  ) {\n    return true;\n  }\n  // Detect the user agent when the `nodeIntegration` option is set to true\n  const realUserAgent =\n    typeof navigator === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent;\n  const userAgent = mockUserAgent || realUserAgent;\n  if (userAgent && userAgent.indexOf('Electron') >= 0) {\n    return true;\n  }\n  return false;\n}\n","import checkIfBrowser from '../lib/is-browser';\n\nexport {self, window, global, document, process, console} from '../lib/globals';\n\n// Extract injected version from package.json (injected by babel plugin)\n// @ts-expect-error\nexport const VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : 'untranspiled source';\n\nexport const isBrowser = checkIfBrowser();\n","// probe.gl, MIT license\n\nfunction getStorage(type): Storage {\n  try {\n    // @ts-expect-error\n    const storage: Storage = window[type];\n    const x = '__storage_test__';\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return storage;\n  } catch (e) {\n    return null;\n  }\n}\n\n// Store keys in local storage via simple interface\nexport default class LocalStorage {\n  storage: Storage;\n  id: string;\n  config: Record<string, any> = {};\n\n  constructor(id: string, defaultSettings: Record<string, any> = {}, type = 'sessionStorage') {\n    this.storage = getStorage(type);\n    this.id = id;\n    this.config = {};\n    Object.assign(this.config, defaultSettings);\n    this._loadConfiguration();\n  }\n\n  getConfiguration() {\n    return this.config;\n  }\n\n  setConfiguration(configuration) {\n    this.config = {};\n    return this.updateConfiguration(configuration);\n  }\n\n  updateConfiguration(configuration) {\n    Object.assign(this.config, configuration);\n    if (this.storage) {\n      const serialized = JSON.stringify(this.config);\n      this.storage.setItem(this.id, serialized);\n    }\n    return this;\n  }\n\n  // Get config from persistent store, if available\n  _loadConfiguration() {\n    let configuration = {};\n    if (this.storage) {\n      const serializedConfiguration = this.storage.getItem(this.id);\n      configuration = serializedConfiguration ? JSON.parse(serializedConfiguration) : {};\n    }\n    Object.assign(this.config, configuration);\n    return this;\n  }\n}\n","// TODO: Currently unused, keeping in case we want it later for log formatting\nexport function formatTime(ms: number): string {\n  let formatted;\n  if (ms < 10) {\n    formatted = `${ms.toFixed(2)}ms`;\n  } else if (ms < 100) {\n    formatted = `${ms.toFixed(1)}ms`;\n  } else if (ms < 1000) {\n    formatted = `${ms.toFixed(0)}ms`;\n  } else {\n    formatted = `${(ms / 1000).toFixed(2)}s`;\n  }\n  return formatted;\n}\n\nexport function leftPad(string: string, length: number = 8): string {\n  const padLength = Math.max(length - string.length, 0);\n  return `${' '.repeat(padLength)}${string}`;\n}\n\nexport function rightPad(string: string, length: number = 8): string {\n  const padLength = Math.max(length - string.length, 0);\n  return `${string}${' '.repeat(padLength)}`;\n}\n\nexport function formatValue(v: unknown, opts: {isInteger?: boolean} = {}): string {\n  const EPSILON = 1e-16;\n  const {isInteger = false} = opts;\n  if (Array.isArray(v) || ArrayBuffer.isView(v)) {\n    return formatArrayValue(v, opts);\n  }\n  if (!Number.isFinite(v)) {\n    return String(v);\n  }\n  // @ts-expect-error\n  if (Math.abs(v) < EPSILON) {\n    return isInteger ? '0' : '0.';\n  }\n  if (isInteger) {\n    // @ts-expect-error\n    return v.toFixed(0);\n  }\n  // @ts-expect-error\n  if (Math.abs(v) > 100 && Math.abs(v) < 10000) {\n    // @ts-expect-error\n    return v.toFixed(0);\n  }\n  // @ts-expect-error\n  const string = v.toPrecision(2);\n  const decimal = string.indexOf('.0');\n  return decimal === string.length - 2 ? string.slice(0, -1) : string;\n}\n\n/** Helper to formatValue */\nfunction formatArrayValue(v, opts) {\n  const {maxElts = 16, size = 1} = opts;\n  let string = '[';\n  for (let i = 0; i < v.length && i < maxElts; ++i) {\n    if (i > 0) {\n      string += `,${i % size === 0 ? ' ' : ''}`;\n    }\n    string += formatValue(v[i], opts);\n  }\n  const terminator = v.length > maxElts ? '...' : ']';\n  return `${string}${terminator}`;\n}\n\n/** Inspired by https://github.com/hughsk/console-image (MIT license) */\nexport function formatImage(image, message, scale, maxWidth = 600) {\n  const imageUrl = image.src.replace(/\\(/g, '%28').replace(/\\)/g, '%29');\n\n  if (image.width > maxWidth) {\n    scale = Math.min(scale, maxWidth / image.width);\n  }\n\n  const width = image.width * scale;\n  const height = image.height * scale;\n\n  const style = [\n    'font-size:1px;',\n    `padding:${Math.floor(height / 2)}px ${Math.floor(width / 2)}px;`,\n    `line-height:${height}px;`,\n    `background:url(${imageUrl});`,\n    `background-size:${width}px ${height}px;`,\n    'color:transparent;'\n  ].join('');\n\n  return [`${message} %c+`, style];\n}\n","import {isBrowser} from '@probe.gl/env';\n\nexport enum COLOR {\n  BLACK = 30,\n  RED = 31,\n  GREEN = 32,\n  YELLOW = 33,\n  BLUE = 34,\n  MAGENTA = 35,\n  CYAN = 36,\n  WHITE = 37,\n\n  BRIGHT_BLACK = 90,\n  BRIGHT_RED = 91,\n  BRIGHT_GREEN = 92,\n  BRIGHT_YELLOW = 93,\n  BRIGHT_BLUE = 94,\n  BRIGHT_MAGENTA = 95,\n  BRIGHT_CYAN = 96,\n  BRIGHT_WHITE = 97\n}\n\nfunction getColor(color): number {\n  return typeof color === 'string' ? COLOR[color.toUpperCase()] || COLOR.WHITE : color;\n}\n\nexport function addColor(string, color, background?): string {\n  if (!isBrowser && typeof string === 'string') {\n    if (color) {\n      color = getColor(color);\n      string = `\\u001b[${color}m${string}\\u001b[39m`;\n    }\n    if (background) {\n      // background colors values are +10\n      color = getColor(background);\n      string = `\\u001b[${background + 10}m${string}\\u001b[49m`;\n    }\n  }\n  return string;\n}\n","export default function assert(condition: unknown, message?: string) {\n  if (!condition) {\n    throw new Error(message || 'Assertion failed');\n  }\n}\n","/* eslint-disable no-restricted-globals */\nconst globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document,\n  process: typeof process === 'object' && process\n};\n\nconst global_ = globalThis;\nconst self_ = globals.self || globals.window || globals.global;\nconst window_ = globals.window || globals.self || globals.global;\nconst document_ = globals.document || {};\nconst process_ = globals.process || {};\nconst console_ = console;\n\nexport {\n  self_ as self,\n  window_ as window,\n  global_ as global,\n  document_ as document,\n  process_ as process,\n  console_ as console\n};\n","// probe.gl, MIT license\n\nimport {window, process, isBrowser} from '@probe.gl/env';\n\n/** Get best timer available. */\nexport function getHiResTimestamp() {\n  let timestamp;\n  if (isBrowser && 'performance' in window) {\n    timestamp = window?.performance?.now?.();\n  } else if ('hrtime' in process) {\n    // @ts-ignore\n    const timeParts = process?.hrtime?.();\n    timestamp = timeParts[0] * 1000 + timeParts[1] / 1e6;\n  } else {\n    timestamp = Date.now();\n  }\n\n  return timestamp;\n}\n","// probe.gl, MIT license\n\n/* eslint-disable no-console */\nimport {VERSION, isBrowser} from '@probe.gl/env';\nimport LocalStorage from './utils/local-storage';\nimport {formatImage, formatTime, leftPad} from './utils/formatters';\nimport {addColor} from './utils/color';\nimport {autobind} from './utils/autobind';\nimport assert from './utils/assert';\nimport {getHiResTimestamp} from './utils/hi-res-timestamp';\n\n// Instrumentation in other packages may override console methods, so preserve them here\nconst originalConsole = {\n  debug: isBrowser ? console.debug || console.log : console.log,\n  log: console.log,\n  info: console.info,\n  warn: console.warn,\n  error: console.error\n};\n\ntype Table = Record<string, any>;\n\ntype LogFunction = () => void;\n\ntype LogSettings = {\n  enabled?: boolean;\n  level?: number;\n  [key: string]: any;\n};\n\nconst DEFAULT_SETTINGS: Required<LogSettings> = {\n  enabled: true,\n  level: 0\n};\n\nfunction noop() {} // eslint-disable-line @typescript-eslint/no-empty-function\n\nconst cache = {};\nconst ONCE = {once: true};\n\n// A console wrapper\n\nexport default class Log {\n  static VERSION = VERSION;\n\n  id: string;\n  VERSION: string = VERSION;\n  _startTs: number = getHiResTimestamp();\n  _deltaTs: number = getHiResTimestamp();\n  _storage: LocalStorage;\n  userData = {};\n\n  // TODO - fix support from throttling groups\n  LOG_THROTTLE_TIMEOUT: number = 0; // Time before throttled messages are logged again\n\n  constructor({id} = {id: ''}) {\n    this.id = id;\n    this._storage = new LocalStorage(`__probe-${this.id}__`, DEFAULT_SETTINGS);\n    this.userData = {};\n\n    this.timeStamp(`${this.id} started`);\n\n    autobind(this);\n    Object.seal(this);\n  }\n\n  set level(newLevel: number) {\n    this.setLevel(newLevel);\n  }\n\n  get level(): number {\n    return this.getLevel();\n  }\n\n  isEnabled(): boolean {\n    return this._storage.config.enabled;\n  }\n\n  getLevel(): number {\n    return this._storage.config.level;\n  }\n\n  /** @return {Number} milliseconds, with fractions */\n  getTotal() {\n    return Number((getHiResTimestamp() - this._startTs).toPrecision(10));\n  }\n\n  /** @return {Number} milliseconds, with fractions */\n  getDelta() {\n    return Number((getHiResTimestamp() - this._deltaTs).toPrecision(10));\n  }\n\n  /** @deprecated use logLevel */\n  set priority(newPriority) {\n    this.level = newPriority;\n  }\n\n  /** @deprecated use logLevel */\n  get priority() {\n    return this.level;\n  }\n\n  /** @deprecated use logLevel */\n  getPriority() {\n    return this.level;\n  }\n\n  // Configure\n\n  enable(enabled: boolean = true): this {\n    this._storage.updateConfiguration({enabled});\n    return this;\n  }\n\n  setLevel(level: number): this {\n    this._storage.updateConfiguration({level});\n    return this;\n  }\n\n  /** return the current status of the setting */\n  get(setting: string): any {\n    return this._storage.config[setting];\n  }\n\n  // update the status of the setting\n  set(setting: string, value: any): void {\n    this._storage.updateConfiguration({[setting]: value});\n  }\n\n  /** Logs the current settings as a table */\n  settings(): void {\n    if (console.table) {\n      console.table(this._storage.config);\n    } else {\n      console.log(this._storage.config);\n    }\n  }\n\n  // Unconditional logging\n\n  assert(condition: unknown, message?: string): void {\n    assert(condition, message);\n  }\n\n  /** Warn, but only once, no console flooding */\n  warn(message: string, ...args): LogFunction;\n  warn(message: string): LogFunction {\n    return this._getLogFunction(0, message, originalConsole.warn, arguments, ONCE);\n  }\n\n  /** Print an error */\n  error(message: string, ...args): LogFunction;\n  error(message: string): LogFunction {\n    return this._getLogFunction(0, message, originalConsole.error, arguments);\n  }\n\n  /** Print a deprecation warning */\n  deprecated(oldUsage: string, newUsage: string): LogFunction {\n    return this.warn(`\\`${oldUsage}\\` is deprecated and will be removed \\\nin a later version. Use \\`${newUsage}\\` instead`);\n  }\n\n  /** Print a removal warning */\n  removed(oldUsage: string, newUsage: string): LogFunction {\n    return this.error(`\\`${oldUsage}\\` has been removed. Use \\`${newUsage}\\` instead`);\n  }\n\n  // Conditional logging\n\n  /** Log to a group */\n  probe(logLevel, message?, ...args): LogFunction;\n  probe(logLevel, message?): LogFunction {\n    return this._getLogFunction(logLevel, message, originalConsole.log, arguments, {\n      time: true,\n      once: true\n    });\n  }\n\n  /** Log a debug message */\n  log(logLevel, message?, ...args): LogFunction;\n  log(logLevel, message?): LogFunction {\n    return this._getLogFunction(logLevel, message, originalConsole.debug, arguments);\n  }\n\n  /** Log a normal message */\n  info(logLevel, message?, ...args): LogFunction;\n  info(logLevel, message?): LogFunction {\n    return this._getLogFunction(logLevel, message, console.info, arguments);\n  }\n\n  /** Log a normal message, but only once, no console flooding */\n  once(logLevel, message?, ...args): LogFunction;\n  once(logLevel, message?, ...args) {\n    return this._getLogFunction(\n      logLevel,\n      message,\n      originalConsole.debug || originalConsole.info,\n      arguments,\n      ONCE\n    );\n  }\n\n  /** Logs an object as a table */\n  table(logLevel, table?, columns?): LogFunction {\n    if (table) {\n      // @ts-expect-error Not clear how this works, columns being passed as arguments\n      return this._getLogFunction(logLevel, table, console.table || noop, columns && [columns], {\n        tag: getTableHeader(table)\n      });\n    }\n    return noop;\n  }\n\n  /** logs an image under Chrome */\n  image({logLevel, priority, image, message = '', scale = 1}): LogFunction {\n    if (!this._shouldLog(logLevel || priority)) {\n      return noop;\n    }\n    return isBrowser\n      ? logImageInBrowser({image, message, scale})\n      : logImageInNode({image, message, scale});\n  }\n\n  time(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.time ? console.time : console.info);\n  }\n\n  timeEnd(logLevel, message) {\n    return this._getLogFunction(\n      logLevel,\n      message,\n      console.timeEnd ? console.timeEnd : console.info\n    );\n  }\n\n  timeStamp(logLevel, message?) {\n    return this._getLogFunction(logLevel, message, console.timeStamp || noop);\n  }\n\n  group(logLevel, message, opts = {collapsed: false}) {\n    const options = normalizeArguments({logLevel, message, opts});\n    const {collapsed} = opts;\n    // @ts-expect-error\n    options.method = (collapsed ? console.groupCollapsed : console.group) || console.info;\n\n    return this._getLogFunction(options);\n  }\n\n  groupCollapsed(logLevel, message, opts = {}) {\n    return this.group(logLevel, message, Object.assign({}, opts, {collapsed: true}));\n  }\n\n  groupEnd(logLevel) {\n    return this._getLogFunction(logLevel, '', console.groupEnd || noop);\n  }\n\n  // EXPERIMENTAL\n\n  withGroup(logLevel: number, message: string, func: Function): void {\n    this.group(logLevel, message)();\n\n    try {\n      func();\n    } finally {\n      this.groupEnd(logLevel)();\n    }\n  }\n\n  trace(): void {\n    if (console.trace) {\n      console.trace();\n    }\n  }\n\n  // PRIVATE METHODS\n\n  /** Deduces log level from a variety of arguments */\n  _shouldLog(logLevel: unknown): boolean {\n    return this.isEnabled() && this.getLevel() >= normalizeLogLevel(logLevel);\n  }\n\n  _getLogFunction(\n    logLevel: unknown,\n    message?: unknown,\n    method?: Function,\n    args?: IArguments,\n    opts?: Record<string, any>\n  ): LogFunction {\n    if (this._shouldLog(logLevel)) {\n      // normalized opts + timings\n      opts = normalizeArguments({logLevel, message, args, opts});\n      method = method || opts.method;\n      assert(method);\n\n      opts.total = this.getTotal();\n      opts.delta = this.getDelta();\n      // reset delta timer\n      this._deltaTs = getHiResTimestamp();\n\n      const tag = opts.tag || opts.message;\n\n      if (opts.once) {\n        if (!cache[tag]) {\n          cache[tag] = getHiResTimestamp();\n        } else {\n          return noop;\n        }\n      }\n\n      // TODO - Make throttling work with groups\n      // if (opts.nothrottle || !throttle(tag, this.LOG_THROTTLE_TIMEOUT)) {\n      //   return noop;\n      // }\n\n      message = decorateMessage(this.id, opts.message, opts);\n\n      // Bind console function so that it can be called after being returned\n      return method.bind(console, message, ...opts.args);\n    }\n    return noop;\n  }\n}\n\n/**\n * Get logLevel from first argument:\n * - log(logLevel, message, args) => logLevel\n * - log(message, args) => 0\n * - log({logLevel, ...}, message, args) => logLevel\n * - log({logLevel, message, args}) => logLevel\n */\nfunction normalizeLogLevel(logLevel: unknown): number {\n  if (!logLevel) {\n    return 0;\n  }\n  let resolvedLevel;\n\n  switch (typeof logLevel) {\n    case 'number':\n      resolvedLevel = logLevel;\n      break;\n\n    case 'object':\n      // Backward compatibility\n      // TODO - deprecate `priority`\n      // @ts-expect-error\n      resolvedLevel = logLevel.logLevel || logLevel.priority || 0;\n      break;\n\n    default:\n      return 0;\n  }\n  // 'log level must be a number'\n  assert(Number.isFinite(resolvedLevel) && resolvedLevel >= 0);\n\n  return resolvedLevel;\n}\n\n/**\n * \"Normalizes\" the various argument patterns into an object with known types\n * - log(logLevel, message, args) => {logLevel, message, args}\n * - log(message, args) => {logLevel: 0, message, args}\n * - log({logLevel, ...}, message, args) => {logLevel, message, args}\n * - log({logLevel, message, args}) => {logLevel, message, args}\n */\nexport function normalizeArguments(opts: {\n  logLevel;\n  message;\n  collapsed?: boolean;\n  args?: IArguments;\n  opts?;\n}): {\n  logLevel: number;\n  message: string;\n  args: any[];\n} {\n  const {logLevel, message} = opts;\n  opts.logLevel = normalizeLogLevel(logLevel);\n\n  // We use `arguments` instead of rest parameters (...args) because IE\n  // does not support the syntax. Rest parameters is transpiled to code with\n  // perf impact. Doing it here instead avoids constructing args when logging is\n  // disabled.\n  // TODO - remove when/if IE support is dropped\n  const args: any[] = opts.args ? Array.from(opts.args) : [];\n  // args should only contain arguments that appear after `message`\n  // eslint-disable-next-line no-empty\n  while (args.length && args.shift() !== message) {}\n\n  switch (typeof logLevel) {\n    case 'string':\n    case 'function':\n      if (message !== undefined) {\n        args.unshift(message);\n      }\n      opts.message = logLevel;\n      break;\n\n    case 'object':\n      Object.assign(opts, logLevel);\n      break;\n\n    default:\n  }\n\n  // Resolve functions into strings by calling them\n  if (typeof opts.message === 'function') {\n    opts.message = opts.message();\n  }\n  const messageType = typeof opts.message;\n  // 'log message must be a string' or object\n  assert(messageType === 'string' || messageType === 'object');\n\n  // original opts + normalized opts + opts arg + fixed up message\n  return Object.assign(opts, {args}, opts.opts);\n}\n\nfunction decorateMessage(id, message, opts) {\n  if (typeof message === 'string') {\n    const time = opts.time ? leftPad(formatTime(opts.total)) : '';\n    message = opts.time ? `${id}: ${time}  ${message}` : `${id}: ${message}`;\n    message = addColor(message, opts.color, opts.background);\n  }\n  return message;\n}\n\n/** Use the asciify module to log an image under node.js */\nfunction logImageInNode({image, message = '', scale = 1}) {\n  // Note: Runtime load of the \"asciify-image\" module, avoids including in browser bundles\n  let asciify = null;\n  try {\n    asciify = module.require('asciify-image');\n  } catch (error) {\n    // asciify not installed, silently ignore\n  }\n  if (asciify) {\n    return () =>\n      asciify(image, {fit: 'box', width: `${Math.round(80 * scale)}%`}).then(data =>\n        console.log(data)\n      );\n  }\n  return noop;\n}\n\nfunction logImageInBrowser({image, message = '', scale = 1}) {\n  if (typeof image === 'string') {\n    const img = new Image();\n    img.onload = () => {\n      const args = formatImage(img, message, scale);\n      console.log(...args);\n    };\n    img.src = image;\n    return noop;\n  }\n  const element = image.nodeName || '';\n  if (element.toLowerCase() === 'img') {\n    console.log(...formatImage(image, message, scale));\n    return noop;\n  }\n  if (element.toLowerCase() === 'canvas') {\n    const img = new Image();\n    img.onload = () => console.log(...formatImage(img, message, scale));\n    img.src = image.toDataURL();\n    return noop;\n  }\n  return noop;\n}\n\nfunction getTableHeader(table: Table): string {\n  for (const key in table) {\n    for (const title in table[key]) {\n      return title || 'untitled';\n    }\n  }\n  return 'empty';\n}\n","// Copyright (c) 2015 - 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n/**\n * Binds the \"this\" argument of all functions on a class instance to the instance\n * @param obj - class instance (typically a react component)\n */\nexport function autobind(obj: object, predefined = ['constructor']): void {\n  const proto = Object.getPrototypeOf(obj);\n  const propNames = Object.getOwnPropertyNames(proto);\n  for (const key of propNames) {\n    if (typeof obj[key] === 'function') {\n      if (!predefined.find(name => key === name)) {\n        obj[key] = obj[key].bind(obj);\n      }\n    }\n  }\n}\n","// probe.gl Log compatible loggers\nimport {Log} from 'probe.gl';\n\nexport const probeLog = new Log({id: 'loaders.gl'});\n\n// Logs nothing\nexport class NullLog {\n  log() {\n    return () => {};\n  }\n  info() {\n    return () => {};\n  }\n  warn() {\n    return () => {};\n  }\n  error() {\n    return () => {};\n  }\n}\n\n// Logs to console\nexport class ConsoleLog {\n  console;\n\n  constructor() {\n    this.console = console; // eslint-disable-line\n  }\n  log(...args) {\n    return this.console.log.bind(this.console, ...args);\n  }\n  info(...args) {\n    return this.console.info.bind(this.console, ...args);\n  }\n  warn(...args) {\n    return this.console.warn.bind(this.console, ...args);\n  }\n  error(...args) {\n    return this.console.error.bind(this.console, ...args);\n  }\n}\n","import type {LoaderOptions} from '@loaders.gl/loader-utils';\nimport {ConsoleLog} from './loggers';\n\nexport const DEFAULT_LOADER_OPTIONS: LoaderOptions = {\n  // baseUri\n  fetch: null,\n  mimeType: undefined,\n  nothrow: false,\n  log: new ConsoleLog(), // A probe.gl compatible (`log.log()()` syntax) that just logs to console\n\n  CDN: 'https://unpkg.com/@loaders.gl',\n  worker: true, // By default, use worker if provided by loader.\n  maxConcurrency: 3, // How many worker instances should be created for each loader.\n  maxMobileConcurrency: 1, // How many worker instances should be created for each loader on mobile devices.\n  reuseWorkers: true, // By default reuse workers,\n  _workerType: '', // 'test' to use locally generated workers\n\n  limit: 0,\n  _limitMB: 0,\n  batchSize: 'auto',\n  batchDebounceMs: 0,\n  metadata: false, // TODO - currently only implemented for parseInBatches, adds initial metadata batch,\n  transforms: []\n};\n\nexport const REMOVED_LOADER_OPTIONS = {\n  throws: 'nothrow',\n  dataType: '(no longer used)',\n  uri: 'baseUri',\n  // Warn if fetch options are used on top-level\n  method: 'fetch.method',\n  headers: 'fetch.headers',\n  body: 'fetch.body',\n  mode: 'fetch.mode',\n  credentials: 'fetch.credentials',\n  cache: 'fetch.cache',\n  redirect: 'fetch.redirect',\n  referrer: 'fetch.referrer',\n  referrerPolicy: 'fetch.referrerPolicy',\n  integrity: 'fetch.integrity',\n  keepalive: 'fetch.keepalive',\n  signal: 'fetch.signal'\n};\n","import type {Loader, LoaderContext, LoaderOptions} from '@loaders.gl/loader-utils';\nimport {isPureObject, isObject} from '../../javascript-utils/is-type';\nimport {fetchFile} from '../fetch/fetch-file';\nimport {probeLog, NullLog} from './loggers';\nimport {DEFAULT_LOADER_OPTIONS, REMOVED_LOADER_OPTIONS} from './option-defaults';\n/**\n * Global state for loaders.gl. Stored on `global.loaders._state`\n */\ntype GlobalLoaderState = {\n  loaderRegistry: Loader[];\n  globalOptions: {[key: string]: any};\n};\n\n/**\n * Helper for safely accessing global loaders.gl variables\n * Wraps initialization of global variable in function to defeat overly aggressive tree-shakers\n */\nexport function getGlobalLoaderState(): GlobalLoaderState {\n  // @ts-ignore\n  globalThis.loaders = globalThis.loaders || {};\n  // @ts-ignore\n  const {loaders} = globalThis;\n\n  // Add _state object to keep separate from modules added to globalThis.loaders\n  loaders._state = loaders._state || {};\n  return loaders._state;\n}\n\n// Store global loader options on the global object to increase chances of cross loaders-version interoperability\n// NOTE: This use case is not reliable but can help when testing new versions of loaders.gl with existing frameworks\nconst getGlobalLoaderOptions = () => {\n  const state = getGlobalLoaderState();\n  // Ensure all default loader options from this library are mentioned\n  state.globalOptions = state.globalOptions || {...DEFAULT_LOADER_OPTIONS};\n  return state.globalOptions;\n};\n\n/**\n * Set global loader options\n * @param options\n */\nexport function setGlobalOptions(options: object): void {\n  const state = getGlobalLoaderState();\n  const globalOptions = getGlobalLoaderOptions();\n  state.globalOptions = normalizeOptionsInternal(globalOptions, options);\n}\n\n/**\n * Merges options with global opts and loader defaults, also injects baseUri\n * @param options\n * @param loader\n * @param loaders\n * @param url\n */\nexport function normalizeOptions(\n  options: object,\n  loader: Loader,\n  loaders?: Loader[],\n  url?: string\n): object {\n  loaders = loaders || [];\n  loaders = Array.isArray(loaders) ? loaders : [loaders];\n\n  validateOptions(options, loaders);\n  return normalizeOptionsInternal(loader, options, url);\n}\n\n/**\n * Gets the current fetch function from options and context\n * @param options\n * @param context\n */\nexport function getFetchFunction(\n  options?: LoaderOptions,\n  context?: Omit<LoaderContext, 'fetch'> & Partial<Pick<LoaderContext, 'fetch'>>\n) {\n  const globalOptions = getGlobalLoaderOptions();\n\n  const fetchOptions = options || globalOptions;\n\n  // options.fetch can be a function\n  if (typeof fetchOptions.fetch === 'function') {\n    return fetchOptions.fetch;\n  }\n\n  // options.fetch can be an options object\n  if (isObject(fetchOptions.fetch)) {\n    return (url) => fetchFile(url, fetchOptions);\n  }\n\n  // else refer to context (from parent loader) if available\n  if (context?.fetch) {\n    return context?.fetch;\n  }\n\n  // else return the default fetch function\n  return fetchFile;\n}\n\n// VALIDATE OPTIONS\n\n/**\n * Warn for unsupported options\n * @param options\n * @param loaders\n */\nfunction validateOptions(options: LoaderOptions, loaders: Loader[]) {\n  // Check top level options\n  validateOptionsObject(options, null, DEFAULT_LOADER_OPTIONS, REMOVED_LOADER_OPTIONS, loaders);\n  for (const loader of loaders) {\n    // Get the scoped, loader specific options from the user supplied options\n    const idOptions = (options && options[loader.id]) || {};\n\n    // Get scoped, loader specific default and deprecated options from the selected loader\n    const loaderOptions = (loader.options && loader.options[loader.id]) || {};\n    const deprecatedOptions =\n      (loader.deprecatedOptions && loader.deprecatedOptions[loader.id]) || {};\n\n    // Validate loader specific options\n    validateOptionsObject(idOptions, loader.id, loaderOptions, deprecatedOptions, loaders);\n  }\n}\n\n// eslint-disable-next-line max-params, complexity\nfunction validateOptionsObject(\n  options,\n  id: string | null,\n  defaultOptions,\n  deprecatedOptions,\n  loaders: Loader[]\n) {\n  const loaderName = id || 'Top level';\n  const prefix = id ? `${id}.` : '';\n\n  for (const key in options) {\n    // If top level option value is an object it could options for a loader, so ignore\n    const isSubOptions = !id && isObject(options[key]);\n    const isBaseUriOption = key === 'baseUri' && !id;\n    const isWorkerUrlOption = key === 'workerUrl' && id;\n    // <loader>.workerUrl requires special handling as it is now auto-generated and no longer specified as a default option.\n    if (!(key in defaultOptions) && !isBaseUriOption && !isWorkerUrlOption) {\n      // Issue deprecation warnings\n      if (key in deprecatedOptions) {\n        probeLog.warn(\n          `${loaderName} loader option \\'${prefix}${key}\\' no longer supported, use \\'${deprecatedOptions[key]}\\'`\n        )();\n      } else if (!isSubOptions) {\n        const suggestion = findSimilarOption(key, loaders);\n        probeLog.warn(\n          `${loaderName} loader option \\'${prefix}${key}\\' not recognized. ${suggestion}`\n        )();\n      }\n    }\n  }\n}\n\nfunction findSimilarOption(optionKey, loaders) {\n  const lowerCaseOptionKey = optionKey.toLowerCase();\n  let bestSuggestion = '';\n  for (const loader of loaders) {\n    for (const key in loader.options) {\n      if (optionKey === key) {\n        return `Did you mean \\'${loader.id}.${key}\\'?`;\n      }\n      const lowerCaseKey = key.toLowerCase();\n      const isPartialMatch =\n        lowerCaseOptionKey.startsWith(lowerCaseKey) || lowerCaseKey.startsWith(lowerCaseOptionKey);\n      if (isPartialMatch) {\n        bestSuggestion = bestSuggestion || `Did you mean \\'${loader.id}.${key}\\'?`;\n      }\n    }\n  }\n  return bestSuggestion;\n}\n\nfunction normalizeOptionsInternal(loader, options, url?: string) {\n  const loaderDefaultOptions = loader.options || {};\n\n  const mergedOptions = {...loaderDefaultOptions};\n\n  addUrlOptions(mergedOptions, url);\n\n  // LOGGING: options.log can be set to `null` to defeat logging\n  if (mergedOptions.log === null) {\n    mergedOptions.log = new NullLog();\n  }\n\n  mergeNestedFields(mergedOptions, getGlobalLoaderOptions());\n  mergeNestedFields(mergedOptions, options);\n\n  return mergedOptions;\n}\n\n// Merge nested options objects\nfunction mergeNestedFields(mergedOptions, options) {\n  for (const key in options) {\n    // Check for nested options\n    // object in options => either no key in defaultOptions or object in defaultOptions\n    if (key in options) {\n      const value = options[key];\n      if (isPureObject(value) && isPureObject(mergedOptions[key])) {\n        mergedOptions[key] = {\n          ...mergedOptions[key],\n          ...options[key]\n        };\n      } else {\n        mergedOptions[key] = options[key];\n      }\n    }\n    // else: No need to merge nested opts, and the initial merge already copied over the nested options\n  }\n}\n\n// Harvest information from the url\n// TODO - baseUri should be a directory, i.e. remove file component from baseUri\n// TODO - extract extension?\n// TODO - extract query parameters?\n// TODO - should these be injected on context instead of options?\nfunction addUrlOptions(options, url?: string) {\n  if (url && !('baseUri' in options)) {\n    options.baseUri = url;\n  }\n}\n","// Replacement for the external assert method to reduce bundle size\n// Note: We don't use the second \"message\" argument in calling code,\n// so no need to support it here\n\n/** Throws an `Error` with the optional `message` if `condition` is falsy */\nexport function assert(condition: any, message?: string): void {\n  if (!condition) {\n    throw new Error(message || 'loaders.gl assertion failed.');\n  }\n}\n","// Version constant cannot be imported, it needs to correspond to the build version of **this** module.\n// __VERSION__ is injected by babel-plugin-version-inline\n\n// Change to `latest` on production branches\nconst DEFAULT_VERSION = 'latest';\ndeclare let __VERSION__: string;\nexport const VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : DEFAULT_VERSION;\nif (typeof __VERSION__ === 'undefined') {\n  // eslint-disable-next-line\n  console.error(\n    'loaders.gl: The __VERSION__ variable is not injected using babel plugin. Latest unstable workers would be fetched from the CDN.'\n  );\n}\n","// Purpose: include this in your module to avoids adding dependencies on\n// micro modules like 'global' and 'is-browser';\n\n/* eslint-disable no-restricted-globals */\nconst globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\n\nconst self_: {[key: string]: any} = globals.self || globals.window || globals.global || {};\nconst window_: {[key: string]: any} = globals.window || globals.self || globals.global || {};\nconst global_: {[key: string]: any} = globals.global || globals.self || globals.window || {};\nconst document_: {[key: string]: any} = globals.document || {};\n\nexport {self_ as self, window_ as window, global_ as global, document_ as document};\n\n/** true if running in the browser, false if running in Node.js */\nexport const isBrowser: boolean =\n  // @ts-ignore process.browser\n  typeof process !== 'object' || String(process) !== '[object process]' || process.browser;\n\n/** true if running on a worker thread */\nexport const isWorker: boolean = typeof importScripts === 'function';\n\n/** true if running on a mobile device */\nexport const isMobile: boolean =\n  typeof window !== 'undefined' && typeof window.orientation !== 'undefined';\n\n// Extract node major version\nconst matches =\n  typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\n\n/** Version of Node.js if running under Node, otherwise 0 */\nexport const nodeVersion: number = (matches && parseFloat(matches[1])) || 0;\n","import {assert} from '../env-utils/assert';\n\nconst workerURLCache = new Map();\n\n/**\n * Creates a loadable URL from worker source or URL\n * that can be used to create `Worker` instances.\n * Due to CORS issues it may be necessary to wrap a URL in a small importScripts\n * @param props\n * @param props.source Worker source\n * @param props.url Worker URL\n * @returns loadable url\n */\nexport function getLoadableWorkerURL(props: {source?: string; url?: string}) {\n  assert((props.source && !props.url) || (!props.source && props.url)); // Either source or url must be defined\n\n  let workerURL = workerURLCache.get(props.source || props.url);\n  if (!workerURL) {\n    // Differentiate worker urls from worker source code\n    if (props.url) {\n      workerURL = getLoadableWorkerURLFromURL(props.url);\n      workerURLCache.set(props.url, workerURL);\n    }\n\n    if (props.source) {\n      workerURL = getLoadableWorkerURLFromSource(props.source);\n      workerURLCache.set(props.source, workerURL);\n    }\n  }\n\n  assert(workerURL);\n  return workerURL;\n}\n\n/**\n * Build a loadable worker URL from worker URL\n * @param url\n * @returns loadable URL\n */\nfunction getLoadableWorkerURLFromURL(url: string): string {\n  // A local script url, we can use it to initialize a Worker directly\n  if (!url.startsWith('http')) {\n    return url;\n  }\n\n  // A remote script, we need to use `importScripts` to load from different origin\n  const workerSource = buildScriptSource(url);\n  return getLoadableWorkerURLFromSource(workerSource);\n}\n\n/**\n * Build a loadable worker URL from worker source\n * @param workerSource\n * @returns loadable url\n */\nfunction getLoadableWorkerURLFromSource(workerSource: string): string {\n  // NOTE: webworkify was previously used\n  // const blob = webworkify(workerSource, {bare: true});\n  const blob = new Blob([workerSource], {type: 'application/javascript'});\n  return URL.createObjectURL(blob);\n}\n\n/**\n * Per spec, worker cannot be initialized with a script from a different origin\n * However a local worker script can still import scripts from other origins,\n * so we simply build a wrapper script.\n *\n * @param workerUrl\n * @returns source\n */\nfunction buildScriptSource(workerUrl: string): string {\n  return `\\\ntry {\n  importScripts('${workerUrl}');\n} catch (error) {\n  console.error(error);\n  throw error;\n}`;\n}\n","// NOTE - there is a copy of this function is both in core and loader-utils\n// core does not need all the utils in loader-utils, just this one.\n\n/**\n * Returns an array of Transferrable objects that can be used with postMessage\n * https://developer.mozilla.org/en-US/docs/Web/API/Worker/postMessage\n * @param object data to be sent via postMessage\n * @param recursive - not for application use\n * @param transfers - not for application use\n * @returns a transfer list that can be passed to postMessage\n */\nexport function getTransferList(\n  object: any,\n  recursive: boolean = true,\n  transfers?: Set<any>\n): Transferable[] {\n  // Make sure that items in the transfer list is unique\n  const transfersSet = transfers || new Set();\n\n  if (!object) {\n    // ignore\n  } else if (isTransferable(object)) {\n    transfersSet.add(object);\n  } else if (isTransferable(object.buffer)) {\n    // Typed array\n    transfersSet.add(object.buffer);\n  } else if (ArrayBuffer.isView(object)) {\n    // object is a TypeArray viewing into a SharedArrayBuffer (not transferable)\n    // Do not iterate through the content in this case\n  } else if (recursive && typeof object === 'object') {\n    for (const key in object) {\n      // Avoid perf hit - only go one level deep\n      getTransferList(object[key], recursive, transfersSet);\n    }\n  }\n\n  // If transfers is defined, is internal recursive call\n  // Otherwise it's called by the user\n  return transfers === undefined ? Array.from(transfersSet) : [];\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Transferable\nfunction isTransferable(object: unknown) {\n  if (!object) {\n    return false;\n  }\n  if (object instanceof ArrayBuffer) {\n    return true;\n  }\n  if (typeof MessagePort !== 'undefined' && object instanceof MessagePort) {\n    return true;\n  }\n  if (typeof ImageBitmap !== 'undefined' && object instanceof ImageBitmap) {\n    return true;\n  }\n  // @ts-ignore\n  if (typeof OffscreenCanvas !== 'undefined' && object instanceof OffscreenCanvas) {\n    return true;\n  }\n  return false;\n}\n","import {assert} from '../env-utils/assert';\nimport {getLoadableWorkerURL} from '../worker-utils/get-loadable-worker-url';\nimport {getTransferList} from '../worker-utils/get-transfer-list';\n\nconst NOOP = () => {};\n\nexport type WorkerThreadProps = {\n  name: string;\n  source?: string;\n  url?: string;\n};\n\n/**\n * Represents one worker thread\n */\nexport default class WorkerThread {\n  readonly name: string;\n  readonly source: string | undefined;\n  readonly url: string | undefined;\n  terminated: boolean = false;\n  worker: Worker;\n  onMessage: (message: any) => void;\n  onError: (error: Error) => void;\n\n  private _loadableURL: string = '';\n\n  static isSupported(): boolean {\n    return typeof Worker !== 'undefined';\n  }\n\n  constructor(props: WorkerThreadProps) {\n    const {name, source, url} = props;\n    assert(source || url); // Either source or url must be defined\n    this.name = name;\n    this.source = source;\n    this.url = url;\n    this.onMessage = NOOP;\n    this.onError = (error) => console.log(error); // eslint-disable-line\n\n    this.worker = this._createBrowserWorker();\n  }\n\n  /**\n   * Terminate this worker thread\n   * @note Can free up significant memory\n   */\n  destroy(): void {\n    this.onMessage = NOOP;\n    this.onError = NOOP;\n    // @ts-ignore\n    this.worker.terminate();\n    this.terminated = true;\n  }\n\n  get isRunning() {\n    return Boolean(this.onMessage);\n  }\n\n  /**\n   * Send a message to this worker thread\n   * @param data any data structure, ideally consisting mostly of transferrable objects\n   * @param transferList If not supplied, calculated automatically by traversing data\n   */\n  postMessage(data: any, transferList?: any[]): void {\n    transferList = transferList || getTransferList(data);\n    // @ts-ignore\n    this.worker.postMessage(data, transferList);\n  }\n\n  // PRIVATE\n\n  /**\n   * Generate a standard Error from an ErrorEvent\n   * @param {ErrorEvent} event\n   */\n  _getErrorFromErrorEvent(event: ErrorEvent): Error {\n    // Note Error object does not have the expected fields if loading failed completely\n    // https://developer.mozilla.org/en-US/docs/Web/API/Worker#Event_handlers\n    // https://developer.mozilla.org/en-US/docs/Web/API/ErrorEvent\n    let message = 'Failed to load ';\n    message += `worker ${this.name} from ${this.url}. `;\n    if (event.message) {\n      message += `${event.message} in `;\n    }\n    // const hasFilename = event.filename && !event.filename.startsWith('blob:');\n    // message += hasFilename ? event.filename : this.source.slice(0, 100);\n    if (event.lineno) {\n      message += `:${event.lineno}:${event.colno}`;\n    }\n    return new Error(message);\n  }\n\n  /**\n   * Creates a worker thread on the browser\n   */\n  _createBrowserWorker() {\n    this._loadableURL = getLoadableWorkerURL({source: this.source, url: this.url});\n    const worker = new Worker(this._loadableURL, {name: this.name});\n\n    worker.onmessage = (event) => {\n      if (!event.data) {\n        this.onError(new Error('No data received'));\n      } else {\n        this.onMessage(event.data);\n      }\n    };\n    // This callback represents an uncaught exception in the worker thread\n    worker.onerror = (error: ErrorEvent): void => {\n      this.onError(this._getErrorFromErrorEvent(error));\n      this.terminated = true;\n    };\n    // TODO - not clear when this would be called, for now just log in case it happens\n    worker.onmessageerror = (event) => console.error(event); // eslint-disable-line\n\n    return worker;\n  }\n}\n","import type {WorkerMessageType, WorkerMessagePayload} from '../../types';\nimport WorkerThread from './worker-thread';\nimport {assert} from '../env-utils/assert';\n\n/**\n * Represents one Job handled by a WorkerPool or WorkerFarm\n */\nexport default class WorkerJob {\n  readonly name: string;\n  readonly workerThread: WorkerThread;\n  isRunning: boolean;\n  /** Promise that resolves when Job is done */\n  readonly result: Promise<any>;\n\n  private _resolve: (value: any) => void;\n  private _reject: (reason?: any) => void;\n\n  constructor(jobName: string, workerThread: WorkerThread) {\n    this.name = jobName;\n    this.workerThread = workerThread;\n    this.isRunning = true;\n    this._resolve = () => {};\n    this._reject = () => {};\n    this.result = new Promise((resolve, reject) => {\n      this._resolve = resolve;\n      this._reject = reject;\n    });\n  }\n\n  /**\n   * Send a message to the job's worker thread\n   * @param data any data structure, ideally consisting mostly of transferrable objects\n   */\n  postMessage(type: WorkerMessageType, payload: WorkerMessagePayload): void {\n    this.workerThread.postMessage({\n      source: 'loaders.gl', // Lets worker ignore unrelated messages\n      type,\n      payload\n    });\n  }\n\n  /**\n   * Call to resolve the `result` Promise with the supplied value\n   */\n  done(value: any): void {\n    assert(this.isRunning);\n    this.isRunning = false;\n    this._resolve(value);\n  }\n\n  /**\n   * Call to reject the `result` Promise with the supplied error\n   */\n  error(error: Error): void {\n    assert(this.isRunning);\n    this.isRunning = false;\n    this._reject(error);\n  }\n}\n","import type {WorkerMessageType, WorkerMessagePayload} from '../../types';\nimport {isMobile} from '../env-utils/globals';\nimport WorkerThread from './worker-thread';\nimport WorkerJob from './worker-job';\n\n/** WorkerPool onDebug Callback Parameters */\ntype OnDebugParameters = {\n  message: string;\n  worker: string;\n  name: string;\n  job: string;\n  backlog: number;\n  workerThread: WorkerThread;\n};\n\n/** WorkerPool Properties */\nexport type WorkerPoolProps = {\n  name?: string;\n  source?: string; // | Function;\n  url?: string;\n  maxConcurrency?: number;\n  maxMobileConcurrency?: number;\n  onDebug?: (options: OnDebugParameters) => any;\n  reuseWorkers?: boolean;\n};\n\n/** Private helper types */\ntype OnMessage = (job: WorkerJob, type: WorkerMessageType, payload: WorkerMessagePayload) => void;\ntype OnError = (job: WorkerJob, error: Error) => void;\n\ntype QueuedJob = {\n  name: string;\n  onMessage: OnMessage;\n  onError: OnError;\n  onStart: (value: any) => void; // Resolve job start promise\n};\n\n/**\n * Process multiple data messages with small pool of identical workers\n */\nexport default class WorkerPool {\n  name: string = 'unnamed';\n  source?: string; // | Function;\n  url?: string;\n  maxConcurrency: number = 1;\n  maxMobileConcurrency: number = 1;\n  onDebug: (options: OnDebugParameters) => any = () => {};\n  reuseWorkers: boolean = true;\n\n  private props: WorkerPoolProps = {};\n  private jobQueue: QueuedJob[] = [];\n  private idleQueue: WorkerThread[] = [];\n  private count = 0;\n  private isDestroyed = false;\n\n  /**\n   * @param processor - worker function\n   * @param maxConcurrency - max count of workers\n   */\n  constructor(props: WorkerPoolProps) {\n    this.source = props.source;\n    this.url = props.url;\n    this.setProps(props);\n  }\n\n  /**\n   * Terminates all workers in the pool\n   * @note Can free up significant memory\n   */\n  destroy(): void {\n    // Destroy idle workers, active Workers will be destroyed on completion\n    this.idleQueue.forEach((worker) => worker.destroy());\n    this.isDestroyed = true;\n  }\n\n  setProps(props: WorkerPoolProps) {\n    this.props = {...this.props, ...props};\n\n    if (props.name !== undefined) {\n      this.name = props.name;\n    }\n    if (props.maxConcurrency !== undefined) {\n      this.maxConcurrency = props.maxConcurrency;\n    }\n    if (props.maxMobileConcurrency !== undefined) {\n      this.maxMobileConcurrency = props.maxMobileConcurrency;\n    }\n    if (props.reuseWorkers !== undefined) {\n      this.reuseWorkers = props.reuseWorkers;\n    }\n    if (props.onDebug !== undefined) {\n      this.onDebug = props.onDebug;\n    }\n  }\n\n  async startJob(\n    name: string,\n    onMessage: OnMessage = (job, type, data) => job.done(data),\n    onError: OnError = (job, error) => job.error(error)\n  ): Promise<WorkerJob> {\n    // Promise resolves when thread starts working on this job\n    const startPromise = new Promise<WorkerJob>((onStart) => {\n      // Promise resolves when thread completes or fails working on this job\n      this.jobQueue.push({name, onMessage, onError, onStart});\n      return this;\n    });\n    this._startQueuedJob(); // eslint-disable-line @typescript-eslint/no-floating-promises\n    return await startPromise;\n  }\n\n  // PRIVATE\n\n  /**\n   * Starts first queued job if worker is available or can be created\n   * Called when job is started and whenever a worker returns to the idleQueue\n   */\n  async _startQueuedJob(): Promise<void> {\n    if (!this.jobQueue.length) {\n      return;\n    }\n\n    const workerThread = this._getAvailableWorker();\n    if (!workerThread) {\n      return;\n    }\n\n    // We have a worker, dequeue and start the job\n    const queuedJob = this.jobQueue.shift();\n    if (queuedJob) {\n      // Emit a debug event\n      // @ts-ignore\n      this.onDebug({\n        message: 'Starting job',\n        name: queuedJob.name,\n        workerThread,\n        backlog: this.jobQueue.length\n      });\n\n      // Create a worker job to let the app access thread and manage job completion\n      const job = new WorkerJob(queuedJob.name, workerThread);\n\n      // Set the worker thread's message handlers\n      workerThread.onMessage = (data) => queuedJob.onMessage(job, data.type, data.payload);\n      workerThread.onError = (error) => queuedJob.onError(job, error);\n\n      // Resolve the start promise so that the app can start sending messages to worker\n      queuedJob.onStart(job);\n\n      // Wait for the app to signal that the job is complete, then return worker to queue\n      try {\n        await job.result;\n      } finally {\n        this.returnWorkerToQueue(workerThread);\n      }\n    }\n  }\n\n  /**\n   * Returns a worker to the idle queue\n   * Destroys the worker if\n   *  - pool is destroyed\n   *  - if this pool doesn't reuse workers\n   *  - if maxConcurrency has been lowered\n   * @param worker\n   */\n  returnWorkerToQueue(worker: WorkerThread) {\n    const shouldDestroyWorker =\n      this.isDestroyed || !this.reuseWorkers || this.count > this._getMaxConcurrency();\n\n    if (shouldDestroyWorker) {\n      worker.destroy();\n      this.count--;\n    } else {\n      this.idleQueue.push(worker);\n    }\n\n    if (!this.isDestroyed) {\n      this._startQueuedJob(); // eslint-disable-line @typescript-eslint/no-floating-promises\n    }\n  }\n\n  /**\n   * Returns idle worker or creates new worker if maxConcurrency has not been reached\n   */\n  _getAvailableWorker(): WorkerThread | null {\n    // If a worker has completed and returned to the queue, it can be used\n    if (this.idleQueue.length > 0) {\n      return this.idleQueue.shift() || null;\n    }\n\n    // Create fresh worker if we haven't yet created the max amount of worker threads for this worker source\n    if (this.count < this._getMaxConcurrency()) {\n      this.count++;\n      const name = `${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;\n      return new WorkerThread({name, source: this.source, url: this.url});\n    }\n\n    // No worker available, have to wait\n    return null;\n  }\n\n  _getMaxConcurrency() {\n    return isMobile ? this.maxMobileConcurrency : this.maxConcurrency;\n  }\n}\n","import WorkerPool from './worker-pool';\nimport WorkerThread from './worker-thread';\n\n/**\n * @param maxConcurrency {number} - max count of workers\n */\nexport type WorkerFarmProps = {\n  maxConcurrency?: number;\n  maxMobileConcurrency?: number;\n  reuseWorkers?: boolean;\n  onDebug?: () => void;\n};\n\nconst DEFAULT_PROPS: WorkerFarmProps = {\n  maxConcurrency: 3,\n  maxMobileConcurrency: 1,\n  onDebug: () => {},\n  reuseWorkers: true\n};\n\n/**\n * Process multiple jobs with a \"farm\" of different workers in worker pools.\n */\nexport default class WorkerFarm {\n  private props: WorkerFarmProps;\n  private workerPools = new Map<string, WorkerPool>();\n  // singleton\n  private static _workerFarm?: WorkerFarm;\n\n  /** Check if Workers are supported */\n  static isSupported(): boolean {\n    return WorkerThread.isSupported();\n  }\n\n  /** Get the singleton instance of the global worker farm */\n  static getWorkerFarm(props: WorkerFarmProps = {}): WorkerFarm {\n    WorkerFarm._workerFarm = WorkerFarm._workerFarm || new WorkerFarm({});\n    WorkerFarm._workerFarm.setProps(props);\n    return WorkerFarm._workerFarm;\n  }\n\n  /** get global instance with WorkerFarm.getWorkerFarm() */\n  private constructor(props: WorkerFarmProps) {\n    this.props = {...DEFAULT_PROPS};\n    this.setProps(props);\n    /** @type Map<string, WorkerPool>} */\n    this.workerPools = new Map();\n  }\n\n  /**\n   * Terminate all workers in the farm\n   * @note Can free up significant memory\n   */\n  destroy(): void {\n    for (const workerPool of this.workerPools.values()) {\n      workerPool.destroy();\n    }\n  }\n\n  /**\n   * Set props used when initializing worker pools\n   * @param props\n   */\n  setProps(props: WorkerFarmProps): void {\n    this.props = {...this.props, ...props};\n    // Update worker pool props\n    for (const workerPool of this.workerPools.values()) {\n      workerPool.setProps(this._getWorkerPoolProps());\n    }\n  }\n\n  /**\n   * Returns a worker pool for the specified worker\n   * @param options - only used first time for a specific worker name\n   * @param options.name - the name of the worker - used to identify worker pool\n   * @param options.url -\n   * @param options.source -\n   * @example\n   *   const job = WorkerFarm.getWorkerFarm().getWorkerPool({name, url}).startJob(...);\n   */\n  getWorkerPool(options: {name: string; source?: string; url?: string}): WorkerPool {\n    const {name, source, url} = options;\n    let workerPool = this.workerPools.get(name);\n    if (!workerPool) {\n      workerPool = new WorkerPool({\n        name,\n        source,\n        url\n      });\n      workerPool.setProps(this._getWorkerPoolProps());\n      this.workerPools.set(name, workerPool);\n    }\n    return workerPool;\n  }\n\n  _getWorkerPoolProps() {\n    return {\n      maxConcurrency: this.props.maxConcurrency,\n      maxMobileConcurrency: this.props.maxMobileConcurrency,\n      reuseWorkers: this.props.reuseWorkers,\n      onDebug: this.props.onDebug\n    };\n  }\n}\n","import type {WorkerObject, WorkerOptions} from '../../types';\nimport {assert} from '../env-utils/assert';\nimport {VERSION as __VERSION__} from '../env-utils/version';\n\nconst NPM_TAG = 'latest'; // Change to 'latest' on release-branch\nconst VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : NPM_TAG;\n\n/**\n * Gets worker object's name (for debugging in Chrome thread inspector window)\n */\nexport function getWorkerName(worker: WorkerObject): string {\n  const warning = worker.version !== VERSION ? ` (worker-utils@${VERSION})` : '';\n  return `${worker.name}@${worker.version}${warning}`;\n}\n\n/**\n * Generate a worker URL based on worker object and options\n * @returns A URL to one of the following:\n * - a published worker on unpkg CDN\n * - a local test worker\n * - a URL provided by the user in options\n */\nexport function getWorkerURL(worker: WorkerObject, options: WorkerOptions = {}): string {\n  const workerOptions = options[worker.id] || {};\n\n  const workerFile = `${worker.id}-worker.js`;\n\n  let url = workerOptions.workerUrl;\n\n  // HACK: Allow for non-nested workerUrl for the CompressionWorker.\n  // For the compression worker, workerOptions is currently not nested correctly. For most loaders,\n  // you'd have options within an object, i.e. `{mvt: {coordinates: ...}}` but the CompressionWorker\n  // puts options at the top level, not within a `compression` key (its `id`). For this reason, the\n  // above `workerOptions` will always be a string (i.e. `'gzip'`) for the CompressionWorker. To not\n  // break backwards compatibility, we allow the CompressionWorker to have options at the top level.\n  if (!url && worker.id === 'compression') {\n    url = options.workerUrl;\n  }\n\n  // If URL is test, generate local loaders.gl url\n  // @ts-ignore _workerType\n  if (options._workerType === 'test') {\n    url = `modules/${worker.module}/dist/${workerFile}`;\n  }\n\n  // If url override is not provided, generate a URL to published version on npm CDN unpkg.com\n  if (!url) {\n    // GENERATE\n    let version = worker.version;\n    // On master we need to load npm alpha releases published with the `beta` tag\n    if (version === 'latest') {\n      // throw new Error('latest worker version specified');\n      version = NPM_TAG;\n    }\n    const versionTag = version ? `@${version}` : '';\n    url = `https://unpkg.com/@loaders.gl/${worker.module}${versionTag}/dist/${workerFile}`;\n  }\n\n  assert(url);\n\n  // Allow user to override location\n  return url;\n}\n","import type {WorkerJob, WorkerMessageType, WorkerMessagePayload} from '@loaders.gl/worker-utils';\nimport type {Loader, LoaderOptions, LoaderContext} from '../../types';\nimport {WorkerFarm, getWorkerURL} from '@loaders.gl/worker-utils';\n\n/**\n * Determines if a loader can parse with worker\n * @param loader\n * @param options\n */\nexport function canParseWithWorker(loader: Loader, options?: LoaderOptions) {\n  if (!WorkerFarm.isSupported()) {\n    return false;\n  }\n\n  return loader.worker && options?.worker;\n}\n\n/**\n * this function expects that the worker function sends certain messages,\n * this can be automated if the worker is wrapper by a call to createLoaderWorker in @loaders.gl/loader-utils.\n */\nexport async function parseWithWorker(\n  loader: Loader,\n  data: any,\n  options?: LoaderOptions,\n  context?: LoaderContext,\n  parseOnMainThread?: (arrayBuffer: ArrayBuffer, options: {[key: string]: any}) => Promise<void>\n) {\n  const name = loader.id; // TODO\n  const url = getWorkerURL(loader, options);\n\n  const workerFarm = WorkerFarm.getWorkerFarm(options);\n  const workerPool = workerFarm.getWorkerPool({name, url});\n\n  // options.log object contains functions which cannot be transferred\n  // TODO - decide how to handle logging on workers\n  options = JSON.parse(JSON.stringify(options));\n\n  const job = await workerPool.startJob(\n    'process-on-worker',\n    // @ts-expect-error\n    onMessage.bind(null, parseOnMainThread) // eslint-disable-line @typescript-eslint/no-misused-promises\n  );\n\n  job.postMessage('process', {\n    // @ts-ignore\n    input: data,\n    options\n  });\n\n  const result = await job.result;\n  // TODO - what is going on here?\n  return await result.result;\n}\n\n/**\n * Handle worker's responses to the main thread\n * @param job\n * @param type\n * @param payload\n */\nasync function onMessage(\n  parseOnMainThread: (arrayBuffer: ArrayBuffer, options?: {[key: string]: any}) => Promise<void>,\n  job: WorkerJob,\n  type: WorkerMessageType,\n  payload: WorkerMessagePayload\n) {\n  switch (type) {\n    case 'done':\n      job.done(payload);\n      break;\n\n    case 'error':\n      job.error(new Error(payload.error));\n      break;\n\n    case 'process':\n      // Worker is asking for main thread to parseO\n      const {id, input, options} = payload;\n      try {\n        const result = await parseOnMainThread(input, options);\n        job.postMessage('done', {id, result});\n      } catch (error) {\n        const message = error instanceof Error ? error.message : 'unknown error';\n        job.postMessage('error', {id, error: message});\n      }\n      break;\n\n    default:\n      // eslint-disable-next-line\n      console.warn(`parse-with-worker unknown message ${type}`);\n  }\n}\n","import * as node from '../node/buffer';\n\n/**\n * Check for Node.js `Buffer` (without triggering bundler to include Buffer polyfill on browser)\n */\nexport function isBuffer(value: any): boolean {\n  return value && typeof value === 'object' && value.isBuffer;\n}\n\n/**\n * Converts to Node.js `Buffer` (without triggering bundler to include Buffer polyfill on browser)\n * @todo better data type\n */\nexport function toBuffer(data: any): Buffer {\n  return node.toBuffer ? node.toBuffer(data) : data;\n}\n\n/**\n * Converts Node.js `Buffer` to `ArrayBuffer` (without triggering bundler to include Buffer polyfill on browser)\n * @todo better data type\n */\nexport function bufferToArrayBuffer(buffer: any): ArrayBuffer {\n  if (isBuffer(buffer)) {\n    const typedArray = new Uint8Array(buffer.buffer, buffer.byteOffset, buffer.length);\n    return typedArray.slice().buffer;\n  }\n  return buffer;\n}\n","import {TypedArray} from '../../types';\nimport {isBuffer, bufferToArrayBuffer} from './buffer-utils';\n\n/**\n * Convert an object to an array buffer\n */\nexport function toArrayBuffer(data: any): ArrayBuffer {\n  // Note: Should be called first, Buffers can trigger other detections below\n  if (isBuffer(data)) {\n    return bufferToArrayBuffer(data);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return data;\n  }\n\n  // Careful - Node Buffers look like Uint8Arrays (keep after isBuffer)\n  if (ArrayBuffer.isView(data)) {\n    if (data.byteOffset === 0 && data.byteLength === data.buffer.byteLength) {\n      return data.buffer;\n    }\n    return data.buffer.slice(data.byteOffset, data.byteOffset + data.byteLength);\n  }\n\n  if (typeof data === 'string') {\n    const text = data;\n    const uint8Array = new TextEncoder().encode(text);\n    return uint8Array.buffer;\n  }\n\n  // HACK to support Blob polyfill\n  if (data && typeof data === 'object' && data._toArrayBuffer) {\n    return data._toArrayBuffer();\n  }\n\n  throw new Error('toArrayBuffer');\n}\n\n/**\n * compare two binary arrays for equality\n * @param {ArrayBuffer} a\n * @param {ArrayBuffer} b\n * @param {number} byteLength\n */\nexport function compareArrayBuffers(\n  arrayBuffer1: ArrayBuffer,\n  arrayBuffer2: ArrayBuffer,\n  byteLength?: number\n): boolean {\n  byteLength = byteLength || arrayBuffer1.byteLength;\n  if (arrayBuffer1.byteLength < byteLength || arrayBuffer2.byteLength < byteLength) {\n    return false;\n  }\n  const array1 = new Uint8Array(arrayBuffer1);\n  const array2 = new Uint8Array(arrayBuffer2);\n  for (let i = 0; i < array1.length; ++i) {\n    if (array1[i] !== array2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Concatenate a sequence of ArrayBuffers\n * @return A concatenated ArrayBuffer\n */\nexport function concatenateArrayBuffers(...sources: (ArrayBuffer | Uint8Array)[]): ArrayBuffer {\n  // Make sure all inputs are wrapped in typed arrays\n  const sourceArrays = sources.map((source2) =>\n    source2 instanceof ArrayBuffer ? new Uint8Array(source2) : source2\n  );\n\n  // Get length of all inputs\n  const byteLength = sourceArrays.reduce((length, typedArray) => length + typedArray.byteLength, 0);\n\n  // Allocate array with space for all inputs\n  const result = new Uint8Array(byteLength);\n\n  // Copy the subarrays\n  let offset = 0;\n  for (const sourceArray of sourceArrays) {\n    result.set(sourceArray, offset);\n    offset += sourceArray.byteLength;\n  }\n\n  // We work with ArrayBuffers, discard the typed array wrapper\n  return result.buffer;\n}\n\n/**\n * Concatenate arbitrary count of typed arrays\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Typed_arrays\n * @param {...*} arrays - list of arrays. All arrays should be the same type\n * @return A concatenated TypedArray\n */\nexport function concatenateTypedArrays<T>(...typedArrays: T[]): T {\n  // @ts-ignore\n  const arrays = typedArrays as TypedArray[];\n  // @ts-ignore\n  const TypedArrayConstructor = (arrays && arrays.length > 1 && arrays[0].constructor) || null;\n  if (!TypedArrayConstructor) {\n    throw new Error(\n      '\"concatenateTypedArrays\" - incorrect quantity of arguments or arguments have incompatible data types'\n    );\n  }\n\n  const sumLength = arrays.reduce((acc, value) => acc + value.length, 0);\n  // @ts-ignore typescript does not like dynamic constructors\n  const result = new TypedArrayConstructor(sumLength);\n  let offset = 0;\n  for (const array of arrays) {\n    result.set(array, offset);\n    offset += array.length;\n  }\n  return result;\n}\n\n/**\n * Copy a view of an ArrayBuffer into new ArrayBuffer with byteOffset = 0\n * @param arrayBuffer\n * @param byteOffset\n * @param byteLength\n */\nexport function sliceArrayBuffer(\n  arrayBuffer: ArrayBuffer,\n  byteOffset: number,\n  byteLength?: number\n): ArrayBuffer {\n  const subArray =\n    byteLength !== undefined\n      ? new Uint8Array(arrayBuffer).subarray(byteOffset, byteOffset + byteLength)\n      : new Uint8Array(arrayBuffer).subarray(byteOffset);\n  const arrayCopy = new Uint8Array(subArray);\n  return arrayCopy.buffer;\n}\n","import {concatenateArrayBuffers} from '../binary-utils/array-buffer-utils';\n\n// GENERAL UTILITIES\n\n/**\n * Iterate over async iterator, without resetting iterator if end is not reached\n * - forEach intentionally does not reset iterator if exiting loop prematurely\n *   so that iteration can continue in a second loop\n * - It is recommended to use a standard for-await as last loop to ensure\n *   iterator gets properly reset\n *\n * TODO - optimize using sync iteration if argument is an Iterable?\n *\n * @param iterator\n * @param visitor\n */\nexport async function forEach(iterator, visitor) {\n  // eslint-disable-next-line\n  while (true) {\n    const {done, value} = await iterator.next();\n    if (done) {\n      iterator.return();\n      return;\n    }\n    const cancel = visitor(value);\n    if (cancel) {\n      return;\n    }\n  }\n}\n\n// Breaking big data into iterable chunks, concatenating iterable chunks into big data objects\n\n/**\n * Concatenates all data chunks yielded by an (async) iterator\n * This function can e.g. be used to enable atomic parsers to work on (async) iterator inputs\n */\n\nexport async function concatenateArrayBuffersAsync(\n  asyncIterator: AsyncIterable<ArrayBuffer> | Iterable<ArrayBuffer>\n): Promise<ArrayBuffer> {\n  const arrayBuffers: ArrayBuffer[] = [];\n  for await (const chunk of asyncIterator) {\n    arrayBuffers.push(chunk);\n  }\n  return concatenateArrayBuffers(...arrayBuffers);\n}\n\nexport async function concatenateStringsAsync(\n  asyncIterator: AsyncIterable<string> | Iterable<string>\n): Promise<string> {\n  const strings: string[] = [];\n  for await (const chunk of asyncIterator) {\n    strings.push(chunk);\n  }\n  return strings.join('');\n}\n","import type {IteratorOptions} from './make-iterator';\n\nconst DEFAULT_CHUNK_SIZE = 256 * 1024;\n\n/**\n * Returns an iterator that breaks a big ArrayBuffer into chunks and yields them one-by-one\n * @param blob ArrayBuffer to iterate over\n * @param options\n * @param options.chunkSize\n */\nexport function* makeArrayBufferIterator(\n  arrayBuffer: ArrayBuffer,\n  options: IteratorOptions = {}\n): Iterable<ArrayBuffer> {\n  const {chunkSize = DEFAULT_CHUNK_SIZE} = options;\n\n  let byteOffset = 0;\n\n  while (byteOffset < arrayBuffer.byteLength) {\n    // Create a chunk of the right size\n    const chunkByteLength = Math.min(arrayBuffer.byteLength - byteOffset, chunkSize);\n    const chunk = new ArrayBuffer(chunkByteLength);\n\n    // Copy data from the big chunk\n    const sourceArray = new Uint8Array(arrayBuffer, byteOffset, chunkByteLength);\n    const chunkArray = new Uint8Array(chunk);\n    chunkArray.set(sourceArray);\n\n    // yield the chunk\n    byteOffset += chunkByteLength;\n    yield chunk;\n  }\n}\n","// Purpose: include this in your module to avoid\n// dependencies on micro modules like 'global' and 'is-browser';\n\n/* eslint-disable no-restricted-globals */\nconst globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\n\ntype obj = {[key: string]: any};\nconst self_: obj = globals.self || globals.window || globals.global || {};\nconst window_: obj = globals.window || globals.self || globals.global || {};\nconst global_: obj = globals.global || globals.self || globals.window || {};\nconst document_: obj = globals.document || {};\n\nexport {self_ as self, window_ as window, global_ as global, document_ as document};\n\n/** true if running in a browser */\nexport const isBrowser: boolean =\n  // @ts-ignore process does not exist on browser\n  Boolean(typeof process !== 'object' || String(process) !== '[object process]' || process.browser);\n\n/** true if running in a worker thread */\nexport const isWorker: boolean = typeof importScripts === 'function';\n\n// Extract node major version\nconst matches =\n  typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\n/** Major Node version (as a number) */\nexport const nodeVersion: number = (matches && parseFloat(matches[1])) || 0;\n","import type {Readable} from 'stream';\nimport {isBrowser, toArrayBuffer} from '@loaders.gl/loader-utils';\n\nexport type StreamIteratorOptions = {\n  _streamReadAhead?: boolean;\n};\n\n/**\n * Returns an async iterable that reads from a stream (works in both Node.js and browsers)\n * @param stream stream to iterator over\n */\nexport function makeStreamIterator(\n  stream: ReadableStream | Readable,\n  options?: StreamIteratorOptions\n): AsyncIterable<ArrayBuffer> {\n  return isBrowser\n    ? makeBrowserStreamIterator(stream as ReadableStream, options)\n    : makeNodeStreamIterator(stream as Readable, options);\n}\n\n/**\n * Returns an async iterable that reads from a DOM (browser) stream\n * @param stream stream to iterate from\n * @see https://jakearchibald.com/2017/async-iterators-and-generators/#making-streams-iterate\n */\nasync function* makeBrowserStreamIterator(\n  stream: ReadableStream,\n  options?: StreamIteratorOptions\n): AsyncIterable<ArrayBuffer> {\n  // WhatWG: stream is supposed to have a `getIterator` method\n  // if (typeof stream.getIterator === 'function') {\n  //   return stream.getIterator();\n  // }\n  // if (typeof stream[Symbol.asyncIterator] === 'function') {\n  //   return makeToArrayBufferIterator(stream);\n  // }\n\n  // In the browser, we first need to get a lock on the stream\n  const reader = stream.getReader();\n\n  let nextBatchPromise: Promise<{done?: boolean; value?: Uint8Array}> | undefined;\n\n  try {\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n      const currentBatchPromise = nextBatchPromise || reader.read();\n      // Issue a read for an additional batch, while we await the next batch\n      // Idea is to make fetching happen in parallel with processing / parsing\n      if (options?._streamReadAhead) {\n        nextBatchPromise = reader.read();\n      }\n      // Read from the stream\n      // value is a Uint8Array\n      const {done, value} = await currentBatchPromise;\n      // Exit if we're done\n      if (done) {\n        return;\n      }\n      // Else yield the chunk\n      yield toArrayBuffer(value);\n    }\n  } catch (error) {\n    // TODO - examples makes it look like this should always be called,\n    // but that generates exceptions so only call it if we do not reach the end\n    reader.releaseLock();\n  }\n}\n\n/**\n * Returns an async iterable that reads from a DOM (browser) stream\n * @param stream stream to iterate from\n * @note Requires Node.js >= 10\n */\nasync function* makeNodeStreamIterator(\n  stream: Readable,\n  options?: StreamIteratorOptions\n): AsyncIterable<ArrayBuffer> {\n  // Hacky test for node version to ensure we don't call bad polyfills\n  // NODE 10+: stream is an asyncIterator\n  for await (const chunk of stream) {\n    yield toArrayBuffer(chunk); // Coerce each chunk to ArrayBuffer\n  }\n}\n/* TODO - remove NODE < 10\n * @see https://github.com/bustle/streaming-iterables, MIT license\n *\n  if (typeof stream[Symbol.asyncIterator] === 'function') {\n    return;\n  }\n\n  // TODO - check if is this ever used in Node 10+?\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    const data = stream.read();\n    if (data !== null) {\n      yield toArrayBuffer(data);\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n    if (stream._readableState?.ended) {\n      return;\n    }\n    await onceReadable(stream);\n  }\n\nasync function onceReadable(stream: Readable): Promise<any> {\n  return new Promise((resolve) => {\n    stream.once('readable', resolve);\n  });\n}\n  */\n","import type {ReadStream} from 'fs';\n\nimport {makeStringIterator} from './make-string-iterator';\nimport {makeArrayBufferIterator} from './make-array-buffer-iterator';\nimport {makeBlobIterator} from './make-blob-iterator';\nimport type {StreamIteratorOptions} from './make-stream-iterator';\nimport {makeStreamIterator} from './make-stream-iterator';\nimport {isBlob, isReadableStream, isResponse} from '../../javascript-utils/is-type';\n\n/**\n * @param [options.chunkSize]\n */\nexport type IteratorOptions = StreamIteratorOptions & {\n  chunkSize?: number;\n};\n\n/**\n * Returns an iterator that breaks its input into chunks and yields them one-by-one.\n * @param data\n * @param options\n * @returns\n * This function can e.g. be used to enable data sources that can only be read atomically\n * (such as `Blob` and `File` via `FileReader`) to still be parsed in batches.\n */\nexport function makeIterator(\n  data: ArrayBuffer | string | Blob | Response | ReadableStream | ReadStream,\n  options?: IteratorOptions\n): AsyncIterable<ArrayBuffer> | Iterable<ArrayBuffer> {\n  if (typeof data === 'string') {\n    // Note: Converts string chunks to binary\n    return makeStringIterator(data, options);\n  }\n  if (data instanceof ArrayBuffer) {\n    return makeArrayBufferIterator(data, options);\n  }\n  if (isBlob(data)) {\n    return makeBlobIterator(data as Blob, options);\n  }\n  if (isReadableStream(data)) {\n    return makeStreamIterator(data as ReadableStream, options);\n  }\n  if (isResponse(data)) {\n    const response = data as Response;\n    return makeStreamIterator(response.body as ReadableStream, options);\n  }\n  throw new Error('makeIterator');\n}\n","import type {IteratorOptions} from './make-iterator';\n\nconst DEFAULT_CHUNK_SIZE = 256 * 1024;\n\n/**\n * Returns an iterator that breaks a big string into chunks and yields them one-by-one as ArrayBuffers\n * @param blob string to iterate over\n * @param options\n * @param options.chunkSize\n */\nexport function* makeStringIterator(\n  string: string,\n  options?: IteratorOptions\n): Iterable<ArrayBuffer> {\n  const chunkSize = options?.chunkSize || DEFAULT_CHUNK_SIZE;\n\n  let offset = 0;\n  const textEncoder = new TextEncoder();\n  while (offset < string.length) {\n    // Create a chunk of the right size\n    const chunkLength = Math.min(string.length - offset, chunkSize);\n    const chunk = string.slice(offset, offset + chunkLength);\n    offset += chunkLength;\n\n    // yield an ArrayBuffer chunk\n    yield textEncoder.encode(chunk);\n  }\n}\n","import type {IteratorOptions} from './make-iterator';\n\nconst DEFAULT_CHUNK_SIZE = 1024 * 1024; // 1MB  biggest value that keeps UI responsive\n\n/**\n * Returns an iterator that breaks a big Blob into chunks and yields them one-by-one\n * @param blob Blob or File object\n * @param options\n * @param options.chunkSize\n */\nexport async function* makeBlobIterator(\n  blob: Blob,\n  options?: IteratorOptions\n): AsyncIterable<ArrayBuffer> {\n  const chunkSize = options?.chunkSize || DEFAULT_CHUNK_SIZE;\n\n  let offset = 0;\n  while (offset < blob.size) {\n    const end = offset + chunkSize;\n\n    const chunk = await blob.slice(offset, end).arrayBuffer();\n\n    offset = end;\n    yield chunk;\n  }\n}\n","import type {\n  DataType,\n  SyncDataType,\n  BatchableDataType,\n  Loader,\n  LoaderOptions\n} from '@loaders.gl/loader-utils';\nimport {concatenateArrayBuffersAsync} from '@loaders.gl/loader-utils';\nimport {\n  isResponse,\n  isReadableStream,\n  isAsyncIterable,\n  isIterable,\n  isIterator,\n  isBlob,\n  isBuffer\n} from '../../javascript-utils/is-type';\nimport {makeIterator} from '../../iterators/make-iterator/make-iterator';\nimport {checkResponse, makeResponse} from '../utils/response-utils';\n\nconst ERR_DATA = 'Cannot convert supplied data type';\n\n// eslint-disable-next-line complexity\nexport function getArrayBufferOrStringFromDataSync(\n  data: SyncDataType,\n  loader: Loader,\n  options: LoaderOptions\n): ArrayBuffer | string {\n  if (loader.text && typeof data === 'string') {\n    return data;\n  }\n\n  if (isBuffer(data)) {\n    // @ts-ignore\n    data = data.buffer;\n  }\n\n  if (data instanceof ArrayBuffer) {\n    const arrayBuffer = data;\n    if (loader.text && !loader.binary) {\n      const textDecoder = new TextDecoder('utf8');\n      return textDecoder.decode(arrayBuffer);\n    }\n    return arrayBuffer;\n  }\n\n  // We may need to handle offsets\n  if (ArrayBuffer.isView(data)) {\n    // TextDecoder is invoked on typed arrays and will handle offsets\n    if (loader.text && !loader.binary) {\n      const textDecoder = new TextDecoder('utf8');\n      return textDecoder.decode(data);\n    }\n\n    let arrayBuffer = data.buffer;\n\n    // Since we are returning the underlying arrayBuffer, we must create a new copy\n    // if this typed array / Buffer is a partial view into the ArryayBuffer\n    // TODO - this is a potentially unnecessary copy\n    const byteLength = data.byteLength || data.length;\n    if (data.byteOffset !== 0 || byteLength !== arrayBuffer.byteLength) {\n      // console.warn(`loaders.gl copying arraybuffer of length ${byteLength}`);\n      arrayBuffer = arrayBuffer.slice(data.byteOffset, data.byteOffset + byteLength);\n    }\n    return arrayBuffer;\n  }\n\n  throw new Error(ERR_DATA);\n}\n\n// Convert async iterator to a promise\nexport async function getArrayBufferOrStringFromData(\n  data: DataType,\n  loader: Loader,\n  options: LoaderOptions\n): Promise<ArrayBuffer | string> {\n  const isArrayBuffer = data instanceof ArrayBuffer || ArrayBuffer.isView(data);\n  if (typeof data === 'string' || isArrayBuffer) {\n    return getArrayBufferOrStringFromDataSync(data as string | ArrayBuffer, loader, options);\n  }\n\n  // Blobs and files are FileReader compatible\n  if (isBlob(data)) {\n    data = await makeResponse(data);\n  }\n\n  if (isResponse(data)) {\n    const response = data as Response;\n    await checkResponse(response);\n    return loader.binary ? await response.arrayBuffer() : await response.text();\n  }\n\n  if (isReadableStream(data)) {\n    // @ts-expect-error TS2559 options type\n    data = makeIterator(data as ReadableStream, options);\n  }\n\n  if (isIterable(data) || isAsyncIterable(data)) {\n    // Assume arrayBuffer iterator - attempt to concatenate\n    return concatenateArrayBuffersAsync(data as AsyncIterable<ArrayBuffer>);\n  }\n\n  throw new Error(ERR_DATA);\n}\n\nexport async function getAsyncIterableFromData(\n  data: BatchableDataType,\n  options: LoaderOptions\n): Promise<AsyncIterable<ArrayBuffer> | Iterable<ArrayBuffer>> {\n  if (isIterator(data)) {\n    return data as AsyncIterable<ArrayBuffer>;\n  }\n\n  if (isResponse(data)) {\n    const response = data as Response;\n    // Note Since this function is not async, we currently can't load error message, just status\n    await checkResponse(response);\n    // TODO - bug in polyfill, body can be a Promise under Node.js\n    // eslint-disable-next-line @typescript-eslint/await-thenable\n    const body = await response.body;\n    // TODO - body can be null?\n    return makeIterator(body as ReadableStream<Uint8Array>, options as any);\n  }\n\n  if (isBlob(data) || isReadableStream(data)) {\n    return makeIterator(data as Blob | ReadableStream, options as any);\n  }\n\n  if (isAsyncIterable(data)) {\n    return data[Symbol.asyncIterator]();\n  }\n\n  return getIterableFromData(data);\n}\n\nexport async function getReadableStream(data: BatchableDataType): Promise<ReadableStream> {\n  if (isReadableStream(data)) {\n    return data as ReadableStream;\n  }\n  if (isResponse(data)) {\n    // @ts-ignore\n    return data.body;\n  }\n  const response = await makeResponse(data);\n  // @ts-ignore\n  return response.body;\n}\n\n// HELPERS\n\nfunction getIterableFromData(data) {\n  // generate an iterator that emits a single chunk\n  if (ArrayBuffer.isView(data)) {\n    return (function* oneChunk() {\n      yield data.buffer;\n    })();\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return (function* oneChunk() {\n      yield data;\n    })();\n  }\n\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isIterable(data)) {\n    return data[Symbol.iterator]();\n  }\n\n  throw new Error(ERR_DATA);\n}\n","import {Loader} from '@loaders.gl/loader-utils';\nimport {normalizeLoader} from '../loader-utils/normalize-loader';\nimport {getGlobalLoaderState} from '../loader-utils/option-utils';\n\n// Store global registered loaders on the global object to increase chances of cross loaders-version interoperability\n// This use case is not reliable but can help when testing new versions of loaders.gl with existing frameworks\nconst getGlobalLoaderRegistry = () => {\n  const state = getGlobalLoaderState();\n  state.loaderRegistry = state.loaderRegistry || [];\n  return state.loaderRegistry;\n};\n\n/** Register a list of global loaders */\nexport function registerLoaders(loaders: Loader[]) {\n  const loaderRegistry = getGlobalLoaderRegistry();\n\n  loaders = Array.isArray(loaders) ? loaders : [loaders];\n\n  for (const loader of loaders) {\n    const normalizedLoader = normalizeLoader(loader);\n    if (!loaderRegistry.find((registeredLoader) => normalizedLoader === registeredLoader)) {\n      // add to the beginning of the loaderRegistry, so the last registeredLoader get picked\n      loaderRegistry.unshift(normalizedLoader);\n    }\n  }\n}\n\nexport function getRegisteredLoaders(): Loader[] {\n  return getGlobalLoaderRegistry();\n}\n\n/** @deprecated For testing only  */\nexport function _unregisterLoaders() {\n  const state = getGlobalLoaderState();\n  state.loaderRegistry = [];\n}\n","import type {LoaderContext, LoaderOptions, Loader} from '@loaders.gl/loader-utils';\nimport {compareArrayBuffers, path} from '@loaders.gl/loader-utils';\nimport {normalizeLoader} from '../loader-utils/normalize-loader';\nimport {getResourceUrlAndType} from '../utils/resource-utils';\nimport {getRegisteredLoaders} from './register-loaders';\nimport {isBlob} from '../../javascript-utils/is-type';\n\nconst EXT_PATTERN = /\\.([^.]+)$/;\n\n// TODO - Need a variant that peeks at streams for parseInBatches\n// TODO - Detect multiple matching loaders? Use heuristics to grade matches?\n// TODO - Allow apps to pass context to disambiguate between multiple matches (e.g. multiple .json formats)?\n\n/**\n * Find a loader that matches file extension and/or initial file content\n * Search the loaders array argument for a loader that matches url extension or initial data\n * Returns: a normalized loader\n * @param data data to assist\n * @param loaders\n * @param options\n * @param context used internally, applications should not provide this parameter\n */\nexport async function selectLoader(\n  data: Response | Blob | ArrayBuffer | string,\n  loaders: Loader[] | Loader = [],\n  options?: LoaderOptions,\n  context?: LoaderContext\n): Promise<Loader | null> {\n  if (!validHTTPResponse(data)) {\n    return null;\n  }\n\n  // First make a sync attempt, disabling exceptions\n  let loader = selectLoaderSync(data, loaders, {...options, nothrow: true}, context);\n  if (loader) {\n    return loader;\n  }\n\n  // For Blobs and Files, try to asynchronously read a small initial slice and test again with that\n  // to see if we can detect by initial content\n  if (isBlob(data)) {\n    data = await (data as Blob).slice(0, 10).arrayBuffer();\n    loader = selectLoaderSync(data, loaders, options, context);\n  }\n\n  // no loader available\n  if (!loader && !options?.nothrow) {\n    throw new Error(getNoValidLoaderMessage(data));\n  }\n\n  return loader;\n}\n\n/**\n * Find a loader that matches file extension and/or initial file content\n * Search the loaders array argument for a loader that matches url extension or initial data\n * Returns: a normalized loader\n * @param data data to assist\n * @param loaders\n * @param options\n * @param context used internally, applications should not provide this parameter\n */\nexport function selectLoaderSync(\n  data: Response | Blob | ArrayBuffer | string,\n  loaders: Loader[] | Loader = [],\n  options?: LoaderOptions,\n  context?: LoaderContext\n): Loader | null {\n  if (!validHTTPResponse(data)) {\n    return null;\n  }\n\n  // eslint-disable-next-line complexity\n  // if only a single loader was provided (not as array), force its use\n  // TODO - Should this behavior be kept and documented?\n  if (loaders && !Array.isArray(loaders)) {\n    // TODO - remove support for legacy loaders\n    return normalizeLoader(loaders);\n  }\n\n  // Build list of candidate loaders that will be searched in order for a match\n  let candidateLoaders: Loader[] = [];\n  // First search supplied loaders\n  if (loaders) {\n    candidateLoaders = candidateLoaders.concat(loaders);\n  }\n  // Then fall back to registered loaders\n  if (!options?.ignoreRegisteredLoaders) {\n    candidateLoaders.push(...getRegisteredLoaders());\n  }\n\n  // TODO - remove support for legacy loaders\n  normalizeLoaders(candidateLoaders);\n\n  const loader = selectLoaderInternal(data, candidateLoaders, options, context);\n\n  // no loader available\n  if (!loader && !options?.nothrow) {\n    throw new Error(getNoValidLoaderMessage(data));\n  }\n\n  return loader;\n}\n\n/** Implements loaders selection logic */\nfunction selectLoaderInternal(\n  data: Response | Blob | ArrayBuffer | string,\n  loaders: Loader[],\n  options?: LoaderOptions,\n  context?: LoaderContext\n) {\n  const {url, type} = getResourceUrlAndType(data);\n\n  const testUrl = url || context?.url;\n\n  let loader: Loader | null = null;\n\n  // if options.mimeType is supplied, it takes precedence\n  if (options?.mimeType) {\n    loader = findLoaderByMIMEType(loaders, options?.mimeType);\n  }\n  // Look up loader by url\n  loader = loader || findLoaderByUrl(loaders, testUrl);\n  // Look up loader by mime type\n  loader = loader || findLoaderByMIMEType(loaders, type);\n  // Look for loader via initial bytes (Note: not always accessible (e.g. Response, stream, async iterator)\n  loader = loader || findLoaderByInitialBytes(loaders, data);\n  // Look up loader by fallback mime type\n  loader = loader || findLoaderByMIMEType(loaders, options?.fallbackMimeType);\n\n  return loader;\n}\n\n/** Check HTTP Response */\nfunction validHTTPResponse(data: any): boolean {\n  // HANDLE HTTP status\n  if (data instanceof Response) {\n    // 204 - NO CONTENT. This handles cases where e.g. a tile server responds with 204 for a missing tile\n    if (data.status === 204) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/** Generate a helpful message to help explain why loader selection failed. */\nfunction getNoValidLoaderMessage(data): string {\n  const {url, type} = getResourceUrlAndType(data);\n\n  let message = 'No valid loader found (';\n  message += url ? `${path.filename(url)}, ` : 'no url provided, ';\n  message += `MIME type: ${type ? `\"${type}\"` : 'not provided'}, `;\n  // First characters are only accessible when called on data (string or arrayBuffer).\n  const firstCharacters: string = data ? getFirstCharacters(data) : '';\n  message += firstCharacters ? ` first bytes: \"${firstCharacters}\"` : 'first bytes: not available';\n  message += ')';\n  return message;\n}\n\nfunction normalizeLoaders(loaders: Loader[]): void {\n  for (const loader of loaders) {\n    normalizeLoader(loader);\n  }\n}\n\n// TODO - Would be nice to support http://example.com/file.glb?parameter=1\n// E.g: x = new URL('http://example.com/file.glb?load=1'; x.pathname\nfunction findLoaderByUrl(loaders: Loader[], url?: string): Loader | null {\n  // Get extension\n  const match = url && EXT_PATTERN.exec(url);\n  const extension = match && match[1];\n  return extension ? findLoaderByExtension(loaders, extension) : null;\n}\n\nfunction findLoaderByExtension(loaders: Loader[], extension: string): Loader | null {\n  extension = extension.toLowerCase();\n\n  for (const loader of loaders) {\n    for (const loaderExtension of loader.extensions) {\n      if (loaderExtension.toLowerCase() === extension) {\n        return loader;\n      }\n    }\n  }\n  return null;\n}\n\nfunction findLoaderByMIMEType(loaders, mimeType) {\n  for (const loader of loaders) {\n    if (loader.mimeTypes && loader.mimeTypes.includes(mimeType)) {\n      return loader;\n    }\n\n    // Support referring to loaders using the \"unregistered tree\"\n    // https://en.wikipedia.org/wiki/Media_type#Unregistered_tree\n    if (mimeType === `application/x.${loader.id}`) {\n      return loader;\n    }\n  }\n  return null;\n}\n\nfunction findLoaderByInitialBytes(loaders, data) {\n  if (!data) {\n    return null;\n  }\n\n  for (const loader of loaders) {\n    if (typeof data === 'string') {\n      if (testDataAgainstText(data, loader)) {\n        return loader;\n      }\n    } else if (ArrayBuffer.isView(data)) {\n      // Typed Arrays can have offsets into underlying buffer\n      if (testDataAgainstBinary(data.buffer, data.byteOffset, loader)) {\n        return loader;\n      }\n    } else if (data instanceof ArrayBuffer) {\n      const byteOffset = 0;\n      if (testDataAgainstBinary(data, byteOffset, loader)) {\n        return loader;\n      }\n    }\n    // TODO Handle streaming case (requires creating a new AsyncIterator)\n  }\n  return null;\n}\n\nfunction testDataAgainstText(data, loader) {\n  if (loader.testText) {\n    return loader.testText(data);\n  }\n\n  const tests = Array.isArray(loader.tests) ? loader.tests : [loader.tests];\n  return tests.some((test) => data.startsWith(test));\n}\n\nfunction testDataAgainstBinary(data, byteOffset, loader) {\n  const tests = Array.isArray(loader.tests) ? loader.tests : [loader.tests];\n  return tests.some((test) => testBinary(data, byteOffset, loader, test));\n}\n\nfunction testBinary(data, byteOffset, loader, test) {\n  if (test instanceof ArrayBuffer) {\n    return compareArrayBuffers(test, data, test.byteLength);\n  }\n  switch (typeof test) {\n    case 'function':\n      return test(data, loader);\n\n    case 'string':\n      // Magic bytes check: If `test` is a string, check if binary data starts with that strings\n      const magic = getMagicString(data, byteOffset, test.length);\n      return test === magic;\n\n    default:\n      return false;\n  }\n}\n\nfunction getFirstCharacters(data, length: number = 5) {\n  if (typeof data === 'string') {\n    return data.slice(0, length);\n  } else if (ArrayBuffer.isView(data)) {\n    // Typed Arrays can have offsets into underlying buffer\n    return getMagicString(data.buffer, data.byteOffset, length);\n  } else if (data instanceof ArrayBuffer) {\n    const byteOffset = 0;\n    return getMagicString(data, byteOffset, length);\n  }\n  return '';\n}\n\nfunction getMagicString(arrayBuffer, byteOffset, length) {\n  if (arrayBuffer.byteLength < byteOffset + length) {\n    return '';\n  }\n  const dataView = new DataView(arrayBuffer);\n  let magic = '';\n  for (let i = 0; i < length; i++) {\n    magic += String.fromCharCode(dataView.getUint8(byteOffset + i));\n  }\n  return magic;\n}\n","// Beginning of a minimal implementation of the Node.js path API, that doesn't pull in big polyfills.\n\n/**\n * Replacement for Node.js path.filename\n * @param url\n */\nexport function filename(url: string): string {\n  const slashIndex = url && url.lastIndexOf('/');\n  return slashIndex >= 0 ? url.substr((slashIndex as number) + 1) : '';\n}\n\n/**\n * Replacement for Node.js path.dirname\n * @param url\n */\nexport function dirname(url: string): string {\n  const slashIndex = url && url.lastIndexOf('/');\n  return slashIndex >= 0 ? url.substr(0, slashIndex as number) : '';\n}\n\n/**\n * Replacement for Node.js path.join\n * @param parts\n */\nexport function join(...parts: string[]): string {\n  const separator = '/';\n  parts = parts.map((part, index) => {\n    if (index) {\n      part = part.replace(new RegExp(`^${separator}`), '');\n    }\n    if (index !== parts.length - 1) {\n      part = part.replace(new RegExp(`${separator}$`), '');\n    }\n    return part;\n  });\n  return parts.join(separator);\n}\n","import type {DataType, Loader, LoaderContext, LoaderOptions} from '@loaders.gl/loader-utils';\nimport {assert, validateWorkerVersion} from '@loaders.gl/worker-utils';\nimport {parseWithWorker, canParseWithWorker} from '@loaders.gl/loader-utils';\nimport {isLoaderObject} from '../loader-utils/normalize-loader';\nimport {normalizeOptions} from '../loader-utils/option-utils';\nimport {getArrayBufferOrStringFromData} from '../loader-utils/get-data';\nimport {getLoaderContext, getLoadersFromContext} from '../loader-utils/loader-context';\nimport {getResourceUrlAndType} from '../utils/resource-utils';\nimport {selectLoader} from './select-loader';\n\n/**\n * Parses `data` using a specified loader\n * @param data\n * @param loaders\n * @param options\n * @param context\n */\nexport async function parse(\n  data: DataType | Promise<DataType>,\n  loaders?: Loader | Loader[] | LoaderOptions,\n  options?: LoaderOptions,\n  context?: LoaderContext\n): Promise<any> {\n  assert(!context || typeof context === 'object'); // parse no longer accepts final url\n\n  // Signature: parse(data, options, context | url)\n  // Uses registered loaders\n  if (loaders && !Array.isArray(loaders) && !isLoaderObject(loaders)) {\n    context = undefined; // context not supported in short signature\n    options = loaders as LoaderOptions;\n    loaders = undefined;\n  }\n\n  data = await data; // Resolve any promise\n  options = options || {};\n\n  // Extract a url for auto detection\n  const {url} = getResourceUrlAndType(data);\n\n  // Chooses a loader (and normalizes it)\n  // Also use any loaders in the context, new loaders take priority\n  const typedLoaders = loaders as Loader | Loader[] | undefined;\n  const candidateLoaders = getLoadersFromContext(typedLoaders, context);\n  // todo hacky type cast\n  const loader = await selectLoader(data as ArrayBuffer, candidateLoaders, options);\n  // Note: if no loader was found, if so just return null\n  if (!loader) {\n    return null;\n  }\n\n  // Normalize options\n  options = normalizeOptions(options, loader, candidateLoaders, url);\n\n  // Get a context (if already present, will be unchanged)\n  context = getLoaderContext({url, parse, loaders: candidateLoaders}, options, context);\n\n  return await parseWithLoader(loader, data, options, context);\n}\n\n// TODO: support progress and abort\n// TODO - should accept loader.parseAsyncIterator and concatenate.\nasync function parseWithLoader(loader, data, options, context) {\n  validateWorkerVersion(loader);\n\n  data = await getArrayBufferOrStringFromData(data, loader, options);\n\n  // First check for synchronous text parser, wrap results in promises\n  if (loader.parseTextSync && typeof data === 'string') {\n    options.dataType = 'text';\n    return loader.parseTextSync(data, options, context, loader);\n  }\n\n  // If we have a workerUrl and the loader can parse the given options efficiently in a worker\n  if (canParseWithWorker(loader, options)) {\n    return await parseWithWorker(loader, data, options, context, parse);\n  }\n\n  // Check for asynchronous parser\n  if (loader.parseText && typeof data === 'string') {\n    return await loader.parseText(data, options, context, loader);\n  }\n\n  if (loader.parse) {\n    return await loader.parse(data, options, context, loader);\n  }\n\n  // This should not happen, all sync loaders should also offer `parse` function\n  assert(!loader.parseSync);\n\n  // TBD - If asynchronous parser not available, return null\n  throw new Error(`${loader.id} loader - no parser found and worker is disabled`);\n}\n","import type {Loader, LoaderOptions, LoaderContext} from '@loaders.gl/loader-utils';\nimport {getFetchFunction} from './option-utils';\n\n/**\n * \"sub\" loaders invoked by other loaders get a \"context\" injected on `this`\n * The context will inject core methods like `parse` and contain information\n * about loaders and options passed in to the top-level `parse` call.\n *\n * @param context\n * @param options\n * @param previousContext\n */\nexport function getLoaderContext(\n  context: Omit<LoaderContext, 'fetch'> & Partial<Pick<LoaderContext, 'fetch'>>,\n  options?: LoaderOptions,\n  previousContext: LoaderContext | null = null\n): LoaderContext {\n  // For recursive calls, we already have a context\n  // TODO - add any additional loaders to context?\n  if (previousContext) {\n    return previousContext;\n  }\n\n  const resolvedContext: LoaderContext = {\n    fetch: getFetchFunction(options, context),\n    ...context\n  };\n\n  // Recursive loading does not use single loader\n  if (!Array.isArray(resolvedContext.loaders)) {\n    resolvedContext.loaders = null;\n  }\n\n  return resolvedContext;\n}\n\n// eslint-disable-next-line complexity\nexport function getLoadersFromContext(\n  loaders: Loader[] | Loader | undefined,\n  context?: LoaderContext\n) {\n  // A single non-array loader is force selected, but only on top-level (context === null)\n  if (!context && loaders && !Array.isArray(loaders)) {\n    return loaders;\n  }\n\n  // Create a merged list\n  let candidateLoaders;\n  if (loaders) {\n    candidateLoaders = Array.isArray(loaders) ? loaders : [loaders];\n  }\n  if (context && context.loaders) {\n    const contextLoaders = Array.isArray(context.loaders) ? context.loaders : [context.loaders];\n    candidateLoaders = candidateLoaders ? [...candidateLoaders, ...contextLoaders] : contextLoaders;\n  }\n  // If no loaders, return null to look in globally registered loaders\n  return candidateLoaders && candidateLoaders.length ? candidateLoaders : null;\n}\n","import type {WorkerObject} from '../../types';\nimport {assert} from '../env-utils/assert';\nimport {VERSION} from '../env-utils/version';\n\n/**\n * Check if worker is compatible with this library version\n * @param worker\n * @param libVersion\n * @returns `true` if the two versions are compatible\n */\nexport function validateWorkerVersion(\n  worker: WorkerObject,\n  coreVersion: string = VERSION\n): boolean {\n  assert(worker, 'no worker provided');\n\n  const workerVersion = worker.version;\n  if (!coreVersion || !workerVersion) {\n    return false;\n  }\n\n  // TODO enable when fix the __version__ injection\n  // const coreVersions = parseVersion(coreVersion);\n  // const workerVersions = parseVersion(workerVersion);\n  // assert(\n  //   coreVersion.major === workerVersion.major && coreVersion.minor <= workerVersion.minor,\n  //   `worker: ${worker.name} is not compatible. ${coreVersion.major}.${\n  //     coreVersion.minor\n  //   }+ is required.`\n  // );\n\n  return true;\n}\n\n// @ts-ignore\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction parseVersion(version) {\n  const parts = version.split('.').map(Number);\n  return {major: parts[0], minor: parts[1]};\n}\n","import type {DataType, Loader, LoaderContext, LoaderOptions} from '@loaders.gl/loader-utils';\nimport {isBlob} from '../../javascript-utils/is-type';\nimport {isLoaderObject} from '../loader-utils/normalize-loader';\nimport {getFetchFunction} from '../loader-utils/option-utils';\n\nimport {parse} from './parse';\n\n/**\n * Parses `data` using a specified loader\n * Note: Load does duplicate a lot of parse.\n * it can also call fetchFile on string urls, which `parse` won't do.\n * @param data\n * @param loaders\n * @param options\n * @param context\n */\n// implementation signature\nexport async function load(\n  url: string | DataType,\n  loaders?: Loader | Loader[] | LoaderOptions,\n  options?: LoaderOptions,\n  context?: LoaderContext\n): Promise<any> {\n  // Signature: load(url, options)\n  if (!Array.isArray(loaders) && !isLoaderObject(loaders)) {\n    context = undefined; // context not supported in short signature\n    options = loaders as LoaderOptions;\n    loaders = undefined;\n  }\n\n  // Select fetch function\n  const fetch = getFetchFunction(options);\n\n  // at this point, `url` could be already loaded binary data\n  let data = url;\n  // url is a string, fetch the url\n  if (typeof url === 'string') {\n    data = await fetch(url);\n    // URL is Blob or File, fetchFile handles it (alt: we could generate ObjectURL here)\n  }\n\n  if (isBlob(url)) {\n    // The fetch response object will contain blob.name\n    data = await fetch(url);\n  }\n\n  // Data is loaded (at least we have a `Response` object) so time to hand over to `parse`\n  return await parse(data, loaders, options);\n}\n","import type {LoaderWithParser, LoaderOptions} from '@loaders.gl/loader-utils';\nimport type {Batch} from '@loaders.gl/schema';\ntype Schema = any;\n\nimport {\n  AsyncQueue,\n  TableBatchBuilder,\n  convertToArrayRow,\n  convertToObjectRow\n} from '@loaders.gl/schema';\nimport Papa from './papaparse/papaparse';\nimport AsyncIteratorStreamer from './papaparse/async-iterator-streamer';\n\n// __VERSION__ is injected by babel-plugin-version-inline\n// @ts-ignore TS2304: Cannot find name '__VERSION__'.\nconst VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : 'latest';\n\nexport type CSVLoaderOptions = LoaderOptions & {\n  csv?: {\n    // loaders.gl options\n    shape?: 'array-row-table' | 'object-row-table' | 'columnar-table';\n    /** optimizes memory usage but increases parsing time. */\n    optimizeMemoryUsage?: boolean;\n    columnPrefix?: string;\n    header?: 'auto';\n\n    // CSV options (papaparse)\n    // delimiter: auto\n    // newline: auto\n    quoteChar?: string;\n    escapeChar?: string;\n    // Convert numbers and boolean values in rows from strings\n    dynamicTyping?: boolean;\n    comments?: boolean;\n    skipEmptyLines?: boolean | 'greedy';\n    // transform: null?\n    delimitersToGuess?: string[];\n    // fastMode: auto\n  };\n};\n\nconst DEFAULT_CSV_LOADER_OPTIONS = {\n  csv: {\n    shape: 'object-row-table',\n    optimizeMemoryUsage: false,\n    // CSV options\n    header: 'auto',\n    columnPrefix: 'column',\n    // delimiter: auto\n    // newline: auto\n    quoteChar: '\"',\n    escapeChar: '\"',\n    dynamicTyping: true,\n    comments: false,\n    skipEmptyLines: true,\n    // transform: null?\n    delimitersToGuess: [',', '\\t', '|', ';']\n    // fastMode: auto\n  }\n};\n\nexport const CSVLoader = {\n  id: 'csv',\n  module: 'csv',\n  name: 'CSV',\n  version: VERSION,\n  extensions: ['csv', 'tsv', 'dsv'],\n  mimeTypes: ['text/csv', 'text/tab-separated-values', 'text/dsv'],\n  category: 'table',\n  parse: async (arrayBuffer: ArrayBuffer, options?: CSVLoaderOptions) =>\n    parseCSV(new TextDecoder().decode(arrayBuffer), options),\n  parseText: (text: string, options?: CSVLoaderOptions) => parseCSV(text, options),\n  parseInBatches: parseCSVInBatches,\n  // @ts-ignore\n  // testText: null,\n  options: DEFAULT_CSV_LOADER_OPTIONS as CSVLoaderOptions\n};\n\nasync function parseCSV(csvText: string, options?: CSVLoaderOptions) {\n  // Apps can call the parse method directly, we so apply default options here\n  const csvOptions = {...DEFAULT_CSV_LOADER_OPTIONS.csv, ...options?.csv};\n\n  const firstRow = readFirstRow(csvText);\n  const header: boolean =\n    csvOptions.header === 'auto' ? isHeaderRow(firstRow) : Boolean(csvOptions.header);\n\n  const parseWithHeader = header;\n\n  const papaparseConfig = {\n    // dynamicTyping: true,\n    ...csvOptions,\n    header: parseWithHeader,\n    download: false, // We handle loading, no need for papaparse to do it for us\n    transformHeader: parseWithHeader ? duplicateColumnTransformer() : undefined,\n    error: (e) => {\n      throw new Error(e);\n    }\n  };\n\n  const result = Papa.parse(csvText, papaparseConfig);\n  let {data: rows} = result;\n\n  const headerRow = result.meta.fields || generateHeader(csvOptions.columnPrefix, firstRow.length);\n\n  switch (csvOptions.shape) {\n    case 'object-row-table':\n      rows = rows.map((row) => (Array.isArray(row) ? convertToObjectRow(row, headerRow) : row));\n      break;\n    case 'array-row-table':\n      rows = rows.map((row) => (Array.isArray(row) ? row : convertToArrayRow(row, headerRow)));\n      break;\n    default:\n  }\n\n  /*\n  if (!header && shape === 'object-row-table') {\n    // If the dataset has no header, transform the array result into an object shape with an\n    // autogenerated header\n    return result.data.map((row) =>\n      row.reduce((acc, value, i) => {\n        acc[headerRow[i]] = value;\n        return acc;\n      }, {})\n    );\n  }\n  */\n  return rows;\n}\n\n// TODO - support batch size 0 = no batching/single batch?\nfunction parseCSVInBatches(\n  asyncIterator: AsyncIterable<ArrayBuffer> | Iterable<ArrayBuffer>,\n  options?: CSVLoaderOptions\n): AsyncIterable<Batch> {\n  // Papaparse does not support standard batch size handling\n  // TODO - investigate papaparse chunks mode\n  options = {...options};\n  if (options.batchSize === 'auto') {\n    options.batchSize = 4000;\n  }\n\n  // Apps can call the parse method directly, we so apply default options here\n  const csvOptions = {...DEFAULT_CSV_LOADER_OPTIONS.csv, ...options?.csv};\n\n  const asyncQueue = new AsyncQueue<Batch>();\n\n  let isFirstRow: boolean = true;\n  let headerRow: string[] | null = null;\n  let tableBatchBuilder: TableBatchBuilder | null = null;\n  let schema: Schema | null = null;\n\n  const config = {\n    // dynamicTyping: true, // Convert numbers and boolean values in rows from strings,\n    ...csvOptions,\n    header: false, // Unfortunately, header detection is not automatic and does not infer shapes\n    download: false, // We handle loading, no need for papaparse to do it for us\n    // chunkSize is set to 5MB explicitly (same as Papaparse default) due to a bug where the\n    // streaming parser gets stuck if skipEmptyLines and a step callback are both supplied.\n    // See https://github.com/mholt/PapaParse/issues/465\n    chunkSize: 1024 * 1024 * 5,\n    // skipEmptyLines is set to a boolean value if supplied. Greedy is set to true\n    // skipEmptyLines is handled manually given two bugs where the streaming parser gets stuck if\n    // both of the skipEmptyLines and step callback options are provided:\n    // - true doesn't work unless chunkSize is set: https://github.com/mholt/PapaParse/issues/465\n    // - greedy doesn't work: https://github.com/mholt/PapaParse/issues/825\n    skipEmptyLines: false,\n\n    // step is called on every row\n    // eslint-disable-next-line complexity\n    step(results) {\n      let row = results.data;\n\n      if (csvOptions.skipEmptyLines) {\n        // Manually reject lines that are empty\n        const collapsedRow = row.flat().join('').trim();\n        if (collapsedRow === '') {\n          return;\n        }\n      }\n      const bytesUsed = results.meta.cursor;\n\n      // Check if we need to save a header row\n      if (isFirstRow && !headerRow) {\n        // Auto detects or can be forced with csvOptions.header\n        const header = csvOptions.header === 'auto' ? isHeaderRow(row) : Boolean(csvOptions.header);\n        if (header) {\n          headerRow = row.map(duplicateColumnTransformer());\n          return;\n        }\n      }\n\n      // If first data row, we can deduce the schema\n      if (isFirstRow) {\n        isFirstRow = false;\n        if (!headerRow) {\n          headerRow = generateHeader(csvOptions.columnPrefix, row.length);\n        }\n        schema = deduceSchema(row, headerRow);\n      }\n\n      if (csvOptions.optimizeMemoryUsage) {\n        // A workaround to allocate new strings and don't retain pointers to original strings.\n        // https://bugs.chromium.org/p/v8/issues/detail?id=2869\n        row = JSON.parse(JSON.stringify(row));\n      }\n\n      // Add the row\n      tableBatchBuilder =\n        tableBatchBuilder ||\n        new TableBatchBuilder(schema, {\n          // @ts-expect-error\n          shape: csvOptions.shape || 'array-row-table',\n          ...options\n        });\n\n      try {\n        tableBatchBuilder.addRow(row);\n        // If a batch has been completed, emit it\n        const batch = tableBatchBuilder && tableBatchBuilder.getFullBatch({bytesUsed});\n        if (batch) {\n          asyncQueue.enqueue(batch);\n        }\n      } catch (error) {\n        asyncQueue.enqueue(error as Error);\n      }\n    },\n\n    // complete is called when all rows have been read\n    complete(results) {\n      try {\n        const bytesUsed = results.meta.cursor;\n        // Ensure any final (partial) batch gets emitted\n        const batch = tableBatchBuilder && tableBatchBuilder.getFinalBatch({bytesUsed});\n        if (batch) {\n          asyncQueue.enqueue(batch);\n        }\n      } catch (error) {\n        asyncQueue.enqueue(error as Error);\n      }\n\n      asyncQueue.close();\n    }\n  };\n\n  Papa.parse(asyncIterator, config, AsyncIteratorStreamer);\n\n  // TODO - Does it matter if we return asyncIterable or asyncIterator\n  // return asyncQueue[Symbol.asyncIterator]();\n  return asyncQueue;\n}\n\n/**\n * Checks if a certain row is a header row\n * @param row the row to check\n * @returns true if the row looks like a header\n */\nfunction isHeaderRow(row: string[]): boolean {\n  return row && row.every((value) => typeof value === 'string');\n}\n\n/**\n * Reads, parses, and returns the first row of a CSV text\n * @param csvText the csv text to parse\n * @returns the first row\n */\nfunction readFirstRow(csvText: string): any[] {\n  const result = Papa.parse(csvText, {\n    download: false,\n    dynamicTyping: true,\n    preview: 1\n  });\n  return result.data[0];\n}\n\n/**\n * Creates a transformer that renames duplicate columns. This is needed as Papaparse doesn't handle\n * duplicate header columns and would use the latest occurrence by default.\n * See the header option in https://www.papaparse.com/docs#config\n * @returns a transform function that returns sanitized names for duplicate fields\n */\nfunction duplicateColumnTransformer() {\n  const observedColumns = new Set();\n  return (col) => {\n    let colName = col;\n    let counter = 1;\n    while (observedColumns.has(colName)) {\n      colName = `${col}.${counter}`;\n      counter++;\n    }\n    observedColumns.add(colName);\n    return colName;\n  };\n}\n\n/**\n * Generates the header of a CSV given a prefix and a column count\n * @param columnPrefix the columnPrefix to use\n * @param count the count of column names to generate\n * @returns an array of column names\n */\nfunction generateHeader(columnPrefix: string, count: number = 0): string[] {\n  const headers: string[] = [];\n  for (let i = 0; i < count; i++) {\n    headers.push(`${columnPrefix}${i + 1}`);\n  }\n  return headers;\n}\n\nfunction deduceSchema(row, headerRow) {\n  const schema = headerRow ? {} : [];\n  for (let i = 0; i < row.length; i++) {\n    const columnName = (headerRow && headerRow[i]) || i;\n    const value = row[i];\n    switch (typeof value) {\n      case 'number':\n      case 'boolean':\n        // TODO - booleans could be handled differently...\n        schema[columnName] = {name: String(columnName), index: i, type: Float32Array};\n        break;\n      case 'string':\n      default:\n        schema[columnName] = {name: String(columnName), index: i, type: Array};\n      // We currently only handle numeric rows\n      // TODO we could offer a function to map strings to numbers?\n    }\n  }\n  return schema;\n}\n\nexport const _typecheckCSVLoader: LoaderWithParser = CSVLoader;\n","// @ts-nocheck\n// A custom papaparse `Streamer` for async iterators\n// Ideally this can be contributed back to papaparse\n// Or papaparse can expose Streamer API so we can extend without forking.\n\n/* eslint-disable no-invalid-this */\n\n// Note: papaparse is not an ES6 module\nimport Papa from './papaparse';\nconst {ChunkStreamer} = Papa;\n\nexport default function AsyncIteratorStreamer(config) {\n  config = config || {};\n\n  ChunkStreamer.call(this, config);\n\n  this.textDecoder = new TextDecoder(this._config.encoding);\n\n  // Implement ChunkStreamer base class methods\n\n  // this.pause = function() {\n  //   ChunkStreamer.prototype.pause.apply(this, arguments);\n  // };\n\n  // this.resume = function() {\n  //   ChunkStreamer.prototype.resume.apply(this, arguments);\n  //   this._input.resume();\n  // };\n\n  this.stream = async function (asyncIterator) {\n    this._input = asyncIterator;\n\n    try {\n      // ES2018 version\n      // TODO - check for pause and abort flags?\n      for await (const chunk of asyncIterator) {\n        this.parseChunk(this.getStringChunk(chunk));\n      }\n\n      // ES5 VERSION\n      // while (true) {\n      //   asyncIterator.next().then(function(value) {\n      //     if (value.done) {\n      //       // finalize iterator?\n      //     }\n      //   }\n      //   const  = await ;\n      //   if (done) return total;\n      //   total += value.length;\n      // }\n\n      this._finished = true;\n      this.parseChunk('');\n    } catch (error) {\n      // Inform ChunkStreamer base class of error\n      this._sendError(error);\n    }\n  };\n\n  this._nextChunk = function nextChunk() {\n    // Left empty, as async iterator automatically pulls next chunk\n  };\n\n  // HELPER METHODS\n  this.getStringChunk = function (chunk) {\n    return typeof chunk === 'string' ? chunk : this.textDecoder.decode(chunk, {stream: true});\n  };\n}\n\nAsyncIteratorStreamer.prototype = Object.create(ChunkStreamer.prototype);\nAsyncIteratorStreamer.prototype.constructor = AsyncIteratorStreamer;\n","// @ts-nocheck\n// This is a fork of papaparse\n// https://github.com/mholt/PapaParse\n/* @license\nPapa Parse\nv5.0.0-beta.0\nhttps://github.com/mholt/PapaParse\nLicense: MIT\n*/\n// FORK SUMMARY:\n// - Adopt ES6 exports\n// - Implement new AsyncIteratorStreamer\n// - Remove non Async Iterator streamers (can all be handled by new streamer)\n// - Remove unused Worker support (loaders.gl worker system used instead)\n// - Remove unused jQuery plugin support\n\n/* eslint-disable */\nconst BYTE_ORDER_MARK = '\\ufeff';\n\nconst Papa = {\n  parse: CsvToJson,\n  unparse: JsonToCsv,\n\n  RECORD_SEP: String.fromCharCode(30),\n  UNIT_SEP: String.fromCharCode(31),\n  BYTE_ORDER_MARK,\n  BAD_DELIMITERS: ['\\r', '\\n', '\"', BYTE_ORDER_MARK],\n  WORKERS_SUPPORTED: false, // !IS_WORKER && !!globalThis.Worker\n  NODE_STREAM_INPUT: 1,\n\n  // Configurable chunk sizes for local and remote files, respectively\n  LocalChunkSize: 1024 * 1024 * 10, // 10 M,\n  RemoteChunkSize: 1024 * 1024 * 5, // 5 M,\n  DefaultDelimiter: ',', // Used if not specified and detection fail,\n\n  // Exposed for testing and development only\n  Parser: Parser,\n  ParserHandle: ParserHandle,\n\n  // BEGIN FORK\n  ChunkStreamer: ChunkStreamer,\n  StringStreamer: StringStreamer\n};\nexport default Papa;\n\n/*\nPapa.NetworkStreamer = NetworkStreamer;\nPapa.FileStreamer = FileStreamer;\nPapa.ReadableStreamStreamer = ReadableStreamStreamer;\nif (typeof PAPA_BROWSER_CONTEXT === 'undefined') {\n  Papa.DuplexStreamStreamer = DuplexStreamStreamer;\n}\n*/\n// END FORK\n\n// BEGIN FORK\n// Adds an argument to papa.parse\n// function CsvToJson(_input, _config)\nfunction CsvToJson(\n  _input,\n  _config,\n  UserDefinedStreamer? // BEGIN FORK\n) {\n  _config = _config || {};\n  var dynamicTyping = _config.dynamicTyping || false;\n  if (isFunction(dynamicTyping)) {\n    _config.dynamicTypingFunction = dynamicTyping;\n    // Will be filled on first row call\n    dynamicTyping = {};\n  }\n  _config.dynamicTyping = dynamicTyping;\n\n  _config.transform = isFunction(_config.transform) ? _config.transform : false;\n\n  if (_config.worker && Papa.WORKERS_SUPPORTED) {\n    var w = newWorker();\n\n    w.userStep = _config.step;\n    w.userChunk = _config.chunk;\n    w.userComplete = _config.complete;\n    w.userError = _config.error;\n\n    _config.step = isFunction(_config.step);\n    _config.chunk = isFunction(_config.chunk);\n    _config.complete = isFunction(_config.complete);\n    _config.error = isFunction(_config.error);\n    delete _config.worker; // prevent infinite loop\n\n    w.postMessage({\n      input: _input,\n      config: _config,\n      workerId: w.id\n    });\n\n    return;\n  }\n\n  var streamer = null;\n  /*\n  if (_input === Papa.NODE_STREAM_INPUT && typeof PAPA_BROWSER_CONTEXT === 'undefined') {\n    // create a node Duplex stream for use\n    // with .pipe\n    streamer = new DuplexStreamStreamer(_config);\n    return streamer.getStream();\n  } else\n  */\n  if (typeof _input === 'string') {\n    // if (_config.download) streamer = new NetworkStreamer(_config);\n    // else\n    streamer = new StringStreamer(_config);\n  }\n  /*\n  else if (_input.readable === true && isFunction(_input.read) && isFunction(_input.on)) {\n    streamer = new ReadableStreamStreamer(_config);\n  } else if ((globalThis.File && _input instanceof File) || _input instanceof Object)\n    // ...Safari. (see issue #106)\n    streamer = new FileStreamer(_config);\n  */\n\n  // BEGIN FORK\n  if (!streamer) {\n    streamer = new UserDefinedStreamer(_config);\n  }\n  // END FORK\n\n  return streamer.stream(_input);\n}\n\nfunction JsonToCsv(_input, _config) {\n  // Default configuration\n\n  /** whether to surround every datum with quotes */\n  var _quotes = false;\n\n  /** whether to write headers */\n  var _writeHeader = true;\n\n  /** delimiting character(s) */\n  var _delimiter = ',';\n\n  /** newline character(s) */\n  var _newline = '\\r\\n';\n\n  /** quote character */\n  var _quoteChar = '\"';\n\n  /** escaped quote character, either \"\" or <config.escapeChar>\" */\n  var _escapedQuote = _quoteChar + _quoteChar;\n\n  /** whether to skip empty lines */\n  var _skipEmptyLines = false;\n\n  /** the columns (keys) we expect when we unparse objects */\n  var _columns = null;\n\n  unpackConfig();\n\n  var quoteCharRegex = new RegExp(escapeRegExp(_quoteChar), 'g');\n\n  if (typeof _input === 'string') _input = JSON.parse(_input);\n\n  if (Array.isArray(_input)) {\n    if (!_input.length || Array.isArray(_input[0])) return serialize(null, _input, _skipEmptyLines);\n    else if (typeof _input[0] === 'object')\n      return serialize(_columns || objectKeys(_input[0]), _input, _skipEmptyLines);\n  } else if (typeof _input === 'object') {\n    if (typeof _input.data === 'string') _input.data = JSON.parse(_input.data);\n\n    if (Array.isArray(_input.data)) {\n      if (!_input.fields) _input.fields = _input.meta && _input.meta.fields;\n\n      if (!_input.fields)\n        _input.fields = Array.isArray(_input.data[0]) ? _input.fields : objectKeys(_input.data[0]);\n\n      if (!Array.isArray(_input.data[0]) && typeof _input.data[0] !== 'object')\n        _input.data = [_input.data]; // handles input like [1,2,3] or ['asdf']\n    }\n\n    return serialize(_input.fields || [], _input.data || [], _skipEmptyLines);\n  }\n\n  // Default (any valid paths should return before this)\n  throw new Error('Unable to serialize unrecognized input');\n\n  function unpackConfig() {\n    if (typeof _config !== 'object') return;\n\n    if (\n      typeof _config.delimiter === 'string' &&\n      !Papa.BAD_DELIMITERS.filter(function (value) {\n        return _config.delimiter.indexOf(value) !== -1;\n      }).length\n    ) {\n      _delimiter = _config.delimiter;\n    }\n\n    if (typeof _config.quotes === 'boolean' || Array.isArray(_config.quotes))\n      _quotes = _config.quotes;\n\n    if (typeof _config.skipEmptyLines === 'boolean' || typeof _config.skipEmptyLines === 'string')\n      _skipEmptyLines = _config.skipEmptyLines;\n\n    if (typeof _config.newline === 'string') _newline = _config.newline;\n\n    if (typeof _config.quoteChar === 'string') _quoteChar = _config.quoteChar;\n\n    if (typeof _config.header === 'boolean') _writeHeader = _config.header;\n\n    if (Array.isArray(_config.columns)) {\n      if (_config.columns.length === 0) throw new Error('Option columns is empty');\n\n      _columns = _config.columns;\n    }\n\n    if (_config.escapeChar !== undefined) {\n      _escapedQuote = _config.escapeChar + _quoteChar;\n    }\n  }\n\n  /** Turns an object's keys into an array */\n  function objectKeys(obj) {\n    if (typeof obj !== 'object') return [];\n    var keys = [];\n    for (var key in obj) keys.push(key);\n    return keys;\n  }\n\n  /** The double for loop that iterates the data and writes out a CSV string including header row */\n  function serialize(fields, data, skipEmptyLines) {\n    var csv = '';\n\n    if (typeof fields === 'string') fields = JSON.parse(fields);\n    if (typeof data === 'string') data = JSON.parse(data);\n\n    var hasHeader = Array.isArray(fields) && fields.length > 0;\n    var dataKeyedByField = !Array.isArray(data[0]);\n\n    // If there a header row, write it first\n    if (hasHeader && _writeHeader) {\n      for (var i = 0; i < fields.length; i++) {\n        if (i > 0) csv += _delimiter;\n        csv += safe(fields[i], i);\n      }\n      if (data.length > 0) csv += _newline;\n    }\n\n    // Then write out the data\n    for (var row = 0; row < data.length; row++) {\n      var maxCol = hasHeader ? fields.length : data[row].length;\n\n      var emptyLine = false;\n      var nullLine = hasHeader ? Object.keys(data[row]).length === 0 : data[row].length === 0;\n      if (skipEmptyLines && !hasHeader) {\n        emptyLine =\n          skipEmptyLines === 'greedy'\n            ? data[row].join('').trim() === ''\n            : data[row].length === 1 && data[row][0].length === 0;\n      }\n      if (skipEmptyLines === 'greedy' && hasHeader) {\n        var line = [];\n        for (var c = 0; c < maxCol; c++) {\n          var cx = dataKeyedByField ? fields[c] : c;\n          line.push(data[row][cx]);\n        }\n        emptyLine = line.join('').trim() === '';\n      }\n      if (!emptyLine) {\n        for (var col = 0; col < maxCol; col++) {\n          if (col > 0 && !nullLine) csv += _delimiter;\n          var colIdx = hasHeader && dataKeyedByField ? fields[col] : col;\n          csv += safe(data[row][colIdx], col);\n        }\n        if (row < data.length - 1 && (!skipEmptyLines || (maxCol > 0 && !nullLine))) {\n          csv += _newline;\n        }\n      }\n    }\n    return csv;\n  }\n\n  /** Encloses a value around quotes if needed (makes a value safe for CSV insertion) */\n  function safe(str, col) {\n    if (typeof str === 'undefined' || str === null) return '';\n\n    if (str.constructor === Date) return JSON.stringify(str).slice(1, 25);\n\n    str = str.toString().replace(quoteCharRegex, _escapedQuote);\n\n    var needsQuotes =\n      (typeof _quotes === 'boolean' && _quotes) ||\n      (Array.isArray(_quotes) && _quotes[col]) ||\n      hasAny(str, Papa.BAD_DELIMITERS) ||\n      str.indexOf(_delimiter) > -1 ||\n      str.charAt(0) === ' ' ||\n      str.charAt(str.length - 1) === ' ';\n\n    return needsQuotes ? _quoteChar + str + _quoteChar : str;\n  }\n\n  function hasAny(str, substrings) {\n    for (var i = 0; i < substrings.length; i++) if (str.indexOf(substrings[i]) > -1) return true;\n    return false;\n  }\n}\n\n/** ChunkStreamer is the base prototype for various streamer implementations. */\nfunction ChunkStreamer(config) {\n  this._handle = null;\n  this._finished = false;\n  this._completed = false;\n  this._input = null;\n  this._baseIndex = 0;\n  this._partialLine = '';\n  this._rowCount = 0;\n  this._start = 0;\n  this._nextChunk = null;\n  this.isFirstChunk = true;\n  this._completeResults = {\n    data: [],\n    errors: [],\n    meta: {}\n  };\n  replaceConfig.call(this, config);\n\n  this.parseChunk = function (chunk, isFakeChunk) {\n    // First chunk pre-processing\n    if (this.isFirstChunk && isFunction(this._config.beforeFirstChunk)) {\n      var modifiedChunk = this._config.beforeFirstChunk(chunk);\n      if (modifiedChunk !== undefined) chunk = modifiedChunk;\n    }\n    this.isFirstChunk = false;\n\n    // Rejoin the line we likely just split in two by chunking the file\n    var aggregate = this._partialLine + chunk;\n    this._partialLine = '';\n\n    var results = this._handle.parse(aggregate, this._baseIndex, !this._finished);\n\n    if (this._handle.paused() || this._handle.aborted()) return;\n\n    var lastIndex = results.meta.cursor;\n\n    if (!this._finished) {\n      this._partialLine = aggregate.substring(lastIndex - this._baseIndex);\n      this._baseIndex = lastIndex;\n    }\n\n    if (results && results.data) this._rowCount += results.data.length;\n\n    var finishedIncludingPreview =\n      this._finished || (this._config.preview && this._rowCount >= this._config.preview);\n\n    if (isFunction(this._config.chunk) && !isFakeChunk) {\n      this._config.chunk(results, this._handle);\n      if (this._handle.paused() || this._handle.aborted()) return;\n      results = undefined;\n      this._completeResults = undefined;\n    }\n\n    if (!this._config.step && !this._config.chunk) {\n      this._completeResults.data = this._completeResults.data.concat(results.data);\n      this._completeResults.errors = this._completeResults.errors.concat(results.errors);\n      this._completeResults.meta = results.meta;\n    }\n\n    if (\n      !this._completed &&\n      finishedIncludingPreview &&\n      isFunction(this._config.complete) &&\n      (!results || !results.meta.aborted)\n    ) {\n      this._config.complete(this._completeResults, this._input);\n      this._completed = true;\n    }\n\n    if (!finishedIncludingPreview && (!results || !results.meta.paused)) this._nextChunk();\n\n    return results;\n  };\n\n  this._sendError = function (error) {\n    if (isFunction(this._config.error)) this._config.error(error);\n  };\n\n  function replaceConfig(config) {\n    // Deep-copy the config so we can edit it\n    var configCopy = copy(config);\n    configCopy.chunkSize = parseInt(configCopy.chunkSize); // parseInt VERY important so we don't concatenate strings!\n    if (!config.step && !config.chunk) configCopy.chunkSize = null; // disable Range header if not streaming; bad values break IIS - see issue #196\n    this._handle = new ParserHandle(configCopy);\n    this._handle.streamer = this;\n    this._config = configCopy; // persist the copy to the caller\n  }\n}\nfunction StringStreamer(config) {\n  config = config || {};\n  ChunkStreamer.call(this, config);\n\n  var remaining;\n  this.stream = function (s) {\n    remaining = s;\n    return this._nextChunk();\n  };\n  this._nextChunk = function () {\n    if (this._finished) return;\n    var size = this._config.chunkSize;\n    var chunk = size ? remaining.substr(0, size) : remaining;\n    remaining = size ? remaining.substr(size) : '';\n    this._finished = !remaining;\n    return this.parseChunk(chunk);\n  };\n}\nStringStreamer.prototype = Object.create(StringStreamer.prototype);\nStringStreamer.prototype.constructor = StringStreamer;\n\n// Use one ParserHandle per entire CSV file or string\nfunction ParserHandle(_config) {\n  // One goal is to minimize the use of regular expressions...\n  var FLOAT = /^\\s*-?(\\d*\\.?\\d+|\\d+\\.?\\d*)(e[-+]?\\d+)?\\s*$/i;\n  var ISO_DATE =\n    /(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d\\.\\d+([+-][0-2]\\d:[0-5]\\d|Z))|(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z))|(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z))/;\n\n  var self = this;\n  var _stepCounter = 0; // Number of times step was called (number of rows parsed)\n  var _rowCounter = 0; // Number of rows that have been parsed so far\n  var _input; // The input being parsed\n  var _parser; // The core parser being used\n  var _paused = false; // Whether we are paused or not\n  var _aborted = false; // Whether the parser has aborted or not\n  var _delimiterError; // Temporary state between delimiter detection and processing results\n  var _fields = []; // Fields are from the header row of the input, if there is one\n  var _results = {\n    // The last results returned from the parser\n    data: [],\n    errors: [],\n    meta: {}\n  };\n\n  if (isFunction(_config.step)) {\n    var userStep = _config.step;\n    _config.step = function (results) {\n      _results = results;\n\n      if (needsHeaderRow()) processResults();\n      // only call user's step function after header row\n      else {\n        processResults();\n\n        // It's possbile that this line was empty and there's no row here after all\n        if (!_results.data || _results.data.length === 0) return;\n\n        _stepCounter += results.data.length;\n        if (_config.preview && _stepCounter > _config.preview) _parser.abort();\n        else userStep(_results, self);\n      }\n    };\n  }\n\n  /**\n   * Parses input. Most users won't need, and shouldn't mess with, the baseIndex\n   * and ignoreLastRow parameters. They are used by streamers (wrapper functions)\n   * when an input comes in multiple chunks, like from a file.\n   */\n  this.parse = function (input, baseIndex, ignoreLastRow) {\n    var quoteChar = _config.quoteChar || '\"';\n    if (!_config.newline) _config.newline = guessLineEndings(input, quoteChar);\n\n    _delimiterError = false;\n    if (!_config.delimiter) {\n      var delimGuess = guessDelimiter(\n        input,\n        _config.newline,\n        _config.skipEmptyLines,\n        _config.comments,\n        _config.delimitersToGuess\n      );\n      if (delimGuess.successful) _config.delimiter = delimGuess.bestDelimiter;\n      else {\n        _delimiterError = true; // add error after parsing (otherwise it would be overwritten)\n        _config.delimiter = Papa.DefaultDelimiter;\n      }\n      _results.meta.delimiter = _config.delimiter;\n    } else if (isFunction(_config.delimiter)) {\n      _config.delimiter = _config.delimiter(input);\n      _results.meta.delimiter = _config.delimiter;\n    }\n\n    var parserConfig = copy(_config);\n    if (_config.preview && _config.header) parserConfig.preview++; // to compensate for header row\n\n    _input = input;\n    _parser = new Parser(parserConfig);\n    _results = _parser.parse(_input, baseIndex, ignoreLastRow);\n    processResults();\n    return _paused ? {meta: {paused: true}} : _results || {meta: {paused: false}};\n  };\n\n  this.paused = function () {\n    return _paused;\n  };\n\n  this.pause = function () {\n    _paused = true;\n    _parser.abort();\n    _input = _input.substr(_parser.getCharIndex());\n  };\n\n  this.resume = function () {\n    _paused = false;\n    self.streamer.parseChunk(_input, true);\n  };\n\n  this.aborted = function () {\n    return _aborted;\n  };\n\n  this.abort = function () {\n    _aborted = true;\n    _parser.abort();\n    _results.meta.aborted = true;\n    if (isFunction(_config.complete)) _config.complete(_results);\n    _input = '';\n  };\n\n  function testEmptyLine(s) {\n    return _config.skipEmptyLines === 'greedy'\n      ? s.join('').trim() === ''\n      : s.length === 1 && s[0].length === 0;\n  }\n\n  function processResults() {\n    if (_results && _delimiterError) {\n      addError(\n        'Delimiter',\n        'UndetectableDelimiter',\n        \"Unable to auto-detect delimiting character; defaulted to '\" + Papa.DefaultDelimiter + \"'\"\n      );\n      _delimiterError = false;\n    }\n\n    if (_config.skipEmptyLines) {\n      for (var i = 0; i < _results.data.length; i++)\n        if (testEmptyLine(_results.data[i])) _results.data.splice(i--, 1);\n    }\n\n    if (needsHeaderRow()) fillHeaderFields();\n\n    return applyHeaderAndDynamicTypingAndTransformation();\n  }\n\n  function needsHeaderRow() {\n    return _config.header && _fields.length === 0;\n  }\n\n  function fillHeaderFields() {\n    if (!_results) return;\n\n    function addHeder(header) {\n      if (isFunction(_config.transformHeader)) header = _config.transformHeader(header);\n\n      _fields.push(header);\n    }\n\n    if (Array.isArray(_results.data[0])) {\n      for (var i = 0; needsHeaderRow() && i < _results.data.length; i++)\n        _results.data[i].forEach(addHeder);\n\n      _results.data.splice(0, 1);\n    }\n    // if _results.data[0] is not an array, we are in a step where _results.data is the row.\n    else _results.data.forEach(addHeder);\n  }\n\n  function shouldApplyDynamicTyping(field) {\n    // Cache function values to avoid calling it for each row\n    if (_config.dynamicTypingFunction && _config.dynamicTyping[field] === undefined) {\n      _config.dynamicTyping[field] = _config.dynamicTypingFunction(field);\n    }\n    return (_config.dynamicTyping[field] || _config.dynamicTyping) === true;\n  }\n\n  function parseDynamic(field, value) {\n    if (shouldApplyDynamicTyping(field)) {\n      if (value === 'true' || value === 'TRUE') return true;\n      else if (value === 'false' || value === 'FALSE') return false;\n      else if (FLOAT.test(value)) return parseFloat(value);\n      else if (ISO_DATE.test(value)) return new Date(value);\n      else return value === '' ? null : value;\n    }\n    return value;\n  }\n\n  function applyHeaderAndDynamicTypingAndTransformation() {\n    if (\n      !_results ||\n      !_results.data ||\n      (!_config.header && !_config.dynamicTyping && !_config.transform)\n    )\n      return _results;\n\n    function processRow(rowSource, i) {\n      var row = _config.header ? {} : [];\n\n      var j;\n      for (j = 0; j < rowSource.length; j++) {\n        var field = j;\n        var value = rowSource[j];\n\n        if (_config.header) field = j >= _fields.length ? '__parsed_extra' : _fields[j];\n\n        if (_config.transform) value = _config.transform(value, field);\n\n        value = parseDynamic(field, value);\n\n        if (field === '__parsed_extra') {\n          row[field] = row[field] || [];\n          row[field].push(value);\n        } else row[field] = value;\n      }\n\n      if (_config.header) {\n        if (j > _fields.length)\n          addError(\n            'FieldMismatch',\n            'TooManyFields',\n            'Too many fields: expected ' + _fields.length + ' fields but parsed ' + j,\n            _rowCounter + i\n          );\n        else if (j < _fields.length)\n          addError(\n            'FieldMismatch',\n            'TooFewFields',\n            'Too few fields: expected ' + _fields.length + ' fields but parsed ' + j,\n            _rowCounter + i\n          );\n      }\n\n      return row;\n    }\n\n    var incrementBy = 1;\n    if (!_results.data[0] || Array.isArray(_results.data[0])) {\n      _results.data = _results.data.map(processRow);\n      incrementBy = _results.data.length;\n    } else _results.data = processRow(_results.data, 0);\n\n    if (_config.header && _results.meta) _results.meta.fields = _fields;\n\n    _rowCounter += incrementBy;\n    return _results;\n  }\n\n  function guessDelimiter(input, newline, skipEmptyLines, comments, delimitersToGuess) {\n    var bestDelim, bestDelta, fieldCountPrevRow;\n\n    delimitersToGuess = delimitersToGuess || [',', '\\t', '|', ';', Papa.RECORD_SEP, Papa.UNIT_SEP];\n\n    for (var i = 0; i < delimitersToGuess.length; i++) {\n      var delim = delimitersToGuess[i];\n      var delta = 0,\n        avgFieldCount = 0,\n        emptyLinesCount = 0;\n      fieldCountPrevRow = undefined;\n\n      var preview = new Parser({\n        comments: comments,\n        delimiter: delim,\n        newline: newline,\n        preview: 10\n      }).parse(input);\n\n      for (var j = 0; j < preview.data.length; j++) {\n        if (skipEmptyLines && testEmptyLine(preview.data[j])) {\n          emptyLinesCount++;\n          continue;\n        }\n        var fieldCount = preview.data[j].length;\n        avgFieldCount += fieldCount;\n\n        if (typeof fieldCountPrevRow === 'undefined') {\n          fieldCountPrevRow = 0;\n          continue;\n        } else if (fieldCount > 1) {\n          delta += Math.abs(fieldCount - fieldCountPrevRow);\n          fieldCountPrevRow = fieldCount;\n        }\n      }\n\n      if (preview.data.length > 0) avgFieldCount /= preview.data.length - emptyLinesCount;\n\n      if ((typeof bestDelta === 'undefined' || delta > bestDelta) && avgFieldCount > 1.99) {\n        bestDelta = delta;\n        bestDelim = delim;\n      }\n    }\n\n    _config.delimiter = bestDelim;\n\n    return {\n      successful: !!bestDelim,\n      bestDelimiter: bestDelim\n    };\n  }\n\n  function guessLineEndings(input, quoteChar) {\n    input = input.substr(0, 1024 * 1024); // max length 1 MB\n    // Replace all the text inside quotes\n    var re = new RegExp(escapeRegExp(quoteChar) + '([^]*?)' + escapeRegExp(quoteChar), 'gm');\n    input = input.replace(re, '');\n\n    var r = input.split('\\r');\n\n    var n = input.split('\\n');\n\n    var nAppearsFirst = n.length > 1 && n[0].length < r[0].length;\n\n    if (r.length === 1 || nAppearsFirst) return '\\n';\n\n    var numWithN = 0;\n    for (var i = 0; i < r.length; i++) {\n      if (r[i][0] === '\\n') numWithN++;\n    }\n\n    return numWithN >= r.length / 2 ? '\\r\\n' : '\\r';\n  }\n\n  function addError(type, code, msg, row) {\n    _results.errors.push({\n      type: type,\n      code: code,\n      message: msg,\n      row: row\n    });\n  }\n}\n\n/** https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions */\nfunction escapeRegExp(string) {\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'); // $& means the whole matched string\n}\n\n/** The core parser implements speedy and correct CSV parsing */\nfunction Parser(config) {\n  // Unpack the config object\n  config = config || {};\n  var delim = config.delimiter;\n  var newline = config.newline;\n  var comments = config.comments;\n  var step = config.step;\n  var preview = config.preview;\n  var fastMode = config.fastMode;\n  var quoteChar;\n  /** Allows for no quoteChar by setting quoteChar to undefined in config */\n  if (config.quoteChar === undefined) {\n    quoteChar = '\"';\n  } else {\n    quoteChar = config.quoteChar;\n  }\n  var escapeChar = quoteChar;\n  if (config.escapeChar !== undefined) {\n    escapeChar = config.escapeChar;\n  }\n\n  // Delimiter must be valid\n  if (typeof delim !== 'string' || Papa.BAD_DELIMITERS.indexOf(delim) > -1) delim = ',';\n\n  // Comment character must be valid\n  if (comments === delim) throw new Error('Comment character same as delimiter');\n  else if (comments === true) comments = '#';\n  else if (typeof comments !== 'string' || Papa.BAD_DELIMITERS.indexOf(comments) > -1)\n    comments = false;\n\n  // Newline must be valid: \\r, \\n, or \\r\\n\n  if (newline !== '\\n' && newline !== '\\r' && newline !== '\\r\\n') newline = '\\n';\n\n  // We're gonna need these at the Parser scope\n  var cursor = 0;\n  var aborted = false;\n\n  this.parse = function (input, baseIndex, ignoreLastRow) {\n    // For some reason, in Chrome, this speeds things up (!?)\n    if (typeof input !== 'string') throw new Error('Input must be a string');\n\n    // We don't need to compute some of these every time parse() is called,\n    // but having them in a more local scope seems to perform better\n    var inputLen = input.length,\n      delimLen = delim.length,\n      newlineLen = newline.length,\n      commentsLen = comments.length;\n    var stepIsFunction = isFunction(step);\n\n    // Establish starting state\n    cursor = 0;\n    var data = [],\n      errors = [],\n      row = [],\n      lastCursor = 0;\n\n    if (!input) return returnable();\n\n    if (fastMode || (fastMode !== false && input.indexOf(quoteChar) === -1)) {\n      var rows = input.split(newline);\n      for (var i = 0; i < rows.length; i++) {\n        row = rows[i];\n        cursor += row.length;\n        if (i !== rows.length - 1) cursor += newline.length;\n        else if (ignoreLastRow) return returnable();\n        if (comments && row.substr(0, commentsLen) === comments) continue;\n        if (stepIsFunction) {\n          data = [];\n          pushRow(row.split(delim));\n          doStep();\n          if (aborted) return returnable();\n        } else pushRow(row.split(delim));\n        if (preview && i >= preview) {\n          data = data.slice(0, preview);\n          return returnable(true);\n        }\n      }\n      return returnable();\n    }\n\n    var nextDelim = input.indexOf(delim, cursor);\n    var nextNewline = input.indexOf(newline, cursor);\n    var quoteCharRegex = new RegExp(escapeRegExp(escapeChar) + escapeRegExp(quoteChar), 'g');\n    var quoteSearch;\n\n    // Parser loop\n    for (;;) {\n      // Field has opening quote\n      if (input[cursor] === quoteChar) {\n        // Start our search for the closing quote where the cursor is\n        quoteSearch = cursor;\n\n        // Skip the opening quote\n        cursor++;\n\n        for (;;) {\n          // Find closing quote\n          quoteSearch = input.indexOf(quoteChar, quoteSearch + 1);\n\n          //No other quotes are found - no other delimiters\n          if (quoteSearch === -1) {\n            if (!ignoreLastRow) {\n              // No closing quote... what a pity\n              errors.push({\n                type: 'Quotes',\n                code: 'MissingQuotes',\n                message: 'Quoted field unterminated',\n                row: data.length, // row has yet to be inserted\n                index: cursor\n              });\n            }\n            return finish();\n          }\n\n          // Closing quote at EOF\n          if (quoteSearch === inputLen - 1) {\n            var value = input.substring(cursor, quoteSearch).replace(quoteCharRegex, quoteChar);\n            return finish(value);\n          }\n\n          // If this quote is escaped, it's part of the data; skip it\n          // If the quote character is the escape character, then check if the next character is the escape character\n          if (quoteChar === escapeChar && input[quoteSearch + 1] === escapeChar) {\n            quoteSearch++;\n            continue;\n          }\n\n          // If the quote character is not the escape character, then check if the previous character was the escape character\n          if (\n            quoteChar !== escapeChar &&\n            quoteSearch !== 0 &&\n            input[quoteSearch - 1] === escapeChar\n          ) {\n            continue;\n          }\n\n          // Check up to nextDelim or nextNewline, whichever is closest\n          var checkUpTo = nextNewline === -1 ? nextDelim : Math.min(nextDelim, nextNewline);\n          var spacesBetweenQuoteAndDelimiter = extraSpaces(checkUpTo);\n\n          // Closing quote followed by delimiter or 'unnecessary spaces + delimiter'\n          if (input[quoteSearch + 1 + spacesBetweenQuoteAndDelimiter] === delim) {\n            row.push(input.substring(cursor, quoteSearch).replace(quoteCharRegex, quoteChar));\n            cursor = quoteSearch + 1 + spacesBetweenQuoteAndDelimiter + delimLen;\n            nextDelim = input.indexOf(delim, cursor);\n            nextNewline = input.indexOf(newline, cursor);\n\n            if (stepIsFunction) {\n              doStep();\n              if (aborted) return returnable();\n            }\n\n            if (preview && data.length >= preview) return returnable(true);\n\n            break;\n          }\n\n          var spacesBetweenQuoteAndNewLine = extraSpaces(nextNewline);\n\n          // Closing quote followed by newline or 'unnecessary spaces + newLine'\n          if (\n            input.substr(quoteSearch + 1 + spacesBetweenQuoteAndNewLine, newlineLen) === newline\n          ) {\n            row.push(input.substring(cursor, quoteSearch).replace(quoteCharRegex, quoteChar));\n            saveRow(quoteSearch + 1 + spacesBetweenQuoteAndNewLine + newlineLen);\n            nextDelim = input.indexOf(delim, cursor); // because we may have skipped the nextDelim in the quoted field\n\n            if (stepIsFunction) {\n              doStep();\n              if (aborted) return returnable();\n            }\n\n            if (preview && data.length >= preview) return returnable(true);\n\n            break;\n          }\n\n          // Checks for valid closing quotes are complete (escaped quotes or quote followed by EOF/delimiter/newline) -- assume these quotes are part of an invalid text string\n          errors.push({\n            type: 'Quotes',\n            code: 'InvalidQuotes',\n            message: 'Trailing quote on quoted field is malformed',\n            row: data.length, // row has yet to be inserted\n            index: cursor\n          });\n\n          quoteSearch++;\n          continue;\n        }\n\n        if (stepIsFunction) {\n          doStep();\n          if (aborted) return returnable();\n        }\n\n        if (preview && data.length >= preview) return returnable(true);\n        continue;\n      }\n\n      // Comment found at start of new line\n      if (comments && row.length === 0 && input.substr(cursor, commentsLen) === comments) {\n        if (nextNewline === -1)\n          // Comment ends at EOF\n          return returnable();\n        cursor = nextNewline + newlineLen;\n        nextNewline = input.indexOf(newline, cursor);\n        nextDelim = input.indexOf(delim, cursor);\n        continue;\n      }\n\n      // Next delimiter comes before next newline, so we've reached end of field\n      if (nextDelim !== -1 && (nextDelim < nextNewline || nextNewline === -1)) {\n        row.push(input.substring(cursor, nextDelim));\n        cursor = nextDelim + delimLen;\n        nextDelim = input.indexOf(delim, cursor);\n        continue;\n      }\n\n      // End of row\n      if (nextNewline !== -1) {\n        row.push(input.substring(cursor, nextNewline));\n        saveRow(nextNewline + newlineLen);\n\n        if (stepIsFunction) {\n          doStep();\n          if (aborted) return returnable();\n        }\n\n        if (preview && data.length >= preview) return returnable(true);\n\n        continue;\n      }\n\n      break;\n    }\n\n    return finish();\n\n    function pushRow(row) {\n      data.push(row);\n      lastCursor = cursor;\n    }\n\n    /**\n     * checks if there are extra spaces after closing quote and given index without any text\n     * if Yes, returns the number of spaces\n     */\n    function extraSpaces(index) {\n      var spaceLength = 0;\n      if (index !== -1) {\n        var textBetweenClosingQuoteAndIndex = input.substring(quoteSearch + 1, index);\n        if (textBetweenClosingQuoteAndIndex && textBetweenClosingQuoteAndIndex.trim() === '') {\n          spaceLength = textBetweenClosingQuoteAndIndex.length;\n        }\n      }\n      return spaceLength;\n    }\n\n    /**\n     * Appends the remaining input from cursor to the end into\n     * row, saves the row, calls step, and returns the results.\n     */\n    function finish(value) {\n      if (ignoreLastRow) return returnable();\n      if (typeof value === 'undefined') value = input.substr(cursor);\n      row.push(value);\n      cursor = inputLen; // important in case parsing is paused\n      pushRow(row);\n      if (stepIsFunction) doStep();\n      return returnable();\n    }\n\n    /**\n     * Appends the current row to the results. It sets the cursor\n     * to newCursor and finds the nextNewline. The caller should\n     * take care to execute user's step function and check for\n     * preview and end parsing if necessary.\n     */\n    function saveRow(newCursor) {\n      cursor = newCursor;\n      pushRow(row);\n      row = [];\n      nextNewline = input.indexOf(newline, cursor);\n    }\n\n    /** Returns an object with the results, errors, and meta. */\n    function returnable(stopped, step) {\n      var isStep = step || false;\n      return {\n        data: isStep ? data[0] : data,\n        errors: errors,\n        meta: {\n          delimiter: delim,\n          linebreak: newline,\n          aborted: aborted,\n          truncated: !!stopped,\n          cursor: lastCursor + (baseIndex || 0)\n        }\n      };\n    }\n\n    /** Executes the user's step function and resets data & errors. */\n    function doStep() {\n      step(returnable(undefined, true));\n      data = [];\n      errors = [];\n    }\n  };\n\n  /** Sets the abort flag */\n  this.abort = function () {\n    aborted = true;\n  };\n\n  /** Gets the cursor position */\n  this.getCharIndex = function () {\n    return cursor;\n  };\n}\n\nfunction notImplemented() {\n  throw new Error('Not implemented.');\n}\n\n/** Makes a deep copy of an array or object (mostly) */\nfunction copy(obj) {\n  if (typeof obj !== 'object' || obj === null) return obj;\n  var cpy = Array.isArray(obj) ? [] : {};\n  for (var key in obj) cpy[key] = copy(obj[key]);\n  return cpy;\n}\n\nfunction isFunction(func) {\n  return typeof func === 'function';\n}\n","import type {Schema} from '../schema/schema';\nimport type {TableBatch} from '../../category/table/table-types';\nimport {TableBatchAggregator, TableBatchOptions} from './table-batch-aggregator';\n\nconst DEFAULT_ROW_COUNT = 100;\n\nexport default class RowTableBatchAggregator implements TableBatchAggregator {\n  schema: Schema;\n  options: TableBatchOptions;\n\n  length: number = 0;\n  rows: any[] | null = null;\n  cursor: number = 0;\n  private _headers: string[] = [];\n\n  constructor(schema: Schema, options: TableBatchOptions) {\n    this.options = options;\n    this.schema = schema;\n\n    // schema is an array if there're no headers\n    // object if there are headers\n    if (!Array.isArray(schema)) {\n      this._headers = [];\n      for (const key in schema) {\n        this._headers[schema[key].index] = schema[key].name;\n      }\n    }\n  }\n\n  rowCount(): number {\n    return this.length;\n  }\n\n  addArrayRow(row: any[], cursor?: number): void {\n    if (Number.isFinite(cursor)) {\n      this.cursor = cursor as number;\n    }\n\n    this.rows = this.rows || new Array(DEFAULT_ROW_COUNT);\n    this.rows[this.length] = row;\n    this.length++;\n  }\n\n  addObjectRow(row: {[columnName: string]: any}, cursor?: number): void {\n    if (Number.isFinite(cursor)) {\n      this.cursor = cursor as number;\n    }\n\n    this.rows = this.rows || new Array(DEFAULT_ROW_COUNT);\n    this.rows[this.length] = row;\n    this.length++;\n  }\n\n  getBatch(): TableBatch | null {\n    let rows = this.rows;\n    if (!rows) {\n      return null;\n    }\n\n    rows = rows.slice(0, this.length);\n    this.rows = null;\n\n    const batch: TableBatch = {\n      shape: this.options.shape,\n      batchType: 'data',\n      data: rows,\n      length: this.length,\n      schema: this.schema,\n      cursor: this.cursor\n    };\n\n    return batch;\n  }\n}\n","import type {Schema} from '../schema/schema';\nimport type {ColumnarTableBatch, ArrowTableBatch} from '../../category/table/table-types';\nimport {TableBatchAggregator} from './table-batch-aggregator';\n\ntype ColumnarTableBatchOptions = {};\n\nconst DEFAULT_ROW_COUNT = 100;\n\nexport default class ColumnarTableBatchAggregator implements TableBatchAggregator {\n  schema: Schema;\n  length: number = 0;\n  allocated: number = 0;\n  columns: {[columnName: string]: any[]} = {};\n\n  constructor(schema: Schema, options: ColumnarTableBatchOptions) {\n    this.schema = schema;\n    this._reallocateColumns();\n  }\n\n  rowCount(): number {\n    return this.length;\n  }\n\n  addArrayRow(row: any[]) {\n    // If user keeps pushing rows beyond batch size, reallocate\n    this._reallocateColumns();\n    let i = 0;\n    // TODO what if no csv header, columns not populated?\n    for (const fieldName in this.columns) {\n      this.columns[fieldName][this.length] = row[i++];\n    }\n    this.length++;\n  }\n\n  addObjectRow(row: {[columnName: string]: any}): void {\n    // If user keeps pushing rows beyond batch size, reallocate\n    this._reallocateColumns();\n    for (const fieldName in row) {\n      this.columns[fieldName][this.length] = row[fieldName];\n    }\n    this.length++;\n  }\n\n  getBatch(): ColumnarTableBatch | ArrowTableBatch | null {\n    this._pruneColumns();\n    const columns = Array.isArray(this.schema) ? this.columns : {};\n\n    // schema is an array if there're no headers\n    // object if there are headers\n    // columns should match schema format\n    if (!Array.isArray(this.schema)) {\n      for (const fieldName in this.schema) {\n        const field = this.schema[fieldName];\n        columns[field.name] = this.columns[field.index];\n      }\n    }\n\n    this.columns = {};\n\n    const batch: ColumnarTableBatch = {\n      shape: 'columnar-table',\n      batchType: 'data',\n      data: columns,\n      schema: this.schema,\n      length: this.length\n    };\n\n    return batch;\n  }\n\n  // HELPERS\n\n  _reallocateColumns() {\n    if (this.length < this.allocated) {\n      return;\n    }\n\n    // @ts-ignore TODO\n    this.allocated = this.allocated > 0 ? (this.allocated *= 2) : DEFAULT_ROW_COUNT;\n    this.columns = {};\n\n    for (const fieldName in this.schema) {\n      const field = this.schema[fieldName];\n      const ArrayType = field.type || Float32Array;\n      const oldColumn = this.columns[field.index];\n\n      if (oldColumn && ArrayBuffer.isView(oldColumn)) {\n        // Copy the old data to the new array\n        const typedArray = new ArrayType(this.allocated);\n        typedArray.set(oldColumn);\n        this.columns[field.index] = typedArray;\n      } else if (oldColumn) {\n        // Plain array\n        oldColumn.length = this.allocated;\n        this.columns[field.index] = oldColumn;\n      } else {\n        // Create new\n        this.columns[field.index] = new ArrayType(this.allocated);\n      }\n    }\n  }\n\n  _pruneColumns() {\n    for (const [columnName, column] of Object.entries(this.columns)) {\n      this.columns[columnName] = column.slice(0, this.length);\n    }\n  }\n}\n","import type {Schema} from '../schema/schema';\nimport type {TableBatch} from '../../category/table/table-types';\n// import type {ArrayRowTableBatch, ObjectRowTableBatch} from '../../category/table';\nimport {convertToArrayRow, convertToObjectRow} from '../utils/row-utils';\nimport {TableBatchAggregator, TableBatchOptions} from './table-batch-aggregator';\n\nconst DEFAULT_ROW_COUNT = 100;\n\nexport default class RowTableBatchAggregator implements TableBatchAggregator {\n  schema: Schema;\n  options: TableBatchOptions;\n\n  length: number = 0;\n  objectRows: {[columnName: string]: any} | null = null;\n  arrayRows: any[] | null = null;\n  cursor: number = 0;\n  private _headers: string[] = [];\n\n  constructor(schema: Schema, options: TableBatchOptions) {\n    this.options = options;\n    this.schema = schema;\n\n    // schema is an array if there're no headers\n    // object if there are headers\n    if (!Array.isArray(schema)) {\n      this._headers = [];\n      for (const key in schema) {\n        this._headers[schema[key].index] = schema[key].name;\n      }\n    }\n  }\n\n  rowCount(): number {\n    return this.length;\n  }\n\n  addArrayRow(row: any[], cursor?: number): void {\n    if (Number.isFinite(cursor)) {\n      this.cursor = cursor as number;\n    }\n\n    // eslint-disable-next-line default-case\n    switch (this.options.shape) {\n      case 'object-row-table':\n        const rowObject = convertToObjectRow(row, this._headers);\n        this.addObjectRow(rowObject, cursor);\n        break;\n      case 'array-row-table':\n        this.arrayRows = this.arrayRows || new Array(DEFAULT_ROW_COUNT);\n        this.arrayRows[this.length] = row;\n        this.length++;\n        break;\n    }\n  }\n\n  addObjectRow(row: {[columnName: string]: any}, cursor?: number): void {\n    if (Number.isFinite(cursor)) {\n      this.cursor = cursor as number;\n    }\n\n    // eslint-disable-next-line default-case\n    switch (this.options.shape) {\n      case 'array-row-table':\n        const rowArray = convertToArrayRow(row, this._headers);\n        this.addArrayRow(rowArray, cursor);\n        break;\n      case 'object-row-table':\n        this.objectRows = this.objectRows || new Array(DEFAULT_ROW_COUNT);\n        this.objectRows[this.length] = row;\n        this.length++;\n        break;\n    }\n  }\n\n  getBatch(): TableBatch | null {\n    let rows = this.arrayRows || this.objectRows;\n    if (!rows) {\n      return null;\n    }\n\n    rows = rows.slice(0, this.length);\n    this.arrayRows = null;\n    this.objectRows = null;\n\n    return {\n      shape: this.options.shape,\n      batchType: 'data',\n      data: rows,\n      length: this.length,\n      schema: this.schema,\n      cursor: this.cursor\n    };\n  }\n}\n","import type {Schema} from '../schema/schema';\nimport type {TableBatch} from '../../category/table/table-types';\nimport type {TableBatchAggregator, TableBatchConstructor} from './table-batch-aggregator';\nimport BaseTableBatchAggregator from './base-table-batch-aggregator';\nimport RowTableBatchAggregator from './row-table-batch-aggregator';\nimport ColumnarTableBatchAggregator from './columnar-table-batch-aggregator';\n\n// TODO define interface instead\ntype TableBatchBuilderOptions = {\n  shape: 'row-table' | 'array-row-table' | 'object-row-table' | 'columnar-table' | 'arrow-table';\n  batchSize?: number | 'auto';\n  batchDebounceMs?: number;\n  limit: number;\n  _limitMB: number;\n};\n\ntype GetBatchOptions = {\n  bytesUsed?: number;\n  [key: string]: any;\n};\n\nconst DEFAULT_OPTIONS: Required<TableBatchBuilderOptions> = {\n  shape: 'array-row-table',\n  batchSize: 'auto',\n  batchDebounceMs: 0,\n  limit: 0,\n  _limitMB: 0\n};\n\nconst ERR_MESSAGE = 'TableBatchBuilder';\n\n/** Incrementally builds batches from a stream of rows */\nexport default class TableBatchBuilder {\n  schema: Schema;\n  options: Required<TableBatchBuilderOptions>;\n\n  private aggregator: TableBatchAggregator | null = null;\n  private batchCount: number = 0;\n  private bytesUsed: number = 0;\n  private isChunkComplete: boolean = false;\n  private lastBatchEmittedMs: number = Date.now();\n  private totalLength: number = 0;\n  private totalBytes: number = 0;\n  private rowBytes: number = 0;\n\n  static ArrowBatch?: TableBatchConstructor;\n\n  constructor(schema: Schema, options?: TableBatchBuilderOptions) {\n    this.schema = schema;\n    this.options = {...DEFAULT_OPTIONS, ...options};\n  }\n\n  limitReached(): boolean {\n    if (Boolean(this.options?.limit) && this.totalLength >= this.options.limit) {\n      return true;\n    }\n    if (Boolean(this.options?._limitMB) && this.totalBytes / 1e6 >= this.options._limitMB) {\n      return true;\n    }\n    return false;\n  }\n\n  /** @deprecated Use addArrayRow or addObjectRow */\n  addRow(row: any[] | {[columnName: string]: any}): void {\n    if (this.limitReached()) {\n      return;\n    }\n    this.totalLength++;\n    this.rowBytes = this.rowBytes || this._estimateRowMB(row);\n    this.totalBytes += this.rowBytes;\n    if (Array.isArray(row)) {\n      this.addArrayRow(row);\n    } else {\n      this.addObjectRow(row);\n    }\n  }\n\n  /** Add one row to the batch */\n  protected addArrayRow(row: any[]) {\n    if (!this.aggregator) {\n      const TableBatchType = this._getTableBatchType();\n      this.aggregator = new TableBatchType(this.schema, this.options);\n    }\n    this.aggregator.addArrayRow(row);\n  }\n\n  /** Add one row to the batch */\n  protected addObjectRow(row: {[columnName: string]: any}): void {\n    if (!this.aggregator) {\n      const TableBatchType = this._getTableBatchType();\n      this.aggregator = new TableBatchType(this.schema, this.options);\n    }\n    this.aggregator.addObjectRow(row);\n  }\n\n  /** Mark an incoming raw memory chunk has completed */\n  chunkComplete(chunk: ArrayBuffer | string): void {\n    if (chunk instanceof ArrayBuffer) {\n      this.bytesUsed += chunk.byteLength;\n    }\n    if (typeof chunk === 'string') {\n      this.bytesUsed += chunk.length;\n    }\n    this.isChunkComplete = true;\n  }\n\n  getFullBatch(options?: GetBatchOptions): TableBatch | null {\n    return this._isFull() ? this._getBatch(options) : null;\n  }\n\n  getFinalBatch(options?: GetBatchOptions): TableBatch | null {\n    return this._getBatch(options);\n  }\n\n  // INTERNAL\n\n  _estimateRowMB(row: any[] | object): number {\n    return Array.isArray(row) ? row.length * 8 : Object.keys(row).length * 8;\n  }\n\n  private _isFull(): boolean {\n    // No batch, not ready\n    if (!this.aggregator || this.aggregator.rowCount() === 0) {\n      return false;\n    }\n\n    // if batchSize === 'auto' we wait for chunk to complete\n    // if batchSize === number, ensure we have enough rows\n    if (this.options.batchSize === 'auto') {\n      if (!this.isChunkComplete) {\n        return false;\n      }\n    } else if (this.options.batchSize > this.aggregator.rowCount()) {\n      return false;\n    }\n\n    // Debounce batches\n    if (this.options.batchDebounceMs > Date.now() - this.lastBatchEmittedMs) {\n      return false;\n    }\n\n    // Emit batch\n    this.isChunkComplete = false;\n    this.lastBatchEmittedMs = Date.now();\n    return true;\n  }\n\n  /**\n   * bytesUsed can be set via chunkComplete or via getBatch*\n   */\n  private _getBatch(options?: GetBatchOptions): TableBatch | null {\n    if (!this.aggregator) {\n      return null;\n    }\n\n    // TODO - this can overly increment bytes used?\n    if (options?.bytesUsed) {\n      this.bytesUsed = options.bytesUsed;\n    }\n    const normalizedBatch = this.aggregator.getBatch() as TableBatch;\n    normalizedBatch.count = this.batchCount;\n    normalizedBatch.bytesUsed = this.bytesUsed;\n    Object.assign(normalizedBatch, options);\n\n    this.batchCount++;\n    this.aggregator = null;\n    return normalizedBatch;\n  }\n\n  private _getTableBatchType(): TableBatchConstructor {\n    switch (this.options.shape) {\n      case 'row-table':\n        return BaseTableBatchAggregator;\n      case 'array-row-table':\n      case 'object-row-table':\n        return RowTableBatchAggregator;\n      case 'columnar-table':\n        return ColumnarTableBatchAggregator;\n      case 'arrow-table':\n        if (!TableBatchBuilder.ArrowBatch) {\n          throw new Error(ERR_MESSAGE);\n        }\n        return TableBatchBuilder.ArrowBatch;\n      default:\n        throw new Error(ERR_MESSAGE);\n    }\n  }\n}\n","// From https://github.com/rauschma/async-iter-demo/tree/master/src under MIT license\n// http://2ality.com/2016/10/asynchronous-iteration.html\n\nclass ArrayQueue<T> extends Array<T> {\n  enqueue(value: T) {\n    // Add at the end\n    return this.push(value);\n  }\n  dequeue(): T {\n    // Remove first element\n    return this.shift() as T;\n  }\n}\n\nexport default class AsyncQueue<T> {\n  private _values: ArrayQueue<T | Error>;\n  private _settlers: ArrayQueue<{resolve: (value: any) => void; reject: (reason?: any) => void}>;\n  private _closed: boolean;\n\n  constructor() {\n    // enqueues > dequeues\n    this._values = new ArrayQueue<T>();\n    // dequeues > enqueues\n    this._settlers = new ArrayQueue<{\n      resolve: (value: any) => void;\n      reject: (reason?: any) => void;\n    }>();\n    this._closed = false;\n  }\n\n  close(): void {\n    while (this._settlers.length > 0) {\n      this._settlers.dequeue().resolve({done: true});\n    }\n    this._closed = true;\n  }\n\n  [Symbol.asyncIterator](): AsyncIterator<T> {\n    return this;\n  }\n\n  enqueue(value: T | Error): void {\n    if (this._closed) {\n      throw new Error('Closed');\n    }\n\n    if (this._settlers.length > 0) {\n      if (this._values.length > 0) {\n        throw new Error('Illegal internal state');\n      }\n      const settler = this._settlers.dequeue();\n      if (value instanceof Error) {\n        settler.reject(value);\n      } else {\n        settler.resolve({value});\n      }\n    } else {\n      this._values.enqueue(value);\n    }\n  }\n\n  /**\n   * @returns a Promise for an IteratorResult\n   */\n  next(): Promise<any> {\n    if (this._values.length > 0) {\n      const value = this._values.dequeue();\n      if (value instanceof Error) {\n        return Promise.reject(value);\n      }\n      return Promise.resolve({value});\n    }\n\n    if (this._closed) {\n      if (this._settlers.length > 0) {\n        throw new Error('Illegal internal state');\n      }\n      return Promise.resolve({done: true});\n    }\n    // Wait for new values to be enqueued\n    return new Promise((resolve, reject) => {\n      this._settlers.enqueue({resolve, reject});\n    });\n  }\n}\n\n/**\n * @returns a Promise for an Array with the elements in `asyncIterable`\n */\nexport async function takeAsync(\n  asyncIterable: AsyncIterable<any>,\n  count = Infinity\n): Promise<any[]> {\n  const result: Array<any> = [];\n  const iterator = asyncIterable[Symbol.asyncIterator]();\n  while (result.length < count) {\n    const {value, done} = await iterator.next();\n    if (done) {\n      break;\n    }\n    result.push(value);\n  }\n  return result;\n}\n","/** Convert an object row to an array row */\nexport function convertToObjectRow(\n  arrayRow: any[],\n  headers: string[]\n): {[columnName: string]: any} {\n  if (!arrayRow) {\n    throw new Error('null row');\n  }\n  if (!headers) {\n    throw new Error('no headers');\n  }\n  const objectRow = {};\n  for (let i = 0; i < headers.length; i++) {\n    objectRow[headers[i]] = arrayRow[i];\n  }\n  return objectRow;\n}\n\n/** Convert an object row to an array row */\nexport function convertToArrayRow(\n  objectRow: {[columnName: string]: any},\n  headers: string[]\n): any[] {\n  if (!objectRow) {\n    throw new Error('null row');\n  }\n  if (!headers) {\n    throw new Error('no headers');\n  }\n  const arrayRow = new Array(headers.length);\n  for (let i = 0; i < headers.length; i++) {\n    arrayRow[i] = objectRow[headers[i]];\n  }\n  return arrayRow;\n}\n","// Replacement for the external assert method to reduce bundle size\n// Note: We don't use the second \"message\" argument in calling code,\n// so no need to support it here\nexport default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || '@math.gl/web-mercator: assertion failed.');\n  }\n}\n","// @ts-nocheck TODO padding\nimport WebMercatorViewport from './web-mercator-viewport';\nimport assert from './assert';\nimport {log2} from './math-utils';\n\n// Returns map settings {latitude, longitude, zoom}\n// that will contain the provided corners within the provided width.\n// Only supports non-perspective mode.\n\nexport default function fitBounds({\n  width,\n  height,\n  bounds,\n  minExtent = 0, // 0.01 would be about 1000 meters (degree is ~110KM)\n  maxZoom = 24, // ~x4,000,000 => About 10 meter extents\n  // options\n  padding = 0,\n  offset = [0, 0]\n}) {\n  const [[west, south], [east, north]] = bounds;\n\n  if (Number.isFinite(padding)) {\n    const p = padding;\n    padding = {\n      top: p,\n      bottom: p,\n      left: p,\n      right: p\n    };\n  } else {\n    // Make sure all the required properties are set\n    assert(\n      Number.isFinite(padding.top) &&\n        Number.isFinite(padding.bottom) &&\n        Number.isFinite(padding.left) &&\n        Number.isFinite(padding.right)\n    );\n  }\n\n  const viewport = new WebMercatorViewport({\n    width,\n    height,\n    longitude: 0,\n    latitude: 0,\n    zoom: 0\n  });\n\n  const nw = viewport.project([west, north]);\n  const se = viewport.project([east, south]);\n\n  // width/height on the Web Mercator plane\n  const size = [\n    Math.max(Math.abs(se[0] - nw[0]), minExtent),\n    Math.max(Math.abs(se[1] - nw[1]), minExtent)\n  ];\n\n  const targetSize = [\n    width - padding.left - padding.right - Math.abs(offset[0]) * 2,\n    height - padding.top - padding.bottom - Math.abs(offset[1]) * 2\n  ];\n\n  assert(targetSize[0] > 0 && targetSize[1] > 0);\n\n  // scale = screen pixels per unit on the Web Mercator plane\n  const scaleX = targetSize[0] / size[0];\n  const scaleY = targetSize[1] / size[1];\n\n  // Find how much we need to shift the center\n  const offsetX = (padding.right - padding.left) / 2 / scaleX;\n  const offsetY = (padding.bottom - padding.top) / 2 / scaleY;\n\n  const center = [(se[0] + nw[0]) / 2 + offsetX, (se[1] + nw[1]) / 2 + offsetY];\n\n  const centerLngLat = viewport.unproject(center);\n  const zoom = Math.min(maxZoom, viewport.zoom + log2(Math.abs(Math.min(scaleX, scaleY))));\n\n  assert(Number.isFinite(zoom));\n\n  return {\n    longitude: centerLngLat[0],\n    latitude: centerLngLat[1],\n    zoom\n  };\n}\n","import {worldToLngLat} from './web-mercator-utils';\nimport * as vec2 from 'gl-matrix/vec2';\nimport {transformVector} from './math-utils';\n\nconst DEGREES_TO_RADIANS = Math.PI / 180;\n\n/*\n * Returns the quad at the intersection of the frustum and the given z plane\n * @param {WebMercatorViewport} viewport\n * @param {Number} z - elevation in meters\n */\nexport default function getBounds(viewport, z = 0) {\n  const {width, height, unproject} = viewport;\n  const unprojectOps = {targetZ: z};\n  const bottomLeft = unproject([0, height], unprojectOps);\n  const bottomRight = unproject([width, height], unprojectOps);\n  let topLeft;\n  let topRight;\n\n  const halfFov = viewport.fovy\n    ? 0.5 * viewport.fovy * DEGREES_TO_RADIANS\n    : Math.atan(0.5 / viewport.altitude);\n  const angleToGround = (90 - viewport.pitch) * DEGREES_TO_RADIANS;\n  // The top plane is parallel to the ground if halfFov == angleToGround\n  if (halfFov > angleToGround - 0.01) {\n    // intersect with the far plane\n    topLeft = unprojectOnFarPlane(viewport, 0, z);\n    topRight = unprojectOnFarPlane(viewport, width, z);\n  } else {\n    // intersect with the top plane\n    topLeft = unproject([0, 0], unprojectOps);\n    topRight = unproject([width, 0], unprojectOps);\n  }\n\n  return [bottomLeft, bottomRight, topRight, topLeft];\n}\n\n/*\n * Find a point on the far clipping plane of the viewport\n * @param {WebMercatorViewport} viewport\n * @param {Number} x - projected x in screen space\n * @param {Number} targetZ - the elevation of the point in meters\n */\nfunction unprojectOnFarPlane(viewport, x, targetZ) {\n  const {pixelUnprojectionMatrix} = viewport;\n  const coord0 = transformVector(pixelUnprojectionMatrix, [x, 0, 1, 1]);\n  const coord1 = transformVector(pixelUnprojectionMatrix, [x, viewport.height, 1, 1]);\n\n  const z = targetZ * viewport.distanceScales.unitsPerMeter[2];\n  const t = (z - coord0[2]) / (coord1[2] - coord0[2]);\n  const coord = vec2.lerp([], coord0, coord1, t);\n\n  const result = worldToLngLat(coord);\n  result[2] = targetZ;\n  return result;\n}\n","import * as vec4 from 'gl-matrix/vec4';\n\n// Helper, avoids low-precision 32 bit matrices from gl-matrix mat4.create()\nexport function createMat4() {\n  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\n\n// Transforms a vec4 with a projection matrix\nexport function transformVector(matrix, vector) {\n  const result = vec4.transformMat4([], vector, matrix);\n  vec4.scale(result, result, 1 / result[3]);\n  return result;\n}\n\nexport function mod(value, divisor) {\n  const modulus = value % divisor;\n  return modulus < 0 ? divisor + modulus : modulus;\n}\n\nexport function lerp(start, end, step) {\n  return step * end + (1 - step) * start;\n}\n\nfunction ieLog2(x) {\n  return Math.log(x) * Math.LOG2E;\n}\n// Handle missing log2 in IE 11\nexport const log2 = Math.log2 || ieLog2;\n","// TODO - THE UTILITIES IN THIS FILE SHOULD BE IMPORTED FROM WEB-MERCATOR-VIEWPORT MODULE\n\nimport {createMat4, transformVector, log2} from './math-utils';\n\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nimport assert from './assert';\n\n// CONSTANTS\nconst PI = Math.PI;\nconst PI_4 = PI / 4;\nconst DEGREES_TO_RADIANS = PI / 180;\nconst RADIANS_TO_DEGREES = 180 / PI;\nconst TILE_SIZE = 512;\n// Average circumference (40075 km equatorial, 40007 km meridional)\nconst EARTH_CIRCUMFERENCE = 40.03e6;\n\n// Mapbox default altitude\nexport const DEFAULT_ALTITUDE = 1.5;\n\n/** Util functions **/\nexport function zoomToScale(zoom) {\n  return Math.pow(2, zoom);\n}\n\nexport function scaleToZoom(scale) {\n  return log2(scale);\n}\n\n/**\n * Project [lng,lat] on sphere onto [x,y] on 512*512 Mercator Zoom 0 tile.\n * Performs the nonlinear part of the web mercator projection.\n * Remaining projection is done with 4x4 matrices which also handles\n * perspective.\n *\n * @param lngLat - [lng, lat] coordinates\n *   Specifies a point on the sphere to project onto the map.\n * @return [x,y] coordinates.\n */\nexport function lngLatToWorld([lng, lat]) {\n  assert(Number.isFinite(lng));\n  assert(Number.isFinite(lat) && lat >= -90 && lat <= 90, 'invalid latitude');\n\n  const lambda2 = lng * DEGREES_TO_RADIANS;\n  const phi2 = lat * DEGREES_TO_RADIANS;\n  const x = (TILE_SIZE * (lambda2 + PI)) / (2 * PI);\n  const y = (TILE_SIZE * (PI + Math.log(Math.tan(PI_4 + phi2 * 0.5)))) / (2 * PI);\n  return [x, y];\n}\n\n// Unproject world point [x,y] on map onto {lat, lon} on sphere\nexport function worldToLngLat([x, y]) {\n  const lambda2 = (x / TILE_SIZE) * (2 * PI) - PI;\n  const phi2 = 2 * (Math.atan(Math.exp((y / TILE_SIZE) * (2 * PI) - PI)) - PI_4);\n  return [lambda2 * RADIANS_TO_DEGREES, phi2 * RADIANS_TO_DEGREES];\n}\n\n// Returns the zoom level that gives a 1 meter pixel at a certain latitude\n// 1 = C*cos(y)/2^z/TILE_SIZE = C*cos(y)/2^(z+9)\nexport function getMeterZoom({latitude}) {\n  assert(Number.isFinite(latitude));\n  const latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n  return scaleToZoom(EARTH_CIRCUMFERENCE * latCosine) - 9;\n}\n\n/**\n * Calculate distance scales in meters around current lat/lon, both for\n * degrees and pixels.\n * In mercator projection mode, the distance scales vary significantly\n * with latitude.\n */\n\nexport function getDistanceScales({latitude, longitude, highPrecision = false}) {\n  assert(Number.isFinite(latitude) && Number.isFinite(longitude));\n\n  const result = {};\n  const worldSize = TILE_SIZE;\n  const latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n\n  /**\n   * Number of pixels occupied by one degree longitude around current lat/lon:\n     unitsPerDegreeX = d(lngLatToWorld([lng, lat])[0])/d(lng)\n       = scale * TILE_SIZE * DEGREES_TO_RADIANS / (2 * PI)\n     unitsPerDegreeY = d(lngLatToWorld([lng, lat])[1])/d(lat)\n       = -scale * TILE_SIZE * DEGREES_TO_RADIANS / cos(lat * DEGREES_TO_RADIANS)  / (2 * PI)\n   */\n  const unitsPerDegreeX = worldSize / 360;\n  const unitsPerDegreeY = unitsPerDegreeX / latCosine;\n\n  /**\n   * Number of pixels occupied by one meter around current lat/lon:\n   */\n  const altUnitsPerMeter = worldSize / EARTH_CIRCUMFERENCE / latCosine;\n\n  /**\n   * LngLat: longitude -> east and latitude -> north (bottom left)\n   * UTM meter offset: x -> east and y -> north (bottom left)\n   * World space: x -> east and y -> south (top left)\n   *\n   * Y needs to be flipped when converting delta degree/meter to delta pixels\n   */\n  result.unitsPerMeter = [altUnitsPerMeter, altUnitsPerMeter, altUnitsPerMeter];\n  result.metersPerUnit = [1 / altUnitsPerMeter, 1 / altUnitsPerMeter, 1 / altUnitsPerMeter];\n\n  result.unitsPerDegree = [unitsPerDegreeX, unitsPerDegreeY, altUnitsPerMeter];\n  result.degreesPerUnit = [1 / unitsPerDegreeX, 1 / unitsPerDegreeY, 1 / altUnitsPerMeter];\n\n  /**\n   * Taylor series 2nd order for 1/latCosine\n     f'(a) * (x - a)\n       = d(1/cos(lat * DEGREES_TO_RADIANS))/d(lat) * dLat\n       = DEGREES_TO_RADIANS * tan(lat * DEGREES_TO_RADIANS) / cos(lat * DEGREES_TO_RADIANS) * dLat\n   */\n  if (highPrecision) {\n    const latCosine2 = (DEGREES_TO_RADIANS * Math.tan(latitude * DEGREES_TO_RADIANS)) / latCosine;\n    const unitsPerDegreeY2 = (unitsPerDegreeX * latCosine2) / 2;\n    const altUnitsPerDegree2 = (worldSize / EARTH_CIRCUMFERENCE) * latCosine2;\n    const altUnitsPerMeter2 = (altUnitsPerDegree2 / unitsPerDegreeY) * altUnitsPerMeter;\n\n    result.unitsPerDegree2 = [0, unitsPerDegreeY2, altUnitsPerDegree2];\n    result.unitsPerMeter2 = [altUnitsPerMeter2, 0, altUnitsPerMeter2];\n  }\n\n  // Main results, used for converting meters to latlng deltas and scaling offsets\n  return result;\n}\n\n/**\n * Offset a lng/lat position by meterOffset (northing, easting)\n */\nexport function addMetersToLngLat(lngLatZ, xyz) {\n  const [longitude, latitude, z0] = lngLatZ;\n  const [x, y, z] = xyz;\n\n  const {unitsPerMeter, unitsPerMeter2} = getDistanceScales({\n    longitude,\n    latitude,\n    highPrecision: true\n  });\n\n  const worldspace = lngLatToWorld(lngLatZ);\n  worldspace[0] += x * (unitsPerMeter[0] + unitsPerMeter2[0] * y);\n  worldspace[1] += y * (unitsPerMeter[1] + unitsPerMeter2[1] * y);\n\n  // @ts-ignore\n  const newLngLat = worldToLngLat(worldspace);\n  const newZ = (z0 || 0) + (z || 0);\n\n  return Number.isFinite(z0) || Number.isFinite(z) ? [newLngLat[0], newLngLat[1], newZ] : newLngLat;\n}\n\n// ATTRIBUTION:\n// view and projection matrix creation is intentionally kept compatible with\n// mapbox-gl's implementation to ensure that seamless interoperation\n// with mapbox and react-map-gl. See: https://github.com/mapbox/mapbox-gl-js\n\nexport function getViewMatrix({\n  // Viewport props\n  height,\n  pitch,\n  bearing,\n  altitude,\n  // Pre-calculated parameters\n  scale,\n  center = null\n}) {\n  // VIEW MATRIX: PROJECTS MERCATOR WORLD COORDINATES\n  // Note that mercator world coordinates typically need to be flipped\n  //\n  // Note: As usual, matrix operation orders should be read in reverse\n  // since vectors will be multiplied from the right during transformation\n  const vm = createMat4();\n\n  // Move camera to altitude (along the pitch & bearing direction)\n  mat4.translate(vm, vm, [0, 0, -altitude]);\n\n  // Rotate by bearing, and then by pitch (which tilts the view)\n  mat4.rotateX(vm, vm, -pitch * DEGREES_TO_RADIANS);\n  mat4.rotateZ(vm, vm, bearing * DEGREES_TO_RADIANS);\n\n  scale /= height;\n  mat4.scale(vm, vm, [scale, scale, scale]);\n\n  if (center) {\n    mat4.translate(vm, vm, vec3.negate([], center));\n  }\n\n  return vm;\n}\n\n// PROJECTION MATRIX PARAMETERS\n// Variable fov (in radians)\nexport function getProjectionParameters({\n  width,\n  height,\n  fovy = altitudeToFovy(DEFAULT_ALTITUDE),\n  altitude,\n  pitch = 0,\n  nearZMultiplier = 1,\n  farZMultiplier = 1\n}) {\n  // For back-compatibility allow field of view to be\n  // derived from altitude\n  if (altitude !== undefined) {\n    fovy = altitudeToFovy(altitude);\n  }\n  const halfFov = 0.5 * fovy * DEGREES_TO_RADIANS;\n  const focalDistance = fovyToAltitude(fovy);\n\n  // Find the distance from the center point to the center top\n  // in focal distance units using law of sines.\n  const pitchRadians = pitch * DEGREES_TO_RADIANS;\n  const topHalfSurfaceDistance =\n    (Math.sin(halfFov) * focalDistance) /\n    Math.sin(Math.min(Math.max(Math.PI / 2 - pitchRadians - halfFov, 0.01), Math.PI - 0.01));\n\n  // Calculate z value of the farthest fragment that should be rendered.\n  const farZ = Math.sin(pitchRadians) * topHalfSurfaceDistance + focalDistance;\n\n  return {\n    fov: 2 * halfFov,\n    aspect: width / height,\n    focalDistance,\n    near: nearZMultiplier,\n    far: farZ * farZMultiplier\n  };\n}\n\n// PROJECTION MATRIX: PROJECTS FROM CAMERA (VIEW) SPACE TO CLIPSPACE\n// To match mapbox's z buffer:\n// <= 0.28 - nearZMultiplier: 0.1, farZmultiplier: 1\n// >= 0.29 - nearZMultiplier: 1 / height, farZMultiplier: 1.01\nexport function getProjectionMatrix({\n  width,\n  height,\n  pitch,\n  altitude,\n  fovy,\n  nearZMultiplier,\n  farZMultiplier\n}) {\n  const {fov, aspect, near, far} = getProjectionParameters({\n    width,\n    height,\n    altitude,\n    fovy,\n    pitch,\n    nearZMultiplier,\n    farZMultiplier\n  });\n\n  const projectionMatrix = mat4.perspective(\n    [],\n    fov, // fov in radians\n    aspect, // aspect ratio\n    near, // near plane\n    far // far plane\n  );\n\n  return projectionMatrix;\n}\n\n// Utility function to calculate the field of view such that\n// the focal distance is equal to the ground distance. This\n// is how mapbox's z fov is calculated\nexport function altitudeToFovy(altitude) {\n  return 2 * Math.atan(0.5 / altitude) * RADIANS_TO_DEGREES;\n}\n\nexport function fovyToAltitude(fovy) {\n  return 0.5 / Math.tan(0.5 * fovy * DEGREES_TO_RADIANS);\n}\n\n// Project flat coordinates to pixels on screen.\nexport function worldToPixels(xyz, pixelProjectionMatrix) {\n  const [x, y, z = 0] = xyz;\n  assert(Number.isFinite(x) && Number.isFinite(y) && Number.isFinite(z));\n\n  return transformVector(pixelProjectionMatrix, [x, y, z, 1]);\n}\n\n// Unproject pixels on screen to flat coordinates.\nexport function pixelsToWorld(xyz, pixelUnprojectionMatrix, targetZ = 0) {\n  const [x, y, z] = xyz;\n  assert(Number.isFinite(x) && Number.isFinite(y), 'invalid pixel coordinate');\n\n  if (Number.isFinite(z)) {\n    // Has depth component\n    const coord = transformVector(pixelUnprojectionMatrix, [x, y, z, 1]);\n    return coord;\n  }\n\n  // since we don't know the correct projected z value for the point,\n  // unproject two points to get a line and then find the point on that line with z=0\n  const coord0 = transformVector(pixelUnprojectionMatrix, [x, y, 0, 1]);\n  const coord1 = transformVector(pixelUnprojectionMatrix, [x, y, 1, 1]);\n\n  const z0 = coord0[2];\n  const z1 = coord1[2];\n\n  const t = z0 === z1 ? 0 : ((targetZ || 0) - z0) / (z1 - z0);\n  return vec2.lerp([], coord0, coord1, t);\n}\n","// View and Projection Matrix calculations for mapbox-js style map view properties\nimport {createMat4} from './math-utils';\n\nimport {\n  zoomToScale,\n  pixelsToWorld,\n  lngLatToWorld,\n  worldToLngLat,\n  worldToPixels,\n  altitudeToFovy,\n  fovyToAltitude,\n  DEFAULT_ALTITUDE,\n  getProjectionMatrix,\n  getDistanceScales,\n  getViewMatrix\n} from './web-mercator-utils';\nimport fitBounds from './fit-bounds';\nimport getBounds from './get-bounds';\n\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\n\nexport default class WebMercatorViewport {\n  // eslint-disable-next-line max-statements\n  constructor(\n    {\n      // Map state\n      width,\n      height,\n      latitude = 0,\n      longitude = 0,\n      zoom = 0,\n      pitch = 0,\n      bearing = 0,\n      altitude = null,\n      fovy = null,\n      position = null,\n      nearZMultiplier = 0.02,\n      farZMultiplier = 1.01\n    } = {width: 1, height: 1}\n  ) {\n    // Silently allow apps to send in 0,0 to facilitate isomorphic render etc\n    width = width || 1;\n    height = height || 1;\n\n    // `fovy` & `altitude` are independent parameters, one for the\n    // projection and the latter for the view matrix. In the past,\n    // the `fovy` was always derived from the `altitude`\n    if (fovy === null && altitude === null) {\n      altitude = DEFAULT_ALTITUDE;\n      fovy = altitudeToFovy(altitude);\n    } else if (fovy === null) {\n      fovy = altitudeToFovy(altitude);\n    } else if (altitude === null) {\n      altitude = fovyToAltitude(fovy);\n    }\n\n    const scale = zoomToScale(zoom);\n    // Altitude - prevent division by 0\n    // TODO - just throw an Error instead?\n    altitude = Math.max(0.75, altitude);\n\n    const distanceScales = getDistanceScales({longitude, latitude});\n\n    const center = lngLatToWorld([longitude, latitude]);\n    center[2] = 0;\n\n    if (position) {\n      vec3.add(center, center, vec3.mul([], position, distanceScales.unitsPerMeter));\n    }\n\n    this.projectionMatrix = getProjectionMatrix({\n      width,\n      height,\n      pitch,\n      fovy,\n      nearZMultiplier,\n      farZMultiplier\n    });\n\n    this.viewMatrix = getViewMatrix({\n      height,\n      scale,\n      center,\n      pitch,\n      bearing,\n      altitude\n    });\n\n    // Save parameters\n    this.width = width;\n    this.height = height;\n    this.scale = scale;\n\n    this.latitude = latitude;\n    this.longitude = longitude;\n    this.zoom = zoom;\n    this.pitch = pitch;\n    this.bearing = bearing;\n    this.altitude = altitude;\n    this.fovy = fovy;\n    this.center = center;\n    this.meterOffset = position || [0, 0, 0];\n\n    this.distanceScales = distanceScales;\n\n    this._initMatrices();\n\n    // Bind methods for easy access\n    this.equals = this.equals.bind(this);\n    this.project = this.project.bind(this);\n    this.unproject = this.unproject.bind(this);\n    this.projectPosition = this.projectPosition.bind(this);\n    this.unprojectPosition = this.unprojectPosition.bind(this);\n\n    Object.freeze(this);\n  }\n\n  _initMatrices() {\n    const {width, height, projectionMatrix, viewMatrix} = this;\n\n    // Note: As usual, matrix operations should be applied in \"reverse\" order\n    // since vectors will be multiplied in from the right during transformation\n    const vpm = createMat4();\n    mat4.multiply(vpm, vpm, projectionMatrix);\n    mat4.multiply(vpm, vpm, viewMatrix);\n    this.viewProjectionMatrix = vpm;\n\n    // Calculate matrices and scales needed for projection\n    /**\n     * Builds matrices that converts preprojected lngLats to screen pixels\n     * and vice versa.\n     * Note: Currently returns bottom-left coordinates!\n     * Note: Starts with the GL projection matrix and adds steps to the\n     *       scale and translate that matrix onto the window.\n     * Note: WebGL controls clip space to screen projection with gl.viewport\n     *       and does not need this step.\n     */\n    const m = createMat4();\n\n    // matrix for conversion from location to screen coordinates\n    mat4.scale(m, m, [width / 2, -height / 2, 1]);\n    mat4.translate(m, m, [1, -1, 0]);\n    mat4.multiply(m, m, vpm);\n\n    const mInverse = mat4.invert(createMat4(), m);\n    if (!mInverse) {\n      throw new Error('Pixel project matrix not invertible');\n    }\n\n    this.pixelProjectionMatrix = m;\n    this.pixelUnprojectionMatrix = mInverse;\n  }\n\n  // Two viewports are equal if width and height are identical, and if\n  // their view and projection matrices are (approximately) equal.\n  equals(viewport) {\n    if (!(viewport instanceof WebMercatorViewport)) {\n      return false;\n    }\n\n    return (\n      viewport.width === this.width &&\n      viewport.height === this.height &&\n      mat4.equals(viewport.projectionMatrix, this.projectionMatrix) &&\n      mat4.equals(viewport.viewMatrix, this.viewMatrix)\n    );\n  }\n\n  // Projects xyz (possibly latitude and longitude) to pixel coordinates in window\n  // using viewport projection parameters\n  project(xyz, {topLeft = true} = {}) {\n    const worldPosition = this.projectPosition(xyz);\n    const coord = worldToPixels(worldPosition, this.pixelProjectionMatrix);\n\n    const [x, y] = coord;\n    const y2 = topLeft ? y : this.height - y;\n    return xyz.length === 2 ? [x, y2] : [x, y2, coord[2]];\n  }\n\n  // Unproject pixel coordinates on screen onto world coordinates,\n  // (possibly [lon, lat]) on map.\n  unproject(xyz, {topLeft = true, targetZ = undefined} = {}) {\n    const [x, y, z] = xyz;\n\n    const y2 = topLeft ? y : this.height - y;\n    const targetZWorld = targetZ && targetZ * this.distanceScales.unitsPerMeter[2];\n    const coord = pixelsToWorld([x, y2, z], this.pixelUnprojectionMatrix, targetZWorld);\n    const [X, Y, Z] = this.unprojectPosition(coord);\n\n    if (Number.isFinite(z)) {\n      return [X, Y, Z];\n    }\n    return Number.isFinite(targetZ) ? [X, Y, targetZ] : [X, Y];\n  }\n\n  // NON_LINEAR PROJECTION HOOKS\n  // Used for web meractor projection\n\n  projectPosition(xyz) {\n    const [X, Y] = lngLatToWorld(xyz);\n    const Z = (xyz[2] || 0) * this.distanceScales.unitsPerMeter[2];\n    return [X, Y, Z];\n  }\n\n  unprojectPosition(xyz) {\n    const [X, Y] = worldToLngLat(xyz);\n    const Z = (xyz[2] || 0) * this.distanceScales.metersPerUnit[2];\n    return [X, Y, Z];\n  }\n\n  // Project [lng,lat] on sphere onto [x,y] on 512*512 Mercator Zoom 0 tile.\n  projectFlat(lngLat) {\n    return lngLatToWorld(lngLat);\n  }\n\n  // Unproject world point [x,y] on map onto {lat, lon} on sphere\n  unprojectFlat(xy) {\n    return worldToLngLat(xy);\n  }\n\n  // Get the map center that place a given [lng, lat] coordinate at screen point [x, y]\n  getMapCenterByLngLatPosition({lngLat, pos}) {\n    const fromLocation = pixelsToWorld(pos, this.pixelUnprojectionMatrix);\n    const toLocation = lngLatToWorld(lngLat);\n\n    const translate = vec2.add([], toLocation, vec2.negate([], fromLocation));\n    const newCenter = vec2.add([], this.center, translate);\n\n    return worldToLngLat(newCenter);\n  }\n\n  // Legacy method name\n  getLocationAtPoint({lngLat, pos}) {\n    return this.getMapCenterByLngLatPosition({lngLat, pos});\n  }\n\n  // Returns a new viewport that fit around the given rectangle.\n  fitBounds(bounds, options = {}) {\n    const {width, height} = this;\n    const {longitude, latitude, zoom} = fitBounds(Object.assign({width, height, bounds}, options));\n    return new WebMercatorViewport({width, height, longitude, latitude, zoom});\n  }\n\n  getBounds(options) {\n    const corners = this.getBoundingRegion(options);\n\n    const west = Math.min(...corners.map((p) => p[0]));\n    const east = Math.max(...corners.map((p) => p[0]));\n    const south = Math.min(...corners.map((p) => p[1]));\n    const north = Math.max(...corners.map((p) => p[1]));\n    return [\n      [west, south],\n      [east, north]\n    ];\n  }\n\n  getBoundingRegion(options = {}) {\n    return getBounds(this, options.z || 0);\n  }\n}\n","export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function(key) {\n    return (prefix + key) in this;\n  },\n  get: function(key) {\n    return this[prefix + key];\n  },\n  set: function(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function() {\n    for (var property in this) if (property[0] === prefix) delete this[property];\n  },\n  keys: function() {\n    var keys = [];\n    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n    return keys;\n  },\n  values: function() {\n    var values = [];\n    for (var property in this) if (property[0] === prefix) values.push(this[property]);\n    return values;\n  },\n  entries: function() {\n    var entries = [];\n    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n    return entries;\n  },\n  size: function() {\n    var size = 0;\n    for (var property in this) if (property[0] === prefix) ++size;\n    return size;\n  },\n  empty: function() {\n    for (var property in this) if (property[0] === prefix) return false;\n    return true;\n  },\n  each: function(f) {\n    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n    var i = -1,\n        n = object.length,\n        o;\n\n    if (f == null) while (++i < n) map.set(i, object[i]);\n    else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nexport default map;\n","import map from \"./map\";\n\nexport default function() {\n  var keys = [],\n      sortKeys = [],\n      sortValues,\n      rollup,\n      nest;\n\n  function apply(array, depth, createResult, setResult) {\n    if (depth >= keys.length) {\n      if (sortValues != null) array.sort(sortValues);\n      return rollup != null ? rollup(array) : array;\n    }\n\n    var i = -1,\n        n = array.length,\n        key = keys[depth++],\n        keyValue,\n        value,\n        valuesByKey = map(),\n        values,\n        result = createResult();\n\n    while (++i < n) {\n      if (values = valuesByKey.get(keyValue = key(value = array[i]) + \"\")) {\n        values.push(value);\n      } else {\n        valuesByKey.set(keyValue, [value]);\n      }\n    }\n\n    valuesByKey.each(function(values, key) {\n      setResult(result, key, apply(values, depth, createResult, setResult));\n    });\n\n    return result;\n  }\n\n  function entries(map, depth) {\n    if (++depth > keys.length) return map;\n    var array, sortKey = sortKeys[depth - 1];\n    if (rollup != null && depth >= keys.length) array = map.entries();\n    else array = [], map.each(function(v, k) { array.push({key: k, values: entries(v, depth)}); });\n    return sortKey != null ? array.sort(function(a, b) { return sortKey(a.key, b.key); }) : array;\n  }\n\n  return nest = {\n    object: function(array) { return apply(array, 0, createObject, setObject); },\n    map: function(array) { return apply(array, 0, createMap, setMap); },\n    entries: function(array) { return entries(apply(array, 0, createMap, setMap), 0); },\n    key: function(d) { keys.push(d); return nest; },\n    sortKeys: function(order) { sortKeys[keys.length - 1] = order; return nest; },\n    sortValues: function(order) { sortValues = order; return nest; },\n    rollup: function(f) { rollup = f; return nest; }\n  };\n}\n\nfunction createObject() {\n  return {};\n}\n\nfunction setObject(object, key, value) {\n  object[key] = value;\n}\n\nfunction createMap() {\n  return map();\n}\n\nfunction setMap(map, key, value) {\n  map.set(key, value);\n}\n","import {default as map, prefix} from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\n\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set;\n\n  // Copy constructor.\n  if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n  // Otherwise, assume its an array.\n  else if (object) {\n    var i = -1, n = object.length;\n    if (f == null) while (++i < n) set.add(object[i]);\n    else while (++i < n) set.add(f(object[i], i, object));\n  }\n\n  return set;\n}\n\nexport default set;\n","/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to translate\r\n * @param {ReadonlyVec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {ReadonlyQuat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyQuat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {ReadonlyMat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\r\n * 2 Dimensional Vector\r\n * @module vec2\r\n */\n\n/**\r\n * Creates a new, empty vec2\r\n *\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec2} a vector to clone\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Copy the values from one vec2 to another\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the source vector\r\n * @returns {vec2} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Set the components of a vec2 to the given values\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} out\r\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Adds two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\r\n * Multiplies two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\r\n * Divides two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to ceil\r\n * @returns {vec2} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to floor\r\n * @returns {vec2} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to round\r\n * @returns {vec2} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\r\n * Scales a vec2 by a scalar number\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec2} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\r\n * Adds two vec2's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec2} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\r\n * Calculates the length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\r\n * Negates the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to negate\r\n * @returns {vec2} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to invert\r\n * @returns {vec2} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\r\n * Normalize a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to normalize\r\n * @returns {vec2} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\r\n * Computes the cross product of two vec2's\r\n * Note that the cross product must by definition produce a 3D vector\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec2} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec2} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2d\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2d} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat3\r\n * 3rd vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat3} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat4\r\n * 3rd vector component is implicitly '0'\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\r\n * Rotate a 2D vector\r\n * @param {vec2} out The receiving vec2\r\n * @param {ReadonlyVec2} a The vec2 point to rotate\r\n * @param {ReadonlyVec2} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec2} out\r\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\r\n * Get the angle between two 2D vectors\r\n * @param {ReadonlyVec2} a The first operand\r\n * @param {ReadonlyVec2} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec2 to zero\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @returns {vec2} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec2} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\r\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\r\n * Alias for {@link vec2.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec2.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec2.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec2.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec2.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec2.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec2s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\n\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the source vector\r\n * @returns {vec3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to floor\r\n * @returns {vec3} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to round\r\n * @returns {vec3} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to negate\r\n * @returns {vec3} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to invert\r\n * @returns {vec3} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {ReadonlyVec3} a The first operand\r\n * @param {ReadonlyVec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec3 to zero\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @returns {vec3} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\r\n * 4 Dimensional Vector\r\n * @module vec4\r\n */\n\n/**\r\n * Creates a new, empty vec4\r\n *\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec4} a vector to clone\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Copy the values from one vec4 to another\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the source vector\r\n * @returns {vec4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to the given values\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} out\r\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Adds two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\r\n * Multiplies two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\r\n * Divides two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to ceil\r\n * @returns {vec4} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to floor\r\n * @returns {vec4} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to round\r\n * @returns {vec4} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\r\n * Scales a vec4 by a scalar number\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec4} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\r\n * Adds two vec4's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec4} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Calculates the length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Negates the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to negate\r\n * @returns {vec4} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to invert\r\n * @returns {vec4} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\r\n * Normalize a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to normalize\r\n * @returns {vec4} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\r\n * Returns the cross-product of three vectors in a 4-dimensional space\r\n *\r\n * @param {ReadonlyVec4} result the receiving vector\r\n * @param {ReadonlyVec4} U the first vector\r\n * @param {ReadonlyVec4} V the second vector\r\n * @param {ReadonlyVec4} W the third vector\r\n * @returns {vec4} result\r\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec4} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec4} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a mat4.\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a quat\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to zero\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @returns {vec4} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec4} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\r\n * Alias for {@link vec4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec4.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec4.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec4.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec4.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec4.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec4s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","\nimport sort from './sort';\nimport range from './range';\nimport within from './within';\n\nconst defaultGetX = p => p[0];\nconst defaultGetY = p => p[1];\n\nexport default class KDBush {\n    constructor(points, getX = defaultGetX, getY = defaultGetY, nodeSize = 64, ArrayType = Float64Array) {\n        this.nodeSize = nodeSize;\n        this.points = points;\n\n        const IndexArrayType = points.length < 65536 ? Uint16Array : Uint32Array;\n\n        const ids = this.ids = new IndexArrayType(points.length);\n        const coords = this.coords = new ArrayType(points.length * 2);\n\n        for (let i = 0; i < points.length; i++) {\n            ids[i] = i;\n            coords[2 * i] = getX(points[i]);\n            coords[2 * i + 1] = getY(points[i]);\n        }\n\n        sort(ids, coords, nodeSize, 0, ids.length - 1, 0);\n    }\n\n    range(minX, minY, maxX, maxY) {\n        return range(this.ids, this.coords, minX, minY, maxX, maxY, this.nodeSize);\n    }\n\n    within(x, y, r) {\n        return within(this.ids, this.coords, x, y, r, this.nodeSize);\n    }\n}\n","\nexport default function range(ids, coords, minX, minY, maxX, maxY, nodeSize) {\n    const stack = [0, ids.length - 1, 0];\n    const result = [];\n    let x, y;\n\n    while (stack.length) {\n        const axis = stack.pop();\n        const right = stack.pop();\n        const left = stack.pop();\n\n        if (right - left <= nodeSize) {\n            for (let i = left; i <= right; i++) {\n                x = coords[2 * i];\n                y = coords[2 * i + 1];\n                if (x >= minX && x <= maxX && y >= minY && y <= maxY) result.push(ids[i]);\n            }\n            continue;\n        }\n\n        const m = Math.floor((left + right) / 2);\n\n        x = coords[2 * m];\n        y = coords[2 * m + 1];\n\n        if (x >= minX && x <= maxX && y >= minY && y <= maxY) result.push(ids[m]);\n\n        const nextAxis = (axis + 1) % 2;\n\n        if (axis === 0 ? minX <= x : minY <= y) {\n            stack.push(left);\n            stack.push(m - 1);\n            stack.push(nextAxis);\n        }\n        if (axis === 0 ? maxX >= x : maxY >= y) {\n            stack.push(m + 1);\n            stack.push(right);\n            stack.push(nextAxis);\n        }\n    }\n\n    return result;\n}\n","\nexport default function sortKD(ids, coords, nodeSize, left, right, depth) {\n    if (right - left <= nodeSize) return;\n\n    const m = (left + right) >> 1;\n\n    select(ids, coords, m, left, right, depth % 2);\n\n    sortKD(ids, coords, nodeSize, left, m - 1, depth + 1);\n    sortKD(ids, coords, nodeSize, m + 1, right, depth + 1);\n}\n\nfunction select(ids, coords, k, left, right, inc) {\n\n    while (right > left) {\n        if (right - left > 600) {\n            const n = right - left + 1;\n            const m = k - left + 1;\n            const z = Math.log(n);\n            const s = 0.5 * Math.exp(2 * z / 3);\n            const sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n            const newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n            const newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n            select(ids, coords, k, newLeft, newRight, inc);\n        }\n\n        const t = coords[2 * k + inc];\n        let i = left;\n        let j = right;\n\n        swapItem(ids, coords, left, k);\n        if (coords[2 * right + inc] > t) swapItem(ids, coords, left, right);\n\n        while (i < j) {\n            swapItem(ids, coords, i, j);\n            i++;\n            j--;\n            while (coords[2 * i + inc] < t) i++;\n            while (coords[2 * j + inc] > t) j--;\n        }\n\n        if (coords[2 * left + inc] === t) swapItem(ids, coords, left, j);\n        else {\n            j++;\n            swapItem(ids, coords, j, right);\n        }\n\n        if (j <= k) left = j + 1;\n        if (k <= j) right = j - 1;\n    }\n}\n\nfunction swapItem(ids, coords, i, j) {\n    swap(ids, i, j);\n    swap(coords, 2 * i, 2 * j);\n    swap(coords, 2 * i + 1, 2 * j + 1);\n}\n\nfunction swap(arr, i, j) {\n    const tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n","\nexport default function within(ids, coords, qx, qy, r, nodeSize) {\n    const stack = [0, ids.length - 1, 0];\n    const result = [];\n    const r2 = r * r;\n\n    while (stack.length) {\n        const axis = stack.pop();\n        const right = stack.pop();\n        const left = stack.pop();\n\n        if (right - left <= nodeSize) {\n            for (let i = left; i <= right; i++) {\n                if (sqDist(coords[2 * i], coords[2 * i + 1], qx, qy) <= r2) result.push(ids[i]);\n            }\n            continue;\n        }\n\n        const m = Math.floor((left + right) / 2);\n\n        const x = coords[2 * m];\n        const y = coords[2 * m + 1];\n\n        if (sqDist(x, y, qx, qy) <= r2) result.push(ids[m]);\n\n        const nextAxis = (axis + 1) % 2;\n\n        if (axis === 0 ? qx - r <= x : qy - r <= y) {\n            stack.push(left);\n            stack.push(m - 1);\n            stack.push(nextAxis);\n        }\n        if (axis === 0 ? qx + r >= x : qy + r >= y) {\n            stack.push(m + 1);\n            stack.push(right);\n            stack.push(nextAxis);\n        }\n    }\n\n    return result;\n}\n\nfunction sqDist(ax, ay, bx, by) {\n    const dx = ax - bx;\n    const dy = ay - by;\n    return dx * dx + dy * dy;\n}\n","// Cache implementation based on Erik Rasmussen's `lru-memoize`:\n// https://github.com/erikras/lru-memoize\nvar NOT_FOUND = 'NOT_FOUND';\n\nfunction createSingletonCache(equals) {\n  var entry;\n  return {\n    get: function get(key) {\n      if (entry && equals(entry.key, key)) {\n        return entry.value;\n      }\n\n      return NOT_FOUND;\n    },\n    put: function put(key, value) {\n      entry = {\n        key: key,\n        value: value\n      };\n    },\n    getEntries: function getEntries() {\n      return entry ? [entry] : [];\n    },\n    clear: function clear() {\n      entry = undefined;\n    }\n  };\n}\n\nfunction createLruCache(maxSize, equals) {\n  var entries = [];\n\n  function get(key) {\n    var cacheIndex = entries.findIndex(function (entry) {\n      return equals(key, entry.key);\n    }); // We found a cached entry\n\n    if (cacheIndex > -1) {\n      var entry = entries[cacheIndex]; // Cached entry not at top of cache, move it to the top\n\n      if (cacheIndex > 0) {\n        entries.splice(cacheIndex, 1);\n        entries.unshift(entry);\n      }\n\n      return entry.value;\n    } // No entry found in cache, return sentinel\n\n\n    return NOT_FOUND;\n  }\n\n  function put(key, value) {\n    if (get(key) === NOT_FOUND) {\n      // TODO Is unshift slow?\n      entries.unshift({\n        key: key,\n        value: value\n      });\n\n      if (entries.length > maxSize) {\n        entries.pop();\n      }\n    }\n  }\n\n  function getEntries() {\n    return entries;\n  }\n\n  function clear() {\n    entries = [];\n  }\n\n  return {\n    get: get,\n    put: put,\n    getEntries: getEntries,\n    clear: clear\n  };\n}\n\nexport var defaultEqualityCheck = function defaultEqualityCheck(a, b) {\n  return a === b;\n};\nexport function createCacheKeyComparator(equalityCheck) {\n  return function areArgumentsShallowlyEqual(prev, next) {\n    if (prev === null || next === null || prev.length !== next.length) {\n      return false;\n    } // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\n\n\n    var length = prev.length;\n\n    for (var i = 0; i < length; i++) {\n      if (!equalityCheck(prev[i], next[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n}\n// defaultMemoize now supports a configurable cache size with LRU behavior,\n// and optional comparison of the result value with existing values\nexport function defaultMemoize(func, equalityCheckOrOptions) {\n  var providedOptions = typeof equalityCheckOrOptions === 'object' ? equalityCheckOrOptions : {\n    equalityCheck: equalityCheckOrOptions\n  };\n  var _providedOptions$equa = providedOptions.equalityCheck,\n      equalityCheck = _providedOptions$equa === void 0 ? defaultEqualityCheck : _providedOptions$equa,\n      _providedOptions$maxS = providedOptions.maxSize,\n      maxSize = _providedOptions$maxS === void 0 ? 1 : _providedOptions$maxS,\n      resultEqualityCheck = providedOptions.resultEqualityCheck;\n  var comparator = createCacheKeyComparator(equalityCheck);\n  var cache = maxSize === 1 ? createSingletonCache(comparator) : createLruCache(maxSize, comparator); // we reference arguments instead of spreading them for performance reasons\n\n  function memoized() {\n    var value = cache.get(arguments);\n\n    if (value === NOT_FOUND) {\n      // @ts-ignore\n      value = func.apply(null, arguments);\n\n      if (resultEqualityCheck) {\n        var entries = cache.getEntries();\n        var matchingEntry = entries.find(function (entry) {\n          return resultEqualityCheck(entry.value, value);\n        });\n\n        if (matchingEntry) {\n          value = matchingEntry.value;\n        }\n      }\n\n      cache.put(arguments, value);\n    }\n\n    return value;\n  }\n\n  memoized.clearCache = function () {\n    return cache.clear();\n  };\n\n  return memoized;\n}","import { defaultMemoize, defaultEqualityCheck } from './defaultMemoize';\nexport { defaultMemoize, defaultEqualityCheck };\n\nfunction getDependencies(funcs) {\n  var dependencies = Array.isArray(funcs[0]) ? funcs[0] : funcs;\n\n  if (!dependencies.every(function (dep) {\n    return typeof dep === 'function';\n  })) {\n    var dependencyTypes = dependencies.map(function (dep) {\n      return typeof dep === 'function' ? \"function \" + (dep.name || 'unnamed') + \"()\" : typeof dep;\n    }).join(', ');\n    throw new Error(\"createSelector expects all input-selectors to be functions, but received the following types: [\" + dependencyTypes + \"]\");\n  }\n\n  return dependencies;\n}\n\nexport function createSelectorCreator(memoize) {\n  for (var _len = arguments.length, memoizeOptionsFromArgs = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    memoizeOptionsFromArgs[_key - 1] = arguments[_key];\n  }\n\n  var createSelector = function createSelector() {\n    for (var _len2 = arguments.length, funcs = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      funcs[_key2] = arguments[_key2];\n    }\n\n    var _recomputations = 0;\n\n    var _lastResult; // Due to the intricacies of rest params, we can't do an optional arg after `...funcs`.\n    // So, start by declaring the default value here.\n    // (And yes, the words 'memoize' and 'options' appear too many times in this next sequence.)\n\n\n    var directlyPassedOptions = {\n      memoizeOptions: undefined\n    }; // Normally, the result func or \"output selector\" is the last arg\n\n    var resultFunc = funcs.pop(); // If the result func is actually an _object_, assume it's our options object\n\n    if (typeof resultFunc === 'object') {\n      directlyPassedOptions = resultFunc; // and pop the real result func off\n\n      resultFunc = funcs.pop();\n    }\n\n    if (typeof resultFunc !== 'function') {\n      throw new Error(\"createSelector expects an output function after the inputs, but received: [\" + typeof resultFunc + \"]\");\n    } // Determine which set of options we're using. Prefer options passed directly,\n    // but fall back to options given to createSelectorCreator.\n\n\n    var _directlyPassedOption = directlyPassedOptions,\n        _directlyPassedOption2 = _directlyPassedOption.memoizeOptions,\n        memoizeOptions = _directlyPassedOption2 === void 0 ? memoizeOptionsFromArgs : _directlyPassedOption2; // Simplifying assumption: it's unlikely that the first options arg of the provided memoizer\n    // is an array. In most libs I've looked at, it's an equality function or options object.\n    // Based on that, if `memoizeOptions` _is_ an array, we assume it's a full\n    // user-provided array of options. Otherwise, it must be just the _first_ arg, and so\n    // we wrap it in an array so we can apply it.\n\n    var finalMemoizeOptions = Array.isArray(memoizeOptions) ? memoizeOptions : [memoizeOptions];\n    var dependencies = getDependencies(funcs);\n    var memoizedResultFunc = memoize.apply(void 0, [function () {\n      _recomputations++; // apply arguments instead of spreading for performance.\n\n      return resultFunc.apply(null, arguments);\n    }].concat(finalMemoizeOptions)); // If a selector is called with the exact same arguments we don't need to traverse our dependencies again.\n\n    var selector = memoize(function () {\n      var params = [];\n      var length = dependencies.length;\n\n      for (var i = 0; i < length; i++) {\n        // apply arguments instead of spreading and mutate a local list of params for performance.\n        // @ts-ignore\n        params.push(dependencies[i].apply(null, arguments));\n      } // apply arguments instead of spreading for performance.\n\n\n      _lastResult = memoizedResultFunc.apply(null, params);\n      return _lastResult;\n    });\n    Object.assign(selector, {\n      resultFunc: resultFunc,\n      memoizedResultFunc: memoizedResultFunc,\n      dependencies: dependencies,\n      lastResult: function lastResult() {\n        return _lastResult;\n      },\n      recomputations: function recomputations() {\n        return _recomputations;\n      },\n      resetRecomputations: function resetRecomputations() {\n        return _recomputations = 0;\n      }\n    });\n    return selector;\n  }; // @ts-ignore\n\n\n  return createSelector;\n}\nexport var createSelector = /* #__PURE__ */createSelectorCreator(defaultMemoize);\n// Manual definition of state and output arguments\nexport var createStructuredSelector = function createStructuredSelector(selectors, selectorCreator) {\n  if (selectorCreator === void 0) {\n    selectorCreator = createSelector;\n  }\n\n  if (typeof selectors !== 'object') {\n    throw new Error('createStructuredSelector expects first argument to be an object ' + (\"where each property is a selector, instead received a \" + typeof selectors));\n  }\n\n  var objectKeys = Object.keys(selectors);\n  var resultSelector = selectorCreator( // @ts-ignore\n  objectKeys.map(function (key) {\n    return selectors[key];\n  }), function () {\n    for (var _len3 = arguments.length, values = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      values[_key3] = arguments[_key3];\n    }\n\n    return values.reduce(function (composition, value, index) {\n      composition[objectKeys[index]] = value;\n      return composition;\n    }, {});\n  });\n  return resultSelector;\n};","// A library of seedable RNGs implemented in Javascript.\n//\n// Usage:\n//\n// var seedrandom = require('seedrandom');\n// var random = seedrandom(1); // or any seed.\n// var x = random();       // 0 <= x < 1.  Every bit is random.\n// var x = random.quick(); // 0 <= x < 1.  32 bits of randomness.\n\n// alea, a 53-bit multiply-with-carry generator by Johannes Baage.\n// Period: ~2^116\n// Reported to pass all BigCrush tests.\nvar alea = require('./lib/alea');\n\n// xor128, a pure xor-shift generator by George Marsaglia.\n// Period: 2^128-1.\n// Reported to fail: MatrixRank and LinearComp.\nvar xor128 = require('./lib/xor128');\n\n// xorwow, George Marsaglia's 160-bit xor-shift combined plus weyl.\n// Period: 2^192-2^32\n// Reported to fail: CollisionOver, SimpPoker, and LinearComp.\nvar xorwow = require('./lib/xorwow');\n\n// xorshift7, by Franois Panneton and Pierre L'ecuyer, takes\n// a different approach: it adds robustness by allowing more shifts\n// than Marsaglia's original three.  It is a 7-shift generator\n// with 256 bits, that passes BigCrush with no systmatic failures.\n// Period 2^256-1.\n// No systematic BigCrush failures reported.\nvar xorshift7 = require('./lib/xorshift7');\n\n// xor4096, by Richard Brent, is a 4096-bit xor-shift with a\n// very long period that also adds a Weyl generator. It also passes\n// BigCrush with no systematic failures.  Its long period may\n// be useful if you have many generators and need to avoid\n// collisions.\n// Period: 2^4128-2^32.\n// No systematic BigCrush failures reported.\nvar xor4096 = require('./lib/xor4096');\n\n// Tyche-i, by Samuel Neves and Filipe Araujo, is a bit-shifting random\n// number generator derived from ChaCha, a modern stream cipher.\n// https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n// Period: ~2^127\n// No systematic BigCrush failures reported.\nvar tychei = require('./lib/tychei');\n\n// The original ARC4-based prng included in this library.\n// Period: ~2^1600\nvar sr = require('./seedrandom');\n\nsr.alea = alea;\nsr.xor128 = xor128;\nsr.xorwow = xorwow;\nsr.xorshift7 = xorshift7;\nsr.xor4096 = xor4096;\nsr.tychei = tychei;\n\nmodule.exports = sr;\n","// A port of an algorithm by Johannes Baage <baagoe@baagoe.com>, 2010\n// http://baagoe.com/en/RandomMusings/javascript/\n// https://github.com/nquinlan/better-random-numbers-for-javascript-mirror\n// Original work is under MIT license -\n\n// Copyright (C) 2010 by Johannes Baage <baagoe@baagoe.org>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\n\n(function(global, module, define) {\n\nfunction Alea(seed) {\n  var me = this, mash = Mash();\n\n  me.next = function() {\n    var t = 2091639 * me.s0 + me.c * 2.3283064365386963e-10; // 2^-32\n    me.s0 = me.s1;\n    me.s1 = me.s2;\n    return me.s2 = t - (me.c = t | 0);\n  };\n\n  // Apply the seeding algorithm from Baagoe.\n  me.c = 1;\n  me.s0 = mash(' ');\n  me.s1 = mash(' ');\n  me.s2 = mash(' ');\n  me.s0 -= mash(seed);\n  if (me.s0 < 0) { me.s0 += 1; }\n  me.s1 -= mash(seed);\n  if (me.s1 < 0) { me.s1 += 1; }\n  me.s2 -= mash(seed);\n  if (me.s2 < 0) { me.s2 += 1; }\n  mash = null;\n}\n\nfunction copy(f, t) {\n  t.c = f.c;\n  t.s0 = f.s0;\n  t.s1 = f.s1;\n  t.s2 = f.s2;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new Alea(seed),\n      state = opts && opts.state,\n      prng = xg.next;\n  prng.int32 = function() { return (xg.next() * 0x100000000) | 0; }\n  prng.double = function() {\n    return prng() + (prng() * 0x200000 | 0) * 1.1102230246251565e-16; // 2^-53\n  };\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nfunction Mash() {\n  var n = 0xefc8249d;\n\n  var mash = function(data) {\n    data = String(data);\n    for (var i = 0; i < data.length; i++) {\n      n += data.charCodeAt(i);\n      var h = 0.02519603282416938 * n;\n      n = h >>> 0;\n      h -= n;\n      h *= n;\n      n = h >>> 0;\n      h -= n;\n      n += h * 0x100000000; // 2^32\n    }\n    return (n >>> 0) * 2.3283064365386963e-10; // 2^-32\n  };\n\n  return mash;\n}\n\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.alea = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","// A Javascript implementaion of the \"Tyche-i\" prng algorithm by\n// Samuel Neves and Filipe Araujo.\n// See https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  // Set up generator function.\n  me.next = function() {\n    var b = me.b, c = me.c, d = me.d, a = me.a;\n    b = (b << 25) ^ (b >>> 7) ^ c;\n    c = (c - d) | 0;\n    d = (d << 24) ^ (d >>> 8) ^ a;\n    a = (a - b) | 0;\n    me.b = b = (b << 20) ^ (b >>> 12) ^ c;\n    me.c = c = (c - d) | 0;\n    me.d = (d << 16) ^ (c >>> 16) ^ a;\n    return me.a = (a - b) | 0;\n  };\n\n  /* The following is non-inverted tyche, which has better internal\n   * bit diffusion, but which is about 25% slower than tyche-i in JS.\n  me.next = function() {\n    var a = me.a, b = me.b, c = me.c, d = me.d;\n    a = (me.a + me.b | 0) >>> 0;\n    d = me.d ^ a; d = d << 16 ^ d >>> 16;\n    c = me.c + d | 0;\n    b = me.b ^ c; b = b << 12 ^ d >>> 20;\n    me.a = a = a + b | 0;\n    d = d ^ a; me.d = d = d << 8 ^ d >>> 24;\n    me.c = c = c + d | 0;\n    b = b ^ c;\n    return me.b = (b << 7 ^ b >>> 25);\n  }\n  */\n\n  me.a = 0;\n  me.b = 0;\n  me.c = 2654435769 | 0;\n  me.d = 1367130551;\n\n  if (seed === Math.floor(seed)) {\n    // Integer seed.\n    me.a = (seed / 0x100000000) | 0;\n    me.b = seed | 0;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 20; k++) {\n    me.b ^= strseed.charCodeAt(k) | 0;\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.a = f.a;\n  t.b = f.b;\n  t.c = f.c;\n  t.d = f.d;\n  return t;\n};\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.tychei = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","// A Javascript implementaion of the \"xor128\" prng algorithm by\n// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  me.x = 0;\n  me.y = 0;\n  me.z = 0;\n  me.w = 0;\n\n  // Set up generator function.\n  me.next = function() {\n    var t = me.x ^ (me.x << 11);\n    me.x = me.y;\n    me.y = me.z;\n    me.z = me.w;\n    return me.w ^= (me.w >>> 19) ^ t ^ (t >>> 8);\n  };\n\n  if (seed === (seed | 0)) {\n    // Integer seed.\n    me.x = seed;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 64; k++) {\n    me.x ^= strseed.charCodeAt(k) | 0;\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.x = f.x;\n  t.y = f.y;\n  t.z = f.z;\n  t.w = f.w;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xor128 = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","// A Javascript implementaion of Richard Brent's Xorgens xor4096 algorithm.\n//\n// This fast non-cryptographic random number generator is designed for\n// use in Monte-Carlo algorithms. It combines a long-period xorshift\n// generator with a Weyl generator, and it passes all common batteries\n// of stasticial tests for randomness while consuming only a few nanoseconds\n// for each prng generated.  For background on the generator, see Brent's\n// paper: \"Some long-period random number generators using shifts and xors.\"\n// http://arxiv.org/pdf/1004.3115v1.pdf\n//\n// Usage:\n//\n// var xor4096 = require('xor4096');\n// random = xor4096(1);                        // Seed with int32 or string.\n// assert.equal(random(), 0.1520436450538547); // (0, 1) range, 53 bits.\n// assert.equal(random.int32(), 1806534897);   // signed int32, 32 bits.\n//\n// For nonzero numeric keys, this impelementation provides a sequence\n// identical to that by Brent's xorgens 3 implementaion in C.  This\n// implementation also provides for initalizing the generator with\n// string seeds, or for saving and restoring the state of the generator.\n//\n// On Chrome, this prng benchmarks about 2.1 times slower than\n// Javascript's built-in Math.random().\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this;\n\n  // Set up generator function.\n  me.next = function() {\n    var w = me.w,\n        X = me.X, i = me.i, t, v;\n    // Update Weyl generator.\n    me.w = w = (w + 0x61c88647) | 0;\n    // Update xor generator.\n    v = X[(i + 34) & 127];\n    t = X[i = ((i + 1) & 127)];\n    v ^= v << 13;\n    t ^= t << 17;\n    v ^= v >>> 15;\n    t ^= t >>> 12;\n    // Update Xor generator array state.\n    v = X[i] = v ^ t;\n    me.i = i;\n    // Result is the combination.\n    return (v + (w ^ (w >>> 16))) | 0;\n  };\n\n  function init(me, seed) {\n    var t, v, i, j, w, X = [], limit = 128;\n    if (seed === (seed | 0)) {\n      // Numeric seeds initialize v, which is used to generates X.\n      v = seed;\n      seed = null;\n    } else {\n      // String seeds are mixed into v and X one character at a time.\n      seed = seed + '\\0';\n      v = 0;\n      limit = Math.max(limit, seed.length);\n    }\n    // Initialize circular array and weyl value.\n    for (i = 0, j = -32; j < limit; ++j) {\n      // Put the unicode characters into the array, and shuffle them.\n      if (seed) v ^= seed.charCodeAt((j + 32) % seed.length);\n      // After 32 shuffles, take v as the starting w value.\n      if (j === 0) w = v;\n      v ^= v << 10;\n      v ^= v >>> 15;\n      v ^= v << 4;\n      v ^= v >>> 13;\n      if (j >= 0) {\n        w = (w + 0x61c88647) | 0;     // Weyl.\n        t = (X[j & 127] ^= (v + w));  // Combine xor and weyl to init array.\n        i = (0 == t) ? i + 1 : 0;     // Count zeroes.\n      }\n    }\n    // We have detected all zeroes; make the key nonzero.\n    if (i >= 128) {\n      X[(seed && seed.length || 0) & 127] = -1;\n    }\n    // Run the generator 512 times to further mix the state before using it.\n    // Factoring this as a function slows the main generator, so it is just\n    // unrolled here.  The weyl generator is not advanced while warming up.\n    i = 127;\n    for (j = 4 * 128; j > 0; --j) {\n      v = X[(i + 34) & 127];\n      t = X[i = ((i + 1) & 127)];\n      v ^= v << 13;\n      t ^= t << 17;\n      v ^= v >>> 15;\n      t ^= t >>> 12;\n      X[i] = v ^ t;\n    }\n    // Storing state as object members is faster than using closure variables.\n    me.w = w;\n    me.X = X;\n    me.i = i;\n  }\n\n  init(me, seed);\n}\n\nfunction copy(f, t) {\n  t.i = f.i;\n  t.w = f.w;\n  t.X = f.X.slice();\n  return t;\n};\n\nfunction impl(seed, opts) {\n  if (seed == null) seed = +(new Date);\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (state.X) copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xor4096 = impl;\n}\n\n})(\n  this,                                     // window object or global\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n","// A Javascript implementaion of the \"xorshift7\" algorithm by\n// Franois Panneton and Pierre L'ecuyer:\n// \"On the Xorgshift Random Number Generators\"\n// http://saluc.engr.uconn.edu/refs/crypto/rng/panneton05onthexorshift.pdf\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this;\n\n  // Set up generator function.\n  me.next = function() {\n    // Update xor generator.\n    var X = me.x, i = me.i, t, v, w;\n    t = X[i]; t ^= (t >>> 7); v = t ^ (t << 24);\n    t = X[(i + 1) & 7]; v ^= t ^ (t >>> 10);\n    t = X[(i + 3) & 7]; v ^= t ^ (t >>> 3);\n    t = X[(i + 4) & 7]; v ^= t ^ (t << 7);\n    t = X[(i + 7) & 7]; t = t ^ (t << 13); v ^= t ^ (t << 9);\n    X[i] = v;\n    me.i = (i + 1) & 7;\n    return v;\n  };\n\n  function init(me, seed) {\n    var j, w, X = [];\n\n    if (seed === (seed | 0)) {\n      // Seed state array using a 32-bit integer.\n      w = X[0] = seed;\n    } else {\n      // Seed state using a string.\n      seed = '' + seed;\n      for (j = 0; j < seed.length; ++j) {\n        X[j & 7] = (X[j & 7] << 15) ^\n            (seed.charCodeAt(j) + X[(j + 1) & 7] << 13);\n      }\n    }\n    // Enforce an array length of 8, not all zeroes.\n    while (X.length < 8) X.push(0);\n    for (j = 0; j < 8 && X[j] === 0; ++j);\n    if (j == 8) w = X[7] = -1; else w = X[j];\n\n    me.x = X;\n    me.i = 0;\n\n    // Discard an initial 256 values.\n    for (j = 256; j > 0; --j) {\n      me.next();\n    }\n  }\n\n  init(me, seed);\n}\n\nfunction copy(f, t) {\n  t.x = f.x.slice();\n  t.i = f.i;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  if (seed == null) seed = +(new Date);\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (state.x) copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xorshift7 = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n","// A Javascript implementaion of the \"xorwow\" prng algorithm by\n// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  // Set up generator function.\n  me.next = function() {\n    var t = (me.x ^ (me.x >>> 2));\n    me.x = me.y; me.y = me.z; me.z = me.w; me.w = me.v;\n    return (me.d = (me.d + 362437 | 0)) +\n       (me.v = (me.v ^ (me.v << 4)) ^ (t ^ (t << 1))) | 0;\n  };\n\n  me.x = 0;\n  me.y = 0;\n  me.z = 0;\n  me.w = 0;\n  me.v = 0;\n\n  if (seed === (seed | 0)) {\n    // Integer seed.\n    me.x = seed;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 64; k++) {\n    me.x ^= strseed.charCodeAt(k) | 0;\n    if (k == strseed.length) {\n      me.d = me.x << 10 ^ me.x >>> 4;\n    }\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.x = f.x;\n  t.y = f.y;\n  t.z = f.z;\n  t.w = f.w;\n  t.v = f.v;\n  t.d = f.d;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xorwow = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","/*\nCopyright 2019 David Bau.\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n\"Software\"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n*/\n\n(function (global, pool, math) {\n//\n// The following constants are related to IEEE 754 limits.\n//\n\nvar width = 256,        // each RC4 output is 0 <= x < 256\n    chunks = 6,         // at least six RC4 outputs for each double\n    digits = 52,        // there are 52 significant digits in a double\n    rngname = 'random', // rngname: name for Math.random and Math.seedrandom\n    startdenom = math.pow(width, chunks),\n    significance = math.pow(2, digits),\n    overflow = significance * 2,\n    mask = width - 1,\n    nodecrypto;         // node.js crypto module, initialized at the bottom.\n\n//\n// seedrandom()\n// This is the seedrandom function described above.\n//\nfunction seedrandom(seed, options, callback) {\n  var key = [];\n  options = (options == true) ? { entropy: true } : (options || {});\n\n  // Flatten the seed string or build one from local entropy if needed.\n  var shortseed = mixkey(flatten(\n    options.entropy ? [seed, tostring(pool)] :\n    (seed == null) ? autoseed() : seed, 3), key);\n\n  // Use the seed to initialize an ARC4 generator.\n  var arc4 = new ARC4(key);\n\n  // This function returns a random double in [0, 1) that contains\n  // randomness in every bit of the mantissa of the IEEE 754 value.\n  var prng = function() {\n    var n = arc4.g(chunks),             // Start with a numerator n < 2 ^ 48\n        d = startdenom,                 //   and denominator d = 2 ^ 48.\n        x = 0;                          //   and no 'extra last byte'.\n    while (n < significance) {          // Fill up all significant digits by\n      n = (n + x) * width;              //   shifting numerator and\n      d *= width;                       //   denominator and generating a\n      x = arc4.g(1);                    //   new least-significant-byte.\n    }\n    while (n >= overflow) {             // To avoid rounding up, before adding\n      n /= 2;                           //   last byte, shift everything\n      d /= 2;                           //   right using integer math until\n      x >>>= 1;                         //   we have exactly the desired bits.\n    }\n    return (n + x) / d;                 // Form the number within [0, 1).\n  };\n\n  prng.int32 = function() { return arc4.g(4) | 0; }\n  prng.quick = function() { return arc4.g(4) / 0x100000000; }\n  prng.double = prng;\n\n  // Mix the randomness into accumulated entropy.\n  mixkey(tostring(arc4.S), pool);\n\n  // Calling convention: what to return as a function of prng, seed, is_math.\n  return (options.pass || callback ||\n      function(prng, seed, is_math_call, state) {\n        if (state) {\n          // Load the arc4 state from the given state if it has an S array.\n          if (state.S) { copy(state, arc4); }\n          // Only provide the .state method if requested via options.state.\n          prng.state = function() { return copy(arc4, {}); }\n        }\n\n        // If called as a method of Math (Math.seedrandom()), mutate\n        // Math.random because that is how seedrandom.js has worked since v1.0.\n        if (is_math_call) { math[rngname] = prng; return seed; }\n\n        // Otherwise, it is a newer calling convention, so return the\n        // prng directly.\n        else return prng;\n      })(\n  prng,\n  shortseed,\n  'global' in options ? options.global : (this == math),\n  options.state);\n}\n\n//\n// ARC4\n//\n// An ARC4 implementation.  The constructor takes a key in the form of\n// an array of at most (width) integers that should be 0 <= x < (width).\n//\n// The g(count) method returns a pseudorandom integer that concatenates\n// the next (count) outputs from ARC4.  Its return value is a number x\n// that is in the range 0 <= x < (width ^ count).\n//\nfunction ARC4(key) {\n  var t, keylen = key.length,\n      me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];\n\n  // The empty key [] is treated as [0].\n  if (!keylen) { key = [keylen++]; }\n\n  // Set up S using the standard key scheduling algorithm.\n  while (i < width) {\n    s[i] = i++;\n  }\n  for (i = 0; i < width; i++) {\n    s[i] = s[j = mask & (j + key[i % keylen] + (t = s[i]))];\n    s[j] = t;\n  }\n\n  // The \"g\" method returns the next (count) outputs as one number.\n  (me.g = function(count) {\n    // Using instance members instead of closure state nearly doubles speed.\n    var t, r = 0,\n        i = me.i, j = me.j, s = me.S;\n    while (count--) {\n      t = s[i = mask & (i + 1)];\n      r = r * width + s[mask & ((s[i] = s[j = mask & (j + t)]) + (s[j] = t))];\n    }\n    me.i = i; me.j = j;\n    return r;\n    // For robust unpredictability, the function call below automatically\n    // discards an initial batch of values.  This is called RC4-drop[256].\n    // See http://google.com/search?q=rsa+fluhrer+response&btnI\n  })(width);\n}\n\n//\n// copy()\n// Copies internal state of ARC4 to or from a plain object.\n//\nfunction copy(f, t) {\n  t.i = f.i;\n  t.j = f.j;\n  t.S = f.S.slice();\n  return t;\n};\n\n//\n// flatten()\n// Converts an object tree to nested arrays of strings.\n//\nfunction flatten(obj, depth) {\n  var result = [], typ = (typeof obj), prop;\n  if (depth && typ == 'object') {\n    for (prop in obj) {\n      try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}\n    }\n  }\n  return (result.length ? result : typ == 'string' ? obj : obj + '\\0');\n}\n\n//\n// mixkey()\n// Mixes a string seed into a key that is an array of integers, and\n// returns a shortened string seed that is equivalent to the result key.\n//\nfunction mixkey(seed, key) {\n  var stringseed = seed + '', smear, j = 0;\n  while (j < stringseed.length) {\n    key[mask & j] =\n      mask & ((smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++));\n  }\n  return tostring(key);\n}\n\n//\n// autoseed()\n// Returns an object for autoseeding, using window.crypto and Node crypto\n// module if available.\n//\nfunction autoseed() {\n  try {\n    var out;\n    if (nodecrypto && (out = nodecrypto.randomBytes)) {\n      // The use of 'out' to remember randomBytes makes tight minified code.\n      out = out(width);\n    } else {\n      out = new Uint8Array(width);\n      (global.crypto || global.msCrypto).getRandomValues(out);\n    }\n    return tostring(out);\n  } catch (e) {\n    var browser = global.navigator,\n        plugins = browser && browser.plugins;\n    return [+new Date, global, plugins, global.screen, tostring(pool)];\n  }\n}\n\n//\n// tostring()\n// Converts an array of charcodes to a string\n//\nfunction tostring(a) {\n  return String.fromCharCode.apply(0, a);\n}\n\n//\n// When seedrandom.js is loaded, we immediately mix a few bits\n// from the built-in RNG into the entropy pool.  Because we do\n// not want to interfere with deterministic PRNG state later,\n// seedrandom will not call math.random on its own again after\n// initialization.\n//\nmixkey(math.random(), pool);\n\n//\n// Nodejs and AMD support: export the implementation as a module using\n// either convention.\n//\nif ((typeof module) == 'object' && module.exports) {\n  module.exports = seedrandom;\n  // When in node.js, try using crypto package for autoseeding.\n  try {\n    nodecrypto = require('crypto');\n  } catch (ex) {}\n} else if ((typeof define) == 'function' && define.amd) {\n  define(function() { return seedrandom; });\n} else {\n  // When included as a plain script, set up Math.seedrandom global.\n  math['seed' + rngname] = seedrandom;\n}\n\n\n// End anonymous scope, and pass initial values.\n})(\n  // global: `self` in browsers (including strict mode and web workers),\n  // otherwise `this` in Node and other environments\n  (typeof self !== 'undefined') ? self : this,\n  [],     // pool: entropy pool starts empty\n  Math    // math: package containing random, pow, and seedrandom\n);\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","/**\n * Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Endpoint,\n  EventSource,\n  Message,\n  MessageType,\n  PostMessageWithOrigin,\n  WireValue,\n  WireValueType,\n} from \"./protocol\";\nexport { Endpoint };\n\nexport const proxyMarker = Symbol(\"Comlink.proxy\");\nexport const createEndpoint = Symbol(\"Comlink.endpoint\");\nexport const releaseProxy = Symbol(\"Comlink.releaseProxy\");\n\nconst throwMarker = Symbol(\"Comlink.thrown\");\n\n/**\n * Interface of values that were marked to be proxied with `comlink.proxy()`.\n * Can also be implemented by classes.\n */\nexport interface ProxyMarked {\n  [proxyMarker]: true;\n}\n\n/**\n * Takes a type and wraps it in a Promise, if it not already is one.\n * This is to avoid `Promise<Promise<T>>`.\n *\n * This is the inverse of `Unpromisify<T>`.\n */\ntype Promisify<T> = T extends Promise<unknown> ? T : Promise<T>;\n/**\n * Takes a type that may be Promise and unwraps the Promise type.\n * If `P` is not a Promise, it returns `P`.\n *\n * This is the inverse of `Promisify<T>`.\n */\ntype Unpromisify<P> = P extends Promise<infer T> ? T : P;\n\n/**\n * Takes the raw type of a remote property and returns the type that is visible to the local thread on the proxy.\n *\n * Note: This needs to be its own type alias, otherwise it will not distribute over unions.\n * See https://www.typescriptlang.org/docs/handbook/advanced-types.html#distributive-conditional-types\n */\ntype RemoteProperty<T> =\n  // If the value is a method, comlink will proxy it automatically.\n  // Objects are only proxied if they are marked to be proxied.\n  // Otherwise, the property is converted to a Promise that resolves the cloned value.\n  T extends Function | ProxyMarked ? Remote<T> : Promisify<T>;\n\n/**\n * Takes the raw type of a property as a remote thread would see it through a proxy (e.g. when passed in as a function\n * argument) and returns the type that the local thread has to supply.\n *\n * This is the inverse of `RemoteProperty<T>`.\n *\n * Note: This needs to be its own type alias, otherwise it will not distribute over unions. See\n * https://www.typescriptlang.org/docs/handbook/advanced-types.html#distributive-conditional-types\n */\ntype LocalProperty<T> = T extends Function | ProxyMarked\n  ? Local<T>\n  : Unpromisify<T>;\n\n/**\n * Proxies `T` if it is a `ProxyMarked`, clones it otherwise (as handled by structured cloning and transfer handlers).\n */\nexport type ProxyOrClone<T> = T extends ProxyMarked ? Remote<T> : T;\n/**\n * Inverse of `ProxyOrClone<T>`.\n */\nexport type UnproxyOrClone<T> = T extends RemoteObject<ProxyMarked>\n  ? Local<T>\n  : T;\n\n/**\n * Takes the raw type of a remote object in the other thread and returns the type as it is visible to the local thread\n * when proxied with `Comlink.proxy()`.\n *\n * This does not handle call signatures, which is handled by the more general `Remote<T>` type.\n *\n * @template T The raw type of a remote object as seen in the other thread.\n */\nexport type RemoteObject<T> = { [P in keyof T]: RemoteProperty<T[P]> };\n/**\n * Takes the type of an object as a remote thread would see it through a proxy (e.g. when passed in as a function\n * argument) and returns the type that the local thread has to supply.\n *\n * This does not handle call signatures, which is handled by the more general `Local<T>` type.\n *\n * This is the inverse of `RemoteObject<T>`.\n *\n * @template T The type of a proxied object.\n */\nexport type LocalObject<T> = { [P in keyof T]: LocalProperty<T[P]> };\n\n/**\n * Additional special comlink methods available on each proxy returned by `Comlink.wrap()`.\n */\nexport interface ProxyMethods {\n  [createEndpoint]: () => Promise<MessagePort>;\n  [releaseProxy]: () => void;\n}\n\n/**\n * Takes the raw type of a remote object, function or class in the other thread and returns the type as it is visible to\n * the local thread from the proxy return value of `Comlink.wrap()` or `Comlink.proxy()`.\n */\nexport type Remote<T> =\n  // Handle properties\n  RemoteObject<T> &\n    // Handle call signature (if present)\n    (T extends (...args: infer TArguments) => infer TReturn\n      ? (\n          ...args: { [I in keyof TArguments]: UnproxyOrClone<TArguments[I]> }\n        ) => Promisify<ProxyOrClone<Unpromisify<TReturn>>>\n      : unknown) &\n    // Handle construct signature (if present)\n    // The return of construct signatures is always proxied (whether marked or not)\n    (T extends { new (...args: infer TArguments): infer TInstance }\n      ? {\n          new (\n            ...args: {\n              [I in keyof TArguments]: UnproxyOrClone<TArguments[I]>;\n            }\n          ): Promisify<Remote<TInstance>>;\n        }\n      : unknown) &\n    // Include additional special comlink methods available on the proxy.\n    ProxyMethods;\n\n/**\n * Expresses that a type can be either a sync or async.\n */\ntype MaybePromise<T> = Promise<T> | T;\n\n/**\n * Takes the raw type of a remote object, function or class as a remote thread would see it through a proxy (e.g. when\n * passed in as a function argument) and returns the type the local thread has to supply.\n *\n * This is the inverse of `Remote<T>`. It takes a `Remote<T>` and returns its original input `T`.\n */\nexport type Local<T> =\n  // Omit the special proxy methods (they don't need to be supplied, comlink adds them)\n  Omit<LocalObject<T>, keyof ProxyMethods> &\n    // Handle call signatures (if present)\n    (T extends (...args: infer TArguments) => infer TReturn\n      ? (\n          ...args: { [I in keyof TArguments]: ProxyOrClone<TArguments[I]> }\n        ) => // The raw function could either be sync or async, but is always proxied automatically\n        MaybePromise<UnproxyOrClone<Unpromisify<TReturn>>>\n      : unknown) &\n    // Handle construct signature (if present)\n    // The return of construct signatures is always proxied (whether marked or not)\n    (T extends { new (...args: infer TArguments): infer TInstance }\n      ? {\n          new (\n            ...args: {\n              [I in keyof TArguments]: ProxyOrClone<TArguments[I]>;\n            }\n          ): // The raw constructor could either be sync or async, but is always proxied automatically\n          MaybePromise<Local<Unpromisify<TInstance>>>;\n        }\n      : unknown);\n\nconst isObject = (val: unknown): val is object =>\n  (typeof val === \"object\" && val !== null) || typeof val === \"function\";\n\n/**\n * Customizes the serialization of certain values as determined by `canHandle()`.\n *\n * @template T The input type being handled by this transfer handler.\n * @template S The serialized type sent over the wire.\n */\nexport interface TransferHandler<T, S> {\n  /**\n   * Gets called for every value to determine whether this transfer handler\n   * should serialize the value, which includes checking that it is of the right\n   * type (but can perform checks beyond that as well).\n   */\n  canHandle(value: unknown): value is T;\n\n  /**\n   * Gets called with the value if `canHandle()` returned `true` to produce a\n   * value that can be sent in a message, consisting of structured-cloneable\n   * values and/or transferrable objects.\n   */\n  serialize(value: T): [S, Transferable[]];\n\n  /**\n   * Gets called to deserialize an incoming value that was serialized in the\n   * other thread with this transfer handler (known through the name it was\n   * registered under).\n   */\n  deserialize(value: S): T;\n}\n\n/**\n * Internal transfer handle to handle objects marked to proxy.\n */\nconst proxyTransferHandler: TransferHandler<object, MessagePort> = {\n  canHandle: (val): val is ProxyMarked =>\n    isObject(val) && (val as ProxyMarked)[proxyMarker],\n  serialize(obj) {\n    const { port1, port2 } = new MessageChannel();\n    expose(obj, port1);\n    return [port2, [port2]];\n  },\n  deserialize(port) {\n    port.start();\n    return wrap(port);\n  },\n};\n\ninterface ThrownValue {\n  [throwMarker]: unknown; // just needs to be present\n  value: unknown;\n}\ntype SerializedThrownValue =\n  | { isError: true; value: Error }\n  | { isError: false; value: unknown };\n\n/**\n * Internal transfer handler to handle thrown exceptions.\n */\nconst throwTransferHandler: TransferHandler<\n  ThrownValue,\n  SerializedThrownValue\n> = {\n  canHandle: (value): value is ThrownValue =>\n    isObject(value) && throwMarker in value,\n  serialize({ value }) {\n    let serialized: SerializedThrownValue;\n    if (value instanceof Error) {\n      serialized = {\n        isError: true,\n        value: {\n          message: value.message,\n          name: value.name,\n          stack: value.stack,\n        },\n      };\n    } else {\n      serialized = { isError: false, value };\n    }\n    return [serialized, []];\n  },\n  deserialize(serialized) {\n    if (serialized.isError) {\n      throw Object.assign(\n        new Error(serialized.value.message),\n        serialized.value\n      );\n    }\n    throw serialized.value;\n  },\n};\n\n/**\n * Allows customizing the serialization of certain values.\n */\nexport const transferHandlers = new Map<\n  string,\n  TransferHandler<unknown, unknown>\n>([\n  [\"proxy\", proxyTransferHandler],\n  [\"throw\", throwTransferHandler],\n]);\n\nexport function expose(obj: any, ep: Endpoint = self as any) {\n  ep.addEventListener(\"message\", function callback(ev: MessageEvent) {\n    if (!ev || !ev.data) {\n      return;\n    }\n    const { id, type, path } = {\n      path: [] as string[],\n      ...(ev.data as Message),\n    };\n    const argumentList = (ev.data.argumentList || []).map(fromWireValue);\n    let returnValue;\n    try {\n      const parent = path.slice(0, -1).reduce((obj, prop) => obj[prop], obj);\n      const rawValue = path.reduce((obj, prop) => obj[prop], obj);\n      switch (type) {\n        case MessageType.GET:\n          {\n            returnValue = rawValue;\n          }\n          break;\n        case MessageType.SET:\n          {\n            parent[path.slice(-1)[0]] = fromWireValue(ev.data.value);\n            returnValue = true;\n          }\n          break;\n        case MessageType.APPLY:\n          {\n            returnValue = rawValue.apply(parent, argumentList);\n          }\n          break;\n        case MessageType.CONSTRUCT:\n          {\n            const value = new rawValue(...argumentList);\n            returnValue = proxy(value);\n          }\n          break;\n        case MessageType.ENDPOINT:\n          {\n            const { port1, port2 } = new MessageChannel();\n            expose(obj, port2);\n            returnValue = transfer(port1, [port1]);\n          }\n          break;\n        case MessageType.RELEASE:\n          {\n            returnValue = undefined;\n          }\n          break;\n        default:\n          return;\n      }\n    } catch (value) {\n      returnValue = { value, [throwMarker]: 0 };\n    }\n    Promise.resolve(returnValue)\n      .catch((value) => {\n        return { value, [throwMarker]: 0 };\n      })\n      .then((returnValue) => {\n        const [wireValue, transferables] = toWireValue(returnValue);\n        ep.postMessage({ ...wireValue, id }, transferables);\n        if (type === MessageType.RELEASE) {\n          // detach and deactive after sending release response above.\n          ep.removeEventListener(\"message\", callback as any);\n          closeEndPoint(ep);\n        }\n      });\n  } as any);\n  if (ep.start) {\n    ep.start();\n  }\n}\n\nfunction isMessagePort(endpoint: Endpoint): endpoint is MessagePort {\n  return endpoint.constructor.name === \"MessagePort\";\n}\n\nfunction closeEndPoint(endpoint: Endpoint) {\n  if (isMessagePort(endpoint)) endpoint.close();\n}\n\nexport function wrap<T>(ep: Endpoint, target?: any): Remote<T> {\n  return createProxy<T>(ep, [], target) as any;\n}\n\nfunction throwIfProxyReleased(isReleased: boolean) {\n  if (isReleased) {\n    throw new Error(\"Proxy has been released and is not useable\");\n  }\n}\n\nfunction createProxy<T>(\n  ep: Endpoint,\n  path: (string | number | symbol)[] = [],\n  target: object = function () {}\n): Remote<T> {\n  let isProxyReleased = false;\n  const proxy = new Proxy(target, {\n    get(_target, prop) {\n      throwIfProxyReleased(isProxyReleased);\n      if (prop === releaseProxy) {\n        return () => {\n          return requestResponseMessage(ep, {\n            type: MessageType.RELEASE,\n            path: path.map((p) => p.toString()),\n          }).then(() => {\n            closeEndPoint(ep);\n            isProxyReleased = true;\n          });\n        };\n      }\n      if (prop === \"then\") {\n        if (path.length === 0) {\n          return { then: () => proxy };\n        }\n        const r = requestResponseMessage(ep, {\n          type: MessageType.GET,\n          path: path.map((p) => p.toString()),\n        }).then(fromWireValue);\n        return r.then.bind(r);\n      }\n      return createProxy(ep, [...path, prop]);\n    },\n    set(_target, prop, rawValue) {\n      throwIfProxyReleased(isProxyReleased);\n      // FIXME: ES6 Proxy Handler `set` methods are supposed to return a\n      // boolean. To show good will, we return true asynchronously \\_()_/\n      const [value, transferables] = toWireValue(rawValue);\n      return requestResponseMessage(\n        ep,\n        {\n          type: MessageType.SET,\n          path: [...path, prop].map((p) => p.toString()),\n          value,\n        },\n        transferables\n      ).then(fromWireValue) as any;\n    },\n    apply(_target, _thisArg, rawArgumentList) {\n      throwIfProxyReleased(isProxyReleased);\n      const last = path[path.length - 1];\n      if ((last as any) === createEndpoint) {\n        return requestResponseMessage(ep, {\n          type: MessageType.ENDPOINT,\n        }).then(fromWireValue);\n      }\n      // We just pretend that `bind()` didnt happen.\n      if (last === \"bind\") {\n        return createProxy(ep, path.slice(0, -1));\n      }\n      const [argumentList, transferables] = processArguments(rawArgumentList);\n      return requestResponseMessage(\n        ep,\n        {\n          type: MessageType.APPLY,\n          path: path.map((p) => p.toString()),\n          argumentList,\n        },\n        transferables\n      ).then(fromWireValue);\n    },\n    construct(_target, rawArgumentList) {\n      throwIfProxyReleased(isProxyReleased);\n      const [argumentList, transferables] = processArguments(rawArgumentList);\n      return requestResponseMessage(\n        ep,\n        {\n          type: MessageType.CONSTRUCT,\n          path: path.map((p) => p.toString()),\n          argumentList,\n        },\n        transferables\n      ).then(fromWireValue);\n    },\n  });\n  return proxy as any;\n}\n\nfunction myFlat<T>(arr: (T | T[])[]): T[] {\n  return Array.prototype.concat.apply([], arr);\n}\n\nfunction processArguments(argumentList: any[]): [WireValue[], Transferable[]] {\n  const processed = argumentList.map(toWireValue);\n  return [processed.map((v) => v[0]), myFlat(processed.map((v) => v[1]))];\n}\n\nconst transferCache = new WeakMap<any, Transferable[]>();\nexport function transfer<T>(obj: T, transfers: Transferable[]): T {\n  transferCache.set(obj, transfers);\n  return obj;\n}\n\nexport function proxy<T>(obj: T): T & ProxyMarked {\n  return Object.assign(obj, { [proxyMarker]: true }) as any;\n}\n\nexport function windowEndpoint(\n  w: PostMessageWithOrigin,\n  context: EventSource = self,\n  targetOrigin = \"*\"\n): Endpoint {\n  return {\n    postMessage: (msg: any, transferables: Transferable[]) =>\n      w.postMessage(msg, targetOrigin, transferables),\n    addEventListener: context.addEventListener.bind(context),\n    removeEventListener: context.removeEventListener.bind(context),\n  };\n}\n\nfunction toWireValue(value: any): [WireValue, Transferable[]] {\n  for (const [name, handler] of transferHandlers) {\n    if (handler.canHandle(value)) {\n      const [serializedValue, transferables] = handler.serialize(value);\n      return [\n        {\n          type: WireValueType.HANDLER,\n          name,\n          value: serializedValue,\n        },\n        transferables,\n      ];\n    }\n  }\n  return [\n    {\n      type: WireValueType.RAW,\n      value,\n    },\n    transferCache.get(value) || [],\n  ];\n}\n\nfunction fromWireValue(value: WireValue): any {\n  switch (value.type) {\n    case WireValueType.HANDLER:\n      return transferHandlers.get(value.name)!.deserialize(value.value);\n    case WireValueType.RAW:\n      return value.value;\n  }\n}\n\nfunction requestResponseMessage(\n  ep: Endpoint,\n  msg: Message,\n  transfers?: Transferable[]\n): Promise<WireValue> {\n  return new Promise((resolve) => {\n    const id = generateUUID();\n    ep.addEventListener(\"message\", function l(ev: MessageEvent) {\n      if (!ev.data || !ev.data.id || ev.data.id !== id) {\n        return;\n      }\n      ep.removeEventListener(\"message\", l as any);\n      resolve(ev.data);\n    } as any);\n    if (ep.start) {\n      ep.start();\n    }\n    ep.postMessage({ id, ...msg }, transfers);\n  });\n}\n\nfunction generateUUID(): string {\n  return new Array(4)\n    .fill(0)\n    .map(() => Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16))\n    .join(\"-\");\n}\n","export default function ascending(a, b) {\n  return a == null || b == null ? NaN : a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n","import ascending from \"./ascending.js\";\n\nexport default function bisector(f) {\n  let delta = f;\n  let compare1 = f;\n  let compare2 = f;\n\n  if (f.length !== 2) {\n    delta = (d, x) => f(d) - x;\n    compare1 = ascending;\n    compare2 = (d, x) => ascending(f(d), x);\n  }\n\n  function left(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function right(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) <= 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function center(a, x, lo = 0, hi = a.length) {\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n","export default function descending(a, b) {\n  return a == null || b == null ? NaN\n    : b < a ? -1\n    : b > a ? 1\n    : b >= a ? 0\n    : NaN;\n}\n","export default function extent(values, valueof) {\n  let min;\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  }\n  return [min, max];\n}\n","// https://github.com/python/cpython/blob/a74eea238f5baba15797e2e8b570d153bc8690a7/Modules/mathmodule.c#L1423\nexport class Adder {\n  constructor() {\n    this._partials = new Float64Array(32);\n    this._n = 0;\n  }\n  add(x) {\n    const p = this._partials;\n    let i = 0;\n    for (let j = 0; j < this._n && j < 32; j++) {\n      const y = p[j],\n        hi = x + y,\n        lo = Math.abs(x) < Math.abs(y) ? x - (hi - y) : y - (hi - x);\n      if (lo) p[i++] = lo;\n      x = hi;\n    }\n    p[i] = x;\n    this._n = i + 1;\n    return this;\n  }\n  valueOf() {\n    const p = this._partials;\n    let n = this._n, x, y, lo, hi = 0;\n    if (n > 0) {\n      hi = p[--n];\n      while (n > 0) {\n        x = hi;\n        y = p[--n];\n        hi = x + y;\n        lo = y - (hi - x);\n        if (lo) break;\n      }\n      if (n > 0 && ((lo < 0 && p[n - 1] < 0) || (lo > 0 && p[n - 1] > 0))) {\n        y = lo * 2;\n        x = hi + y;\n        if (y == x - hi) hi = x;\n      }\n    }\n    return hi;\n  }\n}\n\nexport function fsum(values, valueof) {\n  const adder = new Adder();\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value = +value) {\n        adder.add(value);\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if (value = +valueof(value, ++index, values)) {\n        adder.add(value);\n      }\n    }\n  }\n  return +adder;\n}\n\nexport function fcumsum(values, valueof) {\n  const adder = new Adder();\n  let index = -1;\n  return Float64Array.from(values, valueof === undefined\n      ? v => adder.add(+v || 0)\n      : v => adder.add(+valueof(v, ++index, values) || 0)\n  );\n}\n","import {InternMap} from \"internmap\";\nimport identity from \"./identity.js\";\n\nexport default function group(values, ...keys) {\n  return nest(values, identity, identity, keys);\n}\n\nexport function groups(values, ...keys) {\n  return nest(values, Array.from, identity, keys);\n}\n\nfunction flatten(groups, keys) {\n  for (let i = 1, n = keys.length; i < n; ++i) {\n    groups = groups.flatMap(g => g.pop().map(([key, value]) => [...g, key, value]));\n  }\n  return groups;\n}\n\nexport function flatGroup(values, ...keys) {\n  return flatten(groups(values, ...keys), keys);\n}\n\nexport function flatRollup(values, reduce, ...keys) {\n  return flatten(rollups(values, reduce, ...keys), keys);\n}\n\nexport function rollup(values, reduce, ...keys) {\n  return nest(values, identity, reduce, keys);\n}\n\nexport function rollups(values, reduce, ...keys) {\n  return nest(values, Array.from, reduce, keys);\n}\n\nexport function index(values, ...keys) {\n  return nest(values, identity, unique, keys);\n}\n\nexport function indexes(values, ...keys) {\n  return nest(values, Array.from, unique, keys);\n}\n\nfunction unique(values) {\n  if (values.length !== 1) throw new Error(\"duplicate key\");\n  return values[0];\n}\n\nfunction nest(values, map, reduce, keys) {\n  return (function regroup(values, i) {\n    if (i >= keys.length) return reduce(values);\n    const groups = new InternMap();\n    const keyof = keys[i++];\n    let index = -1;\n    for (const value of values) {\n      const key = keyof(value, ++index, values);\n      const group = groups.get(key);\n      if (group) group.push(value);\n      else groups.set(key, [value]);\n    }\n    for (const [key, values] of groups) {\n      groups.set(key, regroup(values, i));\n    }\n    return map(groups);\n  })(values, 0);\n}\n","export default function identity(x) {\n  return x;\n}\n","export default function min(values, valueof) {\n  let min;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  }\n  return min;\n}\n","export default function number(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n","export default function range(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function ticks(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    let r0 = Math.round(start / step), r1 = Math.round(stop / step);\n    if (r0 * step < start) ++r0;\n    if (r1 * step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) * step;\n  } else {\n    step = -step;\n    let r0 = Math.round(start * step), r1 = Math.round(stop * step);\n    if (r0 / step < start) ++r0;\n    if (r1 / step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","import define, {extend} from \"./define.js\";\nimport {Color, rgbConvert, Rgb, darker, brighter} from \"./color.js\";\nimport {degrees, radians} from \"./math.js\";\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * degrees - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * radians,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\nimport {Color, rgbConvert, Rgb} from \"./color.js\";\nimport {degrees, radians} from \"./math.js\";\n\n// https://observablehq.com/@mbostock/lab-and-rgb\nconst K = 18,\n    Xn = 0.96422,\n    Yn = 1,\n    Zn = 0.82521,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) return hcl2lab(o);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = rgb2lrgb(o.r),\n      g = rgb2lrgb(o.g),\n      b = rgb2lrgb(o.b),\n      y = xyz2lab((0.2225045 * r + 0.7168786 * g + 0.0606169 * b) / Yn), x, z;\n  if (r === g && g === b) x = z = y; else {\n    x = xyz2lab((0.4360747 * r + 0.3850649 * g + 0.1430804 * b) / Xn);\n    z = xyz2lab((0.0139322 * r + 0.0971045 * g + 0.7141733 * b) / Zn);\n  }\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nexport function gray(l, opacity) {\n  return new Lab(l, 0, 0, opacity == null ? 1 : opacity);\n}\n\nexport default function lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\n\nexport function Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Lab, lab, extend(Color, {\n  brighter: function(k) {\n    return new Lab(this.l + K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker: function(k) {\n    return new Lab(this.l - K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb: function() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    x = Xn * lab2xyz(x);\n    y = Yn * lab2xyz(y);\n    z = Zn * lab2xyz(z);\n    return new Rgb(\n      lrgb2rgb( 3.1338561 * x - 1.6168667 * y - 0.4906146 * z),\n      lrgb2rgb(-0.9787684 * x + 1.9161415 * y + 0.0334540 * z),\n      lrgb2rgb( 0.0719453 * x - 0.2289914 * y + 1.4052427 * z),\n      this.opacity\n    );\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction lrgb2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2lrgb(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  if (o.a === 0 && o.b === 0) return new Hcl(NaN, 0 < o.l && o.l < 100 ? 0 : NaN, o.l, o.opacity);\n  var h = Math.atan2(o.b, o.a) * degrees;\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nexport function lch(l, c, h, opacity) {\n  return arguments.length === 1 ? hclConvert(l) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\nfunction hcl2lab(o) {\n  if (isNaN(o.h)) return new Lab(o.l, 0, 0, o.opacity);\n  var h = o.h * radians;\n  return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n}\n\ndefine(Hcl, hcl, extend(Color, {\n  brighter: function(k) {\n    return new Hcl(this.h, this.c, this.l + K * (k == null ? 1 : k), this.opacity);\n  },\n  darker: function(k) {\n    return new Hcl(this.h, this.c, this.l - K * (k == null ? 1 : k), this.opacity);\n  },\n  rgb: function() {\n    return hcl2lab(this).rgb();\n  }\n}));\n","export const radians = Math.PI / 180;\nexport const degrees = 180 / Math.PI;\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n","export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer value part that can be\n        // grouped, and fractional or exponential suffix part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import {Adder} from \"d3-array\";\nimport {atan2, cos, quarterPi, radians, sin, tau} from \"./math.js\";\nimport noop from \"./noop.js\";\nimport stream from \"./stream.js\";\n\nexport var areaRingSum = new Adder();\n\n// hello?\n\nvar areaSum = new Adder(),\n    lambda00,\n    phi00,\n    lambda0,\n    cosPhi0,\n    sinPhi0;\n\nexport var areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaRingSum = new Adder();\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    var areaRing = +areaRingSum;\n    areaSum.add(areaRing < 0 ? tau + areaRing : areaRing);\n    this.lineStart = this.lineEnd = this.point = noop;\n  },\n  sphere: function() {\n    areaSum.add(tau);\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaRingEnd() {\n  areaPoint(lambda00, phi00);\n}\n\nfunction areaPointFirst(lambda, phi) {\n  areaStream.point = areaPoint;\n  lambda00 = lambda, phi00 = phi;\n  lambda *= radians, phi *= radians;\n  lambda0 = lambda, cosPhi0 = cos(phi = phi / 2 + quarterPi), sinPhi0 = sin(phi);\n}\n\nfunction areaPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  phi = phi / 2 + quarterPi; // half the angular distance from south pole\n\n  // Spherical excess E for a spherical triangle with vertices: south pole,\n  // previous point, current point.  Uses a formula derived from Cagnolis\n  // theorem.  See Todhunter, Spherical Trig. (1871), Sec. 103, Eq. (2).\n  var dLambda = lambda - lambda0,\n      sdLambda = dLambda >= 0 ? 1 : -1,\n      adLambda = sdLambda * dLambda,\n      cosPhi = cos(phi),\n      sinPhi = sin(phi),\n      k = sinPhi0 * sinPhi,\n      u = cosPhi0 * cosPhi + k * cos(adLambda),\n      v = k * sdLambda * sin(adLambda);\n  areaRingSum.add(atan2(v, u));\n\n  // Advance the previous points.\n  lambda0 = lambda, cosPhi0 = cosPhi, sinPhi0 = sinPhi;\n}\n\nexport default function(object) {\n  areaSum = new Adder();\n  stream(object, areaStream);\n  return areaSum * 2;\n}\n","import {Adder} from \"d3-array\";\nimport {areaStream, areaRingSum} from \"./area.js\";\nimport {cartesian, cartesianCross, cartesianNormalizeInPlace, spherical} from \"./cartesian.js\";\nimport {abs, degrees, epsilon, radians} from \"./math.js\";\nimport stream from \"./stream.js\";\n\nvar lambda0, phi0, lambda1, phi1, // bounds\n    lambda2, // previous lambda-coordinate\n    lambda00, phi00, // first point\n    p0, // previous 3D point\n    deltaSum,\n    ranges,\n    range;\n\nvar boundsStream = {\n  point: boundsPoint,\n  lineStart: boundsLineStart,\n  lineEnd: boundsLineEnd,\n  polygonStart: function() {\n    boundsStream.point = boundsRingPoint;\n    boundsStream.lineStart = boundsRingStart;\n    boundsStream.lineEnd = boundsRingEnd;\n    deltaSum = new Adder();\n    areaStream.polygonStart();\n  },\n  polygonEnd: function() {\n    areaStream.polygonEnd();\n    boundsStream.point = boundsPoint;\n    boundsStream.lineStart = boundsLineStart;\n    boundsStream.lineEnd = boundsLineEnd;\n    if (areaRingSum < 0) lambda0 = -(lambda1 = 180), phi0 = -(phi1 = 90);\n    else if (deltaSum > epsilon) phi1 = 90;\n    else if (deltaSum < -epsilon) phi0 = -90;\n    range[0] = lambda0, range[1] = lambda1;\n  },\n  sphere: function() {\n    lambda0 = -(lambda1 = 180), phi0 = -(phi1 = 90);\n  }\n};\n\nfunction boundsPoint(lambda, phi) {\n  ranges.push(range = [lambda0 = lambda, lambda1 = lambda]);\n  if (phi < phi0) phi0 = phi;\n  if (phi > phi1) phi1 = phi;\n}\n\nfunction linePoint(lambda, phi) {\n  var p = cartesian([lambda * radians, phi * radians]);\n  if (p0) {\n    var normal = cartesianCross(p0, p),\n        equatorial = [normal[1], -normal[0], 0],\n        inflection = cartesianCross(equatorial, normal);\n    cartesianNormalizeInPlace(inflection);\n    inflection = spherical(inflection);\n    var delta = lambda - lambda2,\n        sign = delta > 0 ? 1 : -1,\n        lambdai = inflection[0] * degrees * sign,\n        phii,\n        antimeridian = abs(delta) > 180;\n    if (antimeridian ^ (sign * lambda2 < lambdai && lambdai < sign * lambda)) {\n      phii = inflection[1] * degrees;\n      if (phii > phi1) phi1 = phii;\n    } else if (lambdai = (lambdai + 360) % 360 - 180, antimeridian ^ (sign * lambda2 < lambdai && lambdai < sign * lambda)) {\n      phii = -inflection[1] * degrees;\n      if (phii < phi0) phi0 = phii;\n    } else {\n      if (phi < phi0) phi0 = phi;\n      if (phi > phi1) phi1 = phi;\n    }\n    if (antimeridian) {\n      if (lambda < lambda2) {\n        if (angle(lambda0, lambda) > angle(lambda0, lambda1)) lambda1 = lambda;\n      } else {\n        if (angle(lambda, lambda1) > angle(lambda0, lambda1)) lambda0 = lambda;\n      }\n    } else {\n      if (lambda1 >= lambda0) {\n        if (lambda < lambda0) lambda0 = lambda;\n        if (lambda > lambda1) lambda1 = lambda;\n      } else {\n        if (lambda > lambda2) {\n          if (angle(lambda0, lambda) > angle(lambda0, lambda1)) lambda1 = lambda;\n        } else {\n          if (angle(lambda, lambda1) > angle(lambda0, lambda1)) lambda0 = lambda;\n        }\n      }\n    }\n  } else {\n    ranges.push(range = [lambda0 = lambda, lambda1 = lambda]);\n  }\n  if (phi < phi0) phi0 = phi;\n  if (phi > phi1) phi1 = phi;\n  p0 = p, lambda2 = lambda;\n}\n\nfunction boundsLineStart() {\n  boundsStream.point = linePoint;\n}\n\nfunction boundsLineEnd() {\n  range[0] = lambda0, range[1] = lambda1;\n  boundsStream.point = boundsPoint;\n  p0 = null;\n}\n\nfunction boundsRingPoint(lambda, phi) {\n  if (p0) {\n    var delta = lambda - lambda2;\n    deltaSum.add(abs(delta) > 180 ? delta + (delta > 0 ? 360 : -360) : delta);\n  } else {\n    lambda00 = lambda, phi00 = phi;\n  }\n  areaStream.point(lambda, phi);\n  linePoint(lambda, phi);\n}\n\nfunction boundsRingStart() {\n  areaStream.lineStart();\n}\n\nfunction boundsRingEnd() {\n  boundsRingPoint(lambda00, phi00);\n  areaStream.lineEnd();\n  if (abs(deltaSum) > epsilon) lambda0 = -(lambda1 = 180);\n  range[0] = lambda0, range[1] = lambda1;\n  p0 = null;\n}\n\n// Finds the left-right distance between two longitudes.\n// This is almost the same as (lambda1 - lambda0 + 360) % 360, except that we want\n// the distance between 180 to be 360.\nfunction angle(lambda0, lambda1) {\n  return (lambda1 -= lambda0) < 0 ? lambda1 + 360 : lambda1;\n}\n\nfunction rangeCompare(a, b) {\n  return a[0] - b[0];\n}\n\nfunction rangeContains(range, x) {\n  return range[0] <= range[1] ? range[0] <= x && x <= range[1] : x < range[0] || range[1] < x;\n}\n\nexport default function(feature) {\n  var i, n, a, b, merged, deltaMax, delta;\n\n  phi1 = lambda1 = -(lambda0 = phi0 = Infinity);\n  ranges = [];\n  stream(feature, boundsStream);\n\n  // First, sort ranges by their minimum longitudes.\n  if (n = ranges.length) {\n    ranges.sort(rangeCompare);\n\n    // Then, merge any ranges that overlap.\n    for (i = 1, a = ranges[0], merged = [a]; i < n; ++i) {\n      b = ranges[i];\n      if (rangeContains(a, b[0]) || rangeContains(a, b[1])) {\n        if (angle(a[0], b[1]) > angle(a[0], a[1])) a[1] = b[1];\n        if (angle(b[0], a[1]) > angle(a[0], a[1])) a[0] = b[0];\n      } else {\n        merged.push(a = b);\n      }\n    }\n\n    // Finally, find the largest gap between the merged ranges.\n    // The final bounding box will be the inverse of this gap.\n    for (deltaMax = -Infinity, n = merged.length - 1, i = 0, a = merged[n]; i <= n; a = b, ++i) {\n      b = merged[i];\n      if ((delta = angle(a[1], b[0])) > deltaMax) deltaMax = delta, lambda0 = b[0], lambda1 = a[1];\n    }\n  }\n\n  ranges = range = null;\n\n  return lambda0 === Infinity || phi0 === Infinity\n      ? [[NaN, NaN], [NaN, NaN]]\n      : [[lambda0, phi0], [lambda1, phi1]];\n}\n","import {asin, atan2, cos, sin, sqrt} from \"./math.js\";\n\nexport function spherical(cartesian) {\n  return [atan2(cartesian[1], cartesian[0]), asin(cartesian[2])];\n}\n\nexport function cartesian(spherical) {\n  var lambda = spherical[0], phi = spherical[1], cosPhi = cos(phi);\n  return [cosPhi * cos(lambda), cosPhi * sin(lambda), sin(phi)];\n}\n\nexport function cartesianDot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\nexport function cartesianCross(a, b) {\n  return [a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]];\n}\n\n// TODO return a\nexport function cartesianAddInPlace(a, b) {\n  a[0] += b[0], a[1] += b[1], a[2] += b[2];\n}\n\nexport function cartesianScale(vector, k) {\n  return [vector[0] * k, vector[1] * k, vector[2] * k];\n}\n\n// TODO return d\nexport function cartesianNormalizeInPlace(d) {\n  var l = sqrt(d[0] * d[0] + d[1] * d[1] + d[2] * d[2]);\n  d[0] /= l, d[1] /= l, d[2] /= l;\n}\n","export var epsilon = 1e-6;\nexport var epsilon2 = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var quarterPi = pi / 4;\nexport var tau = pi * 2;\n\nexport var degrees = 180 / pi;\nexport var radians = pi / 180;\n\nexport var abs = Math.abs;\nexport var atan = Math.atan;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var ceil = Math.ceil;\nexport var exp = Math.exp;\nexport var floor = Math.floor;\nexport var hypot = Math.hypot;\nexport var log = Math.log;\nexport var pow = Math.pow;\nexport var sin = Math.sin;\nexport var sign = Math.sign || function(x) { return x > 0 ? 1 : x < 0 ? -1 : 0; };\nexport var sqrt = Math.sqrt;\nexport var tan = Math.tan;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x > 1 ? halfPi : x < -1 ? -halfPi : Math.asin(x);\n}\n\nexport function haversin(x) {\n  return (x = sin(x / 2)) * x;\n}\n","export default function noop() {}\n","function streamGeometry(geometry, stream) {\n  if (geometry && streamGeometryType.hasOwnProperty(geometry.type)) {\n    streamGeometryType[geometry.type](geometry, stream);\n  }\n}\n\nvar streamObjectType = {\n  Feature: function(object, stream) {\n    streamGeometry(object.geometry, stream);\n  },\n  FeatureCollection: function(object, stream) {\n    var features = object.features, i = -1, n = features.length;\n    while (++i < n) streamGeometry(features[i].geometry, stream);\n  }\n};\n\nvar streamGeometryType = {\n  Sphere: function(object, stream) {\n    stream.sphere();\n  },\n  Point: function(object, stream) {\n    object = object.coordinates;\n    stream.point(object[0], object[1], object[2]);\n  },\n  MultiPoint: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) object = coordinates[i], stream.point(object[0], object[1], object[2]);\n  },\n  LineString: function(object, stream) {\n    streamLine(object.coordinates, stream, 0);\n  },\n  MultiLineString: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamLine(coordinates[i], stream, 0);\n  },\n  Polygon: function(object, stream) {\n    streamPolygon(object.coordinates, stream);\n  },\n  MultiPolygon: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamPolygon(coordinates[i], stream);\n  },\n  GeometryCollection: function(object, stream) {\n    var geometries = object.geometries, i = -1, n = geometries.length;\n    while (++i < n) streamGeometry(geometries[i], stream);\n  }\n};\n\nfunction streamLine(coordinates, stream, closed) {\n  var i = -1, n = coordinates.length - closed, coordinate;\n  stream.lineStart();\n  while (++i < n) coordinate = coordinates[i], stream.point(coordinate[0], coordinate[1], coordinate[2]);\n  stream.lineEnd();\n}\n\nfunction streamPolygon(coordinates, stream) {\n  var i = -1, n = coordinates.length;\n  stream.polygonStart();\n  while (++i < n) streamLine(coordinates[i], stream, 1);\n  stream.polygonEnd();\n}\n\nexport default function(object, stream) {\n  if (object && streamObjectType.hasOwnProperty(object.type)) {\n    streamObjectType[object.type](object, stream);\n  } else {\n    streamGeometry(object, stream);\n  }\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","import {basis} from \"./basis.js\";\n\nexport default function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","export default x => () => x;\n","import {cubehelix as colorCubehelix} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction cubehelix(hue) {\n  return (function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = colorCubehelix(start)).h, (end = colorCubehelix(end)).h),\n          s = color(start.s, end.s),\n          l = color(start.l, end.l),\n          opacity = color(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n\n    return cubehelix;\n  })(1);\n}\n\nexport default cubehelix(hue);\nexport var cubehelixLong = cubehelix(color);\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(specifier) {\n  var n = specifier.length / 6 | 0, colors = new Array(n), i = 0;\n  while (i < n) colors[i] = \"#\" + specifier.slice(i * 6, ++i * 6);\n  return colors;\n}\n","import {interpolateRgbBasis} from \"d3-interpolate\";\n\nexport default scheme => interpolateRgbBasis(scheme[scheme.length - 1]);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e5f5f999d8c92ca25f\",\n  \"edf8fbb2e2e266c2a4238b45\",\n  \"edf8fbb2e2e266c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e0ecf49ebcda8856a7\",\n  \"edf8fbb3cde38c96c688419d\",\n  \"edf8fbb3cde38c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e0f3dba8ddb543a2ca\",\n  \"f0f9e8bae4bc7bccc42b8cbe\",\n  \"f0f9e8bae4bc7bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee8c8fdbb84e34a33\",\n  \"fef0d9fdcc8afc8d59d7301f\",\n  \"fef0d9fdcc8afc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ece7f2a6bddb2b8cbe\",\n  \"f1eef6bdc9e174a9cf0570b0\",\n  \"f1eef6bdc9e174a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ece2f0a6bddb1c9099\",\n  \"f6eff7bdc9e167a9cf02818a\",\n  \"f6eff7bdc9e167a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e7e1efc994c7dd1c77\",\n  \"f1eef6d7b5d8df65b0ce1256\",\n  \"f1eef6d7b5d8df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fde0ddfa9fb5c51b8a\",\n  \"feebe2fbb4b9f768a1ae017e\",\n  \"feebe2fbb4b9f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"f7fcb9addd8e31a354\",\n  \"ffffccc2e69978c679238443\",\n  \"ffffccc2e69978c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"edf8b17fcdbb2c7fb8\",\n  \"ffffcca1dab441b6c4225ea8\",\n  \"ffffcca1dab441b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fff7bcfec44fd95f0e\",\n  \"ffffd4fed98efe9929cc4c02\",\n  \"ffffd4fed98efe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ffeda0feb24cf03b20\",\n  \"ffffb2fecc5cfd8d3ce31a1c\",\n  \"ffffb2fecc5cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026\"\n).map(colors);\n\nexport default ramp(scheme);\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport var warm = interpolateCubehelixLong(cubehelix(-100, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nexport var cool = interpolateCubehelixLong(cubehelix(260, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nvar c = cubehelix();\n\nexport default function(t) {\n  if (t < 0 || t > 1) t -= Math.floor(t);\n  var ts = Math.abs(t - 0.5);\n  c.h = 360 * t - 100;\n  c.s = 1.5 - 1.5 * ts;\n  c.l = 0.8 - 0.9 * ts;\n  return c + \"\";\n}\n","import colors from \"../colors.js\";\n\nfunction ramp(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}\n\nexport default ramp(colors(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\"));\n\nexport var magma = ramp(colors(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\nexport var inferno = ramp(colors(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\nexport var plasma = ramp(colors(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"deebf79ecae13182bd\",\n  \"eff3ffbdd7e76baed62171b5\",\n  \"eff3ffbdd7e76baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e5f5e0a1d99b31a354\",\n  \"edf8e9bae4b374c476238b45\",\n  \"edf8e9bae4b374c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"f0f0f0bdbdbd636363\",\n  \"f7f7f7cccccc969696525252\",\n  \"f7f7f7cccccc969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee6cefdae6be6550d\",\n  \"feeddefdbe85fd8d3cd94701\",\n  \"feeddefdbe85fd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"efedf5bcbddc756bb1\",\n  \"f2f0f7cbc9e29e9ac86a51a3\",\n  \"f2f0f7cbc9e29e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee0d2fc9272de2d26\",\n  \"fee5d9fcae91fb6a4acb181d\",\n  \"fee5d9fcae91fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d\"\n).map(colors);\n\nexport default ramp(scheme);\n","export default function constants(x) {\n  return function() {\n    return x;\n  };\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","export default function number(x) {\n  return +x;\n}\n","import {linearish} from \"./linear.js\";\nimport {copy, identity, transformer} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\n\nfunction transformPow(exponent) {\n  return function(x) {\n    return x < 0 ? -Math.pow(-x, exponent) : Math.pow(x, exponent);\n  };\n}\n\nfunction transformSqrt(x) {\n  return x < 0 ? -Math.sqrt(-x) : Math.sqrt(x);\n}\n\nfunction transformSquare(x) {\n  return x < 0 ? -x * x : x * x;\n}\n\nexport function powish(transform) {\n  var scale = transform(identity, identity),\n      exponent = 1;\n\n  function rescale() {\n    return exponent === 1 ? transform(identity, identity)\n        : exponent === 0.5 ? transform(transformSqrt, transformSquare)\n        : transform(transformPow(exponent), transformPow(1 / exponent));\n  }\n\n  scale.exponent = function(_) {\n    return arguments.length ? (exponent = +_, rescale()) : exponent;\n  };\n\n  return linearish(scale);\n}\n\nexport default function pow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, pow()).exponent(scale.exponent());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n\nexport function sqrt() {\n  return pow.apply(null, arguments).exponent(0.5);\n}\n","import {interpolate, interpolateRound} from \"d3-interpolate\";\nimport {identity} from \"./continuous.js\";\nimport {initInterpolator} from \"./init.js\";\nimport {linearish} from \"./linear.js\";\nimport {loggish} from \"./log.js\";\nimport {symlogish} from \"./symlog.js\";\nimport {powish} from \"./pow.js\";\n\nfunction transformer() {\n  var x0 = 0,\n      x1 = 1,\n      t0,\n      t1,\n      k10,\n      transform,\n      interpolator = identity,\n      clamp = false,\n      unknown;\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : interpolator(k10 === 0 ? 0.5 : (x = (transform(x) - t0) * k10, clamp ? Math.max(0, Math.min(1, x)) : x));\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? ([x0, x1] = _, t0 = transform(x0 = +x0), t1 = transform(x1 = +x1), k10 = t0 === t1 ? 0 : 1 / (t1 - t0), scale) : [x0, x1];\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = !!_, scale) : clamp;\n  };\n\n  scale.interpolator = function(_) {\n    return arguments.length ? (interpolator = _, scale) : interpolator;\n  };\n\n  function range(interpolate) {\n    return function(_) {\n      var r0, r1;\n      return arguments.length ? ([r0, r1] = _, interpolator = interpolate(r0, r1), scale) : [interpolator(0), interpolator(1)];\n    };\n  }\n\n  scale.range = range(interpolate);\n\n  scale.rangeRound = range(interpolateRound);\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t) {\n    transform = t, t0 = t(x0), t1 = t(x1), k10 = t0 === t1 ? 0 : 1 / (t1 - t0);\n    return scale;\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .interpolator(source.interpolator())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport default function sequential() {\n  var scale = linearish(transformer()(identity));\n\n  scale.copy = function() {\n    return copy(scale, sequential());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialLog() {\n  var scale = loggish(transformer()).domain([1, 10]);\n\n  scale.copy = function() {\n    return copy(scale, sequentialLog()).base(scale.base());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialSymlog() {\n  var scale = symlogish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, sequentialSymlog()).constant(scale.constant());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialPow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, sequentialPow()).exponent(scale.exponent());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialSqrt() {\n  return sequentialPow.apply(null, arguments).exponent(0.5);\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function tickFormat(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n","import {\n  timeDay,\n  timeSunday,\n  timeMonday,\n  timeThursday,\n  timeYear,\n  utcDay,\n  utcSunday,\n  utcMonday,\n  utcThursday,\n  utcYear\n} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newDate(y, m, d) {\n  return {y: y, m: m, d: d, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"f\": formatMicroseconds,\n    \"g\": formatYearISO,\n    \"G\": formatFullYearISO,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"q\": formatQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatSeconds,\n    \"u\": formatWeekdayNumberMonday,\n    \"U\": formatWeekNumberSunday,\n    \"V\": formatWeekNumberISO,\n    \"w\": formatWeekdayNumberSunday,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"f\": formatUTCMicroseconds,\n    \"g\": formatUTCYearISO,\n    \"G\": formatUTCFullYearISO,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"q\": formatUTCQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatUTCSeconds,\n    \"u\": formatUTCWeekdayNumberMonday,\n    \"U\": formatUTCWeekNumberSunday,\n    \"V\": formatUTCWeekNumberISO,\n    \"w\": formatUTCWeekdayNumberSunday,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"f\": parseMicroseconds,\n    \"g\": parseYear,\n    \"G\": parseFullYear,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"q\": parseQuarter,\n    \"Q\": parseUnixTimestamp,\n    \"s\": parseUnixTimestampSeconds,\n    \"S\": parseSeconds,\n    \"u\": parseWeekdayNumberMonday,\n    \"U\": parseWeekNumberSunday,\n    \"V\": parseWeekNumberISO,\n    \"w\": parseWeekdayNumberSunday,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, Z) {\n    return function(string) {\n      var d = newDate(1900, undefined, 1),\n          i = parseSpecifier(d, specifier, string += \"\", 0),\n          week, day;\n      if (i != string.length) return null;\n\n      // If a UNIX timestamp is specified, return it.\n      if (\"Q\" in d) return new Date(d.Q);\n      if (\"s\" in d) return new Date(d.s * 1000 + (\"L\" in d ? d.L : 0));\n\n      // If this is utcParse, never use the local timezone.\n      if (Z && !(\"Z\" in d)) d.Z = 0;\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // If the month was not specified, inherit from the quarter.\n      if (d.m === undefined) d.m = \"q\" in d ? d.q : 0;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"V\" in d) {\n        if (d.V < 1 || d.V > 53) return null;\n        if (!(\"w\" in d)) d.w = 1;\n        if (\"Z\" in d) {\n          week = utcDate(newDate(d.y, 0, 1)), day = week.getUTCDay();\n          week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          week = localDate(newDate(d.y, 0, 1)), day = week.getDay();\n          week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);\n          week = timeDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n        day = \"Z\" in d ? utcDate(newDate(d.y, 0, 1)).getUTCDay() : localDate(newDate(d.y, 0, 1)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return localDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatQuarter(d) {\n    return 1 + ~~(d.getMonth() / 3);\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  function formatUTCQuarter(d) {\n    return 1 + ~~(d.getUTCMonth() / 3);\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", false);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier += \"\", true);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  return new Map(names.map((name, i) => [name.toLowerCase(), i]));\n}\n\nfunction parseWeekdayNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekdayNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.u = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberISO(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.V = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseQuarter(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.q = n[0] * 3 - 3, i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMicroseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 6));\n  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction parseUnixTimestamp(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseUnixTimestampSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.s = +n[0], i + n[0].length) : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMicroseconds(d, p) {\n  return formatMilliseconds(d, p) + \"000\";\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekdayNumberMonday(d) {\n  var day = d.getDay();\n  return day === 0 ? 7 : day;\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction dISO(d) {\n  var day = d.getDay();\n  return (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n}\n\nfunction formatWeekNumberISO(d, p) {\n  d = dISO(d);\n  return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);\n}\n\nfunction formatWeekdayNumberSunday(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatYearISO(d, p) {\n  d = dISO(d);\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatFullYearISO(d, p) {\n  var day = d.getDay();\n  d = (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMicroseconds(d, p) {\n  return formatUTCMilliseconds(d, p) + \"000\";\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekdayNumberMonday(d) {\n  var dow = d.getUTCDay();\n  return dow === 0 ? 7 : dow;\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction UTCdISO(d) {\n  var day = d.getUTCDay();\n  return (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n}\n\nfunction formatUTCWeekNumberISO(d, p) {\n  d = UTCdISO(d);\n  return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n}\n\nfunction formatUTCWeekdayNumberSunday(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCYearISO(d, p) {\n  d = UTCdISO(d);\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCFullYearISO(d, p) {\n  var day = d.getUTCDay();\n  d = (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n\nfunction formatUnixTimestamp(d) {\n  return +d;\n}\n\nfunction formatUnixTimestampSeconds(d) {\n  return Math.floor(+d / 1000);\n}\n","import interval from \"./interval.js\";\nimport {durationDay, durationMinute} from \"./duration.js\";\n\nvar day = interval(\n  date => date.setHours(0, 0, 0, 0),\n  (date, step) => date.setDate(date.getDate() + step),\n  (start, end) => (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay,\n  date => date.getDate() - 1\n);\n\nexport default day;\nexport var days = day.range;\n","export const durationSecond = 1000;\nexport const durationMinute = durationSecond * 60;\nexport const durationHour = durationMinute * 60;\nexport const durationDay = durationHour * 24;\nexport const durationWeek = durationDay * 7;\nexport const durationMonth = durationDay * 30;\nexport const durationYear = durationDay * 365;\n","import interval from \"./interval.js\";\nimport {durationHour, durationMinute, durationSecond} from \"./duration.js\";\n\nvar hour = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getHours();\n});\n\nexport default hour;\nexport var hours = hour.range;\n","var t0 = new Date,\n    t1 = new Date;\n\nexport default function newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = arguments.length === 0 ? new Date : new Date(+date)), date;\n  }\n\n  interval.floor = function(date) {\n    return floori(date = new Date(+date)), date;\n  };\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [], previous;\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n","import interval from \"./interval.js\";\nimport {durationMinute, durationSecond} from \"./duration.js\";\n\nvar minute = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getMinutes();\n});\n\nexport default minute;\nexport var minutes = minute.range;\n","import interval from \"./interval.js\";\n\nvar month = interval(function(date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setMonth(date.getMonth() + step);\n}, function(start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, function(date) {\n  return date.getMonth();\n});\n\nexport default month;\nexport var months = month.range;\n","import interval from \"./interval.js\";\nimport {durationSecond} from \"./duration.js\";\n\nvar second = interval(function(date) {\n  date.setTime(date - date.getMilliseconds());\n}, function(date, step) {\n  date.setTime(+date + step * durationSecond);\n}, function(start, end) {\n  return (end - start) / durationSecond;\n}, function(date) {\n  return date.getUTCSeconds();\n});\n\nexport default second;\nexport var seconds = second.range;\n","import interval from \"./interval.js\";\nimport {durationDay} from \"./duration.js\";\n\nvar utcDay = interval(function(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCDate(date.getUTCDate() + step);\n}, function(start, end) {\n  return (end - start) / durationDay;\n}, function(date) {\n  return date.getUTCDate() - 1;\n});\n\nexport default utcDay;\nexport var utcDays = utcDay.range;\n","import interval from \"./interval.js\";\nimport {durationWeek} from \"./duration.js\";\n\nfunction utcWeekday(i) {\n  return interval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport var utcSunday = utcWeekday(0);\nexport var utcMonday = utcWeekday(1);\nexport var utcTuesday = utcWeekday(2);\nexport var utcWednesday = utcWeekday(3);\nexport var utcThursday = utcWeekday(4);\nexport var utcFriday = utcWeekday(5);\nexport var utcSaturday = utcWeekday(6);\n\nexport var utcSundays = utcSunday.range;\nexport var utcMondays = utcMonday.range;\nexport var utcTuesdays = utcTuesday.range;\nexport var utcWednesdays = utcWednesday.range;\nexport var utcThursdays = utcThursday.range;\nexport var utcFridays = utcFriday.range;\nexport var utcSaturdays = utcSaturday.range;\n","import interval from \"./interval.js\";\n\nvar utcYear = interval(function(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, function(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, function(date) {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport default utcYear;\nexport var utcYears = utcYear.range;\n","import interval from \"./interval.js\";\nimport {durationMinute, durationWeek} from \"./duration.js\";\n\nfunction weekday(i) {\n  return interval(function(date) {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step * 7);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport var sunday = weekday(0);\nexport var monday = weekday(1);\nexport var tuesday = weekday(2);\nexport var wednesday = weekday(3);\nexport var thursday = weekday(4);\nexport var friday = weekday(5);\nexport var saturday = weekday(6);\n\nexport var sundays = sunday.range;\nexport var mondays = monday.range;\nexport var tuesdays = tuesday.range;\nexport var wednesdays = wednesday.range;\nexport var thursdays = thursday.range;\nexport var fridays = friday.range;\nexport var saturdays = saturday.range;\n","import interval from \"./interval.js\";\n\nvar year = interval(function(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setFullYear(date.getFullYear() + step);\n}, function(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}, function(date) {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\nyear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport default year;\nexport var years = year.range;\n","export class InternMap extends Map {\n  constructor(entries, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (entries != null) for (const [key, value] of entries) this.set(key, value);\n  }\n  get(key) {\n    return super.get(intern_get(this, key));\n  }\n  has(key) {\n    return super.has(intern_get(this, key));\n  }\n  set(key, value) {\n    return super.set(intern_set(this, key), value);\n  }\n  delete(key) {\n    return super.delete(intern_delete(this, key));\n  }\n}\n\nexport class InternSet extends Set {\n  constructor(values, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (values != null) for (const value of values) this.add(value);\n  }\n  has(value) {\n    return super.has(intern_get(this, value));\n  }\n  add(value) {\n    return super.add(intern_set(this, value));\n  }\n  delete(value) {\n    return super.delete(intern_delete(this, value));\n  }\n}\n\nfunction intern_get({_intern, _key}, value) {\n  const key = _key(value);\n  return _intern.has(key) ? _intern.get(key) : value;\n}\n\nfunction intern_set({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) return _intern.get(key);\n  _intern.set(key, value);\n  return value;\n}\n\nfunction intern_delete({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) {\n    value = _intern.get(key);\n    _intern.delete(key);\n  }\n  return value;\n}\n\nfunction keyof(value) {\n  return value !== null && typeof value === \"object\" ? value.valueOf() : value;\n}\n"],"names":["isBoolean","x","isFunction","isObject","isPureObject","isResponse","Response","isBlob","Blob","isReadableStream","ReadableStream","isReadableDOMStream","isReadableNodeStream","assert","condition","Error","message","isLoaderObject","loader","Array","options","pathPrefix","fileAliases","DATA_URL_PATTERN","MIME_TYPE_PATTERN","parseMIMEType","mimeString","matches","parseMIMETypeFromURL","url","QUERY_STRING_PATTERN","getResourceUrlAndType","resource","stripQueryString","type","async","headers","contentLength","ArrayBuffer","getResourceContentLength","String","initialDataUrl","INITIAL_DATA_LENGTH","blobSlice","Promise","resolve","reader","event","base64","buffer","binary","bytes","Uint8Array","i","btoa","arrayBufferToBase64","getInitialDataUrl","TextEncoder","encode","response","Object","value","fetchFile","filename","replacement","resolvePath","fetchOptions","fetch","makeResponse","isBrowser","process","mockUserAgent","window","Boolean","realUserAgent","navigator","userAgent","isElectron","VERSION","__VERSION__","checkIfBrowser","LocalStorage","constructor","id","defaultSettings","this","storage","e","getStorage","getConfiguration","setConfiguration","configuration","updateConfiguration","serialized","JSON","_loadConfiguration","serializedConfiguration","getItem","formatImage","image","scale","maxWidth","imageUrl","Math","width","height","style","getColor","color","COLOR","globals","self","global","document","window_","process_","getHiResTimestamp","timestamp","timeParts","Date","originalConsole","debug","console","log","info","warn","error","DEFAULT_SETTINGS","enabled","level","noop","cache","ONCE","once","Log","obj","predefined","proto","propNames","name","key","autobind","newLevel","isEnabled","_storage","config","getLevel","getTotal","Number","getDelta","priority","newPriority","getPriority","enable","setLevel","get","setting","set","settings","_getLogFunction","deprecated","oldUsage","removed","probe","logLevel","time","args","table","columns","tag","getTableHeader","_shouldLog","img","element","logImageInBrowser","asciify","module","fit","data","logImageInNode","timeEnd","timeStamp","group","opts","collapsed","normalizeArguments","groupCollapsed","groupEnd","withGroup","func","trace","normalizeLogLevel","method","string","length","padLength","repeat","leftPad","ms","formatted","formatTime","background","decorateMessage","resolvedLevel","messageType","title","probeLog","NullLog","DEFAULT_LOADER_OPTIONS","mimeType","nothrow","bind","CDN","worker","maxConcurrency","maxMobileConcurrency","reuseWorkers","_workerType","limit","_limitMB","batchSize","batchDebounceMs","metadata","transforms","REMOVED_LOADER_OPTIONS","throws","dataType","uri","body","mode","credentials","redirect","referrer","referrerPolicy","integrity","keepalive","signal","globalThis","loaders","getGlobalLoaderOptions","state","getGlobalLoaderState","normalizeOptions","validateOptionsObject","idOptions","loaderOptions","deprecatedOptions","validateOptions","normalizeOptionsInternal","getFetchFunction","globalOptions","context","loaderName","prefix","isSubOptions","isBaseUriOption","isWorkerUrlOption","suggestion","findSimilarOption","optionKey","lowerCaseOptionKey","bestSuggestion","lowerCaseKey","mergedOptions","addUrlOptions","mergeNestedFields","isMobile","exec","workerURLCache","parseFloat","getLoadableWorkerURL","props","workerURL","getLoadableWorkerURLFromSource","workerUrl","getLoadableWorkerURLFromURL","workerSource","blob","URL","getTransferList","recursive","transfersSet","transfers","isTransferable","object","MessagePort","ImageBitmap","OffscreenCanvas","NOOP","WorkerThread","Worker","source","destroy","isRunning","postMessage","transferList","_getErrorFromErrorEvent","_createBrowserWorker","WorkerJob","jobName","reject","payload","done","WorkerPool","setProps","onMessage","job","onError","startPromise","onStart","jobQueue","workerThread","queuedJob","backlog","returnWorkerToQueue","isDestroyed","count","_getAvailableWorker","idleQueue","shift","_getMaxConcurrency","DEFAULT_PROPS","onDebug","WorkerFarm","isSupported","Map","workerPools","workerPool","getWorkerPool","_getWorkerPoolProps","NPM_TAG","parseWithWorker","workerOptions","workerFile","version","versionTag","getWorkerURL","getWorkerFarm","input","result","parseOnMainThread","toArrayBuffer","isBuffer","typedArray","bufferToArrayBuffer","text","concatenateArrayBuffersAsync","arrayBuffers","sourceArrays","sources","source2","byteLength","offset","sourceArray","concatenateArrayBuffers","DEFAULT_CHUNK_SIZE","makeStreamIterator","stream","currentBatchPromise","nextBatchPromise","makeBrowserStreamIterator","makeNodeStreamIterator","chunkSize","textEncoder","chunkLength","chunk","makeStringIterator","byteOffset","arrayBuffer","chunkByteLength","chunkArray","makeArrayBufferIterator","end","makeBlobIterator","ERR_DATA","getArrayBufferOrStringFromData","isArrayBuffer","TextDecoder","textDecoder","getArrayBufferOrStringFromDataSync","contentType","getResponseError","checkResponse","makeIterator","isIterable","Symbol","isAsyncIterable","getGlobalLoaderRegistry","getRegisteredLoaders","EXT_PATTERN","selectLoaderSync","validHTTPResponse","normalizeLoader","candidateLoaders","normalizeLoaders","selectLoaderInternal","getNoValidLoaderMessage","testUrl","findLoaderByMIMEType","match","extension","loaderExtension","findLoaderByExtension","findLoaderByUrl","testDataAgainstText","testDataAgainstBinary","findLoaderByInitialBytes","slashIndex","path","firstCharacters","getMagicString","getFirstCharacters","tests","test","arrayBuffer1","arrayBuffer2","array1","array2","compareArrayBuffers","testBinary","dataView","DataView","magic","parse","contextLoaders","getLoadersFromContext","selectLoader","previousContext","resolvedContext","getLoaderContext","coreVersion","workerVersion","validateWorkerVersion","canParseWithWorker","parseWithLoader","load","DEFAULT_CSV_LOADER_OPTIONS","csv","shape","optimizeMemoryUsage","header","columnPrefix","quoteChar","escapeChar","dynamicTyping","comments","skipEmptyLines","delimitersToGuess","CSVLoader","extensions","mimeTypes","category","parseCSV","decode","parseText","parseInBatches","csvOptions","asyncQueue","isFirstRow","headerRow","tableBatchBuilder","schema","download","step","results","row","bytesUsed","isHeaderRow","duplicateColumnTransformer","generateHeader","columnName","index","Float32Array","deduceSchema","batch","complete","Papa","csvText","firstRow","preview","readFirstRow","parseWithHeader","papaparseConfig","transformHeader","rows","convertToObjectRow","convertToArrayRow","observedColumns","col","colName","counter","ChunkStreamer","AsyncIteratorStreamer","_config","asyncIterator","getStringChunk","w","newWorker","workerId","streamer","_input","StringStreamer","UserDefinedStreamer","unparse","_quotes","_writeHeader","_delimiter","_newline","_quoteChar","_escapedQuote","_skipEmptyLines","_columns","unpackConfig","quoteCharRegex","RegExp","escapeRegExp","serialize","objectKeys","keys","fields","hasHeader","dataKeyedByField","safe","maxCol","emptyLine","nullLine","line","c","cx","colIdx","str","needsQuotes","substrings","hasAny","RECORD_SEP","UNIT_SEP","BAD_DELIMITERS","WORKERS_SUPPORTED","NODE_STREAM_INPUT","LocalChunkSize","RemoteChunkSize","DefaultDelimiter","Parser","ParserHandle","errors","meta","configCopy","copy","parseInt","replaceConfig","isFakeChunk","isFirstChunk","modifiedChunk","beforeFirstChunk","aggregate","_partialLine","_handle","paused","lastIndex","_rowCount","finishedIncludingPreview","_finished","_completeResults","concat","_nextChunk","s","remaining","size","parseChunk","FLOAT","ISO_DATE","_stepCounter","_rowCounter","_paused","_aborted","_fields","_results","userStep","needsHeaderRow","processResults","_parser","addError","_delimiterError","testEmptyLine","fillHeaderFields","j","rowSource","field","parseDynamic","incrementBy","processRow","applyHeaderAndDynamicTypingAndTransformation","shouldApplyDynamicTyping","code","baseIndex","ignoreLastRow","re","r","n","nAppearsFirst","numWithN","guessLineEndings","delimGuess","delim","delta","avgFieldCount","emptyLinesCount","fieldCountPrevRow","delimiter","newline","fieldCount","bestDelta","bestDelim","successful","bestDelimiter","guessDelimiter","parserConfig","fastMode","cursor","aborted","inputLen","delimLen","newlineLen","commentsLen","stepIsFunction","lastCursor","returnable","pushRow","doStep","nextDelim","nextNewline","saveRow","quoteSearch","finish","spacesBetweenQuoteAndDelimiter","extraSpaces","spacesBetweenQuoteAndNewLine","spaceLength","textBetweenClosingQuoteAndIndex","linebreak","truncated","undefined","cpy","RowTableBatchAggregator","rowCount","addArrayRow","addObjectRow","getBatch","batchType","ColumnarTableBatchAggregator","_reallocateColumns","allocated","ArrayType","oldColumn","_pruneColumns","column","rowObject","arrayRows","rowArray","objectRows","DEFAULT_OPTIONS","ERR_MESSAGE","TableBatchBuilder","limitReached","totalLength","totalBytes","addRow","rowBytes","_estimateRowMB","TableBatchType","chunkComplete","getFullBatch","_isFull","_getBatch","getFinalBatch","aggregator","normalizedBatch","_getTableBatchType","ArrayQueue","enqueue","push","dequeue","AsyncQueue","close","_settlers","_values","settler","next","objectRow","arrayRow","fitBounds","minExtent","maxZoom","padding","west","east","top","bottom","left","right","viewport","longitude","latitude","zoom","nw","se","targetSize","scaleX","scaleY","offsetX","offsetY","center","centerLngLat","log2","DEGREES_TO_RADIANS","getBounds","z","unproject","unprojectOps","targetZ","bottomLeft","bottomRight","halfFov","angleToGround","topLeft","unprojectOnFarPlane","topRight","pixelUnprojectionMatrix","coord0","transformVector","coord1","t","coord","vec2","worldToLngLat","createMat4","matrix","vector","vec4","PI","PI_4","RADIANS_TO_DEGREES","TILE_SIZE","DEFAULT_ALTITUDE","zoomToScale","lngLatToWorld","lng","lat","phi2","lambda2","y","getDistanceScales","highPrecision","latCosine","unitsPerDegreeX","unitsPerDegreeY","altUnitsPerMeter","worldSize","latCosine2","unitsPerDegreeY2","altUnitsPerDegree2","altUnitsPerMeter2","getViewMatrix","vm","mat4","pitch","bearing","vec3","getProjectionMatrix","farZMultiplier","far","fovy","altitudeToFovy","nearZMultiplier","altitude","focalDistance","fovyToAltitude","pitchRadians","topHalfSurfaceDistance","fov","aspect","near","getProjectionParameters","worldToPixels","xyz","pixelProjectionMatrix","pixelsToWorld","z0","z1","WebMercatorViewport","position","distanceScales","equals","project","projectPosition","unprojectPosition","_initMatrices","viewMatrix","vpm","m","mInverse","worldPosition","y2","targetZWorld","unitsPerMeter","X","Y","Z","metersPerUnit","projectFlat","lngLat","unprojectFlat","xy","getMapCenterByLngLatPosition","pos","fromLocation","toLocation","translate","newCenter","getLocationAtPoint","bounds","corners","getBoundingRegion","p","map","f","each","isArray","o","prototype","has","remove","property","clear","slice","values","entries","empty","sortValues","rollup","nest","sortKeys","apply","array","depth","createResult","setResult","sort","keyValue","valuesByKey","sortKey","v","k","a","b","createObject","setObject","createMap","setMap","d","order","Set","add","EPSILON","ARRAY_TYPE","random","hypot","arguments","sqrt","invert","out","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","multiply","b0","b1","b2","b3","rotateX","rad","sin","cos","rotateZ","perspective","nf","tan","Infinity","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","a14","a15","b4","b5","b6","b7","b8","b9","b12","b13","b14","b15","abs","glMatrix","max","negate","lerp","ax","ay","vec","create","mul","transformMat4","defaultGetX","defaultGetY","KDBush","points","getX","getY","nodeSize","Float64Array","IndexArrayType","Uint16Array","Uint32Array","ids","coords","range","minX","minY","maxX","maxY","within","stack","axis","pop","floor","nextAxis","sortKD","select","inc","exp","sd","min","swapItem","swap","arr","tmp","qx","qy","r2","sqDist","bx","by","dx","dy","NOT_FOUND","defaultEqualityCheck","defaultMemoize","equalityCheckOrOptions","providedOptions","equalityCheck","_providedOptions$equa","_providedOptions$maxS","maxSize","resultEqualityCheck","comparator","prev","createCacheKeyComparator","entry","put","getEntries","createSingletonCache","cacheIndex","findIndex","splice","unshift","createLruCache","memoized","matchingEntry","find","clearCache","getDependencies","funcs","dependencies","every","dep","dependencyTypes","join","createSelectorCreator","memoize","_len","memoizeOptionsFromArgs","_key","createSelector","_len2","_key2","_lastResult","_recomputations","directlyPassedOptions","memoizeOptions","resultFunc","_directlyPassedOption","_directlyPassedOption2","finalMemoizeOptions","memoizedResultFunc","selector","params","assign","lastResult","recomputations","resetRecomputations","alea","require","xor128","xorwow","xorshift7","xor4096","tychei","sr","exports","define","Alea","seed","me","mash","h","charCodeAt","Mash","s0","s1","s2","impl","xg","prng","int32","double","quick","XorGen","strseed","init","pool","math","nodecrypto","startdenom","pow","significance","overflow","mask","seedrandom","callback","shortseed","mixkey","flatten","entropy","tostring","randomBytes","crypto","msCrypto","getRandomValues","browser","plugins","screen","autoseed","arc4","ARC4","g","S","pass","is_math_call","keylen","prop","typ","smear","stringseed","fromCharCode","ex","_defineProperty","defineProperty","enumerable","configurable","writable","proxyMarker","createEndpoint","releaseProxy","throwMarker","val","transferHandlers","canHandle","port1","port2","MessageChannel","expose","deserialize","port","start","createProxy","target","isError","ep","addEventListener","ev","argumentList","fromWireValue","returnValue","parent","reduce","rawValue","proxy","transfer","catch","then","wireValue","transferables","toWireValue","removeEventListener","closeEndPoint","endpoint","isMessagePort","throwIfProxyReleased","isReleased","isProxyReleased","Proxy","_target","requestResponseMessage","toString","_thisArg","rawArgumentList","last","processArguments","construct","processed","transferCache","WeakMap","handler","serializedValue","msg","fill","MAX_SAFE_INTEGER","l","ascending","NaN","ascendingBisect","bisector","bisectRight","bisectLeft","number","compare1","compare2","lo","hi","mid","descending","extent","valueof","Adder","_partials","_n","valueOf","identity","regroup","groups","InternMap","keyof","stop","ceil","e10","e5","e2","ticks","reverse","tickIncrement","isFinite","r0","round","r1","power","LN10","tickStep","step0","step1","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","format","trim","toLowerCase","rgbn","Rgb","rgba","hsla","hasOwnProperty","rgbConvert","opacity","rgb_formatHex","hex","rgb_formatRgb","isNaN","Hsl","hslConvert","hsl2rgb","m1","m2","channels","displayable","formatHsl","extend","A","B","C","D","E","ED","EB","BC_DA","cubehelixConvert","Cubehelix","bl","atan2","degrees","cubehelix","radians","cosh","sinh","factory","definition","Xn","Zn","t0","t1","t2","labConvert","Lab","Hcl","hcl2lab","rgb2lrgb","xyz2lab","lab2xyz","lrgb2rgb","hclConvert","hcl","locale","formatPrefix","thousands","grouping","currency","formatLocale","formatDecimalParts","toLocaleString","replace","toExponential","indexOf","coefficient","substring","numerals","prefixExponent","exponent","formatSpecifier","specifier","FormatSpecifier","align","sign","symbol","zero","comma","precision","i1","i0","toFixed","formatDecimal","toPrecision","formatRounded","formatPrefixAuto","toUpperCase","prefixes","formatGroup","call","currencyPrefix","currencySuffix","decimal","formatNumerals","percent","minus","nan","newFormat","formatTypes","suffix","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","formatTrim","lambda00","phi00","lambda0","cosPhi0","sinPhi0","areaRingSum","areaSum","areaStream","point","lineStart","lineEnd","polygonStart","areaRingStart","areaRingEnd","polygonEnd","areaRing","tau","sphere","areaPointFirst","areaPoint","lambda","phi","quarterPi","dLambda","sdLambda","adLambda","cosPhi","sinPhi","u","phi0","lambda1","phi1","p0","deltaSum","ranges","boundsStream","boundsPoint","boundsLineStart","boundsLineEnd","boundsRingPoint","boundsRingStart","boundsRingEnd","epsilon","linePoint","cartesian","normal","cartesianCross","equatorial","inflection","cartesianNormalizeInPlace","spherical","phii","lambdai","antimeridian","angle","rangeCompare","rangeContains","feature","merged","deltaMax","asin","pi","halfPi","atan","streamGeometry","geometry","streamGeometryType","streamObjectType","Feature","FeatureCollection","features","Sphere","Point","coordinates","MultiPoint","LineString","streamLine","MultiLineString","Polygon","streamPolygon","MultiPolygon","GeometryCollection","geometries","closed","coordinate","genericArray","nb","na","basis","v0","v1","v2","v3","t3","linear","hue","constant","gamma","nogamma","exponential","cubehelixGamma","colorCubehelix","cubehelixLong","setTime","isNumberArray","isView","rgbSpline","spline","colors","colorRgb","rgbGamma","rgbBasis","basisClosed","reA","reB","am","bm","bs","bi","q","one","date","numberArray","scheme","interpolateRgbBasis","ramp","warm","interpolateCubehelixLong","cool","magma","inferno","plasma","constants","unit","normalize","bimap","domain","interpolate","d0","d1","polymap","bisect","clamp","unknown","transformer","transform","untransform","piecewise","output","interpolateValue","rescale","clamper","interpolateNumber","_","from","rangeRound","interpolateRound","continuous","initRange","initInterpolator","interpolator","linearish","tickFormat","nice","prestep","maxIter","transformPow","transformSqrt","transformSquare","powish","k10","x0","x1","sequential","sequentialPow","precisionPrefix","precisionRound","precisionFixed","timeFormat","timeParse","dateTime","periods","days","shortDays","months","shortMonths","utcFormat","utcParse","localDate","H","M","L","setFullYear","utcDate","UTC","setUTCFullYear","newDate","locale_dateTime","locale_date","locale_time","locale_periods","locale_weekdays","locale_shortWeekdays","locale_months","locale_shortMonths","periodRe","formatRe","periodLookup","formatLookup","weekdayRe","weekdayLookup","shortWeekdayRe","shortWeekdayLookup","monthRe","monthLookup","shortMonthRe","shortMonthLookup","formats","getDay","getMonth","formatDayOfMonth","formatMicroseconds","formatYearISO","formatFullYearISO","formatHour24","formatHour12","formatDayOfYear","formatMilliseconds","formatMonthNumber","formatMinutes","getHours","formatUnixTimestamp","formatUnixTimestampSeconds","formatSeconds","formatWeekdayNumberMonday","formatWeekNumberSunday","formatWeekNumberISO","formatWeekdayNumberSunday","formatWeekNumberMonday","formatYear","formatFullYear","formatZone","formatLiteralPercent","utcFormats","getUTCDay","getUTCMonth","formatUTCDayOfMonth","formatUTCMicroseconds","formatUTCYearISO","formatUTCFullYearISO","formatUTCHour24","formatUTCHour12","formatUTCDayOfYear","formatUTCMilliseconds","formatUTCMonthNumber","formatUTCMinutes","getUTCHours","formatUTCSeconds","formatUTCWeekdayNumberMonday","formatUTCWeekNumberSunday","formatUTCWeekNumberISO","formatUTCWeekdayNumberSunday","formatUTCWeekNumberMonday","formatUTCYear","formatUTCFullYear","formatUTCZone","parses","parseSpecifier","parseDayOfMonth","parseMicroseconds","parseYear","parseFullYear","parseHour24","parseDayOfYear","parseMilliseconds","parseMonthNumber","parseMinutes","parseQuarter","parseUnixTimestamp","parseUnixTimestampSeconds","parseSeconds","parseWeekdayNumberMonday","parseWeekNumberSunday","parseWeekNumberISO","parseWeekdayNumberSunday","parseWeekNumberMonday","parseZone","parseLiteralPercent","pad","pads","charAt","newParse","week","day","Q","V","utcMonday","utcDay","getUTCFullYear","getUTCDate","timeMonday","timeDay","getFullYear","getDate","W","U","numberRe","percentRe","requoteRe","requote","names","timeYear","getMilliseconds","getMinutes","getSeconds","timeSunday","dISO","timeThursday","getTimezoneOffset","utcYear","getUTCMilliseconds","getUTCMinutes","getUTCSeconds","dow","utcSunday","UTCdISO","utcThursday","interval","setHours","setDate","durationMinute","durationDay","durationSecond","durationHour","durationWeek","hour","newInterval","floori","offseti","previous","filter","minute","month","setMonth","second","setUTCHours","setUTCDate","utcWeekday","utcTuesday","utcWednesday","utcFriday","utcSaturday","setUTCMonth","weekday","sunday","monday","tuesday","wednesday","thursday","friday","saturday","year","super","defineProperties","_intern","intern_get","intern_set","delete","intern_delete"],"sourceRoot":""}