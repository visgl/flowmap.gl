function PS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var co=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function IS(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var ow={exports:{}},Ff={},aw={exports:{}},et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kl=Symbol.for("react.element"),RS=Symbol.for("react.portal"),OS=Symbol.for("react.fragment"),DS=Symbol.for("react.strict_mode"),FS=Symbol.for("react.profiler"),BS=Symbol.for("react.provider"),NS=Symbol.for("react.context"),US=Symbol.for("react.forward_ref"),zS=Symbol.for("react.suspense"),VS=Symbol.for("react.memo"),jS=Symbol.for("react.lazy"),I1=Symbol.iterator;function GS(t){return t===null||typeof t!="object"?null:(t=I1&&t[I1]||t["@@iterator"],typeof t=="function"?t:null)}var Aw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lw=Object.assign,uw={};function Za(t,e,n){this.props=t,this.context=e,this.refs=uw,this.updater=n||Aw}Za.prototype.isReactComponent={};Za.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Za.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cw(){}cw.prototype=Za.prototype;function Kg(t,e,n){this.props=t,this.context=e,this.refs=uw,this.updater=n||Aw}var qg=Kg.prototype=new cw;qg.constructor=Kg;lw(qg,Za.prototype);qg.isPureReactComponent=!0;var R1=Array.isArray,fw=Object.prototype.hasOwnProperty,Jg={current:null},hw={key:!0,ref:!0,__self:!0,__source:!0};function dw(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)fw.call(e,r)&&!hw.hasOwnProperty(r)&&(i[r]=e[r]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var h=Array(c),p=0;p<c;p++)h[p]=arguments[p+2];i.children=h}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:Kl,type:t,key:s,ref:o,props:i,_owner:Jg.current}}function HS(t,e){return{$$typeof:Kl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ep(t){return typeof t=="object"&&t!==null&&t.$$typeof===Kl}function WS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var O1=/\/+/g;function N0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?WS(""+t.key):e.toString(36)}function hc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Kl:case RS:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+N0(o,0):r,R1(i)?(n="",t!=null&&(n=t.replace(O1,"$&/")+"/"),hc(i,e,n,"",function(p){return p})):i!=null&&(ep(i)&&(i=HS(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(O1,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",R1(t))for(var c=0;c<t.length;c++){s=t[c];var h=r+N0(s,c);o+=hc(s,e,n,h,i)}else if(h=GS(t),typeof h=="function")for(t=h.call(t),c=0;!(s=t.next()).done;)s=s.value,h=r+N0(s,c++),o+=hc(s,e,n,h,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ru(t,e,n){if(t==null)return t;var r=[],i=0;return hc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function QS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Bn={current:null},dc={transition:null},YS={ReactCurrentDispatcher:Bn,ReactCurrentBatchConfig:dc,ReactCurrentOwner:Jg};et.Children={map:Ru,forEach:function(t,e,n){Ru(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ru(t,function(){e++}),e},toArray:function(t){return Ru(t,function(e){return e})||[]},only:function(t){if(!ep(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};et.Component=Za;et.Fragment=OS;et.Profiler=FS;et.PureComponent=Kg;et.StrictMode=DS;et.Suspense=zS;et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YS;et.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=lw({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Jg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(h in e)fw.call(e,h)&&!hw.hasOwnProperty(h)&&(r[h]=e[h]===void 0&&c!==void 0?c[h]:e[h])}var h=arguments.length-2;if(h===1)r.children=n;else if(1<h){c=Array(h);for(var p=0;p<h;p++)c[p]=arguments[p+2];r.children=c}return{$$typeof:Kl,type:t.type,key:i,ref:s,props:r,_owner:o}};et.createContext=function(t){return t={$$typeof:NS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:BS,_context:t},t.Consumer=t};et.createElement=dw;et.createFactory=function(t){var e=dw.bind(null,t);return e.type=t,e};et.createRef=function(){return{current:null}};et.forwardRef=function(t){return{$$typeof:US,render:t}};et.isValidElement=ep;et.lazy=function(t){return{$$typeof:jS,_payload:{_status:-1,_result:t},_init:QS}};et.memo=function(t,e){return{$$typeof:VS,type:t,compare:e===void 0?null:e}};et.startTransition=function(t){var e=dc.transition;dc.transition={};try{t()}finally{dc.transition=e}};et.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};et.useCallback=function(t,e){return Bn.current.useCallback(t,e)};et.useContext=function(t){return Bn.current.useContext(t)};et.useDebugValue=function(){};et.useDeferredValue=function(t){return Bn.current.useDeferredValue(t)};et.useEffect=function(t,e){return Bn.current.useEffect(t,e)};et.useId=function(){return Bn.current.useId()};et.useImperativeHandle=function(t,e,n){return Bn.current.useImperativeHandle(t,e,n)};et.useInsertionEffect=function(t,e){return Bn.current.useInsertionEffect(t,e)};et.useLayoutEffect=function(t,e){return Bn.current.useLayoutEffect(t,e)};et.useMemo=function(t,e){return Bn.current.useMemo(t,e)};et.useReducer=function(t,e,n){return Bn.current.useReducer(t,e,n)};et.useRef=function(t){return Bn.current.useRef(t)};et.useState=function(t){return Bn.current.useState(t)};et.useSyncExternalStore=function(t,e,n){return Bn.current.useSyncExternalStore(t,e,n)};et.useTransition=function(){return Bn.current.useTransition()};et.version="18.2.0";aw.exports=et;var pe=aw.exports;const $S=kS(pe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XS=pe,ZS=Symbol.for("react.element"),KS=Symbol.for("react.fragment"),qS=Object.prototype.hasOwnProperty,JS=XS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,e6={key:!0,ref:!0,__self:!0,__source:!0};function gw(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)qS.call(e,r)&&!e6.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:ZS,type:t,key:s,ref:o,props:i,_owner:JS.current}}Ff.Fragment=KS;Ff.jsx=gw;Ff.jsxs=gw;ow.exports=Ff;var Tn=ow.exports,fd={},pw={exports:{}},cr={},mw={exports:{}},vw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(me,Le){var Ge=me.length;me.push(Le);e:for(;0<Ge;){var dt=Ge-1>>>1,lt=me[dt];if(0<i(lt,Le))me[dt]=Le,me[Ge]=lt,Ge=dt;else break e}}function n(me){return me.length===0?null:me[0]}function r(me){if(me.length===0)return null;var Le=me[0],Ge=me.pop();if(Ge!==Le){me[0]=Ge;e:for(var dt=0,lt=me.length,Lr=lt>>>1;dt<Lr;){var Ln=2*(dt+1)-1,gi=me[Ln],zn=Ln+1,xt=me[zn];if(0>i(gi,Ge))zn<lt&&0>i(xt,gi)?(me[dt]=xt,me[zn]=Ge,dt=zn):(me[dt]=gi,me[Ln]=Ge,dt=Ln);else if(zn<lt&&0>i(xt,Ge))me[dt]=xt,me[zn]=Ge,dt=zn;else break e}}return Le}function i(me,Le){var Ge=me.sortIndex-Le.sortIndex;return Ge!==0?Ge:me.id-Le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var h=[],p=[],_=1,y=null,w=3,T=!1,S=!1,k=!1,U=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(me){for(var Le=n(p);Le!==null;){if(Le.callback===null)r(p);else if(Le.startTime<=me)r(p),Le.sortIndex=Le.expirationTime,e(h,Le);else break;Le=n(p)}}function B(me){if(k=!1,P(me),!S)if(n(h)!==null)S=!0,Be(z);else{var Le=n(p);Le!==null&&gt(B,Le.startTime-me)}}function z(me,Le){S=!1,k&&(k=!1,x(Q),Q=-1),T=!0;var Ge=w;try{for(P(Le),y=n(h);y!==null&&(!(y.expirationTime>Le)||me&&!ne());){var dt=y.callback;if(typeof dt=="function"){y.callback=null,w=y.priorityLevel;var lt=dt(y.expirationTime<=Le);Le=t.unstable_now(),typeof lt=="function"?y.callback=lt:y===n(h)&&r(h),P(Le)}else r(h);y=n(h)}if(y!==null)var Lr=!0;else{var Ln=n(p);Ln!==null&&gt(B,Ln.startTime-Le),Lr=!1}return Lr}finally{y=null,w=Ge,T=!1}}var H=!1,X=null,Q=-1,te=5,ie=-1;function ne(){return!(t.unstable_now()-ie<te)}function fe(){if(X!==null){var me=t.unstable_now();ie=me;var Le=!0;try{Le=X(!0,me)}finally{Le?ce():(H=!1,X=null)}}else H=!1}var ce;if(typeof C=="function")ce=function(){C(fe)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,Pe=xe.port2;xe.port1.onmessage=fe,ce=function(){Pe.postMessage(null)}}else ce=function(){U(fe,0)};function Be(me){X=me,H||(H=!0,ce())}function gt(me,Le){Q=U(function(){me(t.unstable_now())},Le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(me){me.callback=null},t.unstable_continueExecution=function(){S||T||(S=!0,Be(z))},t.unstable_forceFrameRate=function(me){0>me||125<me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<me?Math.floor(1e3/me):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(me){switch(w){case 1:case 2:case 3:var Le=3;break;default:Le=w}var Ge=w;w=Le;try{return me()}finally{w=Ge}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(me,Le){switch(me){case 1:case 2:case 3:case 4:case 5:break;default:me=3}var Ge=w;w=me;try{return Le()}finally{w=Ge}},t.unstable_scheduleCallback=function(me,Le,Ge){var dt=t.unstable_now();switch(typeof Ge=="object"&&Ge!==null?(Ge=Ge.delay,Ge=typeof Ge=="number"&&0<Ge?dt+Ge:dt):Ge=dt,me){case 1:var lt=-1;break;case 2:lt=250;break;case 5:lt=1073741823;break;case 4:lt=1e4;break;default:lt=5e3}return lt=Ge+lt,me={id:_++,callback:Le,priorityLevel:me,startTime:Ge,expirationTime:lt,sortIndex:-1},Ge>dt?(me.sortIndex=Ge,e(p,me),n(h)===null&&me===n(p)&&(k?(x(Q),Q=-1):k=!0,gt(B,Ge-dt))):(me.sortIndex=lt,e(h,me),S||T||(S=!0,Be(z))),me},t.unstable_shouldYield=ne,t.unstable_wrapCallback=function(me){var Le=w;return function(){var Ge=w;w=Le;try{return me.apply(this,arguments)}finally{w=Ge}}}})(vw);mw.exports=vw;var t6=mw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yw=pe,lr=t6;function ue(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _w=new Set,ml={};function fo(t,e){Sa(t,e),Sa(t+"Capture",e)}function Sa(t,e){for(ml[t]=e,t=0;t<e.length;t++)_w.add(e[t])}var Mi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hd=Object.prototype.hasOwnProperty,n6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,D1={},F1={};function r6(t){return hd.call(F1,t)?!0:hd.call(D1,t)?!1:n6.test(t)?F1[t]=!0:(D1[t]=!0,!1)}function i6(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function s6(t,e,n,r){if(e===null||typeof e>"u"||i6(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var hn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){hn[t]=new Nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];hn[e]=new Nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){hn[t]=new Nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){hn[t]=new Nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){hn[t]=new Nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){hn[t]=new Nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){hn[t]=new Nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){hn[t]=new Nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){hn[t]=new Nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var tp=/[\-:]([a-z])/g;function np(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(tp,np);hn[e]=new Nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(tp,np);hn[e]=new Nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(tp,np);hn[e]=new Nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){hn[t]=new Nn(t,1,!1,t.toLowerCase(),null,!1,!1)});hn.xlinkHref=new Nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){hn[t]=new Nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function rp(t,e,n,r){var i=hn.hasOwnProperty(e)?hn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(s6(e,n,i,r)&&(n=null),r||i===null?r6(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Bi=yw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ou=Symbol.for("react.element"),$o=Symbol.for("react.portal"),Xo=Symbol.for("react.fragment"),ip=Symbol.for("react.strict_mode"),dd=Symbol.for("react.profiler"),ww=Symbol.for("react.provider"),bw=Symbol.for("react.context"),sp=Symbol.for("react.forward_ref"),gd=Symbol.for("react.suspense"),pd=Symbol.for("react.suspense_list"),op=Symbol.for("react.memo"),ts=Symbol.for("react.lazy"),Ew=Symbol.for("react.offscreen"),B1=Symbol.iterator;function SA(t){return t===null||typeof t!="object"?null:(t=B1&&t[B1]||t["@@iterator"],typeof t=="function"?t:null)}var It=Object.assign,U0;function $A(t){if(U0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);U0=e&&e[1]||""}return`
`+U0+t}var z0=!1;function V0(t,e){if(!t||z0)return"";z0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var r=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){r=p}t.call(e.prototype)}else{try{throw Error()}catch(p){r=p}t()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var i=p.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,c=s.length-1;1<=o&&0<=c&&i[o]!==s[c];)c--;for(;1<=o&&0<=c;o--,c--)if(i[o]!==s[c]){if(o!==1||c!==1)do if(o--,c--,0>c||i[o]!==s[c]){var h=`
`+i[o].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=o&&0<=c);break}}}finally{z0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?$A(t):""}function o6(t){switch(t.tag){case 5:return $A(t.type);case 16:return $A("Lazy");case 13:return $A("Suspense");case 19:return $A("SuspenseList");case 0:case 2:case 15:return t=V0(t.type,!1),t;case 11:return t=V0(t.type.render,!1),t;case 1:return t=V0(t.type,!0),t;default:return""}}function md(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xo:return"Fragment";case $o:return"Portal";case dd:return"Profiler";case ip:return"StrictMode";case gd:return"Suspense";case pd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case bw:return(t.displayName||"Context")+".Consumer";case ww:return(t._context.displayName||"Context")+".Provider";case sp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case op:return e=t.displayName||null,e!==null?e:md(t.type)||"Memo";case ts:e=t._payload,t=t._init;try{return md(t(e))}catch{}}return null}function a6(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return md(e);case 8:return e===ip?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Tw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function A6(t){var e=Tw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Du(t){t._valueTracker||(t._valueTracker=A6(t))}function xw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Tw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Oc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vd(t,e){var n=e.checked;return It({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function N1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=bs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Sw(t,e){e=e.checked,e!=null&&rp(t,"checked",e,!1)}function yd(t,e){Sw(t,e);var n=bs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_d(t,e.type,n):e.hasOwnProperty("defaultValue")&&_d(t,e.type,bs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function U1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _d(t,e,n){(e!=="number"||Oc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var XA=Array.isArray;function fa(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+bs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function wd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ue(91));return It({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function z1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ue(92));if(XA(n)){if(1<n.length)throw Error(ue(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:bs(n)}}function Cw(t,e){var n=bs(e.value),r=bs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function V1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Mw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Mw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Fu,Lw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Fu=Fu||document.createElement("div"),Fu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function vl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var tl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},l6=["Webkit","ms","Moz","O"];Object.keys(tl).forEach(function(t){l6.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),tl[e]=tl[t]})});function Pw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||tl.hasOwnProperty(t)&&tl[t]?(""+e).trim():e+"px"}function kw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Pw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var u6=It({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ed(t,e){if(e){if(u6[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ue(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ue(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ue(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ue(62))}}function Td(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xd=null;function ap(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Sd=null,ha=null,da=null;function j1(t){if(t=eu(t)){if(typeof Sd!="function")throw Error(ue(280));var e=t.stateNode;e&&(e=Vf(e),Sd(t.stateNode,t.type,e))}}function Iw(t){ha?da?da.push(t):da=[t]:ha=t}function Rw(){if(ha){var t=ha,e=da;if(da=ha=null,j1(t),e)for(t=0;t<e.length;t++)j1(e[t])}}function Ow(t,e){return t(e)}function Dw(){}var j0=!1;function Fw(t,e,n){if(j0)return t(e,n);j0=!0;try{return Ow(t,e,n)}finally{j0=!1,(ha!==null||da!==null)&&(Dw(),Rw())}}function yl(t,e){var n=t.stateNode;if(n===null)return null;var r=Vf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ue(231,e,typeof n));return n}var Cd=!1;if(Mi)try{var CA={};Object.defineProperty(CA,"passive",{get:function(){Cd=!0}}),window.addEventListener("test",CA,CA),window.removeEventListener("test",CA,CA)}catch{Cd=!1}function c6(t,e,n,r,i,s,o,c,h){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(_){this.onError(_)}}var nl=!1,Dc=null,Fc=!1,Md=null,f6={onError:function(t){nl=!0,Dc=t}};function h6(t,e,n,r,i,s,o,c,h){nl=!1,Dc=null,c6.apply(f6,arguments)}function d6(t,e,n,r,i,s,o,c,h){if(h6.apply(this,arguments),nl){if(nl){var p=Dc;nl=!1,Dc=null}else throw Error(ue(198));Fc||(Fc=!0,Md=p)}}function ho(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Bw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function G1(t){if(ho(t)!==t)throw Error(ue(188))}function g6(t){var e=t.alternate;if(!e){if(e=ho(t),e===null)throw Error(ue(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return G1(i),t;if(s===r)return G1(i),e;s=s.sibling}throw Error(ue(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o){for(c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o)throw Error(ue(189))}}if(n.alternate!==r)throw Error(ue(190))}if(n.tag!==3)throw Error(ue(188));return n.stateNode.current===n?t:e}function Nw(t){return t=g6(t),t!==null?Uw(t):null}function Uw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Uw(t);if(e!==null)return e;t=t.sibling}return null}var zw=lr.unstable_scheduleCallback,H1=lr.unstable_cancelCallback,p6=lr.unstable_shouldYield,m6=lr.unstable_requestPaint,jt=lr.unstable_now,v6=lr.unstable_getCurrentPriorityLevel,Ap=lr.unstable_ImmediatePriority,Vw=lr.unstable_UserBlockingPriority,Bc=lr.unstable_NormalPriority,y6=lr.unstable_LowPriority,jw=lr.unstable_IdlePriority,Bf=null,ii=null;function _6(t){if(ii&&typeof ii.onCommitFiberRoot=="function")try{ii.onCommitFiberRoot(Bf,t,void 0,(t.current.flags&128)===128)}catch{}}var zr=Math.clz32?Math.clz32:E6,w6=Math.log,b6=Math.LN2;function E6(t){return t>>>=0,t===0?32:31-(w6(t)/b6|0)|0}var Bu=64,Nu=4194304;function ZA(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Nc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~i;c!==0?r=ZA(c):(s&=o,s!==0&&(r=ZA(s)))}else o=n&~i,o!==0?r=ZA(o):s!==0&&(r=ZA(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zr(e),i=1<<n,r|=t[n],e&=~i;return r}function T6(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function x6(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-zr(s),c=1<<o,h=i[o];h===-1?(!(c&n)||c&r)&&(i[o]=T6(c,e)):h<=e&&(t.expiredLanes|=c),s&=~c}}function Ld(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Gw(){var t=Bu;return Bu<<=1,!(Bu&4194240)&&(Bu=64),t}function G0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ql(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zr(e),t[e]=n}function S6(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-zr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function lp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ht=0;function Hw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ww,up,Qw,Yw,$w,Pd=!1,Uu=[],fs=null,hs=null,ds=null,_l=new Map,wl=new Map,ss=[],C6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function W1(t,e){switch(t){case"focusin":case"focusout":fs=null;break;case"dragenter":case"dragleave":hs=null;break;case"mouseover":case"mouseout":ds=null;break;case"pointerover":case"pointerout":_l.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wl.delete(e.pointerId)}}function MA(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=eu(e),e!==null&&up(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function M6(t,e,n,r,i){switch(e){case"focusin":return fs=MA(fs,t,e,n,r,i),!0;case"dragenter":return hs=MA(hs,t,e,n,r,i),!0;case"mouseover":return ds=MA(ds,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return _l.set(s,MA(_l.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,wl.set(s,MA(wl.get(s)||null,t,e,n,r,i)),!0}return!1}function Xw(t){var e=Hs(t.target);if(e!==null){var n=ho(e);if(n!==null){if(e=n.tag,e===13){if(e=Bw(n),e!==null){t.blockedOn=e,$w(t.priority,function(){Qw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function gc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=kd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);xd=r,n.target.dispatchEvent(r),xd=null}else return e=eu(n),e!==null&&up(e),t.blockedOn=n,!1;e.shift()}return!0}function Q1(t,e,n){gc(t)&&n.delete(e)}function L6(){Pd=!1,fs!==null&&gc(fs)&&(fs=null),hs!==null&&gc(hs)&&(hs=null),ds!==null&&gc(ds)&&(ds=null),_l.forEach(Q1),wl.forEach(Q1)}function LA(t,e){t.blockedOn===e&&(t.blockedOn=null,Pd||(Pd=!0,lr.unstable_scheduleCallback(lr.unstable_NormalPriority,L6)))}function bl(t){function e(i){return LA(i,t)}if(0<Uu.length){LA(Uu[0],t);for(var n=1;n<Uu.length;n++){var r=Uu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(fs!==null&&LA(fs,t),hs!==null&&LA(hs,t),ds!==null&&LA(ds,t),_l.forEach(e),wl.forEach(e),n=0;n<ss.length;n++)r=ss[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ss.length&&(n=ss[0],n.blockedOn===null);)Xw(n),n.blockedOn===null&&ss.shift()}var ga=Bi.ReactCurrentBatchConfig,Uc=!0;function P6(t,e,n,r){var i=ht,s=ga.transition;ga.transition=null;try{ht=1,cp(t,e,n,r)}finally{ht=i,ga.transition=s}}function k6(t,e,n,r){var i=ht,s=ga.transition;ga.transition=null;try{ht=4,cp(t,e,n,r)}finally{ht=i,ga.transition=s}}function cp(t,e,n,r){if(Uc){var i=kd(t,e,n,r);if(i===null)J0(t,e,r,zc,n),W1(t,r);else if(M6(i,t,e,n,r))r.stopPropagation();else if(W1(t,r),e&4&&-1<C6.indexOf(t)){for(;i!==null;){var s=eu(i);if(s!==null&&Ww(s),s=kd(t,e,n,r),s===null&&J0(t,e,r,zc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else J0(t,e,r,null,n)}}var zc=null;function kd(t,e,n,r){if(zc=null,t=ap(r),t=Hs(t),t!==null)if(e=ho(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Bw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return zc=t,null}function Zw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(v6()){case Ap:return 1;case Vw:return 4;case Bc:case y6:return 16;case jw:return 536870912;default:return 16}default:return 16}}var as=null,fp=null,pc=null;function Kw(){if(pc)return pc;var t,e=fp,n=e.length,r,i="value"in as?as.value:as.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return pc=i.slice(t,1<r?1-r:void 0)}function mc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zu(){return!0}function Y1(){return!1}function fr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(s):s[c]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?zu:Y1,this.isPropagationStopped=Y1,this}return It(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zu)},persist:function(){},isPersistent:zu}),e}var Ka={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hp=fr(Ka),Jl=It({},Ka,{view:0,detail:0}),I6=fr(Jl),H0,W0,PA,Nf=It({},Jl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==PA&&(PA&&t.type==="mousemove"?(H0=t.screenX-PA.screenX,W0=t.screenY-PA.screenY):W0=H0=0,PA=t),H0)},movementY:function(t){return"movementY"in t?t.movementY:W0}}),$1=fr(Nf),R6=It({},Nf,{dataTransfer:0}),O6=fr(R6),D6=It({},Jl,{relatedTarget:0}),Q0=fr(D6),F6=It({},Ka,{animationName:0,elapsedTime:0,pseudoElement:0}),B6=fr(F6),N6=It({},Ka,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),U6=fr(N6),z6=It({},Ka,{data:0}),X1=fr(z6),V6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},j6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},G6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function H6(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=G6[t])?!!e[t]:!1}function dp(){return H6}var W6=It({},Jl,{key:function(t){if(t.key){var e=V6[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=mc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?j6[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dp,charCode:function(t){return t.type==="keypress"?mc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?mc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Q6=fr(W6),Y6=It({},Nf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Z1=fr(Y6),$6=It({},Jl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dp}),X6=fr($6),Z6=It({},Ka,{propertyName:0,elapsedTime:0,pseudoElement:0}),K6=fr(Z6),q6=It({},Nf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),J6=fr(q6),eC=[9,13,27,32],gp=Mi&&"CompositionEvent"in window,rl=null;Mi&&"documentMode"in document&&(rl=document.documentMode);var tC=Mi&&"TextEvent"in window&&!rl,qw=Mi&&(!gp||rl&&8<rl&&11>=rl),K1=" ",q1=!1;function Jw(t,e){switch(t){case"keyup":return eC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zo=!1;function nC(t,e){switch(t){case"compositionend":return eb(e);case"keypress":return e.which!==32?null:(q1=!0,K1);case"textInput":return t=e.data,t===K1&&q1?null:t;default:return null}}function rC(t,e){if(Zo)return t==="compositionend"||!gp&&Jw(t,e)?(t=Kw(),pc=fp=as=null,Zo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qw&&e.locale!=="ko"?null:e.data;default:return null}}var iC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function J1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!iC[t.type]:e==="textarea"}function tb(t,e,n,r){Iw(r),e=Vc(e,"onChange"),0<e.length&&(n=new hp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var il=null,El=null;function sC(t){fb(t,0)}function Uf(t){var e=Jo(t);if(xw(e))return t}function oC(t,e){if(t==="change")return e}var nb=!1;if(Mi){var Y0;if(Mi){var $0="oninput"in document;if(!$0){var e2=document.createElement("div");e2.setAttribute("oninput","return;"),$0=typeof e2.oninput=="function"}Y0=$0}else Y0=!1;nb=Y0&&(!document.documentMode||9<document.documentMode)}function t2(){il&&(il.detachEvent("onpropertychange",rb),El=il=null)}function rb(t){if(t.propertyName==="value"&&Uf(El)){var e=[];tb(e,El,t,ap(t)),Fw(sC,e)}}function aC(t,e,n){t==="focusin"?(t2(),il=e,El=n,il.attachEvent("onpropertychange",rb)):t==="focusout"&&t2()}function AC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Uf(El)}function lC(t,e){if(t==="click")return Uf(e)}function uC(t,e){if(t==="input"||t==="change")return Uf(e)}function cC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gr=typeof Object.is=="function"?Object.is:cC;function Tl(t,e){if(Gr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!hd.call(e,i)||!Gr(t[i],e[i]))return!1}return!0}function n2(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function r2(t,e){var n=n2(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=n2(n)}}function ib(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ib(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sb(){for(var t=window,e=Oc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Oc(t.document)}return e}function pp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fC(t){var e=sb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ib(n.ownerDocument.documentElement,n)){if(r!==null&&pp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=r2(n,s);var o=r2(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var hC=Mi&&"documentMode"in document&&11>=document.documentMode,Ko=null,Id=null,sl=null,Rd=!1;function i2(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rd||Ko==null||Ko!==Oc(r)||(r=Ko,"selectionStart"in r&&pp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sl&&Tl(sl,r)||(sl=r,r=Vc(Id,"onSelect"),0<r.length&&(e=new hp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ko)))}function Vu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qo={animationend:Vu("Animation","AnimationEnd"),animationiteration:Vu("Animation","AnimationIteration"),animationstart:Vu("Animation","AnimationStart"),transitionend:Vu("Transition","TransitionEnd")},X0={},ob={};Mi&&(ob=document.createElement("div").style,"AnimationEvent"in window||(delete qo.animationend.animation,delete qo.animationiteration.animation,delete qo.animationstart.animation),"TransitionEvent"in window||delete qo.transitionend.transition);function zf(t){if(X0[t])return X0[t];if(!qo[t])return t;var e=qo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ob)return X0[t]=e[n];return t}var ab=zf("animationend"),Ab=zf("animationiteration"),lb=zf("animationstart"),ub=zf("transitionend"),cb=new Map,s2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ss(t,e){cb.set(t,e),fo(e,[t])}for(var Z0=0;Z0<s2.length;Z0++){var K0=s2[Z0],dC=K0.toLowerCase(),gC=K0[0].toUpperCase()+K0.slice(1);Ss(dC,"on"+gC)}Ss(ab,"onAnimationEnd");Ss(Ab,"onAnimationIteration");Ss(lb,"onAnimationStart");Ss("dblclick","onDoubleClick");Ss("focusin","onFocus");Ss("focusout","onBlur");Ss(ub,"onTransitionEnd");Sa("onMouseEnter",["mouseout","mouseover"]);Sa("onMouseLeave",["mouseout","mouseover"]);Sa("onPointerEnter",["pointerout","pointerover"]);Sa("onPointerLeave",["pointerout","pointerover"]);fo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fo("onBeforeInput",["compositionend","keypress","textInput","paste"]);fo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var KA="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pC=new Set("cancel close invalid load scroll toggle".split(" ").concat(KA));function o2(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,d6(r,e,void 0,t),t.currentTarget=null}function fb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],h=c.instance,p=c.currentTarget;if(c=c.listener,h!==s&&i.isPropagationStopped())break e;o2(i,c,p),s=h}else for(o=0;o<r.length;o++){if(c=r[o],h=c.instance,p=c.currentTarget,c=c.listener,h!==s&&i.isPropagationStopped())break e;o2(i,c,p),s=h}}}if(Fc)throw t=Md,Fc=!1,Md=null,t}function Et(t,e){var n=e[Nd];n===void 0&&(n=e[Nd]=new Set);var r=t+"__bubble";n.has(r)||(hb(e,t,2,!1),n.add(r))}function q0(t,e,n){var r=0;e&&(r|=4),hb(n,t,r,e)}var ju="_reactListening"+Math.random().toString(36).slice(2);function xl(t){if(!t[ju]){t[ju]=!0,_w.forEach(function(n){n!=="selectionchange"&&(pC.has(n)||q0(n,!1,t),q0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ju]||(e[ju]=!0,q0("selectionchange",!1,e))}}function hb(t,e,n,r){switch(Zw(e)){case 1:var i=P6;break;case 4:i=k6;break;default:i=cp}n=i.bind(null,e,n,t),i=void 0,!Cd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function J0(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var h=o.tag;if((h===3||h===4)&&(h=o.stateNode.containerInfo,h===i||h.nodeType===8&&h.parentNode===i))return;o=o.return}for(;c!==null;){if(o=Hs(c),o===null)return;if(h=o.tag,h===5||h===6){r=s=o;continue e}c=c.parentNode}}r=r.return}Fw(function(){var p=s,_=ap(n),y=[];e:{var w=cb.get(t);if(w!==void 0){var T=hp,S=t;switch(t){case"keypress":if(mc(n)===0)break e;case"keydown":case"keyup":T=Q6;break;case"focusin":S="focus",T=Q0;break;case"focusout":S="blur",T=Q0;break;case"beforeblur":case"afterblur":T=Q0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=$1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=O6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=X6;break;case ab:case Ab:case lb:T=B6;break;case ub:T=K6;break;case"scroll":T=I6;break;case"wheel":T=J6;break;case"copy":case"cut":case"paste":T=U6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Z1}var k=(e&4)!==0,U=!k&&t==="scroll",x=k?w!==null?w+"Capture":null:w;k=[];for(var C=p,P;C!==null;){P=C;var B=P.stateNode;if(P.tag===5&&B!==null&&(P=B,x!==null&&(B=yl(C,x),B!=null&&k.push(Sl(C,B,P)))),U)break;C=C.return}0<k.length&&(w=new T(w,S,null,n,_),y.push({event:w,listeners:k}))}}if(!(e&7)){e:{if(w=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",w&&n!==xd&&(S=n.relatedTarget||n.fromElement)&&(Hs(S)||S[Li]))break e;if((T||w)&&(w=_.window===_?_:(w=_.ownerDocument)?w.defaultView||w.parentWindow:window,T?(S=n.relatedTarget||n.toElement,T=p,S=S?Hs(S):null,S!==null&&(U=ho(S),S!==U||S.tag!==5&&S.tag!==6)&&(S=null)):(T=null,S=p),T!==S)){if(k=$1,B="onMouseLeave",x="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(k=Z1,B="onPointerLeave",x="onPointerEnter",C="pointer"),U=T==null?w:Jo(T),P=S==null?w:Jo(S),w=new k(B,C+"leave",T,n,_),w.target=U,w.relatedTarget=P,B=null,Hs(_)===p&&(k=new k(x,C+"enter",S,n,_),k.target=P,k.relatedTarget=U,B=k),U=B,T&&S)t:{for(k=T,x=S,C=0,P=k;P;P=Do(P))C++;for(P=0,B=x;B;B=Do(B))P++;for(;0<C-P;)k=Do(k),C--;for(;0<P-C;)x=Do(x),P--;for(;C--;){if(k===x||x!==null&&k===x.alternate)break t;k=Do(k),x=Do(x)}k=null}else k=null;T!==null&&a2(y,w,T,k,!1),S!==null&&U!==null&&a2(y,U,S,k,!0)}}e:{if(w=p?Jo(p):window,T=w.nodeName&&w.nodeName.toLowerCase(),T==="select"||T==="input"&&w.type==="file")var z=oC;else if(J1(w))if(nb)z=uC;else{z=AC;var H=aC}else(T=w.nodeName)&&T.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(z=lC);if(z&&(z=z(t,p))){tb(y,z,n,_);break e}H&&H(t,w,p),t==="focusout"&&(H=w._wrapperState)&&H.controlled&&w.type==="number"&&_d(w,"number",w.value)}switch(H=p?Jo(p):window,t){case"focusin":(J1(H)||H.contentEditable==="true")&&(Ko=H,Id=p,sl=null);break;case"focusout":sl=Id=Ko=null;break;case"mousedown":Rd=!0;break;case"contextmenu":case"mouseup":case"dragend":Rd=!1,i2(y,n,_);break;case"selectionchange":if(hC)break;case"keydown":case"keyup":i2(y,n,_)}var X;if(gp)e:{switch(t){case"compositionstart":var Q="onCompositionStart";break e;case"compositionend":Q="onCompositionEnd";break e;case"compositionupdate":Q="onCompositionUpdate";break e}Q=void 0}else Zo?Jw(t,n)&&(Q="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(Q="onCompositionStart");Q&&(qw&&n.locale!=="ko"&&(Zo||Q!=="onCompositionStart"?Q==="onCompositionEnd"&&Zo&&(X=Kw()):(as=_,fp="value"in as?as.value:as.textContent,Zo=!0)),H=Vc(p,Q),0<H.length&&(Q=new X1(Q,t,null,n,_),y.push({event:Q,listeners:H}),X?Q.data=X:(X=eb(n),X!==null&&(Q.data=X)))),(X=tC?nC(t,n):rC(t,n))&&(p=Vc(p,"onBeforeInput"),0<p.length&&(_=new X1("onBeforeInput","beforeinput",null,n,_),y.push({event:_,listeners:p}),_.data=X))}fb(y,e)})}function Sl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=yl(t,n),s!=null&&r.unshift(Sl(t,s,i)),s=yl(t,e),s!=null&&r.push(Sl(t,s,i))),t=t.return}return r}function Do(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function a2(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var c=n,h=c.alternate,p=c.stateNode;if(h!==null&&h===r)break;c.tag===5&&p!==null&&(c=p,i?(h=yl(n,s),h!=null&&o.unshift(Sl(n,h,c))):i||(h=yl(n,s),h!=null&&o.push(Sl(n,h,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var mC=/\r\n?/g,vC=/\u0000|\uFFFD/g;function A2(t){return(typeof t=="string"?t:""+t).replace(mC,`
`).replace(vC,"")}function Gu(t,e,n){if(e=A2(e),A2(t)!==e&&n)throw Error(ue(425))}function jc(){}var Od=null,Dd=null;function Fd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bd=typeof setTimeout=="function"?setTimeout:void 0,yC=typeof clearTimeout=="function"?clearTimeout:void 0,l2=typeof Promise=="function"?Promise:void 0,_C=typeof queueMicrotask=="function"?queueMicrotask:typeof l2<"u"?function(t){return l2.resolve(null).then(t).catch(wC)}:Bd;function wC(t){setTimeout(function(){throw t})}function eh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),bl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);bl(e)}function gs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function u2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qa=Math.random().toString(36).slice(2),ei="__reactFiber$"+qa,Cl="__reactProps$"+qa,Li="__reactContainer$"+qa,Nd="__reactEvents$"+qa,bC="__reactListeners$"+qa,EC="__reactHandles$"+qa;function Hs(t){var e=t[ei];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Li]||n[ei]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=u2(t);t!==null;){if(n=t[ei])return n;t=u2(t)}return e}t=n,n=t.parentNode}return null}function eu(t){return t=t[ei]||t[Li],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Jo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ue(33))}function Vf(t){return t[Cl]||null}var Ud=[],ea=-1;function Cs(t){return{current:t}}function Tt(t){0>ea||(t.current=Ud[ea],Ud[ea]=null,ea--)}function wt(t,e){ea++,Ud[ea]=t.current,t.current=e}var Es={},Mn=Cs(Es),$n=Cs(!1),Js=Es;function Ca(t,e){var n=t.type.contextTypes;if(!n)return Es;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Xn(t){return t=t.childContextTypes,t!=null}function Gc(){Tt($n),Tt(Mn)}function c2(t,e,n){if(Mn.current!==Es)throw Error(ue(168));wt(Mn,e),wt($n,n)}function db(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ue(108,a6(t)||"Unknown",i));return It({},n,r)}function Hc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Es,Js=Mn.current,wt(Mn,t),wt($n,$n.current),!0}function f2(t,e,n){var r=t.stateNode;if(!r)throw Error(ue(169));n?(t=db(t,e,Js),r.__reactInternalMemoizedMergedChildContext=t,Tt($n),Tt(Mn),wt(Mn,t)):Tt($n),wt($n,n)}var yi=null,jf=!1,th=!1;function gb(t){yi===null?yi=[t]:yi.push(t)}function TC(t){jf=!0,gb(t)}function Ms(){if(!th&&yi!==null){th=!0;var t=0,e=ht;try{var n=yi;for(ht=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}yi=null,jf=!1}catch(i){throw yi!==null&&(yi=yi.slice(t+1)),zw(Ap,Ms),i}finally{ht=e,th=!1}}return null}var ta=[],na=0,Wc=null,Qc=0,_r=[],wr=0,eo=null,Ei=1,Ti="";function zs(t,e){ta[na++]=Qc,ta[na++]=Wc,Wc=t,Qc=e}function pb(t,e,n){_r[wr++]=Ei,_r[wr++]=Ti,_r[wr++]=eo,eo=t;var r=Ei;t=Ti;var i=32-zr(r)-1;r&=~(1<<i),n+=1;var s=32-zr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ei=1<<32-zr(e)+i|n<<i|r,Ti=s+t}else Ei=1<<s|n<<i|r,Ti=t}function mp(t){t.return!==null&&(zs(t,1),pb(t,1,0))}function vp(t){for(;t===Wc;)Wc=ta[--na],ta[na]=null,Qc=ta[--na],ta[na]=null;for(;t===eo;)eo=_r[--wr],_r[wr]=null,Ti=_r[--wr],_r[wr]=null,Ei=_r[--wr],_r[wr]=null}var ar=null,or=null,Ct=!1,Fr=null;function mb(t,e){var n=br(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function h2(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ar=t,or=gs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ar=t,or=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=eo!==null?{id:Ei,overflow:Ti}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=br(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ar=t,or=null,!0):!1;default:return!1}}function zd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vd(t){if(Ct){var e=or;if(e){var n=e;if(!h2(t,e)){if(zd(t))throw Error(ue(418));e=gs(n.nextSibling);var r=ar;e&&h2(t,e)?mb(r,n):(t.flags=t.flags&-4097|2,Ct=!1,ar=t)}}else{if(zd(t))throw Error(ue(418));t.flags=t.flags&-4097|2,Ct=!1,ar=t}}}function d2(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ar=t}function Hu(t){if(t!==ar)return!1;if(!Ct)return d2(t),Ct=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Fd(t.type,t.memoizedProps)),e&&(e=or)){if(zd(t))throw vb(),Error(ue(418));for(;e;)mb(t,e),e=gs(e.nextSibling)}if(d2(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ue(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){or=gs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}or=null}}else or=ar?gs(t.stateNode.nextSibling):null;return!0}function vb(){for(var t=or;t;)t=gs(t.nextSibling)}function Ma(){or=ar=null,Ct=!1}function yp(t){Fr===null?Fr=[t]:Fr.push(t)}var xC=Bi.ReactCurrentBatchConfig;function Or(t,e){if(t&&t.defaultProps){e=It({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Yc=Cs(null),$c=null,ra=null,_p=null;function wp(){_p=ra=$c=null}function bp(t){var e=Yc.current;Tt(Yc),t._currentValue=e}function jd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function pa(t,e){$c=t,_p=ra=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yn=!0),t.firstContext=null)}function Cr(t){var e=t._currentValue;if(_p!==t)if(t={context:t,memoizedValue:e,next:null},ra===null){if($c===null)throw Error(ue(308));ra=t,$c.dependencies={lanes:0,firstContext:t}}else ra=ra.next=t;return e}var Ws=null;function Ep(t){Ws===null?Ws=[t]:Ws.push(t)}function yb(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ep(e)):(n.next=i.next,i.next=n),e.interleaved=n,Pi(t,r)}function Pi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ns=!1;function Tp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _b(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Si(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ps(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,st&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Pi(t,n)}return i=r.interleaved,i===null?(e.next=e,Ep(r)):(e.next=i.next,i.next=e),r.interleaved=e,Pi(t,n)}function vc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lp(t,n)}}function g2(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Xc(t,e,n,r){var i=t.updateQueue;ns=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var h=c,p=h.next;h.next=null,o===null?s=p:o.next=p,o=h;var _=t.alternate;_!==null&&(_=_.updateQueue,c=_.lastBaseUpdate,c!==o&&(c===null?_.firstBaseUpdate=p:c.next=p,_.lastBaseUpdate=h))}if(s!==null){var y=i.baseState;o=0,_=p=h=null,c=s;do{var w=c.lane,T=c.eventTime;if((r&w)===w){_!==null&&(_=_.next={eventTime:T,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var S=t,k=c;switch(w=e,T=n,k.tag){case 1:if(S=k.payload,typeof S=="function"){y=S.call(T,y,w);break e}y=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=k.payload,w=typeof S=="function"?S.call(T,y,w):S,w==null)break e;y=It({},y,w);break e;case 2:ns=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,w=i.effects,w===null?i.effects=[c]:w.push(c))}else T={eventTime:T,lane:w,tag:c.tag,payload:c.payload,callback:c.callback,next:null},_===null?(p=_=T,h=y):_=_.next=T,o|=w;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;w=c,c=w.next,w.next=null,i.lastBaseUpdate=w,i.shared.pending=null}}while(!0);if(_===null&&(h=y),i.baseState=h,i.firstBaseUpdate=p,i.lastBaseUpdate=_,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);no|=o,t.lanes=o,t.memoizedState=y}}function p2(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ue(191,i));i.call(r)}}}var wb=new yw.Component().refs;function Gd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:It({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Gf={isMounted:function(t){return(t=t._reactInternals)?ho(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Fn(),i=vs(t),s=Si(r,i);s.payload=e,n!=null&&(s.callback=n),e=ps(t,s,i),e!==null&&(Vr(e,t,i,r),vc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Fn(),i=vs(t),s=Si(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ps(t,s,i),e!==null&&(Vr(e,t,i,r),vc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Fn(),r=vs(t),i=Si(n,r);i.tag=2,e!=null&&(i.callback=e),e=ps(t,i,r),e!==null&&(Vr(e,t,r,n),vc(e,t,r))}};function m2(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Tl(n,r)||!Tl(i,s):!0}function bb(t,e,n){var r=!1,i=Es,s=e.contextType;return typeof s=="object"&&s!==null?s=Cr(s):(i=Xn(e)?Js:Mn.current,r=e.contextTypes,s=(r=r!=null)?Ca(t,i):Es),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Gf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function v2(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Gf.enqueueReplaceState(e,e.state,null)}function Hd(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=wb,Tp(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Cr(s):(s=Xn(e)?Js:Mn.current,i.context=Ca(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Gd(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Gf.enqueueReplaceState(i,i.state,null),Xc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function kA(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ue(309));var r=n.stateNode}if(!r)throw Error(ue(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var c=i.refs;c===wb&&(c=i.refs={}),o===null?delete c[s]:c[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ue(284));if(!n._owner)throw Error(ue(290,t))}return t}function Wu(t,e){throw t=Object.prototype.toString.call(e),Error(ue(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function y2(t){var e=t._init;return e(t._payload)}function Eb(t){function e(x,C){if(t){var P=x.deletions;P===null?(x.deletions=[C],x.flags|=16):P.push(C)}}function n(x,C){if(!t)return null;for(;C!==null;)e(x,C),C=C.sibling;return null}function r(x,C){for(x=new Map;C!==null;)C.key!==null?x.set(C.key,C):x.set(C.index,C),C=C.sibling;return x}function i(x,C){return x=ys(x,C),x.index=0,x.sibling=null,x}function s(x,C,P){return x.index=P,t?(P=x.alternate,P!==null?(P=P.index,P<C?(x.flags|=2,C):P):(x.flags|=2,C)):(x.flags|=1048576,C)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function c(x,C,P,B){return C===null||C.tag!==6?(C=Ah(P,x.mode,B),C.return=x,C):(C=i(C,P),C.return=x,C)}function h(x,C,P,B){var z=P.type;return z===Xo?_(x,C,P.props.children,B,P.key):C!==null&&(C.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===ts&&y2(z)===C.type)?(B=i(C,P.props),B.ref=kA(x,C,P),B.return=x,B):(B=Tc(P.type,P.key,P.props,null,x.mode,B),B.ref=kA(x,C,P),B.return=x,B)}function p(x,C,P,B){return C===null||C.tag!==4||C.stateNode.containerInfo!==P.containerInfo||C.stateNode.implementation!==P.implementation?(C=lh(P,x.mode,B),C.return=x,C):(C=i(C,P.children||[]),C.return=x,C)}function _(x,C,P,B,z){return C===null||C.tag!==7?(C=Zs(P,x.mode,B,z),C.return=x,C):(C=i(C,P),C.return=x,C)}function y(x,C,P){if(typeof C=="string"&&C!==""||typeof C=="number")return C=Ah(""+C,x.mode,P),C.return=x,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ou:return P=Tc(C.type,C.key,C.props,null,x.mode,P),P.ref=kA(x,null,C),P.return=x,P;case $o:return C=lh(C,x.mode,P),C.return=x,C;case ts:var B=C._init;return y(x,B(C._payload),P)}if(XA(C)||SA(C))return C=Zs(C,x.mode,P,null),C.return=x,C;Wu(x,C)}return null}function w(x,C,P,B){var z=C!==null?C.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return z!==null?null:c(x,C,""+P,B);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Ou:return P.key===z?h(x,C,P,B):null;case $o:return P.key===z?p(x,C,P,B):null;case ts:return z=P._init,w(x,C,z(P._payload),B)}if(XA(P)||SA(P))return z!==null?null:_(x,C,P,B,null);Wu(x,P)}return null}function T(x,C,P,B,z){if(typeof B=="string"&&B!==""||typeof B=="number")return x=x.get(P)||null,c(C,x,""+B,z);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Ou:return x=x.get(B.key===null?P:B.key)||null,h(C,x,B,z);case $o:return x=x.get(B.key===null?P:B.key)||null,p(C,x,B,z);case ts:var H=B._init;return T(x,C,P,H(B._payload),z)}if(XA(B)||SA(B))return x=x.get(P)||null,_(C,x,B,z,null);Wu(C,B)}return null}function S(x,C,P,B){for(var z=null,H=null,X=C,Q=C=0,te=null;X!==null&&Q<P.length;Q++){X.index>Q?(te=X,X=null):te=X.sibling;var ie=w(x,X,P[Q],B);if(ie===null){X===null&&(X=te);break}t&&X&&ie.alternate===null&&e(x,X),C=s(ie,C,Q),H===null?z=ie:H.sibling=ie,H=ie,X=te}if(Q===P.length)return n(x,X),Ct&&zs(x,Q),z;if(X===null){for(;Q<P.length;Q++)X=y(x,P[Q],B),X!==null&&(C=s(X,C,Q),H===null?z=X:H.sibling=X,H=X);return Ct&&zs(x,Q),z}for(X=r(x,X);Q<P.length;Q++)te=T(X,x,Q,P[Q],B),te!==null&&(t&&te.alternate!==null&&X.delete(te.key===null?Q:te.key),C=s(te,C,Q),H===null?z=te:H.sibling=te,H=te);return t&&X.forEach(function(ne){return e(x,ne)}),Ct&&zs(x,Q),z}function k(x,C,P,B){var z=SA(P);if(typeof z!="function")throw Error(ue(150));if(P=z.call(P),P==null)throw Error(ue(151));for(var H=z=null,X=C,Q=C=0,te=null,ie=P.next();X!==null&&!ie.done;Q++,ie=P.next()){X.index>Q?(te=X,X=null):te=X.sibling;var ne=w(x,X,ie.value,B);if(ne===null){X===null&&(X=te);break}t&&X&&ne.alternate===null&&e(x,X),C=s(ne,C,Q),H===null?z=ne:H.sibling=ne,H=ne,X=te}if(ie.done)return n(x,X),Ct&&zs(x,Q),z;if(X===null){for(;!ie.done;Q++,ie=P.next())ie=y(x,ie.value,B),ie!==null&&(C=s(ie,C,Q),H===null?z=ie:H.sibling=ie,H=ie);return Ct&&zs(x,Q),z}for(X=r(x,X);!ie.done;Q++,ie=P.next())ie=T(X,x,Q,ie.value,B),ie!==null&&(t&&ie.alternate!==null&&X.delete(ie.key===null?Q:ie.key),C=s(ie,C,Q),H===null?z=ie:H.sibling=ie,H=ie);return t&&X.forEach(function(fe){return e(x,fe)}),Ct&&zs(x,Q),z}function U(x,C,P,B){if(typeof P=="object"&&P!==null&&P.type===Xo&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case Ou:e:{for(var z=P.key,H=C;H!==null;){if(H.key===z){if(z=P.type,z===Xo){if(H.tag===7){n(x,H.sibling),C=i(H,P.props.children),C.return=x,x=C;break e}}else if(H.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===ts&&y2(z)===H.type){n(x,H.sibling),C=i(H,P.props),C.ref=kA(x,H,P),C.return=x,x=C;break e}n(x,H);break}else e(x,H);H=H.sibling}P.type===Xo?(C=Zs(P.props.children,x.mode,B,P.key),C.return=x,x=C):(B=Tc(P.type,P.key,P.props,null,x.mode,B),B.ref=kA(x,C,P),B.return=x,x=B)}return o(x);case $o:e:{for(H=P.key;C!==null;){if(C.key===H)if(C.tag===4&&C.stateNode.containerInfo===P.containerInfo&&C.stateNode.implementation===P.implementation){n(x,C.sibling),C=i(C,P.children||[]),C.return=x,x=C;break e}else{n(x,C);break}else e(x,C);C=C.sibling}C=lh(P,x.mode,B),C.return=x,x=C}return o(x);case ts:return H=P._init,U(x,C,H(P._payload),B)}if(XA(P))return S(x,C,P,B);if(SA(P))return k(x,C,P,B);Wu(x,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,C!==null&&C.tag===6?(n(x,C.sibling),C=i(C,P),C.return=x,x=C):(n(x,C),C=Ah(P,x.mode,B),C.return=x,x=C),o(x)):n(x,C)}return U}var La=Eb(!0),Tb=Eb(!1),tu={},si=Cs(tu),Ml=Cs(tu),Ll=Cs(tu);function Qs(t){if(t===tu)throw Error(ue(174));return t}function xp(t,e){switch(wt(Ll,e),wt(Ml,t),wt(si,tu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:bd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=bd(e,t)}Tt(si),wt(si,e)}function Pa(){Tt(si),Tt(Ml),Tt(Ll)}function xb(t){Qs(Ll.current);var e=Qs(si.current),n=bd(e,t.type);e!==n&&(wt(Ml,t),wt(si,n))}function Sp(t){Ml.current===t&&(Tt(si),Tt(Ml))}var Pt=Cs(0);function Zc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var nh=[];function Cp(){for(var t=0;t<nh.length;t++)nh[t]._workInProgressVersionPrimary=null;nh.length=0}var yc=Bi.ReactCurrentDispatcher,rh=Bi.ReactCurrentBatchConfig,to=0,kt=null,Zt=null,nn=null,Kc=!1,ol=!1,Pl=0,SC=0;function _n(){throw Error(ue(321))}function Mp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Gr(t[n],e[n]))return!1;return!0}function Lp(t,e,n,r,i,s){if(to=s,kt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,yc.current=t===null||t.memoizedState===null?PC:kC,t=n(r,i),ol){s=0;do{if(ol=!1,Pl=0,25<=s)throw Error(ue(301));s+=1,nn=Zt=null,e.updateQueue=null,yc.current=IC,t=n(r,i)}while(ol)}if(yc.current=qc,e=Zt!==null&&Zt.next!==null,to=0,nn=Zt=kt=null,Kc=!1,e)throw Error(ue(300));return t}function Pp(){var t=Pl!==0;return Pl=0,t}function qr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?kt.memoizedState=nn=t:nn=nn.next=t,nn}function Mr(){if(Zt===null){var t=kt.alternate;t=t!==null?t.memoizedState:null}else t=Zt.next;var e=nn===null?kt.memoizedState:nn.next;if(e!==null)nn=e,Zt=t;else{if(t===null)throw Error(ue(310));Zt=t,t={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},nn===null?kt.memoizedState=nn=t:nn=nn.next=t}return nn}function kl(t,e){return typeof e=="function"?e(t):e}function ih(t){var e=Mr(),n=e.queue;if(n===null)throw Error(ue(311));n.lastRenderedReducer=t;var r=Zt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var c=o=null,h=null,p=s;do{var _=p.lane;if((to&_)===_)h!==null&&(h=h.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:t(r,p.action);else{var y={lane:_,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};h===null?(c=h=y,o=r):h=h.next=y,kt.lanes|=_,no|=_}p=p.next}while(p!==null&&p!==s);h===null?o=r:h.next=c,Gr(r,e.memoizedState)||(Yn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=h,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,kt.lanes|=s,no|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function sh(t){var e=Mr(),n=e.queue;if(n===null)throw Error(ue(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Gr(s,e.memoizedState)||(Yn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Sb(){}function Cb(t,e){var n=kt,r=Mr(),i=e(),s=!Gr(r.memoizedState,i);if(s&&(r.memoizedState=i,Yn=!0),r=r.queue,kp(Pb.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||nn!==null&&nn.memoizedState.tag&1){if(n.flags|=2048,Il(9,Lb.bind(null,n,r,i,e),void 0,null),sn===null)throw Error(ue(349));to&30||Mb(n,e,i)}return i}function Mb(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=kt.updateQueue,e===null?(e={lastEffect:null,stores:null},kt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Lb(t,e,n,r){e.value=n,e.getSnapshot=r,kb(e)&&Ib(t)}function Pb(t,e,n){return n(function(){kb(e)&&Ib(t)})}function kb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gr(t,n)}catch{return!0}}function Ib(t){var e=Pi(t,1);e!==null&&Vr(e,t,1,-1)}function _2(t){var e=qr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kl,lastRenderedState:t},e.queue=t,t=t.dispatch=LC.bind(null,kt,t),[e.memoizedState,t]}function Il(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=kt.updateQueue,e===null?(e={lastEffect:null,stores:null},kt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Rb(){return Mr().memoizedState}function _c(t,e,n,r){var i=qr();kt.flags|=t,i.memoizedState=Il(1|e,n,void 0,r===void 0?null:r)}function Hf(t,e,n,r){var i=Mr();r=r===void 0?null:r;var s=void 0;if(Zt!==null){var o=Zt.memoizedState;if(s=o.destroy,r!==null&&Mp(r,o.deps)){i.memoizedState=Il(e,n,s,r);return}}kt.flags|=t,i.memoizedState=Il(1|e,n,s,r)}function w2(t,e){return _c(8390656,8,t,e)}function kp(t,e){return Hf(2048,8,t,e)}function Ob(t,e){return Hf(4,2,t,e)}function Db(t,e){return Hf(4,4,t,e)}function Fb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Bb(t,e,n){return n=n!=null?n.concat([t]):null,Hf(4,4,Fb.bind(null,e,t),n)}function Ip(){}function Nb(t,e){var n=Mr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ub(t,e){var n=Mr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function zb(t,e,n){return to&21?(Gr(n,e)||(n=Gw(),kt.lanes|=n,no|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yn=!0),t.memoizedState=n)}function CC(t,e){var n=ht;ht=n!==0&&4>n?n:4,t(!0);var r=rh.transition;rh.transition={};try{t(!1),e()}finally{ht=n,rh.transition=r}}function Vb(){return Mr().memoizedState}function MC(t,e,n){var r=vs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},jb(t))Gb(e,n);else if(n=yb(t,e,n,r),n!==null){var i=Fn();Vr(n,t,r,i),Hb(n,e,r)}}function LC(t,e,n){var r=vs(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(jb(t))Gb(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,c=s(o,n);if(i.hasEagerState=!0,i.eagerState=c,Gr(c,o)){var h=e.interleaved;h===null?(i.next=i,Ep(e)):(i.next=h.next,h.next=i),e.interleaved=i;return}}catch{}finally{}n=yb(t,e,i,r),n!==null&&(i=Fn(),Vr(n,t,r,i),Hb(n,e,r))}}function jb(t){var e=t.alternate;return t===kt||e!==null&&e===kt}function Gb(t,e){ol=Kc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Hb(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lp(t,n)}}var qc={readContext:Cr,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useInsertionEffect:_n,useLayoutEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useMutableSource:_n,useSyncExternalStore:_n,useId:_n,unstable_isNewReconciler:!1},PC={readContext:Cr,useCallback:function(t,e){return qr().memoizedState=[t,e===void 0?null:e],t},useContext:Cr,useEffect:w2,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,_c(4194308,4,Fb.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _c(4194308,4,t,e)},useInsertionEffect:function(t,e){return _c(4,2,t,e)},useMemo:function(t,e){var n=qr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=qr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=MC.bind(null,kt,t),[r.memoizedState,t]},useRef:function(t){var e=qr();return t={current:t},e.memoizedState=t},useState:_2,useDebugValue:Ip,useDeferredValue:function(t){return qr().memoizedState=t},useTransition:function(){var t=_2(!1),e=t[0];return t=CC.bind(null,t[1]),qr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=kt,i=qr();if(Ct){if(n===void 0)throw Error(ue(407));n=n()}else{if(n=e(),sn===null)throw Error(ue(349));to&30||Mb(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,w2(Pb.bind(null,r,s,t),[t]),r.flags|=2048,Il(9,Lb.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=qr(),e=sn.identifierPrefix;if(Ct){var n=Ti,r=Ei;n=(r&~(1<<32-zr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Pl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=SC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},kC={readContext:Cr,useCallback:Nb,useContext:Cr,useEffect:kp,useImperativeHandle:Bb,useInsertionEffect:Ob,useLayoutEffect:Db,useMemo:Ub,useReducer:ih,useRef:Rb,useState:function(){return ih(kl)},useDebugValue:Ip,useDeferredValue:function(t){var e=Mr();return zb(e,Zt.memoizedState,t)},useTransition:function(){var t=ih(kl)[0],e=Mr().memoizedState;return[t,e]},useMutableSource:Sb,useSyncExternalStore:Cb,useId:Vb,unstable_isNewReconciler:!1},IC={readContext:Cr,useCallback:Nb,useContext:Cr,useEffect:kp,useImperativeHandle:Bb,useInsertionEffect:Ob,useLayoutEffect:Db,useMemo:Ub,useReducer:sh,useRef:Rb,useState:function(){return sh(kl)},useDebugValue:Ip,useDeferredValue:function(t){var e=Mr();return Zt===null?e.memoizedState=t:zb(e,Zt.memoizedState,t)},useTransition:function(){var t=sh(kl)[0],e=Mr().memoizedState;return[t,e]},useMutableSource:Sb,useSyncExternalStore:Cb,useId:Vb,unstable_isNewReconciler:!1};function ka(t,e){try{var n="",r=e;do n+=o6(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function oh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Wd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var RC=typeof WeakMap=="function"?WeakMap:Map;function Wb(t,e,n){n=Si(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ef||(ef=!0,tg=r),Wd(t,e)},n}function Qb(t,e,n){n=Si(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Wd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Wd(t,e),typeof r!="function"&&(ms===null?ms=new Set([this]):ms.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function b2(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new RC;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=YC.bind(null,t,e,n),e.then(t,t))}function E2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function T2(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Si(-1,1),e.tag=2,ps(n,e,1))),n.lanes|=1),t)}var OC=Bi.ReactCurrentOwner,Yn=!1;function Rn(t,e,n,r){e.child=t===null?Tb(e,null,n,r):La(e,t.child,n,r)}function x2(t,e,n,r,i){n=n.render;var s=e.ref;return pa(e,i),r=Lp(t,e,n,r,s,i),n=Pp(),t!==null&&!Yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ki(t,e,i)):(Ct&&n&&mp(e),e.flags|=1,Rn(t,e,r,i),e.child)}function S2(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!zp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Yb(t,e,s,r,i)):(t=Tc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Tl,n(o,r)&&t.ref===e.ref)return ki(t,e,i)}return e.flags|=1,t=ys(s,r),t.ref=e.ref,t.return=e,e.child=t}function Yb(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Tl(s,r)&&t.ref===e.ref)if(Yn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Yn=!0);else return e.lanes=t.lanes,ki(t,e,i)}return Qd(t,e,n,r,i)}function $b(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},wt(sa,tr),tr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,wt(sa,tr),tr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,wt(sa,tr),tr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,wt(sa,tr),tr|=r;return Rn(t,e,i,n),e.child}function Xb(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Qd(t,e,n,r,i){var s=Xn(n)?Js:Mn.current;return s=Ca(e,s),pa(e,i),n=Lp(t,e,n,r,s,i),r=Pp(),t!==null&&!Yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ki(t,e,i)):(Ct&&r&&mp(e),e.flags|=1,Rn(t,e,n,i),e.child)}function C2(t,e,n,r,i){if(Xn(n)){var s=!0;Hc(e)}else s=!1;if(pa(e,i),e.stateNode===null)wc(t,e),bb(e,n,r),Hd(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var h=o.context,p=n.contextType;typeof p=="object"&&p!==null?p=Cr(p):(p=Xn(n)?Js:Mn.current,p=Ca(e,p));var _=n.getDerivedStateFromProps,y=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function";y||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||h!==p)&&v2(e,o,r,p),ns=!1;var w=e.memoizedState;o.state=w,Xc(e,r,o,i),h=e.memoizedState,c!==r||w!==h||$n.current||ns?(typeof _=="function"&&(Gd(e,n,_,r),h=e.memoizedState),(c=ns||m2(e,n,c,r,w,h,p))?(y||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=h),o.props=r,o.state=h,o.context=p,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,_b(t,e),c=e.memoizedProps,p=e.type===e.elementType?c:Or(e.type,c),o.props=p,y=e.pendingProps,w=o.context,h=n.contextType,typeof h=="object"&&h!==null?h=Cr(h):(h=Xn(n)?Js:Mn.current,h=Ca(e,h));var T=n.getDerivedStateFromProps;(_=typeof T=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==y||w!==h)&&v2(e,o,r,h),ns=!1,w=e.memoizedState,o.state=w,Xc(e,r,o,i);var S=e.memoizedState;c!==y||w!==S||$n.current||ns?(typeof T=="function"&&(Gd(e,n,T,r),S=e.memoizedState),(p=ns||m2(e,n,p,r,w,S,h)||!1)?(_||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,h),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,h)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=h,r=p):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),r=!1)}return Yd(t,e,n,r,s,i)}function Yd(t,e,n,r,i,s){Xb(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&f2(e,n,!1),ki(t,e,s);r=e.stateNode,OC.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=La(e,t.child,null,s),e.child=La(e,null,c,s)):Rn(t,e,c,s),e.memoizedState=r.state,i&&f2(e,n,!0),e.child}function Zb(t){var e=t.stateNode;e.pendingContext?c2(t,e.pendingContext,e.pendingContext!==e.context):e.context&&c2(t,e.context,!1),xp(t,e.containerInfo)}function M2(t,e,n,r,i){return Ma(),yp(i),e.flags|=256,Rn(t,e,n,r),e.child}var $d={dehydrated:null,treeContext:null,retryLane:0};function Xd(t){return{baseLanes:t,cachePool:null,transitions:null}}function Kb(t,e,n){var r=e.pendingProps,i=Pt.current,s=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),wt(Pt,i&1),t===null)return Vd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Yf(o,r,0,null),t=Zs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Xd(n),e.memoizedState=$d,t):Rp(e,o));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return DC(t,e,o,r,c,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,c=i.sibling;var h={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=h,e.deletions=null):(r=ys(i,h),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?s=ys(c,s):(s=Zs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Xd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=$d,r}return s=t.child,t=s.sibling,r=ys(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Rp(t,e){return e=Yf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qu(t,e,n,r){return r!==null&&yp(r),La(e,t.child,null,n),t=Rp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function DC(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=oh(Error(ue(422))),Qu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Yf({mode:"visible",children:r.children},i,0,null),s=Zs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&La(e,t.child,null,o),e.child.memoizedState=Xd(o),e.memoizedState=$d,s);if(!(e.mode&1))return Qu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,s=Error(ue(419)),r=oh(s,r,void 0),Qu(t,e,o,r)}if(c=(o&t.childLanes)!==0,Yn||c){if(r=sn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Pi(t,i),Vr(r,t,i,-1))}return Up(),r=oh(Error(ue(421))),Qu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=$C.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,or=gs(i.nextSibling),ar=e,Ct=!0,Fr=null,t!==null&&(_r[wr++]=Ei,_r[wr++]=Ti,_r[wr++]=eo,Ei=t.id,Ti=t.overflow,eo=e),e=Rp(e,r.children),e.flags|=4096,e)}function L2(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),jd(t.return,e,n)}function ah(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qb(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Rn(t,e,r.children,n),r=Pt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&L2(t,n,e);else if(t.tag===19)L2(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(wt(Pt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Zc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ah(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Zc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ah(e,!0,n,null,s);break;case"together":ah(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function wc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ki(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),no|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ue(153));if(e.child!==null){for(t=e.child,n=ys(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ys(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function FC(t,e,n){switch(e.tag){case 3:Zb(e),Ma();break;case 5:xb(e);break;case 1:Xn(e.type)&&Hc(e);break;case 4:xp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;wt(Yc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(wt(Pt,Pt.current&1),e.flags|=128,null):n&e.child.childLanes?Kb(t,e,n):(wt(Pt,Pt.current&1),t=ki(t,e,n),t!==null?t.sibling:null);wt(Pt,Pt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return qb(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),wt(Pt,Pt.current),r)break;return null;case 22:case 23:return e.lanes=0,$b(t,e,n)}return ki(t,e,n)}var Jb,Zd,e3,t3;Jb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Zd=function(){};e3=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Qs(si.current);var s=null;switch(n){case"input":i=vd(t,i),r=vd(t,r),s=[];break;case"select":i=It({},i,{value:void 0}),r=It({},r,{value:void 0}),s=[];break;case"textarea":i=wd(t,i),r=wd(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=jc)}Ed(n,r);var o;n=null;for(p in i)if(!r.hasOwnProperty(p)&&i.hasOwnProperty(p)&&i[p]!=null)if(p==="style"){var c=i[p];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(ml.hasOwnProperty(p)?s||(s=[]):(s=s||[]).push(p,null));for(p in r){var h=r[p];if(c=i!=null?i[p]:void 0,r.hasOwnProperty(p)&&h!==c&&(h!=null||c!=null))if(p==="style")if(c){for(o in c)!c.hasOwnProperty(o)||h&&h.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in h)h.hasOwnProperty(o)&&c[o]!==h[o]&&(n||(n={}),n[o]=h[o])}else n||(s||(s=[]),s.push(p,n)),n=h;else p==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,c=c?c.__html:void 0,h!=null&&c!==h&&(s=s||[]).push(p,h)):p==="children"?typeof h!="string"&&typeof h!="number"||(s=s||[]).push(p,""+h):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(ml.hasOwnProperty(p)?(h!=null&&p==="onScroll"&&Et("scroll",t),s||c===h||(s=[])):(s=s||[]).push(p,h))}n&&(s=s||[]).push("style",n);var p=s;(e.updateQueue=p)&&(e.flags|=4)}};t3=function(t,e,n,r){n!==r&&(e.flags|=4)};function IA(t,e){if(!Ct)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function wn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function BC(t,e,n){var r=e.pendingProps;switch(vp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wn(e),null;case 1:return Xn(e.type)&&Gc(),wn(e),null;case 3:return r=e.stateNode,Pa(),Tt($n),Tt(Mn),Cp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Hu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Fr!==null&&(ig(Fr),Fr=null))),Zd(t,e),wn(e),null;case 5:Sp(e);var i=Qs(Ll.current);if(n=e.type,t!==null&&e.stateNode!=null)e3(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ue(166));return wn(e),null}if(t=Qs(si.current),Hu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ei]=e,r[Cl]=s,t=(e.mode&1)!==0,n){case"dialog":Et("cancel",r),Et("close",r);break;case"iframe":case"object":case"embed":Et("load",r);break;case"video":case"audio":for(i=0;i<KA.length;i++)Et(KA[i],r);break;case"source":Et("error",r);break;case"img":case"image":case"link":Et("error",r),Et("load",r);break;case"details":Et("toggle",r);break;case"input":N1(r,s),Et("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Et("invalid",r);break;case"textarea":z1(r,s),Et("invalid",r)}Ed(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var c=s[o];o==="children"?typeof c=="string"?r.textContent!==c&&(s.suppressHydrationWarning!==!0&&Gu(r.textContent,c,t),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(s.suppressHydrationWarning!==!0&&Gu(r.textContent,c,t),i=["children",""+c]):ml.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Et("scroll",r)}switch(n){case"input":Du(r),U1(r,s,!0);break;case"textarea":Du(r),V1(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=jc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Mw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ei]=e,t[Cl]=r,Jb(t,e,!1,!1),e.stateNode=t;e:{switch(o=Td(n,r),n){case"dialog":Et("cancel",t),Et("close",t),i=r;break;case"iframe":case"object":case"embed":Et("load",t),i=r;break;case"video":case"audio":for(i=0;i<KA.length;i++)Et(KA[i],t);i=r;break;case"source":Et("error",t),i=r;break;case"img":case"image":case"link":Et("error",t),Et("load",t),i=r;break;case"details":Et("toggle",t),i=r;break;case"input":N1(t,r),i=vd(t,r),Et("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=It({},r,{value:void 0}),Et("invalid",t);break;case"textarea":z1(t,r),i=wd(t,r),Et("invalid",t);break;default:i=r}Ed(n,i),c=i;for(s in c)if(c.hasOwnProperty(s)){var h=c[s];s==="style"?kw(t,h):s==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&Lw(t,h)):s==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&vl(t,h):typeof h=="number"&&vl(t,""+h):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ml.hasOwnProperty(s)?h!=null&&s==="onScroll"&&Et("scroll",t):h!=null&&rp(t,s,h,o))}switch(n){case"input":Du(t),U1(t,r,!1);break;case"textarea":Du(t),V1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+bs(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?fa(t,!!r.multiple,s,!1):r.defaultValue!=null&&fa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=jc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wn(e),null;case 6:if(t&&e.stateNode!=null)t3(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ue(166));if(n=Qs(Ll.current),Qs(si.current),Hu(e)){if(r=e.stateNode,n=e.memoizedProps,r[ei]=e,(s=r.nodeValue!==n)&&(t=ar,t!==null))switch(t.tag){case 3:Gu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Gu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ei]=e,e.stateNode=r}return wn(e),null;case 13:if(Tt(Pt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ct&&or!==null&&e.mode&1&&!(e.flags&128))vb(),Ma(),e.flags|=98560,s=!1;else if(s=Hu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ue(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ue(317));s[ei]=e}else Ma(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wn(e),s=!1}else Fr!==null&&(ig(Fr),Fr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Pt.current&1?Kt===0&&(Kt=3):Up())),e.updateQueue!==null&&(e.flags|=4),wn(e),null);case 4:return Pa(),Zd(t,e),t===null&&xl(e.stateNode.containerInfo),wn(e),null;case 10:return bp(e.type._context),wn(e),null;case 17:return Xn(e.type)&&Gc(),wn(e),null;case 19:if(Tt(Pt),s=e.memoizedState,s===null)return wn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)IA(s,!1);else{if(Kt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Zc(t),o!==null){for(e.flags|=128,IA(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return wt(Pt,Pt.current&1|2),e.child}t=t.sibling}s.tail!==null&&jt()>Ia&&(e.flags|=128,r=!0,IA(s,!1),e.lanes=4194304)}else{if(!r)if(t=Zc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),IA(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ct)return wn(e),null}else 2*jt()-s.renderingStartTime>Ia&&n!==1073741824&&(e.flags|=128,r=!0,IA(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=jt(),e.sibling=null,n=Pt.current,wt(Pt,r?n&1|2:n&1),e):(wn(e),null);case 22:case 23:return Np(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?tr&1073741824&&(wn(e),e.subtreeFlags&6&&(e.flags|=8192)):wn(e),null;case 24:return null;case 25:return null}throw Error(ue(156,e.tag))}function NC(t,e){switch(vp(e),e.tag){case 1:return Xn(e.type)&&Gc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pa(),Tt($n),Tt(Mn),Cp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Sp(e),null;case 13:if(Tt(Pt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ue(340));Ma()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Tt(Pt),null;case 4:return Pa(),null;case 10:return bp(e.type._context),null;case 22:case 23:return Np(),null;case 24:return null;default:return null}}var Yu=!1,Sn=!1,UC=typeof WeakSet=="function"?WeakSet:Set,Te=null;function ia(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Nt(t,e,r)}else n.current=null}function Kd(t,e,n){try{n()}catch(r){Nt(t,e,r)}}var P2=!1;function zC(t,e){if(Od=Uc,t=sb(),pp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,c=-1,h=-1,p=0,_=0,y=t,w=null;t:for(;;){for(var T;y!==n||i!==0&&y.nodeType!==3||(c=o+i),y!==s||r!==0&&y.nodeType!==3||(h=o+r),y.nodeType===3&&(o+=y.nodeValue.length),(T=y.firstChild)!==null;)w=y,y=T;for(;;){if(y===t)break t;if(w===n&&++p===i&&(c=o),w===s&&++_===r&&(h=o),(T=y.nextSibling)!==null)break;y=w,w=y.parentNode}y=T}n=c===-1||h===-1?null:{start:c,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Dd={focusedElem:t,selectionRange:n},Uc=!1,Te=e;Te!==null;)if(e=Te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Te=t;else for(;Te!==null;){e=Te;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var k=S.memoizedProps,U=S.memoizedState,x=e.stateNode,C=x.getSnapshotBeforeUpdate(e.elementType===e.type?k:Or(e.type,k),U);x.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var P=e.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ue(163))}}catch(B){Nt(e,e.return,B)}if(t=e.sibling,t!==null){t.return=e.return,Te=t;break}Te=e.return}return S=P2,P2=!1,S}function al(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Kd(e,n,s)}i=i.next}while(i!==r)}}function Wf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function qd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function n3(t){var e=t.alternate;e!==null&&(t.alternate=null,n3(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ei],delete e[Cl],delete e[Nd],delete e[bC],delete e[EC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function r3(t){return t.tag===5||t.tag===3||t.tag===4}function k2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||r3(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=jc));else if(r!==4&&(t=t.child,t!==null))for(Jd(t,e,n),t=t.sibling;t!==null;)Jd(t,e,n),t=t.sibling}function eg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(eg(t,e,n),t=t.sibling;t!==null;)eg(t,e,n),t=t.sibling}var un=null,Dr=!1;function Xi(t,e,n){for(n=n.child;n!==null;)i3(t,e,n),n=n.sibling}function i3(t,e,n){if(ii&&typeof ii.onCommitFiberUnmount=="function")try{ii.onCommitFiberUnmount(Bf,n)}catch{}switch(n.tag){case 5:Sn||ia(n,e);case 6:var r=un,i=Dr;un=null,Xi(t,e,n),un=r,Dr=i,un!==null&&(Dr?(t=un,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):un.removeChild(n.stateNode));break;case 18:un!==null&&(Dr?(t=un,n=n.stateNode,t.nodeType===8?eh(t.parentNode,n):t.nodeType===1&&eh(t,n),bl(t)):eh(un,n.stateNode));break;case 4:r=un,i=Dr,un=n.stateNode.containerInfo,Dr=!0,Xi(t,e,n),un=r,Dr=i;break;case 0:case 11:case 14:case 15:if(!Sn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Kd(n,e,o),i=i.next}while(i!==r)}Xi(t,e,n);break;case 1:if(!Sn&&(ia(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Nt(n,e,c)}Xi(t,e,n);break;case 21:Xi(t,e,n);break;case 22:n.mode&1?(Sn=(r=Sn)||n.memoizedState!==null,Xi(t,e,n),Sn=r):Xi(t,e,n);break;default:Xi(t,e,n)}}function I2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new UC),e.forEach(function(r){var i=XC.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Rr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:un=c.stateNode,Dr=!1;break e;case 3:un=c.stateNode.containerInfo,Dr=!0;break e;case 4:un=c.stateNode.containerInfo,Dr=!0;break e}c=c.return}if(un===null)throw Error(ue(160));i3(s,o,i),un=null,Dr=!1;var h=i.alternate;h!==null&&(h.return=null),i.return=null}catch(p){Nt(i,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)s3(e,t),e=e.sibling}function s3(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Rr(e,t),$r(t),r&4){try{al(3,t,t.return),Wf(3,t)}catch(k){Nt(t,t.return,k)}try{al(5,t,t.return)}catch(k){Nt(t,t.return,k)}}break;case 1:Rr(e,t),$r(t),r&512&&n!==null&&ia(n,n.return);break;case 5:if(Rr(e,t),$r(t),r&512&&n!==null&&ia(n,n.return),t.flags&32){var i=t.stateNode;try{vl(i,"")}catch(k){Nt(t,t.return,k)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,c=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{c==="input"&&s.type==="radio"&&s.name!=null&&Sw(i,s),Td(c,o);var p=Td(c,s);for(o=0;o<h.length;o+=2){var _=h[o],y=h[o+1];_==="style"?kw(i,y):_==="dangerouslySetInnerHTML"?Lw(i,y):_==="children"?vl(i,y):rp(i,_,y,p)}switch(c){case"input":yd(i,s);break;case"textarea":Cw(i,s);break;case"select":var w=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var T=s.value;T!=null?fa(i,!!s.multiple,T,!1):w!==!!s.multiple&&(s.defaultValue!=null?fa(i,!!s.multiple,s.defaultValue,!0):fa(i,!!s.multiple,s.multiple?[]:"",!1))}i[Cl]=s}catch(k){Nt(t,t.return,k)}}break;case 6:if(Rr(e,t),$r(t),r&4){if(t.stateNode===null)throw Error(ue(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(k){Nt(t,t.return,k)}}break;case 3:if(Rr(e,t),$r(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{bl(e.containerInfo)}catch(k){Nt(t,t.return,k)}break;case 4:Rr(e,t),$r(t);break;case 13:Rr(e,t),$r(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Fp=jt())),r&4&&I2(t);break;case 22:if(_=n!==null&&n.memoizedState!==null,t.mode&1?(Sn=(p=Sn)||_,Rr(e,t),Sn=p):Rr(e,t),$r(t),r&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!_&&t.mode&1)for(Te=t,_=t.child;_!==null;){for(y=Te=_;Te!==null;){switch(w=Te,T=w.child,w.tag){case 0:case 11:case 14:case 15:al(4,w,w.return);break;case 1:ia(w,w.return);var S=w.stateNode;if(typeof S.componentWillUnmount=="function"){r=w,n=w.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(k){Nt(r,n,k)}}break;case 5:ia(w,w.return);break;case 22:if(w.memoizedState!==null){O2(y);continue}}T!==null?(T.return=w,Te=T):O2(y)}_=_.sibling}e:for(_=null,y=t;;){if(y.tag===5){if(_===null){_=y;try{i=y.stateNode,p?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(c=y.stateNode,h=y.memoizedProps.style,o=h!=null&&h.hasOwnProperty("display")?h.display:null,c.style.display=Pw("display",o))}catch(k){Nt(t,t.return,k)}}}else if(y.tag===6){if(_===null)try{y.stateNode.nodeValue=p?"":y.memoizedProps}catch(k){Nt(t,t.return,k)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;_===y&&(_=null),y=y.return}_===y&&(_=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Rr(e,t),$r(t),r&4&&I2(t);break;case 21:break;default:Rr(e,t),$r(t)}}function $r(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(r3(n)){var r=n;break e}n=n.return}throw Error(ue(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(vl(i,""),r.flags&=-33);var s=k2(t);eg(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,c=k2(t);Jd(t,c,o);break;default:throw Error(ue(161))}}catch(h){Nt(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function VC(t,e,n){Te=t,o3(t)}function o3(t,e,n){for(var r=(t.mode&1)!==0;Te!==null;){var i=Te,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Yu;if(!o){var c=i.alternate,h=c!==null&&c.memoizedState!==null||Sn;c=Yu;var p=Sn;if(Yu=o,(Sn=h)&&!p)for(Te=i;Te!==null;)o=Te,h=o.child,o.tag===22&&o.memoizedState!==null?D2(i):h!==null?(h.return=o,Te=h):D2(i);for(;s!==null;)Te=s,o3(s),s=s.sibling;Te=i,Yu=c,Sn=p}R2(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Te=s):R2(t)}}function R2(t){for(;Te!==null;){var e=Te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Sn||Wf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Sn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Or(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&p2(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}p2(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var _=p.memoizedState;if(_!==null){var y=_.dehydrated;y!==null&&bl(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ue(163))}Sn||e.flags&512&&qd(e)}catch(w){Nt(e,e.return,w)}}if(e===t){Te=null;break}if(n=e.sibling,n!==null){n.return=e.return,Te=n;break}Te=e.return}}function O2(t){for(;Te!==null;){var e=Te;if(e===t){Te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Te=n;break}Te=e.return}}function D2(t){for(;Te!==null;){var e=Te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Wf(4,e)}catch(h){Nt(e,n,h)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(h){Nt(e,i,h)}}var s=e.return;try{qd(e)}catch(h){Nt(e,s,h)}break;case 5:var o=e.return;try{qd(e)}catch(h){Nt(e,o,h)}}}catch(h){Nt(e,e.return,h)}if(e===t){Te=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Te=c;break}Te=e.return}}var jC=Math.ceil,Jc=Bi.ReactCurrentDispatcher,Op=Bi.ReactCurrentOwner,Tr=Bi.ReactCurrentBatchConfig,st=0,sn=null,Yt=null,fn=0,tr=0,sa=Cs(0),Kt=0,Rl=null,no=0,Qf=0,Dp=0,Al=null,Hn=null,Fp=0,Ia=1/0,vi=null,ef=!1,tg=null,ms=null,$u=!1,As=null,tf=0,ll=0,ng=null,bc=-1,Ec=0;function Fn(){return st&6?jt():bc!==-1?bc:bc=jt()}function vs(t){return t.mode&1?st&2&&fn!==0?fn&-fn:xC.transition!==null?(Ec===0&&(Ec=Gw()),Ec):(t=ht,t!==0||(t=window.event,t=t===void 0?16:Zw(t.type)),t):1}function Vr(t,e,n,r){if(50<ll)throw ll=0,ng=null,Error(ue(185));ql(t,n,r),(!(st&2)||t!==sn)&&(t===sn&&(!(st&2)&&(Qf|=n),Kt===4&&os(t,fn)),Zn(t,r),n===1&&st===0&&!(e.mode&1)&&(Ia=jt()+500,jf&&Ms()))}function Zn(t,e){var n=t.callbackNode;x6(t,e);var r=Nc(t,t===sn?fn:0);if(r===0)n!==null&&H1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&H1(n),e===1)t.tag===0?TC(F2.bind(null,t)):gb(F2.bind(null,t)),_C(function(){!(st&6)&&Ms()}),n=null;else{switch(Hw(r)){case 1:n=Ap;break;case 4:n=Vw;break;case 16:n=Bc;break;case 536870912:n=jw;break;default:n=Bc}n=d3(n,a3.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function a3(t,e){if(bc=-1,Ec=0,st&6)throw Error(ue(327));var n=t.callbackNode;if(ma()&&t.callbackNode!==n)return null;var r=Nc(t,t===sn?fn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=nf(t,r);else{e=r;var i=st;st|=2;var s=l3();(sn!==t||fn!==e)&&(vi=null,Ia=jt()+500,Xs(t,e));do try{WC();break}catch(c){A3(t,c)}while(!0);wp(),Jc.current=s,st=i,Yt!==null?e=0:(sn=null,fn=0,e=Kt)}if(e!==0){if(e===2&&(i=Ld(t),i!==0&&(r=i,e=rg(t,i))),e===1)throw n=Rl,Xs(t,0),os(t,r),Zn(t,jt()),n;if(e===6)os(t,r);else{if(i=t.current.alternate,!(r&30)&&!GC(i)&&(e=nf(t,r),e===2&&(s=Ld(t),s!==0&&(r=s,e=rg(t,s))),e===1))throw n=Rl,Xs(t,0),os(t,r),Zn(t,jt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ue(345));case 2:Vs(t,Hn,vi);break;case 3:if(os(t,r),(r&130023424)===r&&(e=Fp+500-jt(),10<e)){if(Nc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Fn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Bd(Vs.bind(null,t,Hn,vi),e);break}Vs(t,Hn,vi);break;case 4:if(os(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-zr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=jt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jC(r/1960))-r,10<r){t.timeoutHandle=Bd(Vs.bind(null,t,Hn,vi),r);break}Vs(t,Hn,vi);break;case 5:Vs(t,Hn,vi);break;default:throw Error(ue(329))}}}return Zn(t,jt()),t.callbackNode===n?a3.bind(null,t):null}function rg(t,e){var n=Al;return t.current.memoizedState.isDehydrated&&(Xs(t,e).flags|=256),t=nf(t,e),t!==2&&(e=Hn,Hn=n,e!==null&&ig(e)),t}function ig(t){Hn===null?Hn=t:Hn.push.apply(Hn,t)}function GC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Gr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function os(t,e){for(e&=~Dp,e&=~Qf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zr(e),r=1<<n;t[n]=-1,e&=~r}}function F2(t){if(st&6)throw Error(ue(327));ma();var e=Nc(t,0);if(!(e&1))return Zn(t,jt()),null;var n=nf(t,e);if(t.tag!==0&&n===2){var r=Ld(t);r!==0&&(e=r,n=rg(t,r))}if(n===1)throw n=Rl,Xs(t,0),os(t,e),Zn(t,jt()),n;if(n===6)throw Error(ue(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Vs(t,Hn,vi),Zn(t,jt()),null}function Bp(t,e){var n=st;st|=1;try{return t(e)}finally{st=n,st===0&&(Ia=jt()+500,jf&&Ms())}}function ro(t){As!==null&&As.tag===0&&!(st&6)&&ma();var e=st;st|=1;var n=Tr.transition,r=ht;try{if(Tr.transition=null,ht=1,t)return t()}finally{ht=r,Tr.transition=n,st=e,!(st&6)&&Ms()}}function Np(){tr=sa.current,Tt(sa)}function Xs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,yC(n)),Yt!==null)for(n=Yt.return;n!==null;){var r=n;switch(vp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Gc();break;case 3:Pa(),Tt($n),Tt(Mn),Cp();break;case 5:Sp(r);break;case 4:Pa();break;case 13:Tt(Pt);break;case 19:Tt(Pt);break;case 10:bp(r.type._context);break;case 22:case 23:Np()}n=n.return}if(sn=t,Yt=t=ys(t.current,null),fn=tr=e,Kt=0,Rl=null,Dp=Qf=no=0,Hn=Al=null,Ws!==null){for(e=0;e<Ws.length;e++)if(n=Ws[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ws=null}return t}function A3(t,e){do{var n=Yt;try{if(wp(),yc.current=qc,Kc){for(var r=kt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Kc=!1}if(to=0,nn=Zt=kt=null,ol=!1,Pl=0,Op.current=null,n===null||n.return===null){Kt=1,Rl=e,Yt=null;break}e:{var s=t,o=n.return,c=n,h=e;if(e=fn,c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var p=h,_=c,y=_.tag;if(!(_.mode&1)&&(y===0||y===11||y===15)){var w=_.alternate;w?(_.updateQueue=w.updateQueue,_.memoizedState=w.memoizedState,_.lanes=w.lanes):(_.updateQueue=null,_.memoizedState=null)}var T=E2(o);if(T!==null){T.flags&=-257,T2(T,o,c,s,e),T.mode&1&&b2(s,p,e),e=T,h=p;var S=e.updateQueue;if(S===null){var k=new Set;k.add(h),e.updateQueue=k}else S.add(h);break e}else{if(!(e&1)){b2(s,p,e),Up();break e}h=Error(ue(426))}}else if(Ct&&c.mode&1){var U=E2(o);if(U!==null){!(U.flags&65536)&&(U.flags|=256),T2(U,o,c,s,e),yp(ka(h,c));break e}}s=h=ka(h,c),Kt!==4&&(Kt=2),Al===null?Al=[s]:Al.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=Wb(s,h,e);g2(s,x);break e;case 1:c=h;var C=s.type,P=s.stateNode;if(!(s.flags&128)&&(typeof C.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(ms===null||!ms.has(P)))){s.flags|=65536,e&=-e,s.lanes|=e;var B=Qb(s,c,e);g2(s,B);break e}}s=s.return}while(s!==null)}c3(n)}catch(z){e=z,Yt===n&&n!==null&&(Yt=n=n.return);continue}break}while(!0)}function l3(){var t=Jc.current;return Jc.current=qc,t===null?qc:t}function Up(){(Kt===0||Kt===3||Kt===2)&&(Kt=4),sn===null||!(no&268435455)&&!(Qf&268435455)||os(sn,fn)}function nf(t,e){var n=st;st|=2;var r=l3();(sn!==t||fn!==e)&&(vi=null,Xs(t,e));do try{HC();break}catch(i){A3(t,i)}while(!0);if(wp(),st=n,Jc.current=r,Yt!==null)throw Error(ue(261));return sn=null,fn=0,Kt}function HC(){for(;Yt!==null;)u3(Yt)}function WC(){for(;Yt!==null&&!p6();)u3(Yt)}function u3(t){var e=h3(t.alternate,t,tr);t.memoizedProps=t.pendingProps,e===null?c3(t):Yt=e,Op.current=null}function c3(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=NC(n,e),n!==null){n.flags&=32767,Yt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Kt=6,Yt=null;return}}else if(n=BC(n,e,tr),n!==null){Yt=n;return}if(e=e.sibling,e!==null){Yt=e;return}Yt=e=t}while(e!==null);Kt===0&&(Kt=5)}function Vs(t,e,n){var r=ht,i=Tr.transition;try{Tr.transition=null,ht=1,QC(t,e,n,r)}finally{Tr.transition=i,ht=r}return null}function QC(t,e,n,r){do ma();while(As!==null);if(st&6)throw Error(ue(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ue(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(S6(t,s),t===sn&&(Yt=sn=null,fn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$u||($u=!0,d3(Bc,function(){return ma(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Tr.transition,Tr.transition=null;var o=ht;ht=1;var c=st;st|=4,Op.current=null,zC(t,n),s3(n,t),fC(Dd),Uc=!!Od,Dd=Od=null,t.current=n,VC(n),m6(),st=c,ht=o,Tr.transition=s}else t.current=n;if($u&&($u=!1,As=t,tf=i),s=t.pendingLanes,s===0&&(ms=null),_6(n.stateNode),Zn(t,jt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ef)throw ef=!1,t=tg,tg=null,t;return tf&1&&t.tag!==0&&ma(),s=t.pendingLanes,s&1?t===ng?ll++:(ll=0,ng=t):ll=0,Ms(),null}function ma(){if(As!==null){var t=Hw(tf),e=Tr.transition,n=ht;try{if(Tr.transition=null,ht=16>t?16:t,As===null)var r=!1;else{if(t=As,As=null,tf=0,st&6)throw Error(ue(331));var i=st;for(st|=4,Te=t.current;Te!==null;){var s=Te,o=s.child;if(Te.flags&16){var c=s.deletions;if(c!==null){for(var h=0;h<c.length;h++){var p=c[h];for(Te=p;Te!==null;){var _=Te;switch(_.tag){case 0:case 11:case 15:al(8,_,s)}var y=_.child;if(y!==null)y.return=_,Te=y;else for(;Te!==null;){_=Te;var w=_.sibling,T=_.return;if(n3(_),_===p){Te=null;break}if(w!==null){w.return=T,Te=w;break}Te=T}}}var S=s.alternate;if(S!==null){var k=S.child;if(k!==null){S.child=null;do{var U=k.sibling;k.sibling=null,k=U}while(k!==null)}}Te=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Te=o;else e:for(;Te!==null;){if(s=Te,s.flags&2048)switch(s.tag){case 0:case 11:case 15:al(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Te=x;break e}Te=s.return}}var C=t.current;for(Te=C;Te!==null;){o=Te;var P=o.child;if(o.subtreeFlags&2064&&P!==null)P.return=o,Te=P;else e:for(o=C;Te!==null;){if(c=Te,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Wf(9,c)}}catch(z){Nt(c,c.return,z)}if(c===o){Te=null;break e}var B=c.sibling;if(B!==null){B.return=c.return,Te=B;break e}Te=c.return}}if(st=i,Ms(),ii&&typeof ii.onPostCommitFiberRoot=="function")try{ii.onPostCommitFiberRoot(Bf,t)}catch{}r=!0}return r}finally{ht=n,Tr.transition=e}}return!1}function B2(t,e,n){e=ka(n,e),e=Wb(t,e,1),t=ps(t,e,1),e=Fn(),t!==null&&(ql(t,1,e),Zn(t,e))}function Nt(t,e,n){if(t.tag===3)B2(t,t,n);else for(;e!==null;){if(e.tag===3){B2(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ms===null||!ms.has(r))){t=ka(n,t),t=Qb(e,t,1),e=ps(e,t,1),t=Fn(),e!==null&&(ql(e,1,t),Zn(e,t));break}}e=e.return}}function YC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Fn(),t.pingedLanes|=t.suspendedLanes&n,sn===t&&(fn&n)===n&&(Kt===4||Kt===3&&(fn&130023424)===fn&&500>jt()-Fp?Xs(t,0):Dp|=n),Zn(t,e)}function f3(t,e){e===0&&(t.mode&1?(e=Nu,Nu<<=1,!(Nu&130023424)&&(Nu=4194304)):e=1);var n=Fn();t=Pi(t,e),t!==null&&(ql(t,e,n),Zn(t,n))}function $C(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),f3(t,n)}function XC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ue(314))}r!==null&&r.delete(e),f3(t,n)}var h3;h3=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$n.current)Yn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Yn=!1,FC(t,e,n);Yn=!!(t.flags&131072)}else Yn=!1,Ct&&e.flags&1048576&&pb(e,Qc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;wc(t,e),t=e.pendingProps;var i=Ca(e,Mn.current);pa(e,n),i=Lp(null,e,r,t,i,n);var s=Pp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xn(r)?(s=!0,Hc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Tp(e),i.updater=Gf,e.stateNode=i,i._reactInternals=e,Hd(e,r,t,n),e=Yd(null,e,r,!0,s,n)):(e.tag=0,Ct&&s&&mp(e),Rn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(wc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=KC(r),t=Or(r,t),i){case 0:e=Qd(null,e,r,t,n);break e;case 1:e=C2(null,e,r,t,n);break e;case 11:e=x2(null,e,r,t,n);break e;case 14:e=S2(null,e,r,Or(r.type,t),n);break e}throw Error(ue(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Or(r,i),Qd(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Or(r,i),C2(t,e,r,i,n);case 3:e:{if(Zb(e),t===null)throw Error(ue(387));r=e.pendingProps,s=e.memoizedState,i=s.element,_b(t,e),Xc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ka(Error(ue(423)),e),e=M2(t,e,r,n,i);break e}else if(r!==i){i=ka(Error(ue(424)),e),e=M2(t,e,r,n,i);break e}else for(or=gs(e.stateNode.containerInfo.firstChild),ar=e,Ct=!0,Fr=null,n=Tb(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ma(),r===i){e=ki(t,e,n);break e}Rn(t,e,r,n)}e=e.child}return e;case 5:return xb(e),t===null&&Vd(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Fd(r,i)?o=null:s!==null&&Fd(r,s)&&(e.flags|=32),Xb(t,e),Rn(t,e,o,n),e.child;case 6:return t===null&&Vd(e),null;case 13:return Kb(t,e,n);case 4:return xp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=La(e,null,r,n):Rn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Or(r,i),x2(t,e,r,i,n);case 7:return Rn(t,e,e.pendingProps,n),e.child;case 8:return Rn(t,e,e.pendingProps.children,n),e.child;case 12:return Rn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,wt(Yc,r._currentValue),r._currentValue=o,s!==null)if(Gr(s.value,o)){if(s.children===i.children&&!$n.current){e=ki(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var c=s.dependencies;if(c!==null){o=s.child;for(var h=c.firstContext;h!==null;){if(h.context===r){if(s.tag===1){h=Si(-1,n&-n),h.tag=2;var p=s.updateQueue;if(p!==null){p=p.shared;var _=p.pending;_===null?h.next=h:(h.next=_.next,_.next=h),p.pending=h}}s.lanes|=n,h=s.alternate,h!==null&&(h.lanes|=n),jd(s.return,n,e),c.lanes|=n;break}h=h.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ue(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),jd(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Rn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,pa(e,n),i=Cr(i),r=r(i),e.flags|=1,Rn(t,e,r,n),e.child;case 14:return r=e.type,i=Or(r,e.pendingProps),i=Or(r.type,i),S2(t,e,r,i,n);case 15:return Yb(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Or(r,i),wc(t,e),e.tag=1,Xn(r)?(t=!0,Hc(e)):t=!1,pa(e,n),bb(e,r,i),Hd(e,r,i,n),Yd(null,e,r,!0,t,n);case 19:return qb(t,e,n);case 22:return $b(t,e,n)}throw Error(ue(156,e.tag))};function d3(t,e){return zw(t,e)}function ZC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function br(t,e,n,r){return new ZC(t,e,n,r)}function zp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function KC(t){if(typeof t=="function")return zp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===sp)return 11;if(t===op)return 14}return 2}function ys(t,e){var n=t.alternate;return n===null?(n=br(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Tc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")zp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Xo:return Zs(n.children,i,s,e);case ip:o=8,i|=8;break;case dd:return t=br(12,n,e,i|2),t.elementType=dd,t.lanes=s,t;case gd:return t=br(13,n,e,i),t.elementType=gd,t.lanes=s,t;case pd:return t=br(19,n,e,i),t.elementType=pd,t.lanes=s,t;case Ew:return Yf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ww:o=10;break e;case bw:o=9;break e;case sp:o=11;break e;case op:o=14;break e;case ts:o=16,r=null;break e}throw Error(ue(130,t==null?t:typeof t,""))}return e=br(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Zs(t,e,n,r){return t=br(7,t,r,e),t.lanes=n,t}function Yf(t,e,n,r){return t=br(22,t,r,e),t.elementType=Ew,t.lanes=n,t.stateNode={isHidden:!1},t}function Ah(t,e,n){return t=br(6,t,null,e),t.lanes=n,t}function lh(t,e,n){return e=br(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function qC(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=G0(0),this.expirationTimes=G0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=G0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vp(t,e,n,r,i,s,o,c,h){return t=new qC(t,e,n,c,h),e===1?(e=1,s===!0&&(e|=8)):e=0,s=br(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tp(s),t}function JC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$o,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function g3(t){if(!t)return Es;t=t._reactInternals;e:{if(ho(t)!==t||t.tag!==1)throw Error(ue(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ue(171))}if(t.tag===1){var n=t.type;if(Xn(n))return db(t,n,e)}return e}function p3(t,e,n,r,i,s,o,c,h){return t=Vp(n,r,!0,t,i,s,o,c,h),t.context=g3(null),n=t.current,r=Fn(),i=vs(n),s=Si(r,i),s.callback=e??null,ps(n,s,i),t.current.lanes=i,ql(t,i,r),Zn(t,r),t}function $f(t,e,n,r){var i=e.current,s=Fn(),o=vs(i);return n=g3(n),e.context===null?e.context=n:e.pendingContext=n,e=Si(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ps(i,e,o),t!==null&&(Vr(t,i,o,s),vc(t,i,o)),o}function rf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function N2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function jp(t,e){N2(t,e),(t=t.alternate)&&N2(t,e)}function e5(){return null}var m3=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gp(t){this._internalRoot=t}Xf.prototype.render=Gp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ue(409));$f(t,e,null,null)};Xf.prototype.unmount=Gp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ro(function(){$f(null,t,null,null)}),e[Li]=null}};function Xf(t){this._internalRoot=t}Xf.prototype.unstable_scheduleHydration=function(t){if(t){var e=Yw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ss.length&&e!==0&&e<ss[n].priority;n++);ss.splice(n,0,t),n===0&&Xw(t)}};function Hp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function U2(){}function t5(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var p=rf(o);s.call(p)}}var o=p3(e,r,t,0,null,!1,!1,"",U2);return t._reactRootContainer=o,t[Li]=o.current,xl(t.nodeType===8?t.parentNode:t),ro(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var p=rf(h);c.call(p)}}var h=Vp(t,0,!1,null,null,!1,!1,"",U2);return t._reactRootContainer=h,t[Li]=h.current,xl(t.nodeType===8?t.parentNode:t),ro(function(){$f(e,h,n,r)}),h}function Kf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var c=i;i=function(){var h=rf(o);c.call(h)}}$f(e,o,t,i)}else o=t5(n,e,t,i,r);return rf(o)}Ww=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ZA(e.pendingLanes);n!==0&&(lp(e,n|1),Zn(e,jt()),!(st&6)&&(Ia=jt()+500,Ms()))}break;case 13:ro(function(){var r=Pi(t,1);if(r!==null){var i=Fn();Vr(r,t,1,i)}}),jp(t,1)}};up=function(t){if(t.tag===13){var e=Pi(t,134217728);if(e!==null){var n=Fn();Vr(e,t,134217728,n)}jp(t,134217728)}};Qw=function(t){if(t.tag===13){var e=vs(t),n=Pi(t,e);if(n!==null){var r=Fn();Vr(n,t,e,r)}jp(t,e)}};Yw=function(){return ht};$w=function(t,e){var n=ht;try{return ht=t,e()}finally{ht=n}};Sd=function(t,e,n){switch(e){case"input":if(yd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Vf(r);if(!i)throw Error(ue(90));xw(r),yd(r,i)}}}break;case"textarea":Cw(t,n);break;case"select":e=n.value,e!=null&&fa(t,!!n.multiple,e,!1)}};Ow=Bp;Dw=ro;var n5={usingClientEntryPoint:!1,Events:[eu,Jo,Vf,Iw,Rw,Bp]},RA={findFiberByHostInstance:Hs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},r5={bundleType:RA.bundleType,version:RA.version,rendererPackageName:RA.rendererPackageName,rendererConfig:RA.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Nw(t),t===null?null:t.stateNode},findFiberByHostInstance:RA.findFiberByHostInstance||e5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xu.isDisabled&&Xu.supportsFiber)try{Bf=Xu.inject(r5),ii=Xu}catch{}}cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=n5;cr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hp(e))throw Error(ue(200));return JC(t,e,null,n)};cr.createRoot=function(t,e){if(!Hp(t))throw Error(ue(299));var n=!1,r="",i=m3;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Vp(t,1,!1,null,null,n,!1,r,i),t[Li]=e.current,xl(t.nodeType===8?t.parentNode:t),new Gp(e)};cr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ue(188)):(t=Object.keys(t).join(","),Error(ue(268,t)));return t=Nw(e),t=t===null?null:t.stateNode,t};cr.flushSync=function(t){return ro(t)};cr.hydrate=function(t,e,n){if(!Zf(e))throw Error(ue(200));return Kf(null,t,e,!0,n)};cr.hydrateRoot=function(t,e,n){if(!Hp(t))throw Error(ue(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=m3;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=p3(e,null,t,1,n??null,i,!1,s,o),t[Li]=e.current,xl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Xf(e)};cr.render=function(t,e,n){if(!Zf(e))throw Error(ue(200));return Kf(null,t,e,!1,n)};cr.unmountComponentAtNode=function(t){if(!Zf(t))throw Error(ue(40));return t._reactRootContainer?(ro(function(){Kf(null,null,t,!1,function(){t._reactRootContainer=null,t[Li]=null})}),!0):!1};cr.unstable_batchedUpdates=Bp;cr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Zf(n))throw Error(ue(200));if(t==null||t._reactInternals===void 0)throw Error(ue(38));return Kf(t,e,n,!1,r)};cr.version="18.2.0-next-9e3b772b8-20220608";function v3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(v3)}catch(t){console.error(t)}}v3(),pw.exports=cr;var Wp=pw.exports,z2=Wp;fd.createRoot=z2.createRoot,fd.hydrateRoot=z2.hydrateRoot;function sf(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const Qp=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),V2=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);V2&&parseFloat(V2[1]);const i5="3.4.14";function Ii(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const xc=typeof process!="object"||String(process)!=="[object process]"||process.browser,s5=typeof window<"u"&&typeof window.orientation<"u",j2=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);j2&&parseFloat(j2[1]);function Ol(t){"@babel/helpers - typeof";return Ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ol(t)}function o5(t,e){if(Ol(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ol(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function a5(t){var e=o5(t,"string");return Ol(e)==="symbol"?e:String(e)}function L(t,e,n){return e=a5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class A5{constructor(e,n){L(this,"name",void 0),L(this,"workerThread",void 0),L(this,"isRunning",!0),L(this,"result",void 0),L(this,"_resolve",()=>{}),L(this,"_reject",()=>{}),this.name=e,this.workerThread=n,this.result=new Promise((r,i)=>{this._resolve=r,this._reject=i})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){Ii(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Ii(this.isRunning),this.isRunning=!1,this._reject(e)}}let uh=class{terminate(){}};const ch=new Map;function l5(t){Ii(t.source&&!t.url||!t.source&&t.url);let e=ch.get(t.source||t.url);return e||(t.url&&(e=u5(t.url),ch.set(t.url,e)),t.source&&(e=y3(t.source),ch.set(t.source,e))),Ii(e),e}function u5(t){if(!t.startsWith("http"))return t;const e=c5(t);return y3(e)}function y3(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function c5(t){return`try {
  importScripts('`.concat(t,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function _3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2?arguments[2]:void 0;const r=n||new Set;if(t){if(G2(t))r.add(t);else if(G2(t.buffer))r.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const i in t)_3(t[i],e,r)}}return n===void 0?Array.from(r):[]}function G2(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}const fh=()=>{};class sg{static isSupported(){return typeof Worker<"u"&&xc||typeof uh<"u"&&!xc}constructor(e){L(this,"name",void 0),L(this,"source",void 0),L(this,"url",void 0),L(this,"terminated",!1),L(this,"worker",void 0),L(this,"onMessage",void 0),L(this,"onError",void 0),L(this,"_loadableURL","");const{name:n,source:r,url:i}=e;Ii(r||i),this.name=n,this.source=r,this.url=i,this.onMessage=fh,this.onError=s=>console.log(s),this.worker=xc?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=fh,this.onError=fh,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||_3(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=l5({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new uh(r,{eval:!1})}else if(this.source)e=new uh(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}class f5{static isSupported(){return sg.isSupported()}constructor(e){L(this,"name","unnamed"),L(this,"source",void 0),L(this,"url",void 0),L(this,"maxConcurrency",1),L(this,"maxMobileConcurrency",1),L(this,"onDebug",()=>{}),L(this,"reuseWorkers",!0),L(this,"props",{}),L(this,"jobQueue",[]),L(this,"idleQueue",[]),L(this,"count",0),L(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:(s,o,c)=>s.done(c),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:(s,o)=>s.error(o);const i=new Promise(s=>(this.jobQueue.push({name:e,onMessage:n,onError:r,onStart:s}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});const r=new A5(n.name,e);e.onMessage=i=>n.onMessage(r,i.type,i.payload),e.onError=i=>n.onError(r,i),n.onStart(r);try{await r.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new sg({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return s5?this.maxMobileConcurrency:this.maxConcurrency}}const h5={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class wi{static isSupported(){return sg.isSupported()}static getWorkerFarm(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return wi._workerFarm=wi._workerFarm||new wi({}),wi._workerFarm.setProps(e),wi._workerFarm}constructor(e){L(this,"props",void 0),L(this,"workerPools",new Map),this.props={...h5},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:r,url:i}=e;let s=this.workerPools.get(n);return s||(s=new f5({name:n,source:r,url:i}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}L(wi,"_workerFarm",void 0);const d5="latest";function g5(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=e[t.id]||{},r="".concat(t.id,"-worker.js");let i=n.workerUrl;if(!i&&t.id==="compression"&&(i=e.workerUrl),e._workerType==="test"&&(i="modules/".concat(t.module,"/dist/").concat(r)),!i){let s=t.version;s==="latest"&&(s=d5);const o=s?"@".concat(s):"";i="https://unpkg.com/@loaders.gl/".concat(t.module).concat(o,"/dist/").concat(r)}return Ii(i),i}function p5(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i5;Ii(t,"no worker provided");const n=t.version;return!(!e||!n)}const m5={},v5=Object.freeze(Object.defineProperty({__proto__:null,default:m5},Symbol.toStringTag,{value:"Module"}));function y5(t,e){return!wi.isSupported()||!xc&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&(e==null?void 0:e.worker)}async function _5(t,e,n,r,i){const s=t.id,o=g5(t,n),h=wi.getWorkerFarm(n).getWorkerPool({name:s,url:o});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const p=await h.startJob("process-on-worker",w5.bind(null,i));return p.postMessage("process",{input:e,options:n,context:r}),await(await p.result).result}async function w5(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:i,input:s,options:o}=r;try{const c=await t(s,o);e.postMessage("done",{id:i,result:c})}catch(c){const h=c instanceof Error?c.message:"unknown error";e.postMessage("error",{id:i,error:h})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}function b5(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),i=new Uint8Array(e);for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}function E5(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e.map(c=>c instanceof ArrayBuffer?new Uint8Array(c):c),i=r.reduce((c,h)=>c+h.byteLength,0),s=new Uint8Array(i);let o=0;for(const c of r)s.set(c,o),o+=c.byteLength;return s.buffer}async function T5(t){const e=[];for await(const n of t)e.push(n);return E5(...e)}let x5="";const H2={};function S5(t){for(const e in H2)if(t.startsWith(e)){const n=H2[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(x5).concat(t)),t}function C5(t){return t&&typeof t=="object"&&t.isBuffer}function w3(t){if(C5(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function b3(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function M5(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}const L5=t=>typeof t=="boolean",ul=t=>typeof t=="function",nu=t=>t!==null&&typeof t=="object",W2=t=>nu(t)&&t.constructor==={}.constructor,P5=t=>t&&typeof t[Symbol.iterator]=="function",k5=t=>t&&typeof t[Symbol.asyncIterator]=="function",go=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,po=t=>typeof Blob<"u"&&t instanceof Blob,I5=t=>t&&typeof t=="object"&&t.isBuffer,R5=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||nu(t)&&ul(t.tee)&&ul(t.cancel)&&ul(t.getReader),O5=t=>nu(t)&&ul(t.read)&&ul(t.pipe)&&L5(t.readable),E3=t=>R5(t)||O5(t),D5=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,F5=/^([-\w.]+\/[-\w.+]+)/;function B5(t){const e=F5.exec(t);return e?e[1]:t}function Q2(t){const e=D5.exec(t);return e?e[1]:""}const T3=/\?.*/;function N5(t){const e=t.match(T3);return e&&e[0]}function Yp(t){return t.replace(T3,"")}function qf(t){return go(t)?t.url:po(t)?t.name||"":typeof t=="string"?t:""}function $p(t){if(go(t)){const e=t,n=e.headers.get("content-type")||"",r=Yp(e.url);return B5(n)||Q2(r)}return po(t)?t.type||"":typeof t=="string"?Q2(t):""}function U5(t){return go(t)?t.headers["content-length"]||-1:po(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}async function x3(t){if(go(t))return t;const e={},n=U5(t);n>=0&&(e["content-length"]=String(n));const r=qf(t),i=$p(t);i&&(e["content-type"]=i);const s=await j5(t);s&&(e["x-first-bytes"]=s),typeof t=="string"&&(t=new TextEncoder().encode(t));const o=new Response(t,{headers:e});return Object.defineProperty(o,"url",{value:r}),o}async function z5(t){if(!t.ok){const e=await V5(t);throw new Error(e)}}async function V5(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let r=t.statusText;n.includes("application/json")&&(r+=" ".concat(await t.text())),e+=r,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}async function j5(t){if(typeof t=="string")return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const n=t.slice(0,5);return await new Promise(r=>{const i=new FileReader;i.onload=s=>{var o;return r(s==null||(o=s.target)===null||o===void 0?void 0:o.result)},i.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const n=t.slice(0,5),r=G5(n);return"data:base64,".concat(r)}return null}function G5(t){let e="";const n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}async function Y2(t,e){if(typeof t=="string"){t=S5(t);let n=e;return e!=null&&e.fetch&&typeof(e==null?void 0:e.fetch)!="function"&&(n=e.fetch),await fetch(t,n)}return await x3(t)}function H5(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const n=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent;return!!(n&&n.indexOf("Electron")>=0)}function ru(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||H5()}const Zu=globalThis.window||globalThis.self||globalThis.global,OA=globalThis.process||{},S3=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";ru();function W5(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}let Q5=class{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";this.storage=void 0,this.id=void 0,this.config=void 0,this.storage=W5(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}};function Y5(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function $5(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function hh(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const s=t.width*n,o=t.height*n,c=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),c]}let of;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(of||(of={}));const X5=10;function $2(t){return typeof t!="string"?t:(t=t.toUpperCase(),of[t]||of.WHITE)}function Z5(t,e,n){if(!ru&&typeof t=="string"){if(e){const r=$2(e);t="\x1B[".concat(r,"m").concat(t,"\x1B[39m")}if(n){const r=$2(n);t="\x1B[".concat(r+X5,"m").concat(t,"\x1B[49m")}}return t}function K5(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n),i=t;for(const s of r){const o=i[s];typeof o=="function"&&(e.find(c=>s===c)||(i[s]=o.bind(t)))}}function af(t,e){if(!t)throw new Error(e||"Assertion failed")}function Fo(){let t;if(ru()&&Zu.performance){var e,n;t=Zu==null||(e=Zu.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in OA){var r;const i=OA==null||(r=OA.hrtime)===null||r===void 0?void 0:r.call(OA);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const Bo={debug:ru()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},q5={enabled:!0,level:0};function vr(){}const X2={},Z2={once:!0};let Xp=class{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};this.id=void 0,this.VERSION=S3,this._startTs=Fo(),this._deltaTs=Fo(),this._storage=void 0,this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new Q5("__probe-".concat(this.id,"__"),q5),this.timeStamp("".concat(this.id," started")),K5(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Fo()-this._startTs).toPrecision(10))}getDelta(){return Number((Fo()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){af(e,n)}warn(e){return this._getLogFunction(0,e,Bo.warn,arguments,Z2)}error(e){return this._getLogFunction(0,e,Bo.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,Bo.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Bo.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){return this._getLogFunction(e,n,Bo.debug||Bo.info,arguments,Z2)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||vr,r&&[r],{tag:n8(n)}):vr}image(e){let{logLevel:n,priority:r,image:i,message:s="",scale:o=1}=e;return this._shouldLog(n||r)?ru()?t8({image:i,message:s,scale:o}):e8():vr}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||vr)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=K2({logLevel:e,message:n,opts:r}),{collapsed:s}=r;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||vr)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=C3(e)}_getLogFunction(e,n,r,i,s){if(this._shouldLog(e)){s=K2({logLevel:e,message:n,args:i,opts:s}),r=r||s.method,af(r),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=Fo();const o=s.tag||s.message;if(s.once&&o)if(!X2[o])X2[o]=Fo();else return vr;return n=J5(this.id,s.message,s),r.bind(console,n,...s.args)}return vr}};Xp.VERSION=S3;function C3(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return af(Number.isFinite(e)&&e>=0),e}function K2(t){const{logLevel:e,message:n}=t;t.logLevel=C3(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return af(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function J5(t,e,n){if(typeof e=="string"){const r=n.time?$5(Y5(n.total)):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),e=Z5(e,n.color,n.background)}return e}function e8(t){return console.warn("removed"),vr}function t8(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){const s=new Image;return s.onload=()=>{const o=hh(s,n,r);console.log(...o)},s.src=e,vr}const i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...hh(e,n,r)),vr;if(i.toLowerCase()==="canvas"){const s=new Image;return s.onload=()=>console.log(...hh(s,n,r)),s.src=e.toDataURL(),vr}return vr}function n8(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const q2=new Xp({id:"loaders.gl"});class r8{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class i8{constructor(){L(this,"console",void 0),this.console=console}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.log.bind(this.console,...n)}info(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.info.bind(this.console,...n)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.warn.bind(this.console,...n)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.error.bind(this.console,...n)}}const M3={fetch:null,mimeType:void 0,nothrow:!1,log:new i8,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:Qp,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},s8={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function L3(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const P3=()=>{const t=L3();return t.globalOptions=t.globalOptions||{...M3},t.globalOptions};function o8(t,e,n,r){return n=n||[],n=Array.isArray(n)?n:[n],a8(t,n),l8(e,t,r)}function a8(t,e){J2(t,null,M3,s8,e);for(const n of e){const r=t&&t[n.id]||{},i=n.options&&n.options[n.id]||{},s=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};J2(r,n.id,i,s,e)}}function J2(t,e,n,r,i){const s=e||"Top level",o=e?"".concat(e,"."):"";for(const c in t){const h=!e&&nu(t[c]),p=c==="baseUri"&&!e,_=c==="workerUrl"&&e;if(!(c in n)&&!p&&!_){if(c in r)q2.warn("".concat(s," loader option '").concat(o).concat(c,"' no longer supported, use '").concat(r[c],"'"))();else if(!h){const y=A8(c,i);q2.warn("".concat(s," loader option '").concat(o).concat(c,"' not recognized. ").concat(y))()}}}}function A8(t,e){const n=t.toLowerCase();let r="";for(const i of e)for(const s in i.options){if(t===s)return"Did you mean '".concat(i.id,".").concat(s,"'?");const o=s.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(r=r||"Did you mean '".concat(i.id,".").concat(s,"'?"))}return r}function l8(t,e,n){const i={...t.options||{}};return u8(i,n),i.log===null&&(i.log=new r8),ev(i,P3()),ev(i,e),i}function ev(t,e){for(const n in e)if(n in e){const r=e[n];W2(r)&&W2(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function u8(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function Zp(t){var e;return t?(Array.isArray(t)&&(t=t[0]),Array.isArray((e=t)===null||e===void 0?void 0:e.extensions)):!1}function Kp(t){var e,n;sf(t,"null loader"),sf(Zp(t),"invalid loader");let r;return Array.isArray(t)&&(r=t[1],t=t[0],t={...t,options:{...t.options,...r}}),((e=t)!==null&&e!==void 0&&e.parseTextSync||(n=t)!==null&&n!==void 0&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const k3=()=>{const t=L3();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function c8(t){const e=k3();t=Array.isArray(t)?t:[t];for(const n of t){const r=Kp(n);e.find(i=>r===i)||e.unshift(r)}}function f8(){return k3()}const h8=new Xp({id:"loaders.gl"}),d8=/\.([^.]+)$/;async function g8(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!I3(t))return null;let i=tv(t,e,{...n,nothrow:!0},r);if(i)return i;if(po(t)&&(t=await t.slice(0,10).arrayBuffer(),i=tv(t,e,n,r)),!i&&!(n!=null&&n.nothrow))throw new Error(R3(t));return i}function tv(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!I3(t))return null;if(e&&!Array.isArray(e))return Kp(e);let i=[];e&&(i=i.concat(e)),n!=null&&n.ignoreRegisteredLoaders||i.push(...f8()),m8(i);const s=p8(t,i,n,r);if(!s&&!(n!=null&&n.nothrow))throw new Error(R3(t));return s}function p8(t,e,n,r){const i=qf(t),s=$p(t),o=Yp(i)||(r==null?void 0:r.url);let c=null,h="";if(n!=null&&n.mimeType&&(c=dh(e,n==null?void 0:n.mimeType),h="match forced by supplied MIME type ".concat(n==null?void 0:n.mimeType)),c=c||v8(e,o),h=h||(c?"matched url ".concat(o):""),c=c||dh(e,s),h=h||(c?"matched MIME type ".concat(s):""),c=c||_8(e,t),h=h||(c?"matched initial data ".concat(O3(t)):""),c=c||dh(e,n==null?void 0:n.fallbackMimeType),h=h||(c?"matched fallback MIME type ".concat(s):""),h){var p;h8.log(1,"selectLoader selected ".concat((p=c)===null||p===void 0?void 0:p.name,": ").concat(h,"."))}return c}function I3(t){return!(t instanceof Response&&t.status===204)}function R3(t){const e=qf(t),n=$p(t);let r="No valid loader found (";r+=e?"".concat(b3(e),", "):"no url provided, ",r+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const i=t?O3(t):"";return r+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",r+=")",r}function m8(t){for(const e of t)Kp(e)}function v8(t,e){const n=e&&d8.exec(e),r=n&&n[1];return r?y8(t,r):null}function y8(t,e){e=e.toLowerCase();for(const n of t)for(const r of n.extensions)if(r.toLowerCase()===e)return n;return null}function dh(t,e){for(const n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function _8(t,e){if(!e)return null;for(const n of t)if(typeof e=="string"){if(w8(e,n))return n}else if(ArrayBuffer.isView(e)){if(nv(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&nv(e,0,n))return n;return null}function w8(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(r=>t.startsWith(r))}function nv(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(i=>b8(t,e,n,i))}function b8(t,e,n,r){if(r instanceof ArrayBuffer)return b5(r,t,r.byteLength);switch(typeof r){case"function":return r(t,n);case"string":const i=og(t,e,r.length);return r===i;default:return!1}}function O3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?og(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?og(t,0,e):""}function og(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let i="";for(let s=0;s<n;s++)i+=String.fromCharCode(r.getUint8(e+s));return i}const E8=256*1024;function*T8(t,e){const n=(e==null?void 0:e.chunkSize)||E8;let r=0;const i=new TextEncoder;for(;r<t.length;){const s=Math.min(t.length-r,n),o=t.slice(r,r+s);r+=s,yield i.encode(o)}}const x8=256*1024;function S8(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const{chunkSize:n=x8}=e;let r=0;for(;r<t.byteLength;){const i=Math.min(t.byteLength-r,n),s=new ArrayBuffer(i),o=new Uint8Array(t,r,i);new Uint8Array(s).set(o),r+=i,yield s}}()}const C8=1024*1024;async function*M8(t,e){const n=(e==null?void 0:e.chunkSize)||C8;let r=0;for(;r<t.size;){const i=r+n,s=await t.slice(r,i).arrayBuffer();r=i,yield s}}function rv(t,e){return Qp?L8(t,e):P8(t)}async function*L8(t,e){const n=t.getReader();let r;try{for(;;){const i=r||n.read();e!=null&&e._streamReadAhead&&(r=n.read());const{done:s,value:o}=await i;if(s)return;yield w3(o)}}catch{n.releaseLock()}}async function*P8(t,e){for await(const n of t)yield w3(n)}function k8(t,e){if(typeof t=="string")return T8(t,e);if(t instanceof ArrayBuffer)return S8(t,e);if(po(t))return M8(t,e);if(E3(t))return rv(t,e);if(go(t))return rv(t.body,e);throw new Error("makeIterator")}const D3="Cannot convert supplied data type";function I8(t,e,n){if(e.text&&typeof t=="string")return t;if(I5(t)&&(t=t.buffer),t instanceof ArrayBuffer){const r=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let r=t.buffer;const i=t.byteLength||t.length;return(t.byteOffset!==0||i!==r.byteLength)&&(r=r.slice(t.byteOffset,t.byteOffset+i)),r}throw new Error(D3)}async function R8(t,e,n){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||r)return I8(t,e);if(po(t)&&(t=await x3(t)),go(t)){const i=t;return await z5(i),e.binary?await i.arrayBuffer():await i.text()}if(E3(t)&&(t=k8(t,n)),P5(t)||k5(t))return T5(t);throw new Error(D3)}function F3(t,e){const n=P3(),r=t||n;return typeof r.fetch=="function"?r.fetch:nu(r.fetch)?i=>Y2(i,r):e!=null&&e.fetch?e==null?void 0:e.fetch:Y2}function O8(t,e,n){if(n)return n;const r={fetch:F3(e,t),...t};if(r.url){const i=Yp(r.url);r.baseUrl=i,r.queryString=N5(r.url),r.filename=b3(i),r.baseUrl=M5(i)}return Array.isArray(r.loaders)||(r.loaders=null),r}function D8(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...r]:r}return n&&n.length?n:null}async function qp(t,e,n,r){Ii(!r||typeof r=="object"),e&&!Array.isArray(e)&&!Zp(e)&&(r=void 0,n=e,e=void 0),t=await t,n=n||{};const i=qf(t),o=D8(e,r),c=await g8(t,o,n);return c?(n=o8(n,c,o,i),r=O8({url:i,parse:qp,loaders:o},n,r||null),await F8(c,t,n,r)):null}async function F8(t,e,n,r){if(p5(t),go(e)){const i=e,{ok:s,redirected:o,status:c,statusText:h,type:p,url:_}=i,y=Object.fromEntries(i.headers.entries());r.response={headers:y,ok:s,redirected:o,status:c,statusText:h,type:p,url:_}}if(e=await R8(e,t,n),t.parseTextSync&&typeof e=="string")return n.dataType="text",t.parseTextSync(e,n,r,t);if(y5(t,n))return await _5(t,e,n,r,qp);if(t.parseText&&typeof e=="string")return await t.parseText(e,n,r,t);if(t.parse)return await t.parse(e,n,r,t);throw Ii(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}async function Af(t,e,n,r){!Array.isArray(e)&&!Zp(e)&&(n=e,e=void 0);const i=F3(n);let s=t;return typeof t=="string"&&(s=await i(t)),po(t)&&(s=await i(t)),await qp(s,e,n)}const B8="3.4.14",{_parseImageNode:N8}=globalThis,ag=typeof Image<"u",Ag=typeof ImageBitmap<"u",U8=!!N8,lg=Qp?!0:U8;function z8(t){switch(t){case"auto":return Ag||ag||lg;case"imagebitmap":return Ag;case"image":return ag;case"data":return lg;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}function V8(){if(Ag)return"imagebitmap";if(ag)return"image";if(lg)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function j8(t){const e=H8(t);if(!e)throw new Error("Not an image");return e}function G8(t){switch(j8(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function H8(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}const W8=/^data:image\/svg\+xml/,Q8=/\.svg((\?|#).*)?$/;function Jp(t){return t&&(W8.test(t)||Q8.test(t))}function Y8(t,e){if(Jp(e)){let r=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(r))}return B3(t,e)}function B3(t,e){if(Jp(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function N3(t,e,n){const r=Y8(t,n),i=self.URL||self.webkitURL,s=typeof r!="string"&&i.createObjectURL(r);try{return await $8(s||r,e)}finally{s&&i.revokeObjectURL(s)}}async function $8(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(await n.decode(),n):await new Promise((r,i)=>{try{n.onload=()=>r(n),n.onerror=s=>i(new Error("Could not load image ".concat(t,": ").concat(s)))}catch(s){i(s)}})}const X8={};let iv=!0;async function Z8(t,e,n){let r;Jp(n)?r=await N3(t,e,n):r=B3(t,n);const i=e&&e.imagebitmap;return await K8(r,i)}async function K8(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if((q8(e)||!iv)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),iv=!1}return await createImageBitmap(t)}function q8(t){for(const e in t||X8)return!1;return!0}function J8(t){return!rM(t,"ftyp",4)||!(t[8]&96)?null:eM(t)}function eM(t){switch(tM(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function tM(t,e,n){return String.fromCharCode(...t.slice(e,n))}function nM(t){return[...t].map(e=>e.charCodeAt(0))}function rM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const r=nM(e);for(let i=0;i<r.length;++i)if(r[i]!==t[i+n])return!1;return!0}const ti=!1,cl=!0;function U3(t){const e=iu(t);return sM(e)||AM(e)||oM(e)||aM(e)||iM(e)}function iM(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),n=J8(e);return n?{mimeType:n.mimeType,width:0,height:0}:null}function sM(t){const e=iu(t);return e.byteLength>=24&&e.getUint32(0,ti)===2303741511?{mimeType:"image/png",width:e.getUint32(16,ti),height:e.getUint32(20,ti)}:null}function oM(t){const e=iu(t);return e.byteLength>=10&&e.getUint32(0,ti)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,cl),height:e.getUint16(8,cl)}:null}function aM(t){const e=iu(t);return e.byteLength>=14&&e.getUint16(0,ti)===16973&&e.getUint32(2,cl)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,cl),height:e.getUint32(22,cl)}:null}function AM(t){const e=iu(t);if(!(e.byteLength>=3&&e.getUint16(0,ti)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:r,sofMarkers:i}=lM();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,ti);if(i.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,ti),width:e.getUint16(s+7,ti)};if(!r.has(o))return null;s+=2,s+=e.getUint16(s,ti)}return null}function lM(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function iu(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function uM(t,e){const{mimeType:n}=U3(t)||{},r=globalThis._parseImageNode;return sf(r),await r(t,n)}async function cM(t,e,n){e=e||{};const i=(e.image||{}).type||"auto",{url:s}=n||{},o=fM(i);let c;switch(o){case"imagebitmap":c=await Z8(t,e,s);break;case"image":c=await N3(t,e,s);break;case"data":c=await uM(t);break;default:sf(!1)}return i==="data"&&(c=G8(c)),c}function fM(t){switch(t){case"auto":case"data":return V8();default:return z8(t),t}}const hM=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],dM=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],gM={image:{type:"auto",decode:!0}},pM={id:"image",module:"images",name:"Images",version:B8,mimeTypes:dM,extensions:hM,parse:cM,tests:[t=>!!U3(new DataView(t))],options:gM};function z3(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const n=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent;return!!(n&&n.indexOf("Electron")>=0)}function Ni(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||z3()}const Sc={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,process:typeof process=="object"&&process},Ku=Sc.window||Sc.self||Sc.global,DA=Sc.process||{},V3=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Ni();const gh=globalThis;function j3(t){if(!Ni())return"Node";if(z3())return"Electron";const n=(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i?"IE":gh.chrome?"Chrome":gh.safari?"Safari":gh.mozInnerScreenX?"Firefox":"Unknown"}function mM(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}class vM{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";L(this,"storage",void 0),L(this,"id",void 0),L(this,"config",void 0),this.storage=mM(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function yM(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function _M(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function ph(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const s=t.width*n,o=t.height*n,c=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),c]}let lf;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(lf||(lf={}));function sv(t){return typeof t=="string"?lf[t.toUpperCase()]||lf.WHITE:t}function wM(t,e,n){return!Ni&&typeof t=="string"&&(e&&(e=sv(e),t="\x1B[".concat(e,"m").concat(t,"\x1B[39m")),n&&(e=sv(n),t="\x1B[".concat(n+10,"m").concat(t,"\x1B[49m"))),t}function bM(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n);for(const i of r)typeof t[i]=="function"&&(e.find(s=>i===s)||(t[i]=t[i].bind(t)))}function uf(t,e){if(!t)throw new Error(e||"Assertion failed")}function No(){let t;if(Ni&&"performance"in Ku){var e,n;t=Ku==null||(e=Ku.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in DA){var r;const i=DA==null||(r=DA.hrtime)===null||r===void 0?void 0:r.call(DA);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const Uo={debug:Ni&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},EM={enabled:!0,level:0};function yr(){}const ov={},av={once:!0};class em{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};L(this,"id",void 0),L(this,"VERSION",V3),L(this,"_startTs",No()),L(this,"_deltaTs",No()),L(this,"_storage",void 0),L(this,"userData",{}),L(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new vM("__probe-".concat(this.id,"__"),EM),this.timeStamp("".concat(this.id," started")),bM(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((No()-this._startTs).toPrecision(10))}getDelta(){return Number((No()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){uf(e,n)}warn(e){return this._getLogFunction(0,e,Uo.warn,arguments,av)}error(e){return this._getLogFunction(0,e,Uo.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,Uo.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Uo.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return this._getLogFunction(e,n,Uo.debug||Uo.info,arguments,av)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||yr,r&&[r],{tag:CM(n)}):yr}image(e){let{logLevel:n,priority:r,image:i,message:s="",scale:o=1}=e;return this._shouldLog(n||r)?Ni?SM({image:i,message:s,scale:o}):xM():yr}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||yr)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=Av({logLevel:e,message:n,opts:r}),{collapsed:s}=r;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||yr)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=G3(e)}_getLogFunction(e,n,r,i,s){if(this._shouldLog(e)){s=Av({logLevel:e,message:n,args:i,opts:s}),r=r||s.method,uf(r),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=No();const o=s.tag||s.message;if(s.once)if(!ov[o])ov[o]=No();else return yr;return n=TM(this.id,s.message,s),r.bind(console,n,...s.args)}return yr}}L(em,"VERSION",V3);function G3(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return uf(Number.isFinite(e)&&e>=0),e}function Av(t){const{logLevel:e,message:n}=t;t.logLevel=G3(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return uf(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function TM(t,e,n){if(typeof e=="string"){const r=n.time?_M(yM(n.total)):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),e=wM(e,n.color,n.background)}return e}function xM(t){return console.warn("removed"),yr}function SM(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){const s=new Image;return s.onload=()=>{const o=ph(s,n,r);console.log(...o)},s.src=e,yr}const i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...ph(e,n,r)),yr;if(i.toLowerCase()==="canvas"){const s=new Image;return s.onload=()=>console.log(...ph(s,n,r)),s.src=e.toDataURL(),yr}return yr}function CM(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const at=new em({id:"deck"});let ug={};function MM(t){ug=t}function xn(t,e,n,r){at.level>0&&ug[t]&&ug[t].call(null,e,n,r)}function LM(t){const e=t[0],n=t[t.length-1];return e==="{"&&n==="}"||e==="["&&n==="]"}const PM={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:LM,parseTextSync:JSON.parse};function kM(){const t="8.9.28",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error("deck.gl - multiple versions detected: ".concat(e," vs ").concat(t));return e||(at.log(1,"deck.gl ".concat(t))(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:at,_registerLoggers:MM},c8([PM,[pM,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}const IM=kM(),ft={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(ft,"IDENTITY",{get:()=>(at.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const ni={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Ra={common:0,meters:1,pixels:2},lv={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},ke=new em({id:"luma.gl"});function On(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const RM="Invalid WebGLRenderingContext",OM="Requires WebGL2";function Jf(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&Number.isFinite(t._version))}function Je(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function DM(t){return Je(t)?t:null}function e0(t){return On(Jf(t),RM),t}function Cn(t){return On(Je(t),OM),t}const qA={};function FM(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}function BM(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)}function NM(t,e){qA[t]=!0,FM(e)}function UM(t){const e=t.getError;t.getError=function(){let r;do r=e.apply(t),r!==0&&(qA[r]=!0);while(r!==0);for(r in qA)if(qA[r])return delete qA[r],parseInt(r,10);return 0}}const su=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let r=0;r<this.attribs.length;r++){const i=new t.VertexAttrib(n);this.attribs[r]=i}this.maxAttrib=0};su.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};su.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const mo=function(e){const n=this;this.gl=e,UM(e);const r=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:r.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const c=o.attribs[s];return c.enabled=!0,r.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const c=o.attribs[s];return c.enabled=!1,r.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:n.currentArrayBuffer=o;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=o;break}return r.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){const h=n.currentVertexArrayObject.attribs[s];switch(o){case 34975:return h.buffer;case 34338:return h.enabled;case 34339:return h.size;case 34340:return h.stride;case 34341:return h.type;case 34922:return h.normalized;default:return r.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,c,h,p,_){const y=n.currentVertexArrayObject;y.maxAttrib=Math.max(y.maxAttrib,s);const w=y.attribs[s];return w.buffer=n.currentArrayBuffer,w.size=o,w.type=c,w.normalized=h,w.stride=p,w.offset=_,w.recache(),r.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{BM("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};mo.prototype.VERTEX_ARRAY_BINDING_OES=34229;mo.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let r=0;r<this.vertexArrayObjects.length;++r)this.vertexArrayObjects.isAlive=!1;const n=this.gl;this.maxVertexAttribs=n.getParameter(34921),this.defaultVertexArrayObject=new su(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};mo.prototype.createVertexArrayOES=function(){const e=new su(this);return this.vertexArrayObjects.push(e),e};mo.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)};mo.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof su&&e.hasBeenBound&&e.ext===this)};mo.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive){NM(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const r=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(i===s)return;(!i||s.elementArrayBuffer!==i.elementArrayBuffer)&&r.bindBuffer.call(n,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer;const c=Math.max(i?i.maxAttrib:0,s.maxAttrib);for(let h=0;h<=c;h++){const p=s.attribs[h],_=i?i.attribs[h]:null;if((!i||p.enabled!==_.enabled)&&(p.enabled?r.enableVertexAttribArray.call(n,h):r.disableVertexAttribArray.call(n,h)),p.enabled){let y=!1;(!i||p.buffer!==_.buffer)&&(o!==p.buffer&&(r.bindBuffer.call(n,34962,p.buffer),o=p.buffer),y=!0),(y||p.cached!==_.cached)&&r.vertexAttribPointer.call(n,h,p.size,p.type,p.normalized,p.stride,p.offset)}}this.currentArrayBuffer!==o&&r.bindBuffer.call(n,34962,this.currentArrayBuffer)};function zM(t){if(typeof t.createVertexArray=="function")return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const i=e.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};const n=t.getExtension;t.getExtension=function(i){const s=n.call(this,i);return s||(i!=="OES_vertex_array_object"?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new mo(this)),this.__OESVertexArrayObject))}}const uv="OES_element_index",cv="WEBGL_draw_buffers",VM="EXT_disjoint_timer_query",jM="EXT_disjoint_timer_query_webgl2",GM="EXT_texture_filter_anisotropic",fv="WEBGL_debug_renderer_info",HM=35723,WM=4352,QM=36795,YM=34047,$M=37445,XM=37446,_t=t=>Je(t)?void 0:0,ZM={3074:t=>Je(t)?void 0:36064,[HM]:t=>Je(t)?void 0:WM,35977:_t,32937:_t,[QM]:(t,e)=>{const n=Je(t)?t.getExtension(jM):t.getExtension(VM);return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},[$M]:(t,e)=>{const n=t.getExtension(fv);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},[XM]:(t,e)=>{const n=t.getExtension(fv);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},[YM]:(t,e)=>{const n=t.luma.extensions[GM];return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:_t,35071:_t,37447:_t,36063:(t,e)=>{if(!Je(t)){const n=t.getExtension(cv);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:_t,35374:_t,35377:_t,34852:t=>{if(!Je(t)){const e=t.getExtension(cv);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(uv)?2147483647:65535,33001:t=>t.getExtension(uv)?16777216:65535,33e3:t=>16777216,37157:_t,35373:_t,35657:_t,36183:_t,37137:_t,34045:_t,35978:_t,35979:_t,35968:_t,35376:_t,35375:_t,35659:_t,37154:_t,35371:_t,35658:_t,35076:_t,35077:_t,35380:_t};function KM(t,e,n){const r=ZM[n],i=typeof r=="function"?r(t,e,n):r;return i!==void 0?i:e(n)}const qM="OES_vertex_array_object",H3="ANGLE_instanced_arrays",JM="WEBGL_draw_buffers",eL="EXT_disjoint_timer_query",tL="EXT_texture_filter_anisotropic",nL="VertexArray requires WebGL2 or OES_vertex_array_object extension";function rL(t,e){return{webgl2:Je(t),ext:t.getExtension(e)}}const W3={[qM]:{meta:{suffix:"OES"},createVertexArray:()=>{On(!1,nL)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[H3]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){On(e===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[JM]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{On(!1)}},[eL]:{meta:{suffix:"EXT"},createQuery:()=>{On(!1)},deleteQuery:()=>{On(!1)},beginQuery:()=>{On(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},mh={readBuffer:(t,e,n)=>{Je(t)&&e(n)},getVertexAttrib:(t,e,n,r)=>{const{webgl2:i,ext:s}=rL(t,H3);let o;switch(r){case 35069:o=i?void 0:!1;break;case 35070:o=!i&&!s?0:void 0;break}return o!==void 0?o:e(n,r)},getProgramParameter:(t,e,n,r)=>{if(!Je(t))switch(r){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return e(n,r)},getInternalformatParameter:(t,e,n,r,i)=>{if(!Je(t))switch(i){case 32937:return new Int32Array([0])}return t.getInternalformatParameter(n,r,i)},getTexParameter(t,e,n,r){switch(r){case 34046:const{extensions:i}=t.luma,s=i[tL];r=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return e(n,r)},getParameter:KM,hint(t,e,n,r){return e(n,r)}};function iL(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(zM(t),sL(t),aL(t,W3),oL(t,{target:e,target2:t}),e.polyfilled=!0),t}globalThis.polyfillContext=iL;function sL(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}function oL(t,e){let{target:n,target2:r}=e;Object.keys(mh).forEach(i=>{if(typeof mh[i]=="function"){const s=t[i]?t[i].bind(t):()=>{},o=mh[i].bind(null,t,s);n[i]=o,r[i]=o}})}function aL(t,e){for(const n of Object.getOwnPropertyNames(e))n!=="overrides"&&AL(t,{extension:n,target:t.luma,target2:t})}function AL(t,e){let{extension:n,target:r,target2:i}=e;const s=W3[n];On(s);const{meta:o={}}=s,{suffix:c=""}=o,h=t.getExtension(n);for(const p of Object.keys(s)){const _="".concat(p).concat(c);let y=null;p==="meta"||typeof t[p]=="function"||(h&&typeof h[_]=="function"?y=function(){return h[_](...arguments)}:typeof s[p]=="function"&&(y=s[p].bind(r))),y&&(r[p]=y,i[p]=y)}}const tm={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},Zi=(t,e,n)=>e?t.enable(n):t.disable(n),hv=(t,e,n)=>t.hint(n,e),qn=(t,e,n)=>t.pixelStorei(n,e),lL=(t,e)=>{const n=Je(t)?36009:36160;return t.bindFramebuffer(n,e)},uL=(t,e)=>t.bindFramebuffer(36008,e);function FA(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const cL={3042:Zi,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:Zi,2885:(t,e)=>t.cullFace(e),2929:Zi,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:Zi,35723:hv,36006:lL,2886:(t,e)=>t.frontFace(e),33170:hv,2849:(t,e)=>t.lineWidth(e),32823:Zi,32824:"polygonOffset",10752:"polygonOffset",35977:Zi,32938:"sampleCoverage",32939:"sampleCoverage",3089:Zi,3088:(t,e)=>t.scissor(...e),2960:Zi,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:qn,3317:qn,37440:qn,37441:qn,37443:qn,3330:qn,3332:qn,3331:qn,36010:uL,3314:qn,32878:qn,3316:qn,3315:qn,32877:qn,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=FA(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=FA(e)&&e.length===2?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=FA(e)?e:[e,e];const[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=FA(e)&&e.length===3?[...e,...e]:e;const[n,r,i,s,o,c]=e;t.stencilFuncSeparate(1028,n,r,i),t.stencilFuncSeparate(1029,s,o,c)},stencilOp:(t,e)=>{e=FA(e)&&e.length===3?[...e,...e]:e;const[n,r,i,s,o,c]=e;t.stencilOpSeparate(1028,n,r,i),t.stencilOpSeparate(1029,s,o,c)},viewport:(t,e)=>t.viewport(...e)};function Ft(t,e,n){return e[t]!==void 0?e[t]:n[t]}const fL={blendEquation:(t,e,n)=>t.blendEquationSeparate(Ft(32777,e,n),Ft(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(Ft(32969,e,n),Ft(32968,e,n),Ft(32971,e,n),Ft(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(Ft(32824,e,n),Ft(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(Ft(32938,e,n),Ft(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,Ft(2962,e,n),Ft(2967,e,n),Ft(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,Ft(34816,e,n),Ft(36003,e,n),Ft(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,Ft(2964,e,n),Ft(2965,e,n),Ft(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,Ft(34817,e,n),Ft(34818,e,n),Ft(34819,e,n))},dv={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,r,i)=>t({32773:new Float32Array([e,n,r,i])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,r,i)=>t({32969:e,32968:n,32971:r,32970:i}),clearColor:(t,e,n,r,i)=>t({3106:new Float32Array([e,n,r,i])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,r,i)=>t({3107:[e,n,r,i]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,r,i)=>t({3088:new Int32Array([e,n,r,i])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[e===1028?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({2962:e,2967:n,2963:r,34816:e,36003:n,36004:r}),stencilFuncSeparate:(t,e,n,r,i)=>t({[e===1028?2962:34816]:n,[e===1028?2967:36003]:r,[e===1028?2963:36004]:i}),stencilOp:(t,e,n,r)=>t({2964:e,2965:n,2966:r,34817:e,34818:n,34819:r}),stencilOpSeparate:(t,e,n,r,i)=>t({[e===1028?2964:34817]:n,[e===1028?2965:34818]:r,[e===1028?2966:34819]:i}),viewport:(t,e,n,r,i)=>t({2978:[e,n,r,i]})},Xr=(t,e)=>t.isEnabled(e),gv={3042:Xr,2884:Xr,2929:Xr,3024:Xr,32823:Xr,32926:Xr,32928:Xr,3089:Xr,2960:Xr,35977:Xr};function Q3(t){for(const e in t)return!1;return!0}function hL(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}function pv(t,e){const n=t[e].bind(t);t[e]=function(){const i=arguments.length<=0?void 0:arguments[0];return i in t.state.cache?t.state.enable?t.state.cache[i]:n(...arguments):n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function dL(t,e,n){const r=t[e].bind(t);t[e]=function(){for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];const{valueChanged:h,oldValue:p}=n(t.state._updateCache,...o);return h&&r(...o),p},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function gL(t){const e=t.useProgram.bind(t);t.useProgram=function(r){t.state.program!==r&&(e(r),t.state.program=r)}}class pL{constructor(e){let{copyState:n=!1,log:r=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?vL(e):Object.assign({},tm),this.log=r,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){On(this.stateStack.length>0);const e=this.stateStack[this.stateStack.length-1];Ri(this.gl,e),this.stateStack.pop()}_updateCache(e){let n=!1,r;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in e){On(s!==void 0);const o=e[s],c=this.cache[s];hL(o,c)||(n=!0,r=c,i&&!(s in i)&&(i[s]=c),this.cache[s]=o)}return{valueChanged:n,oldValue:r}}}function Y3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{enable:n=!0,copyState:r}=e;if(On(r!==void 0),!t.state){const{polyfillContext:i}=globalThis;i&&i(t),t.state=new pL(t,{copyState:r}),gL(t);for(const s in dv){const o=dv[s];dL(t,s,o)}pv(t,"getParameter"),pv(t,"isEnabled")}return t.state.enable=n,t}function mL(t){t.state||Y3(t,{copyState:!1}),t.state.push()}function mv(t){On(t.state),t.state.pop()}function Ri(t,e){if(On(Jf(t),"setParameters requires a WebGL context"),Q3(e))return;const n={};for(const i in e){const s=Number(i),o=cL[i];o&&(typeof o=="string"?n[o]=!0:o(t,e[i],s))}const r=t.state&&t.state.cache;if(r)for(const i in n){const s=fL[i];s(t,e,r)}}function vL(t,e){if(e=e||tm,typeof e=="number"){const i=e,s=gv[i];return s?s(t,i):t.getParameter(i)}const n=Array.isArray(e)?e:Object.keys(e),r={};for(const i of n){const s=gv[i];r[i]=s?s(t,Number(i)):t.getParameter(Number(i))}return r}function yL(t){Ri(t,tm)}function jr(t,e,n){if(Q3(e))return n(t);const{nocatch:r=!0}=e;mL(t),Ri(t,e);let i;if(r)i=n(t),mv(t);else try{i=n(t)}finally{mv(t)}return i}function Oa(t){const{luma:e}=t;if(t.canvas&&e){const n=e.canvasSizeInfo,r="clientWidth"in n?n.clientWidth:t.canvas.clientWidth;return r?t.drawingBufferWidth/r:1}return 1}function vh(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=Oa(t),i=t.drawingBufferWidth,s=t.drawingBufferHeight;return wL(e,r,i,s,n)}function _L(t){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function wL(t,e,n,r,i){const s=vv(t[0],e,n);let o=yv(t[1],e,r,i),c=vv(t[0]+1,e,n);const h=c===n-1?c:c-1;c=yv(t[1]+1,e,r,i);let p;return i?(c=c===0?c:c+1,p=o,o=c):p=c===r-1?c:c-1,{x:s,y:o,width:Math.max(h-s+1,1),height:Math.max(p-o+1,1)}}function vv(t,e,n){return Math.min(Math.round(t*e),n-1)}function yv(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const nm=Ni(),bL=nm&&typeof document<"u",$3={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function X3(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};On(nm,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),t=Object.assign({},$3,t);const{width:e,height:n}=t;function r(c){if(t.throwOnError)throw new Error(c);return console.error(c),null}t.onError=r;let i;const{canvas:s}=t,o=SL({canvas:s,width:e,height:n,onError:r});return i=xL(o,t),i?(i=rm(i,t),CL(i),i):null}function rm(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||ML(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},$3,e);const{manageState:n,debug:r}=e;return n&&Y3(t,{copyState:!1,log:function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return ke.log(1,...s)()}}),nm&&r&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),ke.level=Math.max(ke.level,1)):ke.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function EL(t){const e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info"),i=r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936),s=r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||e,renderer:s||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}function TL(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t.canvas){const r=_L(e.useDevicePixels);LL(t,r,e);return}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}function xL(t,e){const{onError:n}=e;let r=null;const i=h=>r=h.statusMessage||r;t.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:s=!0,webgl2:o=!0}=e;let c=null;return o&&(c=c||t.getContext("webgl2",e),c=c||t.getContext("experimental-webgl2",e)),s&&(c=c||t.getContext("webgl",e),c=c||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",i,!1),c?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),c):n("Failed to create ".concat(o&&!s?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"))}function SL(t){let{canvas:e,width:n=800,height:r=600,onError:i}=t,s;return typeof e=="string"?(bL&&document.readyState==="complete"||i("createGLContext called on canvas '".concat(e,"' before page was loaded")),s=document.getElementById(e)):e?s=e:(s=document.createElement("canvas"),s.id="lumagl-canvas",s.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",s.style.height=Number.isFinite(r)?"".concat(r,"px"):"100%",document.body.insertBefore(s,document.body.firstChild)),s}function CL(t){const e=Je(t)?"WebGL2":"WebGL1",n=EL(t),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=t.debug?" debug":"";ke.info(1,"".concat(e).concat(i," context ").concat(r))()}function ML(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}function LL(t,e,n){let r="width"in n?n.width:t.canvas.clientWidth,i="height"in n?n.height:t.canvas.clientHeight;(!r||!i)&&(ke.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,i=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const s=t.luma.canvasSizeInfo;if(s.clientWidth!==r||s.clientHeight!==i||s.devicePixelRatio!==e){let o=e;const c=Math.floor(r*o),h=Math.floor(i*o);t.canvas.width=c,t.canvas.height=h,(t.drawingBufferWidth!==c||t.drawingBufferHeight!==h)&&(ke.warn("Device pixel ratio clamped")(),o=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/i),t.canvas.width=Math.floor(r*o),t.canvas.height=Math.floor(i*o)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}function _v(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}class wv{constructor(e,n){L(this,"name",void 0),L(this,"type",void 0),L(this,"sampleSize",1),L(this,"time",void 0),L(this,"count",void 0),L(this,"samples",void 0),L(this,"lastTiming",void 0),L(this,"lastSampleTime",void 0),L(this,"lastSampleCount",void 0),L(this,"_count",0),L(this,"_time",0),L(this,"_samples",0),L(this,"_startTime",0),L(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=_v(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(_v()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class im{constructor(e){L(this,"id",void 0),L(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:r}=e;return this.stats[n]||(e instanceof wv?this.stats[n]=e:this.stats[n]=new wv(n,r)),this.stats[n]}}const fl="8.5.21",PL="set luma.log.level=1 (or higher) to trace rendering";class kL{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new im({id:e})),this.stats.get(e)}}const Ys=new kL;if(globalThis.luma&&globalThis.luma.VERSION!==fl)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(fl));globalThis.luma||(Ni()&&ke.log(1,"luma.gl ".concat(fl," - ").concat(PL))(),globalThis.luma=globalThis.luma||{VERSION:fl,version:fl,log:ke,stats:Ys,globals:{modules:{},nodeIO:{}}});function IL(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function RL(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}function we(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function yh(t,e){if(typeof e!="string")return e;const n=Number(e);if(!isNaN(n))return n;e=e.replace(/^.*\./,"");const r=t[e];return we(r!==void 0,"Accessing undefined constant GL.".concat(e)),r}function _s(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}const _h={};function Ts(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";_h[t]=_h[t]||1;const e=_h[t]++;return"".concat(t,"-").concat(e)}function bv(t){return we(typeof t=="number","Input must be a number"),t&&(t&t-1)===0}function Da(t){let e=!0;for(const n in t){e=!1;break}return e}function Z3(t,e,n,r){const i="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),s=Object.getPrototypeOf(t);r.forEach(o=>{s.methodName||(s[o]=()=>{throw ke.removed("Calling removed method ".concat(e,".").concat(o,": "),i)(),new Error(o)})})}const zo="Resource subclass must define virtual methods";let Ui=class{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e0(e);const{id:r,userData:i={}}=n;this.gl=e,this.gl2=e,this.id=r||Ts(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=n.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(r=>r.delete()),this}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof e!="function")return this._bindHandle(e),this;let n;return this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e=yh(this.gl,e),we(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const s=Je(this.gl);if(!((!("webgl2"in i)||s)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){const c=i.webgl1,h="webgl2"in i?i.webgl2:i.webgl1;return s?h:c}}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{parameters:n,keys:r}=e,i=this.constructor.PARAMETERS||{},s=Je(this.gl),o={},c=n||Object.keys(i);for(const h of c){const p=i[h];if(p&&(!("webgl2"in p)||s)&&(!("extension"in p)||this.gl.getExtension(p.extension))){const y=r?_s(this.gl,h):h;o[y]=this.getParameter(h,e),r&&p.type==="GLenum"&&(o[y]=_s(this.gl,o[y]))}}return o}setParameter(e,n){e=yh(this.gl,e),we(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const s=Je(this.gl);if(!((!("webgl2"in i)||s)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(n=yh(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,r){return Z3(this,e,n,r)}initialize(e){}_createHandle(){throw new Error(zo)}_deleteHandle(){throw new Error(zo)}_bindHandle(e){throw new Error(zo)}_getOptsFromHandle(){throw new Error(zo)}_getParameter(e,n){throw new Error(zo)}_setParameter(e,n){throw new Error(zo)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],n=Ys.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];Ys.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,n),this._trackAllocatedMemoryForContext(e,n,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";const i=Ys.get("Memory Usage".concat(r));i.get("GPU Memory").addCount(e),i.get("".concat(n," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=Ys.get("Memory Usage".concat(n));r.get("GPU Memory").subtractCount(this.byteLength),r.get("".concat(e," Memory")).subtractCount(this.byteLength)}};const OL="Failed to deduce GL constant from typed array";function cg(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(OL)}}function Dl(t){let{clamped:e=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function DL(t){let{data:e,width:n,height:r,bytesPerPixel:i=4,temp:s}=t;const o=n*i;s=s||new Uint8Array(o);for(let c=0;c<r/2;++c){const h=c*o,p=(r-c-1)*o;s.set(e.subarray(h,h+o)),e.copyWithin(h,p,p+o),e.set(s,p)}}function FL(t){let{data:e,width:n,height:r}=t;const i=Math.round(n/2),s=Math.round(r/2),o=new Uint8Array(i*s*4);for(let c=0;c<s;c++)for(let h=0;h<i;h++)for(let p=0;p<4;p++)o[(c*i+h)*4+p]=e[(c*2*n+h*2)*4+p];return{data:o,width:i,height:s}}function fg(t,e,n){const{removedProps:r={},deprecatedProps:i={},replacedProps:s={}}=n;for(const c in r)if(c in e){const p=r[c]?"".concat(t,".").concat(r[c]):"N/A";ke.removed("".concat(t,".").concat(c),p)()}for(const c in i)if(c in e){const h=i[c];ke.deprecated("".concat(t,".").concat(c),"".concat(t,".").concat(h))()}let o=null;for(const c in s)if(c in e){const h=s[c];ke.deprecated("".concat(t,".").concat(c),"".concat(t,".").concat(h))(),o=o||Object.assign({},e),o[h]=e[c],delete o[c]}return o||e}const BL={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},NL={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class ir{static getBytesPerElement(e){return Dl(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return we(e.size),Dl(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return new ir(BL,...n)}constructor(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(i=>this._assign(i)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return ir.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return ir.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e=fg("Accessor",e,NL),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this}}const Ev=10,K3={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},UL={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:K3},zL={removedProps:K3};class mt extends Ui{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/ir.getBytesPerElement(e))}getVertexCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/ir.getBytesPerVertex(e))}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=fg("Buffer",e,UL),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return e=fg("Buffer",e,zL),"accessor"in e&&this.setAccessor(e.accessor),this}setAccessor(e){return e=Object.assign({},e),delete e.buffer,this.accessor=new ir(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:r=0,srcOffset:i=0}=e,s=e.byteLength||e.length;we(n);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),i!==0||s!==void 0?(Cn(this.gl),this.gl.bufferSubData(this.target,r,n,i,s)):this.gl.bufferSubData(o,r,n),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:r=0,writeOffset:i=0,size:s}=e;const{gl:o}=this;return Cn(o),o.bindBuffer(36662,n.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,r,i,s),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:r=0,length:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Cn(this.gl);const s=Dl(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(n),c=r;let h,p;e?(p=e.length,h=p-c):(h=Math.min(o,i||o),p=c+h);const _=Math.min(o,h);return i=i||_,we(i<=_),e=e||new s(p),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,r,i),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:r=0,size:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?i!==void 0?this.gl.bindBufferRange(e,n,this.handle,r,i):(we(r===0),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(Ev,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.byteLength+n;we(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,this.usage),this.gl.bufferSubData(i,n,e),this.gl.bindBuffer(i,null),this.debugData=e.slice(0,Ev),this.bytesUsed=r,this._trackAllocatedMemory(r);const s=cg(e);return we(s),this.setAccessor(new ir(this.accessor,{type:s})),this}_setByteLength(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;we(e>=0),this._trackDeallocatedMemory();let r=e;e===0&&(r=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,n),this.gl.bindBuffer(i,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const n=Dl(this.accessor.type||5126,{clamped:!1}),r=e/n.BYTES_PER_ELEMENT;return this.getElementCount()-r}_inferType(e){this.accessor.type||this.setAccessor(new ir(this.accessor,{type:cg(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return ke.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return ke.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return ke.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return ke.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new ir(this.accessor,e),this}}const sm={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},q3={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},J3={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function VL(t,e){const n=sm[e];if(!n)return!1;if(n.gl1===void 0&&n.gl2===void 0)return!0;const r=Je(t)&&n.gl2||n.gl1;return typeof r=="string"?t.getExtension(r):r}function jL(t,e){const n=sm[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}const GL=[9729,9728],Tv=globalThis.WebGLBuffer||function(){};class io extends Ui{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{format:r,linearFiltering:i}=n;let s=!0;return r&&(s=s&&VL(e,r),s=s&&(!i||jL(e,r))),s}constructor(e,n){const{id:r=Ts("texture"),handle:i,target:s}=n;super(e,{id:r,handle:i}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(C=>this.initialize(Object.assign({},e,{pixels:C,data:C}))),this;const r=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(r&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:i=null,format:s=6408,border:o=0,recreate:c=!1,parameters:h={},pixelStore:p={},textureUnit:_=void 0}=e;n||(n=i);let{width:y,height:w,dataFormat:T,type:S,compressed:k=!1,mipmaps:U=!0}=e;const{depth:x=0}=e;return{width:y,height:w,compressed:k,dataFormat:T,type:S}=this._deduceParameters({format:s,type:S,dataFormat:T,compressed:k,data:n,width:y,height:w}),this.width=y,this.height=w,this.depth=x,this.format=s,this.type=S,this.dataFormat=T,this.border=o,this.textureUnit=_,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),U&&this._isNPOT()&&(ke.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),U=!1,this._updateForNPOT(h)),this.mipmaps=U,this.setImageData({data:n,width:y,height:w,depth:x,format:s,type:S,dataFormat:T,border:o,mipmaps:U,parameters:p,compressed:k}),U&&this.generateMipmap(),this.setParameters(h),c&&(this.data=n),r&&(this._video={video:n,parameters:h,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:r}=this._video;if(r===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:r,mipmaps:i=!1}=e;return r!==this.width||n!==this.height?this.initialize({width:r,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(ke.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),jr(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:r=null,level:i=0,format:s=this.format,border:o=this.border,offset:c=0,parameters:h={}}=e;let{data:p=null,type:_=this.type,width:y=this.width,height:w=this.height,dataFormat:T=this.dataFormat,compressed:S=!1}=e;p||(p=r),{type:_,dataFormat:T,compressed:S,width:y,height:w}=this._deduceParameters({format:s,type:_,dataFormat:T,compressed:S,data:p,width:y,height:w});const{gl:k}=this;k.bindTexture(this.target,this.handle);let U=null;({data:p,dataType:U}=this._getDataType({data:p,compressed:S}));let x,C=0;if(jr(this.gl,h,()=>{switch(U){case"null":k.texImage2D(n,i,s,y,w,o,T,_,p);break;case"typed-array":k.texImage2D(n,i,s,y,w,o,T,_,p,c);break;case"buffer":x=Cn(k),x.bindBuffer(35052,p.handle||p),x.texImage2D(n,i,s,y,w,o,T,_,c),x.bindBuffer(35052,null);break;case"browser-object":Je(k)?k.texImage2D(n,i,s,y,w,o,T,_,p):k.texImage2D(n,i,s,T,_,p);break;case"compressed":for(const[P,B]of p.entries())k.compressedTexImage2D(n,P,B.format,B.width,B.height,o,B.data),C+=B.levelSize;break;default:we(!1,"Unknown image data type")}}),U==="compressed")this._trackAllocatedMemory(C,"Texture");else if(p&&p.byteLength)this._trackAllocatedMemory(p.byteLength,"Texture");else{const P=q3[this.dataFormat]||4,B=J3[this.type]||1;this._trackAllocatedMemory(this.width*this.height*P*B,"Texture")}return this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:r=null,data:i=null,x:s=0,y:o=0,width:c=this.width,height:h=this.height,level:p=0,format:_=this.format,type:y=this.type,dataFormat:w=this.dataFormat,compressed:T=!1,offset:S=0,border:k=this.border,parameters:U={}}=e;if({type:y,dataFormat:w,compressed:T,width:c,height:h}=this._deduceParameters({format:_,type:y,dataFormat:w,compressed:T,data:i,width:c,height:h}),we(this.depth===0,"texSubImage not supported for 3D textures"),i||(i=r),i&&i.data){const x=i;i=x.data,c=x.shape[0],h=x.shape[1]}i instanceof mt&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),jr(this.gl,U,()=>{if(T)this.gl.compressedTexSubImage2D(n,p,s,o,c,h,_,i);else if(i===null)this.gl.texSubImage2D(n,p,s,o,c,h,w,y,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(n,p,s,o,c,h,w,y,i,S);else if(i instanceof Tv){const x=Cn(this.gl);x.bindBuffer(35052,i),x.texSubImage2D(n,p,s,o,c,h,w,y,S),x.bindBuffer(35052,null)}else Je(this.gl)?Cn(this.gl).texSubImage2D(n,p,s,o,c,h,w,y,i):this.gl.texSubImage2D(n,p,s,o,w,y,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return ke.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:r=!1}=e;return r?{data:n,dataType:"compressed"}:n===null?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof mt?{data:n.handle,dataType:"buffer"}:n instanceof Tv?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:r}=e;let{width:i,height:s,dataFormat:o,type:c,compressed:h}=e;const p=sm[n];return o=o||p&&p.dataFormat,c=c||p&&p.types[0],h=h||p&&p.compressed,{width:i,height:s}=this._deduceImageSize(r,i,s),{dataFormat:o,type:c,compressed:h,width:i,height:s,format:n,data:r}}_deduceImageSize(e,n,r){let i;return typeof ImageData<"u"&&e instanceof ImageData?i={width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?i={width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement?i={width:e.width,height:e.height}:typeof ImageBitmap<"u"&&e instanceof ImageBitmap?i={width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?i={width:e.videoWidth,height:e.videoHeight}:e?i={width:n,height:r}:i={width:n>=0?n:1,height:r>=0?r:1},we(i,"Could not deduced texture size"),we(n===void 0||i.width===n,"Deduced texture width does not match supplied width"),we(r===void 0||i.height===r,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:we(!1);break;default:this.gl.texParameteri(this.target,e,n);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return Je(this.gl)||!this.width||!this.height?!1:!bv(this.width)||!bv(this.height)}_updateForNPOT(e){e[this.gl.TEXTURE_MIN_FILTER]===void 0&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),e[this.gl.TEXTURE_WRAP_S]===void 0&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),e[this.gl.TEXTURE_WRAP_T]===void 0&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:GL.indexOf(n)===-1&&(n=9729);break;case 10242:case 10243:n!==33071&&(n=33071);break}return n}}let HL="";function WL(t,e){return we(typeof t=="string"),t=HL+t,new Promise((n,r)=>{try{const i=new Image;i.onload=()=>n(i),i.onerror=()=>r(new Error("Could not load image ".concat(t,"."))),i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=t}catch(i){r(i)}})}class ur extends io{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return io.isSupported(e,n)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e0(e),(n instanceof Promise||typeof n=="string")&&(n={data:n}),typeof n.data=="string"&&(n=Object.assign({},n,{data:WL(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}}const hg=[34069,34070,34071,34072,34073,34074];class eE extends io{get[Symbol.toStringTag](){return"TextureCube"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e0(e),super(e,Object.assign({},n,{target:34067})),this.initialize(n),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{mipmaps:n=!0,parameters:r={}}=e;return this.opts=e,this.setCubeMapImageData(e).then(()=>{this.loaded=!0,n&&this.generateMipmap(e),this.setParameters(r)}),this}subImage(e){let{face:n,data:r,x:i=0,y:s=0,mipmapLevel:o=0}=e;return this._subImage({target:n,data:r,x:i,y:s,mipmapLevel:o})}async setCubeMapImageData(e){let{width:n,height:r,pixels:i,data:s,border:o=0,format:c=6408,type:h=5121}=e;const{gl:p}=this,_=i||s,y=await Promise.all(hg.map(w=>{const T=_[w];return Promise.all(Array.isArray(T)?T:[T])}));this.bind(),hg.forEach((w,T)=>{y[T].length>1&&this.opts.mipmaps!==!1&&ke.warn("".concat(this.id," has mipmap and multiple LODs."))(),y[T].forEach((S,k)=>{n&&r?p.texImage2D(w,k,c,n,r,o,c,h,S):p.texImage2D(w,k,c,c,h,S)})}),this.unbind()}setImageDataForFace(e){const{face:n,width:r,height:i,pixels:s,data:o,border:c=0,format:h=6408,type:p=5121}=e,{gl:_}=this,y=s||o;return this.bind(),y instanceof Promise?y.then(w=>this.setImageDataForFace(Object.assign({},e,{face:n,data:w,pixels:w}))):this.width||this.height?_.texImage2D(n,0,h,r,i,c,h,p,y):_.texImage2D(n,0,h,h,p,y),this}}eE.FACES=hg;class QL extends io{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return Je(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Cn(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),super(e,n),this.initialize(n),Object.seal(this)}setImageData(e){let{level:n=0,dataFormat:r=6408,width:i,height:s,depth:o=1,border:c=0,format:h,type:p=5121,offset:_=0,data:y,parameters:w={}}=e;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),jr(this.gl,w,()=>{ArrayBuffer.isView(y)&&this.gl.texImage3D(this.target,n,r,i,s,o,c,h,p,y),y instanceof mt&&(this.gl.bindBuffer(35052,y.handle),this.gl.texImage3D(this.target,n,r,i,s,o,c,h,p,_))}),y&&y.byteLength)this._trackAllocatedMemory(y.byteLength,"Texture");else{const T=q3[this.dataFormat]||4,S=J3[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*T*S,"Texture")}return this.loaded=!0,this}}const Bs="EXT_color_buffer_float",xv={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Bs,bpp:2},33327:{gl2:Bs,bpp:4},34842:{gl2:Bs,bpp:8},33326:{gl2:Bs,bpp:4},33328:{gl2:Bs,bpp:8},34836:{gl2:Bs,bpp:16},35898:{gl2:Bs,bpp:4}};function YL(t,e,n){const r=n[e];if(!r)return!1;const i=Je(t)&&r.gl2||r.gl1;return typeof i=="string"?t.getExtension(i):i}class oa extends Ui{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!n||YL(e,n,xv)}static getSamplesForFormat(e,n){let{format:r}=n;return e.getInternalformatParameter(36161,r,32937)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:r=1,height:i=1,samples:s=0}=e;return we(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),s!==0&&Je(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,n,r,i):this.gl.renderbufferStorage(36161,n,r,i),this.format=n,this.width=r,this.height=i,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*xv[this.format].bpp),this}resize(e){let{width:n,height:r}=e;return n!==this.width||r!==this.height?this.initialize({width:n,height:r,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const $L=256,XL=1024,ZL=16384,Sv=6144,Cv=6145,Mv=6146,Lv=34041,tE="clear: bad arguments";function om(t){let{framebuffer:e=null,color:n=null,depth:r=null,stencil:i=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s={};e&&(s.framebuffer=e);let o=0;n&&(o|=ZL,n!==!0&&(s.clearColor=n)),r&&(o|=$L,r!==!0&&(s.clearDepth=r)),i&&(o|=XL,r!==!0&&(s.clearStencil=r)),we(o!==0,tE),jr(t,s,()=>{t.clear(o)})}function KL(t){let{framebuffer:e=null,buffer:n=Sv,drawBuffer:r=0,value:i=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Cn(t),jr(t,{framebuffer:e},()=>{switch(n){case Sv:switch(i.constructor){case Int32Array:t.clearBufferiv(n,r,i);break;case Uint32Array:t.clearBufferuiv(n,r,i);break;case Float32Array:default:t.clearBufferfv(n,r,i)}break;case Cv:t.clearBufferfv(Cv,0,[i]);break;case Mv:t.clearBufferiv(Mv,0,[i]);break;case Lv:const[s,o]=i;t.clearBufferfi(Lv,0,s,o);break;default:we(!1,tE)}})}function qL(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return we(!1),0}}function t0(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:c,sourceHeight:h,sourceType:p}=e;const{framebuffer:_,deleteFramebuffer:y}=nE(t);we(_);const{gl:w,handle:T,attachments:S}=_;c=c||_.width,h=h||_.height,s===36064&&T===null&&(s=1028),we(S[s]),p=p||S[s].type,o=eP(o,p,i,c,h),p=p||cg(o);const k=w.bindFramebuffer(36160,T);return w.readPixels(n,r,c,h,i,p,o),w.bindFramebuffer(36160,k||null),y&&_.delete(),o}function Pv(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t0(t,{sourceAttachment:e}),{width:i,height:s}=t;for(;s>n;)({data:r,width:i,height:s}=FL({data:r,width:i,height:s}));DL({data:r,width:i,height:s});const o=document.createElement("canvas");o.width=i,o.height=s;const c=o.getContext("2d"),h=c.createImageData(i,s);return h.data.set(r),c.putImageData(h,0,0),o.toDataURL()}function JL(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{sourceX:r=0,sourceY:i=0,targetMipmaplevel:s=0,targetInternalFormat:o=6408}=n;let{targetX:c,targetY:h,targetZ:p,width:_,height:y}=n;const{framebuffer:w,deleteFramebuffer:T}=nE(t);we(w);const{gl:S,handle:k}=w,U=typeof c<"u"||typeof h<"u"||typeof p<"u";c=c||0,h=h||0,p=p||0;const x=S.bindFramebuffer(36160,k);we(e);let C=null;if(e instanceof io&&(C=e,_=Number.isFinite(_)?_:C.width,y=Number.isFinite(y)?y:C.height,C.bind(0),e=C.target),!U)S.copyTexImage2D(e,s,o,r,i,_,y,0);else switch(e){case 3553:case 34067:S.copyTexSubImage2D(e,s,c,h,r,i,_,y);break;case 35866:case 32879:Cn(S).copyTexSubImage3D(e,s,c,h,p,r,i,_,y);break}return C&&C.unbind(),S.bindFramebuffer(36160,x||null),T&&w.delete(),C}function nE(t){return t instanceof qt?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:uP(t),deleteFramebuffer:!0}}function eP(t,e,n,r,i){if(t)return t;e=e||5121;const s=Dl(e,{clamped:!1}),o=qL(n);return new s(r*i*o)}const St={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function tP(t){const e=new ur(t,{format:6408,type:5126,dataFormat:6408}),n=new qt(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),r=n.getStatus();return e.delete(),n.delete(),r===36053}const rE={[St.WEBGL2]:[!1,!0],[St.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[St.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[St.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[St.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[St.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[St.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[St.FLOAT_BLEND]:["EXT_float_blend"],[St.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[St.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[St.TEXTURE_FLOAT]:["OES_texture_float",!0],[St.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[St.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[St.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[St.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[St.COLOR_ATTACHMENT_RGBA32F]:[tP,"EXT_color_buffer_float"],[St.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[St.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[St.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[St.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[St.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[St.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},nP=2;function rP(t,e){return iE(t,e)}function iE(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>sE(t,n))}function iP(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in rE)t.luma.caps[e]===void 0&&(t.luma.caps[e]=sE(t,e));return t.luma.caps}function sE(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},t.luma.caps[e]===void 0&&(t.luma.caps[e]=sP(t,e)),t.luma.caps[e]||ke.log(nP,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}function sP(t,e){const n=rE[e];we(n,e);let r;const i=Je(t)&&n[1]||n[0];if(typeof i=="function")r=i(t);else if(Array.isArray(i)){r=!0;for(const s of i)r=r&&!!t.getExtension(s)}else typeof i=="string"?r=!!t.getExtension(i):typeof i=="boolean"?r=i:we(!1);return r}const kv="Multiple render targets not supported";class qt extends Ui{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{colorBufferFloat:r,colorBufferHalfFloat:i}=n;let s=!0;return r&&(s=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),i&&(s=s&&!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new qt(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=Cn(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=Cn(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:r=1,attachments:i=null,color:s=!0,depth:o=!0,stencil:c=!1,check:h=!0,readBuffer:p=void 0,drawBuffers:_=void 0}=e;if(we(n>=0&&r>=0,"Width and height need to be integers"),this.width=n,this.height=r,i)for(const y in i){const w=i[y];(Array.isArray(w)?w[0]:w).resize({width:n,height:r})}else i=this._createDefaultAttachments(s,o,c,n,r);this.update({clearAttachments:!0,attachments:i,readBuffer:p,drawBuffers:_}),i&&h&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:r,drawBuffers:i,clearAttachments:s=!1,resizeAttachments:o=!0}=e;this.attach(n,{clearAttachments:s,resizeAttachments:o});const{gl:c}=this,h=c.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),c.bindFramebuffer(36160,h||null),this}resize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:n,height:r}=e;if(this.handle===null)return we(n===void 0&&r===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;n===void 0&&(n=this.gl.drawingBufferWidth),r===void 0&&(r=this.gl.drawingBufferHeight),n!==this.width&&r!==this.height&&ke.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(r))();for(const i in this.attachments)this.attachments[i].resize({width:n,height:r});return this.width=n,this.height=r,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:r=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i={};n&&Object.keys(this.attachments).forEach(o=>{i[o]=null}),Object.assign(i,e);const s=this.gl.bindFramebuffer(36160,this.handle);for(const o in i){we(o!==void 0,"Misspelled framebuffer binding point?");const c=Number(o),h=i[c];let p=h;if(!p)this._unattach(c);else if(p instanceof oa)this._attachRenderbuffer({attachment:c,renderbuffer:p});else if(Array.isArray(h)){const[_,y=0,w=0]=h;p=_,this._attachTexture({attachment:c,texture:_,layer:y,level:w})}else this._attachTexture({attachment:c,texture:p,layer:0,level:0});r&&p&&p.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const{gl:e}=this,n=this.getStatus();if(n!==36053)throw new Error(aP(n));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),r=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),r}clear(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:n,depth:r,stencil:i,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(n||r||i)&&om(this.gl,{color:n,depth:r,stencil:i}),s.forEach((c,h)=>{KL(this.gl,{drawBuffer:h,value:c})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return ke.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return ke.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return ke.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return ke.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return ke.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return ke.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:r=0,y:i=0,width:s,height:o}=e;const c=Cn(this.gl),h=c.bindFramebuffer(36008,this.handle);return r===0&&i===0&&s===void 0&&o===void 0?c.invalidateFramebuffer(36008,n):c.invalidateFramebuffer(36008,n,r,i,s,o),c.bindFramebuffer(36008,h),this}getAttachmentParameter(e,n,r){let i=this._getAttachmentParameterFallback(n);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),r&&i>1e3&&(i=_s(this.gl,i)),i}getAttachmentParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const i={};for(const s of r){const o=n?_s(this.gl,s):s;i[o]=this.getAttachmentParameter(e,s,n)}return i}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const n=Object.keys(this.attachments),r={};for(const i of n){const s=Number(i),o=e?_s(this.gl,s):s;r[o]=this.getAttachmentParameters(s,e)}return r}show(){return typeof window<"u"&&window.open(Pv(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e>ke.level||typeof window>"u")return this;n=n||"Framebuffer ".concat(this.id);const r=Pv(this,{targetMaxHeight:100});return ke.image({logLevel:e,message:n,image:r},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,r,i,s){let o=null;return e&&(o=o||{},o[36064]=new ur(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:s,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),n&&r?(o=o||{},o[33306]=new oa(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(o[33306])):n?(o=o||{},o[36096]=new oa(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:s}),this.ownResources.push(o[36096])):r&&we(!1),o}_unattach(e){const n=this.attachments[e];n&&(n instanceof oa?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:r}=e;const{gl:i}=this;i.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}_attachTexture(e){let{attachment:n=36064,texture:r,layer:i,level:s}=e;const{gl:o}=this;switch(o.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:Cn(o).framebufferTextureLayer(36160,n,r.target,s,i);break;case 34067:const h=oP(i);o.framebufferTexture2D(36160,n,h,r.handle,s);break;case 3553:o.framebufferTexture2D(36160,n,3553,r.handle,s);break;default:we(!1,"Illegal texture type")}o.bindTexture(r.target,null),this.attachments[n]=r}_setReadBuffer(e){const n=DM(this.gl);n?n.readBuffer(e):we(e===36064||e===1029,kv),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,r=Cn(n);if(r)r.drawBuffers(e);else{const i=n.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(e):we(e.length===1&&(e[0]===36064||e[0]===1029),kv)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=iP(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return!n.WEBGL2&&!n.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}function oP(t){return t<34069?t+34069:t}function aP(t){return(qt.STATUS||{})[t]||"Framebuffer error ".concat(t)}const AP=[36049,36048,33296,33298,33299,33300,33301,33302,33303];qt.ATTACHMENT_PARAMETERS=AP;function lP(t,e){we(t instanceof ur||t instanceof eE||t instanceof QL);const n=t.constructor,{gl:r,width:i,height:s,format:o,type:c,dataFormat:h,border:p,mipmaps:_}=t,y=Object.assign({width:i,height:s,format:o,type:c,dataFormat:h,border:p,mipmaps:_},e);return new n(r,y)}function uP(t,e){const{gl:n,width:r,height:i,id:s}=t;return new qt(n,Object.assign({},e,{id:"framebuffer-for-".concat(s),width:r,height:i,attachments:{36064:t}}))}function Cc(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed";const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=t.match(n);return r?r[1]:e}const cP=35632,fP=35633;function hP(t){switch(t){case cP:return"fragment";case fP:return"vertex";default:return"unknown type"}}function dP(t,e,n,r){const i=t.split(/\r?\n/),s={},o={},c=r||Cc(e)||"(unnamed)",h="".concat(hP(n)," shader ").concat(c);for(let _=0;_<i.length;_++){const y=i[_];if(y.length<=1)continue;const w=y.split(":"),T=w[0],S=parseInt(w[2],10);if(isNaN(S))throw new Error("GLSL compilation error in ".concat(h,": ").concat(t));T!=="WARNING"?s[S]=y:o[S]=y}const p=gP(e);return{shaderName:h,errors:Iv(s,p),warnings:Iv(o,p)}}function Iv(t,e){let n="";for(let r=0;r<e.length;r++){const i=e[r];if(!(!t[r+3]&&!t[r+2]&&!t[r+1])&&(n+="".concat(i,`
`),t[r+1])){const s=t[r+1],o=s.split(":",3),c=o[0],h=parseInt(o[1],10)||0,p=s.substring(o.join(":").length+1).trim();n+=oE("^^^ ".concat(c,": ").concat(p,`

`),h)}}return n}function gP(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ";const r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map((s,o)=>{const c=String(o+e),h=c.length;return oE(c,i-h)+n+s})}function oE(t,e){let n="";for(let r=0;r<e;++r)n+=" ";return"".concat(n).concat(t)}function aE(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&n[0]==="#version"){const r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}return e}const pP="Shader: GLSL source code must be a JavaScript string";class Fl extends Ui{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return we(!1),"unknown"}}constructor(e,n){e0(e),we(typeof n.source=="string",pP);const r=Cc(n.source,null)||n.id||Ts("unnamed ".concat(Fl.getTypeName(n.shaderType)));super(e,{id:r}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e;const r=Cc(n,null);r&&(this.id=Ts(r)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(Fl.getTypeName(this.shaderType),":").concat(this.id)}getName(){return Cc(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(e.startsWith("#version ")||(e=`#version 100
`.concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const r=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:s,warnings:o}=dP(r,this.source,this.shaderType,this.id);throw ke.error("GLSL compilation errors in ".concat(i,`
`).concat(s))(),ke.warn("GLSL compilation warnings in ".concat(i,`
`).concat(o))(),new Error("GLSL compilation errors in ".concat(i))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}let wh=class extends Fl{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}},bh=class extends Fl{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}};const mP={5126:bt.bind(null,"uniform1fv",Jn,1,bn),35664:bt.bind(null,"uniform2fv",Jn,2,bn),35665:bt.bind(null,"uniform3fv",Jn,3,bn),35666:bt.bind(null,"uniform4fv",Jn,4,bn),5124:bt.bind(null,"uniform1iv",Ki,1,bn),35667:bt.bind(null,"uniform2iv",Ki,2,bn),35668:bt.bind(null,"uniform3iv",Ki,3,bn),35669:bt.bind(null,"uniform4iv",Ki,4,bn),35670:bt.bind(null,"uniform1iv",Ki,1,bn),35671:bt.bind(null,"uniform2iv",Ki,2,bn),35672:bt.bind(null,"uniform3iv",Ki,3,bn),35673:bt.bind(null,"uniform4iv",Ki,4,bn),35674:bt.bind(null,"uniformMatrix2fv",Jn,4,mi),35675:bt.bind(null,"uniformMatrix3fv",Jn,9,mi),35676:bt.bind(null,"uniformMatrix4fv",Jn,16,mi),35678:ln,35680:ln,5125:bt.bind(null,"uniform1uiv",qu,1,bn),36294:bt.bind(null,"uniform2uiv",qu,2,bn),36295:bt.bind(null,"uniform3uiv",qu,3,bn),36296:bt.bind(null,"uniform4uiv",qu,4,bn),35685:bt.bind(null,"uniformMatrix2x3fv",Jn,6,mi),35686:bt.bind(null,"uniformMatrix2x4fv",Jn,8,mi),35687:bt.bind(null,"uniformMatrix3x2fv",Jn,6,mi),35688:bt.bind(null,"uniformMatrix3x4fv",Jn,12,mi),35689:bt.bind(null,"uniformMatrix4x2fv",Jn,8,mi),35690:bt.bind(null,"uniformMatrix4x3fv",Jn,12,mi),35678:ln,35680:ln,35679:ln,35682:ln,36289:ln,36292:ln,36293:ln,36298:ln,36299:ln,36300:ln,36303:ln,36306:ln,36307:ln,36308:ln,36311:ln},vP={},yP={},_P={},Rv=[0];function am(t,e,n,r){e===1&&typeof t=="boolean"&&(t=t?1:0),Number.isFinite(t)&&(Rv[0]=t,t=Rv);const i=t.length;if(i%e&&ke.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let s=r[i];s||(s=new n(i),r[i]=s);for(let o=0;o<i;o++)s[o]=t[o];return s}function Jn(t,e){return am(t,e,Float32Array,vP)}function Ki(t,e){return am(t,e,Int32Array,yP)}function qu(t,e){return am(t,e,Uint32Array,_P)}function Ov(t,e,n){const r=mP[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}function wP(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};const e=/([^[]*)(\[[0-9]+\])?/,n=t.match(e);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:!!n[2]}}function bP(t,e,n){for(const r in t){const i=t[r];if((!n||!!n[r])&&!EP(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),i),new Error("".concat(e," Bad uniform ").concat(r))}return!0}function EP(t){return Array.isArray(t)||ArrayBuffer.isView(t)?xP(t):isFinite(t)||t===!0||t===!1||t instanceof io||t instanceof oa?!0:t instanceof qt?!!t.texture:!1}function TP(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const r=t[e];for(let i=0,s=n.length;i<s;++i)r[i]=n[i]}else t[e]=n.slice();else t[e]=n}function xP(t){if(t.length===0)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}function ln(){let t=null;return(e,n,r)=>{const i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function bt(t,e,n,r){let i=null,s=null;return(o,c,h)=>{const p=e(h,n),_=p.length;let y=!1;if(i===null)i=new Float32Array(_),s=_,y=!0;else{we(s===_,"Uniform length cannot change.");for(let w=0;w<_;++w)if(p[w]!==i[w]){y=!0;break}}return y&&(r(o,t,c,p),i.set(p)),y}}function bn(t,e,n,r){t[e](n,r)}function mi(t,e,n,r){t[e](n,!1,r)}const SP=5120,CP=5121,MP=5122,LP=5123,Dv=0,Ju=1,PP=2,kP=3,ec=4,IP=5,RP=6,$t=5126,OP=35664,DP=35665,FP=35666,BA=5124,BP=35667,NP=35668,UP=35669,NA=5125,zP=36294,VP=36295,jP=36296,GP=35670,HP=35671,WP=35672,QP=35673,YP=35674,$P=35675,XP=35676,ZP=35685,KP=35686,qP=35687,JP=35688,ek=35689,tk=35690,dg={[$t]:[$t,1,"float"],[OP]:[$t,2,"vec2"],[DP]:[$t,3,"vec3"],[FP]:[$t,4,"vec4"],[BA]:[BA,1,"int"],[BP]:[BA,2,"ivec2"],[NP]:[BA,3,"ivec3"],[UP]:[BA,4,"ivec4"],[NA]:[NA,1,"uint"],[zP]:[NA,2,"uvec2"],[VP]:[NA,3,"uvec3"],[jP]:[NA,4,"uvec4"],[GP]:[$t,1,"bool"],[HP]:[$t,2,"bvec2"],[WP]:[$t,3,"bvec3"],[QP]:[$t,4,"bvec4"],[YP]:[$t,8,"mat2"],[ZP]:[$t,8,"mat2x3"],[KP]:[$t,8,"mat2x4"],[$P]:[$t,12,"mat3"],[qP]:[$t,12,"mat3x2"],[JP]:[$t,12,"mat3x4"],[XP]:[$t,16,"mat4"],[ek]:[$t,16,"mat4x2"],[tk]:[$t,16,"mat4x3"]};function nk(t){switch(t){case Dv:return Dv;case Ju:return Ju;case kP:return Ju;case PP:return Ju;case ec:return ec;case IP:return ec;case RP:return ec;default:return we(!1),0}}function Fv(t){const e=dg[t];if(!e)return null;const[n,r]=e;return{type:n,components:r}}function AE(t,e){switch(t){case SP:case CP:case MP:case LP:t=$t;break}for(const n in dg){const[r,i,s]=dg[n];if(r===t&&i===e)return{glType:n,name:s}}return null}class rk{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,r=n.getProgramParameter(e.handle,35721);for(let i=0;i<r;i++){const{name:s,type:o,size:c}=n.getActiveAttrib(e.handle,i),h=n.getAttribLocation(e.handle,s);h>=0&&this._addAttribute(h,s,o,c)}this.attributeInfos.sort((i,s)=>i.location-s.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!Je(n))return;const r=n.getProgramParameter(e.handle,35971);for(let i=0;i<r;i++){const{name:s,type:o,size:c}=n.getTransformFeedbackVarying(e.handle,i);this._addVarying(i,s,o,c)}this.varyingInfos.sort((i,s)=>i.location-s.location)}_addAttribute(e,n,r,i){const{type:s,components:o}=Fv(r),c={type:s,size:i*o};this._inferProperties(e,n,c);const h={location:e,name:n,accessor:new ir(c)};this.attributeInfos.push(h),this.attributeInfosByLocation[e]=h,this.attributeInfosByName[h.name]=h}_inferProperties(e,n,r){/instance/i.test(n)&&(r.divisor=1)}_addVarying(e,n,r,i){const{type:s,components:o}=Fv(r),c=new ir({type:s,size:i*o}),h={location:e,name:n,accessor:c};this.varyingInfos.push(h),this.varyingInfosByName[h.name]=h}}const Bv=4,ik=35981,sk=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class lE extends Ui{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",sk),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{hash:n,vs:r,fs:i,varyings:s,bufferMode:o=ik}=e;return this.hash=n||"",this.vs=typeof r=="string"?new wh(this.gl,{id:"".concat(e.id,"-vs"),source:r}):r,this.fs=typeof i=="string"?new bh(this.gl,{id:"".concat(e.id,"-fs"),source:i}):i,we(this.vs instanceof wh),we(this.fs instanceof bh),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(Cn(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new rk(this),this.setProps(e)}delete(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:r=4,vertexCount:i,offset:s=0,start:o,end:c,isIndexed:h=!1,indexType:p=5123,instanceCount:_=0,isInstanced:y=_>0,vertexArray:w=null,transformFeedback:T,framebuffer:S,parameters:k={},uniforms:U,samplers:x}=e;if((U||x)&&(ke.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(U||{})),ke.priority>=n){const C=S?S.id:"default",P="mode=".concat(_s(this.gl,r)," verts=").concat(i," ")+"instances=".concat(_," indexType=").concat(_s(this.gl,p)," ")+"isInstanced=".concat(y," isIndexed=").concat(h," ")+"Framebuffer=".concat(C);ke.log(n,P)()}return we(w),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||i===0||y&&_===0?!1:(w.bindForDraw(i,_,()=>{if(S!==void 0&&(k=Object.assign({},k,{framebuffer:S})),T){const C=nk(r);T.begin(C)}this._bindTextures(),jr(this.gl,k,()=>{h&&y?this.gl2.drawElementsInstanced(r,i,p,s,_):h&&Je(this.gl)&&!isNaN(o)&&!isNaN(c)?this.gl2.drawRangeElements(r,o,c,i,p,s):h?this.gl.drawElements(r,i,p,s):y?this.gl2.drawArraysInstanced(r,s,i,_):this.gl.drawArrays(r,s,i)}),T&&T.end()}),!0)}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ke.priority>=2&&bP(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const r=e[n],i=this._uniformSetters[n];if(i){let s=r,o=!1;if(s instanceof qt&&(s=s.texture),s instanceof io)if(o=this.uniforms[n]!==r,o){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);const c=s,{textureIndex:h}=i;c.bind(h),s=h,this._textureUniforms[n]=c}else s=i.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(i(s)||o)&&TP(this.uniforms,n,r)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const r=this._textureUniforms[n];r.update(),e=e&&r.loaded}return e}_bindTextures(){for(const e in this._textureUniforms){const n=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(n)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),r={};for(const i of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new wh({handle:i});break;case 35632:r.fs=new bh({handle:i});break}return r}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=Ts(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),ke.time(Bv,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),ke.timeEnd(Bv,"linkProgram for ".concat(this._getName()))(),e.debug||ke.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const r=this.gl.getActiveUniform(this.handle,n),{name:i}=wP(r.name);let s=e.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=Ov(e,s,r),r.size>1)for(let o=0;o<r.size;o++)s=e.getUniformLocation(this.handle,"".concat(i,"[").concat(o,"]")),this._uniformSetters["".concat(i,"[").concat(o,"]")]=Ov(e,s,r)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}const ok=34918,ak=34919,Ak=35007,lk=36795,uk=35976,ck=35887,fk=36202;class cf extends Ui{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const r=Je(e),i=iE(e,St.TIMER_QUERY);let s=r||i;for(const o of n)switch(o){case"queries":s=s&&r;break;case"timers":s=s&&i;break;default:we(!1)}return s}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(Ak)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(e?fk:ck)}beginTransformFeedbackQuery(){return this.begin(uk)}begin(e){return this._queryPending?this:(this.target=e,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,ak);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(lk)}getResult(){return this.gl2.getQueryParameter(this.handle,ok)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((r,i)=>{const s=()=>{this.isResultAvailable()?(r(this.getResult()),this._pollingPromise=null):n++>e?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return cf.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class uE extends Ui{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return Je(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Cn(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Da(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const r=this._getVaryingIndex(e),{buffer:i,byteSize:s,byteOffset:o}=this._getBufferParams(n);return r<0?(this.unused[e]=i,ke.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[r]=n,this.bindOnUse||this._bindBuffer(r,i,o,s),this)}begin(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,r,i;return e instanceof mt?i=e:(i=e.buffer,r=e.byteSize,n=e.byteOffset),(n!==void 0||r!==void 0)&&(n=n||0,r=r||i.byteLength-n),{buffer:i,byteOffset:n,byteSize:r}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:r,byteOffset:i}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,i,r)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const s=n&&n.handle;return!s||i===void 0?this.gl.bindBufferBase(35982,e,s):this.gl.bindBufferRange(35982,e,s,r,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}let tc=null;function hk(t){return(!tc||tc.byteLength<t)&&(tc=new ArrayBuffer(t)),tc}function dk(t,e){const n=hk(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}function gk(t){let{target:e,source:n,start:r=0,count:i=1}=t;const s=n.length,o=i*s;let c=0;for(let h=r;c<s;c++)e[h++]=n[c];for(;c<o;)c<o-c?(e.copyWithin(r+c,r,r+c),c*=2):(e.copyWithin(r+c,r,r+o-c),c=o);return e}const pk="elements must be GL.ELEMENT_ARRAY_BUFFER";class er extends Ui{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?Je(e)||j3()==="Chrome":!0}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new er(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return er.MAX_ATTRIBUTES=er.MAX_ATTRIBUTES||e.getParameter(34921),er.MAX_ATTRIBUTES}static setConstant(e,n,r){switch(r.constructor){case Float32Array:er._setConstantFloatArray(e,n,r);break;case Int32Array:er._setConstantIntArray(e,n,r);break;case Uint32Array:er._setConstantUintArray(e,n,r);break;default:we(!1)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;super(e,Object.assign({},n,{id:r})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return er.getMaxAttributes(this.gl)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(e)}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return we(!e||e.target===34963,pk),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,r){if(n.target===34963)return this.setElementBuffer(n,r);const{size:i,type:s,stride:o,offset:c,normalized:h,integer:p,divisor:_}=r,{gl:y,gl2:w}=this;return e=Number(e),this.bind(()=>{y.bindBuffer(34962,n.handle),p?(we(Je(y)),w.vertexAttribIPointer(e,i,s,o,c)):y.vertexAttribPointer(e,i,s,h,o,c),y.enableVertexAttribArray(e),w.vertexAttribDivisor(e,_||0)}),this}enable(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!n&&e===0&&!er.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const r=this._normalizeConstantArrayValue(n),i=r.byteLength*e,s=r.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new mt(this.gl,i),o=o||this.buffer.reallocate(i),o=o||!this._compareConstantArrayValues(r,this.bufferValue),o){const c=dk(n.constructor,s);gk({target:c,source:r,start:0,count:s}),this.buffer.subData(c),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let r=0;r<e.length;++r)if(e[r]!==n[r])return!1;return!0}static _setConstantFloatArray(e,n,r){switch(r.length){case 1:e.vertexAttrib1fv(n,r);break;case 2:e.vertexAttrib2fv(n,r);break;case 3:e.vertexAttrib3fv(n,r);break;case 4:e.vertexAttrib4fv(n,r);break;default:we(!1)}}static _setConstantIntArray(e,n,r){switch(we(Je(e)),r.length){case 1:e.vertexAttribI1iv(n,r);break;case 2:e.vertexAttribI2iv(n,r);break;case 3:e.vertexAttribI3iv(n,r);break;case 4:e.vertexAttribI4iv(n,r);break;default:we(!1)}}static _setConstantUintArray(e,n,r){switch(we(Je(e)),r.length){case 1:e.vertexAttribI1uiv(n,r);break;case 2:e.vertexAttribI2uiv(n,r);break;case 3:e.vertexAttribI3uiv(n,r);break;case 4:e.vertexAttribI4uiv(n,r);break;default:we(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:r}=n;return we(Number.isFinite(r)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(r,e);default:return this.gl.getVertexAttrib(r,e)}})}}const mk="VertexArray: attributes must be Buffers or constants (i.e. typed array)",vk=/^(.+)__LOCATION_([0-9]+)$/,yk=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class _k{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;this.id=r,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new er(e),Z3(this,"VertexArray","v6.0",yk),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e){const r=e[n];this._setAttribute(n,r)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n.target===34963)return this.setElementBuffer(n,r);const{location:i,accessor:s}=this._resolveLocationAndAccessor(e,n,n.accessor,r);return i>=0&&(this.values[i]=n,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,n,s)),this}setConstant(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{location:i,accessor:s}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},r));return i>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[i]=n,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new mt(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof mt&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof mt&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,r){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),i=r()}),i}_resolveLocationAndAccessor(e,n,r,i){const s={location:-1,accessor:null},{location:o,name:c}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=n,ke.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),s;const h=this._getAttributeInfo(c||o);if(!h)return s;const p=this.accessors[o]||{},_=ir.resolve(h.accessor,p,r,i),{size:y,type:w}=_;return we(Number.isFinite(y)&&Number.isFinite(w)),{location:o,accessor:_}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const r=vk.exec(e),i=r?r[1]:e,s=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+s,name:i}:{location:-1}}_setAttribute(e,n){if(n instanceof mt)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof mt){const r=n[0],i=n[1];this.setBuffer(e,r,i)}else if(ArrayBuffer.isView(n)||Array.isArray(n)){const r=n;this.setConstant(e,r)}else if(n.buffer instanceof mt){const r=n;this.setBuffer(e,r.buffer,r)}else throw new Error(mk)}_setConstantAttributes(e,n){const r=Math.max(e|0,n|0);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,r);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)i=this.values[s],ArrayBuffer.isView(i)&&this._setConstantAttribute(s,i)}_setConstantAttributeZero(e,n){if(er.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,e);return}const r=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}_setConstantAttribute(e,n){er.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const r=this.values[n],i=this.accessors[n];if(!r)return;const{divisor:s}=i,o=s>0;if(e.isInstanced=e.isInstanced||o,r instanceof mt){const c=r;if(o){const h=c.getVertexCount(i);e.instanceCount=Math.min(e.instanceCount,h)}else{const h=c.getVertexCount(i);e.vertexCount=Math.min(e.vertexCount,h)}}}setElements(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ke.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}function wk(t,e){const{maxElts:n=16,size:r=1}=e;let i="[";for(let o=0;o<t.length&&o<n;++o)o>0&&(i+=",".concat(o%r===0?" ":"")),i+=Bl(t[o],e);const s=t.length>n?"...":"]";return"".concat(i).concat(s)}function Bl(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=1e-16,{isInteger:r=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return wk(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<n)return r?"0":"0.";if(r||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const i=t.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function Nv(t){let{header:e="Uniforms",program:n,uniforms:r,undefinedOnly:i=!1}=t;we(n);const s=".*_.*",o=".*Matrix",c=n._uniformSetters,h={},p=Object.keys(c).sort();let _=0;for(const T of p)!T.match(s)&&!T.match(o)&&Eh({table:h,header:e,uniforms:r,uniformName:T,undefinedOnly:i})&&_++;for(const T of p)T.match(o)&&Eh({table:h,header:e,uniforms:r,uniformName:T,undefinedOnly:i})&&_++;for(const T of p)h[T]||Eh({table:h,header:e,uniforms:r,uniformName:T,undefinedOnly:i})&&_++;let y=0;const w={};if(!i)for(const T in r){const S=r[T];h[T]||(y++,w[T]={Type:"NOT USED: ".concat(S),[e]:Bl(S)})}return{table:h,count:_,unusedTable:w,unusedCount:y}}function Eh(t){let{table:e,header:n,uniforms:r,uniformName:i,undefinedOnly:s}=t;const o=r[i],c=bk(o);return!s||!c?(e[i]={[n]:c?Bl(o):"N/A","Uniform Type":c?o:"NOT PROVIDED"},!0):!1}function bk(t){return t!=null}function Ek(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const r={};e.elements&&(r.ELEMENT_ARRAY_BUFFER=Uv(e,e.elements,null,n));const i=e.values;for(const s in i){const o=e._getAttributeInfo(s);if(o){let c="".concat(s,": ").concat(o.name);const h=e.accessors[o.location];h&&(c="".concat(s,": ").concat(Tk(o.name,h))),r[c]=Uv(e,i[s],h,n)}}return r}function Uv(t,e,n,r){const{gl:i}=t;if(!e)return{[r]:"null","Format ":"N/A"};let s="NOT PROVIDED",o=1,c=0,h=0,p,_,y;if(n&&(s=n.type,o=n.size,s=String(s).replace("Array",""),p=s.indexOf("nt")!==-1),e instanceof mt){const w=e,{data:T,changed:S}=w.getDebugData();_=S?"*":"",y=T,h=w.byteLength,c=h/T.BYTES_PER_ELEMENT/o;let k;if(n){const U=n.divisor>0;k="".concat(U?"I ":"P "," ").concat(c," (x").concat(o,"=").concat(h," bytes ").concat(_s(i,s),")")}else p=!0,k="".concat(h," bytes");return{[r]:"".concat(_).concat(Bl(y,{size:o,isInteger:p})),"Format ":k}}return y=e,o=e.length,s=String(e.constructor.name).replace("Array",""),p=s.indexOf("nt")!==-1,{[r]:"".concat(Bl(y,{size:o,isInteger:p})," (constant)"),"Format ":"".concat(o,"x").concat(s," (constant)")}}function Tk(t,e){const{type:n,size:r}=e,i=AE(n,r);return i?"".concat(t," (").concat(i.name,")"):t}function xk(t){const e={},n="Accessors for ".concat(t.id);for(const r of t.attributeInfos)if(r){const i=zv(r);e["in ".concat(i)]={[n]:JSON.stringify(r.accessor)}}for(const r of t.varyingInfos)if(r){const i=zv(r);e["out ".concat(i)]={[n]:JSON.stringify(r.accessor)}}return e}function zv(t){const{type:e,size:n}=t.accessor,r=AE(e,n);return r?"".concat(r.name," ").concat(t.name):t.name}const Vv=Ni()&&typeof document<"u";let Sk=0;class Ck{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{onCreateContext:n=U=>X3(U),onAddHTML:r=null,onInitialize:i=()=>{},onRender:s=()=>{},onFinalize:o=()=>{},onError:c,gl:h=null,glOptions:p={},debug:_=!1,createFramebuffer:y=!1,autoResizeViewport:w=!0,autoResizeDrawingBuffer:T=!0,stats:S=Ys.get("animation-loop-".concat(Sk++))}=e;let{useDevicePixels:k=!0}=e;"useDevicePixelRatio"in e&&(ke.deprecated("useDevicePixelRatio","useDevicePixels")(),k=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:r,onInitialize:i,onRender:s,onFinalize:o,onError:c,gl:h,glOptions:p,debug:_,createFramebuffer:y},this.gl=h,this.needsRedraw=null,this.timeline=null,this.stats=S,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:w,autoResizeDrawingBuffer:T,useDevicePixels:k}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return we(typeof e=="string"),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;const n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=cf.isSupported(this.gl,["timers"])?new cf(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(r=>{this._running&&(this._addCallbackData(r||{}),r!==!1&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const r=document.getElementById(e);return r?Number(r.value):n}setViewParameters(){return ke.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=Vv?new Promise((e,n)=>{if(Vv&&document.readyState==="complete"){e(document);return}window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):RL(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):IL(e)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:n,aspect:r}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){typeof e=="object"&&e!==null&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?rm(this.props.gl,e):this.onCreateContext(e),!Jf(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");yL(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);const r=this.props.onAddHTML(n);r&&(n.innerHTML=r)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight;let r=1;const{canvas:i}=this.gl;return i&&i.clientHeight?r=i.clientWidth/i.clientHeight:e>0&&n>0&&(r=e/n),{width:e,height:n,aspect:r}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&TL(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new qt(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}const ou="vs",Am="fs";function Ar(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const Th={number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},array:{validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function Mk(t){const e={};for(const n in t){const r=t[n],i=Lk(r);e[n]=i}return e}function Lk(t){let e=jv(t);return e==="object"?t?"type"in t?Object.assign({},t,Th[t.type]):"value"in t?(e=jv(t.value),Object.assign({type:e},t,Th[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},Th[e])}function jv(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}const Pk="vs",kk="fs";class Gv{constructor(e){let{name:n,vs:r,fs:i,dependencies:s=[],uniforms:o,getUniforms:c,deprecations:h=[],defines:p={},inject:_={},vertexShader:y,fragmentShader:w}=e;Ar(typeof n=="string"),this.name=n,this.vs=r||y,this.fs=i||w,this.getModuleUniforms=c,this.dependencies=s,this.deprecations=this._parseDeprecationDefinitions(h),this.defines=p,this.injections=Ik(_),o&&(this.uniforms=Mk(o))}getModuleSource(e){let n;switch(e){case Pk:n=this.vs||"";break;case kk:n=this.fs||"";break;default:Ar(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(n,"// END MODULE_").concat(this.name,`

`)}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(r=>{r.regex.test(e)&&(r.deprecated?n.deprecated(r.old,r.new)():n.removed(r.old,r.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{switch(n.type){case"function":n.regex=new RegExp("\\b".concat(n.old,"\\("));break;default:n.regex=new RegExp("".concat(n.type," ").concat(n.old,";"))}}),e}_defaultGetUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={},r=this.uniforms;for(const i in r){const s=r[i];i in e&&!s.private?(s.validate&&Ar(s.validate(e[i],s),"".concat(this.name,": invalid ").concat(i)),n[i]=e[i]):n[i]=s.value}return n}}function Ik(t){const e={vs:{},fs:{}};for(const n in t){let r=t[n];const i=n.slice(0,2);typeof r=="string"&&(r={order:0,injection:r}),e[i][n]=r}return e}function Rk(t){return Ok(fE(t))}function Ok(t){const e={},n={};return cE({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((r,i)=>n[i]-n[r]).map(r=>e[r])}function cE(t){let{modules:e,level:n,moduleMap:r,moduleDepth:i}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const s of e)r[s.name]=s,(i[s.name]===void 0||i[s.name]<n)&&(i[s.name]=n);for(const s of e)s.dependencies&&cE({modules:s.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}function fE(t,e){return t.map(n=>(n instanceof Gv||(Ar(typeof n!="string","Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),Ar(n.name,"shader module has no name"),n=new Gv(n),n.dependencies=fE(n.dependencies)),n))}function Dk(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=typeof window<"u"?window.navigator||{}:{},n=t.userAgent||e.userAgent||"",r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i}const Fk=7936,Bk=7937,Nk=7938,Uk=35724,lm={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},js={};Object.keys(lm).forEach(t=>{js[t]=t});function zk(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function Vk(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||Fk),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||Bk);return{gpuVendor:jk(n,r),vendor:n,renderer:r,version:t.getParameter(Nk),shadingLanguageVersion:t.getParameter(Uk)}}function jk(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const xh={};function Hv(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=lm[e];if(Ar(r,e),!Dk(n))return!0;if(e in xh)return xh[e];const i=r[0],s=n.behavior||"enable",o="#extension GL_".concat(i," : ").concat(s,`
void main(void) {}`),c=t.createShader(35633);t.shaderSource(c,o),t.compileShader(c);const h=t.getShaderParameter(c,35713);return t.deleteShader(c),xh[e]=h,h}function Gk(t,e){const n=lm[e];Ar(n,e);const r=zk(t)&&n[1]||n[0],i=typeof r=="string"?!!t.getExtension(r):r;return Ar(i===!1||i===!0),i}function nc(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>Gk(t,n))}function Hk(t){switch(Vk(t).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function Wk(t,e,n){let r=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return nc(t,js.GLSL_FRAG_DEPTH)&&(r+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),nc(t,js.GLSL_DERIVATIVES)&&Hv(t,js.GLSL_DERIVATIVES)&&(r+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),nc(t,js.GLSL_FRAG_DATA)&&Hv(t,js.GLSL_FRAG_DATA,{behavior:"require"})&&(r+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),nc(t,js.GLSL_TEXTURE_LOD)&&(r+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),r}const Qk=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,Yk=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,$k={[ou]:Qk,[Am]:Yk},Mc="__LUMA_INJECT_DECLARATIONS__",Wv=/void\s+main\s*\([^)]*\)\s*\{\n?/,Qv=/}\n?[^{}]*$/,Sh=[];function Yv(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=e===ou;for(const s in n){const o=n[s];o.sort((h,p)=>h.order-p.order),Sh.length=o.length;for(let h=0,p=o.length;h<p;++h)Sh[h]=o[h].injection;const c="".concat(Sh.join(`
`),`
`);switch(s){case"vs:#decl":i&&(t=t.replace(Mc,c));break;case"vs:#main-start":i&&(t=t.replace(Wv,h=>h+c));break;case"vs:#main-end":i&&(t=t.replace(Qv,h=>c+h));break;case"fs:#decl":i||(t=t.replace(Mc,c));break;case"fs:#main-start":i||(t=t.replace(Wv,h=>h+c));break;case"fs:#main-end":i||(t=t.replace(Qv,h=>c+h));break;default:t=t.replace(s,h=>h+c)}}return t=t.replace(Mc,""),r&&(t=t.replace(/\}\s*$/,s=>s+$k[e])),t}function gg(t){const e={};return Ar(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(const r in n)e[r]=e[r]?"".concat(e[r],`
`).concat(n[r]):n[r]}),e}function Fa(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const hE=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],Xk=[...hE,[Fa("attribute"),"in $1"],[Fa("varying"),"out $1"]],Zk=[...hE,[Fa("varying"),"in $1"]],dE=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],Kk=[...dE,[Fa("in"),"attribute $1"],[Fa("out"),"varying $1"]],qk=[...dE,[Fa("in"),"varying $1"]],pg="gl_FragColor",mg=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,Jk=/void\s+main\s*\([^)]*\)\s*\{\n?/;function eI(t,e,n){switch(e){case 300:return n?ff(t,Xk):tI(t);case 100:return n?ff(t,Kk):nI(t);default:throw new Error("unknown GLSL version ".concat(e))}}function ff(t,e){for(const[n,r]of e)t=t.replace(n,r);return t}function tI(t){t=ff(t,Zk);const e=t.match(mg);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(pg,"\\b"),"g"),n)}else{const n="fragmentColor";t=t.replace(Jk,r=>"out vec4 ".concat(n,`;
`).concat(r)).replace(new RegExp("\\b".concat(pg,"\\b"),"g"),n)}return t}function nI(t){t=ff(t,qk);const e=t.match(mg);if(e){const n=e[1];t=t.replace(mg,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),pg)}return t}const rI=`

`.concat(Mc,`

`),gE={[ou]:"vertex",[Am]:"fragment"},iI=`precision highp float;

`;function sI(t,e){const{vs:n,fs:r}=e,i=Rk(e.modules||[]);return{gl:t,vs:$v(t,Object.assign({},e,{source:n,type:ou,modules:i})),fs:$v(t,Object.assign({},e,{source:r,type:Am,modules:i})),getUniforms:oI(i)}}function $v(t,e){let{id:n,source:r,type:i,modules:s,defines:o={},hookFunctions:c=[],inject:h={},transpileToGLSL100:p=!1,prologue:_=!0,log:y}=e;Ar(typeof r=="string","shader source must be a string");const w=i===ou,T=r.split(`
`);let S=100,k="",U=r;T[0].indexOf("#version ")===0?(S=300,k=T[0],U=T.slice(1).join(`
`)):k="#version ".concat(S);const x={};s.forEach(X=>{Object.assign(x,X.getDefines())}),Object.assign(x,o);let C=_?"".concat(k,`
`).concat(AI({id:n,source:r,type:i}),`
`).concat(aI({type:i}),`
`).concat(Hk(t),`
`).concat(Wk(t),`
`).concat(lI(x),`
`).concat(w?"":iI,`
`):"".concat(k,`
`);const P=cI(c),B={},z={},H={};for(const X in h){const Q=typeof h[X]=="string"?{injection:h[X],order:0}:h[X],te=X.match(/^(v|f)s:(#)?([\w-]+)$/);if(te){const ie=te[2],ne=te[3];ie?ne==="decl"?z[X]=[Q]:H[X]=[Q]:B[X]=[Q]}else H[X]=[Q]}for(const X of s){y&&X.checkDeprecations(U,y);const Q=X.getModuleSource(i,S);C+=Q;const te=X.injections[i];for(const ie in te){const ne=ie.match(/^(v|f)s:#([\w-]+)$/);if(ne){const ce=ne[2]==="decl"?z:H;ce[ie]=ce[ie]||[],ce[ie].push(te[ie])}else B[ie]=B[ie]||[],B[ie].push(te[ie])}}return C+=rI,C=Yv(C,i,z),C+=uI(P[i],B),C+=U,C=Yv(C,i,H),C=eI(C,p?100:S,w),C}function oI(t){return function(n){const r={};for(const i of t){const s=i.getUniforms(n,r);Object.assign(r,s)}return r}}function aI(t){let{type:e}=t;return`
#define SHADER_TYPE_`.concat(gE[e].toUpperCase(),`
`)}function AI(t){let{id:e,source:n,type:r}=t;return e&&typeof e=="string"&&n.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(e,"_").concat(gE[r],`

`):""}function lI(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=0,n="";for(const r in t){e===0&&(n+=`
// APPLICATION DEFINES
`),e++;const i=t[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],`
`))}return e===0&&(n+=`
`),n}function uI(t,e){let n="";for(const r in t){const i=t[r];if(n+="void ".concat(i.signature,` {
`),i.header&&(n+="  ".concat(i.header)),e[r]){const s=e[r];s.sort((o,c)=>o.order-c.order);for(const o of s)n+="  ".concat(o.injection,`
`)}i.footer&&(n+="  ".concat(i.footer)),n+=`}
`}return n}function cI(t){const e={vs:{},fs:{}};return t.forEach(n=>{let r;typeof n!="string"?(r=n,n=r.hook):r={},n=n.trim();const[i,s]=n.split(":"),o=n.replace(/\(.+/,"");e[i][o]=Object.assign(r,{signature:s})}),e}const fI="void main() {gl_FragColor = vec4(0);}",pE=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,hI=`#version 300 es
`.concat(pE);function mE(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[r,i,s]=n;if(!e.includes(r)||!i||!s)return null;const o=s.split(";")[0];return{qualifier:r,type:i,name:o}}function vE(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{version:e=100,input:n,inputType:r,output:i}=t;if(!n)return e===300?hI:e>300?"#version ".concat(e,`
`).concat(pE):fI;const s=pI(n,r);return e>=300?"#version ".concat(e," ").concat(e===300?"es":"",`
in `).concat(r," ").concat(n,`;
out vec4 `).concat(i,`;
void main() {
  `).concat(i," = ").concat(s,`;
}`):"varying ".concat(r," ").concat(n,`;
void main() {
  gl_FragColor = `).concat(s,`;
}`)}function dI(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Ar(!1),null}}function gI(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Ar(!1),null}}function pI(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return Ar(!1),null}}const mI=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,vI={name:"fp32",vs:mI,fs:null};function Xv(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}const xr={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function yI(t,{precision:e=xr.precision}={}){return t=_I(t),"".concat(parseFloat(t.toPrecision(e)))}function Ba(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ls(t,e,n){return bI(t,r=>Math.max(e,Math.min(n,r)))}function hf(t,e,n){return Ba(t)?t.map((r,i)=>hf(r,e[i],n)):n*e+(1-n)*t}function Nl(t,e,n){const r=xr.EPSILON;try{if(t===e)return!0;if(Ba(t)&&Ba(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!Nl(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=xr.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{xr.EPSILON=r}}function _I(t){return Math.round(t/xr.EPSILON)*xr.EPSILON}function wI(t){return t.clone?t.clone():new Array(t.length)}function bI(t,e,n){if(Ba(t)){const r=t;n=n||wI(r);for(let i=0;i<n.length&&i<r.length;++i)n[i]=e(t[i],i,n);return n}return e(t)}function EI(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}class yE extends EI(Array){clone(){return new this.constructor().copy(this)}fromArray(e,n=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=e[r+n];return this.check()}toArray(e=[],n=0){for(let r=0;r<this.ELEMENTS;++r)e[n+r]=this[r];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Ba(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(xr)}formatString(e){let n="";for(let r=0;r<this.ELEMENTS;++r)n+=(r>0?", ":"")+yI(this[r],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!Nl(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,r){if(r===void 0)return this.lerp(this,e,n);for(let i=0;i<this.ELEMENTS;++i){const s=e[i];this[i]=s+r*(n[i]-s)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),n[r]);return this.check()}add(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]+=n[r];return this.check()}subtract(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]-=n[r];return this.check()}scale(e){if(typeof e=="number")for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(xr.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),n);return this.check()}get elements(){return this}}function TI(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function rr(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function Ch(t,e,n=""){if(xr.debug&&!TI(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}class xI extends yE{get x(){return this[0]}set x(e){this[0]=rr(e)}get y(){return this[1]}set y(e){this[1]=rr(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let r=0;r<this.ELEMENTS;++r){const i=this[r]-e[r];n+=i*i}return rr(n)}dot(e){let n=0;for(let r=0;r<this.ELEMENTS;++r)n+=this[r]*e[r];return rr(n)}normalize(){const e=this.magnitude();if(e!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]*=n[r];return this.check()}divide(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]/=n[r];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Xv(e>=0&&e<this.ELEMENTS,"index is out of range"),rr(this[e])}setComponent(e,n){return Xv(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var Qt=1e-6,Na=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function SI(){var t=new Na(2);return Na!=Float32Array&&(t[0]=0,t[1]=0),t}function df(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function _E(t,e){return t[0]=-e[0],t[1]=-e[1],t}function wE(t,e,n,r){var i=e[0],s=e[1];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t}function CI(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}(function(){var t=SI();return function(e,n,r,i,s,o){var c,h;for(n||(n=2),r||(r=0),i?h=Math.min(i*n+r,e.length):h=e.length,c=r;c<h;c+=n)t[0]=e[c],t[1]=e[c+1],s(t,t,o),e[c]=t[0],e[c+1]=t[1];return e}})();function MI(t,e,n){const r=e[0],i=e[1],s=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/s,t[1]=(n[1]*r+n[5]*i)/s,t}function bE(t,e,n){const r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s||1;return t[0]=(n[0]*r+n[4]*i+n[8]*s)/o,t[1]=(n[1]*r+n[5]*i+n[9]*s)/o,t[2]=(n[2]*r+n[6]*i+n[10]*s)/o,t}function LI(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t}function PI(){var t=new Na(3);return Na!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function kI(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function II(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function RI(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function OI(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function DI(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function FI(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[0],c=n[1],h=n[2];return t[0]=i*h-s*c,t[1]=s*o-r*h,t[2]=r*c-i*o,t}function EE(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/o,t}function BI(t,e,n){var r=e[0],i=e[1],s=e[2];return t[0]=r*n[0]+i*n[3]+s*n[6],t[1]=r*n[1]+i*n[4]+s*n[7],t[2]=r*n[2]+i*n[5]+s*n[8],t}function NI(t,e,n){var r=n[0],i=n[1],s=n[2],o=n[3],c=e[0],h=e[1],p=e[2],_=i*p-s*h,y=s*c-r*p,w=r*h-i*c,T=i*w-s*y,S=s*_-r*w,k=r*y-i*_,U=o*2;return _*=U,y*=U,w*=U,T*=2,S*=2,k*=2,t[0]=c+_+T,t[1]=h+y+S,t[2]=p+w+k,t}function UI(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function zI(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function VI(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function jI(t,e){var n=t[0],r=t[1],i=t[2],s=e[0],o=e[1],c=e[2],h=Math.sqrt(n*n+r*r+i*i),p=Math.sqrt(s*s+o*o+c*c),_=h*p,y=_&&DI(t,e)/_;return Math.acos(Math.min(Math.max(y,-1),1))}var GI=II,HI=RI;(function(){var t=PI();return function(e,n,r,i,s,o){var c,h;for(n||(n=3),r||(r=0),i?h=Math.min(i*n+r,e.length):h=e.length,c=r;c<h;c+=n)t[0]=e[c],t[1]=e[c+1],t[2]=e[c+2],s(t,t,o),e[c]=t[0],e[c+1]=t[1],e[c+2]=t[2];return e}})();const Mh=[0,0,0];let rc;class ci extends xI{static get ZERO(){return rc||(rc=new ci(0,0,0),Object.freeze(rc)),rc}constructor(e=0,n=0,r=0){super(-0,-0,-0),arguments.length===1&&Ba(e)?this.copy(e):(xr.debug&&(rr(e),rr(n),rr(r)),this[0]=e,this[1]=n,this[2]=r)}set(e,n,r){return this[0]=e,this[1]=n,this[2]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return xr.debug&&(rr(e.x),rr(e.y),rr(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=rr(e)}angle(e){return jI(this,e)}cross(e){return FI(this,this,e),this.check()}rotateX({radians:e,origin:n=Mh}){return UI(this,this,n,e),this.check()}rotateY({radians:e,origin:n=Mh}){return zI(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=Mh}){return VI(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return EE(this,this,e),this.check()}transformAsVector(e){return bE(this,this,e),this.check()}transformByMatrix3(e){return BI(this,this,e),this.check()}transformByMatrix2(e){return LI(this,this,e),this.check()}transformByQuaternion(e){return NI(this,this,e),this.check()}}class WI extends yE{toString(){let e="[";if(xr.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let r=0;r<this.RANK;++r)e+=" ".concat(this[r*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,r){return this[n*this.RANK+e]=rr(r),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)n[i]=this[r+i];return n}setColumn(e,n){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)this[r+i]=n[i];return this}}function QI(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function YI(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],s=e[6],o=e[7],c=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=i,t[13]=o,t[14]=c}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function gf(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],c=e[5],h=e[6],p=e[7],_=e[8],y=e[9],w=e[10],T=e[11],S=e[12],k=e[13],U=e[14],x=e[15],C=n*c-r*o,P=n*h-i*o,B=n*p-s*o,z=r*h-i*c,H=r*p-s*c,X=i*p-s*h,Q=_*k-y*S,te=_*U-w*S,ie=_*x-T*S,ne=y*U-w*k,fe=y*x-T*k,ce=w*x-T*U,xe=C*ce-P*fe+B*ne+z*ie-H*te+X*Q;return xe?(xe=1/xe,t[0]=(c*ce-h*fe+p*ne)*xe,t[1]=(i*fe-r*ce-s*ne)*xe,t[2]=(k*X-U*H+x*z)*xe,t[3]=(w*H-y*X-T*z)*xe,t[4]=(h*ie-o*ce-p*te)*xe,t[5]=(n*ce-i*ie+s*te)*xe,t[6]=(U*B-S*X-x*P)*xe,t[7]=(_*X-w*B+T*P)*xe,t[8]=(o*fe-c*ie+p*Q)*xe,t[9]=(r*ie-n*fe-s*Q)*xe,t[10]=(S*H-k*B+x*C)*xe,t[11]=(y*B-_*H-T*C)*xe,t[12]=(c*te-o*ne-h*Q)*xe,t[13]=(n*ne-r*te+i*Q)*xe,t[14]=(k*P-S*z-U*C)*xe,t[15]=(_*z-y*P+w*C)*xe,t):null}function $I(t){var e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],c=t[6],h=t[7],p=t[8],_=t[9],y=t[10],w=t[11],T=t[12],S=t[13],k=t[14],U=t[15],x=e*o-n*s,C=e*c-r*s,P=e*h-i*s,B=n*c-r*o,z=n*h-i*o,H=r*h-i*c,X=p*S-_*T,Q=p*k-y*T,te=p*U-w*T,ie=_*k-y*S,ne=_*U-w*S,fe=y*U-w*k;return x*fe-C*ne+P*ie+B*te-z*Q+H*X}function oi(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],c=e[4],h=e[5],p=e[6],_=e[7],y=e[8],w=e[9],T=e[10],S=e[11],k=e[12],U=e[13],x=e[14],C=e[15],P=n[0],B=n[1],z=n[2],H=n[3];return t[0]=P*r+B*c+z*y+H*k,t[1]=P*i+B*h+z*w+H*U,t[2]=P*s+B*p+z*T+H*x,t[3]=P*o+B*_+z*S+H*C,P=n[4],B=n[5],z=n[6],H=n[7],t[4]=P*r+B*c+z*y+H*k,t[5]=P*i+B*h+z*w+H*U,t[6]=P*s+B*p+z*T+H*x,t[7]=P*o+B*_+z*S+H*C,P=n[8],B=n[9],z=n[10],H=n[11],t[8]=P*r+B*c+z*y+H*k,t[9]=P*i+B*h+z*w+H*U,t[10]=P*s+B*p+z*T+H*x,t[11]=P*o+B*_+z*S+H*C,P=n[12],B=n[13],z=n[14],H=n[15],t[12]=P*r+B*c+z*y+H*k,t[13]=P*i+B*h+z*w+H*U,t[14]=P*s+B*p+z*T+H*x,t[15]=P*o+B*_+z*S+H*C,t}function Ul(t,e,n){var r=n[0],i=n[1],s=n[2],o,c,h,p,_,y,w,T,S,k,U,x;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*s+e[12],t[13]=e[1]*r+e[5]*i+e[9]*s+e[13],t[14]=e[2]*r+e[6]*i+e[10]*s+e[14],t[15]=e[3]*r+e[7]*i+e[11]*s+e[15]):(o=e[0],c=e[1],h=e[2],p=e[3],_=e[4],y=e[5],w=e[6],T=e[7],S=e[8],k=e[9],U=e[10],x=e[11],t[0]=o,t[1]=c,t[2]=h,t[3]=p,t[4]=_,t[5]=y,t[6]=w,t[7]=T,t[8]=S,t[9]=k,t[10]=U,t[11]=x,t[12]=o*r+_*i+S*s+e[12],t[13]=c*r+y*i+k*s+e[13],t[14]=h*r+w*i+U*s+e[14],t[15]=p*r+T*i+x*s+e[15]),t}function n0(t,e,n){var r=n[0],i=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function XI(t,e,n,r){var i=r[0],s=r[1],o=r[2],c=Math.hypot(i,s,o),h,p,_,y,w,T,S,k,U,x,C,P,B,z,H,X,Q,te,ie,ne,fe,ce,xe,Pe;return c<Qt?null:(c=1/c,i*=c,s*=c,o*=c,h=Math.sin(n),p=Math.cos(n),_=1-p,y=e[0],w=e[1],T=e[2],S=e[3],k=e[4],U=e[5],x=e[6],C=e[7],P=e[8],B=e[9],z=e[10],H=e[11],X=i*i*_+p,Q=s*i*_+o*h,te=o*i*_-s*h,ie=i*s*_-o*h,ne=s*s*_+p,fe=o*s*_+i*h,ce=i*o*_+s*h,xe=s*o*_-i*h,Pe=o*o*_+p,t[0]=y*X+k*Q+P*te,t[1]=w*X+U*Q+B*te,t[2]=T*X+x*Q+z*te,t[3]=S*X+C*Q+H*te,t[4]=y*ie+k*ne+P*fe,t[5]=w*ie+U*ne+B*fe,t[6]=T*ie+x*ne+z*fe,t[7]=S*ie+C*ne+H*fe,t[8]=y*ce+k*xe+P*Pe,t[9]=w*ce+U*xe+B*Pe,t[10]=T*ce+x*xe+z*Pe,t[11]=S*ce+C*xe+H*Pe,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function TE(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[4],o=e[5],c=e[6],h=e[7],p=e[8],_=e[9],y=e[10],w=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+p*r,t[5]=o*i+_*r,t[6]=c*i+y*r,t[7]=h*i+w*r,t[8]=p*i-s*r,t[9]=_*i-o*r,t[10]=y*i-c*r,t[11]=w*i-h*r,t}function ZI(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],c=e[2],h=e[3],p=e[8],_=e[9],y=e[10],w=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-p*r,t[1]=o*i-_*r,t[2]=c*i-y*r,t[3]=h*i-w*r,t[8]=s*r+p*i,t[9]=o*r+_*i,t[10]=c*r+y*i,t[11]=h*r+w*i,t}function xE(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],c=e[2],h=e[3],p=e[4],_=e[5],y=e[6],w=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+p*r,t[1]=o*i+_*r,t[2]=c*i+y*r,t[3]=h*i+w*r,t[4]=p*i-s*r,t[5]=_*i-o*r,t[6]=y*i-c*r,t[7]=w*i-h*r,t}function KI(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,c=r+r,h=i+i,p=n*o,_=r*o,y=r*c,w=i*o,T=i*c,S=i*h,k=s*o,U=s*c,x=s*h;return t[0]=1-y-S,t[1]=_+x,t[2]=w-U,t[3]=0,t[4]=_-x,t[5]=1-p-S,t[6]=T+k,t[7]=0,t[8]=w+U,t[9]=T-k,t[10]=1-p-y,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function qI(t,e,n,r,i,s,o){var c=1/(n-e),h=1/(i-r),p=1/(s-o);return t[0]=s*2*c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*h,t[6]=0,t[7]=0,t[8]=(n+e)*c,t[9]=(i+r)*h,t[10]=(o+s)*p,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*p,t[15]=0,t}function JI(t,e,n,r,i){var s=1/Math.tan(e/2),o;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}var SE=JI;function eR(t,e,n,r,i,s,o){var c=1/(e-n),h=1/(r-i),p=1/(s-o);return t[0]=-2*c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*p,t[11]=0,t[12]=(e+n)*c,t[13]=(i+r)*h,t[14]=(o+s)*p,t[15]=1,t}var tR=eR;function nR(t,e,n,r){var i,s,o,c,h,p,_,y,w,T,S=e[0],k=e[1],U=e[2],x=r[0],C=r[1],P=r[2],B=n[0],z=n[1],H=n[2];return Math.abs(S-B)<Qt&&Math.abs(k-z)<Qt&&Math.abs(U-H)<Qt?QI(t):(_=S-B,y=k-z,w=U-H,T=1/Math.hypot(_,y,w),_*=T,y*=T,w*=T,i=C*w-P*y,s=P*_-x*w,o=x*y-C*_,T=Math.hypot(i,s,o),T?(T=1/T,i*=T,s*=T,o*=T):(i=0,s=0,o=0),c=y*o-w*s,h=w*i-_*o,p=_*s-y*i,T=Math.hypot(c,h,p),T?(T=1/T,c*=T,h*=T,p*=T):(c=0,h=0,p=0),t[0]=i,t[1]=c,t[2]=_,t[3]=0,t[4]=s,t[5]=h,t[6]=y,t[7]=0,t[8]=o,t[9]=p,t[10]=w,t[11]=0,t[12]=-(i*S+s*k+o*U),t[13]=-(c*S+h*k+p*U),t[14]=-(_*S+y*k+w*U),t[15]=1,t)}function Zv(t,e){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],c=t[5],h=t[6],p=t[7],_=t[8],y=t[9],w=t[10],T=t[11],S=t[12],k=t[13],U=t[14],x=t[15],C=e[0],P=e[1],B=e[2],z=e[3],H=e[4],X=e[5],Q=e[6],te=e[7],ie=e[8],ne=e[9],fe=e[10],ce=e[11],xe=e[12],Pe=e[13],Be=e[14],gt=e[15];return Math.abs(n-C)<=Qt*Math.max(1,Math.abs(n),Math.abs(C))&&Math.abs(r-P)<=Qt*Math.max(1,Math.abs(r),Math.abs(P))&&Math.abs(i-B)<=Qt*Math.max(1,Math.abs(i),Math.abs(B))&&Math.abs(s-z)<=Qt*Math.max(1,Math.abs(s),Math.abs(z))&&Math.abs(o-H)<=Qt*Math.max(1,Math.abs(o),Math.abs(H))&&Math.abs(c-X)<=Qt*Math.max(1,Math.abs(c),Math.abs(X))&&Math.abs(h-Q)<=Qt*Math.max(1,Math.abs(h),Math.abs(Q))&&Math.abs(p-te)<=Qt*Math.max(1,Math.abs(p),Math.abs(te))&&Math.abs(_-ie)<=Qt*Math.max(1,Math.abs(_),Math.abs(ie))&&Math.abs(y-ne)<=Qt*Math.max(1,Math.abs(y),Math.abs(ne))&&Math.abs(w-fe)<=Qt*Math.max(1,Math.abs(w),Math.abs(fe))&&Math.abs(T-ce)<=Qt*Math.max(1,Math.abs(T),Math.abs(ce))&&Math.abs(S-xe)<=Qt*Math.max(1,Math.abs(S),Math.abs(xe))&&Math.abs(k-Pe)<=Qt*Math.max(1,Math.abs(k),Math.abs(Pe))&&Math.abs(U-Be)<=Qt*Math.max(1,Math.abs(U),Math.abs(Be))&&Math.abs(x-gt)<=Qt*Math.max(1,Math.abs(x),Math.abs(gt))}function rR(){var t=new Na(4);return Na!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function iR(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function au(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,t[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,t[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,t[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,t}(function(){var t=rR();return function(e,n,r,i,s,o){var c,h;for(n||(n=4),r||(r=0),i?h=Math.min(i*n+r,e.length):h=e.length,c=r;c<h;c+=n)t[0]=e[c],t[1]=e[c+1],t[2]=e[c+2],t[3]=e[c+3],s(t,t,o),e[c]=t[0],e[c+1]=t[1],e[c+2]=t[2],e[c+3]=t[3];return e}})();var vg;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"})(vg||(vg={}));const sR=45*Math.PI/180,oR=1,Lh=.1,Ph=500,aR=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class fi extends WI{static get IDENTITY(){return lR()}static get ZERO(){return AR()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return vg}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,r,i,s,o,c,h,p,_,y,w,T,S,k,U){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this[4]=s,this[5]=o,this[6]=c,this[7]=h,this[8]=p,this[9]=_,this[10]=y,this[11]=w,this[12]=T,this[13]=S,this[14]=k,this[15]=U,this.check()}setRowMajor(e,n,r,i,s,o,c,h,p,_,y,w,T,S,k,U){return this[0]=e,this[1]=s,this[2]=p,this[3]=T,this[4]=n,this[5]=o,this[6]=_,this[7]=S,this[8]=r,this[9]=c,this[10]=y,this[11]=k,this[12]=i,this[13]=h,this[14]=w,this[15]=U,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(aR)}fromObject(e){return this.check()}fromQuaternion(e){return KI(this,e),this.check()}frustum(e){const{left:n,right:r,bottom:i,top:s,near:o=Lh,far:c=Ph}=e;return c===1/0?uR(this,n,r,i,s,o):qI(this,n,r,i,s,o,c),this.check()}lookAt(e){const{eye:n,center:r=[0,0,0],up:i=[0,1,0]}=e;return nR(this,n,r,i),this.check()}ortho(e){const{left:n,right:r,bottom:i,top:s,near:o=Lh,far:c=Ph}=e;return tR(this,n,r,i,s,o,c),this.check()}orthographic(e){const{fovy:n=sR,aspect:r=oR,focalDistance:i=1,near:s=Lh,far:o=Ph}=e;Kv(n);const c=n/2,h=i*Math.tan(c),p=h*r;return this.ortho({left:-p,right:p,bottom:-h,top:h,near:s,far:o})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:r=1,near:i=.1,far:s=500}=e;return Kv(n),SE(this,n,r,i,s),this.check()}determinant(){return $I(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],s=1/r[1],o=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*i,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*i,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],s=1/r[1],o=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*i,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*i,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return YI(this,this),this.check()}invert(){return gf(this,this),this.check()}multiplyLeft(e){return oi(this,e,this),this.check()}multiplyRight(e){return oi(this,this,e),this.check()}rotateX(e){return TE(this,this,e),this.check()}rotateY(e){return ZI(this,this,e),this.check()}rotateZ(e){return xE(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return XI(this,this,e,n),this.check()}scale(e){return n0(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return Ul(this,this,e),this.check()}transform(e,n){return e.length===4?(n=au(n||[-0,-0,-0,-0],e,this),Ch(n,4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:r}=e;let i;switch(r){case 2:i=CI(n||[-0,-0],e,this);break;case 3:i=EE(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Ch(i,e.length),i}transformAsVector(e,n){let r;switch(e.length){case 2:r=MI(n||[-0,-0],e,this);break;case 3:r=bE(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Ch(r,e.length),r}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,r){return this.identity().translate([e,n,r])}}let ic,sc;function AR(){return ic||(ic=new fi([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(ic)),ic}function lR(){return sc||(sc=new fi,Object.freeze(sc)),sc}function Kv(t){if(t>Math.PI*2)throw Error("expected radians")}function uR(t,e,n,r,i,s){const o=2*s/(n-e),c=2*s/(i-r),h=(n+e)/(n-e),p=(i+r)/(i-r),_=-1,y=-1,w=-2*s;return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=h,t[9]=p,t[10]=_,t[11]=y,t[12]=0,t[13]=0,t[14]=w,t[15]=0,t}const cR=new Uint8Array([0,255,255,255]),fR={pickingSelectedColor:null,pickingHighlightColor:cR,pickingActive:!1,pickingAttribute:!1};function hR(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fR;const e={};if(t.pickingSelectedColor!==void 0)if(!t.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,r=>r/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return t.pickingActive!==void 0&&(e.picking_uActive=!!t.pickingActive,e.picking_uAttribute=!!t.pickingAttribute),e}const dR=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,gR=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,pR={name:"picking",vs:dR,fs:gR,getUniforms:hR},mR=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,vR={name:"transform",vs:mR,fs:null};class Au{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new Au(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(r=>r.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{vs:n="",fs:r="",defines:i={},inject:s={},varyings:o=[],bufferMode:c=35981,transpileToGLSL100:h=!1}=e,p=this._getModuleList(e.modules),_=this._getHash(n),y=this._getHash(r),w=p.map(P=>this._getHash(P.name)).sort(),T=o.map(P=>this._getHash(P)),S=Object.keys(i).sort(),k=Object.keys(s).sort(),U=[],x=[];for(const P of S)U.push(this._getHash(P)),U.push(this._getHash(i[P]));for(const P of k)x.push(this._getHash(P)),x.push(this._getHash(s[P]));const C="".concat(_,"/").concat(y,"D").concat(U.join("/"),"M").concat(w.join("/"),"I").concat(x.join("/"),"V").concat(T.join("/"),"H").concat(this.stateHash,"B").concat(c).concat(h?"T":"");if(!this._programCache[C]){const P=sI(this.gl,{vs:n,fs:r,modules:p,inject:s,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:h});this._programCache[C]=new lE(this.gl,{hash:C,vs:P.vs,fs:P.fs,varyings:o,bufferMode:c}),this._getUniforms[C]=P.getUniforms||(B=>{}),this._useCounts[C]=0}return this._useCounts[C]++,this._programCache[C]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,this._useCounts[n]===0&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const n=new Array(this._defaultModules.length+e.length),r={};let i=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const c=this._defaultModules[s],h=c.name;n[i++]=c,r[h]=!0}for(let s=0,o=e.length;s<o;++s){const c=e[s],h=c.name;r[h]||(n[i++]=c,r[h]=!0)}return n.length=i,n}}const yR={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function _R(t,e,n){const r={};let i=e.indices;for(const s in e.attributes){const o=e.attributes[s],c=wR(s);if(s==="indices")i=o;else if(o.constant)r[c]=o.value;else{const h=o.value,p={...o};delete p.value,r[c]=[new mt(t,h),p],bR(s,p)}}if(i){const s=i.value||i;we(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};r.indices=[new mt(t,{data:s,target:34963}),o]}return r}function wR(t,e){const{attributeMap:n=yR}={};return n&&n[t]||t}function bR(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors";break}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break}we(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const Vo=2,ER=1e4,TR="Model needs drawMode and vertexCount",qv=()=>{},xR={};class vo{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:r=Ts("model")}=n;we(Jf(e)),this.id=r,this.gl=e,this.id=n.id||Ts("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||Au.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:r,fs:i,modules:s,defines:o,inject:c,varyings:h,bufferMode:p,transpileToGLSL100:_}=e;this.programProps={program:n,vs:r,fs:i,modules:s,defines:o,inject:c,varyings:h,bufferMode:p,transpileToGLSL100:_},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=e.drawMode!==void 0?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},we(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),TR)}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:r,fs:i,modules:s,defines:o,inject:c,varyings:h,bufferMode:p,transpileToGLSL100:_}=e;this.programProps={program:n,vs:r,fs:i,modules:s,defines:o,inject:c,varyings:h,bufferMode:p,transpileToGLSL100:_},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return we(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return we(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=_R(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Da(e))return this;const n={};for(const r in e){const i=e[r];n[r]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(n),this}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return om(this.program.gl,e),this}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();const{moduleSettings:n=null,framebuffer:r,uniforms:i={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:c={},vertexArray:h=this.vertexArray}=e;this.setAttributes(s),this.updateModuleSettings(n),this.setUniforms(i);let p;ke.priority>=Vo&&(p=this._logDrawCallStart(Vo));const _=this.vertexArray.getDrawParams(),{isIndexed:y=_.isIndexed,indexType:w=_.indexType,indexOffset:T=_.indexOffset,vertexArrayInstanced:S=_.isInstanced}=this.props;S&&!this.isInstanced&&ke.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:k,instanceCount:U}=this,{onBeforeRender:x=qv,onAfterRender:C=qv}=this.props;x(),this.program.setUniforms(this.uniforms);const P=this.program.draw(Object.assign(xR,e,{logPriority:p,uniforms:null,framebuffer:r,parameters:c,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:h,transformFeedback:o,isIndexed:y,indexType:w,isInstanced:k,instanceCount:U,offset:y?T:0}));return C(),ke.priority>=Vo&&this._logDrawCallEnd(p,h,r),P}transform(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{discard:n=!0,feedbackBuffers:r,unbindModels:i=[]}=e;let{parameters:s}=e;r&&this._setFeedbackBuffers(r),n&&(s=Object.assign({},s,{35977:n})),i.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{i.forEach(o=>o.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ke.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:r,fs:i,modules:s,inject:o,defines:c,varyings:h,bufferMode:p,transpileToGLSL100:_}=this.programProps;n=this.programManager.get({vs:r,fs:i,modules:s,inject:o,defines:c,varyings:h,bufferMode:p,transpileToGLSL100:_}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}we(n instanceof lE,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new _k(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof mt&&n.delete()}}_setAnimationProps(e){this.animated&&we(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Da(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new uE(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:ER;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),ke.group(Vo,">>> DRAWING MODEL ".concat(this.id),{collapsed:ke.level<=2})(),e}_logDrawCallEnd(e,n,r,i){if(e===void 0)return;const s=Ek({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:c,unusedCount:h}=Nv({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),{table:p,count:_}=Nv({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0});_>0&&ke.log("MISSING UNIFORMS",Object.keys(p))(),h>0&&ke.log("UNUSED UNIFORMS",Object.keys(c))();const y=xk(this.vertexArray.configuration);ke.table(e,s)(),ke.table(e,o)(),ke.table(e+1,y)(),i&&i.log({logLevel:Vo,message:"Rendered to ".concat(i.id)}),ke.groupEnd(Vo)()}}class SR{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(const n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.bindings[this.currentIndex],{sourceBuffers:r,transformFeedback:i}=n;return{attributes:Object.assign({},r,e.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:n}=this.bindings[this.currentIndex],r=e?n[e]:null;return r?r instanceof mt?r:r.buffer:null}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyingName:n}=e,r=this.getBuffer(n);return r?r.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&we(Je(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:n={}}=e,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const s=this.feedbackMap[i];i in n&&(r[s]=i)}Object.assign(r,e.feedbackBuffers);for(const i in r){const s=r[i];if(typeof s=="string"){const o=n[s],{byteLength:c,usage:h,accessor:p}=o;r[i]=this._createNewBuffer(i,{byteLength:c,usage:h,accessor:p})}}return r}_setupBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const r=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:r})}_setupTransformFeedback(e,n){let{model:r}=n;const{program:i}=r;e.transformFeedback=new uE(this.gl,{program:i,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:n,feedbackBuffers:r}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:n,feedbackBuffers:r})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const n=Object.assign({},e.sourceBuffers),r=Object.assign({},e.feedbackBuffers);for(const i in this.feedbackMap){const s=this.feedbackMap[i];n[i]=e.feedbackBuffers[s],r[s]=e.sourceBuffers[i],we(r[s]instanceof mt)}return{sourceBuffers:n,feedbackBuffers:r}}_createNewBuffer(e,n){const r=new mt(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=r,r}_getNextIndex(){return(this.currentIndex+1)%2}}const CR="transform_uSampler_",pf="transform_uSize_",Jv="transform_position";function MR(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:r,targetTexture:i}=t,o=Object.keys(n).length,c=null;const h={};let p=e,_={};if(o>0||r){const y=p.split(`
`),w=y.slice();if(y.forEach((T,S,k)=>{if(o>0){const U=RR(T,n);if(U){const{updatedLine:x,inject:C}=U;w[S]=x,_=gg([_,C]),Object.assign(h,U.samplerTextureMap),o--}}r&&!c&&(c=IR(T,r))}),r){we(i);const T="".concat(pf).concat(r),S="uniform vec2 ".concat(T,`;
`),k="     vec2 ".concat(Jv," = transform_getPos(").concat(T,`);
     gl_Position = vec4(`).concat(Jv,`, 0, 1.);
`);_=gg([_,{"vs:#decl":S,"vs:#main-start":k}])}p=w.join(`
`)}return{vs:p,targetTextureType:c,inject:_,samplerTextureMap:h}}function LR(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:r}=t;const i={};let s,o;n&&({width:s,height:o}=r,i["".concat(pf).concat(n)]=[s,o]);for(const c in e)({width:s,height:o}=e[c]),i["".concat(pf).concat(c)]=[s,o];return i}function PR(t){return mE(t,["attribute","in"])}function kR(t){const e="".concat(CR).concat(t),n="".concat(pf).concat(t),r="  uniform sampler2D ".concat(e,`;
  uniform vec2 `).concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}function IR(t,e){const n=mE(t,["varying","out"]);return n&&n.name===e?n.type:null}function RR(t,e){const n={},r=PR(t);if(!r)return null;const{type:i,name:s}=r;if(s&&e[s]){const o="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:c,sizeName:h,uniformDeclerations:p}=kR(s),_=dI(i),y="  ".concat(i," ").concat(s," = transform_getInput(").concat(c,", ").concat(h,").").concat(_,`;
`);return n[c]=s,{updatedLine:o,inject:{"vs:#decl":p,"vs:#main-start":y},samplerTextureMap:n}}return null}const OR={10241:9728,10240:9728,10242:33071,10243:33071},DR="transform_output";class FR{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,sourceTextures:r,framebuffer:i,targetTexture:s}=this.bindings[this.currentIndex],o=Object.assign({},n,e.attributes),c=Object.assign({},e.uniforms),h=Object.assign({},e.parameters);let p=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const y in this.samplerTextureMap){const w=this.samplerTextureMap[y];c[y]=r[w]}this._setSourceTextureParameters();const _=LR({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(c,_)}return this.hasTargetTexture&&(p=!1,h.viewport=[0,0,i.width,i.height]),{attributes:o,framebuffer:i,uniforms:c,discard:p,parameters:h}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{framebuffer:n}=this.bindings[this.currentIndex],r=t0(n);if(!e)return r;const i=r.constructor,s=gI(this.targetTextureType),o=new i(r.length*s/4);let c=0;for(let h=0;h<r.length;h+=4)for(let p=0;p<s;p++)o[c++]=r[h+p];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_targetTextureVarying:n,_swapTexture:r}=e;this._swapTexture=r,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:n,textureOrReference:r}=e;if(r instanceof ur)return r;const i=n[r];return i?(this._targetRefTexName=r,this._createNewTexture(i)):null}_setupTextures(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,_sourceTextures:r={},_targetTexture:i}=e,s=this._createTargetTexture({sourceTextures:r,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:r,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if(typeof e!="number"||this.elementCount>=e)return;const n=new Float32Array(e);n.forEach((r,i,s)=>{s[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new mt(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:n,targetTexture:r}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:n,targetTexture:r})}}_updateBinding(e,n){const{sourceBuffers:r,sourceTextures:i,targetTexture:s}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,i),Object.assign(e.sourceBuffers,r),s){e.targetTexture=s;const{width:o,height:c}=s,{framebuffer:h}=e;h?(h.update({attachments:{36064:s},resizeAttachments:!1}),h.resize({width:o,height:c})):e.framebuffer=new qt(this.gl,{id:"transform-framebuffer",width:o,height:c,attachments:{36064:s}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(const r in n)n[r].setParameters(OR)}_swapTextures(e){if(!this._swapTexture)return null;const n=Object.assign({},e.sourceTextures);n[this._swapTexture]=e.targetTexture;const r=e.sourceTextures[this._swapTexture];return{sourceTextures:n,targetTexture:r}}_createNewTexture(e){const n=lP(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceTextures:n,targetTexture:r}=this.bindings[this.currentIndex],{vs:i,uniforms:s,targetTextureType:o,inject:c,samplerTextureMap:h}=MR({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),p=gg([e.inject||{},c]);this.targetTextureType=o,this.samplerTextureMap=h;const _=e._fs||vE({version:aE(i),input:this.targetTextureVarying,inputType:o,output:DR}),y=this.hasSourceTextures||this.targetTextureVarying?[vR].concat(e.modules||[]):e.modules;return{vs:i,fs:_,modules:y,uniforms:s,inject:p}}}class um{static isSupported(e){return Je(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){const{model:e,bufferTransform:n,textureTransform:r}=this;e&&e.delete(),n&&n.delete(),r&&r.delete()}run(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{clearRenderTarget:n=!0}=e,r=this._updateDrawOptions(e);n&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}swap(){let e=!1;const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)e=e||r.swap();we(e,"Nothing to swap")}getBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n){const i=r.getData(e);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)r.update(e)}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new vo(n,Object.assign({},e,{fs:e.fs||vE({version:aE(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=i.updateModelProps(n);return n}_buildResourceTransforms(e,n){BR(n)&&(this.bufferTransform=new SR(e,n)),NR(n)&&(this.textureTransform=new FR(e,n)),we(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=Object.assign(n,i.getDrawOptions(n));return n}}function BR(t){return!!(!Da(t.feedbackBuffers)||!Da(t.feedbackMap)||t.varyings&&t.varyings.length>0)}function NR(t){return!!(!Da(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)}const ey={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class Ja{static get DRAW_MODE(){return ey}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:n=Ts("geometry"),drawMode:r=ey.TRIANGLES,attributes:i={},indices:s=null,vertexCount:o=null}=e;this.id=n,this.drawMode=r|0,this.attributes={},this.userData={},this._setAttributes(i,s),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(const r in e){let i=e[r];i=ArrayBuffer.isView(i)?{value:i}:i,we(ArrayBuffer.isView(i.value),"".concat(this._print(r),": must be typed array or object with value as typed array")),(r==="POSITION"||r==="positions")&&!i.size&&(i.size=3),r==="indices"?(we(!this.indices),this.indices=i):this.attributes[r]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,n){if(n)return n.value.length;let r=1/0;for(const i in e){const s=e[i],{value:o,size:c,constant:h}=s;!h&&o&&c>=1&&(r=Math.min(r,o.length/c))}return we(Number.isFinite(r)),r}}let UR=1,zR=1;class CE{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:n=0,duration:r=Number.POSITIVE_INFINITY,rate:i=1,repeat:s=1}=e,o=UR++,c={time:0,delay:n,duration:r,rate:i,repeat:s};return this._setChannelTime(c,this.time),this.channels.set(o,c),o}removeChannel(e){this.channels.delete(e);for(const[n,r]of this.animations)r.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return n===void 0?!1:this.time>=n.delay+n.duration*n.repeat}getTime(e){if(e===void 0)return this.time;const n=this.channels.get(e);return n===void 0?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const i of n)this._setChannelTime(i,this.time);const r=this.animations.values();for(const i of r){const{animation:s,channel:o}=i;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const r=zR++;return this.animations.set(r,{animation:e,channel:n}),e.setTime(this.getTime(n)),r}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const r=n-e.delay,i=e.duration*e.repeat;r>=i?e.time=e.duration*e.rate:(e.time=Math.max(0,r)%e.duration,e.time*=e.rate)}}const VR=[255,255,255],jR=1;let GR=0;class HR{constructor(e={}){L(this,"id",void 0),L(this,"color",void 0),L(this,"intensity",void 0),L(this,"type","ambient");const{color:n=VR}=e,{intensity:r=jR}=e;this.id=e.id||"ambient-".concat(GR++),this.color=n,this.intensity=r}}const WR=[255,255,255],QR=1,YR=[0,0,-1];let $R=0;class ty{constructor(e={}){L(this,"id",void 0),L(this,"color",void 0),L(this,"intensity",void 0),L(this,"type","directional"),L(this,"direction",void 0),L(this,"shadow",void 0);const{color:n=WR}=e,{intensity:r=QR}=e,{direction:i=YR}=e,{_shadow:s=!1}=e;this.id=e.id||"directional-".concat($R++),this.color=n,this.intensity=r,this.type="directional",this.direction=new ci(i).normalize().toArray(),this.shadow=s}getProjectedLight(e){return this}}class XR{constructor(e,n={id:"pass"}){L(this,"id",void 0),L(this,"gl",void 0),L(this,"props",void 0);const{id:r}=n;this.id=r,this.gl=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class cm extends XR{constructor(...e){super(...e),L(this,"_lastRenderIndex",-1)}render(e){const n=this.gl;return Ri(n,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:n,moduleParameters:r,viewports:i,views:s,onViewportActive:o,clearStack:c=!0,clearCanvas:h=!0}=e;e.pass=e.pass||"unknown";const p=this.gl;h&&KR(p,n),c&&(this._lastRenderIndex=-1);const _=[];for(const y of i){const w=s&&s[y.id];o==null||o(y);const T=this._getDrawLayerParams(y,e),S=y.subViewports||[y];for(const k of S){const U=this._drawLayersInViewport(p,{target:n,moduleParameters:r,viewport:k,view:w,pass:e.pass,layers:e.layers},T);_.push(U)}}return _}_getDrawLayerParams(e,{layers:n,pass:r,isPicking:i=!1,layerFilter:s,cullRect:o,effects:c,moduleParameters:h},p=!1){const _=[],y=ME(this._lastRenderIndex+1),w={layer:n[0],viewport:e,isPicking:i,renderPass:r,cullRect:o},T={};for(let S=0;S<n.length;S++){const k=n[S],U=this._shouldDrawLayer(k,w,s,T),x={shouldDrawLayer:U};U&&!p&&(x.layerRenderIndex=y(k,U),x.moduleParameters=this._getModuleParameters(k,c,r,h),x.layerParameters=this.getLayerParameters(k,S,e)),_[S]=x}return _}_drawLayersInViewport(e,{layers:n,moduleParameters:r,pass:i,target:s,viewport:o,view:c},h){const p=ZR(e,{moduleParameters:r,target:s,viewport:o});if(c&&c.props.clear){const y=c.props.clear===!0?{color:!0,depth:!0}:c.props.clear;jr(e,{scissorTest:!0,scissor:p},()=>om(e,y))}const _={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};Ri(e,{viewport:p});for(let y=0;y<n.length;y++){const w=n[y],{shouldDrawLayer:T,layerRenderIndex:S,moduleParameters:k,layerParameters:U}=h[y];if(T&&w.props.pickable&&_.pickableCount++,w.isComposite)_.compositeCount++;else if(T){_.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,S),k.viewport=o;try{w._drawLayer({moduleParameters:k,uniforms:{layerIndex:S},parameters:U})}catch(x){w.raiseError(x,"drawing ".concat(w," to ").concat(i))}}}return _}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,r){return e.props.parameters}_shouldDrawLayer(e,n,r,i){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;n.layer=e;let o=e.parent;for(;o;){if(!o.props.visible||!o.filterSubLayer(n))return!1;n.layer=o,o=o.parent}if(r){const c=n.layer.id;if(c in i||(i[c]=r(n)),!i[c])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,r,i){var s;const o=Object.assign(Object.create(((s=e.internalState)===null||s===void 0?void 0:s.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:Oa(this.gl)});if(n)for(const h of n){var c;Object.assign(o,(c=h.getModuleParameters)===null||c===void 0?void 0:c.call(h,e))}return Object.assign(o,this.getModuleParameters(e,n),i)}}function ME(t=0,e={}){const n={},r=(i,s)=>{const o=i.props._offset,c=i.id,h=i.parent&&i.parent.id;let p;if(h&&!(h in e)&&r(i.parent,!1),h in n){const _=n[h]=n[h]||ME(e[h],e);p=_(i,s),n[c]=_}else Number.isFinite(o)?(p=o+(e[h]||0),n[c]=null):p=t;return s&&p>=t&&(t=p+1),e[c]=p,p};return r}function ZR(t,{moduleParameters:e,target:n,viewport:r}){const i=n&&n.id!=="default-framebuffer",s=e&&e.devicePixelRatio||Oa(t),o=i?n.height:t.drawingBufferHeight,c=r;return[c.x*s,o-(c.y+c.height)*s,c.width*s,c.height*s]}function KR(t,e){const n=e?e.width:t.drawingBufferWidth,r=e?e.height:t.drawingBufferHeight;Ri(t,{viewport:[0,0,n,r]}),t.clear(16640)}class qR extends cm{constructor(e,n){super(e,n),L(this,"shadowMap",void 0),L(this,"depthBuffer",void 0),L(this,"fbo",void 0),this.shadowMap=new ur(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new oa(e,{format:33189,width:1,height:1}),this.fbo=new qt(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const n=this.fbo;jr(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const r=e.viewports[0],i=Oa(this.gl),s=r.width*i,o=r.height*i;(s!==n.width||o!==n.height)&&n.resize({width:s,height:o}),super.render({...e,target:n,pass:"shadow"})})}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const LE="#define SMOOTH_EDGE_RADIUS 0.5",JR=`
`.concat(LE,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),eO=`
`.concat(LE,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),tO={name:"geometry",vs:JR,fs:eO},nO=Object.keys(ft).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(ft[t],";")).join(""),rO=Object.keys(ni).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(ni[t],";")).join(""),iO=Object.keys(Ra).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(Ra[t],";")).join(""),sO="".concat(nO,`
`).concat(rO,`
`).concat(iO,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
  float y = clamp(lat, -89.9, 89.9);
  return 1.0 / cos(radians(y));
}

float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {
    
    if (geometry.position.w == 0.0) {
      return project_size_at_latitude(geometry.worldPosition.y);
    }
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}

float project_size_at_latitude(float meters, float lat) {
  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}
vec3 project_normal(vec3 vector) {
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size_at_latitude(position_world.z, position_world.y),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    position_world.xyz -= project_uCoordinateOrigin;
  }
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function oO(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function lu(t){let e={},n;return r=>{for(const i in r)if(!oO(r[i],e[i])){n=t(r),e=r;break}return n}}const ny=[0,0,0,0],aO=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],PE=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],AO=[0,0,0],kE=[0,0,0],lO=lu(fO);function IE(t,e,n=kE){n.length<3&&(n=[n[0],n[1],0]);let r=n,i,s=!0;switch(e===ft.LNGLAT_OFFSETS||e===ft.METER_OFFSETS?i=n:i=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case ni.WEB_MERCATOR:(e===ft.LNGLAT||e===ft.CARTESIAN)&&(i=[0,0,0],s=!1);break;case ni.WEB_MERCATOR_AUTO_OFFSET:e===ft.LNGLAT?r=i:e===ft.CARTESIAN&&(r=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],i=t.unprojectPosition(r),r[0]-=n[0],r[1]-=n[1],r[2]-=n[2]);break;case ni.IDENTITY:r=t.position.map(Math.fround),r[2]=r[2]||0;break;case ni.GLOBE:s=!1,i=null;break;default:s=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:r,offsetMode:s}}function uO(t,e,n){const{viewMatrixUncentered:r,projectionMatrix:i}=t;let{viewMatrix:s,viewProjectionMatrix:o}=t,c=ny,h=ny,p=t.cameraPosition;const{geospatialOrigin:_,shaderCoordinateOrigin:y,offsetMode:w}=IE(t,e,n);return w&&(h=t.projectPosition(_||y),p=[p[0]-h[0],p[1]-h[1],p[2]-h[2]],h[3]=1,c=au([],h,o),s=r||s,o=oi([],i,s),o=oi([],o,aO)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:c,originCommon:h,cameraPosCommon:p,shaderCoordinateOrigin:y,geospatialOrigin:_}}function cO({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:r=ft.DEFAULT,coordinateOrigin:i=kE,autoWrapLongitude:s=!1}){r===ft.DEFAULT&&(r=t.isGeospatial?ft.LNGLAT:ft.CARTESIAN);const o=lO({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:i});return o.project_uWrapLongitude=s,o.project_uModelMatrix=n||PE,o}function fO({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:r}){const{projectionCenter:i,viewProjectionMatrix:s,originCommon:o,cameraPosCommon:c,shaderCoordinateOrigin:h,geospatialOrigin:p}=uO(t,n,r),_=t.getDistanceScales(),y=[t.width*e,t.height*e],w=au([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,T={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:h,project_uCommonOrigin:o.slice(0,3),project_uCenter:i,project_uPseudoMeters:!!t._pseudoMeters,project_uViewportSize:y,project_uDevicePixelRatio:e,project_uFocalDistance:w,project_uCommonUnitsPerMeter:_.unitsPerMeter,project_uCommonUnitsPerWorldUnit:_.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:AO,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:PE,project_uCameraPosition:c};if(p){const S=t.getDistanceScales(p);switch(n){case ft.METER_OFFSETS:T.project_uCommonUnitsPerWorldUnit=S.unitsPerMeter,T.project_uCommonUnitsPerWorldUnit2=S.unitsPerMeter2;break;case ft.LNGLAT:case ft.LNGLAT_OFFSETS:t._pseudoMeters||(T.project_uCommonUnitsPerMeter=S.unitsPerMeter),T.project_uCommonUnitsPerWorldUnit=S.unitsPerDegree,T.project_uCommonUnitsPerWorldUnit2=S.unitsPerDegree2;break;case ft.CARTESIAN:T.project_uCommonUnitsPerWorldUnit=[1,1,S.unitsPerMeter[2]],T.project_uCommonUnitsPerWorldUnit2=[0,0,S.unitsPerMeter2[2]];break}}return T}const hO={};function dO(t=hO){return"viewport"in t?cO(t):{}}const fm={name:"project",dependencies:[vI,tO],vs:sO,getUniforms:dO};function Lc(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function va(t,e){const n=au([],e,t);return iR(n,n,1/n[3]),n}function ry(t,e){const n=t%e;return n<0?e+n:n}function yg(t,e,n){return t<e?e:t>n?n:t}function gO(t){return Math.log(t)*Math.LOG2E}const hm=Math.log2||gO;function Oi(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Nr=Math.PI,RE=Nr/4,Sr=Nr/180,_g=180/Nr,Ua=512,mf=4003e4,oc=85.051129,OE=1.5;function pO(t){return Math.pow(2,t)}function mO(t){return hm(t)}function us(t){const[e,n]=t;Oi(Number.isFinite(e)),Oi(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=e*Sr,i=n*Sr,s=Ua*(r+Nr)/(2*Nr),o=Ua*(Nr+Math.log(Math.tan(RE+i*.5)))/(2*Nr);return[s,o]}function Ci(t){const[e,n]=t,r=e/Ua*(2*Nr)-Nr,i=2*(Math.atan(Math.exp(n/Ua*(2*Nr)-Nr))-RE);return[r*_g,i*_g]}function vO(t){const{latitude:e}=t;Oi(Number.isFinite(e));const n=Math.cos(e*Sr);return mO(mf*n)-9}function kh(t){const e=Math.cos(t*Sr);return Ua/mf/e}function vf(t){const{latitude:e,longitude:n,highPrecision:r=!1}=t;Oi(Number.isFinite(e)&&Number.isFinite(n));const i=Ua,s=Math.cos(e*Sr),o=i/360,c=o/s,h=i/mf/s,p={unitsPerMeter:[h,h,h],metersPerUnit:[1/h,1/h,1/h],unitsPerDegree:[o,c,h],degreesPerUnit:[1/o,1/c,1/h]};if(r){const _=Sr*Math.tan(e*Sr)/s,y=o*_/2,w=i/mf*_,T=w/c*h;p.unitsPerDegree2=[0,y,w],p.unitsPerMeter2=[T,0,T]}return p}function DE(t,e){const[n,r,i]=t,[s,o,c]=e,{unitsPerMeter:h,unitsPerMeter2:p}=vf({longitude:n,latitude:r,highPrecision:!0}),_=us(t);_[0]+=s*(h[0]+p[0]*o),_[1]+=o*(h[1]+p[1]*o);const y=Ci(_),w=(i||0)+(c||0);return Number.isFinite(i)||Number.isFinite(c)?[y[0],y[1],w]:y}function FE(t){const{height:e,pitch:n,bearing:r,altitude:i,scale:s,center:o}=t,c=Lc();Ul(c,c,[0,0,-i]),TE(c,c,-n*Sr),xE(c,c,r*Sr);const h=s/e;return n0(c,c,[h,h,h]),o&&Ul(c,c,OI([],o)),c}function BE(t){const{width:e,height:n,altitude:r,pitch:i=0,offset:s,center:o,scale:c,nearZMultiplier:h=1,farZMultiplier:p=1}=t;let{fovy:_=za(OE)}=t;r!==void 0&&(_=za(r));const y=_*Sr,w=i*Sr,T=dm(_);let S=T;o&&(S+=o[2]*c/Math.cos(w)/n);const k=y*(.5+(s?s[1]:0)/n),U=Math.sin(k)*S/Math.sin(yg(Math.PI/2-w-k,.01,Math.PI-.01)),x=Math.sin(w)*U+S,C=S*10,P=Math.min(x*p,C);return{fov:y,aspect:e/n,focalDistance:T,near:h,far:P}}function yO(t){const{fov:e,aspect:n,near:r,far:i}=BE(t);return SE([],e,n,r,i)}function za(t){return 2*Math.atan(.5/t)*_g}function dm(t){return .5/Math.tan(.5*t*Sr)}function gm(t,e){const[n,r,i=0]=t;return Oi(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(i)),va(e,[n,r,i,1])}function zl(t,e,n=0){const[r,i,s]=t;if(Oi(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(s))return va(e,[r,i,s,1]);const o=va(e,[r,i,0,1]),c=va(e,[r,i,1,1]),h=o[2],p=c[2],_=h===p?0:((n||0)-h)/(p-h);return wE([],o,c,_)}function pm(t){const{width:e,height:n,bounds:r,minExtent:i=0,maxZoom:s=24,offset:o=[0,0]}=t,[[c,h],[p,_]]=r,y=_O(t.padding),w=us([c,yg(_,-oc,oc)]),T=us([p,yg(h,-oc,oc)]),S=[Math.max(Math.abs(T[0]-w[0]),i),Math.max(Math.abs(T[1]-w[1]),i)],k=[e-y.left-y.right-Math.abs(o[0])*2,n-y.top-y.bottom-Math.abs(o[1])*2];Oi(k[0]>0&&k[1]>0);const U=k[0]/S[0],x=k[1]/S[1],C=(y.right-y.left)/2/U,P=(y.top-y.bottom)/2/x,B=[(T[0]+w[0])/2+C,(T[1]+w[1])/2+P],z=Ci(B),H=Math.min(s,hm(Math.abs(Math.min(U,x))));return Oi(Number.isFinite(H)),{longitude:z[0],latitude:z[1],zoom:H}}function _O(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(Oi(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}const iy=Math.PI/180;function NE(t,e=0){const{width:n,height:r,unproject:i}=t,s={targetZ:e},o=i([0,r],s),c=i([n,r],s);let h,p;const _=t.fovy?.5*t.fovy*iy:Math.atan(.5/t.altitude),y=(90-t.pitch)*iy;return _>y-.01?(h=sy(t,0,e),p=sy(t,n,e)):(h=i([0,0],s),p=i([n,0],s)),[o,c,p,h]}function sy(t,e,n){const{pixelUnprojectionMatrix:r}=t,i=va(r,[e,0,1,1]),s=va(r,[e,t.height,1,1]),c=(n*t.distanceScales.unitsPerMeter[2]-i[2])/(s[2]-i[2]),h=wE([],i,s,c),p=Ci(h);return p.push(n),p}let wO=class wg{constructor(e={width:1,height:1}){L(this,"latitude",void 0),L(this,"longitude",void 0),L(this,"zoom",void 0),L(this,"pitch",void 0),L(this,"bearing",void 0),L(this,"altitude",void 0),L(this,"fovy",void 0),L(this,"meterOffset",void 0),L(this,"center",void 0),L(this,"width",void 0),L(this,"height",void 0),L(this,"scale",void 0),L(this,"distanceScales",void 0),L(this,"viewMatrix",void 0),L(this,"projectionMatrix",void 0),L(this,"viewProjectionMatrix",void 0),L(this,"pixelProjectionMatrix",void 0),L(this,"pixelUnprojectionMatrix",void 0),L(this,"equals",x=>x instanceof wg?x.width===this.width&&x.height===this.height&&Zv(x.projectionMatrix,this.projectionMatrix)&&Zv(x.viewMatrix,this.viewMatrix):!1),L(this,"project",(x,C={})=>{const{topLeft:P=!0}=C,B=this.projectPosition(x),z=gm(B,this.pixelProjectionMatrix),[H,X]=z,Q=P?X:this.height-X;return x.length===2?[H,Q]:[H,Q,z[2]]}),L(this,"unproject",(x,C={})=>{const{topLeft:P=!0,targetZ:B=void 0}=C,[z,H,X]=x,Q=P?H:this.height-H,te=B&&B*this.distanceScales.unitsPerMeter[2],ie=zl([z,Q,X],this.pixelUnprojectionMatrix,te),[ne,fe,ce]=this.unprojectPosition(ie);return Number.isFinite(X)?[ne,fe,ce]:Number.isFinite(B)?[ne,fe,B]:[ne,fe]}),L(this,"projectPosition",x=>{const[C,P]=us(x),B=(x[2]||0)*this.distanceScales.unitsPerMeter[2];return[C,P,B]}),L(this,"unprojectPosition",x=>{const[C,P]=Ci(x),B=(x[2]||0)*this.distanceScales.metersPerUnit[2];return[C,P,B]});let{width:n,height:r,altitude:i=null,fovy:s=null}=e;const{latitude:o=0,longitude:c=0,zoom:h=0,pitch:p=0,bearing:_=0,position:y=null,nearZMultiplier:w=.02,farZMultiplier:T=1.01}=e;n=n||1,r=r||1,s===null&&i===null?(i=OE,s=za(i)):s===null?s=za(i):i===null&&(i=dm(s));const S=pO(h);i=Math.max(.75,i);const k=vf({longitude:c,latitude:o}),U=us([c,o]);U.push(0),y&&kI(U,U,HI([],y,k.unitsPerMeter)),this.projectionMatrix=yO({width:n,height:r,scale:S,center:U,pitch:p,fovy:s,nearZMultiplier:w,farZMultiplier:T}),this.viewMatrix=FE({height:r,scale:S,center:U,pitch:p,bearing:_,altitude:i}),this.width=n,this.height=r,this.scale=S,this.latitude=o,this.longitude=c,this.zoom=h,this.pitch=p,this.bearing=_,this.altitude=i,this.fovy=s,this.center=U,this.meterOffset=y||[0,0,0],this.distanceScales=k,this._initMatrices(),Object.freeze(this)}_initMatrices(){const{width:e,height:n,projectionMatrix:r,viewMatrix:i}=this,s=Lc();oi(s,s,r),oi(s,s,i),this.viewProjectionMatrix=s;const o=Lc();n0(o,o,[e/2,-n/2,1]),Ul(o,o,[1,-1,0]),oi(o,o,s);const c=gf(Lc(),o);if(!c)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=o,this.pixelUnprojectionMatrix=c}projectFlat(e){return us(e)}unprojectFlat(e){return Ci(e)}getMapCenterByLngLatPosition({lngLat:e,pos:n}){const r=zl(n,this.pixelUnprojectionMatrix),i=us(e),s=df([],i,_E([],r)),o=df([],this.center,s);return Ci(o)}fitBounds(e,n={}){const{width:r,height:i}=this,{longitude:s,latitude:o,zoom:c}=pm(Object.assign({width:r,height:i,bounds:e},n));return new wg({width:r,height:i,longitude:s,latitude:o,zoom:c})}getBounds(e){const n=this.getBoundingRegion(e),r=Math.min(...n.map(c=>c[0])),i=Math.max(...n.map(c=>c[0])),s=Math.min(...n.map(c=>c[1])),o=Math.max(...n.map(c=>c[1]));return[[r,s],[i,o]]}getBoundingRegion(e={}){return NE(this,e.z||0)}getLocationAtPoint({lngLat:e,pos:n}){return this.getMapCenterByLngLatPosition({lngLat:e,pos:n})}};const oy=512;function bO(t){const{width:e,height:n,pitch:r=0}=t;let{longitude:i,latitude:s,zoom:o,bearing:c=0}=t;(i<-180||i>180)&&(i=ry(i+180,360)-180),(c<-180||c>180)&&(c=ry(c+180,360)-180);const h=hm(n/oy);if(o<=h)o=h,s=0;else{const p=n/2/Math.pow(2,o),_=Ci([0,p])[1];if(s<_)s=_;else{const y=Ci([0,oy-p])[1];s>y&&(s=y)}}return{width:e,height:n,longitude:i,latitude:s,zoom:o,pitch:r,bearing:c}}const EO=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,TO=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,xO=lu(PO),SO=lu(kO),CO=[0,0,0,1],MO=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function LO(t,e){const[n,r,i]=t,s=zl([n,r,i],e);return Number.isFinite(i)?s:[s[0],s[1],0]}function PO({viewport:t,center:e}){return new fi(t.viewProjectionMatrix).invert().transform(e)}function kO({viewport:t,shadowMatrices:e}){const n=[],r=t.pixelUnprojectionMatrix,i=t.isGeospatial?void 0:1,s=[[0,0,i],[t.width,0,i],[0,t.height,i],[t.width,t.height,i],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(o=>LO(o,r));for(const o of e){const c=o.clone().translate(new ci(t.center).negate()),h=s.map(_=>c.transform(_)),p=new fi().ortho({left:Math.min(...h.map(_=>_[0])),right:Math.max(...h.map(_=>_[0])),bottom:Math.min(...h.map(_=>_[1])),top:Math.max(...h.map(_=>_[1])),near:Math.min(...h.map(_=>-_[2])),far:Math.max(...h.map(_=>-_[2]))});n.push(p.multiplyRight(o))}return n}function IO(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const r={shadow_uDrawShadowMap:!!t.drawToShadowMap,shadow_uUseShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,shadow_uColor:t.shadowColor||CO,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},i=xO({viewport:t.viewport,center:e.project_uCenter}),s=[],o=SO({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let c=0;c<t.shadowMatrices.length;c++){const h=o[c],p=h.clone().translate(new ci(t.viewport.center).negate());e.project_uCoordinateSystem===ft.LNGLAT&&e.project_uProjectionMode===ni.WEB_MERCATOR?(o[c]=p,s[c]=i):(o[c]=h.clone().multiplyRight(MO),s[c]=p.transform(i))}for(let c=0;c<o.length;c++)r["shadow_uViewProjectionMatrices[".concat(c,"]")]=o[c],r["shadow_uProjectCenters[".concat(c,"]")]=s[c],t.shadowMaps&&t.shadowMaps.length>0?r["shadow_uShadowMap".concat(c)]=t.shadowMaps[c]:r["shadow_uShadowMap".concat(c)]=t.dummyShadowMap;return r}const Ih={name:"shadow",dependencies:[fm],vs:EO,fs:TO,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?IO(t,e):{}},RO={color:[255,255,255],intensity:1},ay=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],OO=[0,0,0,200/255];class UE{constructor(e={}){L(this,"id","lighting-effect"),L(this,"props",void 0),L(this,"shadowColor",OO),L(this,"shadow",void 0),L(this,"ambientLight",void 0),L(this,"directionalLights",void 0),L(this,"pointLights",void 0),L(this,"shadowPasses",[]),L(this,"shadowMaps",[]),L(this,"dummyShadowMap",null),L(this,"programManager",void 0),L(this,"shadowMatrices",void 0),this.setProps(e)}setProps(e){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const n in e){const r=e[n];switch(r.type){case"ambient":this.ambientLight=r;break;case"directional":this.directionalLights.push(r);break;case"point":this.pointLights.push(r);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow),this.props=e}preRender(e,{layers:n,layerFilter:r,viewports:i,onViewportActive:s,views:o}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(e),this.programManager||(this.programManager=Au.getDefaultProgramManager(e),Ih&&this.programManager.addDefaultModule(Ih)),this.dummyShadowMap||(this.dummyShadowMap=new ur(e,{width:1,height:1}));for(let c=0;c<this.shadowPasses.length;c++)this.shadowPasses[c].render({layers:n,layerFilter:r,viewports:i,onViewportActive:s,views:o,moduleParameters:{shadowLightId:c,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(r=>r.getProjectedLight({layer:e})),pointLights:this.pointLights.map(r=>r.getProjectedLight({layer:e}))},n}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(Ih),this.programManager=null)}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const r=new fi().lookAt({eye:new ci(n.direction).negate()});e.push(r)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const r=new qR(e);this.shadowPasses[n]=r,this.shadowMaps[n]=r.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:r}=this;!e&&n.length===0&&r.length===0&&(this.ambientLight=new HR(RO),this.directionalLights.push(new ty(ay[0]),new ty(ay[1])))}}class DO{constructor(e={}){L(this,"_pool",[]),L(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:r=1,type:i,padding:s=0,copy:o=!1,initialize:c=!1,maxCount:h}){const p=i||e&&e.constructor||Float32Array,_=n*r+s;if(ArrayBuffer.isView(e)){if(_<=e.length)return e;if(_*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new p(e.buffer,0,_)}let y=1/0;h&&(y=h*r+s);const w=this._allocate(p,_,c,y);return e&&o?w.set(e):c||w.fill(0,0,4),this._release(e),w}release(e){this._release(e)}_allocate(e,n,r,i){let s=Math.max(Math.ceil(n*this.opts.overAlloc),1);s>i&&(s=i);const o=this._pool,c=e.BYTES_PER_ELEMENT*s,h=o.findIndex(p=>p.byteLength>=c);if(h>=0){const p=new e(o.splice(h,1)[0],0,s);return r&&p.fill(0),p}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:r}=e,{byteLength:i}=r,s=n.findIndex(o=>o.byteLength>=i);s<0?n.push(r):(s>0||n.length<this.opts.poolSize)&&n.splice(s,0,r),n.length>this.opts.poolSize&&n.shift()}}const Vl=new DO;function JA(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function FO(t){return[t[12],t[13],t[14]]}function BO(t){return{left:jo(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:jo(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:jo(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:jo(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:jo(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:jo(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const Ay=new ci;function jo(t,e,n,r){Ay.set(t,e,n);const i=Ay.len();return{distance:r/i,normal:new ci(-t/i,-e/i,-n/i)}}function NO(t){return t-Math.fround(t)}let UA;function Rh(t,e){const{size:n=1,startIndex:r=0}=e,i=e.endIndex!==void 0?e.endIndex:t.length,s=(i-r)/n;UA=Vl.allocate(UA,s,{type:Float32Array,size:n*2});let o=r,c=0;for(;o<i;){for(let h=0;h<n;h++){const p=t[o++];UA[c+h]=p,UA[c+h+n]=NO(p)}c+=n*2}return UA.subarray(0,s*n*2)}function UO(t){let e=null,n=!1;for(const r of t)r&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],r[0][0]),e[0][1]=Math.min(e[0][1],r[0][1]),e[1][0]=Math.max(e[1][0],r[1][0]),e[1][1]=Math.max(e[1][1],r[1][1])):e=r);return e}const zO=Math.PI/180,VO=JA(),ly=[0,0,0],jO={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function GO({width:t,height:e,orthographic:n,fovyRadians:r,focalDistance:i,padding:s,near:o,far:c}){const h=t/e,p=n?new fi().orthographic({fovy:r,aspect:h,focalDistance:i,near:o,far:c}):new fi().perspective({fovy:r,aspect:h,near:o,far:c});if(s){const{left:_=0,right:y=0,top:w=0,bottom:T=0}=s,S=ls((_+t-y)/2,0,t)-t/2,k=ls((w+e-T)/2,0,e)-e/2;p[8]-=S*2/t,p[9]+=k*2/e}return p}class eA{constructor(e={}){L(this,"id",void 0),L(this,"x",void 0),L(this,"y",void 0),L(this,"width",void 0),L(this,"height",void 0),L(this,"padding",void 0),L(this,"isGeospatial",void 0),L(this,"zoom",void 0),L(this,"focalDistance",void 0),L(this,"position",void 0),L(this,"modelMatrix",void 0),L(this,"distanceScales",void 0),L(this,"scale",void 0),L(this,"center",void 0),L(this,"cameraPosition",void 0),L(this,"projectionMatrix",void 0),L(this,"viewMatrix",void 0),L(this,"viewMatrixUncentered",void 0),L(this,"viewMatrixInverse",void 0),L(this,"viewProjectionMatrix",void 0),L(this,"pixelProjectionMatrix",void 0),L(this,"pixelUnprojectionMatrix",void 0),L(this,"resolution",void 0),L(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||jO,this.focalDistance=e.focalDistance||1,this.position=e.position||ly,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:r}=e;this.isGeospatial=Number.isFinite(r)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?ni.WEB_MERCATOR:ni.WEB_MERCATOR_AUTO_OFFSET:ni.IDENTITY}equals(e){return e instanceof eA?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Nl(e.projectionMatrix,this.projectionMatrix)&&Nl(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:n=!0}={}){const r=this.projectPosition(e),i=gm(r,this.pixelProjectionMatrix),[s,o]=i,c=n?o:this.height-o;return e.length===2?[s,c]:[s,c,i[2]]}unproject(e,{topLeft:n=!0,targetZ:r}={}){const[i,s,o]=e,c=n?s:this.height-s,h=r&&r*this.distanceScales.unitsPerMeter[2],p=zl([i,c,o],this.pixelUnprojectionMatrix,h),[_,y,w]=this.unprojectPosition(p);return Number.isFinite(o)?[_,y,w]:Number.isFinite(r)?[_,y,r]:[_,y]}projectPosition(e){const[n,r]=this.projectFlat(e),i=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[n,r,i]}unprojectPosition(e){const[n,r]=this.unprojectFlat(e),i=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[n,r,i]}projectFlat(e){if(this.isGeospatial){const n=us(e);return n[1]=ls(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?Ci(e):e}getBounds(e={}){const n={targetZ:e.z||0},r=this.unproject([0,0],n),i=this.unproject([this.width,0],n),s=this.unproject([0,this.height],n),o=this.unproject([this.width,this.height],n);return[Math.min(r[0],i[0],s[0],o[0]),Math.min(r[1],i[1],s[1],o[1]),Math.max(r[0],i[0],s[0],o[0]),Math.max(r[1],i[1],s[1],o[1])]}getDistanceScales(e){return e?vf({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:r=1,height:i=1}){return e<this.x+this.width&&this.x<e+r&&n<this.y+this.height&&this.y<n+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,BO(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,r=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=vO({latitude:r})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||vf({latitude:r,longitude:n}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:s,modelMatrix:o}=e;let c=ly;if(s&&(c=o?new fi(o).transformAsVector(s,[]):s),this.isGeospatial){const h=this.projectPosition([n,r,0]);this.center=new ci(c).scale(this.distanceScales.unitsPerMeter).add(h)}else this.center=this.projectPosition(c)}_initMatrices(e){const{viewMatrix:n=VO,projectionMatrix:r=null,orthographic:i=!1,fovyRadians:s,fovy:o=75,near:c=.1,far:h=1e3,padding:p=null,focalDistance:_=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=new fi().multiplyRight(n).translate(new ci(this.center).negate()),this.projectionMatrix=r||GO({width:this.width,height:this.height,orthographic:i,fovyRadians:s||o*zO,focalDistance:_,padding:p,near:c,far:h});const y=JA();oi(y,y,this.projectionMatrix),oi(y,y,this.viewMatrix),this.viewProjectionMatrix=y,this.viewMatrixInverse=gf([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=FO(this.viewMatrixInverse);const w=JA(),T=JA();n0(w,w,[this.width/2,-this.height/2,1]),Ul(w,w,[1,-1,0]),oi(T,w,this.viewProjectionMatrix),this.pixelProjectionMatrix=T,this.pixelUnprojectionMatrix=gf(JA(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||at.warn("Pixel project matrix not invertible")()}}L(eA,"displayName","Viewport");class Va extends eA{constructor(e={}){const{latitude:n=0,longitude:r=0,zoom:i=0,pitch:s=0,bearing:o=0,nearZMultiplier:c=.1,farZMultiplier:h=1.01,nearZ:p,farZ:_,orthographic:y=!1,projectionMatrix:w,repeat:T=!1,worldOffset:S=0,position:k,padding:U,legacyMeterSizes:x=!1}=e;let{width:C,height:P,altitude:B=1.5}=e;const z=Math.pow(2,i);C=C||1,P=P||1;let H,X=null;if(w)B=w[5]/2,H=za(B);else{e.fovy?(H=e.fovy,B=dm(H)):H=za(B);let te;if(U){const{top:ie=0,bottom:ne=0}=U;te=[0,ls((ie+P-ne)/2,0,P)-P/2]}X=BE({width:C,height:P,scale:z,center:k&&[0,0,k[2]*kh(n)],offset:te,pitch:s,fovy:H,nearZMultiplier:c,farZMultiplier:h}),Number.isFinite(p)&&(X.near=p),Number.isFinite(_)&&(X.far=_)}let Q=FE({height:P,pitch:s,bearing:o,scale:z,altitude:B});S&&(Q=new fi().translate([512*S,0,0]).multiplyLeft(Q)),super({...e,width:C,height:P,viewMatrix:Q,longitude:r,latitude:n,zoom:i,...X,fovy:H,focalDistance:B}),L(this,"longitude",void 0),L(this,"latitude",void 0),L(this,"pitch",void 0),L(this,"bearing",void 0),L(this,"altitude",void 0),L(this,"fovy",void 0),L(this,"orthographic",void 0),L(this,"_subViewports",void 0),L(this,"_pseudoMeters",void 0),this.latitude=n,this.longitude=r,this.zoom=i,this.pitch=s,this.bearing=o,this.altitude=B,this.fovy=H,this.orthographic=y,this._subViewports=T?[]:null,this._pseudoMeters=x,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),r=Math.ceil((e[2]-180)/360);for(let i=n;i<=r;i++){const s=i?new Va({...this,worldOffset:i}):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,r]=this.projectFlat(e),i=(e[2]||0)*kh(e[1]);return[n,r,i]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,r]=this.unprojectFlat(e),i=(e[2]||0)/kh(r);return[n,r,i]}addMetersToLngLat(e,n){return DE(e,n)}panByPosition(e,n){const r=zl(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),s=df([],i,_E([],r)),o=df([],this.center,s),[c,h]=this.unprojectFlat(o);return{longitude:c,latitude:h}}getBounds(e={}){const n=NE(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:r,height:i}=this,{longitude:s,latitude:o,zoom:c}=pm({width:r,height:i,bounds:e,...n});return new Va({width:r,height:i,longitude:s,latitude:o,zoom:c})}}L(Va,"displayName","WebMercatorViewport");const uy=[0,0,0];function Oh(t,e,n=!1){const r=e.projectPosition(t);if(n&&e instanceof Va){const[i,s,o=0]=t,c=e.getDistanceScales([i,s]);r[2]=o*c.unitsPerMeter[2]}return r}function HO(t){const{viewport:e,modelMatrix:n,coordinateOrigin:r}=t;let{coordinateSystem:i,fromCoordinateSystem:s,fromCoordinateOrigin:o}=t;return i===ft.DEFAULT&&(i=e.isGeospatial?ft.LNGLAT:ft.CARTESIAN),s===void 0&&(s=i),o===void 0&&(o=r),{viewport:e,coordinateSystem:i,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:s,fromCoordinateOrigin:o}}function zE(t,{viewport:e,modelMatrix:n,coordinateSystem:r,coordinateOrigin:i,offsetMode:s}){let[o,c,h=0]=t;switch(n&&([o,c,h]=au([],[o,c,h,1],n)),r){case ft.LNGLAT:return Oh([o,c,h],e,s);case ft.LNGLAT_OFFSETS:return Oh([o+i[0],c+i[1],h+(i[2]||0)],e,s);case ft.METER_OFFSETS:return Oh(DE(i,[o,c,h]),e,s);case ft.CARTESIAN:default:return e.isGeospatial?[o+i[0],c+i[1],h+i[2]]:e.projectPosition([o,c,h])}}function WO(t,e){const{viewport:n,coordinateSystem:r,coordinateOrigin:i,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:c}=HO(e),{autoOffset:h=!0}=e,{geospatialOrigin:p=uy,shaderCoordinateOrigin:_=uy,offsetMode:y=!1}=h?IE(n,r,i):{},w=zE(t,{viewport:n,modelMatrix:s,coordinateSystem:o,coordinateOrigin:c,offsetMode:y});if(y){const T=n.projectPosition(p||_);GI(w,w,T)}return w}const cy={blendFunc:[1,0,32771,0],blendEquation:32774};class VE extends cm{constructor(...e){super(...e),L(this,"pickZ",void 0),L(this,"_colorEncoderState",null)}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:s,pickingFBO:o,deviceRect:{x:c,y:h,width:p,height:_},cullRect:y,effects:w,pass:T="picking",pickZ:S,moduleParameters:k}){const U=this.gl;this.pickZ=S;const x=this._resetColorEncoder(S),C=jr(U,{scissorTest:!0,scissor:[c,h,p,_],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...cy,blend:!S},()=>super.render({target:o,layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:s,cullRect:y,effects:w==null?void 0:w.filter(B=>B.useInPicking),pass:T,isPicking:!0,moduleParameters:k}));return this._colorEncoderState=null,{decodePickingColor:x&&YO.bind(null,x),stats:C}}shouldDrawLayer(e){const{pickable:n,operation:r}=e.props;return n&&r.includes("draw")||r.includes("terrain")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,r){const i={...e.props.parameters},{pickable:s,operation:o}=e.props;return this._colorEncoderState?s&&o.includes("draw")&&(Object.assign(i,cy),i.blend=!0,i.blendColor=QO(this._colorEncoderState,e,r)):i.blend=!1,o.includes("terrain")&&(i.blend=!1),i}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function QO(t,e,n){const{byLayer:r,byAlpha:i}=t;let s,o=r.get(e);return o?(o.viewports.push(n),s=o.a):(s=r.size+1,s<=255?(o={a:s,layer:e,viewports:[n]},r.set(e,o),i[s]=o):(at.warn("Too many pickable layers, only picking the first 255")(),s=0)),[0,0,0,s/255]}function YO(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}const Qo={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},yf=Symbol.for("component"),ws=Symbol.for("propTypes"),Dh=Symbol.for("deprecatedProps"),ya=Symbol.for("asyncPropDefaults"),so=Symbol.for("asyncPropOriginal"),cs=Symbol.for("asyncPropResolved");function mm(t,e=()=>!0){return Array.isArray(t)?jE(t,e,[]):e(t)?[t]:[]}function jE(t,e,n){let r=-1;for(;++r<t.length;){const i=t[r];Array.isArray(i)?jE(i,e,n):e(i)&&n.push(i)}return n}function $O({target:t,source:e,start:n=0,count:r=1}){const i=e.length,s=r*i;let o=0;for(let c=n;o<i;o++)t[c++]=e[o];for(;o<s;)o<s-o?(t.copyWithin(n+o,n,n+o),o*=2):(t.copyWithin(n+o,n,n+s-o),o=s);return t}class XO{constructor(e,n,r){L(this,"id",void 0),L(this,"context",void 0),L(this,"isLoaded",void 0),L(this,"persistent",void 0),L(this,"_loadCount",0),L(this,"_subscribers",new Set),L(this,"_data",void 0),L(this,"_loader",void 0),L(this,"_error",void 0),L(this,"_content",void 0),this.id=e,this.context=r,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const r=++this._loadCount;let i=e;typeof e=="string"&&(i=Af(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=void 0,this._content=s)}).catch(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class ZO{constructor({gl:e,protocol:n}){L(this,"protocol",void 0),L(this,"_context",void 0),L(this,"_resources",void 0),L(this,"_consumers",void 0),L(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:n,forceUpdate:r=!1,persistent:i=!0}){let s=this._resources[e];s?s.setData(n,r):(s=new XO(e,n,this._context),this._resources[e]=s),s.persistent=i}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const r in n){const i=n[r],s=this._resources[i.resourceId];s&&s.unsubscribe(i)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:r,requestId:i="default"}){const{_resources:s,protocol:o}=this;e.startsWith(o)&&(e=e.replace(o,""),s[e]||this.add({resourceId:e,data:null,persistent:!1}));const c=s[e];if(this._track(r,i,c,n),c)return c.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,r,i){const s=this._consumers,o=s[e]=s[e]||{},c=o[n]||{},h=c.resourceId&&this._resources[c.resourceId];h&&(h.unsubscribe(c),this.prune()),r&&(o[n]=c,c.onChange=i,c.resourceId=r.id,r.subscribe(c))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const KO=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,tA={name:"project32",dependencies:[fm],vs:KO},nA={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:#decl":`
uniform bool picking_uAttribute;
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...pR},qO=[fm],JO=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function e7(t){const e=Au.getDefaultProgramManager(t);for(const n of qO)e.addDefaultModule(n);for(const n of JO)e.addShaderHook(n);return e}const t7="layerManager.setLayers",n7="layerManager.activateViewport";class r7{constructor(e,{deck:n,stats:r,viewport:i,timeline:s}={}){L(this,"layers",void 0),L(this,"context",void 0),L(this,"resourceManager",void 0),L(this,"_lastRenderedLayers",[]),L(this,"_needsRedraw",!1),L(this,"_needsUpdate",!1),L(this,"_nextLayers",null),L(this,"_debug",!1),L(this,"activateViewport",o=>{xn(n7,this,o),o&&(this.context.viewport=o)}),this.layers=[],this.resourceManager=new ZO({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:n,programManager:e&&e7(e),stats:r||new im({id:"deck.gl"}),viewport:i||new eA({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new CE,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const r of this.layers){const i=r.getNeedsRedraw(e);n=n||i}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(r=>n.id.indexOf(r)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){xn(t7,this,n,e),this._lastRenderedLayers=e;const r=mm(e,Boolean);for(const i of r)i.context=this.context;this._updateLayers(this.layers,r)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,n,r){r.raiseError(n,"".concat(e," of ").concat(r))}_updateLayers(e,n){const r={};for(const o of e)r[o.id]?at.warn("Multiple old layers with same id ".concat(o.id))():r[o.id]=o;const i=[];this._updateSublayersRecursively(n,r,i),this._finalizeOldLayers(r);let s=!1;for(const o of i)if(o.hasUniformTransition()){s="Uniform transition in ".concat(o);break}this._needsUpdate=s,this.layers=i}_updateSublayersRecursively(e,n,r){for(const i of e){i.context=this.context;const s=n[i.id];s===null&&at.warn("Multiple new layers with same id ".concat(i.id))(),n[i.id]=null;let o=null;try{this._debug&&s!==i&&i.validateProps(),s?(this._transferLayerState(s,i),this._updateLayer(i)):this._initializeLayer(i),r.push(i),o=i.isComposite?i.getSubLayers():null}catch(c){this._handleError("matching",c,i)}o&&this._updateSublayersRecursively(o,n,r)}}_finalizeOldLayers(e){for(const n in e){const r=e[n];r&&this._finalizeLayer(r)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=Qo.INITIALIZED}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle=Qo.MATCHED,n!==e&&(e.lifecycle=Qo.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=Qo.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=Qo.FINALIZED}catch(n){this._handleError("finalization",n,e)}}}function ri(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!ri(t[r],e[r],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const s of r)if(!e.hasOwnProperty(s)||!ri(t[s],e[s],n-1))return!1;return!0}return!1}class i7{constructor(e){L(this,"width",void 0),L(this,"height",void 0),L(this,"views",void 0),L(this,"viewState",void 0),L(this,"controllers",void 0),L(this,"timeline",void 0),L(this,"_viewports",void 0),L(this,"_viewportMap",void 0),L(this,"_isUpdating",void 0),L(this,"_needsRedraw",void 0),L(this,"_needsUpdate",void 0),L(this,"_eventManager",void 0),L(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n=typeof e=="string"?this.getView(e):e,r=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(r):r}getViewport(e){return this._viewportMap[e]}unproject(e,n){const r=this.getViewports(),i={x:e[0],y:e[1]};for(let s=r.length-1;s>=0;--s){const o=r[s];if(o.containsPixel(i)){const c=e.slice();return c[0]-=o.x,c[1]-=o.y,o.unproject(c,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=mm(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!ri(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):at.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...n,viewId:e})}_createController(e,n){const r=n.type;return new r({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>{var o;return(o=this.getView(e.id))===null||o===void 0?void 0:o.makeViewport({viewState:s,width:this.width,height:this.height})}})}_updateController(e,n,r,i){const s=e.controller;if(s&&r){const o={...n,...s,id:e.id,x:r.x,y:r.y,width:r.width,height:r.height};return(!i||i.constructor!==s.type)&&(i=this._createController(e,o)),i&&i.setProps(o),i}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let r=!1;for(let i=e.length;i--;){const s=e[i],o=this.getViewState(s),c=s.makeViewport({viewState:o,width:this.width,height:this.height});let h=n[s.id];const p=!!s.controller;p&&!h&&(r=!0),(r||!p)&&h&&(h.finalize(),h=null),this.controllers[s.id]=this._updateController(s,o,c,h),c&&this._viewports.unshift(c)}for(const i in n){const s=n[i];s&&!this.controllers[i]&&s.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length?!0:e.some((r,i)=>!e[i].equals(n[i]))}}const s7=/([0-9]+\.?[0-9]*)(%|px)/;function qi(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=s7.exec(t);if(e&&e.length>=3){const n=e[2]==="%",r=parseFloat(e[1]);return{position:n?r/100:r,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function Ji(t,e){return t.relative?Math.round(t.position*e):t.position}function cn(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class ja{constructor(e){L(this,"id",void 0),L(this,"viewportInstance",void 0),L(this,"_x",void 0),L(this,"_y",void 0),L(this,"_width",void 0),L(this,"_height",void 0),L(this,"_padding",void 0),L(this,"props",void 0);const{id:n,x:r=0,y:i=0,width:s="100%",height:o="100%",padding:c=null,viewportInstance:h}=e||{};cn(!h||h instanceof eA),this.viewportInstance=h,this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=qi(r),this._y=qi(i),this._width=qi(s),this._height=qi(o),this._padding=c&&{left:qi(c.left||0),right:qi(c.right||0),top:qi(c.top||0),bottom:qi(c.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.viewportInstance?e.viewportInstance?this.viewportInstance.equals(e.viewportInstance):!1:this.ViewportType===e.ViewportType&&ri(this.props,e.props,2)}makeViewport({width:e,height:n,viewState:r}){if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);const i=this.getDimensions({width:e,height:n});return!i.height||!i.width?null:new this.ViewportType({...r,...this.props,...i})}getViewStateId(){const{viewState:e}=this.props;return typeof e=="string"?e:(e==null?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const r in this.props.viewState)r!=="id"&&(n[r]=this.props.viewState[r]);return n}return e}getDimensions({width:e,height:n}){const r={x:Ji(this._x,e),y:Ji(this._y,n),width:Ji(this._width,e),height:Ji(this._height,n)};return this._padding&&(r.padding={left:Ji(this._padding.left,e),top:Ji(this._padding.top,n),right:Ji(this._padding.right,e),bottom:Ji(this._padding.bottom,n)}),r}get controller(){const e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:{type:this.ControllerType,...e}:null}}class uu{constructor(e){L(this,"_inProgress",void 0),L(this,"_handle",void 0),L(this,"_timeline",void 0),L(this,"time",void 0),L(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var n,r;this.cancel(),this.settings=e,this._inProgress=!0,(n=(r=this.settings).onStart)===null||n===void 0||n.call(r,this)}end(){if(this._inProgress){var e,n;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(e=(n=this.settings).onEnd)===null||e===void 0||e.call(n,this)}}cancel(){if(this._inProgress){var e,n;(e=(n=this.settings).onInterrupt)===null||e===void 0||e.call(n,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var e,n;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:r,settings:i}=this;this._handle=r.addChannel({delay:r.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(e=(n=this.settings).onUpdate)===null||e===void 0||e.call(n,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const fy=()=>{},bg={BREAK:1,SNAP_TO_END:2,IGNORE:3},o7=t=>t,a7=bg.BREAK;class A7{constructor(e){L(this,"getControllerState",void 0),L(this,"props",void 0),L(this,"propsInTransition",void 0),L(this,"transition",void 0),L(this,"onViewStateChange",void 0),L(this,"onStateChange",void 0),L(this,"_onTransitionUpdate",n=>{const{time:r,settings:{interpolator:i,startProps:s,endProps:o,duration:c,easing:h}}=n,p=h(r/c),_=i.interpolateProps(s,o,p);this.propsInTransition=this.getControllerState({...this.props,..._}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new uu(e.timeline),this.onViewStateChange=e.onViewStateChange||fy,this.onStateChange=e.onStateChange||fy}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const r=this.props;if(this.props=e,!r||this._shouldIgnoreViewportChange(r,e))return!1;if(this._isTransitionEnabled(e)){let i=r;if(this.transition.inProgress){const{interruption:s,endProps:o}=this.transition.settings;i={...r,...s===bg.SNAP_TO_END?o:this.propsInTransition||r}}this._triggerTransition(i,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:r}=e;return(n>0||n==="auto")&&!!r}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?this.transition.settings.interruption===bg.IGNORE||this._isUpdateDueToCurrentTransition(n):this._isTransitionEnabled(n)?n.transitionInterpolator.arePropsEqual(e,n):!0}_triggerTransition(e,n){const r=this.getControllerState(e),i=this.getControllerState(n).shortestPathFrom(r),s=n.transitionInterpolator,o=s.getDuration?s.getDuration(e,n):n.transitionDuration;if(o===0)return;const c=s.initializeProps(e,i);this.propsInTransition={};const h={duration:o,easing:n.transitionEasing||o7,interpolator:s,interruption:n.transitionInterruption||a7,startProps:c.start,endProps:c.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(h),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e==null||e(n)}}}class l7{constructor(e){L(this,"_propsToCompare",void 0),L(this,"_propsToExtract",void 0),L(this,"_requiredProps",void 0);const{compare:n,extract:r,required:i}=e;this._propsToCompare=n,this._propsToExtract=r||n,this._requiredProps=i}arePropsEqual(e,n){for(const r of this._propsToCompare)if(!(r in e)||!(r in n)||!Nl(e[r],n[r]))return!1;return!0}initializeProps(e,n){const r={},i={};for(const s of this._propsToExtract)(s in e||s in n)&&(r[s]=e[s],i[s]=n[s]);return this._checkRequiredProps(r),this._checkRequiredProps(i),{start:r,end:i}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{const r=e[n];cn(Number.isFinite(r)||Array.isArray(r),"".concat(n," is required for transition"))})}}const u7=["longitude","latitude","zoom","bearing","pitch"],c7=["longitude","latitude","zoom"];class GE extends l7{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,r=Array.isArray(e)?{}:e;r.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:u7,required:c7},super(r.transitionProps),L(this,"opts",void 0),this.opts=r}initializeProps(e,n){const r=super.initializeProps(e,n),{makeViewport:i,around:s}=this.opts;if(i&&s){const o=i(e),c=i(n),h=o.unproject(s);r.start.around=s,Object.assign(r.end,{around:c.project(h),aroundPosition:h,width:n.width,height:n.height})}return r}interpolateProps(e,n,r){const i={};for(const s of this._propsToExtract)i[s]=hf(e[s]||0,n[s]||0,r);if(n.aroundPosition&&this.opts.makeViewport){const s=this.opts.makeViewport({...n,...i});Object.assign(i,s.panByPosition(n.aroundPosition,hf(e.around,n.around,r)))}return i}}const es={transitionDuration:0},f7=300,ac=t=>1-(1-t)*(1-t),Go={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},Ns={};let h7=class{constructor(e){L(this,"props",void 0),L(this,"state",{}),L(this,"transitionManager",void 0),L(this,"eventManager",void 0),L(this,"onViewStateChange",void 0),L(this,"onStateChange",void 0),L(this,"makeViewport",void 0),L(this,"_controllerState",void 0),L(this,"_events",{}),L(this,"_interactionState",{isDragging:!1}),L(this,"_customEvents",[]),L(this,"_eventStartBlocked",null),L(this,"_panMove",!1),L(this,"invertPan",!1),L(this,"dragMode","rotate"),L(this,"inertia",0),L(this,"scrollZoom",!0),L(this,"dragPan",!0),L(this,"dragRotate",!0),L(this,"doubleClickZoom",!0),L(this,"touchZoom",!0),L(this,"touchRotate",!1),L(this,"keyboard",!0),this.transitionManager=new A7({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const n in this._events)if(this._events[n]){var e;(e=this.eventManager)===null||e===void 0||e.off(n,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return n?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return n?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return n?!1:this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:r}=this.props,{offsetCenter:i}=e;return[i.x-n,i.y-r]}isPointInBounds(e,n){const{width:r,height:i}=this.props;if(n&&n.handled)return!1;const s=e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=i;return s&&n&&n.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:n===!0?f7:0;const{scrollZoom:r=!0,dragPan:i=!0,dragRotate:s=!0,doubleClickZoom:o=!0,touchZoom:c=!0,touchRotate:h=!1,keyboard:p=!0}=e,_=!!this.onViewStateChange;this.toggleEvents(Go.WHEEL,_&&r),this.toggleEvents(Go.PAN,_),this.toggleEvents(Go.PINCH,_&&(c||h)),this.toggleEvents(Go.TRIPLE_PAN,_&&h),this.toggleEvents(Go.DOUBLE_TAP,_&&o),this.toggleEvents(Go.KEYBOARD,_&&p),this.scrollZoom=r,this.dragPan=i,this.dragRotate=s,this.doubleClickZoom=o,this.touchZoom=c,this.touchRotate=h,this.keyboard=p}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(r=>{this._events[r]!==n&&(this._events[r]=n,n?this.eventManager.on(r,this.handleEvent):this.eventManager.off(r,this.handleEvent))})}updateViewport(e,n=null,r={}){const i={...e.getViewportProps(),...n},s=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(r),s){const o=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:o})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let r=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(r=!r);const i=this.controllerState[r?"panStart":"rotateStart"]({pos:n});return this._panMove=r,this.updateViewport(i,es,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),r=this.controllerState.pan({pos:n});return this.updateViewport(r,es,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],s=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:ac},{isDragging:!1,isPanning:!0})}else{const r=this.controllerState.panEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),r=this.controllerState.rotate({pos:n});return this.updateViewport(r,es,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],s=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:ac},{isDragging:!1,isRotating:!0})}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.srcEvent.preventDefault();const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const{speed:r=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:s}=e;let o=2/(1+Math.exp(-Math.abs(s*r)));s<0&&o!==0&&(o=1/o);const c=this.controllerState.zoom({pos:n,scale:o});return this.updateViewport(c,{...this._getTransitionProps({around:n}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.rotateStart({pos:n});return this.updateViewport(r,es,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const r=this.controllerState.rotate({pos:n});return this.updateViewport(r,es,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const r=this.getCenter(e),i=[r[0],r[1]+=e.velocityY*n/2],s=this.controllerState.rotate({pos:i});this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:ac},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return Ns._startPinchRotation=e.rotation,Ns._lastPinchEvent=e,this.updateViewport(r,es,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:r}=e,i=this.getCenter(e);n=n.zoom({pos:i,scale:r})}if(this.touchRotate){const{rotation:r}=e;n=n.rotate({deltaAngleX:Ns._startPinchRotation-r})}return this.updateViewport(n,es,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Ns._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:r}=Ns;if(this.touchZoom&&n&&r&&e.scale!==r.scale){const i=this.getCenter(e);let s=this.controllerState.rotateEnd();const o=Math.log2(e.scale),c=(o-Math.log2(r.scale))/(e.deltaTime-r.deltaTime),h=Math.pow(2,o+c*n/2);s=s.zoom({pos:i,scale:h}).zoomEnd(),this.updateViewport(s,{...this._getTransitionProps({around:i}),transitionDuration:n,transitionEasing:ac},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Ns._startPinchRotation=null,Ns._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.isFunctionKeyPressed(e),i=this.controllerState.zoom({pos:n,scale:r?.5:2});return this.updateViewport(i,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:r,moveSpeed:i,rotateSpeedX:s,rotateSpeedY:o}=this.keyboard===!0?{}:this.keyboard,{controllerState:c}=this;let h;const p={};switch(e.srcEvent.code){case"Minus":h=n?c.zoomOut(r).zoomOut(r):c.zoomOut(r),p.isZooming=!0;break;case"Equal":h=n?c.zoomIn(r).zoomIn(r):c.zoomIn(r),p.isZooming=!0;break;case"ArrowLeft":n?(h=c.rotateLeft(s),p.isRotating=!0):(h=c.moveLeft(i),p.isPanning=!0);break;case"ArrowRight":n?(h=c.rotateRight(s),p.isRotating=!0):(h=c.moveRight(i),p.isPanning=!0);break;case"ArrowUp":n?(h=c.rotateUp(o),p.isRotating=!0):(h=c.moveUp(i),p.isPanning=!0);break;case"ArrowDown":n?(h=c.rotateDown(o),p.isRotating=!0):(h=c.moveDown(i),p.isPanning=!0);break;default:return!1}return this.updateViewport(h,this._getTransitionProps(),p),!0}_getTransitionProps(e){const{transition:n}=this;return!n||!n.transitionInterpolator?es:e?{...n,transitionInterpolator:new GE({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n}};class d7{constructor(e,n){L(this,"_viewportProps",void 0),L(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}const hy=5,g7=1.2;class p7 extends d7{constructor(e){const{width:n,height:r,latitude:i,longitude:s,zoom:o,bearing:c=0,pitch:h=0,altitude:p=1.5,position:_=[0,0,0],maxZoom:y=20,minZoom:w=0,maxPitch:T=60,minPitch:S=0,startPanLngLat:k,startZoomLngLat:U,startRotatePos:x,startBearing:C,startPitch:P,startZoom:B,normalize:z=!0}=e;cn(Number.isFinite(s)),cn(Number.isFinite(i)),cn(Number.isFinite(o)),super({width:n,height:r,latitude:i,longitude:s,zoom:o,bearing:c,pitch:h,altitude:p,maxZoom:y,minZoom:w,maxPitch:T,minPitch:S,normalize:z,position:_},{startPanLngLat:k,startZoomLngLat:U,startRotatePos:x,startBearing:C,startPitch:P,startZoom:B}),L(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const r=this.getState().startPanLngLat||this._unproject(n);if(!r)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:i,startBearing:s,startPitch:o}=this.getState();if(!i||s===void 0||o===void 0)return this;let c;return e?c=this._getNewRotation(e,i,o,s):c={bearing:s+n,pitch:o+r},this._getUpdatedState(c)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:r}){let{startZoom:i,startZoomLngLat:s}=this.getState();if(s||(i=this.getViewportProps().zoom,s=this._unproject(n)||this._unproject(e)),!s)return this;const{maxZoom:o,minZoom:c}=this.getViewportProps();let h=i+Math.log2(r);h=ls(h,c,o);const p=this.makeViewport({...this.getViewportProps(),zoom:h});return this._getUpdatedState({zoom:h,...p.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this.getViewportProps()},{bearing:i,longitude:s}=r;return Math.abs(i-n.bearing)>180&&(r.bearing=i<0?i+360:i-360),Math.abs(s-n.longitude)>180&&(r.longitude=s<0?s+360:s-360),r}applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i}=e;e.zoom=ls(i,r,n);const{maxPitch:s,minPitch:o,pitch:c}=e;e.pitch=ls(c,o,s);const{normalize:h=!0}=e;return h&&Object.assign(e,bO(e)),e}_zoomFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.zoom({pos:[n/2,r/2],scale:e})}_panFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.pan({startPos:[n/2,r/2],pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,r,i){const s=e[0]-n[0],o=e[1]-n[1],c=e[1],h=n[1],{width:p,height:_}=this.getViewportProps(),y=s/p;let w=0;o>0?Math.abs(_-h)>hy&&(w=o/(h-_)*g7):o<0&&h>hy&&(w=1-c/h),w=ls(w,-1,1);const{minPitch:T,maxPitch:S}=this.getViewportProps(),k=i+180*y;let U=r;return w>0?U=r+w*(S-r):w<0&&(U=r-w*(T-r)),{pitch:U,bearing:k}}}class m7 extends h7{constructor(...e){super(...e),L(this,"ControllerState",p7),L(this,"transition",{transitionDuration:300,transitionInterpolator:new GE({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),L(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class HE extends ja{get ViewportType(){return Va}get ControllerType(){return m7}}L(HE,"displayName","MapView");const v7=new UE;function y7(t,e){var n,r;const i=(n=t.order)!==null&&n!==void 0?n:1/0,s=(r=e.order)!==null&&r!==void 0?r:1/0;return i-s}class _7{constructor(){L(this,"effects",void 0),L(this,"_resolvedEffects",[]),L(this,"_defaultEffects",[]),L(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const n=this._defaultEffects;if(!n.find(r=>r.id===e.id)){const r=n.findIndex(i=>y7(i,e)>0);r<0?n.push(e):n.splice(r,0,e),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(ri(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._resolvedEffects}_setEffects(e){const n={};for(const i of this.effects)n[i.id]=i;const r=[];for(const i of e){const s=n[i.id];s&&s!==i?s.setProps?(s.setProps(i.props),r.push(s)):(s.cleanup(),r.push(i)):r.push(i),delete n[i.id]}for(const i in n)n[i].cleanup();this.effects=r,this._resolvedEffects=r.concat(this._defaultEffects),e.some(i=>i instanceof UE)||this._resolvedEffects.push(v7),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class w7 extends cm{shouldDrawLayer(e){const{operation:n}=e.props;return n.includes("draw")||n.includes("terrain")}}const b7="deckRenderer.renderLayers";class E7{constructor(e){L(this,"gl",void 0),L(this,"layerFilter",void 0),L(this,"drawPickingColors",void 0),L(this,"drawLayersPass",void 0),L(this,"pickLayersPass",void 0),L(this,"renderCount",void 0),L(this,"_needsRedraw",void 0),L(this,"renderBuffers",void 0),L(this,"lastPostProcessEffect",void 0),this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new w7(e),this.pickLayersPass=new VE(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){if(!e.viewports.length)return;const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,r={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e,target:e.target||qt.getDefaultFramebuffer(this.gl)};r.effects&&this._preRender(r.effects,r);const i=this.lastPostProcessEffect?this.renderBuffers[0]:r.target,s=n.render({...r,target:i});r.effects&&this._postRender(r.effects,r),this.renderCount++,xn(b7,this,s,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){this.lastPostProcessEffect=null,n.preRenderStats=n.preRenderStats||{};for(const r of e)n.preRenderStats[r.id]=r.preRender(this.gl,n),r.postRender&&(this.lastPostProcessEffect=r.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this;e.length===0&&e.push(new qt(this.gl),new qt(this.gl));for(const n of e)n.resize()}_postRender(e,n){const{renderBuffers:r}=this,i={...n,inputBuffer:r[0],swapBuffer:r[1],target:null};for(const s of e)if(s.postRender){if(s.id===this.lastPostProcessEffect){i.target=n.target,s.postRender(this.gl,i);break}const o=s.postRender(this.gl,i);i.inputBuffer=o,i.swapBuffer=o===r[0]?r[1]:r[0]}}}const T7={pickedColor:null,pickedObjectIndex:-1};function x7({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:r,deviceRadius:i,deviceRect:s}){const{x:o,y:c,width:h,height:p}=s;let _=i*i,y=-1,w=0;for(let T=0;T<p;T++){const S=T+c-r,k=S*S;if(k>_)w+=4*h;else for(let U=0;U<h;U++){if(t[w+3]-1>=0){const C=U+o-n,P=C*C+k;P<=_&&(_=P,y=w)}w+=4}}if(y>=0){const T=t.slice(y,y+4),S=e(T);if(S){const k=Math.floor(y/4/h),U=y/4-k*h;return{...S,pickedColor:T,pickedX:o+U,pickedY:c+k}}at.error("Picked non-existent layer. Is picking buffer corrupt?")()}return T7}function S7({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t){for(let r=0;r<t.length;r+=4)if(t[r+3]-1>=0){const s=t.slice(r,r+4),o=s.join(",");if(!n.has(o)){const c=e(s);c?n.set(o,{...c,color:s}):at.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}function WE({pickInfo:t,viewports:e,pixelRatio:n,x:r,y:i,z:s}){let o=e[0];e.length>1&&(o=M7((t==null?void 0:t.pickedViewports)||e,{x:r,y:i}));let c;if(o){const h=[r-o.x,i-o.y];s!==void 0&&(h[2]=s),c=o.unproject(h)}return{color:null,layer:null,viewport:o,index:-1,picked:!1,x:r,y:i,pixel:[r,i],coordinate:c,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function C7(t){const{pickInfo:e,lastPickedInfo:n,mode:r,layers:i}=t,{pickedColor:s,pickedLayer:o,pickedObjectIndex:c}=e,h=o?[o]:[];if(r==="hover"){const y=n.index,w=n.layerId,T=o?o.props.id:null;if(T!==w||c!==y){if(T!==w){const S=i.find(k=>k.props.id===w);S&&h.unshift(S)}n.layerId=T,n.index=c,n.info=null}}const p=WE(t),_=new Map;return _.set(null,p),h.forEach(y=>{let w={...p};y===o&&(w.color=s,w.index=c,w.picked=!0),w=QE({layer:y,info:w,mode:r});const T=w.layer;y===o&&r==="hover"&&(n.info=w),_.set(T.id,w),r==="hover"&&T.updateAutoHighlight(w)}),_}function QE({layer:t,info:e,mode:n}){for(;t&&e;){const r=e.layer||null;e.sourceLayer=r,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:r}),t=t.parent}return e}function M7(t,e){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.containsPixel(e))return r}return t[0]}class L7{constructor(e){L(this,"gl",void 0),L(this,"pickingFBO",void 0),L(this,"depthFBO",void 0),L(this,"pickLayersPass",void 0),L(this,"layerFilter",void 0),L(this,"lastPickedInfo",void 0),L(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new VE(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:r,viewports:i},s=this.lastPickedInfo.info){const o=s&&s.layer&&s.layer.id,c=s&&s.viewport&&s.viewport.id,h=o?r.find(w=>w.id===o):null,p=c&&i.find(w=>w.id===c)||i[0],_=p&&p.unproject([e-p.x,n-p.y]);return{...s,...{x:e,y:n,viewport:p,coordinate:_,layer:h}}}_resizeBuffer(){var e,n;const{gl:r}=this;if(!this.pickingFBO&&(this.pickingFBO=new qt(r),qt.isSupported(r,{colorBufferFloat:!0}))){const i=new qt(r);i.attach({36064:new ur(r,{format:Je(r)?34836:6408,type:5126})}),this.depthFBO=i}(e=this.pickingFBO)===null||e===void 0||e.resize({width:r.canvas.width,height:r.canvas.height}),(n=this.depthFBO)===null||n===void 0||n.resize({width:r.canvas.width,height:r.canvas.height})}_getPickable(e){if(this._pickable===!1)return null;const n=e.filter(r=>this.pickLayersPass.shouldDrawLayer(r)&&!r.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:r,x:i,y:s,radius:o=0,depth:c=1,mode:h="query",unproject3D:p,onViewportActive:_,effects:y}){const w=this._getPickable(e),T=Oa(this.gl);if(!w)return{result:[],emptyInfo:WE({viewports:r,x:i,y:s,pixelRatio:T})};this._resizeBuffer();const S=vh(this.gl,[i,s],!0),k=[S.x+Math.floor(S.width/2),S.y+Math.floor(S.height/2)],U=Math.round(o*T),{width:x,height:C}=this.pickingFBO,P=this._getPickingRect({deviceX:k[0],deviceY:k[1],deviceRadius:U,deviceWidth:x,deviceHeight:C}),B={x:i-o,y:s-o,width:o*2+1,height:o*2+1};let z;const H=[],X=new Set;for(let Q=0;Q<c;Q++){let te;if(P){const ne=this._drawAndSample({layers:w,views:n,viewports:r,onViewportActive:_,deviceRect:P,cullRect:B,effects:y,pass:"picking:".concat(h)});te=x7({...ne,deviceX:k[0],deviceY:k[1],deviceRadius:U,deviceRect:P})}else te={pickedColor:null,pickedObjectIndex:-1};let ie;if(te.pickedLayer&&p&&this.depthFBO){const{pickedColors:ne}=this._drawAndSample({layers:[te.pickedLayer],views:n,viewports:r,onViewportActive:_,deviceRect:{x:te.pickedX,y:te.pickedY,width:1,height:1},cullRect:B,effects:y,pass:"picking:".concat(h,":z")},!0);ne[3]&&(ie=ne[0])}te.pickedLayer&&Q+1<c&&(X.add(te.pickedLayer),te.pickedLayer.disablePickingIndex(te.pickedObjectIndex)),z=C7({pickInfo:te,lastPickedInfo:this.lastPickedInfo,mode:h,layers:w,viewports:r,x:i,y:s,z:ie,pixelRatio:T});for(const ne of z.values())ne.layer&&H.push(ne);if(!te.pickedColor)break}for(const Q of X)Q.restorePickingColors();return{result:H,emptyInfo:z.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:r,x:i,y:s,width:o=1,height:c=1,mode:h="query",maxObjects:p=null,onViewportActive:_,effects:y}){const w=this._getPickable(e);if(!w)return[];this._resizeBuffer();const T=Oa(this.gl),S=vh(this.gl,[i,s],!0),k=S.x,U=S.y+S.height,x=vh(this.gl,[i+o,s+c],!0),C=x.x+x.width,P=x.y,B={x:k,y:P,width:C-k,height:U-P},z=this._drawAndSample({layers:w,views:n,viewports:r,onViewportActive:_,deviceRect:B,cullRect:{x:i,y:s,width:o,height:c},effects:y,pass:"picking:".concat(h)}),H=S7(z),X=new Map,Q=Number.isFinite(p);for(let te=0;te<H.length&&!(Q&&p&&X.size>=p);te++){const ie=H[te];let ne={color:ie.pickedColor,layer:null,index:ie.pickedObjectIndex,picked:!0,x:i,y:s,pixelRatio:T};ne=QE({layer:ie.pickedLayer,info:ne,mode:h}),X.has(ne.object)||X.set(ne.object,ne)}return Array.from(X.values())}_drawAndSample({layers:e,views:n,viewports:r,onViewportActive:i,deviceRect:s,cullRect:o,effects:c,pass:h},p=!1){const _=p?this.depthFBO:this.pickingFBO,y={layers:e,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:i,pickingFBO:_,deviceRect:s,cullRect:o,effects:c,pass:h,pickZ:p,preRenderStats:{}};for(const C of c)C.useInPicking&&(y.preRenderStats[C.id]=C.preRender(this.gl,y));const{decodePickingColor:w}=this.pickLayersPass.render(y),{x:T,y:S,width:k,height:U}=s,x=new(p?Float32Array:Uint8Array)(k*U*4);return t0(_,{sourceX:T,sourceY:S,sourceWidth:k,sourceHeight:U,target:x}),{pickedColors:x,decodePickingColor:w}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:r,deviceWidth:i,deviceHeight:s}){const o=Math.max(0,e-r),c=Math.max(0,n-r),h=Math.min(i,e+r+1)-o,p=Math.min(s,n+r+1)-c;return h<=0||p<=0?null:{x:o,y:c,width:h,height:p}}}const P7={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class k7{constructor(e){L(this,"el",null),L(this,"isVisible",!1);const n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,P7),n.appendChild(this.el))}setTooltip(e,n,r){const i=this.el;if(i){if(typeof e=="string")i.innerText=e;else if(e)e.text&&(i.innerText=e.text),e.html&&(i.innerHTML=e.html),e.className&&(i.className=e.className);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(n,"px, ").concat(r,"px)"),e&&typeof e=="object"&&"style"in e&&Object.assign(i.style,e.style)}}remove(){this.el&&(this.el.remove(),this.el=null)}}var YE={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(t){(function(e,n,r,i){var s=["","webkit","Moz","MS","ms","o"],o=n.createElement("div"),c="function",h=Math.round,p=Math.abs,_=Date.now;function y(I,F,G){return setTimeout(P(I,G),F)}function w(I,F,G){return Array.isArray(I)?(T(I,G[F],G),!0):!1}function T(I,F,G){var J;if(I)if(I.forEach)I.forEach(F,G);else if(I.length!==i)for(J=0;J<I.length;)F.call(G,I[J],J,I),J++;else for(J in I)I.hasOwnProperty(J)&&F.call(G,I[J],J,I)}function S(I,F,G){var J="DEPRECATED METHOD: "+F+`
`+G+` AT 
`;return function(){var oe=new Error("get-stack-trace"),Ee=oe&&oe.stack?oe.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Se=e.console&&(e.console.warn||e.console.log);return Se&&Se.call(e.console,J,Ee),I.apply(this,arguments)}}var k;typeof Object.assign!="function"?k=function(F){if(F===i||F===null)throw new TypeError("Cannot convert undefined or null to object");for(var G=Object(F),J=1;J<arguments.length;J++){var oe=arguments[J];if(oe!==i&&oe!==null)for(var Ee in oe)oe.hasOwnProperty(Ee)&&(G[Ee]=oe[Ee])}return G}:k=Object.assign;var U=S(function(F,G,J){for(var oe=Object.keys(G),Ee=0;Ee<oe.length;)(!J||J&&F[oe[Ee]]===i)&&(F[oe[Ee]]=G[oe[Ee]]),Ee++;return F},"extend","Use `assign`."),x=S(function(F,G){return U(F,G,!0)},"merge","Use `assign`.");function C(I,F,G){var J=F.prototype,oe;oe=I.prototype=Object.create(J),oe.constructor=I,oe._super=J,G&&k(oe,G)}function P(I,F){return function(){return I.apply(F,arguments)}}function B(I,F){return typeof I==c?I.apply(F&&F[0]||i,F):I}function z(I,F){return I===i?F:I}function H(I,F,G){T(ie(F),function(J){I.addEventListener(J,G,!1)})}function X(I,F,G){T(ie(F),function(J){I.removeEventListener(J,G,!1)})}function Q(I,F){for(;I;){if(I==F)return!0;I=I.parentNode}return!1}function te(I,F){return I.indexOf(F)>-1}function ie(I){return I.trim().split(/\s+/g)}function ne(I,F,G){if(I.indexOf&&!G)return I.indexOf(F);for(var J=0;J<I.length;){if(G&&I[J][G]==F||!G&&I[J]===F)return J;J++}return-1}function fe(I){return Array.prototype.slice.call(I,0)}function ce(I,F,G){for(var J=[],oe=[],Ee=0;Ee<I.length;){var Se=I[Ee][F];ne(oe,Se)<0&&J.push(I[Ee]),oe[Ee]=Se,Ee++}return J=J.sort(function(Ht,An){return Ht[F]>An[F]}),J}function xe(I,F){for(var G,J,oe=F[0].toUpperCase()+F.slice(1),Ee=0;Ee<s.length;){if(G=s[Ee],J=G?G+oe:F,J in I)return J;Ee++}return i}var Pe=1;function Be(){return Pe++}function gt(I){var F=I.ownerDocument||I;return F.defaultView||F.parentWindow||e}var me=/mobile|tablet|ip(ad|hone|od)|android/i,Le="ontouchstart"in e,Ge=xe(e,"PointerEvent")!==i,dt=Le&&me.test(navigator.userAgent),lt="touch",Lr="pen",Ln="mouse",gi="kinect",zn=25,xt=1,Pr=2,de=4,Ie=8,Xe=1,Ae=2,Rt=4,nt=8,zt=16,vt=Ae|Rt,Mt=nt|zt,kr=vt|Mt,du=["x","y"],Eo=["clientX","clientY"];function Ot(I,F){var G=this;this.manager=I,this.callback=F,this.element=I.element,this.target=I.options.inputTarget,this.domHandler=function(J){B(I.options.enable,[I])&&G.handler(J)},this.init()}Ot.prototype={handler:function(){},init:function(){this.evEl&&H(this.element,this.evEl,this.domHandler),this.evTarget&&H(this.target,this.evTarget,this.domHandler),this.evWin&&H(gt(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&X(this.element,this.evEl,this.domHandler),this.evTarget&&X(this.target,this.evTarget,this.domHandler),this.evWin&&X(gt(this.element),this.evWin,this.domHandler)}};function iA(I){var F,G=I.options.inputClass;return G?F=G:Ge?F=uA:dt?F=q:Le?F=l:F=xo,new F(I,gu)}function gu(I,F,G){var J=G.pointers.length,oe=G.changedPointers.length,Ee=F&xt&&J-oe===0,Se=F&(de|Ie)&&J-oe===0;G.isFirst=!!Ee,G.isFinal=!!Se,Ee&&(I.session={}),G.eventType=F,Vi(I,G),I.emit("hammer.input",G),I.recognize(G),I.session.prevInput=G}function Vi(I,F){var G=I.session,J=F.pointers,oe=J.length;G.firstInput||(G.firstInput=pu(F)),oe>1&&!G.firstMultiple?G.firstMultiple=pu(F):oe===1&&(G.firstMultiple=!1);var Ee=G.firstInput,Se=G.firstMultiple,Dt=Se?Se.center:Ee.center,Ht=F.center=oA(J);F.timeStamp=_(),F.deltaTime=F.timeStamp-Ee.timeStamp,F.angle=aA(Dt,Ht),F.distance=To(Dt,Ht),sA(G,F),F.offsetDirection=vu(F.deltaX,F.deltaY);var An=mu(F.deltaTime,F.deltaX,F.deltaY);F.overallVelocityX=An.x,F.overallVelocityY=An.y,F.overallVelocity=p(An.x)>p(An.y)?An.x:An.y,F.scale=Se?v0(Se.pointers,J):1,F.rotation=Se?m0(Se.pointers,J):0,F.maxPointers=G.prevInput?F.pointers.length>G.prevInput.maxPointers?F.pointers.length:G.prevInput.maxPointers:F.pointers.length,p0(G,F);var gr=I.element;Q(F.srcEvent.target,gr)&&(gr=F.srcEvent.target),F.target=gr}function sA(I,F){var G=F.center,J=I.offsetDelta||{},oe=I.prevDelta||{},Ee=I.prevInput||{};(F.eventType===xt||Ee.eventType===de)&&(oe=I.prevDelta={x:Ee.deltaX||0,y:Ee.deltaY||0},J=I.offsetDelta={x:G.x,y:G.y}),F.deltaX=oe.x+(G.x-J.x),F.deltaY=oe.y+(G.y-J.y)}function p0(I,F){var G=I.lastInterval||F,J=F.timeStamp-G.timeStamp,oe,Ee,Se,Dt;if(F.eventType!=Ie&&(J>zn||G.velocity===i)){var Ht=F.deltaX-G.deltaX,An=F.deltaY-G.deltaY,gr=mu(J,Ht,An);Ee=gr.x,Se=gr.y,oe=p(gr.x)>p(gr.y)?gr.x:gr.y,Dt=vu(Ht,An),I.lastInterval=F}else oe=G.velocity,Ee=G.velocityX,Se=G.velocityY,Dt=G.direction;F.velocity=oe,F.velocityX=Ee,F.velocityY=Se,F.direction=Dt}function pu(I){for(var F=[],G=0;G<I.pointers.length;)F[G]={clientX:h(I.pointers[G].clientX),clientY:h(I.pointers[G].clientY)},G++;return{timeStamp:_(),pointers:F,center:oA(F),deltaX:I.deltaX,deltaY:I.deltaY}}function oA(I){var F=I.length;if(F===1)return{x:h(I[0].clientX),y:h(I[0].clientY)};for(var G=0,J=0,oe=0;oe<F;)G+=I[oe].clientX,J+=I[oe].clientY,oe++;return{x:h(G/F),y:h(J/F)}}function mu(I,F,G){return{x:F/I||0,y:G/I||0}}function vu(I,F){return I===F?Xe:p(I)>=p(F)?I<0?Ae:Rt:F<0?nt:zt}function To(I,F,G){G||(G=du);var J=F[G[0]]-I[G[0]],oe=F[G[1]]-I[G[1]];return Math.sqrt(J*J+oe*oe)}function aA(I,F,G){G||(G=du);var J=F[G[0]]-I[G[0]],oe=F[G[1]]-I[G[1]];return Math.atan2(oe,J)*180/Math.PI}function m0(I,F){return aA(F[1],F[0],Eo)+aA(I[1],I[0],Eo)}function v0(I,F){return To(F[0],F[1],Eo)/To(I[0],I[1],Eo)}var y0={mousedown:xt,mousemove:Pr,mouseup:de},AA="mousedown",_0="mousemove mouseup";function xo(){this.evEl=AA,this.evWin=_0,this.pressed=!1,Ot.apply(this,arguments)}C(xo,Ot,{handler:function(F){var G=y0[F.type];G&xt&&F.button===0&&(this.pressed=!0),G&Pr&&F.which!==1&&(G=de),this.pressed&&(G&de&&(this.pressed=!1),this.callback(this.manager,G,{pointers:[F],changedPointers:[F],pointerType:Ln,srcEvent:F}))}});var le={pointerdown:xt,pointermove:Pr,pointerup:de,pointercancel:Ie,pointerout:Ie},w0={2:lt,3:Lr,4:Ln,5:gi},lA="pointerdown",yu="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(lA="MSPointerDown",yu="MSPointerMove MSPointerUp MSPointerCancel");function uA(){this.evEl=lA,this.evWin=yu,Ot.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}C(uA,Ot,{handler:function(F){var G=this.store,J=!1,oe=F.type.toLowerCase().replace("ms",""),Ee=le[oe],Se=w0[F.pointerType]||F.pointerType,Dt=Se==lt,Ht=ne(G,F.pointerId,"pointerId");Ee&xt&&(F.button===0||Dt)?Ht<0&&(G.push(F),Ht=G.length-1):Ee&(de|Ie)&&(J=!0),!(Ht<0)&&(G[Ht]=F,this.callback(this.manager,Ee,{pointers:G,changedPointers:[F],pointerType:Se,srcEvent:F}),J&&G.splice(Ht,1))}});var cA={touchstart:xt,touchmove:Pr,touchend:de,touchcancel:Ie},_u="touchstart",wu="touchstart touchmove touchend touchcancel";function fA(){this.evTarget=_u,this.evWin=wu,this.started=!1,Ot.apply(this,arguments)}C(fA,Ot,{handler:function(F){var G=cA[F.type];if(G===xt&&(this.started=!0),!!this.started){var J=So.call(this,F,G);G&(de|Ie)&&J[0].length-J[1].length===0&&(this.started=!1),this.callback(this.manager,G,{pointers:J[0],changedPointers:J[1],pointerType:lt,srcEvent:F})}}});function So(I,F){var G=fe(I.touches),J=fe(I.changedTouches);return F&(de|Ie)&&(G=ce(G.concat(J),"identifier")),[G,J]}var hA={touchstart:xt,touchmove:Pr,touchend:de,touchcancel:Ie},ji="touchstart touchmove touchend touchcancel";function q(){this.evTarget=ji,this.targetIds={},Ot.apply(this,arguments)}C(q,Ot,{handler:function(F){var G=hA[F.type],J=se.call(this,F,G);J&&this.callback(this.manager,G,{pointers:J[0],changedPointers:J[1],pointerType:lt,srcEvent:F})}});function se(I,F){var G=fe(I.touches),J=this.targetIds;if(F&(xt|Pr)&&G.length===1)return J[G[0].identifier]=!0,[G,G];var oe,Ee,Se=fe(I.changedTouches),Dt=[],Ht=this.target;if(Ee=G.filter(function(An){return Q(An.target,Ht)}),F===xt)for(oe=0;oe<Ee.length;)J[Ee[oe].identifier]=!0,oe++;for(oe=0;oe<Se.length;)J[Se[oe].identifier]&&Dt.push(Se[oe]),F&(de|Ie)&&delete J[Se[oe].identifier],oe++;if(Dt.length)return[ce(Ee.concat(Dt),"identifier"),Dt]}var _e=2500,Oe=25;function l(){Ot.apply(this,arguments);var I=P(this.handler,this);this.touch=new q(this.manager,I),this.mouse=new xo(this.manager,I),this.primaryTouch=null,this.lastTouches=[]}C(l,Ot,{handler:function(F,G,J){var oe=J.pointerType==lt,Ee=J.pointerType==Ln;if(!(Ee&&J.sourceCapabilities&&J.sourceCapabilities.firesTouchEvents)){if(oe)O.call(this,G,J);else if(Ee&&ot.call(this,J))return;this.callback(F,G,J)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function O(I,F){I&xt?(this.primaryTouch=F.changedPointers[0].identifier,Ke.call(this,F)):I&(de|Ie)&&Ke.call(this,F)}function Ke(I){var F=I.changedPointers[0];if(F.identifier===this.primaryTouch){var G={x:F.clientX,y:F.clientY};this.lastTouches.push(G);var J=this.lastTouches,oe=function(){var Ee=J.indexOf(G);Ee>-1&&J.splice(Ee,1)};setTimeout(oe,_e)}}function ot(I){for(var F=I.srcEvent.clientX,G=I.srcEvent.clientY,J=0;J<this.lastTouches.length;J++){var oe=this.lastTouches[J],Ee=Math.abs(F-oe.x),Se=Math.abs(G-oe.y);if(Ee<=Oe&&Se<=Oe)return!0}return!1}var Vt=xe(o.style,"touchAction"),We=Vt!==i,qe="compute",Ir="auto",rt="manipulation",De="none",Jt="pan-x",Hr="pan-y",Co=Gi();function Ps(I,F){this.manager=I,this.set(F)}Ps.prototype={set:function(I){I==qe&&(I=this.compute()),We&&this.manager.element.style&&Co[I]&&(this.manager.element.style[Vt]=I),this.actions=I.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var I=[];return T(this.manager.recognizers,function(F){B(F.options.enable,[F])&&(I=I.concat(F.getTouchAction()))}),Vn(I.join(" "))},preventDefaults:function(I){var F=I.srcEvent,G=I.offsetDirection;if(this.manager.session.prevented){F.preventDefault();return}var J=this.actions,oe=te(J,De)&&!Co[De],Ee=te(J,Hr)&&!Co[Hr],Se=te(J,Jt)&&!Co[Jt];if(oe){var Dt=I.pointers.length===1,Ht=I.distance<2,An=I.deltaTime<250;if(Dt&&Ht&&An)return}if(!(Se&&Ee)&&(oe||Ee&&G&vt||Se&&G&Mt))return this.preventSrc(F)},preventSrc:function(I){this.manager.session.prevented=!0,I.preventDefault()}};function Vn(I){if(te(I,De))return De;var F=te(I,Jt),G=te(I,Hr);return F&&G?De:F||G?F?Jt:Hr:te(I,rt)?rt:Ir}function Gi(){if(!We)return!1;var I={},F=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(G){I[G]=F?e.CSS.supports("touch-action",G):!0}),I}var Pn=1,gn=2,Hi=4,pn=8,Re=pn,N=16,Me=32;function hr(I){this.options=k({},this.defaults,I||{}),this.id=Be(),this.manager=null,this.options.enable=z(this.options.enable,!0),this.state=Pn,this.simultaneous={},this.requireFail=[]}hr.prototype={defaults:{},set:function(I){return k(this.options,I),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(I){if(w(I,"recognizeWith",this))return this;var F=this.simultaneous;return I=Mo(I,this),F[I.id]||(F[I.id]=I,I.recognizeWith(this)),this},dropRecognizeWith:function(I){return w(I,"dropRecognizeWith",this)?this:(I=Mo(I,this),delete this.simultaneous[I.id],this)},requireFailure:function(I){if(w(I,"requireFailure",this))return this;var F=this.requireFail;return I=Mo(I,this),ne(F,I)===-1&&(F.push(I),I.requireFailure(this)),this},dropRequireFailure:function(I){if(w(I,"dropRequireFailure",this))return this;I=Mo(I,this);var F=ne(this.requireFail,I);return F>-1&&this.requireFail.splice(F,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(I){return!!this.simultaneous[I.id]},emit:function(I){var F=this,G=this.state;function J(oe){F.manager.emit(oe,I)}G<pn&&J(F.options.event+bu(G)),J(F.options.event),I.additionalEvent&&J(I.additionalEvent),G>=pn&&J(F.options.event+bu(G))},tryEmit:function(I){if(this.canEmit())return this.emit(I);this.state=Me},canEmit:function(){for(var I=0;I<this.requireFail.length;){if(!(this.requireFail[I].state&(Me|Pn)))return!1;I++}return!0},recognize:function(I){var F=k({},I);if(!B(this.options.enable,[this,F])){this.reset(),this.state=Me;return}this.state&(Re|N|Me)&&(this.state=Pn),this.state=this.process(F),this.state&(gn|Hi|pn|N)&&this.tryEmit(F)},process:function(I){},getTouchAction:function(){},reset:function(){}};function bu(I){return I&N?"cancel":I&pn?"end":I&Hi?"move":I&gn?"start":""}function Eu(I){return I==zt?"down":I==nt?"up":I==Ae?"left":I==Rt?"right":""}function Mo(I,F){var G=F.manager;return G?G.get(I):I}function Kn(){hr.apply(this,arguments)}C(Kn,hr,{defaults:{pointers:1},attrTest:function(I){var F=this.options.pointers;return F===0||I.pointers.length===F},process:function(I){var F=this.state,G=I.eventType,J=F&(gn|Hi),oe=this.attrTest(I);return J&&(G&Ie||!oe)?F|N:J||oe?G&de?F|pn:F&gn?F|Hi:gn:Me}});function R(){Kn.apply(this,arguments),this.pX=null,this.pY=null}C(R,Kn,{defaults:{event:"pan",threshold:10,pointers:1,direction:kr},getTouchAction:function(){var I=this.options.direction,F=[];return I&vt&&F.push(Hr),I&Mt&&F.push(Jt),F},directionTest:function(I){var F=this.options,G=!0,J=I.distance,oe=I.direction,Ee=I.deltaX,Se=I.deltaY;return oe&F.direction||(F.direction&vt?(oe=Ee===0?Xe:Ee<0?Ae:Rt,G=Ee!=this.pX,J=Math.abs(I.deltaX)):(oe=Se===0?Xe:Se<0?nt:zt,G=Se!=this.pY,J=Math.abs(I.deltaY))),I.direction=oe,G&&J>F.threshold&&oe&F.direction},attrTest:function(I){return Kn.prototype.attrTest.call(this,I)&&(this.state&gn||!(this.state&gn)&&this.directionTest(I))},emit:function(I){this.pX=I.deltaX,this.pY=I.deltaY;var F=Eu(I.direction);F&&(I.additionalEvent=this.options.event+F),this._super.emit.call(this,I)}});function dA(){Kn.apply(this,arguments)}C(dA,Kn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[De]},attrTest:function(I){return this._super.attrTest.call(this,I)&&(Math.abs(I.scale-1)>this.options.threshold||this.state&gn)},emit:function(I){if(I.scale!==1){var F=I.scale<1?"in":"out";I.additionalEvent=this.options.event+F}this._super.emit.call(this,I)}});function gA(){hr.apply(this,arguments),this._timer=null,this._input=null}C(gA,hr,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Ir]},process:function(I){var F=this.options,G=I.pointers.length===F.pointers,J=I.distance<F.threshold,oe=I.deltaTime>F.time;if(this._input=I,!J||!G||I.eventType&(de|Ie)&&!oe)this.reset();else if(I.eventType&xt)this.reset(),this._timer=y(function(){this.state=Re,this.tryEmit()},F.time,this);else if(I.eventType&de)return Re;return Me},reset:function(){clearTimeout(this._timer)},emit:function(I){this.state===Re&&(I&&I.eventType&de?this.manager.emit(this.options.event+"up",I):(this._input.timeStamp=_(),this.manager.emit(this.options.event,this._input)))}});function pA(){Kn.apply(this,arguments)}C(pA,Kn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[De]},attrTest:function(I){return this._super.attrTest.call(this,I)&&(Math.abs(I.rotation)>this.options.threshold||this.state&gn)}});function mA(){Kn.apply(this,arguments)}C(mA,Kn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:vt|Mt,pointers:1},getTouchAction:function(){return R.prototype.getTouchAction.call(this)},attrTest:function(I){var F=this.options.direction,G;return F&(vt|Mt)?G=I.overallVelocity:F&vt?G=I.overallVelocityX:F&Mt&&(G=I.overallVelocityY),this._super.attrTest.call(this,I)&&F&I.offsetDirection&&I.distance>this.options.threshold&&I.maxPointers==this.options.pointers&&p(G)>this.options.velocity&&I.eventType&de},emit:function(I){var F=Eu(I.offsetDirection);F&&this.manager.emit(this.options.event+F,I),this.manager.emit(this.options.event,I)}});function Lo(){hr.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}C(Lo,hr,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[rt]},process:function(I){var F=this.options,G=I.pointers.length===F.pointers,J=I.distance<F.threshold,oe=I.deltaTime<F.time;if(this.reset(),I.eventType&xt&&this.count===0)return this.failTimeout();if(J&&oe&&G){if(I.eventType!=de)return this.failTimeout();var Ee=this.pTime?I.timeStamp-this.pTime<F.interval:!0,Se=!this.pCenter||To(this.pCenter,I.center)<F.posThreshold;this.pTime=I.timeStamp,this.pCenter=I.center,!Se||!Ee?this.count=1:this.count+=1,this._input=I;var Dt=this.count%F.taps;if(Dt===0)return this.hasRequireFailures()?(this._timer=y(function(){this.state=Re,this.tryEmit()},F.interval,this),gn):Re}return Me},failTimeout:function(){return this._timer=y(function(){this.state=Me},this.options.interval,this),Me},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Re&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Wr(I,F){return F=F||{},F.recognizers=z(F.recognizers,Wr.defaults.preset),new Po(I,F)}Wr.VERSION="2.0.7",Wr.defaults={domEvents:!1,touchAction:qe,enable:!0,inputTarget:null,inputClass:null,preset:[[pA,{enable:!1}],[dA,{enable:!1},["rotate"]],[mA,{direction:vt}],[R,{direction:vt},["swipe"]],[Lo],[Lo,{event:"doubletap",taps:2},["tap"]],[gA]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Tu=1,vA=2;function Po(I,F){this.options=k({},Wr.defaults,F||{}),this.options.inputTarget=this.options.inputTarget||I,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=I,this.input=iA(this),this.touchAction=new Ps(this,this.options.touchAction),dr(this,!0),T(this.options.recognizers,function(G){var J=this.add(new G[0](G[1]));G[2]&&J.recognizeWith(G[2]),G[3]&&J.requireFailure(G[3])},this)}Po.prototype={set:function(I){return k(this.options,I),I.touchAction&&this.touchAction.update(),I.inputTarget&&(this.input.destroy(),this.input.target=I.inputTarget,this.input.init()),this},stop:function(I){this.session.stopped=I?vA:Tu},recognize:function(I){var F=this.session;if(!F.stopped){this.touchAction.preventDefaults(I);var G,J=this.recognizers,oe=F.curRecognizer;(!oe||oe&&oe.state&Re)&&(oe=F.curRecognizer=null);for(var Ee=0;Ee<J.length;)G=J[Ee],F.stopped!==vA&&(!oe||G==oe||G.canRecognizeWith(oe))?G.recognize(I):G.reset(),!oe&&G.state&(gn|Hi|pn)&&(oe=F.curRecognizer=G),Ee++}},get:function(I){if(I instanceof hr)return I;for(var F=this.recognizers,G=0;G<F.length;G++)if(F[G].options.event==I)return F[G];return null},add:function(I){if(w(I,"add",this))return this;var F=this.get(I.options.event);return F&&this.remove(F),this.recognizers.push(I),I.manager=this,this.touchAction.update(),I},remove:function(I){if(w(I,"remove",this))return this;if(I=this.get(I),I){var F=this.recognizers,G=ne(F,I);G!==-1&&(F.splice(G,1),this.touchAction.update())}return this},on:function(I,F){if(I!==i&&F!==i){var G=this.handlers;return T(ie(I),function(J){G[J]=G[J]||[],G[J].push(F)}),this}},off:function(I,F){if(I!==i){var G=this.handlers;return T(ie(I),function(J){F?G[J]&&G[J].splice(ne(G[J],F),1):delete G[J]}),this}},emit:function(I,F){this.options.domEvents&&Gt(I,F);var G=this.handlers[I]&&this.handlers[I].slice();if(!(!G||!G.length)){F.type=I,F.preventDefault=function(){F.srcEvent.preventDefault()};for(var J=0;J<G.length;)G[J](F),J++}},destroy:function(){this.element&&dr(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function dr(I,F){var G=I.element;if(G.style){var J;T(I.options.cssProps,function(oe,Ee){J=xe(G.style,Ee),F?(I.oldCssProps[J]=G.style[J],G.style[J]=oe):G.style[J]=I.oldCssProps[J]||""}),F||(I.oldCssProps={})}}function Gt(I,F){var G=n.createEvent("Event");G.initEvent(I,!0,!0),G.gesture=F,F.target.dispatchEvent(G)}k(Wr,{INPUT_START:xt,INPUT_MOVE:Pr,INPUT_END:de,INPUT_CANCEL:Ie,STATE_POSSIBLE:Pn,STATE_BEGAN:gn,STATE_CHANGED:Hi,STATE_ENDED:pn,STATE_RECOGNIZED:Re,STATE_CANCELLED:N,STATE_FAILED:Me,DIRECTION_NONE:Xe,DIRECTION_LEFT:Ae,DIRECTION_RIGHT:Rt,DIRECTION_UP:nt,DIRECTION_DOWN:zt,DIRECTION_HORIZONTAL:vt,DIRECTION_VERTICAL:Mt,DIRECTION_ALL:kr,Manager:Po,Input:Ot,TouchAction:Ps,TouchInput:q,MouseInput:xo,PointerEventInput:uA,TouchMouseInput:l,SingleTouchInput:fA,Recognizer:hr,AttrRecognizer:Kn,Tap:Lo,Pan:R,Swipe:mA,Pinch:dA,Rotate:pA,Press:gA,on:H,off:X,each:T,merge:x,extend:U,assign:k,inherit:C,bindFn:P,prefixed:xe});var yA=typeof e<"u"?e:typeof self<"u"?self:{};yA.Hammer=Wr,t.exports?t.exports=Wr:e[r]=Wr})(window,document,"Hammer")})(YE);var r0=YE.exports;const Zr=PS({__proto__:null},[r0]),$E=1,XE=2,Eg=4,I7={mousedown:$E,mousemove:XE,mouseup:Eg};function R7(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function O7(t){const e=t.prototype.handler;t.prototype.handler=function(r){const i=this.store;r.button>0&&r.type==="pointerdown"&&(R7(i,s=>s.pointerId===r.pointerId)||i.push(r)),e.call(this,r)}}function D7(t){t.prototype.handler=function(n){let r=I7[n.type];r&$E&&n.button>=0&&(this.pressed=!0),r&XE&&n.which===0&&(r=Eg),this.pressed&&(r&Eg&&(this.pressed=!1),this.callback(this.manager,r,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}O7(r0.PointerEventInput);D7(r0.MouseInput);const F7=r0.Manager;class i0{constructor(e,n,r){this.element=e,this.callback=n,this.options={enable:!0,...r}}}const B7=Zr?[[Zr.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Zr.Rotate,{enable:!1}],[Zr.Pinch,{enable:!1}],[Zr.Swipe,{enable:!1}],[Zr.Pan,{threshold:0,enable:!1}],[Zr.Press,{enable:!1}],[Zr.Tap,{event:"doubletap",taps:2,enable:!1}],[Zr.Tap,{event:"anytap",enable:!1}],[Zr.Tap,{enable:!1}]]:null,dy={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},N7={doubletap:["tap"]},U7={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},vm={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},z7={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},gy={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},V7=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",aa=typeof window<"u"?window:global;let Tg=!1;try{const t={get passive(){return Tg=!0,!0}};aa.addEventListener("test",null,t),aa.removeEventListener("test",null)}catch{Tg=!1}const j7=V7.indexOf("firefox")!==-1,{WHEEL_EVENTS:G7}=vm,py="wheel",my=4.000244140625,H7=40,W7=.25;class Q7 extends i0{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{if(!this.options.enable)return;let s=i.deltaY;aa.WheelEvent&&(j7&&i.deltaMode===aa.WheelEvent.DOM_DELTA_PIXEL&&(s/=aa.devicePixelRatio),i.deltaMode===aa.WheelEvent.DOM_DELTA_LINE&&(s*=H7)),s!==0&&s%my===0&&(s=Math.floor(s/my)),i.shiftKey&&s&&(s=s*W7),this.callback({type:py,center:{x:i.clientX,y:i.clientY},delta:-s,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat(G7),this.events.forEach(i=>e.addEventListener(i,this.handleEvent,Tg?{passive:!1}:!1))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===py&&(this.options.enable=n)}}const{MOUSE_EVENTS:Y7}=vm,vy="pointermove",yy="pointerover",_y="pointerout",wy="pointerenter",by="pointerleave";class $7 extends i0{constructor(e,n,r){super(e,n,r),this.handleEvent=s=>{this.handleOverEvent(s),this.handleOutEvent(s),this.handleEnterEvent(s),this.handleLeaveEvent(s),this.handleMoveEvent(s)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(Y7),this.events.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===vy&&(this.enableMoveEvent=n),e===yy&&(this.enableOverEvent=n),e===_y&&(this.enableOutEvent=n),e===wy&&(this.enableEnterEvent=n),e===by&&(this.enableLeaveEvent=n)}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit(yy,e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit(_y,e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit(wy,e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit(by,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.which===0&&(this.pressed=!1),this.pressed||this._emit(vy,e);break;case"mouseup":this.pressed=!1;break}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const{KEY_EVENTS:X7}=vm,Ey="keydown",Ty="keyup";class Z7 extends i0{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{const s=i.target||i.srcElement;s.tagName==="INPUT"&&s.type==="text"||s.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:Ey,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:Ty,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(X7),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===Ey&&(this.enableDownEvent=n),e===Ty&&(this.enableUpEvent=n)}}const xy="contextmenu";class K7 extends i0{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{this.options.enable&&this.callback({type:xy,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===xy&&(this.options.enable=n)}}const xg=1,_f=2,Sg=4,q7={pointerdown:xg,pointermove:_f,pointerup:Sg,mousedown:xg,mousemove:_f,mouseup:Sg},J7=1,eD=2,tD=3,nD=0,rD=1,iD=2,sD=1,oD=2,aD=4;function AD(t){const e=q7[t.srcEvent.type];if(!e)return null;const{buttons:n,button:r,which:i}=t.srcEvent;let s=!1,o=!1,c=!1;return e===Sg||e===_f&&!Number.isFinite(n)?(s=i===J7,o=i===eD,c=i===tD):e===_f?(s=!!(n&sD),o=!!(n&aD),c=!!(n&oD)):e===xg&&(s=r===nD,o=r===rD,c=r===iD),{leftButton:s,middleButton:o,rightButton:c}}function lD(t,e){const n=t.center;if(!n)return null;const r=e.getBoundingClientRect(),i=r.width/e.offsetWidth||1,s=r.height/e.offsetHeight||1,o={x:(n.x-r.left-e.clientLeft)/i,y:(n.y-r.top-e.clientTop)/s};return{center:n,offsetCenter:o}}const Fh={srcElement:"root",priority:0};class uD{constructor(e){this.handleEvent=n=>{if(this.isEmpty())return;const r=this._normalizeEvent(n);let i=n.srcEvent.target;for(;i&&i!==r.rootElement;){if(this._emit(r,i),r.handled)return;i=i.parentNode}this._emit(r,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,r,i=!1,s=!1){const{handlers:o,handlersByElement:c}=this;let h=Fh;typeof r=="string"||r&&r.addEventListener?h={...Fh,srcElement:r}:r&&(h={...Fh,...r});let p=c.get(h.srcElement);p||(p=[],c.set(h.srcElement,p));const _={type:e,handler:n,srcElement:h.srcElement,priority:h.priority};i&&(_.once=!0),s&&(_.passive=!0),o.push(_),this._active=this._active||!_.passive;let y=p.length-1;for(;y>=0&&!(p[y].priority>=_.priority);)y--;p.splice(y+1,0,_)}remove(e,n){const{handlers:r,handlersByElement:i}=this;for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.type===e&&o.handler===n){r.splice(s,1);const c=i.get(o.srcElement);c.splice(c.indexOf(o),1),c.length===0&&i.delete(o.srcElement)}}this._active=r.some(s=>!s.passive)}_emit(e,n){const r=this.handlersByElement.get(n);if(r){let i=!1;const s=()=>{e.handled=!0},o=()=>{e.handled=!0,i=!0},c=[];for(let h=0;h<r.length;h++){const{type:p,handler:_,once:y}=r[h];if(_({...e,type:p,stopPropagation:s,stopImmediatePropagation:o}),y&&c.push(r[h]),i)break}for(let h=0;h<c.length;h++){const{type:p,handler:_}=c[h];this.remove(p,_)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...AD(e),...lD(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}const cD={events:null,recognizers:null,recognizerOptions:{},Manager:F7,touchAction:"none",tabIndex:0};class fD{constructor(e=null,n){this._onBasicInput=i=>{const{srcEvent:s}=i,o=U7[s.type];o&&this.manager.emit(o,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={...cD,...n},this.events=new Map,this.setElement(e);const{events:r}=this.options;r&&this.on(r)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:n}=this,r=n.Manager;this.manager=new r(e,{touchAction:n.touchAction,recognizers:n.recognizers||B7}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(dy).forEach(i=>{const s=this.manager.get(i);s&&dy[i].forEach(o=>{s.recognizeWith(o)})});for(const i in n.recognizerOptions){const s=this.manager.get(i);if(s){const o=n.recognizerOptions[i];delete o.enable,s.set(o)}}this.wheelInput=new Q7(e,this._onOtherEvent,{enable:!1}),this.moveInput=new $7(e,this._onOtherEvent,{enable:!1}),this.keyInput=new Z7(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new K7(e,this._onOtherEvent,{enable:!1});for(const[i,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(i,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,r){this._addEventHandler(e,n,r,!1)}once(e,n,r){this._addEventHandler(e,n,r,!0)}watch(e,n,r){this._addEventHandler(e,n,r,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){const{manager:r}=this;if(!r)return;const i=r.get(e);if(i&&i.options.enable!==n){i.set({enable:n});const s=N7[e];s&&!this.options.recognizers&&s.forEach(o=>{const c=r.get(o);n?(c.requireFailure(e),i.dropRequireFailure(o)):c.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,r,i,s){if(typeof e!="string"){r=n;for(const _ in e)this._addEventHandler(_,e[_],r,i,s);return}const{manager:o,events:c}=this,h=gy[e]||e;let p=c.get(h);p||(p=new uD(this),c.set(h,p),p.recognizerName=z7[h]||h,o&&o.on(h,p.handleEvent)),p.add(e,n,r,i,s),p.isEmpty()||this._toggleRecognizer(p.recognizerName,!0)}_removeEventHandler(e,n){if(typeof e!="string"){for(const o in e)this._removeEventHandler(o,e[o]);return}const{events:r}=this,i=gy[e]||e,s=r.get(i);if(s&&(s.remove(e,n),s.isEmpty())){const{recognizerName:o}=s;let c=!1;for(const h of r.values())if(h.recognizerName===o&&!h.isEmpty()){c=!0;break}c||this._toggleRecognizer(o,!1)}}}function Us(){}const hD=({isDragging:t})=>t?"grabbing":"grab",ZE={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:Us,onResize:Us,onViewStateChange:Us,onInteractionStateChange:Us,onBeforeRender:Us,onAfterRender:Us,onLoad:Us,onError:t=>at.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:hD,getTooltip:null,debug:!1,drawPickingColors:!1};class s0{constructor(e){L(this,"props",void 0),L(this,"width",0),L(this,"height",0),L(this,"userData",{}),L(this,"canvas",null),L(this,"viewManager",null),L(this,"layerManager",null),L(this,"effectManager",null),L(this,"deckRenderer",null),L(this,"deckPicker",null),L(this,"eventManager",null),L(this,"tooltip",null),L(this,"metrics",void 0),L(this,"animationLoop",void 0),L(this,"stats",void 0),L(this,"viewState",void 0),L(this,"cursorState",void 0),L(this,"_needsRedraw",void 0),L(this,"_pickRequest",void 0),L(this,"_lastPointerDownInfo",null),L(this,"_metricsCounter",void 0),L(this,"_onPointerMove",n=>{const{_pickRequest:r}=this;if(n.type==="pointerleave")r.x=-1,r.y=-1,r.radius=0;else{if(n.leftButton||n.rightButton)return;{const i=n.offsetCenter;if(!i)return;r.x=i.x,r.y=i.y,r.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:r.x,y:r.y}),r.event=n}),L(this,"_onEvent",n=>{const r=lv[n.type],i=n.offsetCenter;if(!r||!i||!this.layerManager)return;const s=this.layerManager.getLayers(),o=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:s,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:c}=o,h=c&&(c[r.handler]||c.props[r.handler]),p=this.props[r.handler];let _=!1;h&&(_=h.call(c,o,n)),!_&&p&&p(o,n)}),L(this,"_onPointerDown",n=>{const r=n.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:r.x,y:r.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo}),this.props={...ZE,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&at.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),j3()==="IE"&&at.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new im({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&Vl.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,r,i,s,o,c,h;if((e=this.animationLoop)===null||e===void 0||e.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(n=this.layerManager)===null||n===void 0||n.finalize(),this.layerManager=null,(r=this.viewManager)===null||r===void 0||r.finalize(),this.viewManager=null,(i=this.effectManager)===null||i===void 0||i.finalize(),this.effectManager=null,(s=this.deckRenderer)===null||s===void 0||s.finalize(),this.deckRenderer=null,(o=this.deckPicker)===null||o===void 0||o.finalize(),this.deckPicker=null,(c=this.eventManager)===null||c===void 0||c.destroy(),this.eventManager=null,(h=this.tooltip)===null||h===void 0||h.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var p;(p=this.canvas.parentElement)===null||p===void 0||p.removeChild(this.canvas),this.canvas=null}}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&at.removed("onLayerHover","onHover")(),"onLayerClick"in e&&at.removed("onLayerClick","onClick")(),e.initialViewState&&!ri(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const r=this.viewManager.needsRedraw(e),i=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return n=n||r||i||s||o,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return this.viewManager!==null}getViews(){return cn(this.viewManager),this.viewManager.views}getViewports(e){return cn(this.viewManager),this.viewManager.getViewports(e)}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const r in e)this.layerManager.resourceManager.add({resourceId:r,data:e[r],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_pick(e,n,r){cn(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(n).timeStart();const s=this.deckPicker[e]({layers:this.layerManager.getLayers(r),views:this.viewManager.getViews(),viewports:this.getViewports(r),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...r});return i.get(n).timeEnd(),s}_createCanvas(e){let n=e.canvas;return typeof n=="string"&&(n=document.getElementById(n),cn(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;const{width:n,height:r}=e;if(n||n===0){const s=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.width=s}if(r||r===0){var i;const s=Number.isFinite(r)?"".concat(r,"px"):r;this.canvas.style.position=((i=e.style)===null||i===void 0?void 0:i.position)||"absolute",this.canvas.style.height=s}}_updateCanvasSize(){var e,n;const{canvas:r}=this;if(!r)return;const i=(e=r.clientWidth)!==null&&e!==void 0?e:r.width,s=(n=r.clientHeight)!==null&&n!==void 0?n:r.height;if(i!==this.width||s!==this.height){var o,c;this.width=i,this.height=s,(o=this.viewManager)===null||o===void 0||o.setProps({width:i,height:s}),(c=this.layerManager)===null||c===void 0||c.activateViewport(this.getViewports()[0]),this.props.onResize({width:i,height:s})}}_createAnimationLoop(e){const{width:n,height:r,gl:i,glOptions:s,debug:o,onError:c,onBeforeRender:h,onAfterRender:p,useDevicePixels:_}=e;return new Ck({width:n,height:r,useDevicePixels:_,autoResizeDrawingBuffer:!i,autoResizeViewport:!1,gl:i,onCreateContext:y=>X3({...s,...y,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:y=>this._setGLContext(y.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:h,onAfterRender:p,onError:c})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new HE({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:r,emptyInfo:i}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=r.length>0;let s=i,o=!1;for(const c of r){var n;s=c,o=((n=c.layer)===null||n===void 0?void 0:n.onHover(c,e.event))||o}if(!o&&this.props.onHover&&this.props.onHover(s,e.event),this.props.getTooltip&&this.tooltip){const c=this.props.getTooltip(s);this.tooltip.setTooltip(c,s.x,s.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,rm(e,{enable:!0,copyState:!0})),this.tooltip=new k7(this.canvas),Ri(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const n=new CE;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new fD(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const i in lv)this.eventManager.on(i,this._onEvent);this.viewManager=new i7({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const r=this.viewManager.getViewports()[0];this.layerManager=new r7(e,{deck:this,stats:this.stats,viewport:r,timeline:n}),this.effectManager=new _7,this.deckRenderer=new E7(e),this.deckPicker=new L7(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){const{gl:r}=this.layerManager.context;Ri(r,this.props.parameters),this.props.onBeforeRender({gl:r}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...n}),this.props.onAfterRender({gl:r})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),at.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const r=Ys.get("Memory Usage");e.bufferMemory=r.get("Buffer Memory").count,e.textureMemory=r.get("Texture Memory").count,e.renderbufferMemory=r.get("Renderbuffer Memory").count,e.gpuMemory=r.get("GPU Memory").count}}L(s0,"defaultProps",ZE);L(s0,"VERSION",IM);class Bh{constructor(e,n){L(this,"opts",void 0),L(this,"source",void 0),this.opts=n,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];const{value:r}=this.source,{size:i}=n;let s=r;if(r&&r.length!==i){s=new Float32Array(i);const o=n.elementOffset||0;for(let c=0;c<i;++c)s[c]=r[o+c]}return s}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function dD(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function Pc(t){return t.stride||t.size*t.bytesPerElement}function KE(t,e){e.offset&&at.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=Pc(t),r=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,i=e.elementOffset||0,s=r*n+i*t.bytesPerElement+(t.offset||0);return{...e,offset:s,stride:n}}function gD(t,e){const n=KE(t,e);return{high:n,low:{...n,offset:n.offset+t.size*4}}}class pD{constructor(e,n,r){L(this,"gl",void 0),L(this,"id",void 0),L(this,"size",void 0),L(this,"settings",void 0),L(this,"value",void 0),L(this,"doublePrecision",void 0),L(this,"_buffer",void 0),L(this,"state",void 0),this.gl=e,this.id=n.id||"",this.size=n.size||1;const i=n.logicalType||n.type,s=i===5130;let{defaultValue:o}=n;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0);let c;s?c=5126:!i&&n.isIndexed?c=e&&rP(e,St.ELEMENT_INDEX_UINT32)?5125:5123:c=i||5126;let h=dD(i||c||5126);this.doublePrecision=s,s&&n.fp64===!1&&(h=Float32Array),this.value=null,this.settings={...n,defaultType:h,defaultValue:o,logicalType:i,type:c,size:this.size,bytesPerElement:h.BYTES_PER_ELEMENT},this.state={...r,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:n}=this.settings;this._buffer=new mt(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*Pc(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),Vl.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){const r={},i=this.value instanceof Float64Array,s=gD(this.getAccessor(),n||{});return r[e]=new Bh(this,s.high),r["".concat(e,"64Low")]=i?new Bh(this,s.low):new Float32Array(this.size),r}if(n){const r=KE(this.getAccessor(),n);return{[e]:new Bh(this,r)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:r,size:i}=this,s=r*i;if(n&&s&&n.length>=s){const o=new Array(i).fill(1/0),c=new Array(i).fill(-1/0);for(let h=0;h<s;)for(let p=0;p<i;p++){const _=n[h++];_<o[p]&&(o[p]=_),_>c[p]&&(c[p]=_)}e=[o,c]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let r;ArrayBuffer.isView(e)?r={value:e}:e instanceof mt?r={buffer:e}:r=e;const i={...this.settings,...r};if(n.bufferAccessor=i,n.bounds=null,r.constant){let s=r.value;if(s=this._normalizeValue(s,[],0),this.settings.normalized&&(s=this.normalizeConstant(s)),!(!n.constant||!this._areValuesEqual(s,this.value)))return!1;n.externalBuffer=null,n.constant=!0,this.value=s}else if(r.buffer){const s=r.buffer;n.externalBuffer=s,n.constant=!1,this.value=r.value||null;const o=r.value instanceof Float64Array;i.type=r.type||s.accessor.type,i.bytesPerElement=s.accessor.BYTES_PER_ELEMENT*(o?2:1),i.stride=Pc(i)}else if(r.value){this._checkExternalBuffer(r);let s=r.value;n.externalBuffer=null,n.constant=!1,this.value=s,i.bytesPerElement=s.BYTES_PER_ELEMENT,i.stride=Pc(i);const{buffer:o,byteOffset:c}=this;this.doublePrecision&&s instanceof Float64Array&&(s=Rh(s,i));const h=s.byteLength+c+i.stride*2;o.byteLength<h&&o.reallocate(h),o.setAccessor(null),o.subData({data:s,offset:c}),i.type=r.type||o.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:r=0,endOffset:i}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?Rh(n,{size:this.size,startIndex:r,endIndex:i}):n.subarray(r,i),offset:r*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,n=!1){const{state:r}=this,i=r.allocatedValue,s=Vl.allocate(i,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=s;const{buffer:o,byteOffset:c}=this;return o.byteLength<s.byteLength+c&&(o.reallocate(s.byteLength+c),n&&i&&o.subData({data:i instanceof Float64Array?Rh(i,this):i,offset:c})),r.allocatedValue=s,r.constant=!1,r.externalBuffer=null,r.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const r=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=n.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof r)&&this.settings.normalized&&!("normalized"in e)&&at.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,r){const{defaultValue:i,size:s}=this.settings;if(Number.isFinite(e))return n[r]=e,n;if(!e){let o=s;for(;--o>=0;)n[r+o]=i[o];return n}switch(s){case 4:n[r+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:n[r+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:n[r+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:n[r+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:let o=s;for(;--o>=0;)n[r+o]=Number.isFinite(e[o])?e[o]:i[o]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:r}=this;for(let i=0;i<r;i++)if(e[i]!==n[i])return!1;return!0}}const Sy=[],Cy=[];function ym(t,e=0,n=1/0){let r=Sy;const i={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?r=t:t.length>0&&(Cy.length=t.length,r=Cy):r=Sy,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),i.index=e-1),{iterable:r,objectInfo:i}}function qE(t){return t&&t[Symbol.asyncIterator]}function mD(t,e){const{size:n,stride:r,offset:i,startIndices:s,nested:o}=e,c=t.BYTES_PER_ELEMENT,h=r?r/c:n,p=i?i/c:0,_=Math.floor((t.length-p)/h);return(y,{index:w,target:T})=>{if(!s){const x=w*h+p;for(let C=0;C<n;C++)T[C]=t[x+C];return T}const S=s[w],k=s[w+1]||_;let U;if(o){U=new Array(k-S);for(let x=S;x<k;x++){const C=x*h+p;T=new Array(n);for(let P=0;P<n;P++)T[P]=t[C+P];U[x-S]=T}}else if(h===n)U=t.subarray(S*n+p,k*n+p);else{U=new t.constructor((k-S)*n);let x=0;for(let C=S;C<k;C++){const P=C*h+p;for(let B=0;B<n;B++)U[x++]=t[P+B]}}return U}}const vD=[],kc=[[0,1/0]];function yD(t,e){if(t===kc||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],r=t.length;let i=0;for(let s=0;s<r;s++){const o=t[s];o[1]<e[0]?(n.push(o),i=s+1):o[0]>e[1]?n.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return n.splice(i,0,e),n}function Nh(t){const{source:e,target:n,start:r=0,size:i,getData:s}=t,o=t.end||n.length,c=e.length,h=o-r;if(c>h){n.set(e.subarray(0,h),r);return}if(n.set(e,r),!s)return;let p=c;for(;p<h;){const _=s(p,e);for(let y=0;y<i;y++)n[r+p]=_[y]||0,p++}}function _D({source:t,target:e,size:n,getData:r,sourceStartIndices:i,targetStartIndices:s}){if(!Array.isArray(s))return Nh({source:t,target:e,size:n,getData:r}),e;let o=0,c=0;const h=r&&((_,y)=>r(_+c,y)),p=Math.min(i.length,s.length);for(let _=1;_<p;_++){const y=i[_]*n,w=s[_]*n;Nh({source:t.subarray(o,y),target:e,start:c,end:w,size:n,getData:h}),o=y,c=w}return c<e.length&&Nh({source:[],target:e,start:c,size:n,getData:h}),e}const wD={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function JE(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...wD[n],...e,...t,type:n}}function eT(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function tT(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function nT(t){t.push(t.shift())}function _m(t,e){const{doublePrecision:n,settings:r,value:i,size:s}=t,o=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:e*s)*o}function rT({buffer:t,numInstances:e,attribute:n,fromLength:r,fromStartIndices:i,getData:s=o=>o}){const o=n.doublePrecision&&n.value instanceof Float64Array?2:1,c=n.size*o,h=n.byteOffset,p=n.startIndices,_=i&&p,y=_m(n,e),w=n.isConstant;if(!_&&r>=y)return;const T=w?n.value:n.getBuffer().getData({srcByteOffset:h});if(n.settings.normalized&&!w){const x=s;s=(C,P)=>n.normalizeConstant(x(C,P))}const S=w?(x,C)=>s(T,C):(x,C)=>s(T.subarray(x,x+c),C),k=t.getData({length:r}),U=new Float32Array(y);_D({source:k,target:U,sourceStartIndices:i,targetStartIndices:p,size:c,getData:S}),t.byteLength<U.byteLength+h&&t.reallocate(U.byteLength+h),t.subData({data:U,offset:h})}class wm extends pD{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:kc}),L(this,"constant",!1),this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,r=this.settings.transition,i=Array.isArray(n)?e[n.find(s=>e[s])]:e[n];return JE(i,r)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:r=0,endRow:i=1/0}=n;this.state.updateRanges=yD(this.state.updateRanges,[r,i])}else this.state.updateRanges=kc}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=vD}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:r}=this;return r.noAlloc?!1:r.update?(super.allocate(e,n.updateRanges!==kc),!0):!1}updateBuffer({numInstances:e,data:n,props:r,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:o,noAlloc:c}}=this;let h=!0;if(o){for(const[p,_]of s)o.call(i,this,{data:n,startRow:p,endRow:_,props:r,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[p,_]of s){const y=Number.isFinite(p)?this.getVertexOffset(p):0,w=Number.isFinite(_)?this.getVertexOffset(_):c||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:y,endOffset:w})}this._checkAttributeArray()}else h=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),h}setConstantValue(e){return e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:r,settings:i}=this;if(!e)return r.binaryValue=null,r.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(r.binaryValue===e)return this.clearNeedsUpdate(),!0;if(r.binaryValue=e,this.setNeedsRedraw(),i.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const o=e;cn(ArrayBuffer.isView(o.value),"invalid ".concat(i.accessor));const c=!!o.size&&o.size!==this.size;return r.binaryAccessor=mD(o.value,{size:o.size||this.size,stride:o.stride,offset:o.offset,startIndices:n,nested:c}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?e<n.length?n[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},n={};for(const r in e)Object.assign(n,super.getShaderAttributes(r,e[r]));return n}_autoUpdater(e,{data:n,startRow:r,endRow:i,props:s,numInstances:o}){if(e.constant)return;const{settings:c,state:h,value:p,size:_,startIndices:y}=e,{accessor:w,transform:T}=c,S=h.binaryAccessor||(typeof w=="function"?w:s[w]);cn(typeof S=="function",'accessor "'.concat(w,'" is not a function'));let k=e.getVertexOffset(r);const{iterable:U,objectInfo:x}=ym(n,r,i);for(const C of U){x.index++;let P=S(C,x);if(T&&(P=T.call(this,P)),y){const B=(x.index<y.length-1?y[x.index+1]:o)-y[x.index];if(P&&Array.isArray(P[0])){let z=k;for(const H of P)e._normalizeValue(H,p,z),z+=_}else P&&P.length>_?p.set(P,k):(e._normalizeValue(P,x.target,0),$O({target:p,source:x.target,start:k,count:B}));k+=B*_}else e._normalizeValue(P,p,k),k+=_}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let r=!0;switch(n){case 4:r=r&&Number.isFinite(e[3]);case 3:r=r&&Number.isFinite(e[2]);case 2:r=r&&Number.isFinite(e[1]);case 1:r=r&&Number.isFinite(e[0]);break;default:r=!1}if(!r)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class bD{constructor({gl:e,attribute:n,timeline:r}){L(this,"gl",void 0),L(this,"type","interpolation"),L(this,"attributeInTransition",void 0),L(this,"settings",void 0),L(this,"attribute",void 0),L(this,"transition",void 0),L(this,"currentStartIndices",void 0),L(this,"currentLength",void 0),L(this,"transform",void 0),L(this,"buffers",void 0),this.gl=e,this.transition=new uu(r),this.attribute=n,this.attributeInTransition=new wm(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=TD(e,n);const i={byteLength:0,usage:35050};this.buffers=[new mt(e,i),new mt(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0){this.transition.cancel();return}this.settings=e;const{gl:r,buffers:i,attribute:s}=this;nT(i);const o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const c of i)rT({buffer:c,...o});this.currentStartIndices=s.startIndices,this.currentLength=_m(s,n),this.attributeInTransition.setData({buffer:i[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aFrom:i[0],aTo:eT(r,s)},feedbackBuffers:{vCurrent:i[1]}})}update(){const e=this.transition.update();if(e){const{duration:n,easing:r}=this.settings,{time:i}=this.transition;let s=i/n;r&&(s=r(s)),this.transform.run({uniforms:{time:s}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}}const ED=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function TD(t,e){const n=tT(e.size);return new um(t,{vs:ED,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}class xD{constructor({gl:e,attribute:n,timeline:r}){L(this,"gl",void 0),L(this,"type","spring"),L(this,"attributeInTransition",void 0),L(this,"settings",void 0),L(this,"attribute",void 0),L(this,"transition",void 0),L(this,"currentStartIndices",void 0),L(this,"currentLength",void 0),L(this,"texture",void 0),L(this,"framebuffer",void 0),L(this,"transform",void 0),L(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new uu(r),this.attribute=n,this.attributeInTransition=new wm(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=CD(e),this.framebuffer=MD(e,this.texture),this.transform=SD(e,n,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new mt(e,i),new mt(e,i),new mt(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){const{gl:r,buffers:i,attribute:s}=this,o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const c of i)rT({buffer:c,...o});this.settings=e,this.currentStartIndices=s.startIndices,this.currentLength=_m(s,n),this.attributeInTransition.setData({buffer:i[1],value:s.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:eT(r,s)}})}update(){const{buffers:e,transform:n,framebuffer:r,transition:i}=this;if(!i.update())return!1;const o=this.settings;return n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:r,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:o.stiffness,damping:o.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),nT(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),t0(r)[0]>0||i.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function SD(t,e,n){const r=tT(e.size);return new um(t,{framebuffer:n,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}function CD(t){return new ur(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function MD(t,e){return new qt(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}const LD={interpolation:bD,spring:xD};class PD{constructor(e,{id:n,timeline:r}){L(this,"id",void 0),L(this,"isSupported",void 0),L(this,"gl",void 0),L(this,"timeline",void 0),L(this,"transitions",void 0),L(this,"needsRedraw",void 0),L(this,"numInstances",void 0),this.id=n,this.gl=e,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=um.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:r}){this.numInstances=r||1;for(const i in e){const s=e[i],o=s.getTransitionSetting(n);o&&this._updateAttribute(i,s,o)}for(const i in this.transitions){const s=e[i];(!s||!s.getTransitionSetting(n))&&this._removeTransition(i)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const r=this.transitions[n];r.inProgress&&(e[n]=r.attributeInTransition)}return e}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,r){const i=this.transitions[e];let s=!i||i.type!==r.type;if(s){if(!this.isSupported){at.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();return}i&&this._removeTransition(e);const o=LD[r.type];o?this.transitions[e]=new o({attribute:n,timeline:this.timeline,gl:this.gl}):(at.error("unsupported transition type '".concat(r.type,"'"))(),s=!1)}(s||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(r,this.numInstances))}}const My="attributeManager.invalidate",kD="attributeManager.updateStart",ID="attributeManager.updateEnd",RD="attribute.updateStart",OD="attribute.allocate",DD="attribute.updateEnd";class FD{constructor(e,{id:n="attribute-manager",stats:r,timeline:i}={}){L(this,"id",void 0),L(this,"gl",void 0),L(this,"attributes",void 0),L(this,"updateTriggers",void 0),L(this,"needsRedraw",void 0),L(this,"userData",void 0),L(this,"stats",void 0),L(this,"attributeTransitionManager",void 0),L(this,"mergeBoundsMemoized",lu(UO)),this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=r,this.attributeTransitionManager=new PD(e,{id:"".concat(n,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const n of e)this.attributes[n]!==void 0&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const r=this._invalidateTrigger(e,n);xn(My,this,e,r)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);xn(My,this,"all")}update({data:e,numInstances:n,startIndices:r=null,transitions:i,props:s={},buffers:o={},context:c={}}){let h=!1;xn(kD,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const p in this.attributes){const _=this.attributes[p],y=_.settings.accessor;_.startIndices=r,_.numInstances=n,s[p]&&at.removed("props.".concat(p),"data.attributes.".concat(p))(),_.setExternalBuffer(o[p])||_.setBinaryValue(typeof y=="string"?o[y]:void 0,e.startIndices)||typeof y=="string"&&!o[y]&&_.setConstantValue(s[y])||_.needsUpdate()&&(h=!0,this._updateAttribute({attribute:_,numInstances:n,data:e,props:s,context:c})),this.needsRedraw=this.needsRedraw||_.needsRedraw()}h&&xn(ID,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:i})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getBounds(e){const n=e.map(r=>{var i;return(i=this.attributes[r])===null||i===void 0?void 0:i.getBounds()});return this.mergeBoundsMemoized(n)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:r}=this,i={...r.getAttributes()};for(const s in n){const o=n[s];o.needsRedraw(e)&&!r.hasAttribute(s)&&(i[s]=o)}return i}getShaderAttributes(e,n={}){e||(e=this.getAttributes());const r={};for(const i in e)n[i]||Object.assign(r,e[i].getShaderAttributes());return r}_add(e,n={}){for(const r in e){const i=e[r];this.attributes[r]=this._createAttribute(r,i,n)}this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,r){const i={...n,id:e,size:n.isIndexed&&1||n.size||1,divisor:r.instanced?1:n.divisor||0};return new wm(this.gl,i)}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(i=>{e[i]||(e[i]=[]),e[i].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:r,updateTriggers:i}=this,s=i[e];return s&&s.forEach(o=>{const c=r[o];c&&c.setNeedsUpdate(c.id,n)}),s}_updateAttribute(e){const{attribute:n,numInstances:r}=e;if(xn(RD,n),n.constant){n.setConstantValue(n.value);return}n.allocate(r)&&xn(OD,n,r),n.updateBuffer(e)&&(this.needsRedraw=!0,xn(DD,n,r))}}class BD extends uu{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:r,duration:i,easing:s}}=this,o=s(e/i);this._value=hf(n,r,o)}}const Ly=1e-5;function Py(t,e,n,r,i){const s=e-t,c=(n-e)*i,h=-s*r;return c+h+s+e}function ND(t,e,n,r,i){if(Array.isArray(n)){const s=[];for(let o=0;o<n.length;o++)s[o]=Py(t[o],e[o],n[o],r,i);return s}return Py(t,e,n,r,i)}function ky(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){const i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}class UD extends uu{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:r,stiffness:i}=this.settings,{_prevValue:s=e,_currValue:o=e}=this;let c=ND(s,o,n,r,i);const h=ky(c,n),p=ky(c,o);h<Ly&&p<Ly&&(c=n,this.end()),this._prevValue=o,this._currValue=c}}const zD={interpolation:BD,spring:UD};class VD{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,r,i){const{transitions:s}=this;if(s.has(e)){const h=s.get(e),{value:p=h.settings.fromValue}=h;n=p,this.remove(e)}if(i=JE(i),!i)return;const o=zD[i.type];if(!o){at.error("unsupported transition type '".concat(i.type,"'"))();return}const c=new o(this.timeline);c.start({...i,fromValue:n,toValue:r}),s.set(e,c)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,r]of this.transitions)r.update(),e[n]=r.value,r.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function jD(t){const e=t[ws];for(const n in e){const r=e[n],{validate:i}=r;if(i&&!i(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}function GD(t,e){const n=iT({newProps:t,oldProps:e,propTypes:t[ws],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=WD(t,e);let i=!1;return r||(i=QD(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:YD(t,e),transitionsChanged:HD(t,e)}}function HD(t,e){if(!t.transitions)return!1;const n={},r=t[ws];let i=!1;for(const s in t.transitions){const o=r[s],c=o&&o.type;(c==="number"||c==="color"||c==="array")&&Cg(t[s],e[s],o)&&(n[s]=!0,i=!0)}return i?n:!1}function iT({newProps:t,oldProps:e,ignoreProps:n={},propTypes:r={},triggerName:i="props"}){if(e===t)return!1;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return"".concat(i," changed shallowly");for(const s of Object.keys(t))if(!(s in n)){if(!(s in e))return"".concat(i,".").concat(s," added");const o=Cg(t[s],e[s],r[s]);if(o)return"".concat(i,".").concat(s," ").concat(o)}for(const s of Object.keys(e))if(!(s in n)){if(!(s in t))return"".concat(i,".").concat(s," dropped");if(!Object.hasOwnProperty.call(t,s)){const o=Cg(t[s],e[s],r[s]);if(o)return"".concat(i,".").concat(s," ").concat(o)}}return!1}function Cg(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)||!r&&(r=t&&e&&t.equals,r&&!r.call(t,e))?"changed deeply":!r&&e!==t?"changed shallowly":null}function WD(t,e){if(e===null)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:i}=t;return r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&i&&(n=i(t.data,e.data)||n),n}function QD(t,e){if(e===null)return{all:!0};if("all"in t.updateTriggers&&Iy(t,e,"all"))return{all:!0};const n={};let r=!1;for(const i in t.updateTriggers)i!=="all"&&Iy(t,e,i)&&(n[i]=!0,r=!0);return r?n:!1}function YD(t,e){if(e===null)return!0;const n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r||r.length!==n.length)return!0;for(let i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function Iy(t,e,n){let r=t.updateTriggers[n];r=r??{};let i=e.updateTriggers[n];return i=i??{},iT({oldProps:i,newProps:r,triggerName:n})}const $D="count(): argument not an object",XD="count(): argument not a container";function ZD(t){if(!qD(t))throw new Error($D);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(KD(t))return Object.keys(t).length;throw new Error(XD)}function KD(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function qD(t){return t!==null&&typeof t=="object"}function JD(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(r=>r.name==="project64"))){const r=n.modules.findIndex(i=>i.name==="project32");r>=0&&n.modules.splice(r,1)}if("inject"in e)if(!t.inject)n.inject=e.inject;else{const r={...t.inject};for(const i in e.inject)r[i]=(r[i]||"")+e.inject[i];n.inject=r}return n}const eF={10241:9987,10240:9729,10242:33071,10243:33071},Mg={};function tF(t,e,n,r){if(n instanceof ur)return n;n.constructor&&n.constructor.name!=="Object"&&(n={data:n});let i=null;n.compressed&&(i={10241:n.data.length>1?9985:9729});const s=new ur(e,{...n,parameters:{...eF,...i,...r}});return Mg[s.id]=t,s}function nF(t,e){!e||!(e instanceof ur)||Mg[e.id]===t&&(e.delete(),delete Mg[e.id])}const rF={boolean:{validate(t,e){return!0},equal(t,e,n){return!!t==!!e}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||Lg(t)&&(t.length===3||t.length===4)},equal(t,e,n){return ri(t,e,1)}},accessor:{validate(t,e){const n=wf(t);return n==="function"||n===wf(e.value)},equal(t,e,n){return typeof e=="function"?!0:ri(t,e,1)}},array:{validate(t,e){return e.optional&&!t||Lg(t)},equal(t,e,n){const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?ri(t,e,i):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?ri(t,e,i):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,n){return!n.compare&&n.ignore!==!1||t===e}},data:{transform:(t,e,n)=>{const{dataTransform:r}=n.props;return r&&t?r(t):t}},image:{transform:(t,e,n)=>{const r=n.context;return!r||!r.gl?null:tF(n.id,r.gl,t,{...e.parameters,...n.props.textureParameters})},release:(t,e,n)=>{nF(n.id,t)}}};function iF(t){const e={},n={},r={};for(const[i,s]of Object.entries(t)){const o=s==null?void 0:s.deprecatedFor;if(o)r[i]=Array.isArray(o)?o:[o];else{const c=sF(i,s);e[i]=c,n[i]=c.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}function sF(t,e){switch(wf(e)){case"object":return zA(t,e);case"array":return zA(t,{type:"array",value:e,compare:!1});case"boolean":return zA(t,{type:"boolean",value:e});case"number":return zA(t,{type:"number",value:e});case"function":return zA(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function zA(t,e){return"type"in e?{name:t,...rF[e.type],...e}:"value"in e?{name:t,type:wf(e.value),...e}:{name:t,type:"object",value:e}}function Lg(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function wf(t){return Lg(t)?"array":t===null?"null":typeof t}function oF(t,e){let n;for(let s=e.length-1;s>=0;s--){const o=e[s];"extensions"in o&&(n=o.extensions)}const r=Pg(t.constructor,n),i=Object.create(r);i[yf]=t,i[so]={},i[cs]={};for(let s=0;s<e.length;++s){const o=e[s];for(const c in o)i[c]=o[c]}return Object.freeze(i),i}const aF="_mergedDefaultProps";function Pg(t,e){let n=aF;if(e)for(const i of e){const s=i.constructor;s&&(n+=":".concat(s.extensionName||s.name))}const r=sT(t,n);return r||(t[n]=AF(t,e||[]))}function AF(t,e){if(!t.prototype)return null;const r=Object.getPrototypeOf(t),i=Pg(r),s=sT(t,"defaultProps")||{},o=iF(s),c=Object.assign(Object.create(null),i,o.defaultProps),h=Object.assign(Object.create(null),i==null?void 0:i[ws],o.propTypes),p=Object.assign(Object.create(null),i==null?void 0:i[Dh],o.deprecatedProps);for(const _ of e){const y=Pg(_.constructor);y&&(Object.assign(c,y),Object.assign(h,y[ws]),Object.assign(p,y[Dh]))}return lF(c,t),cF(c,h),uF(c,p),c[ws]=h,c[Dh]=p,e.length===0&&!bm(t,"_propTypes")&&(t._propTypes=h),c}function lF(t,e){const n=hF(e);Object.defineProperties(t,{id:{writable:!0,value:n}})}function uF(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(r){const i="".concat(this.id,": ").concat(n);for(const s of e[n])bm(this,s)||(this[s]=r);at.deprecated(i,e[n].join("/"))()}})}function cF(t,e){const n={},r={};for(const i in e){const s=e[i],{name:o,value:c}=s;s.async&&(n[o]=c,r[o]=fF(o))}t[ya]=n,t[so]={},Object.defineProperties(t,r)}function fF(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||qE(e)?this[so][t]=e:this[cs][t]=e},get(){if(this[cs]){if(t in this[cs])return this[cs][t]||this[ya][t];if(t in this[so]){const e=this[yf]&&this[yf].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[ya][t]}}return this[ya][t]}}}function bm(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function sT(t,e){return bm(t,e)&&t[e]}function hF(t){const e=t.componentName;return e||at.warn("".concat(t.name,".componentName not specified"))(),e||t.name}let dF=0;class Em{constructor(...e){L(this,"id",void 0),L(this,"props",void 0),L(this,"count",void 0),this.props=oF(this,e),this.id=this.props.id,this.count=dF++}clone(e){const{props:n}=this,r={};for(const i in n[ya])i in n[cs]?r[i]=n[cs][i]:i in n[so]&&(r[i]=n[so][i]);return new this.constructor({...n,...r,...e})}}L(Em,"componentName","Component");L(Em,"defaultProps",{});const gF=Object.freeze({});class pF{constructor(e){L(this,"component",void 0),L(this,"onAsyncPropUpdated",void 0),L(this,"asyncProps",void 0),L(this,"oldProps",void 0),L(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||gF}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){this.component=e[yf]||this.component;const n=e[cs]||{},r=e[so]||e,i=e[ya]||{};for(const s in n){const o=n[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o),n[s]=this.getAsyncProp(s)}for(const s in r){const o=r[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if(typeof n=="string"&&(n=this._fetch(e,n)),n instanceof Promise){this._watchPromise(e,n);return}if(qE(n)){this._resolveAsyncIterable(e,n);return}this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const r=this.asyncProps[e];return n===r.resolvedValue||n===r.lastValue?!1:(r.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const r=this.asyncProps[e];r&&(n=this._postProcessValue(r,n),r.resolvedValue=n,r.pendingLoadCount++,r.resolvedLoadCount=r.pendingLoadCount)}_setAsyncPropValue(e,n,r){const i=this.asyncProps[e];i&&r>=i.resolvedLoadCount&&n!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=n,i.resolvedLoadCount=r,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const r=this.asyncProps[e];if(r){r.pendingLoadCount++;const i=r.pendingLoadCount;n.then(s=>{this.component&&(s=this._postProcessValue(r,s),this._setAsyncPropValue(e,s,i),this._onResolve(e,s))}).catch(s=>{this._onError(e,s)})}}async _resolveAsyncIterable(e,n){if(e!=="data"){this._setPropValue(e,n);return}const r=this.asyncProps[e];if(!r)return;r.pendingLoadCount++;const i=r.pendingLoadCount;let s=[],o=0;for await(const c of n){if(!this.component)return;const{dataTransform:h}=this.component.props;h?s=h(c,s):s=s.concat(c),Object.defineProperty(s,"__diff",{enumerable:!1,value:[{startRow:o,endRow:s.length}]}),o=s.length,this._setAsyncPropValue(e,s,i)}this._onResolve(e,s)}_postProcessValue(e,n){const r=e.type;return r&&this.component&&(r.release&&r.release(e.resolvedValue,r,this.component),r.transform)?r.transform(n,r,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const i=this.component&&this.component.props[ws];this.asyncProps[e]={type:i&&i[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class mF extends pF{constructor({attributeManager:e,layer:n}){super(n),L(this,"attributeManager",void 0),L(this,"needsRedraw",void 0),L(this,"needsUpdate",void 0),L(this,"subLayers",void 0),L(this,"usesPickingColorCache",void 0),L(this,"hasPickingBuffer",void 0),L(this,"changeFlags",void 0),L(this,"viewport",void 0),L(this,"uniformTransitions",void 0),L(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,n){const r=this.layer,i=r==null?void 0:r.props.fetch;return i?i(n,{propName:e,layer:r}):super._fetch(e,n)}_onResolve(e,n){const r=this.layer;if(r){const i=r.props.onDataLoad;e==="data"&&i&&i(n,{propName:e,layer:r})}}_onError(e,n){const r=this.layer;r&&r.raiseError(n,"loading ".concat(e," of ").concat(this.layer))}}const vF="layer.changeFlag",yF="layer.initialize",_F="layer.update",wF="layer.finalize",bF="layer.matched",Ry=2**24-1,EF=Object.freeze([]),TF=lu(({oldViewport:t,viewport:e})=>t.equals(e));let Kr=new Uint8ClampedArray(0);const xF={data:{type:"data",value:EF,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:r,loadOptions:i,signal:s})=>{const{resourceManager:o}=n.context;if(i=i||n.getLoadOptions(),r=r||n.props.loaders,s){var c;i={...i,fetch:{...(c=i)===null||c===void 0?void 0:c.fetch,signal:s}}}let h=o.contains(t);return!h&&!i&&(o.add({resourceId:t,data:Af(t,r),persistent:!1}),h=!0),h?o.subscribe({resourceId:t,onChange:p=>{var _;return(_=n.internalState)===null||_===void 0?void 0:_.reloadAsyncProp(e,p)},consumerId:n.id,requestId:e}):Af(t,r,i)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:ft.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class hi extends Em{constructor(...e){super(...e),L(this,"internalState",null),L(this,"lifecycle",Qo.NO_STATE),L(this,"context",void 0),L(this,"state",void 0),L(this,"parent",null)}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){const e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}project(e){cn(this.internalState);const n=this.internalState.viewport||this.context.viewport,r=zE(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,s,o]=gm(r,n.pixelProjectionMatrix);return e.length===2?[i,s]:[i,s,o]}unproject(e){return cn(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){cn(this.internalState);const r=this.internalState.viewport||this.context.viewport;return WO(e,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const n of this.getModels())n.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===ft.DEFAULT||e===ft.LNGLAT||e===ft.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){cn(e instanceof Uint8Array);const[n,r,i]=e;return n+r*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:ZD(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return(e=this.getAttributeManager())===null||e===void 0?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){for(const n of this.props.extensions)e=JD(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:r}=e.changeFlags;if(r&&n)if(Array.isArray(r))for(const i of r)n.invalidateAll(i);else n.invalidateAll();if(n){const{props:i}=e,s=this.internalState.hasPickingBuffer,o=Number.isInteger(i.highlightedObjectIndex)||i.pickable||i.extensions.some(c=>c.getNeedsPickingBuffer.call(this,c));if(s!==o){this.internalState.hasPickingBuffer=o;const{pickingColors:c,instancePickingColors:h}=n.attributes,p=c||h;p&&(o&&p.constant&&(p.constant=!1,n.invalidate(p.id)),!p.value&&!o&&(p.constant=!0,p.value=[0,0,0]))}}}finalizeState(e){for(const r of this.getModels())r.delete();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e)}getPickingInfo({info:e,mode:n,sourceLayer:r}){const{index:i}=e;return i>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[i]),e}raiseError(e,n){var r,i;if(n&&(e=new Error("".concat(n,": ").concat(e.message),{cause:e})),!((r=(i=this.props).onError)!==null&&r!==void 0&&r.call(i,e))){var s,o;(s=this.context)===null||s===void 0||(o=s.onError)===null||o===void 0||o.call(s,e,this)}}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)===null||e===void 0?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!TF({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();n&&(e==="all"?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(const n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,r=this.getNumInstances(),i=this.getStartIndices();e.update({data:n.data,numInstances:r,startIndices:i,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const s=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),r=Object.create(this.props);for(const i in n)Object.defineProperty(r,i,{value:n[i]});return r}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const r=Math.floor(Kr.length/3);if(this.internalState.usesPickingColorCache=!0,r<n){n>Ry&&at.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Kr=Vl.allocate(Kr,n,{size:3,copy:!0,maxCount:Math.max(n,Ry)});const i=Math.floor(Kr.length/3),s=[];for(let o=r;o<i;o++)this.encodePickingColor(o,s),Kr[o*3+0]=s[0],Kr[o*3+1]=s[1],Kr[o*3+2]=s[2]}e.value=Kr.subarray(0,n*3)}_setModelAttributes(e,n){const r=this.getAttributeManager(),i=e.userData.excludeAttributes||{},s=r.getShaderAttributes(n,i);e.setAttributes(s)}disablePickingIndex(e){const n=this.props.data;if(!("attributes"in n)){this._disablePickingIndex(e);return}const{pickingColors:r,instancePickingColors:i}=this.getAttributeManager().attributes,s=r||i,o=s&&n.attributes&&n.attributes[s.id];if(o&&o.value){const c=o.value,h=this.encodePickingColor(e);for(let p=0;p<n.length;p++){const _=s.getVertexOffset(p);c[_]===h[0]&&c[_+1]===h[1]&&c[_+2]===h[2]&&this._disablePickingIndex(p)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,i=n||r;if(!i)return;const s=i.getVertexOffset(e),o=i.getVertexOffset(e+1);i.buffer.subData({data:new Uint8Array(o-s),offset:s})}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;r&&(this.internalState.usesPickingColorCache&&r.value.buffer!==Kr.buffer&&(r.value=Kr.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0}))}_initialize(){cn(!this.internalState),cn(Number.isFinite(this.props.coordinateSystem)),xn(yF,this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new mF({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(at.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new VD(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){xn(bF,this,this===e);const{state:n,internalState:r}=e;this!==e&&(this.internalState=r,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(xn(_F,this,e),!e)return;const n=this.props,r=this.context,i=this.internalState,s=r.viewport,o=this._updateUniformTransition();i.propsInTransition=o,r.viewport=i.viewport||s,this.props=o;try{const c=this._getUpdateParams(),h=this.getModels();if(r.gl)this.updateState(c);else try{this.updateState(c)}catch{}for(const _ of this.props.extensions)_.updateState.call(this,c,_);const p=this.getModels()[0]!==h[0];this._postUpdate(c,p)}finally{r.viewport=s,this.props=n,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){xn(wF,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({moduleParameters:e=null,uniforms:n={},parameters:r={}}){this._updateAttributeTransition();const i=this.props,s=this.context;this.props=this.internalState.propsInTransition||i;const o=this.props.opacity;n.opacity=Math.pow(o,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:c}=this.props,h=c&&c(n)||[0,0];Ri(s.gl,{polygonOffset:h}),jr(s.gl,r,()=>{const p={moduleParameters:e,uniforms:n,parameters:r,context:s};for(const _ of this.props.extensions)_.draw.call(this,p,_);this.draw(p)})}finally{this.props=i}}getChangeFlags(){var e;return(e=this.internalState)===null||e===void 0?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const i in e)if(e[i]){let s=!1;switch(i){case"dataChanged":const o=e[i],c=n[i];o&&Array.isArray(c)&&(n.dataChanged=Array.isArray(o)?c.concat(o):o,s=!0);default:n[i]||(n[i]=e[i],s=!0)}s&&xn(vF,this,i,e)}const r=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=r,n.somethingChanged=r||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){const r=GD(e,n);if(r.updateTriggersChanged)for(const s in r.updateTriggersChanged)r.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(r.transitionsChanged)for(const s in r.transitionsChanged){var i;this.internalState.uniformTransitions.add(s,n[s],e[s],(i=e.transitions)===null||i===void 0?void 0:i[s])}return this.setChangeFlags(r)}validateProps(){jD(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:r}=this.props;e.picked&&typeof r=="function"&&(n.pickingHighlightColor=r(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new FD(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:r,oldProps:i}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:s}=this.state;s==null||s.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:c,highlightColor:h}=r;if(n||i.autoHighlight!==o||i.highlightedObjectIndex!==c||i.highlightColor!==h){const p={};o||(p.pickingSelectedColor=null),Array.isArray(h)&&(p.pickingHighlightColor=h),(n||c!==i.highlightedObjectIndex)&&(p.pickingSelectedColor=Number.isFinite(c)&&c>=0?this.encodePickingColor(c):null),this.setModuleParameters(p)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id;const r=this.getAttributeManager(),i=r?r.getNeedsRedraw(e):!1;if(n=n||i,n)for(const s of this.props.extensions)s.onNeedsRedraw.call(this,s);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}L(hi,"defaultProps",xF);L(hi,"layerName","Layer");const SF="compositeLayer.renderLayers";class Tm extends hi{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id&&(e.object=n.__source.object,e.index=n.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,n){return n&&n.length}getSubLayerClass(e,n){const{_subLayerProps:r}=this.props;return r&&r[e]&&r[e].type||n}getSubLayerRow(e,n,r){return e.__source={parent:this,object:n,index:r},e}getSubLayerAccessor(e){if(typeof e=="function"){const n={index:-1,data:this.props.data,target:[]};return(r,i)=>r&&r.__source?(n.index=r.__source.index,e(r.__source.object,n)):e(r,i)}return e}getSubLayerProps(e={}){var n;const{opacity:r,pickable:i,visible:s,parameters:o,getPolygonOffset:c,highlightedObjectIndex:h,autoHighlight:p,highlightColor:_,coordinateSystem:y,coordinateOrigin:w,wrapLongitude:T,positionFormat:S,modelMatrix:k,extensions:U,fetch:x,operation:C,_subLayerProps:P}=this.props,B={id:"",updateTriggers:{},opacity:r,pickable:i,visible:s,parameters:o,getPolygonOffset:c,highlightedObjectIndex:h,autoHighlight:p,highlightColor:_,coordinateSystem:y,coordinateOrigin:w,wrapLongitude:T,positionFormat:S,modelMatrix:k,extensions:U,fetch:x,operation:C},z=P&&e.id&&P[e.id],H=z&&z.updateTriggers,X=e.id||"sublayer";if(z){const Q=this.props[ws],te=e.type?e.type._propTypes:{};for(const ie in z){const ne=te[ie]||Q[ie];ne&&ne.type==="accessor"&&(z[ie]=this.getSubLayerAccessor(z[ie]))}}Object.assign(B,e,z),B.id="".concat(this.props.id,"-").concat(X),B.updateTriggers={all:(n=this.props.updateTriggers)===null||n===void 0?void 0:n.all,...e.updateTriggers,...H};for(const Q of U){const te=Q.getSubLayerProps.call(this,Q);te&&Object.assign(B,te,{updateTriggers:Object.assign(B.updateTriggers,te.updateTriggers)})}return B}_updateAutoHighlight(e){for(const n of this.getSubLayers())n.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,n){let r=this.internalState.subLayers;const i=!r||this.needsUpdate();if(i){const s=this.renderLayers();r=mm(s,Boolean),this.internalState.subLayers=r}xn(SF,this,i,r);for(const s of r)s.parent=this}}L(Tm,"layerName","CompositeLayer");const CF=typeof window<"u"?pe.useLayoutEffect:pe.useEffect;function bf(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}const MF={position:"absolute",zIndex:-1};function oT(t,e){if(typeof t=="function")return t(e);if(Array.isArray(t))return t.map(n=>oT(n,e));if(o0(t)){if(LF(t))return e.style=MF,pe.cloneElement(t,e);if(PF(t))return pe.cloneElement(t,e)}return t}function o0(t){return t&&typeof t=="object"&&"type"in t||!1}function LF(t){var e;return(e=t.props)===null||e===void 0?void 0:e.mapStyle}function PF(t){const e=t.type;return e&&e.deckGLViewProps}function kg(t){if(typeof t=="function")return pe.createElement(ja,{},t);if(Array.isArray(t))return t.map(kg);if(o0(t)){if(t.type===pe.Fragment)return kg(t.props.children);if(bf(t.type,ja))return t}return t}function kF({children:t,layers:e=[],views:n=null}){const r=[],i=[],s={};return pe.Children.forEach(kg(t),o=>{if(o0(o)){const c=o.type;if(bf(c,hi)){const h=IF(c,o.props);i.push(h)}else r.push(o);if(bf(c,ja)&&c!==ja&&o.props.id){const h=new c(o.props);s[h.id]=h}}else o&&r.push(o)}),Object.keys(s).length>0&&(Array.isArray(n)?n.forEach(o=>{s[o.id]=o}):n&&(s[n.id]=n),n=Object.values(s)),e=i.length>0?[...i,...e]:e,{layers:e,children:r,views:n}}function IF(t,e){const n={},r=t.defaultProps||{};for(const i in e)r[i]!==e[i]&&(n[i]=e[i]);return new t(n)}function RF({children:t,deck:e,ContextProvider:n}){const{viewManager:r}=e||{};if(!r||!r.views.length)return[];const i={},s=r.views[0].id;for(const o of t){let c=s,h=o;o0(o)&&bf(o.type,ja)&&(c=o.props.id||s,h=o.props.children);const p=r.getViewport(c),_=r.getViewState(c);if(p){_.padding=p.padding;const{x:y,y:w,width:T,height:S}=p;h=oT(h,{x:y,y:w,width:T,height:S,viewport:p,viewState:_}),i[c]||(i[c]={viewport:p,children:[]}),i[c].children.push(h)}}return Object.keys(i).map(o=>{const{viewport:c,children:h}=i[o],{x:p,y:_,width:y,height:w}=c,T={position:"absolute",left:p,top:_,width:y,height:w},S="view-".concat(o),k=pe.createElement("div",{key:S,id:S,style:T},...h);if(n){const U={viewport:c,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:x=>{x.viewId=o,e._onViewStateChange(x)}};return pe.createElement(n,{key:S,value:U},k)}return k})}const OF={mixBlendMode:null};function DF({width:t,height:e,style:n}){const r={position:"absolute",zIndex:0,left:0,top:0,width:t,height:e},i={left:0,top:0};if(n)for(const s in n)s in OF?i[s]=n[s]:r[s]=n[s];return{containerStyle:r,canvasStyle:i}}function FF(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}function aT(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}function BF(t,e,n){const r=new e({...n,_customRender:i=>{t.redrawReason=i;const s=r.getViewports();t.lastRenderedViewports!==s?t.forceUpdate():aT(t)}});return r}const AT=pe.forwardRef((t,e)=>{const[n,r]=pe.useState(0),s=pe.useRef({control:null,version:n,forceUpdate:()=>r(z=>z+1)}).current,o=pe.useRef(null),c=pe.useRef(null),h=pe.useMemo(()=>kF(t),[t.layers,t.views,t.children]);let p=!0;const _=z=>{var H;return p&&t.viewState?(s.viewStateUpdateRequested=z,null):(s.viewStateUpdateRequested=null,(H=t.onViewStateChange)===null||H===void 0?void 0:H.call(t,z))},y=z=>{if(p)s.interactionStateUpdateRequested=z;else{var H;s.interactionStateUpdateRequested=null,(H=t.onInteractionStateChange)===null||H===void 0||H.call(t,z)}},w=pe.useMemo(()=>{const z={...t,style:null,width:"100%",height:"100%",parent:o.current,canvas:c.current,layers:h.layers,views:h.views,onViewStateChange:_,onInteractionStateChange:y};return delete z._customRender,s.deck&&s.deck.setProps(z),z},[t]);pe.useEffect(()=>{const z=t.Deck||s0;return s.deck=BF(s,z,{...w,parent:o.current,canvas:c.current}),()=>{var H;return(H=s.deck)===null||H===void 0?void 0:H.finalize()}},[]),CF(()=>{aT(s);const{viewStateUpdateRequested:z,interactionStateUpdateRequested:H}=s;z&&_(z),H&&y(H)}),pe.useImperativeHandle(e,()=>FF(s),[]);const T=s.deck&&s.deck.isInitialized?s.deck.getViewports():void 0,{ContextProvider:S,width:k,height:U,id:x,style:C}=t,{containerStyle:P,canvasStyle:B}=pe.useMemo(()=>DF({width:k,height:U,style:C}),[k,U,C]);if(!s.viewStateUpdateRequested&&s.lastRenderedViewports===T||s.version!==n){s.lastRenderedViewports=T,s.version=n;const z=RF({children:h.children,deck:s.deck,ContextProvider:S}),H=pe.createElement("canvas",{key:"canvas",id:x||"deckgl-overlay",ref:c,style:B});s.control=pe.createElement("div",{id:"".concat(x||"deckgl","-wrapper"),ref:o,style:P},[H,z])}return p=!1,s.control});AT.defaultProps=s0.defaultProps;function xm(t){const{children:e}=t;return e&&e.length>0}function el(t){const{zoom:e}=t;return e!==void 0}function Uh(t){return t&&!!t.aggregate}var Aa;(function(t){t.ALL="ALL",t.INCOMING="INCOMING",t.OUTGOING="OUTGOING",t.BETWEEN="BETWEEN"})(Aa||(Aa={}));function Ut(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}function rA(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function cu(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ls(){}var oo=.7,Ga=1/oo,_a="\\s*([+-]?\\d+)\\s*",jl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ai="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",NF=/^#([0-9a-f]{3,8})$/,UF=new RegExp(`^rgb\\(${_a},${_a},${_a}\\)$`),zF=new RegExp(`^rgb\\(${ai},${ai},${ai}\\)$`),VF=new RegExp(`^rgba\\(${_a},${_a},${_a},${jl}\\)$`),jF=new RegExp(`^rgba\\(${ai},${ai},${ai},${jl}\\)$`),GF=new RegExp(`^hsl\\(${jl},${ai},${ai}\\)$`),HF=new RegExp(`^hsla\\(${jl},${ai},${ai},${jl}\\)$`),Oy={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rA(Ls,ao,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Dy,formatHex:Dy,formatHex8:WF,formatHsl:QF,formatRgb:Fy,toString:Fy});function Dy(){return this.rgb().formatHex()}function WF(){return this.rgb().formatHex8()}function QF(){return lT(this).formatHsl()}function Fy(){return this.rgb().formatRgb()}function ao(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=NF.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?By(e):n===3?new rn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ac(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ac(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=UF.exec(t))?new rn(e[1],e[2],e[3],1):(e=zF.exec(t))?new rn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=VF.exec(t))?Ac(e[1],e[2],e[3],e[4]):(e=jF.exec(t))?Ac(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=GF.exec(t))?zy(e[1],e[2]/100,e[3]/100,1):(e=HF.exec(t))?zy(e[1],e[2]/100,e[3]/100,e[4]):Oy.hasOwnProperty(t)?By(Oy[t]):t==="transparent"?new rn(NaN,NaN,NaN,0):null}function By(t){return new rn(t>>16&255,t>>8&255,t&255,1)}function Ac(t,e,n,r){return r<=0&&(t=e=n=NaN),new rn(t,e,n,r)}function Sm(t){return t instanceof Ls||(t=ao(t)),t?(t=t.rgb(),new rn(t.r,t.g,t.b,t.opacity)):new rn}function Gl(t,e,n,r){return arguments.length===1?Sm(t):new rn(t,e,n,r??1)}function rn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}rA(rn,Gl,cu(Ls,{brighter(t){return t=t==null?Ga:Math.pow(Ga,t),new rn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?oo:Math.pow(oo,t),new rn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new rn(Ks(this.r),Ks(this.g),Ks(this.b),Ef(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ny,formatHex:Ny,formatHex8:YF,formatRgb:Uy,toString:Uy}));function Ny(){return`#${$s(this.r)}${$s(this.g)}${$s(this.b)}`}function YF(){return`#${$s(this.r)}${$s(this.g)}${$s(this.b)}${$s((isNaN(this.opacity)?1:this.opacity)*255)}`}function Uy(){const t=Ef(this.opacity);return`${t===1?"rgb(":"rgba("}${Ks(this.r)}, ${Ks(this.g)}, ${Ks(this.b)}${t===1?")":`, ${t})`}`}function Ef(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ks(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function $s(t){return t=Ks(t),(t<16?"0":"")+t.toString(16)}function zy(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Br(t,e,n,r)}function lT(t){if(t instanceof Br)return new Br(t.h,t.s,t.l,t.opacity);if(t instanceof Ls||(t=ao(t)),!t)return new Br;if(t instanceof Br)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,c=s-i,h=(s+i)/2;return c?(e===s?o=(n-r)/c+(n<r)*6:n===s?o=(r-e)/c+2:o=(e-n)/c+4,c/=h<.5?s+i:2-s-i,o*=60):c=h>0&&h<1?0:o,new Br(o,c,h,t.opacity)}function $F(t,e,n,r){return arguments.length===1?lT(t):new Br(t,e,n,r??1)}function Br(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}rA(Br,$F,cu(Ls,{brighter(t){return t=t==null?Ga:Math.pow(Ga,t),new Br(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?oo:Math.pow(oo,t),new Br(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new rn(zh(t>=240?t-240:t+120,i,r),zh(t,i,r),zh(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Br(Vy(this.h),lc(this.s),lc(this.l),Ef(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ef(this.opacity);return`${t===1?"hsl(":"hsla("}${Vy(this.h)}, ${lc(this.s)*100}%, ${lc(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Vy(t){return t=(t||0)%360,t<0?t+360:t}function lc(t){return Math.max(0,Math.min(1,t||0))}function zh(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const uT=Math.PI/180,cT=180/Math.PI,Tf=18,fT=.96422,hT=1,dT=.82521,gT=4/29,wa=6/29,pT=3*wa*wa,XF=wa*wa*wa;function mT(t){if(t instanceof Ai)return new Ai(t.l,t.a,t.b,t.opacity);if(t instanceof xi)return vT(t);t instanceof rn||(t=Sm(t));var e=Hh(t.r),n=Hh(t.g),r=Hh(t.b),i=Vh((.2225045*e+.7168786*n+.0606169*r)/hT),s,o;return e===n&&n===r?s=o=i:(s=Vh((.4360747*e+.3850649*n+.1430804*r)/fT),o=Vh((.0139322*e+.0971045*n+.7141733*r)/dT)),new Ai(116*i-16,500*(s-i),200*(i-o),t.opacity)}function ZF(t,e,n,r){return arguments.length===1?mT(t):new Ai(t,e,n,r??1)}function Ai(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}rA(Ai,ZF,cu(Ls,{brighter(t){return new Ai(this.l+Tf*(t??1),this.a,this.b,this.opacity)},darker(t){return new Ai(this.l-Tf*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=fT*jh(e),t=hT*jh(t),n=dT*jh(n),new rn(Gh(3.1338561*e-1.6168667*t-.4906146*n),Gh(-.9787684*e+1.9161415*t+.033454*n),Gh(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function Vh(t){return t>XF?Math.pow(t,1/3):t/pT+gT}function jh(t){return t>wa?t*t*t:pT*(t-gT)}function Gh(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Hh(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function KF(t){if(t instanceof xi)return new xi(t.h,t.c,t.l,t.opacity);if(t instanceof Ai||(t=mT(t)),t.a===0&&t.b===0)return new xi(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*cT;return new xi(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function a0(t,e,n,r){return arguments.length===1?KF(t):new xi(t,e,n,r??1)}function xi(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function vT(t){if(isNaN(t.h))return new Ai(t.l,0,0,t.opacity);var e=t.h*uT;return new Ai(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}rA(xi,a0,cu(Ls,{brighter(t){return new xi(this.h,this.c,this.l+Tf*(t??1),this.opacity)},darker(t){return new xi(this.h,this.c,this.l-Tf*(t??1),this.opacity)},rgb(){return vT(this).rgb()}}));var yT=-.14861,Cm=1.78277,Mm=-.29227,A0=-.90649,Hl=1.97294,jy=Hl*A0,Gy=Hl*Cm,Hy=Cm*Mm-A0*yT;function qF(t){if(t instanceof qs)return new qs(t.h,t.s,t.l,t.opacity);t instanceof rn||(t=Sm(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Hy*r+jy*e-Gy*n)/(Hy+jy-Gy),s=r-i,o=(Hl*(n-i)-Mm*s)/A0,c=Math.sqrt(o*o+s*s)/(Hl*i*(1-i)),h=c?Math.atan2(o,s)*cT-120:NaN;return new qs(h<0?h+360:h,c,i,t.opacity)}function xs(t,e,n,r){return arguments.length===1?qF(t):new qs(t,e,n,r??1)}function qs(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}rA(qs,xs,cu(Ls,{brighter(t){return t=t==null?Ga:Math.pow(Ga,t),new qs(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?oo:Math.pow(oo,t),new qs(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*uT,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new rn(255*(e+n*(yT*r+Cm*i)),255*(e+n*(Mm*r+A0*i)),255*(e+n*(Hl*r)),this.opacity)}}));function JF(t,e,n,r,i){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*n+(1+3*t+3*s-3*o)*r+o*i)/6}function _T(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],s=t[r+1],o=r>0?t[r-1]:2*i-s,c=r<e-1?t[r+2]:2*s-i;return JF((n-r/e)*e,o,i,s,c)}}const l0=t=>()=>t;function wT(t,e){return function(n){return t+n*e}}function e9(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function t9(t,e){var n=e-t;return n?wT(t,n>180||n<-180?n-360*Math.round(n/360):n):l0(isNaN(t)?e:t)}function n9(t){return(t=+t)==1?ba:function(e,n){return n-e?e9(e,n,t):l0(isNaN(e)?n:e)}}function ba(t,e){var n=e-t;return n?wT(t,n):l0(isNaN(t)?e:t)}const Wy=function t(e){var n=n9(e);function r(i,s){var o=n((i=Gl(i)).r,(s=Gl(s)).r),c=n(i.g,s.g),h=n(i.b,s.b),p=ba(i.opacity,s.opacity);return function(_){return i.r=o(_),i.g=c(_),i.b=h(_),i.opacity=p(_),i+""}}return r.gamma=t,r}(1);function r9(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),s=new Array(n),o,c;for(o=0;o<n;++o)c=Gl(e[o]),r[o]=c.r||0,i[o]=c.g||0,s[o]=c.b||0;return r=t(r),i=t(i),s=t(s),c.opacity=1,function(h){return c.r=r(h),c.g=i(h),c.b=s(h),c+""}}}var bT=r9(_T);function i9(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function s9(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function o9(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=u0(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(c){for(o=0;o<r;++o)s[o]=i[o](c);return s}}function a9(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function xf(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function A9(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=u0(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Ig=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wh=new RegExp(Ig.source,"g");function l9(t){return function(){return t}}function u9(t){return function(e){return t(e)+""}}function c9(t,e){var n=Ig.lastIndex=Wh.lastIndex=0,r,i,s,o=-1,c=[],h=[];for(t=t+"",e=e+"";(r=Ig.exec(t))&&(i=Wh.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),c[o]?c[o]+=s:c[++o]=s),(r=r[0])===(i=i[0])?c[o]?c[o]+=i:c[++o]=i:(c[++o]=null,h.push({i:o,x:xf(r,i)})),n=Wh.lastIndex;return n<e.length&&(s=e.slice(n),c[o]?c[o]+=s:c[++o]=s),c.length<2?h[0]?u9(h[0].x):l9(e):(e=h.length,function(p){for(var _=0,y;_<e;++_)c[(y=h[_]).i]=y.x(p);return c.join("")})}function u0(t,e){var n=typeof e,r;return e==null||n==="boolean"?l0(e):(n==="number"?xf:n==="string"?(r=ao(e))?(e=r,Wy):c9:e instanceof ao?Wy:e instanceof Date?a9:s9(e)?i9:Array.isArray(e)?o9:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?A9:xf)(t,e)}function ET(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function TT(t){return function e(n){n=+n;function r(i,s){var o=t((i=xs(i)).h,(s=xs(s)).h),c=ba(i.s,s.s),h=ba(i.l,s.l),p=ba(i.opacity,s.opacity);return function(_){return i.h=o(_),i.s=c(_),i.l=h(Math.pow(_,n)),i.opacity=p(_),i+""}}return r.gamma=e,r}(1)}TT(t9);var xT=TT(ba);const on=t=>bT(t[t.length-1]);var ST=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Ut);on(ST);var CT=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Ut);on(CT);var MT=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Ut);on(MT);var LT=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Ut);on(LT);var PT=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Ut);on(PT);var kT=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Ut);on(kT);var IT=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Ut);on(IT);var RT=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Ut);on(RT);var OT=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Ut);on(OT);var DT=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Ut);on(DT);var FT=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Ut);on(FT);var BT=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Ut);on(BT);var NT=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Ut);on(NT);var UT=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Ut);on(UT);var zT=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Ut);on(zT);var VT=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Ut);on(VT);var jT=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Ut);on(jT);var GT=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Ut);on(GT);var f9=xT(xs(-100,.75,.35),xs(80,1.5,.8)),h9=xT(xs(260,.75,.35),xs(80,1.5,.8));xs();function c0(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const d9=c0(Ut("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var g9=c0(Ut("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),p9=c0(Ut("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),m9=c0(Ut("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Ea(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Sf(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function HT(t){let e,n,r;t.length!==2?(e=Ea,n=(c,h)=>Ea(t(c),h),r=(c,h)=>t(c)-h):(e=t===Ea||t===Sf?t:v9,n=t,r=t);function i(c,h,p=0,_=c.length){if(p<_){if(e(h,h)!==0)return _;do{const y=p+_>>>1;n(c[y],h)<0?p=y+1:_=y}while(p<_)}return p}function s(c,h,p=0,_=c.length){if(p<_){if(e(h,h)!==0)return _;do{const y=p+_>>>1;n(c[y],h)<=0?p=y+1:_=y}while(p<_)}return p}function o(c,h,p=0,_=c.length){const y=i(c,h,p,_-1);return y>p&&r(c[y-1],h)>-r(c[y],h)?y-1:y}return{left:i,center:o,right:s}}function v9(){return 0}function y9(t){return t===null?NaN:+t}const _9=HT(Ea),w9=_9.left;HT(y9).center;function Rg(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class b9 extends Map{constructor(e,n=x9){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Qy(this,e))}has(e){return super.has(Qy(this,e))}set(e,n){return super.set(E9(this,e),n)}delete(e){return super.delete(T9(this,e))}}function Qy({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function E9({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function T9({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function x9(t){return t!==null&&typeof t=="object"?t.valueOf():t}function S9(t){return t}function WT(t,e,...n){return C9(t,S9,e,n)}function C9(t,e,n,r){return function i(s,o){if(o>=r.length)return n(s);const c=new b9,h=r[o++];let p=-1;for(const _ of s){const y=h(_,++p,s),w=c.get(y);w?w.push(_):c.set(y,[_])}for(const[_,y]of c)c.set(_,i(y,o));return e(c)}(t,0)}function QT(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function YT(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function Ic(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function M9(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function $T(t){let e,n,r;t.length!==2?(e=Ic,n=(c,h)=>Ic(t(c),h),r=(c,h)=>t(c)-h):(e=t===Ic||t===M9?t:L9,n=t,r=t);function i(c,h,p=0,_=c.length){if(p<_){if(e(h,h)!==0)return _;do{const y=p+_>>>1;n(c[y],h)<0?p=y+1:_=y}while(p<_)}return p}function s(c,h,p=0,_=c.length){if(p<_){if(e(h,h)!==0)return _;do{const y=p+_>>>1;n(c[y],h)<=0?p=y+1:_=y}while(p<_)}return p}function o(c,h,p=0,_=c.length){const y=i(c,h,p,_-1);return y>p&&r(c[y-1],h)>-r(c[y],h)?y-1:y}return{left:i,center:o,right:s}}function L9(){return 0}function P9(t){return t===null?NaN:+t}const k9=$T(Ic),I9=k9.right;$T(P9).center;var Og=Math.sqrt(50),Dg=Math.sqrt(10),Fg=Math.sqrt(2);function R9(t,e,n){var r,i=-1,s,o,c;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(s=t,t=e,e=s),(c=XT(t,e,n))===0||!isFinite(c))return[];if(c>0){let h=Math.round(t/c),p=Math.round(e/c);for(h*c<t&&++h,p*c>e&&--p,o=new Array(s=p-h+1);++i<s;)o[i]=(h+i)*c}else{c=-c;let h=Math.round(t*c),p=Math.round(e*c);for(h/c<t&&++h,p/c>e&&--p,o=new Array(s=p-h+1);++i<s;)o[i]=(h+i)/c}return r&&o.reverse(),o}function XT(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,i);return i>=0?(s>=Og?10:s>=Dg?5:s>=Fg?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(s>=Og?10:s>=Dg?5:s>=Fg?2:1)}function O9(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/i;return s>=Og?i*=10:s>=Dg?i*=5:s>=Fg&&(i*=2),e<t?-i:i}function ZT(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function KT(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}function D9(t){return function(){return t}}function F9(t){return+t}var Yy=[0,1];function Er(t){return t}function Bg(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:D9(isNaN(e)?NaN:.5)}function B9(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function N9(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=Bg(i,r),s=n(o,s)):(r=Bg(r,i),s=n(s,o)),function(c){return s(r(c))}}function U9(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Bg(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(c){var h=I9(t,c,1,r)-1;return s[h](i[h](c))}}function qT(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function JT(){var t=Yy,e=Yy,n=u0,r,i,s,o=Er,c,h,p;function _(){var w=Math.min(t.length,e.length);return o!==Er&&(o=B9(t[0],t[w-1])),c=w>2?U9:N9,h=p=null,y}function y(w){return w==null||isNaN(w=+w)?s:(h||(h=c(t.map(r),e,n)))(r(o(w)))}return y.invert=function(w){return o(i((p||(p=c(e,t.map(r),xf)))(w)))},y.domain=function(w){return arguments.length?(t=Array.from(w,F9),_()):t.slice()},y.range=function(w){return arguments.length?(e=Array.from(w),_()):e.slice()},y.rangeRound=function(w){return e=Array.from(w),n=ET,_()},y.clamp=function(w){return arguments.length?(o=w?!0:Er,_()):o!==Er},y.interpolate=function(w){return arguments.length?(n=w,_()):n},y.unknown=function(w){return arguments.length?(s=w,y):s},function(w,T){return r=w,i=T,_()}}function z9(){return JT()(Er,Er)}function V9(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Cf(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Ha(t){return t=Cf(Math.abs(t)),t?t[1]:NaN}function j9(t,e){return function(n,r){for(var i=n.length,s=[],o=0,c=t[0],h=0;i>0&&c>0&&(h+c+1>r&&(c=Math.max(1,r-h)),s.push(n.substring(i-=c,i+c)),!((h+=c+1)>r));)c=t[o=(o+1)%t.length];return s.reverse().join(e)}}function G9(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var H9=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Mf(t){if(!(e=H9.exec(t)))throw new Error("invalid format: "+t);var e;return new Lm({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Mf.prototype=Lm.prototype;function Lm(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Lm.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function W9(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var e4;function Q9(t,e){var n=Cf(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(e4=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Cf(t,Math.max(0,e+s-1))[0]}function $y(t,e){var n=Cf(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Xy={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:V9,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>$y(t*100,e),r:$y,s:Q9,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Zy(t){return t}var Ky=Array.prototype.map,qy=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Y9(t){var e=t.grouping===void 0||t.thousands===void 0?Zy:j9(Ky.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?Zy:G9(Ky.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"":t.minus+"",h=t.nan===void 0?"NaN":t.nan+"";function p(y){y=Mf(y);var w=y.fill,T=y.align,S=y.sign,k=y.symbol,U=y.zero,x=y.width,C=y.comma,P=y.precision,B=y.trim,z=y.type;z==="n"?(C=!0,z="g"):Xy[z]||(P===void 0&&(P=12),B=!0,z="g"),(U||w==="0"&&T==="=")&&(U=!0,w="0",T="=");var H=k==="$"?n:k==="#"&&/[boxX]/.test(z)?"0"+z.toLowerCase():"",X=k==="$"?r:/[%p]/.test(z)?o:"",Q=Xy[z],te=/[defgprs%]/.test(z);P=P===void 0?6:/[gprs]/.test(z)?Math.max(1,Math.min(21,P)):Math.max(0,Math.min(20,P));function ie(ne){var fe=H,ce=X,xe,Pe,Be;if(z==="c")ce=Q(ne)+ce,ne="";else{ne=+ne;var gt=ne<0||1/ne<0;if(ne=isNaN(ne)?h:Q(Math.abs(ne),P),B&&(ne=W9(ne)),gt&&+ne==0&&S!=="+"&&(gt=!1),fe=(gt?S==="("?S:c:S==="-"||S==="("?"":S)+fe,ce=(z==="s"?qy[8+e4/3]:"")+ce+(gt&&S==="("?")":""),te){for(xe=-1,Pe=ne.length;++xe<Pe;)if(Be=ne.charCodeAt(xe),48>Be||Be>57){ce=(Be===46?i+ne.slice(xe+1):ne.slice(xe))+ce,ne=ne.slice(0,xe);break}}}C&&!U&&(ne=e(ne,1/0));var me=fe.length+ne.length+ce.length,Le=me<x?new Array(x-me+1).join(w):"";switch(C&&U&&(ne=e(Le+ne,Le.length?x-ce.length:1/0),Le=""),T){case"<":ne=fe+ne+ce+Le;break;case"=":ne=fe+Le+ne+ce;break;case"^":ne=Le.slice(0,me=Le.length>>1)+fe+ne+ce+Le.slice(me);break;default:ne=Le+fe+ne+ce;break}return s(ne)}return ie.toString=function(){return y+""},ie}function _(y,w){var T=p((y=Mf(y),y.type="f",y)),S=Math.max(-8,Math.min(8,Math.floor(Ha(w)/3)))*3,k=Math.pow(10,-S),U=qy[8+S/3];return function(x){return T(k*x)+U}}return{format:p,formatPrefix:_}}var uc,t4,n4;$9({thousands:",",grouping:[3],currency:["$",""]});function $9(t){return uc=Y9(t),t4=uc.format,n4=uc.formatPrefix,uc}function X9(t){return Math.max(0,-Ha(Math.abs(t)))}function Z9(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ha(e)/3)))*3-Ha(Math.abs(t)))}function K9(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ha(e)-Ha(t))+1}function q9(t,e,n,r){var i=O9(t,e,n),s;switch(r=Mf(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=Z9(i,o))&&(r.precision=s),n4(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=K9(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=X9(i))&&(r.precision=s-(r.type==="%")*2);break}}return t4(r)}function Pm(t){var e=t.domain;return t.ticks=function(n){var r=e();return R9(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return q9(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],c=r[s],h,p,_=10;for(c<o&&(p=o,o=c,c=p,p=i,i=s,s=p);_-- >0;){if(p=XT(o,c,n),p===h)return r[i]=o,r[s]=c,e(r);if(p>0)o=Math.floor(o/p)*p,c=Math.ceil(c/p)*p;else if(p<0)o=Math.ceil(o*p)/p,c=Math.floor(c*p)/p;else break;h=p}return t},t}function r4(){var t=z9();return t.copy=function(){return qT(t,r4())},ZT.apply(t,arguments),Pm(t)}function Jy(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function J9(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function eB(t){return t<0?-t*t:t*t}function i4(t){var e=t(Er,Er),n=1;function r(){return n===1?t(Er,Er):n===.5?t(J9,eB):t(Jy(n),Jy(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Pm(e)}function km(){var t=i4(JT());return t.copy=function(){return qT(t,km()).exponent(t.exponent())},ZT.apply(t,arguments),t}function tB(){return km.apply(null,arguments).exponent(.5)}var Qh=new Date,Yh=new Date;function zi(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=function(s){return t(s=new Date(+s)),s},i.ceil=function(s){return t(s=new Date(s-1)),e(s,1),t(s),s},i.round=function(s){var o=i(s),c=i.ceil(s);return s-o<c-s?o:c},i.offset=function(s,o){return e(s=new Date(+s),o==null?1:Math.floor(o)),s},i.range=function(s,o,c){var h=[],p;if(s=i.ceil(s),c=c==null?1:Math.floor(c),!(s<o)||!(c>0))return h;do h.push(p=new Date(+s)),e(s,c),t(s);while(p<s&&s<o);return h},i.filter=function(s){return zi(function(o){if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},function(o,c){if(o>=o)if(c<0)for(;++c<=0;)for(;e(o,-1),!s(o););else for(;--c>=0;)for(;e(o,1),!s(o););})},n&&(i.count=function(s,o){return Qh.setTime(+s),Yh.setTime(+o),t(Qh),t(Yh),Math.floor(n(Qh,Yh))},i.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?function(o){return r(o)%s===0}:function(o){return i.count(0,o)%s===0}):i}),i}const nB=1e3,Im=nB*60,rB=Im*60,Rm=rB*24,s4=Rm*7;var Om=zi(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Im)/Rm,t=>t.getDate()-1);Om.range;function yo(t){return zi(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Im)/s4})}var o4=yo(0),Lf=yo(1),iB=yo(2),sB=yo(3),Wa=yo(4),oB=yo(5),aB=yo(6);o4.range;Lf.range;iB.range;sB.range;Wa.range;oB.range;aB.range;var Ao=zi(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Ao.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:zi(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};Ao.range;var Dm=zi(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/Rm},function(t){return t.getUTCDate()-1});Dm.range;function _o(t){return zi(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/s4})}var a4=_o(0),Pf=_o(1),AB=_o(2),lB=_o(3),Qa=_o(4),uB=_o(5),cB=_o(6);a4.range;Pf.range;AB.range;lB.range;Qa.range;uB.range;cB.range;var lo=zi(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});lo.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:zi(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};lo.range;function $h(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Xh(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function VA(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function fB(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,c=t.months,h=t.shortMonths,p=jA(i),_=GA(i),y=jA(s),w=GA(s),T=jA(o),S=GA(o),k=jA(c),U=GA(c),x=jA(h),C=GA(h),P={a:gt,A:me,b:Le,B:Ge,c:null,d:s_,e:s_,f:DB,g:WB,G:YB,H:IB,I:RB,j:OB,L:A4,m:FB,M:BB,p:dt,q:lt,Q:A_,s:l_,S:NB,u:UB,U:zB,V:VB,w:jB,W:GB,x:null,X:null,y:HB,Y:QB,Z:$B,"%":a_},B={a:Lr,A:Ln,b:gi,B:zn,c:null,d:o_,e:o_,f:qB,g:AN,G:uN,H:XB,I:ZB,j:KB,L:u4,m:JB,M:eN,p:xt,q:Pr,Q:A_,s:l_,S:tN,u:nN,U:rN,V:iN,w:sN,W:oN,x:null,X:null,y:aN,Y:lN,Z:cN,"%":a_},z={a:ie,A:ne,b:fe,B:ce,c:xe,d:r_,e:r_,f:MB,g:n_,G:t_,H:i_,I:i_,j:TB,L:CB,m:EB,M:xB,p:te,q:bB,Q:PB,s:kB,S:SB,u:mB,U:vB,V:yB,w:pB,W:_B,x:Pe,X:Be,y:n_,Y:t_,Z:wB,"%":LB};P.x=H(n,P),P.X=H(r,P),P.c=H(e,P),B.x=H(n,B),B.X=H(r,B),B.c=H(e,B);function H(de,Ie){return function(Xe){var Ae=[],Rt=-1,nt=0,zt=de.length,vt,Mt,kr;for(Xe instanceof Date||(Xe=new Date(+Xe));++Rt<zt;)de.charCodeAt(Rt)===37&&(Ae.push(de.slice(nt,Rt)),(Mt=e_[vt=de.charAt(++Rt)])!=null?vt=de.charAt(++Rt):Mt=vt==="e"?" ":"0",(kr=Ie[vt])&&(vt=kr(Xe,Mt)),Ae.push(vt),nt=Rt+1);return Ae.push(de.slice(nt,Rt)),Ae.join("")}}function X(de,Ie){return function(Xe){var Ae=VA(1900,void 0,1),Rt=Q(Ae,de,Xe+="",0),nt,zt;if(Rt!=Xe.length)return null;if("Q"in Ae)return new Date(Ae.Q);if("s"in Ae)return new Date(Ae.s*1e3+("L"in Ae?Ae.L:0));if(Ie&&!("Z"in Ae)&&(Ae.Z=0),"p"in Ae&&(Ae.H=Ae.H%12+Ae.p*12),Ae.m===void 0&&(Ae.m="q"in Ae?Ae.q:0),"V"in Ae){if(Ae.V<1||Ae.V>53)return null;"w"in Ae||(Ae.w=1),"Z"in Ae?(nt=Xh(VA(Ae.y,0,1)),zt=nt.getUTCDay(),nt=zt>4||zt===0?Pf.ceil(nt):Pf(nt),nt=Dm.offset(nt,(Ae.V-1)*7),Ae.y=nt.getUTCFullYear(),Ae.m=nt.getUTCMonth(),Ae.d=nt.getUTCDate()+(Ae.w+6)%7):(nt=$h(VA(Ae.y,0,1)),zt=nt.getDay(),nt=zt>4||zt===0?Lf.ceil(nt):Lf(nt),nt=Om.offset(nt,(Ae.V-1)*7),Ae.y=nt.getFullYear(),Ae.m=nt.getMonth(),Ae.d=nt.getDate()+(Ae.w+6)%7)}else("W"in Ae||"U"in Ae)&&("w"in Ae||(Ae.w="u"in Ae?Ae.u%7:"W"in Ae?1:0),zt="Z"in Ae?Xh(VA(Ae.y,0,1)).getUTCDay():$h(VA(Ae.y,0,1)).getDay(),Ae.m=0,Ae.d="W"in Ae?(Ae.w+6)%7+Ae.W*7-(zt+5)%7:Ae.w+Ae.U*7-(zt+6)%7);return"Z"in Ae?(Ae.H+=Ae.Z/100|0,Ae.M+=Ae.Z%100,Xh(Ae)):$h(Ae)}}function Q(de,Ie,Xe,Ae){for(var Rt=0,nt=Ie.length,zt=Xe.length,vt,Mt;Rt<nt;){if(Ae>=zt)return-1;if(vt=Ie.charCodeAt(Rt++),vt===37){if(vt=Ie.charAt(Rt++),Mt=z[vt in e_?Ie.charAt(Rt++):vt],!Mt||(Ae=Mt(de,Xe,Ae))<0)return-1}else if(vt!=Xe.charCodeAt(Ae++))return-1}return Ae}function te(de,Ie,Xe){var Ae=p.exec(Ie.slice(Xe));return Ae?(de.p=_.get(Ae[0].toLowerCase()),Xe+Ae[0].length):-1}function ie(de,Ie,Xe){var Ae=T.exec(Ie.slice(Xe));return Ae?(de.w=S.get(Ae[0].toLowerCase()),Xe+Ae[0].length):-1}function ne(de,Ie,Xe){var Ae=y.exec(Ie.slice(Xe));return Ae?(de.w=w.get(Ae[0].toLowerCase()),Xe+Ae[0].length):-1}function fe(de,Ie,Xe){var Ae=x.exec(Ie.slice(Xe));return Ae?(de.m=C.get(Ae[0].toLowerCase()),Xe+Ae[0].length):-1}function ce(de,Ie,Xe){var Ae=k.exec(Ie.slice(Xe));return Ae?(de.m=U.get(Ae[0].toLowerCase()),Xe+Ae[0].length):-1}function xe(de,Ie,Xe){return Q(de,e,Ie,Xe)}function Pe(de,Ie,Xe){return Q(de,n,Ie,Xe)}function Be(de,Ie,Xe){return Q(de,r,Ie,Xe)}function gt(de){return o[de.getDay()]}function me(de){return s[de.getDay()]}function Le(de){return h[de.getMonth()]}function Ge(de){return c[de.getMonth()]}function dt(de){return i[+(de.getHours()>=12)]}function lt(de){return 1+~~(de.getMonth()/3)}function Lr(de){return o[de.getUTCDay()]}function Ln(de){return s[de.getUTCDay()]}function gi(de){return h[de.getUTCMonth()]}function zn(de){return c[de.getUTCMonth()]}function xt(de){return i[+(de.getUTCHours()>=12)]}function Pr(de){return 1+~~(de.getUTCMonth()/3)}return{format:function(de){var Ie=H(de+="",P);return Ie.toString=function(){return de},Ie},parse:function(de){var Ie=X(de+="",!1);return Ie.toString=function(){return de},Ie},utcFormat:function(de){var Ie=H(de+="",B);return Ie.toString=function(){return de},Ie},utcParse:function(de){var Ie=X(de+="",!0);return Ie.toString=function(){return de},Ie}}}var e_={"-":"",_:" ",0:"0"},an=/^\s*\d+/,hB=/^%/,dB=/[\\^$*+?|[\]().{}]/g;function At(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function gB(t){return t.replace(dB,"\\$&")}function jA(t){return new RegExp("^(?:"+t.map(gB).join("|")+")","i")}function GA(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function pB(t,e,n){var r=an.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function mB(t,e,n){var r=an.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function vB(t,e,n){var r=an.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function yB(t,e,n){var r=an.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function _B(t,e,n){var r=an.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function t_(t,e,n){var r=an.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function n_(t,e,n){var r=an.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function wB(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function bB(t,e,n){var r=an.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function EB(t,e,n){var r=an.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function r_(t,e,n){var r=an.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function TB(t,e,n){var r=an.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function i_(t,e,n){var r=an.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function xB(t,e,n){var r=an.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function SB(t,e,n){var r=an.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function CB(t,e,n){var r=an.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function MB(t,e,n){var r=an.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function LB(t,e,n){var r=hB.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function PB(t,e,n){var r=an.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function kB(t,e,n){var r=an.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function s_(t,e){return At(t.getDate(),e,2)}function IB(t,e){return At(t.getHours(),e,2)}function RB(t,e){return At(t.getHours()%12||12,e,2)}function OB(t,e){return At(1+Om.count(Ao(t),t),e,3)}function A4(t,e){return At(t.getMilliseconds(),e,3)}function DB(t,e){return A4(t,e)+"000"}function FB(t,e){return At(t.getMonth()+1,e,2)}function BB(t,e){return At(t.getMinutes(),e,2)}function NB(t,e){return At(t.getSeconds(),e,2)}function UB(t){var e=t.getDay();return e===0?7:e}function zB(t,e){return At(o4.count(Ao(t)-1,t),e,2)}function l4(t){var e=t.getDay();return e>=4||e===0?Wa(t):Wa.ceil(t)}function VB(t,e){return t=l4(t),At(Wa.count(Ao(t),t)+(Ao(t).getDay()===4),e,2)}function jB(t){return t.getDay()}function GB(t,e){return At(Lf.count(Ao(t)-1,t),e,2)}function HB(t,e){return At(t.getFullYear()%100,e,2)}function WB(t,e){return t=l4(t),At(t.getFullYear()%100,e,2)}function QB(t,e){return At(t.getFullYear()%1e4,e,4)}function YB(t,e){var n=t.getDay();return t=n>=4||n===0?Wa(t):Wa.ceil(t),At(t.getFullYear()%1e4,e,4)}function $B(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+At(e/60|0,"0",2)+At(e%60,"0",2)}function o_(t,e){return At(t.getUTCDate(),e,2)}function XB(t,e){return At(t.getUTCHours(),e,2)}function ZB(t,e){return At(t.getUTCHours()%12||12,e,2)}function KB(t,e){return At(1+Dm.count(lo(t),t),e,3)}function u4(t,e){return At(t.getUTCMilliseconds(),e,3)}function qB(t,e){return u4(t,e)+"000"}function JB(t,e){return At(t.getUTCMonth()+1,e,2)}function eN(t,e){return At(t.getUTCMinutes(),e,2)}function tN(t,e){return At(t.getUTCSeconds(),e,2)}function nN(t){var e=t.getUTCDay();return e===0?7:e}function rN(t,e){return At(a4.count(lo(t)-1,t),e,2)}function c4(t){var e=t.getUTCDay();return e>=4||e===0?Qa(t):Qa.ceil(t)}function iN(t,e){return t=c4(t),At(Qa.count(lo(t),t)+(lo(t).getUTCDay()===4),e,2)}function sN(t){return t.getUTCDay()}function oN(t,e){return At(Pf.count(lo(t)-1,t),e,2)}function aN(t,e){return At(t.getUTCFullYear()%100,e,2)}function AN(t,e){return t=c4(t),At(t.getUTCFullYear()%100,e,2)}function lN(t,e){return At(t.getUTCFullYear()%1e4,e,4)}function uN(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Qa(t):Qa.ceil(t),At(t.getUTCFullYear()%1e4,e,4)}function cN(){return"+0000"}function a_(){return"%"}function A_(t){return+t}function l_(t){return Math.floor(+t/1e3)}var Ho,Dn,Yo;fN({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function fN(t){return Ho=fB(t),Dn=Ho.format,Yo=Ho.parse,Ho.utcFormat,Ho.utcParse,Ho}function f4(){var t=0,e=1,n,r,i,s,o=Er,c=!1,h;function p(y){return y==null||isNaN(y=+y)?h:o(i===0?.5:(y=(s(y)-n)*i,c?Math.max(0,Math.min(1,y)):y))}p.domain=function(y){return arguments.length?([t,e]=y,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),p):[t,e]},p.clamp=function(y){return arguments.length?(c=!!y,p):c},p.interpolator=function(y){return arguments.length?(o=y,p):o};function _(y){return function(w){var T,S;return arguments.length?([T,S]=w,o=y(T,S),p):[o(0),o(1)]}}return p.range=_(u0),p.rangeRound=_(ET),p.unknown=function(y){return arguments.length?(h=y,p):h},function(y){return s=y,n=y(t),r=y(e),i=n===r?0:1/(r-n),p}}function h4(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function d4(){var t=Pm(f4()(Er));return t.copy=function(){return h4(t,d4())},KT.apply(t,arguments)}function g4(){var t=i4(f4());return t.copy=function(){return h4(t,g4()).exponent(t.exponent())},KT.apply(t,arguments)}const hN="#fff",dN=.4,Fm="rgba(240,240,240,0.5)",gN=[Fm,"#137CBD"],pN="rgba(220,220,220,0.5)",mN=[Fm,"#f6654e"],vN=[Fm,"#00a9cc"],yN=[255,255,255,255];function _N(t){return Math.round(t*255)}function u_(t,e){const n=ao(t);if(!n)return console.warn("Invalid color: ",t),`rgba(255, 255, 255, ${e})`;const r=n.rgb();return`rgba(${r.r}, ${r.g}, ${r.b}, ${e})`}function li(t){if(Array.isArray(t))return t;const e=ao(t);if(!e)return console.warn("Invalid color: ",t),yN;const n=e.rgb();return[Math.floor(n.r),Math.floor(n.g),Math.floor(n.b),_N(e.opacity)]}function Jr(t,e){return t?li(t):typeof e=="string"?li(e):e}const en=t=>t[t.length-1];var Ng;(function(t){t.primary="#162d3c"})(Ng||(Ng={}));const c_=20,Wo=t=>YT(0,c_+1).map(e=>t(e/c_)).reverse(),Ug="rgba(240,240,240,0.5)",wN=[Ug,Ng.primary],bN=["#f7feae","#b7e6a5","#7ccba2","#46aea0","#089099","#00718b","#045275"],EN=["#d3f2a3","#97e196","#6cc08b","#4c9b82","#217a79","#105965","#074050"],p4=["#d1eeea","#a8dbd9","#85c4c9","#68abb8","#4f90a6","#3b738f","#2a5674"],TN=p4,m4={Blues:en(NT),BluGrn:["#c4e6c3","#96d2a4","#6dbc90","#4da284","#36877a","#266b6e","#1d4f60"],BluYl:bN,BrwnYl:["#ede5cf","#e0c2a2","#d39c83","#c1766f","#a65461","#813753","#541f3f"],BuGn:en(ST),BuPu:en(CT),Burg:["#ffc6c4","#f4a3a8","#e38191","#cc607d","#ad466c","#8b3058","#672044"],BurgYl:["#fbe6c5","#f5ba98","#ee8a82","#dc7176","#c8586c","#9c3f5d","#70284a"],Cool:Wo(h9),DarkMint:["#d2fbd4","#a5dbc2","#7bbcb0","#559c9e","#3a7c89","#235d72","#123f5a"],Emrld:EN,GnBu:en(MT),Grayish:wN,Greens:en(UT),Greys:en(zT),Inferno:Wo(p9),Magenta:["#f3cbd3","#eaa9bd","#dd88ac","#ca699d","#b14d8e","#91357d","#6c2167"],Magma:Wo(g9),Mint:["#e4f1e1","#b4d9cc","#89c0b6","#63a6a0","#448c8a","#287274","#0d585f"],Oranges:en(GT),OrRd:en(LT),OrYel:["#ecda9a","#efc47e","#f3ad6a","#f7945d","#f97b57","#f66356","#ee4d5a"],Peach:["#fde0c5","#facba6","#f8b58b","#f59e72","#f2855d","#ef6a4c","#eb4a40"],Plasma:Wo(m9),PinkYl:["#fef6b5","#ffdd9a","#ffc285","#ffa679","#fa8a76","#f16d7a","#e15383"],PuBu:en(kT),PuBuGn:en(PT),PuRd:en(IT),Purp:["#f3e0f7","#e4c7f1","#d1afe8","#b998dd","#9f82ce","#826dba","#63589f"],Purples:en(VT),PurpOr:["#f9ddda","#f2b9c4","#e597b9","#ce78b3","#ad5fad","#834ba0","#573b88"],RdPu:en(RT),RedOr:["#f6d2a9","#f5b78e","#f19c7c","#ea8171","#dd686c","#ca5268","#b13f64"],Reds:en(jT),Sunset:["#f3e79b","#fac484","#f8a07e","#eb7f86","#ce6693","#a059a0","#5c53a5"],SunsetDark:["#fcde9c","#faa476","#f0746e","#e34f6f","#dc3977","#b9257a","#7c1d6f"],Teal:p4,TealGrn:["#b0f2bc","#89e8ac","#67dba5","#4cc8a3","#38b2a3","#2c98a0","#257d98"],Viridis:Wo(d9),Warm:Wo(f9),YlGn:en(DT),YlGnBu:en(OT),YlOrBr:en(FT),YlOrRd:en(BT)},xN="#f52020",SN="#17a5be",CN={negative:{flows:{scheme:[Ug,SN]}},positive:{flows:{scheme:[Ug,xN]}},locationAreas:{outline:"rgba(92,112,128,0.5)",normal:"rgba(220,220,220,0.5)"},outlineColor:"rgb(230,233,237)"};function MN(t){return v4(!1,t.colorScheme,t.darkMode,t.fadeEnabled,t.fadeOpacityEnabled,t.fadeAmount,t.animationEnabled)}function v4(t,e,n,r,i,s,o){if(t)return CN;let c;Array.isArray(e)?c=e:(c=e&&m4[e]||TN,n&&(c=c.slice().reverse()));{const h=YT(0,Math.max(10,c.length)),p=h.length-1,_=d4(bT(c)).domain([0,p]);if(!r||s===0)c=h.map((y,w)=>_(w));else{const y=km().exponent(1.5).domain([p,0]).range([0,2*s/100]);c=h.map((w,T)=>{const S=_(T),k=y(T);if(S==null||k==null)return"#000";const U=a0(S);return U.l=n?U.l-U.l*k:U.l+(100-U.l)*k,U.c=U.c-U.c*(k/4),i&&(U.opacity=U.opacity*(1-k)),U.toString()})}}return{darkMode:n,flows:{scheme:c},locationCircles:{outgoing:n?"#000":"#fff"},outlineColor:n?"#000":"rgba(255, 255, 255, 0.5)"}}function LN(t){const e=_T,n=t.length;let r=new Array(n),i=new Array(n),s=new Array(n),o=new Array(n),c,h;for(c=0;c<n;++c)h=Gl(t[c]),r[c]=h.r||0,i[c]=h.g||0,s[c]=h.b||0,o[c]=h.opacity||0;return r=e(r),i=e(i),s=e(s),o=e(o),function(p){return h.r=r(p),h.g=i(p),h.b=s(p),h.opacity=o(p),h+""}}function Zh(t,e,n){const r=g4(LN(e)).exponent(.3333333333333333).domain(t);return i=>li(r(i))}function PN(t,e,n){const r=e?e[0]:0,i=e?e[1]:0;if(y4(t)){const o=Zh([0,i],t.positive.flows.scheme),c=Zh([0,r],t.negative.flows.scheme);return h=>h>=0?o(h):c(h)}const s=Zh([0,i||0],t.flows.scheme);return o=>s(o)}function kN(t){return t.positive!==void 0}function y4(t){return t.positive!==void 0}function IN(t,e){const n=t&&t.normal||pN,r=a0(n),i=li(n);return{normal:i,connected:Jr(t&&t.connected,i),highlighted:Jr(t&&t.highlighted,u_(r[e?"brighter":"darker"](1).toString(),.5)),selected:Jr(t&&t.selected,u_(r[e?"brighter":"darker"](2).toString(),.8)),outline:Jr(t&&t.outline,li(r[e?"brighter":"darker"](4).toString()))}}function zg(t,e,n){var h,p;const r=t&&t.flows&&t.flows.scheme||e,i=a0(r[r.length-1]),s=Jr(t&&t.flows&&t.flows.highlighted,li(i[n?"brighter":"darker"](.7).toString())),o=Jr((h=t==null?void 0:t.locationCircles)==null?void 0:h.empty,n?"#000":"#fff"),c=Jr(t&&t.locationCircles&&t.locationCircles.inner,i.toString());return{flows:{scheme:r,highlighted:s},locationCircles:{inner:c,outgoing:Jr(t&&t.locationCircles&&t.locationCircles.outgoing,n?"#000":"#fff"),incoming:Jr(t&&t.locationCircles&&t.locationCircles.incoming,i[n?"brighter":"darker"](1.25).toString()),highlighted:Jr(t&&t.locationCircles&&t.locationCircles.highlighted,s),empty:o,outlineEmptyMix:((p=t==null?void 0:t.locationCircles)==null?void 0:p.outlineEmptyMix)??.4}}}function _4(t){const e=!!(t&&t.darkMode);return{darkMode:e,locationAreas:IN(t&&t.locationAreas,e),outlineColor:li(t&&t.outlineColor||hN),dimmedOpacity:t&&t.dimmedOpacity!=null?t.dimmedOpacity:dN}}function RN(t){const e=_4(t);return{...e,...zg(t,gN,e.darkMode)}}function ON(t){const e=_4(t);return{...e,positive:zg(t&&t.positive,mN,e.darkMode),negative:zg(t&&t.negative,vN,e.darkMode)}}const f_=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],Kh=1,HA=8;class f0{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[n,r]=new Uint8Array(e,0,2);if(n!==219)throw new Error("Data does not appear to be in a KDBush format.");const i=r>>4;if(i!==Kh)throw new Error(`Got v${i} data when expected v${Kh}.`);const s=f_[r&15];if(!s)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(e,2,1),[c]=new Uint32Array(e,4,1);return new f0(c,o,s,e)}constructor(e,n=64,r=Float64Array,i){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const s=f_.indexOf(this.ArrayType),o=e*2*this.ArrayType.BYTES_PER_ELEMENT,c=e*this.IndexArrayType.BYTES_PER_ELEMENT,h=(8-c%8)%8;if(s<0)throw new Error(`Unexpected typed array class: ${r}.`);i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,HA,e),this.coords=new this.ArrayType(this.data,HA+c+h,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(HA+o+c+h),this.ids=new this.IndexArrayType(this.data,HA,e),this.coords=new this.ArrayType(this.data,HA+c+h,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(Kh<<4)+s]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=e)}add(e,n){const r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=e,this.coords[this._pos++]=n,r}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return Vg(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,n,r,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:s,coords:o,nodeSize:c}=this,h=[0,s.length-1,0],p=[];for(;h.length;){const _=h.pop()||0,y=h.pop()||0,w=h.pop()||0;if(y-w<=c){for(let U=w;U<=y;U++){const x=o[2*U],C=o[2*U+1];x>=e&&x<=r&&C>=n&&C<=i&&p.push(s[U])}continue}const T=w+y>>1,S=o[2*T],k=o[2*T+1];S>=e&&S<=r&&k>=n&&k<=i&&p.push(s[T]),(_===0?e<=S:n<=k)&&(h.push(w),h.push(T-1),h.push(1-_)),(_===0?r>=S:i>=k)&&(h.push(T+1),h.push(y),h.push(1-_))}return p}within(e,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:s,nodeSize:o}=this,c=[0,i.length-1,0],h=[],p=r*r;for(;c.length;){const _=c.pop()||0,y=c.pop()||0,w=c.pop()||0;if(y-w<=o){for(let U=w;U<=y;U++)h_(s[2*U],s[2*U+1],e,n)<=p&&h.push(i[U]);continue}const T=w+y>>1,S=s[2*T],k=s[2*T+1];h_(S,k,e,n)<=p&&h.push(i[T]),(_===0?e-r<=S:n-r<=k)&&(c.push(w),c.push(T-1),c.push(1-_)),(_===0?e+r>=S:n+r>=k)&&(c.push(T+1),c.push(y),c.push(1-_))}return h}}function Vg(t,e,n,r,i,s){if(i-r<=n)return;const o=r+i>>1;w4(t,e,o,r,i,s),Vg(t,e,n,r,o-1,1-s),Vg(t,e,n,o+1,i,1-s)}function w4(t,e,n,r,i,s){for(;i>r;){if(i-r>600){const p=i-r+1,_=n-r+1,y=Math.log(p),w=.5*Math.exp(2*y/3),T=.5*Math.sqrt(y*w*(p-w)/p)*(_-p/2<0?-1:1),S=Math.max(r,Math.floor(n-_*w/p+T)),k=Math.min(i,Math.floor(n+(p-_)*w/p+T));w4(t,e,n,S,k,s)}const o=e[2*n+s];let c=r,h=i;for(WA(t,e,r,n),e[2*i+s]>o&&WA(t,e,r,i);c<h;){for(WA(t,e,c,h),c++,h--;e[2*c+s]<o;)c++;for(;e[2*h+s]>o;)h--}e[2*r+s]===o?WA(t,e,r,h):(h++,WA(t,e,h,i)),h<=n&&(r=h+1),n<=h&&(i=h-1)}}function WA(t,e,n,r){qh(t,n,r),qh(e,2*n,2*r),qh(e,2*n+1,2*r+1)}function qh(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function h_(t,e,n,r){const i=t-n,s=e-r;return i*i+s*s}var kf="NOT_FOUND";function DN(t){var e;return{get:function(r){return e&&t(e.key,r)?e.value:kf},put:function(r,i){e={key:r,value:i}},getEntries:function(){return e?[e]:[]},clear:function(){e=void 0}}}function FN(t,e){var n=[];function r(c){var h=n.findIndex(function(_){return e(c,_.key)});if(h>-1){var p=n[h];return h>0&&(n.splice(h,1),n.unshift(p)),p.value}return kf}function i(c,h){r(c)===kf&&(n.unshift({key:c,value:h}),n.length>t&&n.pop())}function s(){return n}function o(){n=[]}return{get:r,put:i,getEntries:s,clear:o}}var BN=function(e,n){return e===n};function NN(t){return function(n,r){if(n===null||r===null||n.length!==r.length)return!1;for(var i=n.length,s=0;s<i;s++)if(!t(n[s],r[s]))return!1;return!0}}function b4(t,e){var n=typeof e=="object"?e:{equalityCheck:e},r=n.equalityCheck,i=r===void 0?BN:r,s=n.maxSize,o=s===void 0?1:s,c=n.resultEqualityCheck,h=NN(i),p=o===1?DN(h):FN(o,h);function _(){var y=p.get(arguments);if(y===kf){if(y=t.apply(null,arguments),c){var w=p.getEntries(),T=w.find(function(S){return c(S.value,y)});T&&(y=T.value)}p.put(arguments,y)}return y}return _.clearCache=function(){return p.clear()},_}function UN(t){var e=Array.isArray(t[0])?t[0]:t;if(!e.every(function(r){return typeof r=="function"})){var n=e.map(function(r){return typeof r=="function"?"function "+(r.name||"unnamed")+"()":typeof r}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return e}function E4(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=function(){for(var o=arguments.length,c=new Array(o),h=0;h<o;h++)c[h]=arguments[h];var p=0,_,y={memoizeOptions:void 0},w=c.pop();if(typeof w=="object"&&(y=w,w=c.pop()),typeof w!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof w+"]");var T=y,S=T.memoizeOptions,k=S===void 0?n:S,U=Array.isArray(k)?k:[k],x=UN(c),C=t.apply(void 0,[function(){return p++,w.apply(null,arguments)}].concat(U)),P=t(function(){for(var z=[],H=x.length,X=0;X<H;X++)z.push(x[X].apply(null,arguments));return _=C.apply(null,z),_});return Object.assign(P,{resultFunc:w,memoizedResultFunc:C,dependencies:x,lastResult:function(){return _},recomputations:function(){return p},resetRecomputations:function(){return p=0}}),P};return i}var ze=E4(b4),Bm={exports:{}};Bm.exports;(function(t){(function(e,n,r){function i(h){var p=this,_=c();p.next=function(){var y=2091639*p.s0+p.c*23283064365386963e-26;return p.s0=p.s1,p.s1=p.s2,p.s2=y-(p.c=y|0)},p.c=1,p.s0=_(" "),p.s1=_(" "),p.s2=_(" "),p.s0-=_(h),p.s0<0&&(p.s0+=1),p.s1-=_(h),p.s1<0&&(p.s1+=1),p.s2-=_(h),p.s2<0&&(p.s2+=1),_=null}function s(h,p){return p.c=h.c,p.s0=h.s0,p.s1=h.s1,p.s2=h.s2,p}function o(h,p){var _=new i(h),y=p&&p.state,w=_.next;return w.int32=function(){return _.next()*4294967296|0},w.double=function(){return w()+(w()*2097152|0)*11102230246251565e-32},w.quick=w,y&&(typeof y=="object"&&s(y,_),w.state=function(){return s(_,{})}),w}function c(){var h=4022871197,p=function(_){_=String(_);for(var y=0;y<_.length;y++){h+=_.charCodeAt(y);var w=.02519603282416938*h;h=w>>>0,w-=h,w*=h,h=w>>>0,w-=h,h+=w*4294967296}return(h>>>0)*23283064365386963e-26};return p}n&&n.exports?n.exports=o:this.alea=o})(co,t)})(Bm);var zN=Bm.exports,Nm={exports:{}};Nm.exports;(function(t){(function(e,n,r){function i(c){var h=this,p="";h.x=0,h.y=0,h.z=0,h.w=0,h.next=function(){var y=h.x^h.x<<11;return h.x=h.y,h.y=h.z,h.z=h.w,h.w^=h.w>>>19^y^y>>>8},c===(c|0)?h.x=c:p+=c;for(var _=0;_<p.length+64;_++)h.x^=p.charCodeAt(_)|0,h.next()}function s(c,h){return h.x=c.x,h.y=c.y,h.z=c.z,h.w=c.w,h}function o(c,h){var p=new i(c),_=h&&h.state,y=function(){return(p.next()>>>0)/4294967296};return y.double=function(){do var w=p.next()>>>11,T=(p.next()>>>0)/4294967296,S=(w+T)/(1<<21);while(S===0);return S},y.int32=p.next,y.quick=y,_&&(typeof _=="object"&&s(_,p),y.state=function(){return s(p,{})}),y}n&&n.exports?n.exports=o:this.xor128=o})(co,t)})(Nm);var VN=Nm.exports,Um={exports:{}};Um.exports;(function(t){(function(e,n,r){function i(c){var h=this,p="";h.next=function(){var y=h.x^h.x>>>2;return h.x=h.y,h.y=h.z,h.z=h.w,h.w=h.v,(h.d=h.d+362437|0)+(h.v=h.v^h.v<<4^(y^y<<1))|0},h.x=0,h.y=0,h.z=0,h.w=0,h.v=0,c===(c|0)?h.x=c:p+=c;for(var _=0;_<p.length+64;_++)h.x^=p.charCodeAt(_)|0,_==p.length&&(h.d=h.x<<10^h.x>>>4),h.next()}function s(c,h){return h.x=c.x,h.y=c.y,h.z=c.z,h.w=c.w,h.v=c.v,h.d=c.d,h}function o(c,h){var p=new i(c),_=h&&h.state,y=function(){return(p.next()>>>0)/4294967296};return y.double=function(){do var w=p.next()>>>11,T=(p.next()>>>0)/4294967296,S=(w+T)/(1<<21);while(S===0);return S},y.int32=p.next,y.quick=y,_&&(typeof _=="object"&&s(_,p),y.state=function(){return s(p,{})}),y}n&&n.exports?n.exports=o:this.xorwow=o})(co,t)})(Um);var jN=Um.exports,zm={exports:{}};zm.exports;(function(t){(function(e,n,r){function i(c){var h=this;h.next=function(){var _=h.x,y=h.i,w,T;return w=_[y],w^=w>>>7,T=w^w<<24,w=_[y+1&7],T^=w^w>>>10,w=_[y+3&7],T^=w^w>>>3,w=_[y+4&7],T^=w^w<<7,w=_[y+7&7],w=w^w<<13,T^=w^w<<9,_[y]=T,h.i=y+1&7,T};function p(_,y){var w,T=[];if(y===(y|0))T[0]=y;else for(y=""+y,w=0;w<y.length;++w)T[w&7]=T[w&7]<<15^y.charCodeAt(w)+T[w+1&7]<<13;for(;T.length<8;)T.push(0);for(w=0;w<8&&T[w]===0;++w);for(w==8?T[7]=-1:T[w],_.x=T,_.i=0,w=256;w>0;--w)_.next()}p(h,c)}function s(c,h){return h.x=c.x.slice(),h.i=c.i,h}function o(c,h){c==null&&(c=+new Date);var p=new i(c),_=h&&h.state,y=function(){return(p.next()>>>0)/4294967296};return y.double=function(){do var w=p.next()>>>11,T=(p.next()>>>0)/4294967296,S=(w+T)/(1<<21);while(S===0);return S},y.int32=p.next,y.quick=y,_&&(_.x&&s(_,p),y.state=function(){return s(p,{})}),y}n&&n.exports?n.exports=o:this.xorshift7=o})(co,t)})(zm);var GN=zm.exports,Vm={exports:{}};Vm.exports;(function(t){(function(e,n,r){function i(c){var h=this;h.next=function(){var _=h.w,y=h.X,w=h.i,T,S;return h.w=_=_+1640531527|0,S=y[w+34&127],T=y[w=w+1&127],S^=S<<13,T^=T<<17,S^=S>>>15,T^=T>>>12,S=y[w]=S^T,h.i=w,S+(_^_>>>16)|0};function p(_,y){var w,T,S,k,U,x=[],C=128;for(y===(y|0)?(T=y,y=null):(y=y+"\0",T=0,C=Math.max(C,y.length)),S=0,k=-32;k<C;++k)y&&(T^=y.charCodeAt((k+32)%y.length)),k===0&&(U=T),T^=T<<10,T^=T>>>15,T^=T<<4,T^=T>>>13,k>=0&&(U=U+1640531527|0,w=x[k&127]^=T+U,S=w==0?S+1:0);for(S>=128&&(x[(y&&y.length||0)&127]=-1),S=127,k=4*128;k>0;--k)T=x[S+34&127],w=x[S=S+1&127],T^=T<<13,w^=w<<17,T^=T>>>15,w^=w>>>12,x[S]=T^w;_.w=U,_.X=x,_.i=S}p(h,c)}function s(c,h){return h.i=c.i,h.w=c.w,h.X=c.X.slice(),h}function o(c,h){c==null&&(c=+new Date);var p=new i(c),_=h&&h.state,y=function(){return(p.next()>>>0)/4294967296};return y.double=function(){do var w=p.next()>>>11,T=(p.next()>>>0)/4294967296,S=(w+T)/(1<<21);while(S===0);return S},y.int32=p.next,y.quick=y,_&&(_.X&&s(_,p),y.state=function(){return s(p,{})}),y}n&&n.exports?n.exports=o:this.xor4096=o})(co,t)})(Vm);var HN=Vm.exports,jm={exports:{}};jm.exports;(function(t){(function(e,n,r){function i(c){var h=this,p="";h.next=function(){var y=h.b,w=h.c,T=h.d,S=h.a;return y=y<<25^y>>>7^w,w=w-T|0,T=T<<24^T>>>8^S,S=S-y|0,h.b=y=y<<20^y>>>12^w,h.c=w=w-T|0,h.d=T<<16^w>>>16^S,h.a=S-y|0},h.a=0,h.b=0,h.c=-1640531527,h.d=1367130551,c===Math.floor(c)?(h.a=c/4294967296|0,h.b=c|0):p+=c;for(var _=0;_<p.length+20;_++)h.b^=p.charCodeAt(_)|0,h.next()}function s(c,h){return h.a=c.a,h.b=c.b,h.c=c.c,h.d=c.d,h}function o(c,h){var p=new i(c),_=h&&h.state,y=function(){return(p.next()>>>0)/4294967296};return y.double=function(){do var w=p.next()>>>11,T=(p.next()>>>0)/4294967296,S=(w+T)/(1<<21);while(S===0);return S},y.int32=p.next,y.quick=y,_&&(typeof _=="object"&&s(_,p),y.state=function(){return s(p,{})}),y}n&&n.exports?n.exports=o:this.tychei=o})(co,t)})(jm);var WN=jm.exports,T4={exports:{}};const QN=IS(v5);(function(t){(function(e,n,r){var i=256,s=6,o=52,c="random",h=r.pow(i,s),p=r.pow(2,o),_=p*2,y=i-1,w;function T(B,z,H){var X=[];z=z==!0?{entropy:!0}:z||{};var Q=x(U(z.entropy?[B,P(n)]:B??C(),3),X),te=new S(X),ie=function(){for(var ne=te.g(s),fe=h,ce=0;ne<p;)ne=(ne+ce)*i,fe*=i,ce=te.g(1);for(;ne>=_;)ne/=2,fe/=2,ce>>>=1;return(ne+ce)/fe};return ie.int32=function(){return te.g(4)|0},ie.quick=function(){return te.g(4)/4294967296},ie.double=ie,x(P(te.S),n),(z.pass||H||function(ne,fe,ce,xe){return xe&&(xe.S&&k(xe,te),ne.state=function(){return k(te,{})}),ce?(r[c]=ne,fe):ne})(ie,Q,"global"in z?z.global:this==r,z.state)}function S(B){var z,H=B.length,X=this,Q=0,te=X.i=X.j=0,ie=X.S=[];for(H||(B=[H++]);Q<i;)ie[Q]=Q++;for(Q=0;Q<i;Q++)ie[Q]=ie[te=y&te+B[Q%H]+(z=ie[Q])],ie[te]=z;(X.g=function(ne){for(var fe,ce=0,xe=X.i,Pe=X.j,Be=X.S;ne--;)fe=Be[xe=y&xe+1],ce=ce*i+Be[y&(Be[xe]=Be[Pe=y&Pe+fe])+(Be[Pe]=fe)];return X.i=xe,X.j=Pe,ce})(i)}function k(B,z){return z.i=B.i,z.j=B.j,z.S=B.S.slice(),z}function U(B,z){var H=[],X=typeof B,Q;if(z&&X=="object")for(Q in B)try{H.push(U(B[Q],z-1))}catch{}return H.length?H:X=="string"?B:B+"\0"}function x(B,z){for(var H=B+"",X,Q=0;Q<H.length;)z[y&Q]=y&(X^=z[y&Q]*19)+H.charCodeAt(Q++);return P(z)}function C(){try{var B;return w&&(B=w.randomBytes)?B=B(i):(B=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(B)),P(B)}catch{var z=e.navigator,H=z&&z.plugins;return[+new Date,e,H,e.screen,P(n)]}}function P(B){return String.fromCharCode.apply(0,B)}if(x(r.random(),n),t.exports){t.exports=T;try{w=QN}catch{}}else r["seed"+c]=T})(typeof self<"u"?self:co,[],Math)})(T4);var YN=T4.exports,$N=zN,XN=VN,ZN=jN,KN=GN,qN=HN,JN=WN,wo=YN;wo.alea=$N;wo.xor128=XN;wo.xorwow=ZN;wo.xorshift7=KN;wo.xor4096=qN;wo.tychei=JN;var eU=wo;class jg{constructor(e){this.getLocationId=n=>el(n)?n.id:this.accessors.getLocationId(n),this.getLocationName=n=>{let r;return el(n)&&xm(n)?r=n.name:this.accessors.getLocationName&&(r=this.accessors.getLocationName(n)),r||(r=`${this.getLocationId(n)}`),r},this.getLocationLat=n=>el(n)?n.lat:this.accessors.getLocationLat(n),this.getLocationLon=n=>el(n)?n.lon:this.accessors.getLocationLon(n),this.getFlowOriginId=n=>Uh(n)?n.origin:this.accessors.getFlowOriginId(n),this.getFlowDestId=n=>Uh(n)?n.dest:this.accessors.getFlowDestId(n),this.getFlowMagnitude=n=>Uh(n)?n.count:this.accessors.getFlowMagnitude(n),this.getFlowTime=n=>{const{getFlowTime:r}=this.accessors;return r?r(n):void 0},this.accessors=e}setAccessors(e){this.accessors=e}getFlowmapDataAccessors(){return this.accessors}}function tU(t){const e=new Map,n=new Map,r=new Map;for(const{zoom:y,nodes:w}of t){e.set(y,w);for(const T of w)if(xm(T))n.set(T.id,T);else{const{id:S}=T,k=r.get(S);(k==null||k>y)&&r.set(S,y)}}const[i,s]=Rg(t,y=>y.zoom);if(i==null||s==null)throw new Error("Could not determine minZoom or maxZoom");const o=new Map;for(const y of n.values()){const{zoom:w}=y;let T=o.get(w);T||(T=new Map,o.set(w,T)),c(y,S=>{T==null||T.set(S,y)})}function c(y,w){for(const T of y.children){const S=n.get(T);S?c(S,w):w(T)}}const h=(y,w=s)=>{const T=[],S=(k,U)=>{if(w>k.zoom)for(const x of k.children){const C=n.get(x);C?S(C,U):U.push(x)}else U.push(k.id)};return S(y,T),T};function p(y,w){const T=o.get(w);if(!T)return;const S=T.get(y);return S?S.id:void 0}return{availableZoomLevels:t.map(y=>+y.zoom).sort((y,w)=>Ea(y,w)),getClusterNodesFor:y=>{if(y!==void 0)return e.get(y)},getClusterById:y=>n.get(y),getMinZoomForLocation:y=>r.get(y)||i,expandCluster:h,findClusterFor:p,aggregateFlows:(y,w,{getFlowOriginId:T,getFlowDestId:S,getFlowMagnitude:k},U={})=>{if(w>s)return y;const x=[],C=new Map,P=(z,H)=>`${z}:${H}`,{flowCountsMapReduce:B={map:k,reduce:(z,H)=>(z||0)+H}}=U;for(const z of y){const H=T(z),X=S(z),Q=p(H,w)||H,te=p(X,w)||X,ie=P(Q,te);if(Q===H&&te===X)x.push(z);else{let ne=C.get(ie);ne?ne.count=B.reduce(ne.count,B.map(z)):(ne={origin:Q,dest:te,count:B.map(z),aggregate:!0},x.push(ne),C.set(ie,ne))}}return x}}}function nU(t,{getFlowOriginId:e,getFlowDestId:n,getFlowMagnitude:r}){const i={incoming:new Map,outgoing:new Map};for(const s of t){const o=e(s),c=n(s),h=r(s);i.incoming.set(c,(i.incoming.get(c)||0)+h),i.outgoing.set(o,(i.outgoing.get(o)||0)+h)}return s=>Math.max(Math.abs(i.incoming.get(s)||0),Math.abs(i.outgoing.get(s)||0))}function rU(t,e){if(!t.length)throw new Error("No available zoom levels");return t[Math.min(w9(t,Math.floor(e)),t.length-1)]}const iU={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,makeClusterName:(t,e)=>{},makeClusterId:t=>`{[${t}]}`};function sU(t){const{index:e}=t;return e!=null}function x4(t){const{id:e}=t;return e!=null}function oU(t,e,n,r){const{getLocationLon:i,getLocationLat:s,getLocationId:o}=e,c={...iU,...r},{minZoom:h,maxZoom:p,nodeSize:_,makeClusterName:y,makeClusterId:w}=c,T=new Array(p+1);let S=new Array,k=0;for(const Q of t){const te=i(Q),ie=s(Q);S.push({x:cU(te),y:fU(ie),weight:n(o(Q)),zoom:1/0,index:k,parentId:-1,location:Q}),k++}const U=Q=>{const te=new f0(Q.length,_,Float32Array);for(let ie=0;ie<Q.length;ie++)te.add(Q[ie].x,Q[ie].y);return te.finish(),te.points=Q,te};T[p+1]=U(S);let x=p+1;for(let Q=p;Q>=h;Q--){const te=AU(S,Q,T[x],c);te.length===S.length?(T[Q]=T[x],T[x]=void 0,x=Q,S=te):(x=Q,S=te,T[Q]=U(S))}if(T.length===0)return[];const C=T.map(Q=>Q==null?void 0:Q.points.length),P=QT(C.filter(Q=>Q>0));let B=dU(C)??C.length-1;const z=hU(t,e);if(z<k){const Q=gU(C,te=>te<=z);Q>=0&&(Q<B&&(T[Q+1]=T[B],T.splice(Q+2)),B=Q+1)}const H=Math.min(B,P?C.lastIndexOf(P):B),X=new Array;x=NaN;for(let Q=B;Q>=H;Q--){let te;const ie=T[Q];if(!ie)continue;T[x]&&Q<B&&(te=WT(T[x].points,fe=>fe.map(ce=>ce.id?w(ce.id):o(ce.location)),fe=>fe.parentId));const ne=[];for(const fe of ie.points){const{x:ce,y:xe,numPoints:Pe,location:Be}=fe;if(sU(fe))ne.push({id:o(Be),zoom:Q,lat:s(Be),lon:i(Be)});else if(x4(fe)){const{id:gt}=fe,me=te&&te.get(gt);if(!me){console.warn("Omitting cluster with no children, point:",fe);continue}const Le={id:w(gt),name:y(gt,Pe),zoom:Q,lat:uU(xe),lon:lU(ce),children:me??[]};ne.push(Le)}}X.push({zoom:Q,nodes:ne}),x=Q}return X}function aU(t,e,n,r,i){return{x:t,y:e,zoom:1/0,id:n,parentId:-1,numPoints:r,weight:i}}function AU(t,e,n,r){const i=[],{radius:s,extent:o}=r,c=s/(o*Math.pow(2,e));for(let h=0;h<t.length;h++){const p=t[h];if(p.zoom<=e)continue;p.zoom=e;const _=n.within(p.x,p.y,c);let y=p.weight||1,w=x4(p)?p.numPoints:1,T=p.x*y,S=p.y*y;const k=(h<<5)+(e+1);for(const U of _){const x=n.points[U];if(x.zoom<=e)continue;x.zoom=e;const C=x.weight||1,P=x.numPoints||1;T+=x.x*C,S+=x.y*C,y+=C,w+=P,x.parentId=k}w===1?i.push(p):(p.parentId=k,i.push(aU(T/y,S/y,k,w,y)))}return i}function lU(t){return(t-.5)*360}function uU(t){const e=(180-t*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function cU(t){return t/360+.5}function fU(t){const e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function hU(t,e){const{getLocationLon:n,getLocationLat:r}=e,i=new Map;let s=0;for(const o of t){const c=n(o),h=r(o),p=`${c},${h}`,_=i.get(p);_||s++,i.set(p,_?_+1:1)}return s}function dU(t){let e=-1/0,n;for(let r=0;r<t.length;r++){const i=t[r];typeof i=="number"&&i>e&&(e=i,n=r)}return n}function gU(t,e){for(let n=t.length-1;n>=0;n--)if(e(t[n],n,t))return n;return-1}const pU=(t,e=0)=>{const n=e,r=new wO({...t,width:t.width+n*2,height:t.height+n*2}).getBounds();return[r[0][0],r[0][1],r[1][0],r[1][1]]},mU=t=>{if(t)return r4().range([.025,.5]).domain([0,Math.max.apply(null,t.map(e=>Math.abs(e||0)))])};function vU(t,e,n,r,i){const{getLocationId:s,getLocationName:o,getLocationClusterName:c}=r,h=p=>{const _=n.get(p);return _?o?o(_):s(_)||p:`"${p}"`};for(const p of e)for(const _ of p.nodes)if(xm(_)){const y=t.expandCluster(_);if(y.sort((w,T)=>Sf(i(w),i(T))),c)_.name=c(y);else{const w=y[0],T=y.length===2?y[1]:void 0;_.name=`"${h(w)}" and ${T?`"${h(T)}"`:`${y.length-1} others`}`}}else _.name=h(_.id)}const Jh=new Date,ed=new Date;function Un(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),c=i.ceil(s);return s-o<c-s?o:c},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,c)=>{const h=[];if(s=i.ceil(s),c=c==null?1:Math.floor(c),!(s<o)||!(c>0))return h;let p;do h.push(p=new Date(+s)),e(s,c),t(s);while(p<s&&s<o);return h},i.filter=s=>Un(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,c)=>{if(o>=o)if(c<0)for(;++c<=0;)for(;e(o,-1),!s(o););else for(;--c>=0;)for(;e(o,1),!s(o););}),n&&(i.count=(s,o)=>(Jh.setTime(+s),ed.setTime(+o),t(Jh),t(ed),Math.floor(n(Jh,ed))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const Wl=1e3,uo=Wl*60,Ql=uo*60,If=Ql*24,S4=Un(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Wl)},(t,e)=>(e-t)/Wl,t=>t.getUTCSeconds());S4.range;const C4=Un(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Wl)},(t,e)=>{t.setTime(+t+e*uo)},(t,e)=>(e-t)/uo,t=>t.getMinutes());C4.range;const yU=Un(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*uo)},(t,e)=>(e-t)/uo,t=>t.getUTCMinutes());yU.range;const M4=Un(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Wl-t.getMinutes()*uo)},(t,e)=>{t.setTime(+t+e*Ql)},(t,e)=>(e-t)/Ql,t=>t.getHours());M4.range;const _U=Un(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Ql)},(t,e)=>(e-t)/Ql,t=>t.getUTCHours());_U.range;const L4=Un(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*uo)/If,t=>t.getDate()-1);L4.range;const wU=Un(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/If,t=>t.getUTCDate()-1);wU.range;const bU=Un(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/If,t=>Math.floor(t/If));bU.range;const P4=Un(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());P4.range;const EU=Un(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());EU.range;const Gm=Un(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Gm.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Un(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Gm.range;const k4=Un(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());k4.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Un(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});k4.range;Yo("%Y-%m-%d"),Yo("%Y-%m-%d %H:%M"),Yo("%Y-%m-%d %H:%M:%S"),Yo("%Y"),Yo("%Y-%m");var rs;(function(t){t.SECOND="SECOND",t.MINUTE="MINUTE",t.HOUR="HOUR",t.DAY="DAY",t.MONTH="MONTH",t.YEAR="YEAR"})(rs||(rs={}));Dn(".%L");const TU=Dn(":%S"),xU=Dn("%I:%M"),SU=Dn("%I %p"),CU=Dn("%a %d");Dn("%b %d");const MU=Dn("%b"),LU=Dn("%Y"),hl=[{order:0,key:rs.SECOND,interval:S4,format:TU,formatFull:Dn("%Y-%m-%d %H:%M:%S")},{order:1,key:rs.MINUTE,interval:C4,format:xU,formatFull:Dn("%Y-%m-%d %H:%M")},{order:2,key:rs.HOUR,interval:M4,format:SU,formatFull:Dn("%a %d %b %Y, %I %p")},{order:3,key:rs.DAY,interval:L4,format:CU,formatFull:Dn("%a %d %b %Y")},{order:4,key:rs.MONTH,interval:P4,format:MU,formatFull:Dn("%b %Y")},{order:5,key:rs.YEAR,interval:Gm,format:LU,formatFull:Dn("%Y")}];function d_(t){return hl.find(e=>e.key===t)}function PU(t){return hl.find(e=>e.order===t)}function kU(t){let e;for(const n of hl){const{interval:r}=n;if(r(t)<t)return e||n;e=n}return hl[hl.length-1]}const IU=20;class RU{constructor(e){this.getFlowsFromProps=(n,r)=>r.flows,this.getLocationsFromProps=(n,r)=>r.locations,this.getClusterLevelsFromProps=(n,r)=>r.clusterLevels,this.getMaxTopFlowsDisplayNum=(n,r)=>n.settings.maxTopFlowsDisplayNum,this.getSelectedLocations=(n,r)=>{var i;return(i=n.filter)==null?void 0:i.selectedLocations},this.getLocationFilterMode=(n,r)=>{var i;return(i=n.filter)==null?void 0:i.locationFilterMode},this.getClusteringEnabled=(n,r)=>n.settings.clusteringEnabled,this.getLocationTotalsEnabled=(n,r)=>n.settings.locationTotalsEnabled,this.getLocationLabelsEnabled=(n,r)=>n.settings.locationLabelsEnabled,this.getZoom=(n,r)=>n.viewport.zoom,this.getViewport=(n,r)=>n.viewport,this.getSelectedTimeRange=(n,r)=>{var i;return(i=n.filter)==null?void 0:i.selectedTimeRange},this.getColorScheme=(n,r)=>n.settings.colorScheme,this.getDarkMode=(n,r)=>n.settings.darkMode,this.getFadeEnabled=(n,r)=>n.settings.fadeEnabled,this.getFadeOpacityEnabled=(n,r)=>n.settings.fadeOpacityEnabled,this.getFadeAmount=(n,r)=>n.settings.fadeAmount,this.getAnimate=(n,r)=>n.settings.animationEnabled,this.getInvalidLocationIds=ze(this.getLocationsFromProps,n=>{if(!n)return;const r=[];for(const i of n){const s=this.accessors.getLocationId(i),o=this.accessors.getLocationLon(i),c=this.accessors.getLocationLat(i);(!(-90<=c&&c<=90)||!(-180<=o&&o<=180))&&r.push(s)}return r.length>0?r:void 0}),this.getLocations=ze(this.getLocationsFromProps,this.getInvalidLocationIds,(n,r)=>{if(!n)return;if(!r||r.length===0)return n;const i=new Set(r),s=[];for(const o of n){const c=this.accessors.getLocationId(o);i.has(c)||s.push(o)}return s}),this.getLocationIds=ze(this.getLocations,n=>{if(!n)return;const r=new Set;for(const i of n)r.add(this.accessors.getLocationId(i));return r}),this.getSelectedLocationsSet=ze(this.getSelectedLocations,n=>n&&n.length>0?new Set(n):void 0),this.getSortedFlowsForKnownLocations=ze(this.getFlowsFromProps,this.getLocationIds,(n,r)=>{if(!r||!n)return;const i=[];for(const s of n){const o=this.accessors.getFlowOriginId(s),c=this.accessors.getFlowDestId(s);r.has(o)&&r.has(c)&&i.push(s)}return i.sort((s,o)=>Sf(Math.abs(this.accessors.getFlowMagnitude(s)),Math.abs(this.accessors.getFlowMagnitude(o))))}),this.getActualTimeExtent=ze(this.getSortedFlowsForKnownLocations,n=>{if(!n)return;let r=null,i=null;for(const s of n){const o=this.accessors.getFlowTime(s);o&&((r==null||r>o)&&(r=o),(i==null||i<o)&&(i=o))}if(!(!r||!i))return[r,i]}),this.getTimeGranularityKey=ze(this.getSortedFlowsForKnownLocations,this.getActualTimeExtent,(n,r)=>{if(!n||!r)return;const i=QT(n,o=>{const c=this.accessors.getFlowTime(o);return c?kU(c).order:null});if(i==null)return;const s=PU(i);return s?s.key:void 0}),this.getTimeExtent=ze(this.getActualTimeExtent,this.getTimeGranularityKey,(n,r)=>{const i=r?d_(r):void 0;if(!n||!(i!=null&&i.interval))return;const{interval:s}=i;return[n[0],s.offset(s.floor(n[1]),1)]}),this.getSortedFlowsForKnownLocationsFilteredByTime=ze(this.getSortedFlowsForKnownLocations,this.getTimeExtent,this.getSelectedTimeRange,(n,r,i)=>{if(n)return!r||!i||r[0]===i[0]&&r[1]===i[1]?n:n.filter(s=>{const o=this.accessors.getFlowTime(s);return o&&i[0]<=o&&o<i[1]})}),this.getLocationsHavingFlows=ze(this.getSortedFlowsForKnownLocations,this.getLocations,(n,r)=>{if(!r||!n)return r;const i=new Set;for(const o of n)i.add(this.accessors.getFlowOriginId(o)),i.add(this.accessors.getFlowDestId(o));const s=[];for(const o of r)i.has(this.accessors.getLocationId(o))&&s.push(o);return s}),this.getLocationsById=ze(this.getLocationsHavingFlows,n=>{if(!n)return;const r=new Map;for(const i of n)r.set(this.accessors.getLocationId(i),i);return r}),this.getLocationWeightGetter=ze(this.getSortedFlowsForKnownLocations,n=>n?nU(n,this.accessors.getFlowmapDataAccessors()):void 0),this.getClusterLevels=ze(this.getClusterLevelsFromProps,this.getLocationsHavingFlows,this.getLocationWeightGetter,(n,r,i)=>n||(!r||!i?void 0:oU(r,this.accessors.getFlowmapDataAccessors(),i,{maxZoom:IU}))),this.getClusterIndex=ze(this.getLocationsById,this.getLocationWeightGetter,this.getClusterLevels,(n,r,i)=>{if(!n||!r||!i)return;const s=tU(i);return vU(s,i,n,this.accessors.getFlowmapDataAccessors(),r),s}),this.getAvailableClusterZoomLevels=ze(this.getClusterIndex,this.getSelectedLocations,(n,r)=>{if(!n)return;let i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;const o=c=>{const h=n.getClusterById(c);if(h)s=Math.max(s,h.zoom),i=Math.min(i,h.zoom);else{const p=n.getMinZoomForLocation(c);s=Math.max(s,p)}};if(r)for(const c of r)o(c);return n.availableZoomLevels.filter(c=>s<=c&&c<=i)}),this._getClusterZoom=ze(this.getClusterIndex,this.getZoom,this.getAvailableClusterZoomLevels,(n,r,i)=>!n||!i||r==null?void 0:rU(i,r)),this.getClusterZoom=(n,r)=>{const{settings:i}=n;if(i.clusteringEnabled)return i.clusteringAuto||i.clusteringLevel==null?this._getClusterZoom(n,r):i.clusteringLevel},this.getLocationsForSearchBox=ze(this.getClusteringEnabled,this.getLocationsHavingFlows,this.getSelectedLocations,this.getClusterZoom,this.getClusterIndex,(n,r,i,s,o)=>{if(!r)return;let c=Array.from(r);if(o&&i){const h=[];for(const p of i){const _=o.getClusterById(p);_&&!c.find(y=>(el(y)?y.id:this.accessors.getLocationId(y))===p)&&h.push(_)}h.length>0&&(c=c.concat(h))}return c}),this.getDiffMode=ze(this.getFlowsFromProps,n=>{if(n){for(const r of n)if(this.accessors.getFlowMagnitude(r)<0)return!0}return!1}),this._getFlowmapColors=ze(this.getDiffMode,this.getColorScheme,this.getDarkMode,this.getFadeEnabled,this.getFadeOpacityEnabled,this.getFadeAmount,this.getAnimate,v4),this.getFlowmapColorsRGBA=ze(this._getFlowmapColors,n=>kN(n)?ON(n):RN(n)),this.getUnknownLocations=ze(this.getLocationIds,this.getFlowsFromProps,this.getSortedFlowsForKnownLocations,(n,r,i)=>{if(!n||!r||i)return;const s=new Set;for(const o of r)n.has(this.accessors.getFlowOriginId(o))||s.add(this.accessors.getFlowOriginId(o)),n.has(this.accessors.getFlowDestId(o))||s.add(this.accessors.getFlowDestId(o));return s}),this.getSortedAggregatedFilteredFlows=ze(this.getClusterIndex,this.getClusteringEnabled,this.getSortedFlowsForKnownLocationsFilteredByTime,this.getClusterZoom,this.getTimeExtent,(n,r,i,s,o)=>{if(!i)return;let c;return r&&n&&s!=null?c=n.aggregateFlows(i,s,this.accessors.getFlowmapDataAccessors()):c=OU(i,this.accessors.getFlowmapDataAccessors()),c.sort((h,p)=>Sf(Math.abs(this.accessors.getFlowMagnitude(h)),Math.abs(this.accessors.getFlowMagnitude(p)))),c}),this.getExpandedSelectedLocationsSet=ze(this.getClusteringEnabled,this.getSelectedLocationsSet,this.getClusterIndex,(n,r,i)=>{if(!r||!i)return r;const s=new Set;for(const o of r){const c=i.getClusterById(o);if(c){const h=i.expandCluster(c);for(const p of h)s.add(p)}else s.add(o)}return s}),this.getTotalCountsByTime=ze(this.getSortedFlowsForKnownLocations,this.getTimeGranularityKey,this.getTimeExtent,this.getExpandedSelectedLocationsSet,this.getLocationFilterMode,(n,r,i,s,o)=>{const c=r?d_(r):void 0;if(!n||!c||!i)return;const h=n.reduce((p,_)=>{if(this.isFlowInSelection(_,s,o)){const y=c.interval(this.accessors.getFlowTime(_)).getTime();p.set(y,(p.get(y)??0)+this.accessors.getFlowMagnitude(_))}return p},new Map);return Array.from(h.entries()).map(([p,_])=>({time:new Date(p),count:_}))}),this.getMaxLocationCircleSize=ze(this.getLocationTotalsEnabled,n=>n?17:1),this.getViewportBoundingBox=ze(this.getViewport,this.getMaxLocationCircleSize,pU),this.getLocationsForZoom=ze(this.getClusteringEnabled,this.getLocationsHavingFlows,this.getClusterIndex,this.getClusterZoom,(n,r,i,s)=>n&&i?i.getClusterNodesFor(s):r),this.getLocationTotals=ze(this.getLocationsForZoom,this.getSortedAggregatedFilteredFlows,this.getSelectedLocationsSet,this.getLocationFilterMode,(n,r,i,s)=>{if(!r)return;const o=new Map,c=(h,p)=>{const _=o.get(h)??{incomingCount:0,outgoingCount:0,internalCount:0};return p.incomingCount!=null&&(_.incomingCount+=p.incomingCount),p.outgoingCount!=null&&(_.outgoingCount+=p.outgoingCount),p.internalCount!=null&&(_.internalCount+=p.internalCount),_};for(const h of r)if(this.isFlowInSelection(h,i,s)){const p=this.accessors.getFlowOriginId(h),_=this.accessors.getFlowDestId(h),y=this.accessors.getFlowMagnitude(h);p===_?o.set(p,c(p,{internalCount:y})):(o.set(p,c(p,{outgoingCount:y})),o.set(_,c(_,{incomingCount:y})))}return o}),this.getLocationsTree=ze(this.getLocationsForZoom,n=>{if(!n)return;const r=Array.isArray(n)?n:Array.from(n),i=new f0(r.length,64,Float32Array);for(let s=0;s<r.length;s++){const o=r[s];i.add(td(this.accessors.getLocationLon(o)),nd(this.accessors.getLocationLat(o)))}return i.finish(),i.points=r,i}),this._getLocationIdsInViewport=ze(this.getLocationsTree,this.getViewportBoundingBox,(n,r)=>{const i=this._getLocationsInBboxIndices(n,r);if(i)return new Set(i.map(s=>this.accessors.getLocationId(n.points[s])))}),this.getLocationIdsInViewport=E4(b4,(n,r,i)=>{if(n===r)return!0;if(n==null||r==null||n.size!==r.size)return!1;for(const s of n)if(!r.has(s))return!1;return!0})(this._getLocationIdsInViewport,n=>{if(n)return n}),this.getTotalUnfilteredCount=ze(this.getSortedFlowsForKnownLocations,n=>{if(n)return n.reduce((r,i)=>r+this.accessors.getFlowMagnitude(i),0)}),this.getTotalFilteredCount=ze(this.getSortedAggregatedFilteredFlows,this.getSelectedLocationsSet,this.getLocationFilterMode,(n,r,i)=>n?n.reduce((o,c)=>this.isFlowInSelection(c,r,i)?o+this.accessors.getFlowMagnitude(c):o,0):void 0),this._getLocationTotalsExtent=ze(this.getLocationTotals,n=>g_(n,void 0)),this._getLocationTotalsForViewportExtent=ze(this.getLocationTotals,this.getLocationIdsInViewport,(n,r)=>g_(n,r)),this.getLocationTotalsExtent=(n,r)=>n.settings.adaptiveScalesEnabled?this._getLocationTotalsForViewportExtent(n,r):this._getLocationTotalsExtent(n,r),this.getFlowsForFlowmapLayer=ze(this.getSortedAggregatedFilteredFlows,this.getLocationIdsInViewport,this.getSelectedLocationsSet,this.getLocationFilterMode,this.getMaxTopFlowsDisplayNum,(n,r,i,s,o)=>{if(!n||!r)return;const c=[];let h=0;for(const p of n){const _=this.accessors.getFlowOriginId(p),y=this.accessors.getFlowDestId(p);if((r.has(_)||r.has(y))&&this.isFlowInSelection(p,i,s)&&_!==y&&(c.push(p),h++),h>o)break}return c.reverse()}),this._getFlowMagnitudeExtent=ze(this.getSortedAggregatedFilteredFlows,this.getSelectedLocationsSet,this.getLocationFilterMode,(n,r,i)=>{if(!n)return;let s;for(const o of n)if(this.accessors.getFlowOriginId(o)!==this.accessors.getFlowDestId(o)&&this.isFlowInSelection(o,r,i)){const c=this.accessors.getFlowMagnitude(o);s==null?s=[c,c]:(c<s[0]&&(s[0]=c),c>s[1]&&(s[1]=c))}return s}),this._getAdaptiveFlowMagnitudeExtent=ze(this.getFlowsForFlowmapLayer,n=>{if(!n)return;const r=Rg(n,this.accessors.getFlowMagnitude);return r[0]!==void 0&&r[1]!==void 0?r:void 0}),this.getFlowMagnitudeExtent=(n,r)=>n.settings.adaptiveScalesEnabled?this._getAdaptiveFlowMagnitudeExtent(n,r):this._getFlowMagnitudeExtent(n,r),this.getLocationMaxAbsTotalGetter=ze(this.getLocationTotals,n=>r=>{const i=n==null?void 0:n.get(r);if(i)return Math.max(Math.abs(i.incomingCount+i.internalCount),Math.abs(i.outgoingCount+i.internalCount))}),this.getFlowThicknessScale=ze(this.getFlowMagnitudeExtent,mU),this.getCircleSizeScale=ze(this.getMaxLocationCircleSize,this.getLocationTotalsEnabled,this.getLocationTotalsExtent,(n,r,i)=>{if(!r)return()=>n;if(i)return tB().range([0,n]).domain([0,Math.max.apply(null,i.map(s=>Math.abs(s||0)))])}),this.getInCircleSizeGetter=ze(this.getCircleSizeScale,this.getLocationTotals,(n,r)=>i=>{const s=r==null?void 0:r.get(i);return s&&n&&n(Math.abs(s.incomingCount+s.internalCount))||0}),this.getOutCircleSizeGetter=ze(this.getCircleSizeScale,this.getLocationTotals,(n,r)=>i=>{const s=r==null?void 0:r.get(i);return s&&n&&n(Math.abs(s.outgoingCount+s.internalCount))||0}),this.getSortedLocationsForZoom=ze(this.getLocationsForZoom,this.getInCircleSizeGetter,this.getOutCircleSizeGetter,(n,r,i)=>n?[...n].sort((o,c)=>{const h=this.accessors.getLocationId(o),p=this.accessors.getLocationId(c);return Ea(Math.max(r(h),i(h)),Math.max(r(p),i(p)))}):void 0),this.getLocationsForFlowmapLayer=ze(this.getSortedLocationsForZoom,n=>n),this.getLocationsForFlowmapLayerById=ze(this.getLocationsForFlowmapLayer,n=>{if(n)return n.reduce((r,i)=>(r.set(this.accessors.getLocationId(i),i),r),new Map)}),this.getLocationOrClusterByIdGetter=ze(this.getClusterIndex,this.getLocationsById,(n,r)=>i=>(n==null?void 0:n.getClusterById(i))??(r==null?void 0:r.get(i))),this.getLayersData=ze(this.getLocationsForFlowmapLayer,this.getFlowsForFlowmapLayer,this.getFlowmapColorsRGBA,this.getLocationsForFlowmapLayerById,this.getLocationIdsInViewport,this.getInCircleSizeGetter,this.getOutCircleSizeGetter,this.getFlowThicknessScale,this.getAnimate,this.getLocationLabelsEnabled,(n,r,i,s,o,c,h,p,_,y)=>this._prepareLayersData(n,r,i,s,o,c,h,p,_,y)),this.accessors=new jg(e),this.setAccessors(e)}setAccessors(e){this.accessors=new jg(e)}getAggregateAccessors(){return this.accessors}prepareLayersData(e,n){const r=this.getLocationsForFlowmapLayer(e,n)||[],i=this.getFlowsForFlowmapLayer(e,n)||[],s=this.getFlowmapColorsRGBA(e,n),o=this.getLocationsForFlowmapLayerById(e,n),c=this.getLocationIdsInViewport(e,n),h=this.getInCircleSizeGetter(e,n),p=this.getOutCircleSizeGetter(e,n),_=this.getFlowThicknessScale(e,n),y=this.getLocationLabelsEnabled(e,n);return this._prepareLayersData(r,i,s,o,c,h,p,_,e.settings.animationEnabled,y)}_prepareLayersData(e,n,r,i,s,o,c,h,p,_){e||(e=[]),n||(n=[]);const{getFlowOriginId:y,getFlowDestId:w,getFlowMagnitude:T,getLocationId:S,getLocationLon:k,getLocationLat:U,getLocationName:x}=this.accessors,C=Rg(n,Pe=>T(Pe)),P=PN(r,C),B=Float32Array.from(function*(){for(const Pe of e)yield k(Pe),yield U(Pe)}()),z=y4(r)?r.positive.locationCircles.inner:r.locationCircles.inner,H=Uint8Array.from(function*(){for(const Pe of e)yield*z}()),X=Float32Array.from(function*(){for(const Pe of e){const Be=S(Pe);yield s!=null&&s.has(Be)?o(Be):1}}()),Q=Float32Array.from(function*(){for(const Pe of e){const Be=S(Pe);yield s!=null&&s.has(Be)?c(Be):1}}()),te=Float32Array.from(function*(){for(const Pe of n){const Be=i==null?void 0:i.get(y(Pe));yield Be?k(Be):0,yield Be?U(Be):0}}()),ie=Float32Array.from(function*(){for(const Pe of n){const Be=i==null?void 0:i.get(w(Pe));yield Be?k(Be):0,yield Be?U(Be):0}}()),ne=Float32Array.from(function*(){for(const Pe of n)yield h&&h(T(Pe))||0}()),fe=Float32Array.from(function*(){for(const Pe of n){const Be=y(Pe),gt=w(Pe);yield Math.max(o(Be),c(Be)),yield Math.max(o(gt),c(gt))}}()),ce=Uint8Array.from(function*(){for(const Pe of n)yield*P(T(Pe))}()),xe=p?Float32Array.from(function*(){for(const Pe of n)yield new eU.alea(`${y(Pe)}-${w(Pe)}`)()}()):void 0;return{circleAttributes:{length:e.length,attributes:{getPosition:{value:B,size:2},getColor:{value:H,size:4},getInRadius:{value:X,size:1},getOutRadius:{value:Q,size:1}}},lineAttributes:{length:n.length,attributes:{getSourcePosition:{value:te,size:2},getTargetPosition:{value:ie,size:2},getThickness:{value:ne,size:1},getColor:{value:ce,size:4},getEndpointOffsets:{value:fe,size:2},...xe?{getStaggering:{value:xe,size:1}}:{}}},..._?{locationLabels:e.map(x)}:void 0}}getLocationsInBbox(e,n){if(e)return this._getLocationsInBboxIndices(e,n).map(r=>e.points[r])}_getLocationsInBboxIndices(e,n){if(!e)return;const[r,i,s,o]=n,[c,h,p,_]=[td(r),nd(i),td(s),nd(o)];return e.range(Math.min(c,p),Math.min(h,_),Math.max(c,p),Math.max(h,_))}isFlowInSelection(e,n,r){const i=this.accessors.getFlowOriginId(e),s=this.accessors.getFlowDestId(e);if(n)switch(r){case Aa.ALL:return n.has(i)||n.has(s);case Aa.BETWEEN:return n.has(i)&&n.has(s);case Aa.INCOMING:return n.has(s);case Aa.OUTGOING:return n.has(i)}return!0}}function g_(t,e){if(!t)return;let n;for(const[r,{incomingCount:i,outgoingCount:s,internalCount:o}]of t.entries())if(e==null||e.has(r)){const c=Math.min(i+o,s+o,o),h=Math.max(i+o,s+o,o);n?(c<n[0]&&(n[0]=c),h>n[1]&&(n[1]=h)):n=[c,h]}return n}function td(t){return t/360+.5}function nd(t){const e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function OU(t,e){const n=WT(t,i=>{const s=e.getFlowOriginId(i[0]),o=e.getFlowDestId(i[0]);return{aggregate:!0,origin:s,dest:o,count:i.reduce((h,p)=>{const _=e.getFlowMagnitude(p);return _&&!isNaN(_)&&isFinite(_)?h+_:h},0)}},e.getFlowOriginId,e.getFlowDestId),r=[];for(const i of n.values())for(const s of i.values())r.push(s);return r}function rd(t,e){const{getInRadius:n,getOutRadius:r}=t.attributes;return Math.max(n.value[e],r.value[e])}function p_(t,e){const{getPosition:n}=t.attributes;return[n.value[e*2],n.value[e*2+1]]}function DU(t,e){const{getColor:n,getEndpointOffsets:r,getSourcePosition:i,getTargetPosition:s,getThickness:o,getStaggering:c}=t.attributes;return{length:1,attributes:{getColor:{value:n.value.subarray(e*4,(e+1)*4),size:4},getEndpointOffsets:{value:r.value.subarray(e*2,(e+1)*2),size:2},getSourcePosition:{value:i.value.subarray(e*2,(e+1)*2),size:2},getTargetPosition:{value:s.value.subarray(e*2,(e+1)*2),size:2},getThickness:{value:o.value.subarray(e,e+1),size:1},...c?{getStaggering:{value:c.value.subarray(e,e+1),size:1}}:void 0}}}class h0{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=e+s,c=Math.abs(e)<Math.abs(s)?e-(o-s):s-(o-e);c&&(n[r++]=c),e=o}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=e[--n];n>0&&(r=o,i=e[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&e[n-1]<0||s>0&&e[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}var Gg=1e-6,fu=Math.PI,m_=fu/2,I4=fu/4,v_=fu*2,id=180/fu,Ya=fu/180,Hm=Math.abs,R4=Math.atan2,Yl=Math.cos,$l=Math.sin,FU=Math.sqrt;function BU(t){return t>1?m_:t<-1?-m_:Math.asin(t)}function cc(){}function Rf(t,e){t&&__.hasOwnProperty(t.type)&&__[t.type](t,e)}var y_={Feature:function(t,e){Rf(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Rf(n[r].geometry,e)}},__={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Hg(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Hg(n[r],e,0)},Polygon:function(t,e){w_(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)w_(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Rf(n[r],e)}};function Hg(t,e,n){var r=-1,i=t.length-n,s;for(e.lineStart();++r<i;)s=t[r],e.point(s[0],s[1],s[2]);e.lineEnd()}function w_(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Hg(t[n],e,1);e.polygonEnd()}function NU(t,e){t&&y_.hasOwnProperty(t.type)?y_[t.type](t,e):Rf(t,e)}var Of=new h0,b_=new h0,O4,D4,Wg,Qg,Yg,Di={point:cc,lineStart:cc,lineEnd:cc,polygonStart:function(){Of=new h0,Di.lineStart=UU,Di.lineEnd=zU},polygonEnd:function(){var t=+Of;b_.add(t<0?v_+t:t),this.lineStart=this.lineEnd=this.point=cc},sphere:function(){b_.add(v_)}};function UU(){Di.point=VU}function zU(){F4(O4,D4)}function VU(t,e){Di.point=F4,O4=t,D4=e,t*=Ya,e*=Ya,Wg=t,Qg=Yl(e=e/2+I4),Yg=$l(e)}function F4(t,e){t*=Ya,e*=Ya,e=e/2+I4;var n=t-Wg,r=n>=0?1:-1,i=r*n,s=Yl(e),o=$l(e),c=Yg*o,h=Qg*s+c*Yl(i),p=c*r*$l(i);Of.add(R4(p,h)),Wg=t,Qg=s,Yg=o}function jU(t){return[R4(t[1],t[0]),BU(t[2])]}function GU(t){var e=t[0],n=t[1],r=Yl(n);return[r*Yl(e),r*$l(e),$l(n)]}function E_(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function HU(t){var e=FU(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Lt,Wn,Bt,sr,Gs,B4,N4,Ta,dl,is,Fi,_i={point:$g,lineStart:T_,lineEnd:x_,polygonStart:function(){_i.point=z4,_i.lineStart=WU,_i.lineEnd=QU,dl=new h0,Di.polygonStart()},polygonEnd:function(){Di.polygonEnd(),_i.point=$g,_i.lineStart=T_,_i.lineEnd=x_,Of<0?(Lt=-(Bt=180),Wn=-(sr=90)):dl>Gg?sr=90:dl<-Gg&&(Wn=-90),Fi[0]=Lt,Fi[1]=Bt},sphere:function(){Lt=-(Bt=180),Wn=-(sr=90)}};function $g(t,e){is.push(Fi=[Lt=t,Bt=t]),e<Wn&&(Wn=e),e>sr&&(sr=e)}function U4(t,e){var n=GU([t*Ya,e*Ya]);if(Ta){var r=E_(Ta,n),i=[r[1],-r[0],0],s=E_(i,r);HU(s),s=jU(s);var o=t-Gs,c=o>0?1:-1,h=s[0]*id*c,p,_=Hm(o)>180;_^(c*Gs<h&&h<c*t)?(p=s[1]*id,p>sr&&(sr=p)):(h=(h+360)%360-180,_^(c*Gs<h&&h<c*t)?(p=-s[1]*id,p<Wn&&(Wn=p)):(e<Wn&&(Wn=e),e>sr&&(sr=e))),_?t<Gs?nr(Lt,t)>nr(Lt,Bt)&&(Bt=t):nr(t,Bt)>nr(Lt,Bt)&&(Lt=t):Bt>=Lt?(t<Lt&&(Lt=t),t>Bt&&(Bt=t)):t>Gs?nr(Lt,t)>nr(Lt,Bt)&&(Bt=t):nr(t,Bt)>nr(Lt,Bt)&&(Lt=t)}else is.push(Fi=[Lt=t,Bt=t]);e<Wn&&(Wn=e),e>sr&&(sr=e),Ta=n,Gs=t}function T_(){_i.point=U4}function x_(){Fi[0]=Lt,Fi[1]=Bt,_i.point=$g,Ta=null}function z4(t,e){if(Ta){var n=t-Gs;dl.add(Hm(n)>180?n+(n>0?360:-360):n)}else B4=t,N4=e;Di.point(t,e),U4(t,e)}function WU(){Di.lineStart()}function QU(){z4(B4,N4),Di.lineEnd(),Hm(dl)>Gg&&(Lt=-(Bt=180)),Fi[0]=Lt,Fi[1]=Bt,Ta=null}function nr(t,e){return(e-=t)<0?e+360:e}function YU(t,e){return t[0]-e[0]}function S_(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function $U(t){var e,n,r,i,s,o,c;if(sr=Bt=-(Lt=Wn=1/0),is=[],NU(t,_i),n=is.length){for(is.sort(YU),e=1,r=is[0],s=[r];e<n;++e)i=is[e],S_(r,i[0])||S_(r,i[1])?(nr(r[0],i[1])>nr(r[0],r[1])&&(r[1]=i[1]),nr(i[0],r[1])>nr(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,e=0,r=s[n];e<=n;r=i,++e)i=s[e],(c=nr(r[1],i[0]))>o&&(o=c,Lt=i[0],Bt=r[1])}return is=Fi=null,Lt===1/0||Wn===1/0?[[NaN,NaN],[NaN,NaN]]:[[Lt,Wn],[Bt,sr]]}function XU(t,e,n){const{pad:r=.05,maxZoom:i=100}=n||{},s=$U(t),[[o,c],[h,p]]=s,_=r?[[o-r*(h-o),c-r*(p-c)],[h+r*(h-o),p+r*(p-c)]]:s,[y,w]=e;return{...pm({width:y,height:w,bounds:_,padding:n==null?void 0:n.padding,maxZoom:i}),width:y,height:w,bearing:0,pitch:0}}function V4(t,e,n,r){const i=o=>({type:"Point",coordinates:e(o)});let s;if(Array.isArray(t))s=t.map(i);else{s=[];for(const o of t)s.push(i(o))}return XU({type:"GeometryCollection",geometries:s},n,r)}function ZU(t){return t&&t.locations&&t.flows}function KU(t){return t&&typeof t.setFlowmapState=="function"&&typeof t.getViewportForLocations=="function"&&typeof t.getFlowByIndex=="function"&&typeof t.getLocationById=="function"&&typeof t.getLocationByIndex=="function"&&typeof t.getLayersData=="function"}class qU{constructor(e){this.selectors=new RU(e),this.flowmapData=void 0,this.flowmapState=void 0}setAccessors(e){this.selectors.setAccessors(e)}setFlowmapData(e){this.flowmapData=e}getSelectors(){return this.selectors}getFlowmapData(){return this.flowmapData}async setFlowmapState(e){this.flowmapState=e}getFlowmapState(){return this.flowmapState}async getFlowByIndex(e){if(!this.flowmapState||!this.flowmapData)return;const n=this.selectors.getFlowsForFlowmapLayer(this.flowmapState,this.flowmapData);return n==null?void 0:n[e]}async getLocationByIndex(e){if(!this.flowmapState||!this.flowmapData)return;const n=this.selectors.getLocationsForFlowmapLayer(this.flowmapState,this.flowmapData);return n==null?void 0:n[e]}async getLayersData(){if(!(!this.flowmapState||!this.flowmapData))return this.selectors.getLayersData(this.flowmapState,this.flowmapData)}async getLocationById(e){if(!this.flowmapState||!this.flowmapData)return;const n=this.selectors.getClusterIndex(this.flowmapState,this.flowmapData);if(n){const i=n.getClusterById(e);if(i)return i}const r=this.selectors.getLocationsById(this.flowmapState,this.flowmapData);return r==null?void 0:r.get(e)}async getTotalsForLocation(e){var n;if(!(!this.flowmapState||!this.flowmapData))return(n=this.selectors.getLocationTotals(this.flowmapState,this.flowmapData))==null?void 0:n.get(e)}async getViewportForLocations(e,n){var r;if((r=this.flowmapData)!=null&&r.locations)return V4(this.flowmapData.locations,i=>[this.selectors.accessors.getLocationLon(i),this.selectors.accessors.getLocationLat(i)],e,n)}async updateLayersData(e){e(await this.getLayersData())}getClusterZoom(){return this.flowmapState&&this.flowmapData?this.selectors.getClusterZoom(this.flowmapState,this.flowmapData):void 0}getClusterIndex(){return this.flowmapState&&this.flowmapData?this.selectors.getClusterIndex(this.flowmapState,this.flowmapData):void 0}getLocationsById(){return this.flowmapState&&this.flowmapData?this.selectors.getLocationsById(this.flowmapState,this.flowmapData):void 0}getLocationTotals(){return this.flowmapState&&this.flowmapData?this.selectors.getLocationTotals(this.flowmapState,this.flowmapData):void 0}getFlowsForFlowmapLayer(){return this.flowmapState&&this.flowmapData?this.selectors.getFlowsForFlowmapLayer(this.flowmapState,this.flowmapData):void 0}}var C_={},sd={},od=34,QA=10,ad=13;function j4(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function JU(t,e){var n=j4(t);return function(r,i){return e(n(r),i,t)}}function M_(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function Gn(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function ez(t){return t<0?"-"+Gn(-t,6):t>9999?"+"+Gn(t,6):Gn(t,4)}function tz(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":ez(t.getUTCFullYear())+"-"+Gn(t.getUTCMonth()+1,2)+"-"+Gn(t.getUTCDate(),2)+(i?"T"+Gn(e,2)+":"+Gn(n,2)+":"+Gn(r,2)+"."+Gn(i,3)+"Z":r?"T"+Gn(e,2)+":"+Gn(n,2)+":"+Gn(r,2)+"Z":n||e?"T"+Gn(e,2)+":"+Gn(n,2)+"Z":"")}function nz(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(y,w){var T,S,k=i(y,function(U,x){if(T)return T(U,x-1);S=U,T=w?JU(U,w):j4(U)});return k.columns=S||[],k}function i(y,w){var T=[],S=y.length,k=0,U=0,x,C=S<=0,P=!1;y.charCodeAt(S-1)===QA&&--S,y.charCodeAt(S-1)===ad&&--S;function B(){if(C)return sd;if(P)return P=!1,C_;var H,X=k,Q;if(y.charCodeAt(X)===od){for(;k++<S&&y.charCodeAt(k)!==od||y.charCodeAt(++k)===od;);return(H=k)>=S?C=!0:(Q=y.charCodeAt(k++))===QA?P=!0:Q===ad&&(P=!0,y.charCodeAt(k)===QA&&++k),y.slice(X+1,H-1).replace(/""/g,'"')}for(;k<S;){if((Q=y.charCodeAt(H=k++))===QA)P=!0;else if(Q===ad)P=!0,y.charCodeAt(k)===QA&&++k;else if(Q!==n)continue;return y.slice(X,H)}return C=!0,y.slice(X,S)}for(;(x=B())!==sd;){for(var z=[];x!==C_&&x!==sd;)z.push(x),x=B();w&&(z=w(z,U++))==null||T.push(z)}return T}function s(y,w){return y.map(function(T){return w.map(function(S){return _(T[S])}).join(t)})}function o(y,w){return w==null&&(w=M_(y)),[w.map(_).join(t)].concat(s(y,w)).join(`
`)}function c(y,w){return w==null&&(w=M_(y)),s(y,w).join(`
`)}function h(y){return y.map(p).join(`
`)}function p(y){return y.map(_).join(t)}function _(y){return y==null?"":y instanceof Date?tz(y):e.test(y+="")?'"'+y.replace(/"/g,'""')+'"':y}return{parse:r,parseRows:i,format:o,formatBody:c,formatRows:h,formatRow:p,formatValue:_}}var rz=nz(","),iz=rz.parse;function sz(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function oz(t,e){return fetch(t,e).then(sz)}function az(t){return function(e,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),oz(e,n).then(function(i){return t(i,r)})}}var L_=az(iz),Qn=function(t){t=t||{};var e=typeof t<"u"?t:{},n={},r;for(r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);var i="";function s(q){return e.locateFile?e.locateFile(q,i):i+q}var o;typeof document<"u"&&document.currentScript&&(i=document.currentScript.src),i.indexOf("blob:")!==0?i=i.substr(0,i.lastIndexOf("/")+1):i="",o=function(se,_e,Oe){var l=new XMLHttpRequest;l.open("GET",se,!0),l.responseType="arraybuffer",l.onload=function(){if(l.status==200||l.status==0&&l.response){_e(l.response);return}var Ke=AA(se);if(Ke){_e(Ke.buffer);return}Oe()},l.onerror=Oe,l.send(null)};var c=e.print||console.log.bind(console),h=e.printErr||console.warn.bind(console);for(r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);n=null,e.arguments&&e.arguments;var p=0,_=function(q){p=q},y=function(){return p},w=8;function T(q,se,_e,Oe){switch(_e=_e||"i8",_e.charAt(_e.length-1)==="*"&&(_e="i32"),_e){case"i1":fe[q>>0]=se;break;case"i8":fe[q>>0]=se;break;case"i16":xe[q>>1]=se;break;case"i32":Pe[q>>2]=se;break;case"i64":sA=[se>>>0,(Vi=se,+Rt(Vi)>=1?Vi>0?(vt(+zt(Vi/4294967296),4294967295)|0)>>>0:~~+nt((Vi-+(~~Vi>>>0))/4294967296)>>>0:0)],Pe[q>>2]=sA[0],Pe[q+4>>2]=sA[1];break;case"float":Be[q>>2]=se;break;case"double":gt[q>>3]=se;break;default:ji("invalid type for setValue: "+_e)}}function S(q,se,_e){switch(se=se||"i8",se.charAt(se.length-1)==="*"&&(se="i32"),se){case"i1":return fe[q>>0];case"i8":return fe[q>>0];case"i16":return xe[q>>1];case"i32":return Pe[q>>2];case"i64":return Pe[q>>2];case"float":return Be[q>>2];case"double":return gt[q>>3];default:ji("invalid type for getValue: "+se)}return null}var k=!1;function U(q,se){q||ji("Assertion failed: "+se)}function x(q){var se=e["_"+q];return U(se,"Cannot call unknown function "+q+", make sure it is exported"),se}function C(q,se,_e,Oe,l){var O={string:function(De){var Jt=0;if(De!=null&&De!==0){var Hr=(De.length<<2)+1;Jt=lA(Hr),Q(De,Jt,Hr)}return Jt},array:function(De){var Jt=lA(De.length);return te(De,Jt),Jt}};function Ke(De){return se==="string"?H(De):se==="boolean"?!!De:De}var ot=x(q),Vt=[],We=0;if(Oe)for(var qe=0;qe<Oe.length;qe++){var Ir=O[_e[qe]];Ir?(We===0&&(We=uA()),Vt[qe]=Ir(Oe[qe])):Vt[qe]=Oe[qe]}var rt=ot.apply(null,Vt);return rt=Ke(rt),We!==0&&yu(We),rt}function P(q,se,_e,Oe){_e=_e||[];var l=_e.every(function(Ke){return Ke==="number"}),O=se!=="string";return O&&l&&!Oe?x(q):function(){return C(q,se,_e,arguments)}}var B=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function z(q,se,_e){for(var Oe=se+_e,l=se;q[l]&&!(l>=Oe);)++l;if(l-se>16&&q.subarray&&B)return B.decode(q.subarray(se,l));for(var O="";se<l;){var Ke=q[se++];if(!(Ke&128)){O+=String.fromCharCode(Ke);continue}var ot=q[se++]&63;if((Ke&224)==192){O+=String.fromCharCode((Ke&31)<<6|ot);continue}var Vt=q[se++]&63;if((Ke&240)==224?Ke=(Ke&15)<<12|ot<<6|Vt:Ke=(Ke&7)<<18|ot<<12|Vt<<6|q[se++]&63,Ke<65536)O+=String.fromCharCode(Ke);else{var We=Ke-65536;O+=String.fromCharCode(55296|We>>10,56320|We&1023)}}return O}function H(q,se){return q?z(ce,q,se):""}function X(q,se,_e,Oe){if(!(Oe>0))return 0;for(var l=_e,O=_e+Oe-1,Ke=0;Ke<q.length;++Ke){var ot=q.charCodeAt(Ke);if(ot>=55296&&ot<=57343){var Vt=q.charCodeAt(++Ke);ot=65536+((ot&1023)<<10)|Vt&1023}if(ot<=127){if(_e>=O)break;se[_e++]=ot}else if(ot<=2047){if(_e+1>=O)break;se[_e++]=192|ot>>6,se[_e++]=128|ot&63}else if(ot<=65535){if(_e+2>=O)break;se[_e++]=224|ot>>12,se[_e++]=128|ot>>6&63,se[_e++]=128|ot&63}else{if(_e+3>=O)break;se[_e++]=240|ot>>18,se[_e++]=128|ot>>12&63,se[_e++]=128|ot>>6&63,se[_e++]=128|ot&63}}return se[_e]=0,_e-l}function Q(q,se,_e){return X(q,ce,se,_e)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function te(q,se){fe.set(q,se)}function ie(q,se){return q%se>0&&(q+=se-q%se),q}var ne,fe,ce,xe,Pe,Be,gt;function me(q){ne=q,e.HEAP8=fe=new Int8Array(q),e.HEAP16=xe=new Int16Array(q),e.HEAP32=Pe=new Int32Array(q),e.HEAPU8=ce=new Uint8Array(q),e.HEAPU16=new Uint16Array(q),e.HEAPU32=new Uint32Array(q),e.HEAPF32=Be=new Float32Array(q),e.HEAPF64=gt=new Float64Array(q)}var Le=5267040,Ge=24128,dt=e.TOTAL_MEMORY||33554432;e.buffer?ne=e.buffer:ne=new ArrayBuffer(dt),dt=ne.byteLength,me(ne),Pe[Ge>>2]=Le;function lt(q){for(;q.length>0;){var se=q.shift();if(typeof se=="function"){se();continue}var _e=se.func;typeof _e=="number"?se.arg===void 0?e.dynCall_v(_e):e.dynCall_vi(_e,se.arg):_e(se.arg===void 0?null:se.arg)}}var Lr=[],Ln=[],gi=[],zn=[];function xt(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)Xe(e.preRun.shift());lt(Lr)}function Pr(){lt(Ln)}function de(){lt(gi)}function Ie(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)Ae(e.postRun.shift());lt(zn)}function Xe(q){Lr.unshift(q)}function Ae(q){zn.unshift(q)}var Rt=Math.abs,nt=Math.ceil,zt=Math.floor,vt=Math.min,Mt=0,kr=null;function du(q){Mt++,e.monitorRunDependencies&&e.monitorRunDependencies(Mt)}function Eo(q){if(Mt--,e.monitorRunDependencies&&e.monitorRunDependencies(Mt),Mt==0&&kr){var se=kr;kr=null,se()}}e.preloadedImages={},e.preloadedAudios={};var Ot=null,iA="data:application/octet-stream;base64,";function gu(q){return String.prototype.startsWith?q.startsWith(iA):q.indexOf(iA)===0}var Vi,sA;Ot="data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAOgehWlKfUEEz1zLi+JsiQa2og3wcMfVAWCbHorc0yEDi+Yn/Y6mbQJ11/mfsnG9At6bnG4UQQkBvMCQWKqUUQJVmwwswmOc/3hVgVBL3uj//qqOEOdGOPw/WDN4gnGE/H3ANkCUgND+AA8btKgAHPwTXBqJVSdo+XfRQAqsKrj4fc+zLYbSPQklEmCZHv2FCUP+uDso1NEKYtPhwphUHQptxnyFXYdpB7CddZAMmrkGAt1AxSTqBQUibBVdTsFNBSuX3MV+AJkFocv82SLf5QAqmgj7AY81A23VDSEnLoEDGEJVSeDFzQDYrqvBk70VA8U157pcRGUBWfEF+ZKbsP7KBdLHZTpFAqKYk69AqekDbeGY41MdjQD8AZzHK501A1vcrrjubNkD5LnquvBYhQCbiRRD71QlAqt72EbOH8z8Eu+jL1YbdP4uaox/xUcY/abedg1XfsD+BsUdzJ4KZP5wE9YFySIM/rW1kAKMpbT+rZFthVRhWPy4PKlXIs0A/qMZLlwDnMEHByqEF0I0ZQQYSFD8lUQNBPpY+dFs07UAH8BZImBPWQN9RY0I0sMBA2T7kLfc6qUByFYvfhBKTQMq+0Mis1XxA0XQbeQXMZUBJJ5aEGXpQQP7/SY0a6ThAaMD92b/UIkAs8s8yqXoMQNIegOvCk/U/aOi7NZJP4D8AAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAD/////AAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAA/////wAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAP////8AAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////BQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAEAAQAAAQEAAAAAAAEAAAABAAAAAQABAAAAAAAAAAAAAAAAAAAAAAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAGFsZ29zLmMAaDNOZWlnaGJvclJvdGF0aW9ucwBjb29yZGlqay5jAF91cEFwN0NoZWNrZWQAX3VwQXA3ckNoZWNrZWQAZGlyZWN0ZWRFZGdlLmMAZGlyZWN0ZWRFZGdlVG9Cb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0NlbGxCb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbY2VudGVySUpLLmZhY2VdW2ZhY2UyXSA9PSBLSQBfZmFjZUlqa1RvQ2VsbEJvdW5kYXJ5AGgzSW5kZXguYwBjb21wYWN0Q2VsbHMAbGF0TG5nVG9DZWxsAGNlbGxUb0NoaWxkUG9zAHZhbGlkYXRlQ2hpbGRQb3MAbGF0TG5nLmMAY2VsbEFyZWFSYWRzMgBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGNlbGxUb0xvY2FsSWprAGJhc2VDZWxsICE9IG9yaWdpbkJhc2VDZWxsACEob3JpZ2luT25QZW50ICYmIGluZGV4T25QZW50KQBiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvQ2VsbAAhX2lzQmFzZUNlbGxQZW50YWdvbihiYXNlQ2VsbCkAYmFzZUNlbGxSb3RhdGlvbnMgPj0gMABncmlkUGF0aENlbGxzADAAdmVydGV4LmMAY2VsbFRvVmVydGV4AGdyYXBoLT5idWNrZXRzICE9IE5VTEwAdmVydGV4R3JhcGguYwBpbml0VmVydGV4R3JhcGgAbm9kZSAhPSBOVUxMAGFkZFZlcnRleE5vZGU=";var p0=24144;function pu(q,se,_e,Oe){ji("Assertion failed: "+H(q)+", at: "+[se?H(se):"unknown filename",_e,Oe?H(Oe):"unknown function"])}function oA(){return fe.length}function mu(q,se,_e){ce.set(ce.subarray(se,se+_e),q)}function vu(q){return e.___errno_location&&(Pe[e.___errno_location()>>2]=q),q}function To(q){ji("OOM")}function aA(q){try{var se=new ArrayBuffer(q);return se.byteLength!=q?void 0:(new Int8Array(se).set(fe),w0(se),me(se),1)}catch{}}function m0(q){var se=oA(),_e=16777216,Oe=2147483648-_e;if(q>Oe)return!1;for(var l=16777216,O=Math.max(se,l);O<q;)O<=536870912?O=ie(2*O,_e):O=Math.min(ie((3*O+2147483648)/4,_e),Oe);var Ke=aA(O);return!!Ke}var v0=typeof atob=="function"?atob:function(q){var se="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_e="",Oe,l,O,Ke,ot,Vt,We,qe=0;q=q.replace(/[^A-Za-z0-9\+\/\=]/g,"");do Ke=se.indexOf(q.charAt(qe++)),ot=se.indexOf(q.charAt(qe++)),Vt=se.indexOf(q.charAt(qe++)),We=se.indexOf(q.charAt(qe++)),Oe=Ke<<2|ot>>4,l=(ot&15)<<4|Vt>>2,O=(Vt&3)<<6|We,_e=_e+String.fromCharCode(Oe),Vt!==64&&(_e=_e+String.fromCharCode(l)),We!==64&&(_e=_e+String.fromCharCode(O));while(qe<q.length);return _e};function y0(q){try{for(var se=v0(q),_e=new Uint8Array(se.length),Oe=0;Oe<se.length;++Oe)_e[Oe]=se.charCodeAt(Oe);return _e}catch{throw new Error("Converting base64 string to bytes failed.")}}function AA(q){if(gu(q))return y0(q.slice(iA.length))}var _0={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},xo={b:_,c:y,d:pu,e:vu,f:oA,g:mu,h:m0,i:To,o:p0,p:Ge},le=function(q,se,_e){"almost asm";var Oe=new q.Int8Array(_e),l=new q.Int32Array(_e);new q.Uint8Array(_e),new q.Float32Array(_e);var O=new q.Float64Array(_e),Ke=se.o|0,ot=se.p|0,Vt=q.Math.floor,We=q.Math.abs,qe=q.Math.sqrt,Ir=q.Math.pow,rt=q.Math.cos,De=q.Math.sin,Jt=q.Math.tan,Hr=q.Math.acos,Co=q.Math.asin,Ps=q.Math.atan,Vn=q.Math.atan2,Gi=q.Math.ceil,Pn=q.Math.imul,gn=q.Math.min,Hi=q.Math.max,pn=q.Math.clz32,Re=se.b,N=se.c,Me=se.d,hr=se.e,bu=se.f,Eu=se.g,Mo=se.h,Kn=se.i,R=24160;function dA(A){return Oe=new Int8Array(A),l=new Int32Array(A),O=new Float64Array(A),_e=A,!0}function gA(A){A=A|0;var a=0;return a=R,R=R+A|0,R=R+15&-16,a|0}function pA(){return R|0}function mA(A){A=A|0,R=A}function Lo(A,a){A=A|0,R=A}function Wr(A,a){A=A|0,a=a|0;var u=0,f=0,d=0;return(A|0)<0?(a=2,a|0):(A|0)>13780509?(a=O0(15,a)|0,a|0):(u=((A|0)<0)<<31>>31,d=yn(A|0,u|0,3,0)|0,f=N()|0,u=Ze(A|0,u|0,1,0)|0,u=yn(d|0,f|0,u|0,N()|0)|0,u=Ze(u|0,N()|0,1,0)|0,A=N()|0,l[a>>2]=u,l[a+4>>2]=A,a=0,a|0)}function Tu(A,a,u,f){return A=A|0,a=a|0,u=u|0,f=f|0,vA(A,a,u,f,0)|0}function vA(A,a,u,f,d){A=A|0,a=a|0,u=u|0,f=f|0,d=d|0;var g=0,m=0,v=0,b=0,E=0;if(b=R,R=R+16|0,m=b,!(Po(A,a,u,f,d)|0))return f=0,R=b,f|0;do if((u|0)>=0){if((u|0)>13780509){if(g=O0(15,m)|0,g|0)break;v=m,m=l[v>>2]|0,v=l[v+4>>2]|0}else g=((u|0)<0)<<31>>31,E=yn(u|0,g|0,3,0)|0,v=N()|0,g=Ze(u|0,g|0,1,0)|0,g=yn(E|0,v|0,g|0,N()|0)|0,g=Ze(g|0,N()|0,1,0)|0,v=N()|0,l[m>>2]=g,l[m+4>>2]=v,m=g;if(Fs(f|0,0,m<<3|0)|0,d|0){Fs(d|0,0,m<<2|0)|0,g=dr(A,a,u,f,d,m,v,0)|0;break}g=Yr(m,4)|0,g?(E=dr(A,a,u,f,g,m,v,0)|0,Ne(g),g=E):g=13}else g=2;while(!1);return E=g,R=b,E|0}function Po(A,a,u,f,d){A=A|0,a=a|0,u=u|0,f=f|0,d=d|0;var g=0,m=0,v=0,b=0,E=0,M=0,D=0,j=0,W=0,V=0,$=0;if($=R,R=R+16|0,W=$,V=$+8|0,j=W,l[j>>2]=A,l[j+4>>2]=a,(u|0)<0)return V=2,R=$,V|0;if(g=f,l[g>>2]=A,l[g+4>>2]=a,g=(d|0)!=0,g&&(l[d>>2]=0),yt(A,a)|0)return V=9,R=$,V|0;l[V>>2]=0;e:do if((u|0)>=1)if(g)for(M=1,E=0,D=0,j=1,g=A;;){if(!(E|D)){if(g=Gt(g,a,4,V,W)|0,g|0)break e;if(a=W,g=l[a>>2]|0,a=l[a+4>>2]|0,yt(g,a)|0){g=9;break e}}if(g=Gt(g,a,l[22384+(D<<2)>>2]|0,V,W)|0,g|0)break e;if(a=W,g=l[a>>2]|0,a=l[a+4>>2]|0,A=f+(M<<3)|0,l[A>>2]=g,l[A+4>>2]=a,l[d+(M<<2)>>2]=j,A=E+1|0,m=(A|0)==(j|0),v=D+1|0,b=(v|0)==6,yt(g,a)|0){g=9;break e}if(j=j+(b&m&1)|0,(j|0)>(u|0)){g=0;break}else M=M+1|0,E=m?0:A,D=m?b?0:v:D}else for(M=1,E=0,D=0,j=1,g=A;;){if(!(E|D)){if(g=Gt(g,a,4,V,W)|0,g|0)break e;if(a=W,g=l[a>>2]|0,a=l[a+4>>2]|0,yt(g,a)|0){g=9;break e}}if(g=Gt(g,a,l[22384+(D<<2)>>2]|0,V,W)|0,g|0)break e;if(a=W,g=l[a>>2]|0,a=l[a+4>>2]|0,A=f+(M<<3)|0,l[A>>2]=g,l[A+4>>2]=a,A=E+1|0,m=(A|0)==(j|0),v=D+1|0,b=(v|0)==6,yt(g,a)|0){g=9;break e}if(j=j+(b&m&1)|0,(j|0)>(u|0)){g=0;break}else M=M+1|0,E=m?0:A,D=m?b?0:v:D}else g=0;while(!1);return V=g,R=$,V|0}function dr(A,a,u,f,d,g,m,v){A=A|0,a=a|0,u=u|0,f=f|0,d=d|0,g=g|0,m=m|0,v=v|0;var b=0,E=0,M=0,D=0,j=0,W=0,V=0,$=0,re=0,ee=0;if($=R,R=R+16|0,W=$+8|0,V=$,b=Oo(A|0,a|0,g|0,m|0)|0,M=N()|0,D=f+(b<<3)|0,re=D,ee=l[re>>2]|0,re=l[re+4>>2]|0,E=(ee|0)==(A|0)&(re|0)==(a|0),!((ee|0)==0&(re|0)==0|E))do b=Ze(b|0,M|0,1,0)|0,b=Pu(b|0,N()|0,g|0,m|0)|0,M=N()|0,D=f+(b<<3)|0,ee=D,re=l[ee>>2]|0,ee=l[ee+4>>2]|0,E=(re|0)==(A|0)&(ee|0)==(a|0);while(!((re|0)==0&(ee|0)==0|E));if(b=d+(b<<2)|0,E&&(l[b>>2]|0)<=(v|0)||(ee=D,l[ee>>2]=A,l[ee+4>>2]=a,l[b>>2]=v,(v|0)>=(u|0)))return ee=0,R=$,ee|0;switch(E=v+1|0,l[W>>2]=0,b=Gt(A,a,2,W,V)|0,b|0){case 9:{j=9;break}case 0:{b=V,b=dr(l[b>>2]|0,l[b+4>>2]|0,u,f,d,g,m,E)|0,b||(j=9);break}}e:do if((j|0)==9){switch(l[W>>2]=0,b=Gt(A,a,3,W,V)|0,b|0){case 9:break;case 0:{if(b=V,b=dr(l[b>>2]|0,l[b+4>>2]|0,u,f,d,g,m,E)|0,b|0)break e;break}default:break e}switch(l[W>>2]=0,b=Gt(A,a,1,W,V)|0,b|0){case 9:break;case 0:{if(b=V,b=dr(l[b>>2]|0,l[b+4>>2]|0,u,f,d,g,m,E)|0,b|0)break e;break}default:break e}switch(l[W>>2]=0,b=Gt(A,a,5,W,V)|0,b|0){case 9:break;case 0:{if(b=V,b=dr(l[b>>2]|0,l[b+4>>2]|0,u,f,d,g,m,E)|0,b|0)break e;break}default:break e}switch(l[W>>2]=0,b=Gt(A,a,4,W,V)|0,b|0){case 9:break;case 0:{if(b=V,b=dr(l[b>>2]|0,l[b+4>>2]|0,u,f,d,g,m,E)|0,b|0)break e;break}default:break e}switch(l[W>>2]=0,b=Gt(A,a,6,W,V)|0,b|0){case 9:break;case 0:{if(b=V,b=dr(l[b>>2]|0,l[b+4>>2]|0,u,f,d,g,m,E)|0,b|0)break e;break}default:break e}return ee=0,R=$,ee|0}while(!1);return ee=b,R=$,ee|0}function Gt(A,a,u,f,d){A=A|0,a=a|0,u=u|0,f=f|0,d=d|0;var g=0,m=0,v=0,b=0,E=0,M=0,D=0,j=0,W=0,V=0;if(u>>>0>6)return d=1,d|0;if(D=(l[f>>2]|0)%6|0,l[f>>2]=D,(D|0)>0){g=0;do u=Rs(u)|0,g=g+1|0;while((g|0)<(l[f>>2]|0))}if(D=ae(A|0,a|0,45)|0,N()|0,M=D&127,M>>>0>121)return d=5,d|0;b=jn(A,a)|0,g=ae(A|0,a|0,52)|0,N()|0,g=g&15;e:do if(!g)E=8;else{for(;;){if(m=(15-g|0)*3|0,v=ae(A|0,a|0,m|0)|0,N()|0,v=v&7,(v|0)==7){a=5;break}if(V=(pr(g)|0)==0,g=g+-1|0,j=ge(7,0,m|0)|0,a=a&~(N()|0),W=ge(l[(V?432:16)+(v*28|0)+(u<<2)>>2]|0,0,m|0)|0,m=N()|0,u=l[(V?640:224)+(v*28|0)+(u<<2)>>2]|0,A=W|A&~j,a=m|a,!u){u=0;break e}if(!g){E=8;break e}}return a|0}while(!1);(E|0)==8&&(V=l[848+(M*28|0)+(u<<2)>>2]|0,W=ge(V|0,0,45)|0,A=W|A,a=N()|0|a&-1040385,u=l[4272+(M*28|0)+(u<<2)>>2]|0,(V&127|0)==127&&(V=ge(l[848+(M*28|0)+20>>2]|0,0,45)|0,a=N()|0|a&-1040385,u=l[4272+(M*28|0)+20>>2]|0,A=Os(V|A,a)|0,a=N()|0,l[f>>2]=(l[f>>2]|0)+1)),v=ae(A|0,a|0,45)|0,N()|0,v=v&127;e:do if(Se(v)|0){t:do if((jn(A,a)|0)==1){if((M|0)!=(v|0))if(Km(v,l[7696+(M*28|0)>>2]|0)|0){A=k0(A,a)|0,m=1,a=N()|0;break}else Me(23313,22416,436,22424);switch(b|0){case 3:{A=Os(A,a)|0,a=N()|0,l[f>>2]=(l[f>>2]|0)+1,m=0;break t}case 5:{A=k0(A,a)|0,a=N()|0,l[f>>2]=(l[f>>2]|0)+5,m=0;break t}case 0:return V=9,V|0;default:return V=1,V|0}}else m=0;while(!1);if((u|0)>0){g=0;do A=P0(A,a)|0,a=N()|0,g=g+1|0;while((g|0)!=(u|0))}if((M|0)!=(v|0)){if(!(Dt(v)|0)){if((m|0)!=0|(jn(A,a)|0)!=5)break;l[f>>2]=(l[f>>2]|0)+1;break}switch(D&127){case 8:case 118:break e}(jn(A,a)|0)!=3&&(l[f>>2]=(l[f>>2]|0)+1)}}else if((u|0)>0){g=0;do A=Os(A,a)|0,a=N()|0,g=g+1|0;while((g|0)!=(u|0))}while(!1);return l[f>>2]=((l[f>>2]|0)+u|0)%6|0,V=d,l[V>>2]=A,l[V+4>>2]=a,V=0,V|0}function yA(A,a,u,f){A=A|0,a=a|0,u=u|0,f=f|0;var d=0,g=0,m=0,v=0,b=0,E=0;for(v=R,R=R+16|0,g=v,m=v+8|0,d=(yt(A,a)|0)==0,d=d?1:2;;){if(l[m>>2]=0,E=(Gt(A,a,d,m,g)|0)==0,b=g,E&((l[b>>2]|0)==(u|0)?(l[b+4>>2]|0)==(f|0):0)){A=4;break}if(d=d+1|0,d>>>0>=7){d=7,A=4;break}}return(A|0)==4?(R=v,d|0):0}function I(A,a,u,f){A=A|0,a=a|0,u=u|0,f=f|0;var d=0,g=0,m=0,v=0,b=0,E=0,M=0,D=0,j=0,W=0,V=0;if(V=R,R=R+16|0,j=V,W=V+8|0,D=j,l[D>>2]=A,l[D+4>>2]=a,!u)return W=f,l[W>>2]=A,l[W+4>>2]=a,W=0,R=V,W|0;l[W>>2]=0;e:do if(yt(A,a)|0)A=9;else{if(g=(u|0)>0,g){d=0,D=A;do{if(A=Gt(D,a,4,W,j)|0,A|0)break e;if(a=j,D=l[a>>2]|0,a=l[a+4>>2]|0,d=d+1|0,yt(D,a)|0){A=9;break e}}while((d|0)<(u|0));if(M=f,l[M>>2]=D,l[M+4>>2]=a,M=u+-1|0,g){E=0,A=1;do{if(d=22384+(E<<2)|0,(E|0)==5)for(m=l[d>>2]|0,g=0,d=A;;){if(A=j,A=Gt(l[A>>2]|0,l[A+4>>2]|0,m,W,j)|0,A|0)break e;if((g|0)!=(M|0))if(b=j,v=l[b>>2]|0,b=l[b+4>>2]|0,A=f+(d<<3)|0,l[A>>2]=v,l[A+4>>2]=b,!(yt(v,b)|0))A=d+1|0;else{A=9;break e}else A=d;if(g=g+1|0,(g|0)>=(u|0))break;d=A}else for(m=j,b=l[d>>2]|0,v=0,d=A,g=l[m>>2]|0,m=l[m+4>>2]|0;;){if(A=Gt(g,m,b,W,j)|0,A|0)break e;if(m=j,g=l[m>>2]|0,m=l[m+4>>2]|0,A=f+(d<<3)|0,l[A>>2]=g,l[A+4>>2]=m,A=d+1|0,yt(g,m)|0){A=9;break e}if(v=v+1|0,(v|0)>=(u|0))break;d=A}E=E+1|0}while(E>>>0<6);A=j,m=D,d=l[A>>2]|0,g=a,A=l[A+4>>2]|0}else m=D,d=D,g=a,A=a}else m=f,l[m>>2]=A,l[m+4>>2]=a,m=A,d=A,g=a,A=a;A=(m|0)==(d|0)&(g|0)==(A|0)?0:9}while(!1);return W=A,R=V,W|0}function F(A,a,u,f){A=A|0,a=a|0,u=u|0,f=f|0;var d=0,g=0,m=0,v=0,b=0,E=0;if(v=R,R=R+48|0,d=v+16|0,g=v+8|0,m=v,u|0)return m=15,R=v,m|0;if(E=A,b=l[E+4>>2]|0,u=g,l[u>>2]=l[E>>2],l[u+4>>2]=b,_1(g,d),a=e1(d,a,m)|0,!a){if(u=l[g>>2]|0,g=l[A+8>>2]|0,(g|0)>0){d=l[A+12>>2]|0,a=0;do u=(l[d+(a<<3)>>2]|0)+u|0,a=a+1|0;while((a|0)<(g|0))}a=m,d=l[a>>2]|0,a=l[a+4>>2]|0,g=((u|0)<0)<<31>>31,(a|0)<(g|0)|(a|0)==(g|0)&d>>>0<u>>>0?(a=m,l[a>>2]=u,l[a+4>>2]=g,a=g):u=d,b=Ze(u|0,a|0,12,0)|0,E=N()|0,a=m,l[a>>2]=b,l[a+4>>2]=E,a=f,l[a>>2]=b,l[a+4>>2]=E,a=0}return E=a,R=v,E|0}function G(A,a,u,f,d,g,m){A=A|0,a=a|0,u=u|0,f=f|0,d=d|0,g=g|0,m=m|0;var v=0,b=0,E=0,M=0,D=0,j=0,W=0,V=0,$=0,re=0,ee=0,Z=0,K=0,Y=0,ve=0,be=0,he=0,ye=0,ut=0,tt=0,it=0,Qe=0,He=0,Ye=0,ct=0,Ue=0,pt=0,In=0,k1=0;if(ct=R,R=R+64|0,it=ct+48|0,Qe=ct+32|0,He=ct+24|0,ve=ct+8|0,be=ct,b=l[A>>2]|0,(b|0)<=0)return Ye=0,R=ct,Ye|0;for(he=A+4|0,ye=it+8|0,ut=Qe+8|0,tt=ve+8|0,v=0,K=0;;){E=l[he>>2]|0,Z=E+(K<<4)|0,l[it>>2]=l[Z>>2],l[it+4>>2]=l[Z+4>>2],l[it+8>>2]=l[Z+8>>2],l[it+12>>2]=l[Z+12>>2],(K|0)==(b+-1|0)?(l[Qe>>2]=l[E>>2],l[Qe+4>>2]=l[E+4>>2],l[Qe+8>>2]=l[E+8>>2],l[Qe+12>>2]=l[E+12>>2]):(Z=E+(K+1<<4)|0,l[Qe>>2]=l[Z>>2],l[Qe+4>>2]=l[Z+4>>2],l[Qe+8>>2]=l[Z+8>>2],l[Qe+12>>2]=l[Z+12>>2]),b=ox(it,Qe,f,He)|0;e:do if(b)E=0,v=b;else if(E=He,b=l[E>>2]|0,E=l[E+4>>2]|0,(E|0)>0|(E|0)==0&b>>>0>0){ee=0,Z=0;t:for(;;){if(k1=+O[it>>3],re=vn(b|0,E|0,ee|0,Z|0)|0,In=+(re>>>0)+4294967296*+(N()|0),Ue=+(b>>>0)+4294967296*+(E|0),pt=+(ee>>>0)+4294967296*+(Z|0),O[ve>>3]=k1*In/Ue+ +O[Qe>>3]*pt/Ue,O[tt>>3]=+O[ye>>3]*In/Ue+ +O[ut>>3]*pt/Ue,b=c1(ve,f,be)|0,b|0){v=b;break}re=be,$=l[re>>2]|0,re=l[re+4>>2]|0,j=Oo($|0,re|0,a|0,u|0)|0,M=N()|0,b=m+(j<<3)|0,D=b,E=l[D>>2]|0,D=l[D+4>>2]|0;n:do if((E|0)==0&(D|0)==0)Y=b,Ye=16;else for(W=0,V=0;;){if((W|0)>(u|0)|(W|0)==(u|0)&V>>>0>a>>>0){v=1;break t}if((E|0)==($|0)&(D|0)==(re|0))break n;if(b=Ze(j|0,M|0,1,0)|0,j=Pu(b|0,N()|0,a|0,u|0)|0,M=N()|0,V=Ze(V|0,W|0,1,0)|0,W=N()|0,b=m+(j<<3)|0,D=b,E=l[D>>2]|0,D=l[D+4>>2]|0,(E|0)==0&(D|0)==0){Y=b,Ye=16;break}}while(!1);if((Ye|0)==16&&(Ye=0,!(($|0)==0&(re|0)==0))&&(V=Y,l[V>>2]=$,l[V+4>>2]=re,V=g+(l[d>>2]<<3)|0,l[V>>2]=$,l[V+4>>2]=re,V=d,V=Ze(l[V>>2]|0,l[V+4>>2]|0,1,0)|0,$=N()|0,re=d,l[re>>2]=V,l[re+4>>2]=$),ee=Ze(ee|0,Z|0,1,0)|0,Z=N()|0,E=He,b=l[E>>2]|0,E=l[E+4>>2]|0,!((E|0)>(Z|0)|(E|0)==(Z|0)&b>>>0>ee>>>0)){E=1;break e}}E=0}else E=1;while(!1);if(K=K+1|0,!E){Ye=21;break}if(b=l[A>>2]|0,(K|0)>=(b|0)){v=0,Ye=21;break}}return(Ye|0)==21?(R=ct,v|0):0}function J(A,a,u,f){A=A|0,a=a|0,u=u|0,f=f|0;var d=0,g=0,m=0,v=0,b=0,E=0,M=0,D=0,j=0,W=0,V=0,$=0,re=0,ee=0,Z=0,K=0,Y=0,ve=0,be=0,he=0,ye=0,ut=0,tt=0,it=0,Qe=0,He=0,Ye=0,ct=0,Ue=0,pt=0,In=0;if(In=R,R=R+112|0,Ye=In+80|0,b=In+72|0,ct=In,Ue=In+56|0,u|0)return pt=15,R=In,pt|0;if(E=A+8|0,pt=Qr((l[E>>2]<<5)+32|0)|0,!pt)return pt=13,R=In,pt|0;if(AS(A,pt),Qe=A,He=l[Qe+4>>2]|0,u=b,l[u>>2]=l[Qe>>2],l[u+4>>2]=He,_1(b,Ye),u=e1(Ye,a,ct)|0,u)Qe=0,He=0;else{if(u=l[b>>2]|0,g=l[E>>2]|0,(g|0)>0){m=l[A+12>>2]|0,d=0;do u=(l[m+(d<<3)>>2]|0)+u|0,d=d+1|0;while((d|0)!=(g|0));d=u}else d=u;u=ct,g=l[u>>2]|0,u=l[u+4>>2]|0,m=((d|0)<0)<<31>>31,(u|0)<(m|0)|(u|0)==(m|0)&g>>>0<d>>>0?(u=ct,l[u>>2]=d,l[u+4>>2]=m,u=m):d=g,Qe=Ze(d|0,u|0,12,0)|0,He=N()|0,u=ct,l[u>>2]=Qe,l[u+4>>2]=He,u=0}if(u|0)return Ne(pt),pt=u,R=In,pt|0;if(d=Yr(Qe,8)|0,!d)return Ne(pt),pt=13,R=In,pt|0;if(v=Yr(Qe,8)|0,!v)return Ne(pt),Ne(d),pt=13,R=In,pt|0;tt=Ye,l[tt>>2]=0,l[tt+4>>2]=0,tt=A,it=l[tt+4>>2]|0,u=b,l[u>>2]=l[tt>>2],l[u+4>>2]=it,u=G(b,Qe,He,a,Ye,d,v)|0;e:do if(u)Ne(d),Ne(v),Ne(pt);else{t:do if((l[E>>2]|0)>0){for(m=A+12|0,g=0;u=G((l[m>>2]|0)+(g<<3)|0,Qe,He,a,Ye,d,v)|0,g=g+1|0,!(u|0);)if((g|0)>=(l[E>>2]|0))break t;Ne(d),Ne(v),Ne(pt);break e}while(!1);(He|0)>0|(He|0)==0&Qe>>>0>0&&Fs(v|0,0,Qe<<3|0)|0,it=Ye,tt=l[it+4>>2]|0;t:do if((tt|0)>0|(tt|0)==0&(l[it>>2]|0)>>>0>0){he=d,ye=v,ut=d,tt=v,it=d,u=d,Y=d,ve=v,be=v,d=v;n:for(;;){for(re=0,ee=0,Z=0,K=0,g=0,m=0;;){v=ct,b=v+56|0;do l[v>>2]=0,v=v+4|0;while((v|0)<(b|0));if(a=he+(re<<3)|0,E=l[a>>2]|0,a=l[a+4>>2]|0,Po(E,a,1,ct,0)|0){v=ct,b=v+56|0;do l[v>>2]=0,v=v+4|0;while((v|0)<(b|0));v=Yr(7,4)|0,v|0&&(dr(E,a,1,ct,v,7,0,0)|0,Ne(v))}for($=0;;){V=ct+($<<3)|0,W=l[V>>2]|0,V=l[V+4>>2]|0;r:do if((W|0)==0&(V|0)==0)v=g,b=m;else{if(M=Oo(W|0,V|0,Qe|0,He|0)|0,E=N()|0,v=f+(M<<3)|0,a=v,b=l[a>>2]|0,a=l[a+4>>2]|0,!((b|0)==0&(a|0)==0)){D=0,j=0;do{if((D|0)>(He|0)|(D|0)==(He|0)&j>>>0>Qe>>>0)break n;if((b|0)==(W|0)&(a|0)==(V|0)){v=g,b=m;break r}v=Ze(M|0,E|0,1,0)|0,M=Pu(v|0,N()|0,Qe|0,He|0)|0,E=N()|0,j=Ze(j|0,D|0,1,0)|0,D=N()|0,v=f+(M<<3)|0,a=v,b=l[a>>2]|0,a=l[a+4>>2]|0}while(!((b|0)==0&(a|0)==0))}(W|0)==0&(V|0)==0?(v=g,b=m):(wA(W,V,Ue)|0,lS(A,pt,Ue)|0&&(j=Ze(g|0,m|0,1,0)|0,m=N()|0,D=v,l[D>>2]=W,l[D+4>>2]=V,g=ye+(g<<3)|0,l[g>>2]=W,l[g+4>>2]=V,g=j),v=g,b=m)}while(!1);if($=$+1|0,$>>>0>=7)break;g=v,m=b}if(re=Ze(re|0,ee|0,1,0)|0,ee=N()|0,Z=Ze(Z|0,K|0,1,0)|0,K=N()|0,m=Ye,g=l[m>>2]|0,m=l[m+4>>2]|0,(K|0)<(m|0)|(K|0)==(m|0)&Z>>>0<g>>>0)g=v,m=b;else break}if((m|0)>0|(m|0)==0&g>>>0>0){g=0,m=0;do K=he+(g<<3)|0,l[K>>2]=0,l[K+4>>2]=0,g=Ze(g|0,m|0,1,0)|0,m=N()|0,K=Ye,Z=l[K+4>>2]|0;while((m|0)<(Z|0)|((m|0)==(Z|0)?g>>>0<(l[K>>2]|0)>>>0:0))}if(K=Ye,l[K>>2]=v,l[K+4>>2]=b,(b|0)>0|(b|0)==0&v>>>0>0)$=d,re=be,ee=it,Z=ve,K=ye,d=Y,be=u,ve=ut,Y=$,u=re,it=tt,tt=ee,ut=Z,ye=he,he=K;else break t}Ne(ut),Ne(tt),Ne(pt),u=1;break e}else u=v;while(!1);Ne(pt),Ne(d),Ne(u),u=0}while(!1);return pt=u,R=In,pt|0}function oe(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0,m=0,v=0,b=0,E=0,M=0;if(M=R,R=R+176|0,b=M,(a|0)<1)return E1(u,0,0),E=0,R=M,E|0;for(v=A,v=ae(l[v>>2]|0,l[v+4>>2]|0,52)|0,N()|0,E1(u,(a|0)>6?a:6,v&15),v=0;f=A+(v<<3)|0,f=bA(l[f>>2]|0,l[f+4>>2]|0,b)|0,!(f|0);){if(f=l[b>>2]|0,(f|0)>0){m=0;do g=b+8+(m<<4)|0,m=m+1|0,f=b+8+(((m|0)%(f|0)|0)<<4)|0,d=xS(u,f,g)|0,d?S1(u,d)|0:TS(u,g,f)|0,f=l[b>>2]|0;while((m|0)<(f|0))}if(v=v+1|0,(v|0)>=(a|0)){f=0,E=13;break}}return(E|0)==13?(R=M,f|0):(T1(u),E=f,R=M,E|0)}function Ee(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0,m=0;if(g=R,R=R+32|0,f=g,d=g+16|0,A=oe(A,a,d)|0,A|0)return u=A,R=g,u|0;if(l[u>>2]=0,l[u+4>>2]=0,l[u+8>>2]=0,A=x1(d)|0,A|0)do{a=eS(u)|0;do tS(a,A)|0,m=A+16|0,l[f>>2]=l[m>>2],l[f+4>>2]=l[m+4>>2],l[f+8>>2]=l[m+8>>2],l[f+12>>2]=l[m+12>>2],S1(d,A)|0,A=SS(d,f)|0;while(A|0);A=x1(d)|0}while(A|0);return T1(d),A=nS(u)|0,A?(p1(u),m=A,R=g,m|0):(m=0,R=g,m|0)}function Se(A){return A=A|0,A>>>0>121?(A=0,A|0):(A=l[7696+(A*28|0)+16>>2]|0,A|0)}function Dt(A){return A=A|0,(A|0)==4|(A|0)==117|0}function Ht(A){return A=A|0,l[11120+((l[A>>2]|0)*216|0)+((l[A+4>>2]|0)*72|0)+((l[A+8>>2]|0)*24|0)+(l[A+12>>2]<<3)>>2]|0}function An(A){return A=A|0,l[11120+((l[A>>2]|0)*216|0)+((l[A+4>>2]|0)*72|0)+((l[A+8>>2]|0)*24|0)+(l[A+12>>2]<<3)+4>>2]|0}function gr(A,a){A=A|0,a=a|0,A=7696+(A*28|0)|0,l[a>>2]=l[A>>2],l[a+4>>2]=l[A+4>>2],l[a+8>>2]=l[A+8>>2],l[a+12>>2]=l[A+12>>2]}function rx(A,a){A=A|0,a=a|0;var u=0,f=0;if(a>>>0>20)return a=-1,a|0;do if((l[11120+(a*216|0)>>2]|0)!=(A|0))if((l[11120+(a*216|0)+8>>2]|0)!=(A|0))if((l[11120+(a*216|0)+16>>2]|0)!=(A|0))if((l[11120+(a*216|0)+24>>2]|0)!=(A|0))if((l[11120+(a*216|0)+32>>2]|0)!=(A|0))if((l[11120+(a*216|0)+40>>2]|0)!=(A|0))if((l[11120+(a*216|0)+48>>2]|0)!=(A|0))if((l[11120+(a*216|0)+56>>2]|0)!=(A|0))if((l[11120+(a*216|0)+64>>2]|0)!=(A|0))if((l[11120+(a*216|0)+72>>2]|0)!=(A|0))if((l[11120+(a*216|0)+80>>2]|0)!=(A|0))if((l[11120+(a*216|0)+88>>2]|0)!=(A|0))if((l[11120+(a*216|0)+96>>2]|0)!=(A|0))if((l[11120+(a*216|0)+104>>2]|0)!=(A|0))if((l[11120+(a*216|0)+112>>2]|0)!=(A|0))if((l[11120+(a*216|0)+120>>2]|0)!=(A|0))if((l[11120+(a*216|0)+128>>2]|0)!=(A|0))if((l[11120+(a*216|0)+136>>2]|0)==(A|0))A=2,u=1,f=2;else{if((l[11120+(a*216|0)+144>>2]|0)==(A|0)){A=0,u=2,f=0;break}if((l[11120+(a*216|0)+152>>2]|0)==(A|0)){A=0,u=2,f=1;break}if((l[11120+(a*216|0)+160>>2]|0)==(A|0)){A=0,u=2,f=2;break}if((l[11120+(a*216|0)+168>>2]|0)==(A|0)){A=1,u=2,f=0;break}if((l[11120+(a*216|0)+176>>2]|0)==(A|0)){A=1,u=2,f=1;break}if((l[11120+(a*216|0)+184>>2]|0)==(A|0)){A=1,u=2,f=2;break}if((l[11120+(a*216|0)+192>>2]|0)==(A|0)){A=2,u=2,f=0;break}if((l[11120+(a*216|0)+200>>2]|0)==(A|0)){A=2,u=2,f=1;break}if((l[11120+(a*216|0)+208>>2]|0)==(A|0)){A=2,u=2,f=2;break}else A=-1;return A|0}else A=2,u=1,f=1;else A=2,u=1,f=0;else A=1,u=1,f=2;else A=1,u=1,f=1;else A=1,u=1,f=0;else A=0,u=1,f=2;else A=0,u=1,f=1;else A=0,u=1,f=0;else A=2,u=0,f=2;else A=2,u=0,f=1;else A=2,u=0,f=0;else A=1,u=0,f=2;else A=1,u=0,f=1;else A=1,u=0,f=0;else A=0,u=0,f=2;else A=0,u=0,f=1;else A=0,u=0,f=0;while(!1);return a=l[11120+(a*216|0)+(u*72|0)+(A*24|0)+(f<<3)+4>>2]|0,a|0}function Km(A,a){return A=A|0,a=a|0,(l[7696+(A*28|0)+20>>2]|0)==(a|0)?(a=1,a|0):(a=(l[7696+(A*28|0)+24>>2]|0)==(a|0),a|0)}function b0(A,a){return A=A|0,a=a|0,l[848+(A*28|0)+(a<<2)>>2]|0}function E0(A,a){return A=A|0,a=a|0,(l[848+(A*28|0)>>2]|0)==(a|0)?(a=0,a|0):(l[848+(A*28|0)+4>>2]|0)==(a|0)?(a=1,a|0):(l[848+(A*28|0)+8>>2]|0)==(a|0)?(a=2,a|0):(l[848+(A*28|0)+12>>2]|0)==(a|0)?(a=3,a|0):(l[848+(A*28|0)+16>>2]|0)==(a|0)?(a=4,a|0):(l[848+(A*28|0)+20>>2]|0)==(a|0)?(a=5,a|0):((l[848+(A*28|0)+24>>2]|0)==(a|0)?6:7)|0}function ix(){return 122}function sx(A){A=A|0;var a=0,u=0,f=0;a=0;do ge(a|0,0,45)|0,f=N()|0|134225919,u=A+(a<<3)|0,l[u>>2]=-1,l[u+4>>2]=f,a=a+1|0;while((a|0)!=122);return 0}function qm(A){return A=A|0,+O[A+16>>3]<+O[A+24>>3]|0}function Jm(A,a){A=A|0,a=a|0;var u=0,f=0,d=0;return u=+O[a>>3],!(u>=+O[A+8>>3])||!(u<=+O[A>>3])?(a=0,a|0):(f=+O[A+16>>3],u=+O[A+24>>3],d=+O[a+8>>3],a=d>=u,A=d<=f&1,f<u?a&&(A=1):a||(A=0),a=(A|0)!=0,a|0)}function e1(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0,m=0,v=0,b=0,E=0,M=0,D=0,j=0,W=0,V=0,$=0,re=0;V=R,R=R+288|0,M=V+264|0,D=V+96|0,E=V,v=E,b=v+96|0;do l[v>>2]=0,v=v+4|0;while((v|0)<(b|0));return a=R0(a,E)|0,a|0?(W=a,R=V,W|0):(b=E,E=l[b>>2]|0,b=l[b+4>>2]|0,wA(E,b,M)|0,bA(E,b,D)|0,m=+TA(M,D+8|0),O[M>>3]=+O[A>>3],b=M+8|0,O[b>>3]=+O[A+16>>3],O[D>>3]=+O[A+8>>3],E=D+8|0,O[E>>3]=+O[A+24>>3],d=+TA(M,D),re=+O[b>>3]-+O[E>>3],g=+We(+re),$=+O[M>>3]-+O[D>>3],f=+We(+$),!(re==0|$==0)&&(re=+L1(+g,+f),re=+Gi(+(d*d/+B0(+(re/+B0(+g,+f)),3)/(m*(m*2.59807621135)*.8))),O[Ke>>3]=re,j=~~re>>>0,W=+We(re)>=1?re>0?~~+gn(+Vt(re/4294967296),4294967295)>>>0:~~+Gi((re-+(~~re>>>0))/4294967296)>>>0:0,(l[Ke+4>>2]&2146435072|0)!=2146435072)?(D=(j|0)==0&(W|0)==0,a=u,l[a>>2]=D?1:j,l[a+4>>2]=D?0:W,a=0):a=1,W=a,R=V,W|0)}function ox(A,a,u,f){A=A|0,a=a|0,u=u|0,f=f|0;var d=0,g=0,m=0,v=0,b=0,E=0,M=0;E=R,R=R+288|0,m=E+264|0,v=E+96|0,b=E,d=b,g=d+96|0;do l[d>>2]=0,d=d+4|0;while((d|0)<(g|0));return u=R0(u,b)|0,u|0?(f=u,R=E,f|0):(u=b,d=l[u>>2]|0,u=l[u+4>>2]|0,wA(d,u,m)|0,bA(d,u,v)|0,M=+TA(m,v+8|0),M=+Gi(+(+TA(A,a)/(M*2))),O[Ke>>3]=M,u=~~M>>>0,d=+We(M)>=1?M>0?~~+gn(+Vt(M/4294967296),4294967295)>>>0:~~+Gi((M-+(~~M>>>0))/4294967296)>>>0:0,(l[Ke+4>>2]&2146435072|0)==2146435072?(f=1,R=E,f|0):(b=(u|0)==0&(d|0)==0,l[f>>2]=b?1:u,l[f+4>>2]=b?0:d,f=0,R=E,f|0))}function ax(A,a,u,f){A=A|0,a=a|0,u=u|0,f=f|0,l[A>>2]=a,l[A+4>>2]=u,l[A+8>>2]=f}function Ax(A,a){A=A|0,a=a|0;var u=0,f=0,d=0,g=0,m=0,v=0,b=0,E=0,M=0,D=0,j=0;D=a+8|0,l[D>>2]=0,b=+O[A>>3],m=+We(+b),E=+O[A+8>>3],v=+We(+E)/.8660254037844386,m=m+v*.5,u=~~m,A=~~v,m=m-+(u|0),v=v-+(A|0);do if(m<.5)if(m<.3333333333333333)if(l[a>>2]=u,v<(m+1)*.5){l[a+4>>2]=A;break}else{A=A+1|0,l[a+4>>2]=A;break}else if(j=1-m,A=(!(v<j)&1)+A|0,l[a+4>>2]=A,j<=v&v<m*2){u=u+1|0,l[a>>2]=u;break}else{l[a>>2]=u;break}else{if(!(m<.6666666666666666))if(u=u+1|0,l[a>>2]=u,v<m*.5){l[a+4>>2]=A;break}else{A=A+1|0,l[a+4>>2]=A;break}if(v<1-m){if(l[a+4>>2]=A,m*2+-1<v){l[a>>2]=u;break}}else A=A+1|0,l[a+4>>2]=A;u=u+1|0,l[a>>2]=u}while(!1);do if(b<0)if(A&1){M=(A+1|0)/2|0,M=vn(u|0,((u|0)<0)<<31>>31|0,M|0,((M|0)<0)<<31>>31|0)|0,u=~~(+(u|0)-((+(M>>>0)+4294967296*+(N()|0))*2+1)),l[a>>2]=u;break}else{M=(A|0)/2|0,M=vn(u|0,((u|0)<0)<<31>>31|0,M|0,((M|0)<0)<<31>>31|0)|0,u=~~(+(u|0)-(+(M>>>0)+4294967296*+(N()|0))*2),l[a>>2]=u;break}while(!1);M=a+4|0,E<0&&(u=u-((A<<1|1|0)/2|0)|0,l[a>>2]=u,A=0-A|0,l[M>>2]=A),f=A-u|0,(u|0)<0?(d=0-u|0,l[M>>2]=f,l[D>>2]=d,l[a>>2]=0,A=f,u=0):d=0,(A|0)<0&&(u=u-A|0,l[a>>2]=u,d=d-A|0,l[D>>2]=d,l[M>>2]=0,A=0),g=u-d|0,f=A-d|0,(d|0)<0&&(l[a>>2]=g,l[M>>2]=f,l[D>>2]=0,A=f,u=g,d=0),f=(A|0)<(u|0)?A:u,f=(d|0)<(f|0)?d:f,!((f|0)<=0)&&(l[a>>2]=u-f,l[M>>2]=A-f,l[D>>2]=d-f)}function mn(A){A=A|0;var a=0,u=0,f=0,d=0,g=0,m=0;a=l[A>>2]|0,m=A+4|0,u=l[m>>2]|0,(a|0)<0&&(u=u-a|0,l[m>>2]=u,g=A+8|0,l[g>>2]=(l[g>>2]|0)-a,l[A>>2]=0,a=0),(u|0)<0?(a=a-u|0,l[A>>2]=a,g=A+8|0,d=(l[g>>2]|0)-u|0,l[g>>2]=d,l[m>>2]=0,u=0):(d=A+8|0,g=d,d=l[d>>2]|0),(d|0)<0&&(a=a-d|0,l[A>>2]=a,u=u-d|0,l[m>>2]=u,l[g>>2]=0,d=0),f=(u|0)<(a|0)?u:a,f=(d|0)<(f|0)?d:f,!((f|0)<=0)&&(l[A>>2]=a-f,l[m>>2]=u-f,l[g>>2]=d-f)}function ks(A,a){A=A|0,a=a|0;var u=0,f=0;f=l[A+8>>2]|0,u=+((l[A+4>>2]|0)-f|0),O[a>>3]=+((l[A>>2]|0)-f|0)-u*.5,O[a+8>>3]=u*.8660254037844386}function kn(A,a,u){A=A|0,a=a|0,u=u|0,l[u>>2]=(l[a>>2]|0)+(l[A>>2]|0),l[u+4>>2]=(l[a+4>>2]|0)+(l[A+4>>2]|0),l[u+8>>2]=(l[a+8>>2]|0)+(l[A+8>>2]|0)}function T0(A,a,u){A=A|0,a=a|0,u=u|0,l[u>>2]=(l[A>>2]|0)-(l[a>>2]|0),l[u+4>>2]=(l[A+4>>2]|0)-(l[a+4>>2]|0),l[u+8>>2]=(l[A+8>>2]|0)-(l[a+8>>2]|0)}function t1(A,a){A=A|0,a=a|0;var u=0,f=0;u=Pn(l[A>>2]|0,a)|0,l[A>>2]=u,u=A+4|0,f=Pn(l[u>>2]|0,a)|0,l[u>>2]=f,A=A+8|0,a=Pn(l[A>>2]|0,a)|0,l[A>>2]=a}function xu(A){A=A|0;var a=0,u=0,f=0,d=0,g=0,m=0,v=0;m=l[A>>2]|0,v=(m|0)<0,f=(l[A+4>>2]|0)-(v?m:0)|0,g=(f|0)<0,d=(g?0-f|0:0)+((l[A+8>>2]|0)-(v?m:0))|0,u=(d|0)<0,A=u?0:d,a=(g?0:f)-(u?d:0)|0,d=(v?0:m)-(g?f:0)-(u?d:0)|0,u=(a|0)<(d|0)?a:d,u=(A|0)<(u|0)?A:u,f=(u|0)>0,A=A-(f?u:0)|0,a=a-(f?u:0)|0;e:do switch(d-(f?u:0)|0){case 0:switch(a|0){case 0:return v=A|0?(A|0)==1?1:7:0,v|0;case 1:return v=A|0?(A|0)==1?3:7:2,v|0;default:break e}case 1:switch(a|0){case 0:return v=A|0?(A|0)==1?5:7:4,v|0;case 1:{if(!A)A=6;else break e;return A|0}default:break e}}while(!1);return v=7,v|0}function lx(A){A=A|0;var a=0,u=0,f=0,d=0,g=0,m=0,v=0;m=A+8|0,d=l[m>>2]|0,g=(l[A>>2]|0)-d|0,v=A+4|0,d=(l[v>>2]|0)-d|0;do if(g>>>0>715827881|d>>>0>715827881){if(u=(g|0)>0,u){if((2147483647-g|0)<(g|0)||(2147483647-(g<<1)|0)<(g|0))return v=1,v|0}else if((-2147483648-g|0)>(g|0)||(-2147483648-(g<<1)|0)>(g|0))return v=1,v|0;if(a=g*3|0,(d|0)>0){if((2147483647-d|0)<(d|0))return v=1,v|0}else if((-2147483648-d|0)>(d|0))return v=1,v|0;if(f=d<<1,(g|0)>-1){if((a|-2147483648|0)>=(d|0))return v=1,v|0}else if((a^-2147483648|0)<(d|0))return v=1,v|0;if(u){if((2147483647-g|0)<(f|0))a=1;else{u=f;break}return a|0}else{if((-2147483648-g|0)>(f|0))a=1;else{u=f;break}return a|0}}else u=d<<1,a=g*3|0;while(!1);f=Yi(+(a-d|0)/7)|0,l[A>>2]=f,d=Yi(+(u+g|0)/7)|0,l[v>>2]=d,l[m>>2]=0,u=(d|0)<(f|0),a=u?f:d,u=u?d:f;do if((u|0)<0){if((a|0)>0){if((a|-2147483648|0)<(u|0)&((u|0)!=-2147483648&(2147483647-a|0)>=(u|0)))break;Me(23313,22444,355,22455)}if((u|0)==-2147483648|(-2147483648-a|0)>(u|0)&&Me(23313,22444,355,22455),(a|0)>-1){if((a|-2147483648|0)<(u|0))break;Me(23313,22444,355,22455)}else{if((a^-2147483648|0)>=(u|0))break;Me(23313,22444,355,22455)}}while(!1);return a=d-f|0,(f|0)<0?(u=0-f|0,l[v>>2]=a,l[m>>2]=u,l[A>>2]=0,f=0):(a=d,u=0),(a|0)<0&&(f=f-a|0,l[A>>2]=f,u=u-a|0,l[m>>2]=u,l[v>>2]=0,a=0),g=f-u|0,d=a-u|0,(u|0)<0?(l[A>>2]=g,l[v>>2]=d,l[m>>2]=0,a=d,d=g,u=0):d=f,f=(a|0)<(d|0)?a:d,f=(u|0)<(f|0)?u:f,(f|0)<=0?(v=0,v|0):(l[A>>2]=d-f,l[v>>2]=a-f,l[m>>2]=u-f,v=0,v|0)}function ux(A){A=A|0;var a=0,u=0,f=0,d=0,g=0,m=0,v=0;m=A+8|0,d=l[m>>2]|0,g=(l[A>>2]|0)-d|0,v=A+4|0,d=(l[v>>2]|0)-d|0;do if(g>>>0>715827881|d>>>0>715827881){if(u=(g|0)>0,u){if((2147483647-g|0)<(g|0))return v=1,v|0}else if((-2147483648-g|0)>(g|0))return v=1,v|0;if(a=g<<1,(d|0)>0){if((2147483647-d|0)<(d|0)||(2147483647-(d<<1)|0)<(d|0))return v=1,v|0}else if((-2147483648-d|0)>(d|0)||(-2147483648-(d<<1)|0)>(d|0))return v=1,v|0;if(f=d*3|0,u){if((2147483647-a|0)<(d|0))return v=1,v|0}else if((-2147483648-a|0)>(d|0))return v=1,v|0;if((d|0)>-1){if((f|-2147483648|0)<(g|0)){u=f;break}else a=1;return a|0}else{if((f^-2147483648|0)<(g|0))a=1;else{u=f;break}return a|0}}else u=d*3|0,a=g<<1;while(!1);f=Yi(+(a+d|0)/7)|0,l[A>>2]=f,d=Yi(+(u-g|0)/7)|0,l[v>>2]=d,l[m>>2]=0,u=(d|0)<(f|0),a=u?f:d,u=u?d:f;do if((u|0)<0){if((a|0)>0){if((a|-2147483648|0)<(u|0)&((u|0)!=-2147483648&(2147483647-a|0)>=(u|0)))break;Me(23313,22444,404,22469)}if((u|0)==-2147483648|(-2147483648-a|0)>(u|0)&&Me(23313,22444,404,22469),(a|0)>-1){if((a|-2147483648|0)<(u|0))break;Me(23313,22444,404,22469)}else{if((a^-2147483648|0)>=(u|0))break;Me(23313,22444,404,22469)}}while(!1);return a=d-f|0,(f|0)<0?(u=0-f|0,l[v>>2]=a,l[m>>2]=u,l[A>>2]=0,f=0):(a=d,u=0),(a|0)<0&&(f=f-a|0,l[A>>2]=f,u=u-a|0,l[m>>2]=u,l[v>>2]=0,a=0),g=f-u|0,d=a-u|0,(u|0)<0?(l[A>>2]=g,l[v>>2]=d,l[m>>2]=0,a=d,d=g,u=0):d=f,f=(a|0)<(d|0)?a:d,f=(u|0)<(f|0)?u:f,(f|0)<=0?(v=0,v|0):(l[A>>2]=d-f,l[v>>2]=a-f,l[m>>2]=u-f,v=0,v|0)}function cx(A){A=A|0;var a=0,u=0,f=0,d=0,g=0,m=0,v=0;m=A+8|0,u=l[m>>2]|0,a=(l[A>>2]|0)-u|0,v=A+4|0,u=(l[v>>2]|0)-u|0,f=Yi(+((a*3|0)-u|0)/7)|0,l[A>>2]=f,a=Yi(+((u<<1)+a|0)/7)|0,l[v>>2]=a,l[m>>2]=0,u=a-f|0,(f|0)<0?(g=0-f|0,l[v>>2]=u,l[m>>2]=g,l[A>>2]=0,a=u,f=0,u=g):u=0,(a|0)<0&&(f=f-a|0,l[A>>2]=f,u=u-a|0,l[m>>2]=u,l[v>>2]=0,a=0),g=f-u|0,d=a-u|0,(u|0)<0?(l[A>>2]=g,l[v>>2]=d,l[m>>2]=0,a=d,d=g,u=0):d=f,f=(a|0)<(d|0)?a:d,f=(u|0)<(f|0)?u:f,!((f|0)<=0)&&(l[A>>2]=d-f,l[v>>2]=a-f,l[m>>2]=u-f)}function n1(A){A=A|0;var a=0,u=0,f=0,d=0,g=0,m=0,v=0;m=A+8|0,u=l[m>>2]|0,a=(l[A>>2]|0)-u|0,v=A+4|0,u=(l[v>>2]|0)-u|0,f=Yi(+((a<<1)+u|0)/7)|0,l[A>>2]=f,a=Yi(+((u*3|0)-a|0)/7)|0,l[v>>2]=a,l[m>>2]=0,u=a-f|0,(f|0)<0?(g=0-f|0,l[v>>2]=u,l[m>>2]=g,l[A>>2]=0,a=u,f=0,u=g):u=0,(a|0)<0&&(f=f-a|0,l[A>>2]=f,u=u-a|0,l[m>>2]=u,l[v>>2]=0,a=0),g=f-u|0,d=a-u|0,(u|0)<0?(l[A>>2]=g,l[v>>2]=d,l[m>>2]=0,a=d,d=g,u=0):d=f,f=(a|0)<(d|0)?a:d,f=(u|0)<(f|0)?u:f,!((f|0)<=0)&&(l[A>>2]=d-f,l[v>>2]=a-f,l[m>>2]=u-f)}function Su(A){A=A|0;var a=0,u=0,f=0,d=0,g=0,m=0,v=0;a=l[A>>2]|0,m=A+4|0,u=l[m>>2]|0,v=A+8|0,f=l[v>>2]|0,d=u+(a*3|0)|0,l[A>>2]=d,u=f+(u*3|0)|0,l[m>>2]=u,a=(f*3|0)+a|0,l[v>>2]=a,f=u-d|0,(d|0)<0?(a=a-d|0,l[m>>2]=f,l[v>>2]=a,l[A>>2]=0,u=f,f=0):f=d,(u|0)<0&&(f=f-u|0,l[A>>2]=f,a=a-u|0,l[v>>2]=a,l[m>>2]=0,u=0),g=f-a|0,d=u-a|0,(a|0)<0?(l[A>>2]=g,l[m>>2]=d,l[v>>2]=0,f=g,a=0):d=u,u=(d|0)<(f|0)?d:f,u=(a|0)<(u|0)?a:u,!((u|0)<=0)&&(l[A>>2]=f-u,l[m>>2]=d-u,l[v>>2]=a-u)}function Is(A){A=A|0;var a=0,u=0,f=0,d=0,g=0,m=0,v=0;d=l[A>>2]|0,m=A+4|0,a=l[m>>2]|0,v=A+8|0,u=l[v>>2]|0,f=(a*3|0)+d|0,d=u+(d*3|0)|0,l[A>>2]=d,l[m>>2]=f,a=(u*3|0)+a|0,l[v>>2]=a,u=f-d|0,(d|0)<0?(a=a-d|0,l[m>>2]=u,l[v>>2]=a,l[A>>2]=0,d=0):u=f,(u|0)<0&&(d=d-u|0,l[A>>2]=d,a=a-u|0,l[v>>2]=a,l[m>>2]=0,u=0),g=d-a|0,f=u-a|0,(a|0)<0?(l[A>>2]=g,l[m>>2]=f,l[v>>2]=0,d=g,a=0):f=u,u=(f|0)<(d|0)?f:d,u=(a|0)<(u|0)?a:u,!((u|0)<=0)&&(l[A>>2]=d-u,l[m>>2]=f-u,l[v>>2]=a-u)}function r1(A,a){A=A|0,a=a|0;var u=0,f=0,d=0,g=0,m=0,v=0;(a+-1|0)>>>0>=6||(d=(l[15440+(a*12|0)>>2]|0)+(l[A>>2]|0)|0,l[A>>2]=d,v=A+4|0,f=(l[15440+(a*12|0)+4>>2]|0)+(l[v>>2]|0)|0,l[v>>2]=f,m=A+8|0,a=(l[15440+(a*12|0)+8>>2]|0)+(l[m>>2]|0)|0,l[m>>2]=a,u=f-d|0,(d|0)<0?(a=a-d|0,l[v>>2]=u,l[m>>2]=a,l[A>>2]=0,f=0):(u=f,f=d),(u|0)<0&&(f=f-u|0,l[A>>2]=f,a=a-u|0,l[m>>2]=a,l[v>>2]=0,u=0),g=f-a|0,d=u-a|0,(a|0)<0?(l[A>>2]=g,l[v>>2]=d,l[m>>2]=0,f=g,a=0):d=u,u=(d|0)<(f|0)?d:f,u=(a|0)<(u|0)?a:u,!((u|0)<=0)&&(l[A>>2]=f-u,l[v>>2]=d-u,l[m>>2]=a-u))}function i1(A){A=A|0;var a=0,u=0,f=0,d=0,g=0,m=0,v=0;d=l[A>>2]|0,m=A+4|0,a=l[m>>2]|0,v=A+8|0,u=l[v>>2]|0,f=a+d|0,d=u+d|0,l[A>>2]=d,l[m>>2]=f,a=u+a|0,l[v>>2]=a,u=f-d|0,(d|0)<0?(a=a-d|0,l[m>>2]=u,l[v>>2]=a,l[A>>2]=0,f=0):(u=f,f=d),(u|0)<0&&(f=f-u|0,l[A>>2]=f,a=a-u|0,l[v>>2]=a,l[m>>2]=0,u=0),g=f-a|0,d=u-a|0,(a|0)<0?(l[A>>2]=g,l[m>>2]=d,l[v>>2]=0,f=g,a=0):d=u,u=(d|0)<(f|0)?d:f,u=(a|0)<(u|0)?a:u,!((u|0)<=0)&&(l[A>>2]=f-u,l[m>>2]=d-u,l[v>>2]=a-u)}function Cu(A){A=A|0;var a=0,u=0,f=0,d=0,g=0,m=0,v=0;a=l[A>>2]|0,m=A+4|0,f=l[m>>2]|0,v=A+8|0,u=l[v>>2]|0,d=f+a|0,l[A>>2]=d,f=u+f|0,l[m>>2]=f,a=u+a|0,l[v>>2]=a,u=f-d|0,(d|0)<0?(a=a-d|0,l[m>>2]=u,l[v>>2]=a,l[A>>2]=0,f=0):(u=f,f=d),(u|0)<0&&(f=f-u|0,l[A>>2]=f,a=a-u|0,l[v>>2]=a,l[m>>2]=0,u=0),g=f-a|0,d=u-a|0,(a|0)<0?(l[A>>2]=g,l[m>>2]=d,l[v>>2]=0,f=g,a=0):d=u,u=(d|0)<(f|0)?d:f,u=(a|0)<(u|0)?a:u,!((u|0)<=0)&&(l[A>>2]=f-u,l[m>>2]=d-u,l[v>>2]=a-u)}function Rs(A){switch(A=A|0,A|0){case 1:{A=5;break}case 5:{A=4;break}case 4:{A=6;break}case 6:{A=2;break}case 2:{A=3;break}case 3:{A=1;break}}return A|0}function Wi(A){switch(A=A|0,A|0){case 1:{A=3;break}case 3:{A=2;break}case 2:{A=6;break}case 6:{A=4;break}case 4:{A=5;break}case 5:{A=1;break}}return A|0}function s1(A){A=A|0;var a=0,u=0,f=0,d=0,g=0,m=0,v=0;a=l[A>>2]|0,m=A+4|0,u=l[m>>2]|0,v=A+8|0,f=l[v>>2]|0,d=u+(a<<1)|0,l[A>>2]=d,u=f+(u<<1)|0,l[m>>2]=u,a=(f<<1)+a|0,l[v>>2]=a,f=u-d|0,(d|0)<0?(a=a-d|0,l[m>>2]=f,l[v>>2]=a,l[A>>2]=0,u=f,f=0):f=d,(u|0)<0&&(f=f-u|0,l[A>>2]=f,a=a-u|0,l[v>>2]=a,l[m>>2]=0,u=0),g=f-a|0,d=u-a|0,(a|0)<0?(l[A>>2]=g,l[m>>2]=d,l[v>>2]=0,f=g,a=0):d=u,u=(d|0)<(f|0)?d:f,u=(a|0)<(u|0)?a:u,!((u|0)<=0)&&(l[A>>2]=f-u,l[m>>2]=d-u,l[v>>2]=a-u)}function o1(A){A=A|0;var a=0,u=0,f=0,d=0,g=0,m=0,v=0;d=l[A>>2]|0,m=A+4|0,a=l[m>>2]|0,v=A+8|0,u=l[v>>2]|0,f=(a<<1)+d|0,d=u+(d<<1)|0,l[A>>2]=d,l[m>>2]=f,a=(u<<1)+a|0,l[v>>2]=a,u=f-d|0,(d|0)<0?(a=a-d|0,l[m>>2]=u,l[v>>2]=a,l[A>>2]=0,d=0):u=f,(u|0)<0&&(d=d-u|0,l[A>>2]=d,a=a-u|0,l[v>>2]=a,l[m>>2]=0,u=0),g=d-a|0,f=u-a|0,(a|0)<0?(l[A>>2]=g,l[m>>2]=f,l[v>>2]=0,d=g,a=0):f=u,u=(f|0)<(d|0)?f:d,u=(a|0)<(u|0)?a:u,!((u|0)<=0)&&(l[A>>2]=d-u,l[m>>2]=f-u,l[v>>2]=a-u)}function x0(A,a){A=A|0,a=a|0;var u=0,f=0,d=0,g=0,m=0,v=0;return m=(l[A>>2]|0)-(l[a>>2]|0)|0,v=(m|0)<0,f=(l[A+4>>2]|0)-(l[a+4>>2]|0)-(v?m:0)|0,g=(f|0)<0,d=(v?0-m|0:0)+(l[A+8>>2]|0)-(l[a+8>>2]|0)+(g?0-f|0:0)|0,A=(d|0)<0,a=A?0:d,u=(g?0:f)-(A?d:0)|0,d=(v?0:m)-(g?f:0)-(A?d:0)|0,A=(u|0)<(d|0)?u:d,A=(a|0)<(A|0)?a:A,f=(A|0)>0,a=a-(f?A:0)|0,u=u-(f?A:0)|0,A=d-(f?A:0)|0,A=(A|0)>-1?A:0-A|0,u=(u|0)>-1?u:0-u|0,a=(a|0)>-1?a:0-a|0,a=(u|0)>(a|0)?u:a,((A|0)>(a|0)?A:a)|0}function fx(A,a){A=A|0,a=a|0;var u=0;u=l[A+8>>2]|0,l[a>>2]=(l[A>>2]|0)-u,l[a+4>>2]=(l[A+4>>2]|0)-u}function hx(A,a){A=A|0,a=a|0;var u=0,f=0,d=0,g=0,m=0,v=0;f=l[A>>2]|0,l[a>>2]=f,d=l[A+4>>2]|0,m=a+4|0,l[m>>2]=d,v=a+8|0,l[v>>2]=0,u=(d|0)<(f|0),A=u?f:d,u=u?d:f;do if((u|0)<0){if((A|0)>0){if((A|-2147483648|0)<(u|0)&((u|0)!=-2147483648&(2147483647-A|0)>=(u|0)))break;return A=1,A|0}if((u|0)==-2147483648|(-2147483648-A|0)>(u|0))return a=1,a|0;if((A|0)>-1){if((A|-2147483648|0)<(u|0))break;return A=1,A|0}else{if((A^-2147483648|0)<(u|0))A=1;else break;return A|0}}while(!1);return A=d-f|0,(f|0)<0?(u=0-f|0,l[m>>2]=A,l[v>>2]=u,l[a>>2]=0,f=0):(A=d,u=0),(A|0)<0&&(f=f-A|0,l[a>>2]=f,u=u-A|0,l[v>>2]=u,l[m>>2]=0,A=0),g=f-u|0,d=A-u|0,(u|0)<0?(l[a>>2]=g,l[m>>2]=d,l[v>>2]=0,A=d,d=g,u=0):d=f,f=(A|0)<(d|0)?A:d,f=(u|0)<(f|0)?u:f,(f|0)<=0?(a=0,a|0):(l[a>>2]=d-f,l[m>>2]=A-f,l[v>>2]=u-f,a=0,a|0)}function a1(A){A=A|0;var a=0,u=0,f=0,d=0;a=A+8|0,d=l[a>>2]|0,u=d-(l[A>>2]|0)|0,l[A>>2]=u,f=A+4|0,A=(l[f>>2]|0)-d|0,l[f>>2]=A,l[a>>2]=0-(A+u)}function dx(A){A=A|0;var a=0,u=0,f=0,d=0,g=0,m=0,v=0;u=l[A>>2]|0,a=0-u|0,l[A>>2]=a,m=A+8|0,l[m>>2]=0,v=A+4|0,f=l[v>>2]|0,d=f+u|0,(u|0)>0?(l[v>>2]=d,l[m>>2]=u,l[A>>2]=0,a=0,f=d):u=0,(f|0)<0?(g=a-f|0,l[A>>2]=g,u=u-f|0,l[m>>2]=u,l[v>>2]=0,d=g-u|0,a=0-u|0,(u|0)<0?(l[A>>2]=d,l[v>>2]=a,l[m>>2]=0,f=a,u=0):(f=0,d=g)):d=a,a=(f|0)<(d|0)?f:d,a=(u|0)<(a|0)?u:a,!((a|0)<=0)&&(l[A>>2]=d-a,l[v>>2]=f-a,l[m>>2]=u-a)}function gx(A,a,u,f,d){A=A|0,a=a|0,u=u|0,f=f|0,d=d|0;var g=0,m=0,v=0,b=0,E=0,M=0,D=0;if(D=R,R=R+64|0,M=D,v=D+56|0,!(!0&(a&2013265920|0)==134217728&(!0&(f&2013265920|0)==134217728)))return d=5,R=D,d|0;if((A|0)==(u|0)&(a|0)==(f|0))return l[d>>2]=0,d=0,R=D,d|0;if(m=ae(A|0,a|0,52)|0,N()|0,m=m&15,E=ae(u|0,f|0,52)|0,N()|0,(m|0)!=(E&15|0))return d=12,R=D,d|0;if(g=m+-1|0,m>>>0>1){L0(A,a,g,M)|0,L0(u,f,g,v)|0,E=M,b=l[E>>2]|0,E=l[E+4>>2]|0;e:do if((b|0)==(l[v>>2]|0)&&(E|0)==(l[v+4>>2]|0)){m=(m^15)*3|0,g=ae(A|0,a|0,m|0)|0,N()|0,g=g&7,m=ae(u|0,f|0,m|0)|0,N()|0,m=m&7;do if((g|0)==0|(m|0)==0)l[d>>2]=1,g=0;else if((g|0)==7)g=5;else{if((g|0)==1|(m|0)==1&&yt(b,E)|0){g=5;break}if((l[15536+(g<<2)>>2]|0)!=(m|0)&&(l[15568+(g<<2)>>2]|0)!=(m|0))break e;l[d>>2]=1,g=0}while(!1);return d=g,R=D,d|0}while(!1)}g=M,m=g+56|0;do l[g>>2]=0,g=g+4|0;while((g|0)<(m|0));return Tu(A,a,1,M)|0,a=M,!((l[a>>2]|0)==(u|0)&&(l[a+4>>2]|0)==(f|0))&&(a=M+8|0,!((l[a>>2]|0)==(u|0)&&(l[a+4>>2]|0)==(f|0)))&&(a=M+16|0,!((l[a>>2]|0)==(u|0)&&(l[a+4>>2]|0)==(f|0)))&&(a=M+24|0,!((l[a>>2]|0)==(u|0)&&(l[a+4>>2]|0)==(f|0)))&&(a=M+32|0,!((l[a>>2]|0)==(u|0)&&(l[a+4>>2]|0)==(f|0)))&&(a=M+40|0,!((l[a>>2]|0)==(u|0)&&(l[a+4>>2]|0)==(f|0)))?(g=M+48|0,g=((l[g>>2]|0)==(u|0)?(l[g+4>>2]|0)==(f|0):0)&1):g=1,l[d>>2]=g,d=0,R=D,d|0}function px(A,a,u,f,d){return A=A|0,a=a|0,u=u|0,f=f|0,d=d|0,u=yA(A,a,u,f)|0,(u|0)==7?(d=11,d|0):(f=ge(u|0,0,56)|0,a=a&-2130706433|(N()|0)|268435456,l[d>>2]=A|f,l[d+4>>2]=a,d=0,d|0)}function mx(A,a,u){return A=A|0,a=a|0,u=u|0,!0&(a&2013265920|0)==268435456?(l[u>>2]=A,l[u+4>>2]=a&-2130706433|134217728,u=0,u|0):(u=6,u|0)}function vx(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0;return d=R,R=R+16|0,f=d,l[f>>2]=0,!0&(a&2013265920|0)==268435456?(g=ae(A|0,a|0,56)|0,N()|0,f=Gt(A,a&-2130706433|134217728,g&7,f,u)|0,R=d,f|0):(f=6,R=d,f|0)}function yx(A,a){A=A|0,a=a|0;var u=0;switch(u=ae(A|0,a|0,56)|0,N()|0,u&7){case 0:case 7:return u=0,u|0}return u=a&-2130706433|134217728,!(!0&(a&2013265920|0)==268435456)||!0&(a&117440512|0)==16777216&(yt(A,u)|0)!=0?(u=0,u|0):(u=M0(A,u)|0,u|0)}function _x(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0,m=0;return d=R,R=R+16|0,f=d,!0&(a&2013265920|0)==268435456?(g=a&-2130706433|134217728,m=u,l[m>>2]=A,l[m+4>>2]=g,l[f>>2]=0,a=ae(A|0,a|0,56)|0,N()|0,f=Gt(A,g,a&7,f,u+8|0)|0,R=d,f|0):(f=6,R=d,f|0)}function wx(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0;return d=(yt(A,a)|0)==0,a=a&-2130706433,f=u,l[f>>2]=d?A:0,l[f+4>>2]=d?a|285212672:0,f=u+8|0,l[f>>2]=A,l[f+4>>2]=a|301989888,f=u+16|0,l[f>>2]=A,l[f+4>>2]=a|318767104,f=u+24|0,l[f>>2]=A,l[f+4>>2]=a|335544320,f=u+32|0,l[f>>2]=A,l[f+4>>2]=a|352321536,u=u+40|0,l[u>>2]=A,l[u+4>>2]=a|369098752,0}function Mu(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0,m=0;return m=R,R=R+16|0,d=m,g=a&-2130706433|134217728,!0&(a&2013265920|0)==268435456?(f=ae(A|0,a|0,56)|0,N()|0,f=_S(A,g,f&7)|0,(f|0)==-1?(l[u>>2]=0,g=6,R=m,g|0):(Io(A,g,d)|0&&Me(23313,22484,282,22499),a=ae(A|0,a|0,52)|0,N()|0,a=a&15,yt(A,g)|0?S0(d,a,f,2,u):C0(d,a,f,2,u),g=0,R=m,g|0)):(g=6,R=m,g|0)}function bx(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0;f=R,R=R+16|0,d=f,Ex(A,a,u,d),Ax(d,u+4|0),R=f}function Ex(A,a,u,f){A=A|0,a=a|0,u=u|0,f=f|0;var d=0,g=0,m=0,v=0,b=0;if(v=R,R=R+16|0,b=v,Tx(A,u,b),g=+Hr(+(1-+O[b>>3]*.5)),g<1e-16){l[f>>2]=0,l[f+4>>2]=0,l[f+8>>2]=0,l[f+12>>2]=0,R=v;return}if(b=l[u>>2]|0,d=+O[15920+(b*24|0)>>3],d=+EA(d-+EA(+Gx(15600+(b<<4)|0,A))),pr(a)|0?m=+EA(d+-.3334731722518321):m=d,d=+Jt(+g)/.381966011250105,(a|0)>0){A=0;do d=d*2.6457513110645907,A=A+1|0;while((A|0)!=(a|0))}g=+rt(+m)*d,O[f>>3]=g,m=+De(+m)*d,O[f+8>>3]=m,R=v}function Tx(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0;if(g=R,R=R+32|0,d=g,yS(A,d),l[a>>2]=0,O[u>>3]=5,f=+Wt(16400,d),f<+O[u>>3]&&(l[a>>2]=0,O[u>>3]=f),f=+Wt(16424,d),f<+O[u>>3]&&(l[a>>2]=1,O[u>>3]=f),f=+Wt(16448,d),f<+O[u>>3]&&(l[a>>2]=2,O[u>>3]=f),f=+Wt(16472,d),f<+O[u>>3]&&(l[a>>2]=3,O[u>>3]=f),f=+Wt(16496,d),f<+O[u>>3]&&(l[a>>2]=4,O[u>>3]=f),f=+Wt(16520,d),f<+O[u>>3]&&(l[a>>2]=5,O[u>>3]=f),f=+Wt(16544,d),f<+O[u>>3]&&(l[a>>2]=6,O[u>>3]=f),f=+Wt(16568,d),f<+O[u>>3]&&(l[a>>2]=7,O[u>>3]=f),f=+Wt(16592,d),f<+O[u>>3]&&(l[a>>2]=8,O[u>>3]=f),f=+Wt(16616,d),f<+O[u>>3]&&(l[a>>2]=9,O[u>>3]=f),f=+Wt(16640,d),f<+O[u>>3]&&(l[a>>2]=10,O[u>>3]=f),f=+Wt(16664,d),f<+O[u>>3]&&(l[a>>2]=11,O[u>>3]=f),f=+Wt(16688,d),f<+O[u>>3]&&(l[a>>2]=12,O[u>>3]=f),f=+Wt(16712,d),f<+O[u>>3]&&(l[a>>2]=13,O[u>>3]=f),f=+Wt(16736,d),f<+O[u>>3]&&(l[a>>2]=14,O[u>>3]=f),f=+Wt(16760,d),f<+O[u>>3]&&(l[a>>2]=15,O[u>>3]=f),f=+Wt(16784,d),f<+O[u>>3]&&(l[a>>2]=16,O[u>>3]=f),f=+Wt(16808,d),f<+O[u>>3]&&(l[a>>2]=17,O[u>>3]=f),f=+Wt(16832,d),f<+O[u>>3]&&(l[a>>2]=18,O[u>>3]=f),f=+Wt(16856,d),!(f<+O[u>>3])){R=g;return}l[a>>2]=19,O[u>>3]=f,R=g}function _A(A,a,u,f,d){A=A|0,a=a|0,u=u|0,f=f|0,d=d|0;var g=0,m=0;if(g=+vS(A),g<1e-16){a=15600+(a<<4)|0,l[d>>2]=l[a>>2],l[d+4>>2]=l[a+4>>2],l[d+8>>2]=l[a+8>>2],l[d+12>>2]=l[a+12>>2];return}if(m=+Vn(+ +O[A+8>>3],+ +O[A>>3]),(u|0)>0){A=0;do g=g/2.6457513110645907,A=A+1|0;while((A|0)!=(u|0))}f?(g=g/3,u=(pr(u)|0)==0,g=+Ps(+((u?g:g/2.6457513110645907)*.381966011250105))):(g=+Ps(+(g*.381966011250105)),pr(u)|0&&(m=+EA(m+.3334731722518321))),Hx(15600+(a<<4)|0,+EA(+O[15920+(a*24|0)>>3]-m),g,d)}function xx(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0;f=R,R=R+16|0,d=f,ks(A+4|0,d),_A(d,l[A>>2]|0,a,0,u),R=f}function S0(A,a,u,f,d){A=A|0,a=a|0,u=u|0,f=f|0,d=d|0;var g=0,m=0,v=0,b=0,E=0,M=0,D=0,j=0,W=0,V=0,$=0,re=0,ee=0,Z=0,K=0,Y=0,ve=0,be=0,he=0,ye=0,ut=0,tt=0,it=0,Qe=0,He=0,Ye=0,ct=0,Ue=0;if(Ye=R,R=R+272|0,g=Ye+256|0,Z=Ye+240|0,it=Ye,Qe=Ye+224|0,He=Ye+208|0,K=Ye+176|0,Y=Ye+160|0,ve=Ye+192|0,be=Ye+144|0,he=Ye+128|0,ye=Ye+112|0,ut=Ye+96|0,tt=Ye+80|0,l[g>>2]=a,l[Z>>2]=l[A>>2],l[Z+4>>2]=l[A+4>>2],l[Z+8>>2]=l[A+8>>2],l[Z+12>>2]=l[A+12>>2],A1(Z,g,it),l[d>>2]=0,Z=f+u+((f|0)==5&1)|0,(Z|0)<=(u|0)){R=Ye;return}b=l[g>>2]|0,E=Qe+4|0,M=K+4|0,D=u+5|0,j=16880+(b<<2)|0,W=16960+(b<<2)|0,V=he+8|0,$=ye+8|0,re=ut+8|0,ee=He+4|0,v=u;e:for(;;){m=it+(((v|0)%5|0)<<4)|0,l[He>>2]=l[m>>2],l[He+4>>2]=l[m+4>>2],l[He+8>>2]=l[m+8>>2],l[He+12>>2]=l[m+12>>2];do;while((ko(He,b,0,1)|0)==2);if((v|0)>(u|0)&(pr(a)|0)!=0){if(l[K>>2]=l[He>>2],l[K+4>>2]=l[He+4>>2],l[K+8>>2]=l[He+8>>2],l[K+12>>2]=l[He+12>>2],ks(E,Y),f=l[K>>2]|0,g=l[17040+(f*80|0)+(l[Qe>>2]<<2)>>2]|0,l[K>>2]=l[18640+(f*80|0)+(g*20|0)>>2],m=l[18640+(f*80|0)+(g*20|0)+16>>2]|0,(m|0)>0){A=0;do i1(M),A=A+1|0;while((A|0)<(m|0))}switch(m=18640+(f*80|0)+(g*20|0)+4|0,l[ve>>2]=l[m>>2],l[ve+4>>2]=l[m+4>>2],l[ve+8>>2]=l[m+8>>2],t1(ve,(l[j>>2]|0)*3|0),kn(M,ve,M),mn(M),ks(M,be),ct=+(l[W>>2]|0),O[he>>3]=ct*3,O[V>>3]=0,Ue=ct*-1.5,O[ye>>3]=Ue,O[$>>3]=ct*2.598076211353316,O[ut>>3]=Ue,O[re>>3]=ct*-2.598076211353316,l[17040+((l[K>>2]|0)*80|0)+(l[He>>2]<<2)>>2]|0){case 1:{A=ye,f=he;break}case 3:{A=ut,f=ye;break}case 2:{A=he,f=ut;break}default:{A=12;break e}}w1(Y,be,f,A,tt),_A(tt,l[K>>2]|0,b,1,d+8+(l[d>>2]<<4)|0),l[d>>2]=(l[d>>2]|0)+1}if((v|0)<(D|0)&&(ks(ee,K),_A(K,l[He>>2]|0,b,1,d+8+(l[d>>2]<<4)|0),l[d>>2]=(l[d>>2]|0)+1),l[Qe>>2]=l[He>>2],l[Qe+4>>2]=l[He+4>>2],l[Qe+8>>2]=l[He+8>>2],l[Qe+12>>2]=l[He+12>>2],v=v+1|0,(v|0)>=(Z|0)){A=3;break}}if((A|0)==3){R=Ye;return}else(A|0)==12&&Me(22522,22569,571,22579)}function A1(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0,m=0,v=0,b=0;b=R,R=R+128|0,f=b+64|0,d=b,g=f,m=20240,v=g+60|0;do l[g>>2]=l[m>>2],g=g+4|0,m=m+4|0;while((g|0)<(v|0));g=d,m=20304,v=g+60|0;do l[g>>2]=l[m>>2],g=g+4|0,m=m+4|0;while((g|0)<(v|0));v=(pr(l[a>>2]|0)|0)==0,f=v?f:d,d=A+4|0,s1(d),o1(d),pr(l[a>>2]|0)|0&&(Is(d),l[a>>2]=(l[a>>2]|0)+1),l[u>>2]=l[A>>2],a=u+4|0,kn(d,f,a),mn(a),l[u+16>>2]=l[A>>2],a=u+20|0,kn(d,f+12|0,a),mn(a),l[u+32>>2]=l[A>>2],a=u+36|0,kn(d,f+24|0,a),mn(a),l[u+48>>2]=l[A>>2],a=u+52|0,kn(d,f+36|0,a),mn(a),l[u+64>>2]=l[A>>2],u=u+68|0,kn(d,f+48|0,u),mn(u),R=b}function ko(A,a,u,f){A=A|0,a=a|0,u=u|0,f=f|0;var d=0,g=0,m=0,v=0,b=0,E=0,M=0,D=0,j=0,W=0,V=0;if(V=R,R=R+32|0,j=V+12|0,v=V,W=A+4|0,D=l[16960+(a<<2)>>2]|0,M=(f|0)!=0,D=M?D*3|0:D,d=l[W>>2]|0,E=A+8|0,m=l[E>>2]|0,M){if(g=A+12|0,f=l[g>>2]|0,d=m+d+f|0,(d|0)==(D|0))return W=1,R=V,W|0;b=g}else b=A+12|0,f=l[b>>2]|0,d=m+d+f|0;if((d|0)<=(D|0))return W=0,R=V,W|0;do if((f|0)>0){if(f=l[A>>2]|0,(m|0)>0){g=18640+(f*80|0)+60|0,f=A;break}f=18640+(f*80|0)+40|0,u?(ax(j,D,0,0),T0(W,j,v),Cu(v),kn(v,j,W),g=f,f=A):(g=f,f=A)}else g=18640+((l[A>>2]|0)*80|0)+20|0,f=A;while(!1);if(l[f>>2]=l[g>>2],d=g+16|0,(l[d>>2]|0)>0){f=0;do i1(W),f=f+1|0;while((f|0)<(l[d>>2]|0))}return A=g+4|0,l[j>>2]=l[A>>2],l[j+4>>2]=l[A+4>>2],l[j+8>>2]=l[A+8>>2],a=l[16880+(a<<2)>>2]|0,t1(j,M?a*3|0:a),kn(W,j,W),mn(W),M?f=((l[E>>2]|0)+(l[W>>2]|0)+(l[b>>2]|0)|0)==(D|0)?1:2:f=2,W=f,R=V,W|0}function Sx(A,a){A=A|0,a=a|0;var u=0;do u=ko(A,a,0,1)|0;while((u|0)==2);return u|0}function C0(A,a,u,f,d){A=A|0,a=a|0,u=u|0,f=f|0,d=d|0;var g=0,m=0,v=0,b=0,E=0,M=0,D=0,j=0,W=0,V=0,$=0,re=0,ee=0,Z=0,K=0,Y=0,ve=0,be=0,he=0,ye=0,ut=0,tt=0,it=0;if(ut=R,R=R+240|0,g=ut+224|0,ve=ut+208|0,be=ut,he=ut+192|0,ye=ut+176|0,re=ut+160|0,ee=ut+144|0,Z=ut+128|0,K=ut+112|0,Y=ut+96|0,l[g>>2]=a,l[ve>>2]=l[A>>2],l[ve+4>>2]=l[A+4>>2],l[ve+8>>2]=l[A+8>>2],l[ve+12>>2]=l[A+12>>2],l1(ve,g,be),l[d>>2]=0,$=f+u+((f|0)==6&1)|0,($|0)<=(u|0)){R=ut;return}b=l[g>>2]|0,E=u+6|0,M=16960+(b<<2)|0,D=ee+8|0,j=Z+8|0,W=K+8|0,V=he+4|0,m=0,v=u,f=-1;e:for(;;){if(g=(v|0)%6|0,A=be+(g<<4)|0,l[he>>2]=l[A>>2],l[he+4>>2]=l[A+4>>2],l[he+8>>2]=l[A+8>>2],l[he+12>>2]=l[A+12>>2],A=m,m=ko(he,b,0,1)|0,(v|0)>(u|0)&(pr(a)|0)!=0&&(A|0)!=1&&(l[he>>2]|0)!=(f|0)){switch(ks(be+(((g+5|0)%6|0)<<4)+4|0,ye),ks(be+(g<<4)+4|0,re),tt=+(l[M>>2]|0),O[ee>>3]=tt*3,O[D>>3]=0,it=tt*-1.5,O[Z>>3]=it,O[j>>3]=tt*2.598076211353316,O[K>>3]=it,O[W>>3]=tt*-2.598076211353316,g=l[ve>>2]|0,l[17040+(g*80|0)+(((f|0)==(g|0)?l[he>>2]|0:f)<<2)>>2]|0){case 1:{A=Z,f=ee;break}case 3:{A=K,f=Z;break}case 2:{A=ee,f=K;break}default:{A=8;break e}}w1(ye,re,f,A,Y),!(b1(ye,Y)|0)&&!(b1(re,Y)|0)&&(_A(Y,l[ve>>2]|0,b,1,d+8+(l[d>>2]<<4)|0),l[d>>2]=(l[d>>2]|0)+1)}if((v|0)<(E|0)&&(ks(V,ye),_A(ye,l[he>>2]|0,b,1,d+8+(l[d>>2]<<4)|0),l[d>>2]=(l[d>>2]|0)+1),v=v+1|0,(v|0)>=($|0)){A=3;break}else f=l[he>>2]|0}if((A|0)==3){R=ut;return}else(A|0)==8&&Me(22606,22569,736,22651)}function l1(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0,m=0,v=0,b=0;b=R,R=R+160|0,f=b+80|0,d=b,g=f,m=20368,v=g+72|0;do l[g>>2]=l[m>>2],g=g+4|0,m=m+4|0;while((g|0)<(v|0));g=d,m=20448,v=g+72|0;do l[g>>2]=l[m>>2],g=g+4|0,m=m+4|0;while((g|0)<(v|0));v=(pr(l[a>>2]|0)|0)==0,f=v?f:d,d=A+4|0,s1(d),o1(d),pr(l[a>>2]|0)|0&&(Is(d),l[a>>2]=(l[a>>2]|0)+1),l[u>>2]=l[A>>2],a=u+4|0,kn(d,f,a),mn(a),l[u+16>>2]=l[A>>2],a=u+20|0,kn(d,f+12|0,a),mn(a),l[u+32>>2]=l[A>>2],a=u+36|0,kn(d,f+24|0,a),mn(a),l[u+48>>2]=l[A>>2],a=u+52|0,kn(d,f+36|0,a),mn(a),l[u+64>>2]=l[A>>2],a=u+68|0,kn(d,f+48|0,a),mn(a),l[u+80>>2]=l[A>>2],u=u+84|0,kn(d,f+60|0,u),mn(u),R=b}function Cx(A,a){return A=A|0,a=a|0,a=ae(A|0,a|0,52)|0,N()|0,a&15|0}function u1(A,a){return A=A|0,a=a|0,a=ae(A|0,a|0,45)|0,N()|0,a&127|0}function M0(A,a){A=A|0,a=a|0;var u=0,f=0,d=0,g=0,m=0,v=0;if(!(!0&(a&-16777216|0)==134217728)||(m=ae(A|0,a|0,45)|0,N()|0,m=m&127,m>>>0>121))return a=0,a|0;u=ae(A|0,a|0,52)|0,N()|0,u=u&15;do if(u|0){for(d=1,f=0;;){if(g=ae(A|0,a|0,(15-d|0)*3|0)|0,N()|0,g=g&7,(g|0)!=0&(f^1))if((g|0)==1&(Se(m)|0)!=0){v=0,f=13;break}else f=1;if((g|0)==7){v=0,f=13;break}if(d>>>0<u>>>0)d=d+1|0;else{f=9;break}}if((f|0)==9){if((u|0)==15)v=1;else break;return v|0}else if((f|0)==13)return v|0}while(!1);for(;;){if(v=ae(A|0,a|0,(14-u|0)*3|0)|0,N()|0,!((v&7|0)==7&!0)){v=0,f=13;break}if(u>>>0<14)u=u+1|0;else{v=1,f=13;break}}return(f|0)==13?v|0:0}function L0(A,a,u,f){A=A|0,a=a|0,u=u|0,f=f|0;var d=0,g=0;if(g=ae(A|0,a|0,52)|0,N()|0,g=g&15,u>>>0>15)return f=4,f|0;if((g|0)<(u|0))return f=12,f|0;if((g|0)==(u|0))return l[f>>2]=A,l[f+4>>2]=a,f=0,f|0;if(d=ge(u|0,0,52)|0,d=d|A,A=N()|0|a&-15728641,(g|0)>(u|0))do a=ge(7,0,(14-u|0)*3|0)|0,u=u+1|0,d=a|d,A=N()|0|A;while((u|0)<(g|0));return l[f>>2]=d,l[f+4>>2]=A,f=0,f|0}function Lu(A,a,u,f){A=A|0,a=a|0,u=u|0,f=f|0;var d=0,g=0,m=0;if(g=ae(A|0,a|0,52)|0,N()|0,g=g&15,!((u|0)<16&(g|0)<=(u|0)))return f=4,f|0;d=u-g|0,u=ae(A|0,a|0,45)|0,N()|0;e:do if(!(Se(u&127)|0))u=Qi(7,0,d,((d|0)<0)<<31>>31)|0,d=N()|0;else{t:do if(g|0){for(u=1;m=ge(7,0,(15-u|0)*3|0)|0,!!((m&A|0)==0&((N()|0)&a|0)==0);)if(u>>>0<g>>>0)u=u+1|0;else break t;u=Qi(7,0,d,((d|0)<0)<<31>>31)|0,d=N()|0;break e}while(!1);u=Qi(7,0,d,((d|0)<0)<<31>>31)|0,u=yn(u|0,N()|0,5,0)|0,u=Ze(u|0,N()|0,-5,-1)|0,u=Ds(u|0,N()|0,6,0)|0,u=Ze(u|0,N()|0,1,0)|0,d=N()|0}while(!1);return m=f,l[m>>2]=u,l[m+4>>2]=d,m=0,m|0}function yt(A,a){A=A|0,a=a|0;var u=0,f=0,d=0;if(d=ae(A|0,a|0,45)|0,N()|0,!(Se(d&127)|0))return d=0,d|0;d=ae(A|0,a|0,52)|0,N()|0,d=d&15;e:do if(!d)u=0;else for(f=1;;){if(u=ae(A|0,a|0,(15-f|0)*3|0)|0,N()|0,u=u&7,u|0)break e;if(f>>>0<d>>>0)f=f+1|0;else{u=0;break}}while(!1);return d=(u|0)==0&1,d|0}function Mx(A,a,u,f){A=A|0,a=a|0,u=u|0,f=f|0;var d=0,g=0,m=0,v=0;if(m=R,R=R+16|0,g=m,h1(g,A,a,u),a=g,A=l[a>>2]|0,a=l[a+4>>2]|0,(A|0)==0&(a|0)==0)return R=m,0;d=0,u=0;do v=f+(d<<3)|0,l[v>>2]=A,l[v+4>>2]=a,d=Ze(d|0,u|0,1,0)|0,u=N()|0,d1(g),v=g,A=l[v>>2]|0,a=l[v+4>>2]|0;while(!((A|0)==0&(a|0)==0));return R=m,0}function Lx(A,a,u,f){return A=A|0,a=a|0,u=u|0,f=f|0,(f|0)<(u|0)?(u=a,f=A,Re(u|0),f|0):(u=ge(-1,-1,((f-u|0)*3|0)+3|0)|0,f=ge(~u|0,~(N()|0)|0,(15-f|0)*3|0)|0,u=~(N()|0)&a,f=~f&A,Re(u|0),f|0)}function Px(A,a,u,f){A=A|0,a=a|0,u=u|0,f=f|0;var d=0;return d=ae(A|0,a|0,52)|0,N()|0,d=d&15,(u|0)<16&(d|0)<=(u|0)?((d|0)<(u|0)&&(d=ge(-1,-1,((u+-1-d|0)*3|0)+3|0)|0,d=ge(~d|0,~(N()|0)|0,(15-u|0)*3|0)|0,a=~(N()|0)&a,A=~d&A),d=ge(u|0,0,52)|0,u=a&-15728641|(N()|0),l[f>>2]=A|d,l[f+4>>2]=u,f=0,f|0):(f=4,f|0)}function kx(A,a,u,f){A=A|0,a=a|0,u=u|0,f=f|0;var d=0,g=0,m=0,v=0,b=0,E=0,M=0,D=0,j=0,W=0,V=0,$=0,re=0,ee=0,Z=0,K=0,Y=0,ve=0,be=0,he=0,ye=0;if((u|0)==0&(f|0)==0)return he=0,he|0;if(d=A,g=l[d>>2]|0,d=l[d+4>>2]|0,!0&(d&15728640|0)==0){if(!((f|0)>0|(f|0)==0&u>>>0>0)||(he=a,l[he>>2]=g,l[he+4>>2]=d,(u|0)==1&(f|0)==0))return he=0,he|0;d=1;do ve=A+(d<<3)|0,be=l[ve+4>>2]|0,he=a+(d<<3)|0,l[he>>2]=l[ve>>2],l[he+4>>2]=be,d=d+1|0;while(0<(f|0)|(f|0)==0&d>>>0<u>>>0);return d=0,d|0}if(Y=u<<3,be=Qr(Y)|0,!be)return he=13,he|0;if(Iu(be|0,A|0,Y|0)|0,ve=Yr(u,8)|0,!ve)return Ne(be),he=13,he|0;e:do if(u|0){t:for(;;){d=be,ee=l[d>>2]|0,d=l[d+4>>2]|0,Z=ae(ee|0,d|0,52)|0,N()|0,Z=Z&15,K=Z+-1|0,re=(u|0)>0;n:do if((Z|0)!=0&re){if(W=((u|0)<0)<<31>>31,V=ge(K|0,0,52)|0,$=N()|0,K>>>0>15){if(!((ee|0)==0&(d|0)==0)){he=17;break t}for(g=0;;){if(g=g+1|0,(g|0)>=(u|0))break n;if(f=be+(g<<3)|0,$=l[f>>2]|0,f=l[f+4>>2]|0,!(($|0)==0&(f|0)==0)){d=f,he=17;break t}}}for(g=0,A=ee,f=d;;){if(!((A|0)==0&(f|0)==0)){if(!(!0&(f&117440512|0)==0)){he=22;break t}if(v=ae(A|0,f|0,52)|0,N()|0,v=v&15,(v|0)<(K|0)){d=12,he=28;break t}if((v|0)!=(K|0)&&(A=A|V,f=f&-15728641|$,v>>>0>=Z>>>0)){m=K;do j=ge(7,0,(14-m|0)*3|0)|0,m=m+1|0,A=j|A,f=N()|0|f;while(m>>>0<v>>>0)}if(m=Oo(A|0,f|0,u|0,W|0)|0,N()|0,E=ve+(m<<3)|0,v=E,b=l[v>>2]|0,v=l[v+4>>2]|0,(b|0)==0&(v|0)==0)m=E;else for(j=0;;){if((j|0)>(u|0)){he=32;break t}if((b|0)==(A|0)&(v&-117440513|0)==(f|0)){M=ae(b|0,v|0,56)|0,N()|0,M=M&7,D=M+1|0,ye=ae(b|0,v|0,45)|0,N()|0;r:do if(!(Se(ye&127)|0))v=7;else{if(b=ae(b|0,v|0,52)|0,N()|0,b=b&15,!b){v=6;break}for(v=1;;){if(ye=ge(7,0,(15-v|0)*3|0)|0,!((ye&A|0)==0&((N()|0)&f|0)==0)){v=7;break r}if(v>>>0<b>>>0)v=v+1|0;else{v=6;break}}}while(!1);if((M+2|0)>>>0>v>>>0){he=42;break t}ye=ge(D|0,0,56)|0,f=N()|0|f&-117440513,D=E,l[D>>2]=0,l[D+4>>2]=0,A=ye|A}else m=(m+1|0)%(u|0)|0;if(E=ve+(m<<3)|0,v=E,b=l[v>>2]|0,v=l[v+4>>2]|0,(b|0)==0&(v|0)==0){m=E;break}else j=j+1|0}ye=m,l[ye>>2]=A,l[ye+4>>2]=f}if(g=g+1|0,(g|0)>=(u|0))break n;f=be+(g<<3)|0,A=l[f>>2]|0,f=l[f+4>>2]|0}}while(!1);if((u+5|0)>>>0<11){he=85;break}if($=Yr((u|0)/6|0,8)|0,!$){he=49;break}n:do if(re){j=0,D=0;do{if(v=ve+(j<<3)|0,f=v,g=l[f>>2]|0,f=l[f+4>>2]|0,!((g|0)==0&(f|0)==0)){b=ae(g|0,f|0,56)|0,N()|0,b=b&7,A=b+1|0,E=f&-117440513,ye=ae(g|0,f|0,45)|0,N()|0;r:do if(Se(ye&127)|0){if(M=ae(g|0,f|0,52)|0,N()|0,M=M&15,M|0)for(m=1;;){if(ye=ge(7,0,(15-m|0)*3|0)|0,!((g&ye|0)==0&(E&(N()|0)|0)==0))break r;if(m>>>0<M>>>0)m=m+1|0;else break}f=ge(A|0,0,56)|0,g=f|g,f=N()|0|E,A=v,l[A>>2]=g,l[A+4>>2]=f,A=b+2|0}while(!1);(A|0)==7&&(ye=$+(D<<3)|0,l[ye>>2]=g,l[ye+4>>2]=f&-117440513,D=D+1|0)}j=j+1|0}while((j|0)!=(u|0));if(re){if(j=((u|0)<0)<<31>>31,W=ge(K|0,0,52)|0,V=N()|0,K>>>0>15){if(!((ee|0)==0&(d|0)==0)){d=4,he=84;break t}for(d=0;;){if(d=d+1|0,(d|0)>=(u|0)){g=0,d=D;break n}if(ye=be+(d<<3)|0,!((l[ye>>2]|0)==0&(l[ye+4>>2]|0)==0)){d=4,he=84;break t}}}for(M=0,g=0,E=ee;;){do if(!((E|0)==0&(d|0)==0)){if(v=ae(E|0,d|0,52)|0,N()|0,v=v&15,(v|0)<(K|0)){d=12,he=84;break t}do if((v|0)==(K|0))f=E,v=d;else{if(f=E|W,A=d&-15728641|V,v>>>0<Z>>>0){v=A;break}m=K;do ye=ge(7,0,(14-m|0)*3|0)|0,m=m+1|0,f=ye|f,A=N()|0|A;while(m>>>0<v>>>0);v=A}while(!1);for(m=Oo(f|0,v|0,u|0,j|0)|0,N()|0,A=0;;){if((A|0)>(u|0)){he=77;break t}if(ye=ve+(m<<3)|0,b=l[ye+4>>2]|0,(b&-117440513|0)==(v|0)&&(l[ye>>2]|0)==(f|0)){he=79;break}if(m=(m+1|0)%(u|0)|0,ye=ve+(m<<3)|0,(l[ye>>2]|0)==(f|0)&&(l[ye+4>>2]|0)==(v|0))break;A=A+1|0}if((he|0)==79&&(he=0,!0&(b&117440512|0)==100663296))break;ye=a+(g<<3)|0,l[ye>>2]=E,l[ye+4>>2]=d,g=g+1|0}while(!1);if(d=M+1|0,(d|0)>=(u|0)){d=D;break n}ye=be+(d<<3)|0,M=d,E=l[ye>>2]|0,d=l[ye+4>>2]|0}}else g=0,d=D}else g=0,d=0;while(!1);if(Fs(ve|0,0,Y|0)|0,Iu(be|0,$|0,d<<3|0)|0,Ne($),d)a=a+(g<<3)|0,u=d;else break e}if((he|0)==17)!0&(d&117440512|0)==0?(d=4,he=28):he=22;else if((he|0)==32)Me(23313,22674,362,22684);else{if((he|0)==42)return Ne(be),Ne(ve),ye=10,ye|0;if((he|0)==49)return Ne(be),Ne(ve),ye=13,ye|0;if((he|0)==77)Me(23313,22674,462,22684);else{if((he|0)==84)return Ne($),Ne(be),Ne(ve),ye=d,ye|0;if((he|0)==85){Iu(a|0,be|0,u<<3|0)|0;break}}}if((he|0)==22)return Ne(be),Ne(ve),ye=5,ye|0;if((he|0)==28)return Ne(be),Ne(ve),ye=d,ye|0}while(!1);return Ne(be),Ne(ve),ye=0,ye|0}function Ix(A,a,u,f,d,g,m){A=A|0,a=a|0,u=u|0,f=f|0,d=d|0,g=g|0,m=m|0;var v=0,b=0,E=0,M=0,D=0,j=0,W=0,V=0,$=0;if($=R,R=R+16|0,V=$,!((u|0)>0|(u|0)==0&a>>>0>0))return V=0,R=$,V|0;if((m|0)>=16)return V=12,R=$,V|0;j=0,W=0,D=0,v=0;e:for(;;){if(E=A+(j<<3)|0,b=l[E>>2]|0,E=l[E+4>>2]|0,M=ae(b|0,E|0,52)|0,N()|0,(M&15|0)>(m|0)){v=12,b=11;break}if(h1(V,b,E,m),M=V,E=l[M>>2]|0,M=l[M+4>>2]|0,(E|0)==0&(M|0)==0)b=D;else{b=D;do{if(!((v|0)<(g|0)|(v|0)==(g|0)&b>>>0<d>>>0)){b=10;break e}D=f+(b<<3)|0,l[D>>2]=E,l[D+4>>2]=M,b=Ze(b|0,v|0,1,0)|0,v=N()|0,d1(V),D=V,E=l[D>>2]|0,M=l[D+4>>2]|0}while(!((E|0)==0&(M|0)==0))}if(j=Ze(j|0,W|0,1,0)|0,W=N()|0,(W|0)<(u|0)|(W|0)==(u|0)&j>>>0<a>>>0)D=b;else{v=0,b=11;break}}return(b|0)==10?(V=14,R=$,V|0):(b|0)==11?(R=$,v|0):0}function Rx(A,a,u,f,d){A=A|0,a=a|0,u=u|0,f=f|0,d=d|0;var g=0,m=0,v=0,b=0,E=0,M=0,D=0,j=0;j=R,R=R+16|0,D=j;e:do if((u|0)>0|(u|0)==0&a>>>0>0){for(E=0,m=0,g=0,M=0;;){if(b=A+(E<<3)|0,v=l[b>>2]|0,b=l[b+4>>2]|0,!((v|0)==0&(b|0)==0)&&(b=(Lu(v,b,f,D)|0)==0,v=D,m=Ze(l[v>>2]|0,l[v+4>>2]|0,m|0,g|0)|0,g=N()|0,!b)){g=12;break}if(E=Ze(E|0,M|0,1,0)|0,M=N()|0,!((M|0)<(u|0)|(M|0)==(u|0)&E>>>0<a>>>0))break e}return R=j,g|0}else m=0,g=0;while(!1);return l[d>>2]=m,l[d+4>>2]=g,d=0,R=j,d|0}function Ox(A,a){return A=A|0,a=a|0,a=ae(A|0,a|0,52)|0,N()|0,a&1|0}function jn(A,a){A=A|0,a=a|0;var u=0,f=0,d=0;if(d=ae(A|0,a|0,52)|0,N()|0,d=d&15,!d)return d=0,d|0;for(f=1;;){if(u=ae(A|0,a|0,(15-f|0)*3|0)|0,N()|0,u=u&7,u|0){f=5;break}if(f>>>0<d>>>0)f=f+1|0;else{u=0,f=5;break}}return(f|0)==5?u|0:0}function P0(A,a){A=A|0,a=a|0;var u=0,f=0,d=0,g=0,m=0,v=0,b=0;if(b=ae(A|0,a|0,52)|0,N()|0,b=b&15,!b)return v=a,b=A,Re(v|0),b|0;for(v=1,u=0;;){g=(15-v|0)*3|0,f=ge(7,0,g|0)|0,d=N()|0,m=ae(A|0,a|0,g|0)|0,N()|0,g=ge(Rs(m&7)|0,0,g|0)|0,m=N()|0,A=g|A&~f,a=m|a&~d;e:do if(!u)if((g&f|0)==0&(m&d|0)==0)u=0;else if(f=ae(A|0,a|0,52)|0,N()|0,f=f&15,!f)u=1;else{u=1;t:for(;;){switch(m=ae(A|0,a|0,(15-u|0)*3|0)|0,N()|0,m&7){case 1:break t;case 0:break;default:{u=1;break e}}if(u>>>0<f>>>0)u=u+1|0;else{u=1;break e}}for(u=1;;)if(m=(15-u|0)*3|0,d=ae(A|0,a|0,m|0)|0,N()|0,g=ge(7,0,m|0)|0,a=a&~(N()|0),m=ge(Rs(d&7)|0,0,m|0)|0,A=A&~g|m,a=a|(N()|0),u>>>0<f>>>0)u=u+1|0;else{u=1;break}}while(!1);if(v>>>0<b>>>0)v=v+1|0;else break}return Re(a|0),A|0}function Os(A,a){A=A|0,a=a|0;var u=0,f=0,d=0,g=0,m=0;if(f=ae(A|0,a|0,52)|0,N()|0,f=f&15,!f)return u=a,f=A,Re(u|0),f|0;for(u=1;g=(15-u|0)*3|0,m=ae(A|0,a|0,g|0)|0,N()|0,d=ge(7,0,g|0)|0,a=a&~(N()|0),g=ge(Rs(m&7)|0,0,g|0)|0,A=g|A&~d,a=N()|0|a,u>>>0<f>>>0;)u=u+1|0;return Re(a|0),A|0}function Dx(A,a){A=A|0,a=a|0;var u=0,f=0,d=0,g=0,m=0,v=0,b=0;if(b=ae(A|0,a|0,52)|0,N()|0,b=b&15,!b)return v=a,b=A,Re(v|0),b|0;for(v=1,u=0;;){g=(15-v|0)*3|0,f=ge(7,0,g|0)|0,d=N()|0,m=ae(A|0,a|0,g|0)|0,N()|0,g=ge(Wi(m&7)|0,0,g|0)|0,m=N()|0,A=g|A&~f,a=m|a&~d;e:do if(!u)if((g&f|0)==0&(m&d|0)==0)u=0;else if(f=ae(A|0,a|0,52)|0,N()|0,f=f&15,!f)u=1;else{u=1;t:for(;;){switch(m=ae(A|0,a|0,(15-u|0)*3|0)|0,N()|0,m&7){case 1:break t;case 0:break;default:{u=1;break e}}if(u>>>0<f>>>0)u=u+1|0;else{u=1;break e}}for(u=1;;)if(d=(15-u|0)*3|0,g=ge(7,0,d|0)|0,m=a&~(N()|0),a=ae(A|0,a|0,d|0)|0,N()|0,a=ge(Wi(a&7)|0,0,d|0)|0,A=A&~g|a,a=m|(N()|0),u>>>0<f>>>0)u=u+1|0;else{u=1;break}}while(!1);if(v>>>0<b>>>0)v=v+1|0;else break}return Re(a|0),A|0}function k0(A,a){A=A|0,a=a|0;var u=0,f=0,d=0,g=0,m=0;if(f=ae(A|0,a|0,52)|0,N()|0,f=f&15,!f)return u=a,f=A,Re(u|0),f|0;for(u=1;m=(15-u|0)*3|0,g=ge(7,0,m|0)|0,d=a&~(N()|0),a=ae(A|0,a|0,m|0)|0,N()|0,a=ge(Wi(a&7)|0,0,m|0)|0,A=a|A&~g,a=N()|0|d,u>>>0<f>>>0;)u=u+1|0;return Re(a|0),A|0}function Fx(A,a){A=A|0,a=a|0;var u=0,f=0,d=0,g=0,m=0,v=0,b=0,E=0,M=0;if(b=R,R=R+64|0,v=b+40|0,f=b+24|0,d=b+12|0,g=b,ge(a|0,0,52)|0,u=N()|0|134225919,!a)return(l[A+4>>2]|0)>2||(l[A+8>>2]|0)>2||(l[A+12>>2]|0)>2?(m=0,v=0,Re(m|0),R=b,v|0):(ge(Ht(A)|0,0,45)|0,m=N()|0|u,v=-1,Re(m|0),R=b,v|0);if(l[v>>2]=l[A>>2],l[v+4>>2]=l[A+4>>2],l[v+8>>2]=l[A+8>>2],l[v+12>>2]=l[A+12>>2],m=v+4|0,(a|0)>0)for(A=-1;l[f>>2]=l[m>>2],l[f+4>>2]=l[m+4>>2],l[f+8>>2]=l[m+8>>2],a&1?(cx(m),l[d>>2]=l[m>>2],l[d+4>>2]=l[m+4>>2],l[d+8>>2]=l[m+8>>2],Su(d)):(n1(m),l[d>>2]=l[m>>2],l[d+4>>2]=l[m+4>>2],l[d+8>>2]=l[m+8>>2],Is(d)),T0(f,d,g),mn(g),M=(15-a|0)*3|0,E=ge(7,0,M|0)|0,u=u&~(N()|0),M=ge(xu(g)|0,0,M|0)|0,A=M|A&~E,u=N()|0|u,(a|0)>1;)a=a+-1|0;else A=-1;e:do if((l[m>>2]|0)<=2&&(l[v+8>>2]|0)<=2&&(l[v+12>>2]|0)<=2){if(f=Ht(v)|0,a=ge(f|0,0,45)|0,a=a|A,A=N()|0|u&-1040385,g=An(v)|0,!(Se(f)|0)){if((g|0)<=0)break;for(d=0;;){if(f=ae(a|0,A|0,52)|0,N()|0,f=f&15,f)for(u=1;M=(15-u|0)*3|0,v=ae(a|0,A|0,M|0)|0,N()|0,E=ge(7,0,M|0)|0,A=A&~(N()|0),M=ge(Rs(v&7)|0,0,M|0)|0,a=a&~E|M,A=A|(N()|0),u>>>0<f>>>0;)u=u+1|0;if(d=d+1|0,(d|0)==(g|0))break e}}d=ae(a|0,A|0,52)|0,N()|0,d=d&15;t:do if(d){u=1;n:for(;;){switch(M=ae(a|0,A|0,(15-u|0)*3|0)|0,N()|0,M&7){case 1:break n;case 0:break;default:break t}if(u>>>0<d>>>0)u=u+1|0;else break t}if(Km(f,l[v>>2]|0)|0)for(u=1;v=(15-u|0)*3|0,E=ge(7,0,v|0)|0,M=A&~(N()|0),A=ae(a|0,A|0,v|0)|0,N()|0,A=ge(Wi(A&7)|0,0,v|0)|0,a=a&~E|A,A=M|(N()|0),u>>>0<d>>>0;)u=u+1|0;else for(u=1;M=(15-u|0)*3|0,v=ae(a|0,A|0,M|0)|0,N()|0,E=ge(7,0,M|0)|0,A=A&~(N()|0),M=ge(Rs(v&7)|0,0,M|0)|0,a=a&~E|M,A=A|(N()|0),u>>>0<d>>>0;)u=u+1|0}while(!1);if((g|0)>0){u=0;do a=P0(a,A)|0,A=N()|0,u=u+1|0;while((u|0)!=(g|0))}}else a=0,A=0;while(!1);return E=A,M=a,Re(E|0),R=b,M|0}function pr(A){return A=A|0,(A|0)%2|0|0}function c1(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0;return d=R,R=R+16|0,f=d,a>>>0>15?(f=4,R=d,f|0):(l[A+4>>2]&2146435072|0)==2146435072||(l[A+8+4>>2]&2146435072|0)==2146435072?(f=3,R=d,f|0):(bx(A,a,f),a=Fx(f,a)|0,f=N()|0,l[u>>2]=a,l[u+4>>2]=f,(a|0)==0&(f|0)==0&&Me(23313,22674,786,22697),f=0,R=d,f|0)}function I0(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0,m=0;if(d=u+4|0,g=ae(A|0,a|0,52)|0,N()|0,g=g&15,m=ae(A|0,a|0,45)|0,N()|0,f=(g|0)==0,Se(m&127)|0){if(f)return m=1,m|0;f=1}else{if(f)return m=0,m|0;!(l[d>>2]|0)&&!(l[u+8>>2]|0)?f=(l[u+12>>2]|0)!=0&1:f=1}for(u=1;u&1?Su(d):Is(d),m=ae(A|0,a|0,(15-u|0)*3|0)|0,N()|0,r1(d,m&7),u>>>0<g>>>0;)u=u+1|0;return f|0}function Io(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0,m=0,v=0,b=0,E=0,M=0;if(M=R,R=R+16|0,b=M,E=ae(A|0,a|0,45)|0,N()|0,E=E&127,E>>>0>121)return l[u>>2]=0,l[u+4>>2]=0,l[u+8>>2]=0,l[u+12>>2]=0,E=5,R=M,E|0;e:do if(Se(E)|0&&(g=ae(A|0,a|0,52)|0,N()|0,g=g&15,(g|0)!=0)){f=1;t:for(;;){switch(v=ae(A|0,a|0,(15-f|0)*3|0)|0,N()|0,v&7){case 5:break t;case 0:break;default:{f=a;break e}}if(f>>>0<g>>>0)f=f+1|0;else{f=a;break e}}for(d=1,f=a;a=(15-d|0)*3|0,m=ge(7,0,a|0)|0,v=f&~(N()|0),f=ae(A|0,f|0,a|0)|0,N()|0,f=ge(Wi(f&7)|0,0,a|0)|0,A=A&~m|f,f=v|(N()|0),d>>>0<g>>>0;)d=d+1|0}else f=a;while(!1);if(v=7696+(E*28|0)|0,l[u>>2]=l[v>>2],l[u+4>>2]=l[v+4>>2],l[u+8>>2]=l[v+8>>2],l[u+12>>2]=l[v+12>>2],!(I0(A,f,u)|0))return E=0,R=M,E|0;if(m=u+4|0,l[b>>2]=l[m>>2],l[b+4>>2]=l[m+4>>2],l[b+8>>2]=l[m+8>>2],g=ae(A|0,f|0,52)|0,N()|0,v=g&15,g&1?(Is(m),g=v+1|0):g=v,!(Se(E)|0))f=0;else{e:do if(!v)f=0;else for(a=1;;){if(d=ae(A|0,f|0,(15-a|0)*3|0)|0,N()|0,d=d&7,d|0){f=d;break e}if(a>>>0<v>>>0)a=a+1|0;else{f=0;break}}while(!1);f=(f|0)==4&1}if(!(ko(u,g,f,0)|0))(g|0)!=(v|0)&&(l[m>>2]=l[b>>2],l[m+4>>2]=l[b+4>>2],l[m+8>>2]=l[b+8>>2]);else{if(Se(E)|0)do;while(ko(u,g,0,0)|0);(g|0)!=(v|0)&&n1(m)}return E=0,R=M,E|0}function wA(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0;return g=R,R=R+16|0,f=g,d=Io(A,a,f)|0,d|0?(R=g,d|0):(d=ae(A|0,a|0,52)|0,N()|0,xx(f,d&15,u),d=0,R=g,d|0)}function bA(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0,m=0,v=0;if(m=R,R=R+16|0,g=m,f=Io(A,a,g)|0,f|0)return g=f,R=m,g|0;f=ae(A|0,a|0,45)|0,N()|0,f=(Se(f&127)|0)==0,d=ae(A|0,a|0,52)|0,N()|0,d=d&15;e:do if(!f){if(d|0)for(f=1;;){if(v=ge(7,0,(15-f|0)*3|0)|0,!((v&A|0)==0&((N()|0)&a|0)==0))break e;if(f>>>0<d>>>0)f=f+1|0;else break}return S0(g,d,0,5,u),v=0,R=m,v|0}while(!1);return C0(g,d,0,6,u),v=0,R=m,v|0}function Bx(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0;if(d=ae(A|0,a|0,45)|0,N()|0,!(Se(d&127)|0))return d=2,l[u>>2]=d,0;if(d=ae(A|0,a|0,52)|0,N()|0,d=d&15,!d)return d=5,l[u>>2]=d,0;for(f=1;;){if(g=ge(7,0,(15-f|0)*3|0)|0,!((g&A|0)==0&((N()|0)&a|0)==0)){f=2,A=6;break}if(f>>>0<d>>>0)f=f+1|0;else{f=5,A=6;break}}return(A|0)==6&&(l[u>>2]=f),0}function f1(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0,m=0,v=0,b=0,E=0,M=0,D=0;D=R,R=R+128|0,E=D+112|0,g=D+96|0,M=D,d=ae(A|0,a|0,52)|0,N()|0,v=d&15,l[E>>2]=v,m=ae(A|0,a|0,45)|0,N()|0,m=m&127;e:do if(Se(m)|0){if(v|0)for(f=1;;){if(b=ge(7,0,(15-f|0)*3|0)|0,!((b&A|0)==0&((N()|0)&a|0)==0)){d=0;break e}if(f>>>0<v>>>0)f=f+1|0;else break}if(d&1)d=1;else return b=ge(v+1|0,0,52)|0,M=N()|0|a&-15728641,E=ge(7,0,(14-v|0)*3|0)|0,M=f1((b|A)&~E,M&~(N()|0),u)|0,R=D,M|0}else d=0;while(!1);if(f=Io(A,a,g)|0,!f){d?(A1(g,E,M),b=5):(l1(g,E,M),b=6);e:do if(Se(m)|0)if(!v)A=5;else for(f=1;;){if(m=ge(7,0,(15-f|0)*3|0)|0,!((m&A|0)==0&((N()|0)&a|0)==0)){A=2;break e}if(f>>>0<v>>>0)f=f+1|0;else{A=5;break}}else A=2;while(!1);Fs(u|0,-1,A<<2|0)|0;e:do if(d)for(g=0;;){if(m=M+(g<<4)|0,Sx(m,l[E>>2]|0)|0,m=l[m>>2]|0,v=l[u>>2]|0,(v|0)==-1|(v|0)==(m|0))f=u;else{d=0;do{if(d=d+1|0,d>>>0>=A>>>0){f=1;break e}f=u+(d<<2)|0,v=l[f>>2]|0}while(!((v|0)==-1|(v|0)==(m|0)))}if(l[f>>2]=m,g=g+1|0,g>>>0>=b>>>0){f=0;break}}else for(g=0;;){if(m=M+(g<<4)|0,ko(m,l[E>>2]|0,0,1)|0,m=l[m>>2]|0,v=l[u>>2]|0,(v|0)==-1|(v|0)==(m|0))f=u;else{d=0;do{if(d=d+1|0,d>>>0>=A>>>0){f=1;break e}f=u+(d<<2)|0,v=l[f>>2]|0}while(!((v|0)==-1|(v|0)==(m|0)))}if(l[f>>2]=m,g=g+1|0,g>>>0>=b>>>0){f=0;break}}while(!1)}return M=f,R=D,M|0}function Nx(){return 12}function R0(A,a){A=A|0,a=a|0;var u=0,f=0,d=0,g=0,m=0,v=0,b=0;if(A>>>0>15)return v=4,v|0;if(ge(A|0,0,52)|0,v=N()|0|134225919,!A){u=0,f=0;do Se(f)|0&&(ge(f|0,0,45)|0,m=v|(N()|0),A=a+(u<<3)|0,l[A>>2]=-1,l[A+4>>2]=m,u=u+1|0),f=f+1|0;while((f|0)!=122);return u=0,u|0}u=0,m=0;do{if(Se(m)|0){for(ge(m|0,0,45)|0,f=1,d=-1,g=v|(N()|0);b=ge(7,0,(15-f|0)*3|0)|0,d=d&~b,g=g&~(N()|0),(f|0)!=(A|0);)f=f+1|0;b=a+(u<<3)|0,l[b>>2]=d,l[b+4>>2]=g,u=u+1|0}m=m+1|0}while((m|0)!=122);return u=0,u|0}function Ux(A,a,u,f){A=A|0,a=a|0,u=u|0,f=f|0;var d=0,g=0,m=0,v=0,b=0,E=0,M=0,D=0,j=0,W=0,V=0,$=0,re=0,ee=0,Z=0;if(Z=R,R=R+16|0,re=Z,ee=ae(A|0,a|0,52)|0,N()|0,ee=ee&15,u>>>0>15)return ee=4,R=Z,ee|0;if((ee|0)<(u|0))return ee=12,R=Z,ee|0;if((ee|0)!=(u|0))if(g=ge(u|0,0,52)|0,g=g|A,v=N()|0|a&-15728641,(ee|0)>(u|0)){b=u;do $=ge(7,0,(14-b|0)*3|0)|0,b=b+1|0,g=$|g,v=N()|0|v;while((b|0)<(ee|0));$=g}else $=g;else $=A,v=a;V=ae($|0,v|0,45)|0,N()|0;e:do if(Se(V&127)|0){if(b=ae($|0,v|0,52)|0,N()|0,b=b&15,b|0)for(g=1;;){if(V=ge(7,0,(15-g|0)*3|0)|0,!((V&$|0)==0&((N()|0)&v|0)==0)){E=33;break e}if(g>>>0<b>>>0)g=g+1|0;else break}if(V=f,l[V>>2]=0,l[V+4>>2]=0,(ee|0)>(u|0)){for(V=a&-15728641,W=ee;;){if(j=W,W=W+-1|0,W>>>0>15|(ee|0)<(W|0)){E=19;break}if((ee|0)!=(W|0))if(g=ge(W|0,0,52)|0,g=g|A,b=N()|0|V,(ee|0)<(j|0))D=g;else{E=W;do D=ge(7,0,(14-E|0)*3|0)|0,E=E+1|0,g=D|g,b=N()|0|b;while((E|0)<(ee|0));D=g}else D=A,b=a;if(M=ae(D|0,b|0,45)|0,N()|0,!(Se(M&127)|0))g=0;else{M=ae(D|0,b|0,52)|0,N()|0,M=M&15;t:do if(!M)g=0;else for(E=1;;){if(g=ae(D|0,b|0,(15-E|0)*3|0)|0,N()|0,g=g&7,g|0)break t;if(E>>>0<M>>>0)E=E+1|0;else{g=0;break}}while(!1);g=(g|0)==0&1}if(b=ae(A|0,a|0,(15-j|0)*3|0)|0,N()|0,b=b&7,(b|0)==7){d=5,E=42;break}if(g=(g|0)!=0,(b|0)==1&g){d=5,E=42;break}if(D=b+(((b|0)!=0&g)<<31>>31)|0,D|0&&(E=ee-j|0,E=Qi(7,0,E,((E|0)<0)<<31>>31)|0,M=N()|0,g?(g=yn(E|0,M|0,5,0)|0,g=Ze(g|0,N()|0,-5,-1)|0,g=Ds(g|0,N()|0,6,0)|0,g=Ze(g|0,N()|0,1,0)|0,b=N()|0):(g=E,b=M),j=D+-1|0,j=yn(E|0,M|0,j|0,((j|0)<0)<<31>>31|0)|0,j=Ze(g|0,b|0,j|0,N()|0)|0,D=N()|0,M=f,M=Ze(j|0,D|0,l[M>>2]|0,l[M+4>>2]|0)|0,D=N()|0,j=f,l[j>>2]=M,l[j+4>>2]=D),(W|0)<=(u|0)){E=37;break}}if((E|0)==19)Me(23313,22674,1099,22710);else if((E|0)==37){m=f,d=l[m+4>>2]|0,m=l[m>>2]|0;break}else if((E|0)==42)return R=Z,d|0}else d=0,m=0}else E=33;while(!1);e:do if((E|0)==33)if(V=f,l[V>>2]=0,l[V+4>>2]=0,(ee|0)>(u|0)){for(g=ee;;){if(d=ae(A|0,a|0,(15-g|0)*3|0)|0,N()|0,d=d&7,(d|0)==7){d=5;break}if(m=ee-g|0,m=Qi(7,0,m,((m|0)<0)<<31>>31)|0,d=yn(m|0,N()|0,d|0,0)|0,m=N()|0,V=f,m=Ze(l[V>>2]|0,l[V+4>>2]|0,d|0,m|0)|0,d=N()|0,V=f,l[V>>2]=m,l[V+4>>2]=d,g=g+-1|0,(g|0)<=(u|0))break e}return R=Z,d|0}else d=0,m=0;while(!1);return Lu($,v,ee,re)|0&&Me(23313,22674,1063,22725),ee=re,re=l[ee+4>>2]|0,((d|0)>-1|(d|0)==-1&m>>>0>4294967295)&((re|0)>(d|0)|((re|0)==(d|0)?(l[ee>>2]|0)>>>0>m>>>0:0))?(ee=0,R=Z,ee|0):(Me(23313,22674,1139,22710),0)}function zx(A,a,u,f,d,g){A=A|0,a=a|0,u=u|0,f=f|0,d=d|0,g=g|0;var m=0,v=0,b=0,E=0,M=0,D=0,j=0,W=0,V=0,$=0;if(D=R,R=R+16|0,m=D,d>>>0>15)return g=4,R=D,g|0;if(v=ae(u|0,f|0,52)|0,N()|0,v=v&15,(v|0)>(d|0))return g=12,R=D,g|0;if(Lu(u,f,d,m)|0&&Me(23313,22674,1063,22725),M=m,E=l[M+4>>2]|0,!(((a|0)>-1|(a|0)==-1&A>>>0>4294967295)&((E|0)>(a|0)|((E|0)==(a|0)?(l[M>>2]|0)>>>0>A>>>0:0))))return g=2,R=D,g|0;M=d-v|0,d=ge(d|0,0,52)|0,b=N()|0|f&-15728641,E=g,l[E>>2]=d|u,l[E+4>>2]=b,E=ae(u|0,f|0,45)|0,N()|0;e:do if(Se(E&127)|0){if(v|0)for(m=1;;){if(E=ge(7,0,(15-m|0)*3|0)|0,!((E&u|0)==0&((N()|0)&f|0)==0))break e;if(m>>>0<v>>>0)m=m+1|0;else break}if((M|0)<1)return g=0,R=D,g|0;for(E=v^15,f=-1,b=1,m=1;;){v=M-b|0,v=Qi(7,0,v,((v|0)<0)<<31>>31)|0,u=N()|0;do if(m)if(m=yn(v|0,u|0,5,0)|0,m=Ze(m|0,N()|0,-5,-1)|0,m=Ds(m|0,N()|0,6,0)|0,d=N()|0,(a|0)>(d|0)|(a|0)==(d|0)&A>>>0>m>>>0){a=Ze(A|0,a|0,-1,-1)|0,a=vn(a|0,N()|0,m|0,d|0)|0,m=N()|0,j=g,V=l[j>>2]|0,j=l[j+4>>2]|0,$=(E+f|0)*3|0,W=ge(7,0,$|0)|0,j=j&~(N()|0),f=Ds(a|0,m|0,v|0,u|0)|0,A=N()|0,d=Ze(f|0,A|0,2,0)|0,$=ge(d|0,N()|0,$|0)|0,j=N()|0|j,d=g,l[d>>2]=$|V&~W,l[d+4>>2]=j,A=yn(f|0,A|0,v|0,u|0)|0,A=vn(a|0,m|0,A|0,N()|0)|0,m=0,a=N()|0;break}else{$=g,W=l[$>>2]|0,$=l[$+4>>2]|0,V=ge(7,0,(E+f|0)*3|0)|0,$=$&~(N()|0),m=g,l[m>>2]=W&~V,l[m+4>>2]=$,m=1;break}else W=g,d=l[W>>2]|0,W=l[W+4>>2]|0,f=(E+f|0)*3|0,j=ge(7,0,f|0)|0,W=W&~(N()|0),$=Ds(A|0,a|0,v|0,u|0)|0,m=N()|0,f=ge($|0,m|0,f|0)|0,W=N()|0|W,V=g,l[V>>2]=f|d&~j,l[V+4>>2]=W,m=yn($|0,m|0,v|0,u|0)|0,A=vn(A|0,a|0,m|0,N()|0)|0,m=0,a=N()|0;while(!1);if((M|0)>(b|0))f=~b,b=b+1|0;else{a=0;break}}return R=D,a|0}while(!1);if((M|0)<1)return $=0,R=D,$|0;for(d=v^15,m=1;;)if(V=M-m|0,V=Qi(7,0,V,((V|0)<0)<<31>>31)|0,$=N()|0,b=g,u=l[b>>2]|0,b=l[b+4>>2]|0,v=(d-m|0)*3|0,f=ge(7,0,v|0)|0,b=b&~(N()|0),j=Ds(A|0,a|0,V|0,$|0)|0,W=N()|0,v=ge(j|0,W|0,v|0)|0,b=N()|0|b,E=g,l[E>>2]=v|u&~f,l[E+4>>2]=b,$=yn(j|0,W|0,V|0,$|0)|0,A=vn(A|0,a|0,$|0,N()|0)|0,a=N()|0,(M|0)<=(m|0)){a=0;break}else m=m+1|0;return R=D,a|0}function h1(A,a,u,f){A=A|0,a=a|0,u=u|0,f=f|0;var d=0,g=0;d=ae(a|0,u|0,52)|0,N()|0,d=d&15,(a|0)==0&(u|0)==0|((f|0)>15|(d|0)>(f|0))?(f=-1,d=-1,a=0,u=0):(g=Lx(a,u,d+1|0,f)|0,u=(N()|0)&-15728641,a=ge(f|0,0,52)|0,a=g|a,u=u|(N()|0),g=(yt(a,u)|0)==0,f=g?-1:f),g=A,l[g>>2]=a,l[g+4>>2]=u,l[A+8>>2]=d,l[A+12>>2]=f}function d1(A){A=A|0;var a=0,u=0,f=0,d=0,g=0,m=0,v=0,b=0,E=0;if(u=A,a=l[u>>2]|0,u=l[u+4>>2]|0,!((a|0)==0&(u|0)==0)&&(f=ae(a|0,u|0,52)|0,N()|0,f=f&15,v=ge(1,0,(f^15)*3|0)|0,a=Ze(v|0,N()|0,a|0,u|0)|0,u=N()|0,v=A,l[v>>2]=a,l[v+4>>2]=u,v=A+8|0,m=l[v>>2]|0,!((f|0)<(m|0)))){for(b=A+12|0,g=f;;){if((g|0)==(m|0)){f=5;break}if(E=(g|0)==(l[b>>2]|0),d=(15-g|0)*3|0,f=ae(a|0,u|0,d|0)|0,N()|0,f=f&7,E&((f|0)==1&!0)){f=7;break}if(!((f|0)==7&!0)){f=10;break}if(E=ge(1,0,d|0)|0,a=Ze(a|0,u|0,E|0,N()|0)|0,u=N()|0,E=A,l[E>>2]=a,l[E+4>>2]=u,(g|0)>(m|0))g=g+-1|0;else{f=10;break}}if((f|0)==5){E=A,l[E>>2]=0,l[E+4>>2]=0,l[v>>2]=-1,l[b>>2]=-1;return}else if((f|0)==7){m=ge(1,0,d|0)|0,m=Ze(a|0,u|0,m|0,N()|0)|0,v=N()|0,E=A,l[E>>2]=m,l[E+4>>2]=v,l[b>>2]=g+-1;return}else if((f|0)==10)return}}function EA(A){A=+A;var a=0;return a=A<0?A+6.283185307179586:A,+(A>=6.283185307179586?a+-6.283185307179586:a)}function Ro(A,a){return A=A|0,a=a|0,+We(+(+O[A>>3]-+O[a>>3]))<17453292519943298e-27?(a=+We(+(+O[A+8>>3]-+O[a+8>>3]))<17453292519943298e-27,a|0):(a=0,a|0)}function Vx(A,a){A=A|0,a=a|0;var u=0,f=0,d=0,g=0;return d=+O[a>>3],f=+O[A>>3],g=+De(+((d-f)*.5)),u=+De(+((+O[a+8>>3]-+O[A+8>>3])*.5)),u=g*g+u*(+rt(+d)*+rt(+f)*u),+(+Vn(+ +qe(+u),+ +qe(+(1-u)))*2)}function TA(A,a){A=A|0,a=a|0;var u=0,f=0,d=0,g=0;return d=+O[a>>3],f=+O[A>>3],g=+De(+((d-f)*.5)),u=+De(+((+O[a+8>>3]-+O[A+8>>3])*.5)),u=g*g+u*(+rt(+d)*+rt(+f)*u),+(+Vn(+ +qe(+u),+ +qe(+(1-u)))*2*6371.007180918475)}function jx(A,a){A=A|0,a=a|0;var u=0,f=0,d=0,g=0;return d=+O[a>>3],f=+O[A>>3],g=+De(+((d-f)*.5)),u=+De(+((+O[a+8>>3]-+O[A+8>>3])*.5)),u=g*g+u*(+rt(+d)*+rt(+f)*u),+(+Vn(+ +qe(+u),+ +qe(+(1-u)))*2*6371.007180918475*1e3)}function Gx(A,a){A=A|0,a=a|0;var u=0,f=0,d=0,g=0,m=0;return g=+O[a>>3],f=+rt(+g),d=+O[a+8>>3]-+O[A+8>>3],m=f*+De(+d),u=+O[A>>3],+ +Vn(+m,+(+De(+g)*+rt(+u)-+rt(+d)*(f*+De(+u))))}function Hx(A,a,u,f){A=A|0,a=+a,u=+u,f=f|0;var d=0,g=0,m=0,v=0;if(u<1e-16){l[f>>2]=l[A>>2],l[f+4>>2]=l[A+4>>2],l[f+8>>2]=l[A+8>>2],l[f+12>>2]=l[A+12>>2];return}g=a<0?a+6.283185307179586:a,g=a>=6.283185307179586?g+-6.283185307179586:g;do if(g<1e-16)a=+O[A>>3]+u,O[f>>3]=a,d=f;else{if(d=+We(+(g+-3.141592653589793))<1e-16,a=+O[A>>3],d){a=a-u,O[f>>3]=a,d=f;break}if(m=+rt(+u),u=+De(+u),a=m*+De(+a)+ +rt(+g)*(u*+rt(+a)),a=a>1?1:a,a=+Co(+(a<-1?-1:a)),O[f>>3]=a,+We(+(a+-1.5707963267948966))<1e-16){O[f>>3]=1.5707963267948966,O[f+8>>3]=0;return}if(+We(+(a+1.5707963267948966))<1e-16){O[f>>3]=-1.5707963267948966,O[f+8>>3]=0;return}if(v=+rt(+a),g=u*+De(+g)/v,u=+O[A>>3],a=(m-+De(+a)*+De(+u))/+rt(+u)/v,m=g>1?1:g,a=a>1?1:a,a=+O[A+8>>3]+ +Vn(+(m<-1?-1:m),+(a<-1?-1:a)),a>3.141592653589793)do a=a+-6.283185307179586;while(a>3.141592653589793);if(a<-3.141592653589793)do a=a+6.283185307179586;while(a<-3.141592653589793);O[f+8>>3]=a;return}while(!1);if(+We(+(a+-1.5707963267948966))<1e-16){O[d>>3]=1.5707963267948966,O[f+8>>3]=0;return}if(+We(+(a+1.5707963267948966))<1e-16){O[d>>3]=-1.5707963267948966,O[f+8>>3]=0;return}if(a=+O[A+8>>3],a>3.141592653589793)do a=a+-6.283185307179586;while(a>3.141592653589793);if(a<-3.141592653589793)do a=a+6.283185307179586;while(a<-3.141592653589793);O[f+8>>3]=a}function Wx(A,a){return A=A|0,a=a|0,A>>>0>15?(a=4,a|0):(O[a>>3]=+O[20528+(A<<3)>>3],a=0,a|0)}function Qx(A,a){return A=A|0,a=a|0,A>>>0>15?(a=4,a|0):(O[a>>3]=+O[20656+(A<<3)>>3],a=0,a|0)}function Yx(A,a){return A=A|0,a=a|0,A>>>0>15?(a=4,a|0):(O[a>>3]=+O[20784+(A<<3)>>3],a=0,a|0)}function $x(A,a){return A=A|0,a=a|0,A>>>0>15?(a=4,a|0):(O[a>>3]=+O[20912+(A<<3)>>3],a=0,a|0)}function O0(A,a){A=A|0,a=a|0;var u=0;return A>>>0>15?(a=4,a|0):(u=Qi(7,0,A,((A|0)<0)<<31>>31)|0,u=yn(u|0,N()|0,120,0)|0,A=N()|0,l[a>>2]=u|2,l[a+4>>2]=A,a=0,a|0)}function g1(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0,m=0,v=0,b=0,E=0,M=0,D=0,j=0;return j=+O[a>>3],M=+O[A>>3],b=+De(+((j-M)*.5)),g=+O[a+8>>3],E=+O[A+8>>3],m=+De(+((g-E)*.5)),v=+rt(+M),D=+rt(+j),m=b*b+m*(D*v*m),m=+Vn(+ +qe(+m),+ +qe(+(1-m)))*2,b=+O[u>>3],j=+De(+((b-j)*.5)),f=+O[u+8>>3],g=+De(+((f-g)*.5)),d=+rt(+b),g=j*j+g*(D*d*g),g=+Vn(+ +qe(+g),+ +qe(+(1-g)))*2,b=+De(+((M-b)*.5)),f=+De(+((E-f)*.5)),f=b*b+f*(v*d*f),f=+Vn(+ +qe(+f),+ +qe(+(1-f)))*2,d=(m+g+f)*.5,+(+Ps(+ +qe(+(+Jt(+(d*.5))*+Jt(+((d-m)*.5))*+Jt(+((d-g)*.5))*+Jt(+((d-f)*.5)))))*4)}function D0(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0,m=0,v=0;if(v=R,R=R+192|0,g=v+168|0,m=v,d=wA(A,a,g)|0,d|0)return u=d,R=v,u|0;if(bA(A,a,m)|0&&Me(23313,22742,386,22751),a=l[m>>2]|0,(a|0)>0){if(f=+g1(m+8|0,m+8+(((a|0)!=1&1)<<4)|0,g)+0,(a|0)!=1){A=1;do d=A,A=A+1|0,f=f+ +g1(m+8+(d<<4)|0,m+8+(((A|0)%(a|0)|0)<<4)|0,g);while((A|0)<(a|0))}}else f=0;return O[u>>3]=f,u=0,R=v,u|0}function Xx(A,a,u){return A=A|0,a=a|0,u=u|0,A=D0(A,a,u)|0,A|0||(O[u>>3]=+O[u>>3]*6371.007180918475*6371.007180918475),A|0}function Zx(A,a,u){return A=A|0,a=a|0,u=u|0,A=D0(A,a,u)|0,A|0||(O[u>>3]=+O[u>>3]*6371.007180918475*6371.007180918475*1e3*1e3),A|0}function Kx(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0,m=0,v=0,b=0,E=0,M=0;if(v=R,R=R+176|0,m=v,A=Mu(A,a,m)|0,A|0)return m=A,R=v,m|0;if(O[u>>3]=0,A=l[m>>2]|0,(A|0)<=1)return m=0,R=v,m|0;a=A+-1|0,A=0,f=+O[m+8>>3],d=+O[m+16>>3],g=0;do A=A+1|0,E=f,f=+O[m+8+(A<<4)>>3],M=+De(+((f-E)*.5)),b=d,d=+O[m+8+(A<<4)+8>>3],b=+De(+((d-b)*.5)),b=M*M+b*(+rt(+f)*+rt(+E)*b),g=g+ +Vn(+ +qe(+b),+ +qe(+(1-b)))*2;while((A|0)<(a|0));return O[u>>3]=g,m=0,R=v,m|0}function qx(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0,m=0,v=0,b=0,E=0,M=0;if(v=R,R=R+176|0,m=v,A=Mu(A,a,m)|0,A|0)return m=A,g=+O[u>>3],g=g*6371.007180918475,O[u>>3]=g,R=v,m|0;if(O[u>>3]=0,A=l[m>>2]|0,(A|0)<=1)return m=0,g=0,g=g*6371.007180918475,O[u>>3]=g,R=v,m|0;a=A+-1|0,A=0,f=+O[m+8>>3],d=+O[m+16>>3],g=0;do A=A+1|0,E=f,f=+O[m+8+(A<<4)>>3],M=+De(+((f-E)*.5)),b=d,d=+O[m+8+(A<<4)+8>>3],b=+De(+((d-b)*.5)),b=M*M+b*(+rt(+E)*+rt(+f)*b),g=g+ +Vn(+ +qe(+b),+ +qe(+(1-b)))*2;while((A|0)!=(a|0));return O[u>>3]=g,m=0,M=g,M=M*6371.007180918475,O[u>>3]=M,R=v,m|0}function Jx(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0,m=0,v=0,b=0,E=0,M=0;if(v=R,R=R+176|0,m=v,A=Mu(A,a,m)|0,A|0)return m=A,g=+O[u>>3],g=g*6371.007180918475,g=g*1e3,O[u>>3]=g,R=v,m|0;if(O[u>>3]=0,A=l[m>>2]|0,(A|0)<=1)return m=0,g=0,g=g*6371.007180918475,g=g*1e3,O[u>>3]=g,R=v,m|0;a=A+-1|0,A=0,f=+O[m+8>>3],d=+O[m+16>>3],g=0;do A=A+1|0,E=f,f=+O[m+8+(A<<4)>>3],M=+De(+((f-E)*.5)),b=d,d=+O[m+8+(A<<4)+8>>3],b=+De(+((d-b)*.5)),b=M*M+b*(+rt(+E)*+rt(+f)*b),g=g+ +Vn(+ +qe(+b),+ +qe(+(1-b)))*2;while((A|0)!=(a|0));return O[u>>3]=g,m=0,M=g,M=M*6371.007180918475,M=M*1e3,O[u>>3]=M,R=v,m|0}function eS(A){A=A|0;var a=0,u=0,f=0;return a=Yr(1,12)|0,a||Me(22832,22787,49,22845),u=A+4|0,f=l[u>>2]|0,f|0?(f=f+8|0,l[f>>2]=a,l[u>>2]=a,a|0):(l[A>>2]|0&&Me(22862,22787,61,22885),f=A,l[f>>2]=a,l[u>>2]=a,a|0)}function tS(A,a){A=A|0,a=a|0;var u=0,f=0;return f=Qr(24)|0,f||Me(22899,22787,78,22913),l[f>>2]=l[a>>2],l[f+4>>2]=l[a+4>>2],l[f+8>>2]=l[a+8>>2],l[f+12>>2]=l[a+12>>2],l[f+16>>2]=0,a=A+4|0,u=l[a>>2]|0,u|0?(l[u+16>>2]=f,l[a>>2]=f,f|0):(l[A>>2]|0&&Me(22928,22787,82,22913),l[A>>2]=f,l[a>>2]=f,f|0)}function p1(A){A=A|0;var a=0,u=0,f=0,d=0;if(A)for(f=1;;){if(a=l[A>>2]|0,a|0)do{if(u=l[a>>2]|0,u|0)do d=u,u=l[u+16>>2]|0,Ne(d);while(u|0);d=a,a=l[a+8>>2]|0,Ne(d)}while(a|0);if(a=A,A=l[A+8>>2]|0,f||Ne(a),A)f=0;else break}}function nS(A){A=A|0;var a=0,u=0,f=0,d=0,g=0,m=0,v=0,b=0,E=0,M=0,D=0,j=0,W=0,V=0,$=0,re=0,ee=0,Z=0,K=0,Y=0,ve=0,be=0,he=0,ye=0,ut=0,tt=0,it=0,Qe=0,He=0,Ye=0,ct=0,Ue=0;if(d=A+8|0,l[d>>2]|0)return Ue=1,Ue|0;if(f=l[A>>2]|0,!f)return Ue=0,Ue|0;a=f,u=0;do u=u+1|0,a=l[a+8>>2]|0;while(a|0);if(u>>>0<2)return Ue=0,Ue|0;Ye=Qr(u<<2)|0,Ye||Me(22948,22787,317,22967),He=Qr(u<<5)|0,He||Me(22989,22787,321,22967),l[A>>2]=0,be=A+4|0,l[be>>2]=0,l[d>>2]=0,u=0,Qe=0,ve=0,D=0;e:for(;;){if(M=l[f>>2]|0,M){g=0,m=M;do{if(b=+O[m+8>>3],a=m,m=l[m+16>>2]|0,E=(m|0)==0,d=E?M:m,v=+O[d+8>>3],+We(+(b-v))>3.141592653589793){Ue=14;break}g=g+(v-b)*(+O[a>>3]+ +O[d>>3])}while(!E);if((Ue|0)==14){Ue=0,g=0,a=M;do Y=+O[a+8>>3],it=a+16|0,tt=l[it>>2]|0,tt=tt|0?tt:M,K=+O[tt+8>>3],g=g+(+O[a>>3]+ +O[tt>>3])*((K<0?K+6.283185307179586:K)-(Y<0?Y+6.283185307179586:Y)),a=l[(a|0?it:f)>>2]|0;while(a|0)}g>0?(l[Ye+(Qe<<2)>>2]=f,Qe=Qe+1|0,d=ve,a=D):Ue=19}else Ue=19;if((Ue|0)==19){Ue=0;do if(u){if(a=u+8|0,l[a>>2]|0){Ue=21;break e}if(u=Yr(1,12)|0,!u){Ue=23;break e}l[a>>2]=u,d=u+4|0,m=u,a=D}else if(D){d=be,m=D+8|0,a=f,u=A;break}else if(l[A>>2]|0){Ue=27;break e}else{d=be,m=A,a=f,u=A;break}while(!1);if(l[m>>2]=f,l[d>>2]=f,m=He+(ve<<5)|0,E=l[f>>2]|0,E){for(M=He+(ve<<5)+8|0,O[M>>3]=17976931348623157e292,D=He+(ve<<5)+24|0,O[D>>3]=17976931348623157e292,O[m>>3]=-17976931348623157e292,j=He+(ve<<5)+16|0,O[j>>3]=-17976931348623157e292,ee=17976931348623157e292,Z=-17976931348623157e292,d=0,W=E,b=17976931348623157e292,$=17976931348623157e292,re=-17976931348623157e292,v=-17976931348623157e292;g=+O[W>>3],Y=+O[W+8>>3],W=l[W+16>>2]|0,V=(W|0)==0,K=+O[(V?E:W)+8>>3],g<b&&(O[M>>3]=g,b=g),Y<$&&(O[D>>3]=Y,$=Y),g>re?O[m>>3]=g:g=re,Y>v&&(O[j>>3]=Y,v=Y),ee=Y>0&Y<ee?Y:ee,Z=Y<0&Y>Z?Y:Z,d=d|+We(+(Y-K))>3.141592653589793,!V;)re=g;d&&(O[j>>3]=Z,O[D>>3]=ee)}else l[m>>2]=0,l[m+4>>2]=0,l[m+8>>2]=0,l[m+12>>2]=0,l[m+16>>2]=0,l[m+20>>2]=0,l[m+24>>2]=0,l[m+28>>2]=0;d=ve+1|0}if(it=f+8|0,f=l[it>>2]|0,l[it>>2]=0,f)ve=d,D=a;else{Ue=45;break}}if((Ue|0)==21)Me(22765,22787,35,22799);else if((Ue|0)==23)Me(22819,22787,37,22799);else if((Ue|0)==27)Me(22862,22787,61,22885);else if((Ue|0)==45){e:do if((Qe|0)>0){for(it=(d|0)==0,ut=d<<2,tt=(A|0)==0,ye=0,a=0;;){if(he=l[Ye+(ye<<2)>>2]|0,it)Ue=73;else{if(ve=Qr(ut)|0,!ve){Ue=50;break}if(be=Qr(ut)|0,!be){Ue=52;break}t:do if(tt)u=0;else{for(d=0,u=0,m=A;f=He+(d<<5)|0,m1(l[m>>2]|0,f,l[he>>2]|0)|0?(l[ve+(u<<2)>>2]=m,l[be+(u<<2)>>2]=f,V=u+1|0):V=u,m=l[m+8>>2]|0,m;)d=d+1|0,u=V;if((V|0)>0)if(f=l[ve>>2]|0,(V|0)==1)u=f;else for(j=0,W=-1,u=f,D=f;;){for(E=l[D>>2]|0,f=0,m=0;d=l[l[ve+(m<<2)>>2]>>2]|0,(d|0)==(E|0)?M=f:M=f+((m1(d,l[be+(m<<2)>>2]|0,l[E>>2]|0)|0)&1)|0,m=m+1|0,(m|0)!=(V|0);)f=M;if(d=(M|0)>(W|0),u=d?D:u,f=j+1|0,(f|0)==(V|0))break t;j=f,W=d?M:W,D=l[ve+(f<<2)>>2]|0}else u=0}while(!1);if(Ne(ve),Ne(be),u){if(d=u+4|0,f=l[d>>2]|0,f)u=f+8|0;else if(l[u>>2]|0){Ue=70;break}l[u>>2]=he,l[d>>2]=he}else Ue=73}if((Ue|0)==73){if(Ue=0,a=l[he>>2]|0,a|0)do be=a,a=l[a+16>>2]|0,Ne(be);while(a|0);Ne(he),a=1}if(ye=ye+1|0,(ye|0)>=(Qe|0)){ct=a;break e}}(Ue|0)==50?Me(23004,22787,249,23023):(Ue|0)==52?Me(23042,22787,252,23023):(Ue|0)==70&&Me(22862,22787,61,22885)}else ct=0;while(!1);return Ne(Ye),Ne(He),Ue=ct,Ue|0}return 0}function m1(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0,m=0,v=0,b=0,E=0,M=0;if(!(Jm(a,u)|0)||(a=qm(a)|0,f=+O[u>>3],d=+O[u+8>>3],d=a&d<0?d+6.283185307179586:d,A=l[A>>2]|0,!A))return A=0,A|0;if(a){a=0,E=d,u=A;e:for(;;){for(;m=+O[u>>3],d=+O[u+8>>3],u=u+16|0,M=l[u>>2]|0,M=M|0?M:A,g=+O[M>>3],v=+O[M+8>>3],m>g?(b=m,m=v):(b=g,g=m,m=d,d=v),f=f==g|f==b?f+2220446049250313e-31:f,!!(f<g|f>b);)if(u=l[u>>2]|0,!u){u=22;break e}if(v=m<0?m+6.283185307179586:m,m=d<0?d+6.283185307179586:d,E=v==E|m==E?E+-2220446049250313e-31:E,b=v+(m-v)*((f-g)/(b-g)),(b<0?b+6.283185307179586:b)>E&&(a=a^1),u=l[u>>2]|0,!u){u=22;break}}if((u|0)==22)return a|0}else{a=0,E=d,u=A;e:for(;;){for(;m=+O[u>>3],d=+O[u+8>>3],u=u+16|0,M=l[u>>2]|0,M=M|0?M:A,g=+O[M>>3],v=+O[M+8>>3],m>g?(b=m,m=v):(b=g,g=m,m=d,d=v),f=f==g|f==b?f+2220446049250313e-31:f,!!(f<g|f>b);)if(u=l[u>>2]|0,!u){u=22;break e}if(E=m==E|d==E?E+-2220446049250313e-31:E,m+(d-m)*((f-g)/(b-g))>E&&(a=a^1),u=l[u>>2]|0,!u){u=22;break}}if((u|0)==22)return a|0}return 0}function pi(A,a,u,f,d){A=A|0,a=a|0,u=u|0,f=f|0,d=d|0;var g=0,m=0,v=0,b=0,E=0,M=0,D=0,j=0,W=0,V=0,$=0,re=0,ee=0,Z=0;if(Z=R,R=R+32|0,ee=Z+16|0,re=Z,g=ae(A|0,a|0,52)|0,N()|0,g=g&15,W=ae(u|0,f|0,52)|0,N()|0,(g|0)!=(W&15|0))return ee=12,R=Z,ee|0;if(E=ae(A|0,a|0,45)|0,N()|0,E=E&127,M=ae(u|0,f|0,45)|0,N()|0,M=M&127,E>>>0>121|M>>>0>121)return ee=5,R=Z,ee|0;if(W=(E|0)!=(M|0),W){if(v=E0(E,M)|0,(v|0)==7)return ee=1,R=Z,ee|0;b=E0(M,E)|0,(b|0)==7?Me(23066,23090,161,23100):(V=v,m=b)}else V=0,m=0;D=Se(E)|0,j=Se(M)|0,l[ee>>2]=0,l[ee+4>>2]=0,l[ee+8>>2]=0,l[ee+12>>2]=0;do if(V){if(M=l[4272+(E*28|0)+(V<<2)>>2]|0,v=(M|0)>0,j)if(v){E=0,b=u,v=f;do b=Dx(b,v)|0,v=N()|0,m=Wi(m)|0,(m|0)==1&&(m=Wi(1)|0),E=E+1|0;while((E|0)!=(M|0));M=m,E=b,b=v}else M=m,E=u,b=f;else if(v){E=0,b=u,v=f;do b=k0(b,v)|0,v=N()|0,m=Wi(m)|0,E=E+1|0;while((E|0)!=(M|0));M=m,E=b,b=v}else M=m,E=u,b=f;if(I0(E,b,ee)|0,W||Me(23115,23090,191,23100),v=(D|0)!=0,m=(j|0)!=0,v&m&&Me(23142,23090,192,23100),v){if(m=jn(A,a)|0,(m|0)==7){g=5;break}if(Oe[21872+(m*7|0)+V>>0]|0){g=1;break}b=l[21040+(m*28|0)+(V<<2)>>2]|0,E=b}else if(m){if(m=jn(E,b)|0,(m|0)==7){g=5;break}if(Oe[21872+(m*7|0)+M>>0]|0){g=1;break}E=0,b=l[21040+(M*28|0)+(m<<2)>>2]|0}else E=0,b=0;if((E|b|0)<0)g=5;else{if((b|0)>0){v=ee+4|0,m=0;do Cu(v),m=m+1|0;while((m|0)!=(b|0))}if(l[re>>2]=0,l[re+4>>2]=0,l[re+8>>2]=0,r1(re,V),g|0)for(;pr(g)|0?Su(re):Is(re),(g|0)>1;)g=g+-1|0;if((E|0)>0){g=0;do Cu(re),g=g+1|0;while((g|0)!=(E|0))}$=ee+4|0,kn($,re,$),mn($),$=51}}else if(I0(u,f,ee)|0,(D|0)!=0&(j|0)!=0)if((M|0)!=(E|0)&&Me(23173,23090,261,23100),m=jn(A,a)|0,g=jn(u,f)|0,(m|0)==7|(g|0)==7)g=5;else if(Oe[21872+(m*7|0)+g>>0]|0)g=1;else if(m=l[21040+(m*28|0)+(g<<2)>>2]|0,(m|0)>0){v=ee+4|0,g=0;do Cu(v),g=g+1|0;while((g|0)!=(m|0));$=51}else $=51;else $=51;while(!1);return($|0)==51&&(g=ee+4|0,l[d>>2]=l[g>>2],l[d+4>>2]=l[g+4>>2],l[d+8>>2]=l[g+8>>2],g=0),ee=g,R=Z,ee|0}function v1(A,a,u,f){A=A|0,a=a|0,u=u|0,f=f|0;var d=0,g=0,m=0,v=0,b=0,E=0,M=0,D=0,j=0,W=0,V=0,$=0,re=0,ee=0,Z=0,K=0;if($=R,R=R+48|0,E=$+36|0,m=$+24|0,v=$+12|0,b=$,d=ae(A|0,a|0,52)|0,N()|0,d=d&15,j=ae(A|0,a|0,45)|0,N()|0,j=j&127,j>>>0>121)return f=5,R=$,f|0;if(M=Se(j)|0,ge(d|0,0,52)|0,re=N()|0|134225919,g=f,l[g>>2]=-1,l[g+4>>2]=re,!d)return d=xu(u)|0,(d|0)==7||(d=b0(j,d)|0,(d|0)==127)?(re=1,R=$,re|0):(W=ge(d|0,0,45)|0,V=N()|0,j=f,V=l[j+4>>2]&-1040385|V,re=f,l[re>>2]=l[j>>2]|W,l[re+4>>2]=V,re=0,R=$,re|0);for(l[E>>2]=l[u>>2],l[E+4>>2]=l[u+4>>2],l[E+8>>2]=l[u+8>>2],u=d;;){if(g=u,u=u+-1|0,l[m>>2]=l[E>>2],l[m+4>>2]=l[E+4>>2],l[m+8>>2]=l[E+8>>2],pr(g)|0){if(d=lx(E)|0,d|0){u=13;break}l[v>>2]=l[E>>2],l[v+4>>2]=l[E+4>>2],l[v+8>>2]=l[E+8>>2],Su(v)}else{if(d=ux(E)|0,d|0){u=13;break}l[v>>2]=l[E>>2],l[v+4>>2]=l[E+4>>2],l[v+8>>2]=l[E+8>>2],Is(v)}if(T0(m,v,b),mn(b),d=f,Z=l[d>>2]|0,d=l[d+4>>2]|0,K=(15-g|0)*3|0,ee=ge(7,0,K|0)|0,d=d&~(N()|0),K=ge(xu(b)|0,0,K|0)|0,d=N()|0|d,re=f,l[re>>2]=K|Z&~ee,l[re+4>>2]=d,(g|0)<=1){u=14;break}}e:do if((u|0)!=13&&(u|0)==14)if((l[E>>2]|0)<=1&&(l[E+4>>2]|0)<=1&&(l[E+8>>2]|0)<=1){u=xu(E)|0,d=b0(j,u)|0,(d|0)==127?b=0:b=Se(d)|0;t:do if(u){if(M){if(d=jn(A,a)|0,(d|0)==7){d=5;break e}if(g=l[21248+(d*28|0)+(u<<2)>>2]|0,(g|0)>0){d=u,u=0;do d=Rs(d)|0,u=u+1|0;while((u|0)!=(g|0))}else d=u;if((d|0)==1){d=9;break e}u=b0(j,d)|0,(u|0)==127&&Me(23200,23090,411,23230),Se(u)|0?Me(23245,23090,412,23230):(V=u,W=g,D=d)}else V=d,W=0,D=u;if(v=l[4272+(j*28|0)+(D<<2)>>2]|0,(v|0)<=-1&&Me(23276,23090,419,23230),!b){if((W|0)<0){d=5;break e}if(W|0){g=f,d=0,u=l[g>>2]|0,g=l[g+4>>2]|0;do u=Os(u,g)|0,g=N()|0,K=f,l[K>>2]=u,l[K+4>>2]=g,d=d+1|0;while((d|0)<(W|0))}if((v|0)<=0){d=V,u=58;break}for(g=f,d=0,u=l[g>>2]|0,g=l[g+4>>2]|0;;)if(u=Os(u,g)|0,g=N()|0,K=f,l[K>>2]=u,l[K+4>>2]=g,d=d+1|0,(d|0)==(v|0)){d=V,u=58;break t}}if(m=E0(V,j)|0,(m|0)==7&&Me(23066,23090,428,23230),d=f,u=l[d>>2]|0,d=l[d+4>>2]|0,(v|0)>0){g=0;do u=Os(u,d)|0,d=N()|0,K=f,l[K>>2]=u,l[K+4>>2]=d,g=g+1|0;while((g|0)!=(v|0))}if(d=jn(u,d)|0,(d|0)==7&&Me(23313,23090,440,23230),u=Dt(V)|0,u=l[(u?21664:21456)+(m*28|0)+(d<<2)>>2]|0,(u|0)<0&&Me(23313,23090,454,23230),!u)d=V,u=58;else{m=f,d=0,g=l[m>>2]|0,m=l[m+4>>2]|0;do g=P0(g,m)|0,m=N()|0,K=f,l[K>>2]=g,l[K+4>>2]=m,d=d+1|0;while((d|0)<(u|0));d=V,u=58}}else if((M|0)!=0&(b|0)!=0){if(u=jn(A,a)|0,g=f,g=jn(l[g>>2]|0,l[g+4>>2]|0)|0,(u|0)==7|(g|0)==7){d=5;break e}if(g=l[21248+(u*28|0)+(g<<2)>>2]|0,(g|0)<0){d=5;break e}if(!g)u=59;else{v=f,u=0,m=l[v>>2]|0,v=l[v+4>>2]|0;do m=Os(m,v)|0,v=N()|0,K=f,l[K>>2]=m,l[K+4>>2]=v,u=u+1|0;while((u|0)<(g|0));u=58}}else u=58;while(!1);if((u|0)==58&&b&&(u=59),(u|0)==59&&(K=f,(jn(l[K>>2]|0,l[K+4>>2]|0)|0)==1)){d=9;break}K=f,ee=l[K>>2]|0,K=l[K+4>>2]&-1040385,Z=ge(d|0,0,45)|0,K=K|(N()|0),d=f,l[d>>2]=ee|Z,l[d+4>>2]=K,d=0}else d=1;while(!1);return K=d,R=$,K|0}function rS(A,a,u,f,d,g){A=A|0,a=a|0,u=u|0,f=f|0,d=d|0,g=g|0;var m=0,v=0;return v=R,R=R+16|0,m=v,d?A=15:(A=pi(A,a,u,f,m)|0,A||(fx(m,g),A=0)),R=v,A|0}function iS(A,a,u,f,d){A=A|0,a=a|0,u=u|0,f=f|0,d=d|0;var g=0,m=0;return m=R,R=R+16|0,g=m,f?u=15:(u=hx(u,g)|0,u||(u=v1(A,a,g,d)|0)),R=m,u|0}function sS(A,a,u,f,d){A=A|0,a=a|0,u=u|0,f=f|0,d=d|0;var g=0,m=0,v=0,b=0;return b=R,R=R+32|0,m=b+12|0,v=b,g=pi(A,a,A,a,m)|0,g|0?(v=g,R=b,v|0):(A=pi(A,a,u,f,v)|0,A|0?(v=A,R=b,v|0):(m=x0(m,v)|0,v=d,l[v>>2]=m,l[v+4>>2]=((m|0)<0)<<31>>31,v=0,R=b,v|0))}function oS(A,a,u,f,d){A=A|0,a=a|0,u=u|0,f=f|0,d=d|0;var g=0,m=0,v=0,b=0;return b=R,R=R+32|0,m=b+12|0,v=b,g=pi(A,a,A,a,m)|0,!g&&(g=pi(A,a,u,f,v)|0,!g)?(f=x0(m,v)|0,f=Ze(f|0,((f|0)<0)<<31>>31|0,1,0)|0,m=N()|0,v=d,l[v>>2]=f,l[v+4>>2]=m,v=0,R=b,v|0):(v=g,R=b,v|0)}function aS(A,a,u,f,d){A=A|0,a=a|0,u=u|0,f=f|0,d=d|0;var g=0,m=0,v=0,b=0,E=0,M=0,D=0,j=0,W=0,V=0,$=0,re=0,ee=0,Z=0,K=0,Y=0,ve=0,be=0,he=0,ye=0;if(he=R,R=R+48|0,m=he+24|0,v=he+12|0,be=he,g=pi(A,a,A,a,m)|0,!g&&(g=pi(A,a,u,f,v)|0,!g)){Y=x0(m,v)|0,ve=((Y|0)<0)<<31>>31,l[m>>2]=0,l[m+4>>2]=0,l[m+8>>2]=0,l[v>>2]=0,l[v+4>>2]=0,l[v+8>>2]=0,pi(A,a,A,a,m)|0&&Me(23313,23090,691,23299),pi(A,a,u,f,v)|0&&Me(23313,23090,696,23299),a1(m),a1(v),Y?(D=l[m>>2]|0,V=+(Y|0),ee=m+4|0,j=l[ee>>2]|0,Z=m+8|0,W=l[Z>>2]|0,K=m,f=D,g=j,u=W,$=+((l[v>>2]|0)-D|0)/V,re=+((l[v+4>>2]|0)-j|0)/V,V=+((l[v+8>>2]|0)-W|0)/V):(g=m+4|0,u=m+8|0,ee=g,Z=u,K=m,f=l[m>>2]|0,g=l[g>>2]|0,u=l[u>>2]|0,$=0,re=0,V=0),l[be>>2]=f,W=be+4|0,l[W>>2]=g,j=be+8|0,l[j>>2]=u;e:do if((Y|0)<0)g=0;else for(M=0,D=0,g=f;;){E=+(D>>>0)+4294967296*+(M|0),ye=$*E+ +(g|0),b=re*E+ +(l[ee>>2]|0),E=V*E+ +(l[Z>>2]|0),u=~~+ku(+ye),m=~~+ku(+b),g=~~+ku(+E),ye=+We(+(+(u|0)-ye)),b=+We(+(+(m|0)-b)),E=+We(+(+(g|0)-E));do if(ye>b&ye>E)u=0-(m+g)|0,f=m;else if(v=0-u|0,b>E){f=v-g|0;break}else{f=m,g=v-m|0;break}while(!1);if(l[be>>2]=u,l[W>>2]=f,l[j>>2]=g,dx(be),g=v1(A,a,be,d+(D<<3)|0)|0,g|0)break e;if(!((M|0)<(ve|0)|(M|0)==(ve|0)&D>>>0<Y>>>0)){g=0;break e}g=Ze(D|0,M|0,1,0)|0,v=N()|0,M=v,D=g,g=l[K>>2]|0}while(!1);return be=g,R=he,be|0}return be=g,R=he,be|0}function Qi(A,a,u,f){A=A|0,a=a|0,u=u|0,f=f|0;var d=0,g=0,m=0;if((u|0)==0&(f|0)==0)return d=0,g=1,Re(d|0),g|0;g=A,d=a,A=1,a=0;do m=(u&1|0)==0&!0,A=yn((m?1:g)|0,(m?0:d)|0,A|0,a|0)|0,a=N()|0,u=M1(u|0,f|0,1)|0,f=N()|0,g=yn(g|0,d|0,g|0,d|0)|0,d=N()|0;while(!((u|0)==0&(f|0)==0));return Re(a|0),A|0}function y1(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0,m=0,v=0,b=0,E=0,M=0,D=0,j=0;if(!(Jm(a,u)|0)||(a=qm(a)|0,f=+O[u>>3],d=+O[u+8>>3],d=a&d<0?d+6.283185307179586:d,j=l[A>>2]|0,(j|0)<=0))return j=0,j|0;if(D=l[A+4>>2]|0,a){a=0,M=d,u=-1,A=0;e:for(;;){for(E=A;m=+O[D+(E<<4)>>3],d=+O[D+(E<<4)+8>>3],A=(u+2|0)%(j|0)|0,g=+O[D+(A<<4)>>3],v=+O[D+(A<<4)+8>>3],m>g?(b=m,m=v):(b=g,g=m,m=d,d=v),f=f==g|f==b?f+2220446049250313e-31:f,!!(f<g|f>b);)if(u=E+1|0,(u|0)>=(j|0)){u=22;break e}else A=E,E=u,u=A;if(v=m<0?m+6.283185307179586:m,m=d<0?d+6.283185307179586:d,M=v==M|m==M?M+-2220446049250313e-31:M,b=v+(m-v)*((f-g)/(b-g)),(b<0?b+6.283185307179586:b)>M&&(a=a^1),A=E+1|0,(A|0)>=(j|0)){u=22;break}else u=E}if((u|0)==22)return a|0}else{a=0,M=d,u=-1,A=0;e:for(;;){for(E=A;m=+O[D+(E<<4)>>3],d=+O[D+(E<<4)+8>>3],A=(u+2|0)%(j|0)|0,g=+O[D+(A<<4)>>3],v=+O[D+(A<<4)+8>>3],m>g?(b=m,m=v):(b=g,g=m,m=d,d=v),f=f==g|f==b?f+2220446049250313e-31:f,!!(f<g|f>b);)if(u=E+1|0,(u|0)>=(j|0)){u=22;break e}else A=E,E=u,u=A;if(M=m==M|d==M?M+-2220446049250313e-31:M,m+(d-m)*((f-g)/(b-g))>M&&(a=a^1),A=E+1|0,(A|0)>=(j|0)){u=22;break}else u=E}if((u|0)==22)return a|0}return 0}function _1(A,a){A=A|0,a=a|0;var u=0,f=0,d=0,g=0,m=0,v=0,b=0,E=0,M=0,D=0,j=0,W=0,V=0,$=0,re=0,ee=0,Z=0;if(V=l[A>>2]|0,!V){l[a>>2]=0,l[a+4>>2]=0,l[a+8>>2]=0,l[a+12>>2]=0,l[a+16>>2]=0,l[a+20>>2]=0,l[a+24>>2]=0,l[a+28>>2]=0;return}if($=a+8|0,O[$>>3]=17976931348623157e292,re=a+24|0,O[re>>3]=17976931348623157e292,O[a>>3]=-17976931348623157e292,ee=a+16|0,O[ee>>3]=-17976931348623157e292,!((V|0)<=0)){for(j=l[A+4>>2]|0,E=17976931348623157e292,M=-17976931348623157e292,D=0,A=-1,g=17976931348623157e292,m=17976931348623157e292,b=-17976931348623157e292,f=-17976931348623157e292,W=0;u=+O[j+(W<<4)>>3],v=+O[j+(W<<4)+8>>3],A=A+2|0,d=+O[j+(((A|0)==(V|0)?0:A)<<4)+8>>3],u<g&&(O[$>>3]=u,g=u),v<m&&(O[re>>3]=v,m=v),u>b?O[a>>3]=u:u=b,v>f&&(O[ee>>3]=v,f=v),E=v>0&v<E?v:E,M=v<0&v>M?v:M,D=D|+We(+(v-d))>3.141592653589793,A=W+1|0,(A|0)!=(V|0);)Z=W,b=u,W=A,A=Z;D&&(O[ee>>3]=M,O[re>>3]=E)}}function AS(A,a){A=A|0,a=a|0;var u=0,f=0,d=0,g=0,m=0,v=0,b=0,E=0,M=0,D=0,j=0,W=0,V=0,$=0,re=0,ee=0,Z=0,K=0,Y=0,ve=0,be=0,he=0;if(V=l[A>>2]|0,V){if($=a+8|0,O[$>>3]=17976931348623157e292,re=a+24|0,O[re>>3]=17976931348623157e292,O[a>>3]=-17976931348623157e292,ee=a+16|0,O[ee>>3]=-17976931348623157e292,(V|0)>0){for(d=l[A+4>>2]|0,j=17976931348623157e292,W=-17976931348623157e292,f=0,u=-1,b=17976931348623157e292,E=17976931348623157e292,D=-17976931348623157e292,m=-17976931348623157e292,Z=0;g=+O[d+(Z<<4)>>3],M=+O[d+(Z<<4)+8>>3],be=u+2|0,v=+O[d+(((be|0)==(V|0)?0:be)<<4)+8>>3],g<b&&(O[$>>3]=g,b=g),M<E&&(O[re>>3]=M,E=M),g>D?O[a>>3]=g:g=D,M>m&&(O[ee>>3]=M,m=M),j=M>0&M<j?M:j,W=M<0&M>W?M:W,f=f|+We(+(M-v))>3.141592653589793,u=Z+1|0,(u|0)!=(V|0);)be=Z,D=g,Z=u,u=be;f&&(O[ee>>3]=W,O[re>>3]=j)}}else l[a>>2]=0,l[a+4>>2]=0,l[a+8>>2]=0,l[a+12>>2]=0,l[a+16>>2]=0,l[a+20>>2]=0,l[a+24>>2]=0,l[a+28>>2]=0;if(be=A+8|0,u=l[be>>2]|0,!((u|0)<=0)){ve=A+12|0,Y=0;do if(d=l[ve>>2]|0,f=Y,Y=Y+1|0,re=a+(Y<<5)|0,ee=l[d+(f<<3)>>2]|0,ee){if(Z=a+(Y<<5)+8|0,O[Z>>3]=17976931348623157e292,A=a+(Y<<5)+24|0,O[A>>3]=17976931348623157e292,O[re>>3]=-17976931348623157e292,K=a+(Y<<5)+16|0,O[K>>3]=-17976931348623157e292,(ee|0)>0){for(V=l[d+(f<<3)+4>>2]|0,j=17976931348623157e292,W=-17976931348623157e292,d=0,f=-1,$=0,b=17976931348623157e292,E=17976931348623157e292,M=-17976931348623157e292,m=-17976931348623157e292;g=+O[V+($<<4)>>3],D=+O[V+($<<4)+8>>3],f=f+2|0,v=+O[V+(((f|0)==(ee|0)?0:f)<<4)+8>>3],g<b&&(O[Z>>3]=g,b=g),D<E&&(O[A>>3]=D,E=D),g>M?O[re>>3]=g:g=M,D>m&&(O[K>>3]=D,m=D),j=D>0&D<j?D:j,W=D<0&D>W?D:W,d=d|+We(+(D-v))>3.141592653589793,f=$+1|0,(f|0)!=(ee|0);)he=$,$=f,M=g,f=he;d&&(O[K>>3]=W,O[A>>3]=j)}}else l[re>>2]=0,l[re+4>>2]=0,l[re+8>>2]=0,l[re+12>>2]=0,l[re+16>>2]=0,l[re+20>>2]=0,l[re+24>>2]=0,l[re+28>>2]=0,u=l[be>>2]|0;while((Y|0)<(u|0))}}function lS(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0;if(!(y1(A,a,u)|0))return d=0,d|0;if(d=A+8|0,(l[d>>2]|0)<=0)return d=1,d|0;for(f=A+12|0,A=0;;){if(g=A,A=A+1|0,y1((l[f>>2]|0)+(g<<3)|0,a+(A<<5)|0,u)|0){A=0,f=6;break}if((A|0)>=(l[d>>2]|0)){A=1,f=6;break}}return(f|0)==6?A|0:0}function uS(){return 8}function cS(){return 16}function fS(){return 168}function hS(){return 8}function dS(){return 16}function gS(){return 12}function pS(){return 8}function mS(A){return A=A|0,+(+((l[A>>2]|0)>>>0)+4294967296*+(l[A+4>>2]|0))}function vS(A){A=A|0;var a=0,u=0;return u=+O[A>>3],a=+O[A+8>>3],+ +qe(+(u*u+a*a))}function w1(A,a,u,f,d){A=A|0,a=a|0,u=u|0,f=f|0,d=d|0;var g=0,m=0,v=0,b=0,E=0,M=0,D=0,j=0;E=+O[A>>3],b=+O[a>>3]-E,v=+O[A+8>>3],m=+O[a+8>>3]-v,D=+O[u>>3],g=+O[f>>3]-D,j=+O[u+8>>3],M=+O[f+8>>3]-j,g=(g*(v-j)-(E-D)*M)/(b*M-m*g),O[d>>3]=E+b*g,O[d+8>>3]=v+m*g}function b1(A,a){return A=A|0,a=a|0,+We(+(+O[A>>3]-+O[a>>3]))<11920928955078125e-23?(a=+We(+(+O[A+8>>3]-+O[a+8>>3]))<11920928955078125e-23,a|0):(a=0,a|0)}function Wt(A,a){A=A|0,a=a|0;var u=0,f=0,d=0;return d=+O[A>>3]-+O[a>>3],f=+O[A+8>>3]-+O[a+8>>3],u=+O[A+16>>3]-+O[a+16>>3],+(d*d+f*f+u*u)}function yS(A,a){A=A|0,a=a|0;var u=0,f=0,d=0;u=+O[A>>3],f=+rt(+u),u=+De(+u),O[a+16>>3]=u,u=+O[A+8>>3],d=f*+rt(+u),O[a>>3]=d,u=f*+De(+u),O[a+8>>3]=u}function _S(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0;if(g=R,R=R+16|0,d=g,f=yt(A,a)|0,(u+-1|0)>>>0>5||(f=(f|0)!=0,(u|0)==1&f))return d=-1,R=g,d|0;do if(xA(A,a,d)|0)f=-1;else if(f){f=((l[21936+(u<<2)>>2]|0)+5-(l[d>>2]|0)|0)%5|0;break}else{f=((l[21968+(u<<2)>>2]|0)+6-(l[d>>2]|0)|0)%6|0;break}while(!1);return d=f,R=g,d|0}function xA(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0,m=0,v=0,b=0,E=0;if(E=R,R=R+32|0,m=E+16|0,v=E,f=Io(A,a,m)|0,f|0)return u=f,R=E,u|0;g=u1(A,a)|0,b=jn(A,a)|0,gr(g,v),f=rx(g,l[m>>2]|0)|0;e:do if(Se(g)|0){do switch(g|0){case 4:{A=0;break}case 14:{A=1;break}case 24:{A=2;break}case 38:{A=3;break}case 49:{A=4;break}case 58:{A=5;break}case 63:{A=6;break}case 72:{A=7;break}case 83:{A=8;break}case 97:{A=9;break}case 107:{A=10;break}case 117:{A=11;break}default:{f=1;break e}}while(!1);if(d=l[22e3+(A*24|0)+8>>2]|0,a=l[22e3+(A*24|0)+16>>2]|0,A=l[m>>2]|0,(A|0)!=(l[v>>2]|0)&&(v=Dt(g)|0,A=l[m>>2]|0,v|(A|0)==(a|0)&&(f=(f+1|0)%6|0)),(b|0)==3&(A|0)==(a|0)){f=(f+5|0)%6|0,d=22;break}(b|0)==5&(A|0)==(d|0)&&(f=(f+1|0)%6|0),d=22}else d=22;while(!1);return(d|0)==22&&(l[u>>2]=f,f=0),u=f,R=E,u|0}function mr(A,a,u,f){A=A|0,a=a|0,u=u|0,f=f|0;var d=0,g=0,m=0,v=0,b=0,E=0,M=0,D=0,j=0,W=0,V=0,$=0,re=0,ee=0,Z=0,K=0;if(K=R,R=R+32|0,Z=K+24|0,re=K+20|0,V=K+8|0,W=K+16|0,j=K,b=(yt(A,a)|0)==0,b=b?6:5,M=ae(A|0,a|0,52)|0,N()|0,M=M&15,b>>>0<=u>>>0)return f=2,R=K,f|0;D=(M|0)==0,!D&&($=ge(7,0,(M^15)*3|0)|0,($&A|0)==0&((N()|0)&a|0)==0)?d=u:g=4;e:do if((g|0)==4){if(d=(yt(A,a)|0)!=0,((d?4:5)|0)<(u|0)||xA(A,a,Z)|0||(g=(l[Z>>2]|0)+u|0,d?d=22288+(((g|0)%5|0)<<2)|0:d=22320+(((g|0)%6|0)<<2)|0,$=l[d>>2]|0,($|0)==7))return f=1,R=K,f|0;l[re>>2]=0,d=Gt(A,a,$,re,V)|0;do if(!d){if(v=V,E=l[v>>2]|0,v=l[v+4>>2]|0,m=v>>>0<a>>>0|(v|0)==(a|0)&E>>>0<A>>>0,g=m?E:A,m=m?v:a,!D&&(D=ge(7,0,(M^15)*3|0)|0,(E&D|0)==0&(v&(N()|0)|0)==0))d=u;else{if(v=(u+-1+b|0)%(b|0)|0,d=yt(A,a)|0,(v|0)<0&&Me(23313,23315,245,23324),b=(d|0)!=0,((b?4:5)|0)<(v|0)&&Me(23313,23315,245,23324),xA(A,a,Z)|0&&Me(23313,23315,245,23324),d=(l[Z>>2]|0)+v|0,b?d=22288+(((d|0)%5|0)<<2)|0:d=22320+(((d|0)%6|0)<<2)|0,v=l[d>>2]|0,(v|0)==7&&Me(23313,23315,245,23324),l[W>>2]=0,d=Gt(A,a,v,W,j)|0,d|0)break;E=j,b=l[E>>2]|0,E=l[E+4>>2]|0;do if(E>>>0<m>>>0|(E|0)==(m|0)&b>>>0<g>>>0){if(yt(b,E)|0?g=yA(b,E,A,a)|0:g=l[22384+((((l[W>>2]|0)+(l[22352+(v<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,d=yt(b,E)|0,(g+-1|0)>>>0>5){d=-1,g=b,m=E;break}if(d=(d|0)!=0,(g|0)==1&d){d=-1,g=b,m=E;break}do if(xA(b,E,Z)|0)d=-1;else if(d){d=((l[21936+(g<<2)>>2]|0)+5-(l[Z>>2]|0)|0)%5|0;break}else{d=((l[21968+(g<<2)>>2]|0)+6-(l[Z>>2]|0)|0)%6|0;break}while(!1);g=b,m=E}else d=u;while(!1);v=V,E=l[v>>2]|0,v=l[v+4>>2]|0}if((g|0)==(E|0)&(m|0)==(v|0)){if(b=(yt(E,v)|0)!=0,b?A=yA(E,v,A,a)|0:A=l[22384+((((l[re>>2]|0)+(l[22352+($<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,d=yt(E,v)|0,(A+-1|0)>>>0<=5&&(ee=(d|0)!=0,!((A|0)==1&ee)))do if(xA(E,v,Z)|0)d=-1;else if(ee){d=((l[21936+(A<<2)>>2]|0)+5-(l[Z>>2]|0)|0)%5|0;break}else{d=((l[21968+(A<<2)>>2]|0)+6-(l[Z>>2]|0)|0)%6|0;break}while(!1);else d=-1;d=d+1|0,d=(d|0)==6|b&(d|0)==5?0:d}a=m,A=g;break e}while(!1);return f=d,R=K,f|0}while(!1);return ee=ge(d|0,0,56)|0,Z=N()|0|a&-2130706433|536870912,l[f>>2]=ee|A,l[f+4>>2]=Z,f=0,R=K,f|0}function wS(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0;return g=(yt(A,a)|0)==0,f=mr(A,a,0,u)|0,d=(f|0)==0,g?!d||(f=mr(A,a,1,u+8|0)|0,f|0)||(f=mr(A,a,2,u+16|0)|0,f|0)||(f=mr(A,a,3,u+24|0)|0,f|0)||(f=mr(A,a,4,u+32|0)|0,f)?(g=f,g|0):mr(A,a,5,u+40|0)|0:!d||(f=mr(A,a,1,u+8|0)|0,f|0)||(f=mr(A,a,2,u+16|0)|0,f|0)||(f=mr(A,a,3,u+24|0)|0,f|0)||(f=mr(A,a,4,u+32|0)|0,f|0)?(g=f,g|0):(g=u+40|0,l[g>>2]=0,l[g+4>>2]=0,g=0,g|0)}function bS(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0,m=0,v=0,b=0;return b=R,R=R+192|0,d=b,g=b+168|0,m=ae(A|0,a|0,56)|0,N()|0,m=m&7,v=a&-2130706433|134217728,f=Io(A,v,g)|0,f|0?(v=f,R=b,v|0):(a=ae(A|0,a|0,52)|0,N()|0,a=a&15,yt(A,v)|0?S0(g,a,m,1,d):C0(g,a,m,1,d),v=d+8|0,l[u>>2]=l[v>>2],l[u+4>>2]=l[v+4>>2],l[u+8>>2]=l[v+8>>2],l[u+12>>2]=l[v+12>>2],v=0,R=b,v|0)}function ES(A,a){A=A|0,a=a|0;var u=0,f=0,d=0,g=0;return d=R,R=R+16|0,u=d,!(!0&(a&2013265920|0)==536870912)||(f=a&-2130706433|134217728,!(M0(A,f)|0))?(f=0,R=d,f|0):(g=ae(A|0,a|0,56)|0,N()|0,g=(mr(A,f,g&7,u)|0)==0,f=u,f=g&((l[f>>2]|0)==(A|0)?(l[f+4>>2]|0)==(a|0):0)&1,R=d,f|0)}function E1(A,a,u){A=A|0,a=a|0,u=u|0;var f=0;(a|0)>0?(f=Yr(a,4)|0,l[A>>2]=f,f||Me(23337,23360,40,23374)):l[A>>2]=0,l[A+4>>2]=a,l[A+8>>2]=0,l[A+12>>2]=u}function T1(A){A=A|0;var a=0,u=0,f=0,d=0,g=0,m=0,v=0;d=A+4|0,g=A+12|0,m=A+8|0;e:for(;;){for(u=l[d>>2]|0,a=0;;){if((a|0)>=(u|0))break e;if(f=l[A>>2]|0,v=l[f+(a<<2)>>2]|0,!v)a=a+1|0;else break}a=f+(~~(+We(+(+Ir(10,+ +(15-(l[g>>2]|0)|0))*(+O[v>>3]+ +O[v+8>>3])))%+(u|0))>>>0<<2)|0,u=l[a>>2]|0;t:do if(u|0){if(f=v+32|0,(u|0)==(v|0))l[a>>2]=l[f>>2];else{if(u=u+32|0,a=l[u>>2]|0,!a)break;for(;(a|0)!=(v|0);)if(u=a+32|0,a=l[u>>2]|0,!a)break t;l[u>>2]=l[f>>2]}Ne(v),l[m>>2]=(l[m>>2]|0)+-1}while(!1)}Ne(l[A>>2]|0)}function x1(A){A=A|0;var a=0,u=0,f=0;for(f=l[A+4>>2]|0,u=0;;){if((u|0)>=(f|0)){a=0,u=4;break}if(a=l[(l[A>>2]|0)+(u<<2)>>2]|0,!a)u=u+1|0;else{u=4;break}}return(u|0)==4?a|0:0}function S1(A,a){A=A|0,a=a|0;var u=0,f=0,d=0,g=0;if(u=~~(+We(+(+Ir(10,+ +(15-(l[A+12>>2]|0)|0))*(+O[a>>3]+ +O[a+8>>3])))%+(l[A+4>>2]|0))>>>0,u=(l[A>>2]|0)+(u<<2)|0,f=l[u>>2]|0,!f)return g=1,g|0;g=a+32|0;do if((f|0)!=(a|0)){if(u=l[f+32>>2]|0,!u)return g=1,g|0;for(d=u;;){if((d|0)==(a|0)){d=8;break}if(u=l[d+32>>2]|0,u)f=d,d=u;else{u=1,d=10;break}}if((d|0)==8){l[f+32>>2]=l[g>>2];break}else if((d|0)==10)return u|0}else l[u>>2]=l[g>>2];while(!1);return Ne(a),g=A+8|0,l[g>>2]=(l[g>>2]|0)+-1,g=0,g|0}function TS(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0,m=0;g=Qr(40)|0,g||Me(23390,23360,98,23403),l[g>>2]=l[a>>2],l[g+4>>2]=l[a+4>>2],l[g+8>>2]=l[a+8>>2],l[g+12>>2]=l[a+12>>2],d=g+16|0,l[d>>2]=l[u>>2],l[d+4>>2]=l[u+4>>2],l[d+8>>2]=l[u+8>>2],l[d+12>>2]=l[u+12>>2],l[g+32>>2]=0,d=~~(+We(+(+Ir(10,+ +(15-(l[A+12>>2]|0)|0))*(+O[a>>3]+ +O[a+8>>3])))%+(l[A+4>>2]|0))>>>0,d=(l[A>>2]|0)+(d<<2)|0,f=l[d>>2]|0;do if(!f)l[d>>2]=g;else{for(;!(Ro(f,a)|0&&Ro(f+16|0,u)|0);)if(d=l[f+32>>2]|0,f=d|0?d:f,!(l[f+32>>2]|0)){m=10;break}if((m|0)==10){l[f+32>>2]=g;break}return Ne(g),m=f,m|0}while(!1);return m=A+8|0,l[m>>2]=(l[m>>2]|0)+1,m=g,m|0}function xS(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0;if(d=~~(+We(+(+Ir(10,+ +(15-(l[A+12>>2]|0)|0))*(+O[a>>3]+ +O[a+8>>3])))%+(l[A+4>>2]|0))>>>0,d=l[(l[A>>2]|0)+(d<<2)>>2]|0,!d)return u=0,u|0;if(!u){for(A=d;;){if(Ro(A,a)|0){f=10;break}if(A=l[A+32>>2]|0,!A){A=0,f=10;break}}if((f|0)==10)return A|0}for(A=d;;){if(Ro(A,a)|0&&Ro(A+16|0,u)|0){f=10;break}if(A=l[A+32>>2]|0,!A){A=0,f=10;break}}return(f|0)==10?A|0:0}function SS(A,a){A=A|0,a=a|0;var u=0;if(u=~~(+We(+(+Ir(10,+ +(15-(l[A+12>>2]|0)|0))*(+O[a>>3]+ +O[a+8>>3])))%+(l[A+4>>2]|0))>>>0,A=l[(l[A>>2]|0)+(u<<2)>>2]|0,!A)return u=0,u|0;for(;;){if(Ro(A,a)|0){a=5;break}if(A=l[A+32>>2]|0,!A){A=0,a=5;break}}return(a|0)==5?A|0:0}function CS(){return 23424}function MS(A){return A=+A,+ +P1(+A)}function Yi(A){return A=+A,~~+MS(A)|0}function Qr(A){A=A|0;var a=0,u=0,f=0,d=0,g=0,m=0,v=0,b=0,E=0,M=0,D=0,j=0,W=0,V=0,$=0,re=0,ee=0,Z=0,K=0,Y=0,ve=0;ve=R,R=R+16|0,j=ve;do if(A>>>0<245){if(E=A>>>0<11?16:A+11&-8,A=E>>>3,D=l[5857]|0,u=D>>>A,u&3|0)return a=(u&1^1)+A|0,A=23468+(a<<1<<2)|0,u=A+8|0,f=l[u>>2]|0,d=f+8|0,g=l[d>>2]|0,(g|0)==(A|0)?l[5857]=D&~(1<<a):(l[g+12>>2]=A,l[u>>2]=g),Y=a<<3,l[f+4>>2]=Y|3,Y=f+Y+4|0,l[Y>>2]=l[Y>>2]|1,Y=d,R=ve,Y|0;if(M=l[5859]|0,E>>>0>M>>>0){if(u|0)return a=2<<A,a=u<<A&(a|0-a),a=(a&0-a)+-1|0,v=a>>>12&16,a=a>>>v,u=a>>>5&8,a=a>>>u,g=a>>>2&4,a=a>>>g,A=a>>>1&2,a=a>>>A,f=a>>>1&1,f=(u|v|g|A|f)+(a>>>f)|0,a=23468+(f<<1<<2)|0,A=a+8|0,g=l[A>>2]|0,v=g+8|0,u=l[v>>2]|0,(u|0)==(a|0)?(A=D&~(1<<f),l[5857]=A):(l[u+12>>2]=a,l[A>>2]=u,A=D),Y=f<<3,m=Y-E|0,l[g+4>>2]=E|3,d=g+E|0,l[d+4>>2]=m|1,l[g+Y>>2]=m,M|0&&(f=l[5862]|0,a=M>>>3,u=23468+(a<<1<<2)|0,a=1<<a,A&a?(A=u+8|0,a=l[A>>2]|0):(l[5857]=A|a,a=u,A=u+8|0),l[A>>2]=f,l[a+12>>2]=f,l[f+8>>2]=a,l[f+12>>2]=u),l[5859]=m,l[5862]=d,Y=v,R=ve,Y|0;if(g=l[5858]|0,g){for(u=(g&0-g)+-1|0,d=u>>>12&16,u=u>>>d,f=u>>>5&8,u=u>>>f,m=u>>>2&4,u=u>>>m,v=u>>>1&2,u=u>>>v,b=u>>>1&1,b=l[23732+((f|d|m|v|b)+(u>>>b)<<2)>>2]|0,u=b,v=b,b=(l[b+4>>2]&-8)-E|0;A=l[u+16>>2]|0,!(!A&&(A=l[u+20>>2]|0,!A));)m=(l[A+4>>2]&-8)-E|0,d=m>>>0<b>>>0,u=A,v=d?A:v,b=d?m:b;if(m=v+E|0,m>>>0>v>>>0){d=l[v+24>>2]|0,a=l[v+12>>2]|0;do if((a|0)==(v|0)){if(A=v+20|0,a=l[A>>2]|0,!a&&(A=v+16|0,a=l[A>>2]|0,!a)){u=0;break}for(;;)if(f=a+20|0,u=l[f>>2]|0,u)a=u,A=f;else if(f=a+16|0,u=l[f>>2]|0,u)a=u,A=f;else break;l[A>>2]=0,u=a}else u=l[v+8>>2]|0,l[u+12>>2]=a,l[a+8>>2]=u,u=a;while(!1);do if(d|0){if(a=l[v+28>>2]|0,A=23732+(a<<2)|0,(v|0)==(l[A>>2]|0)){if(l[A>>2]=u,!u){l[5858]=g&~(1<<a);break}}else if(Y=d+16|0,l[((l[Y>>2]|0)==(v|0)?Y:d+20|0)>>2]=u,!u)break;l[u+24>>2]=d,a=l[v+16>>2]|0,a|0&&(l[u+16>>2]=a,l[a+24>>2]=u),a=l[v+20>>2]|0,a|0&&(l[u+20>>2]=a,l[a+24>>2]=u)}while(!1);return b>>>0<16?(Y=b+E|0,l[v+4>>2]=Y|3,Y=v+Y+4|0,l[Y>>2]=l[Y>>2]|1):(l[v+4>>2]=E|3,l[m+4>>2]=b|1,l[m+b>>2]=b,M|0&&(f=l[5862]|0,a=M>>>3,u=23468+(a<<1<<2)|0,a=1<<a,a&D?(A=u+8|0,a=l[A>>2]|0):(l[5857]=a|D,a=u,A=u+8|0),l[A>>2]=f,l[a+12>>2]=f,l[f+8>>2]=a,l[f+12>>2]=u),l[5859]=b,l[5862]=m),Y=v+8|0,R=ve,Y|0}else D=E}else D=E}else D=E}else if(A>>>0<=4294967231)if(A=A+11|0,E=A&-8,f=l[5858]|0,f){d=0-E|0,A=A>>>8,A?E>>>0>16777215?b=31:(D=(A+1048320|0)>>>16&8,$=A<<D,v=($+520192|0)>>>16&4,$=$<<v,b=($+245760|0)>>>16&2,b=14-(v|D|b)+($<<b>>>15)|0,b=E>>>(b+7|0)&1|b<<1):b=0,u=l[23732+(b<<2)>>2]|0;e:do if(!u)u=0,A=0,$=61;else for(A=0,v=E<<((b|0)==31?0:25-(b>>>1)|0),g=0;;){if(m=(l[u+4>>2]&-8)-E|0,m>>>0<d>>>0)if(m)A=u,d=m;else{A=u,d=0,$=65;break e}if($=l[u+20>>2]|0,u=l[u+16+(v>>>31<<2)>>2]|0,g=($|0)==0|($|0)==(u|0)?g:$,u)v=v<<1;else{u=g,$=61;break}}while(!1);if(($|0)==61){if((u|0)==0&(A|0)==0){if(A=2<<b,A=(A|0-A)&f,!A){D=E;break}D=(A&0-A)+-1|0,m=D>>>12&16,D=D>>>m,g=D>>>5&8,D=D>>>g,v=D>>>2&4,D=D>>>v,b=D>>>1&2,D=D>>>b,u=D>>>1&1,A=0,u=l[23732+((g|m|v|b|u)+(D>>>u)<<2)>>2]|0}u?$=65:(v=A,m=d)}if(($|0)==65)for(g=u;;)if(D=(l[g+4>>2]&-8)-E|0,u=D>>>0<d>>>0,d=u?D:d,A=u?g:A,u=l[g+16>>2]|0,u||(u=l[g+20>>2]|0),u)g=u;else{v=A,m=d;break}if(v|0&&m>>>0<((l[5859]|0)-E|0)>>>0&&(M=v+E|0,M>>>0>v>>>0)){g=l[v+24>>2]|0,a=l[v+12>>2]|0;do if((a|0)==(v|0)){if(A=v+20|0,a=l[A>>2]|0,!a&&(A=v+16|0,a=l[A>>2]|0,!a)){a=0;break}for(;;)if(d=a+20|0,u=l[d>>2]|0,u)a=u,A=d;else if(d=a+16|0,u=l[d>>2]|0,u)a=u,A=d;else break;l[A>>2]=0}else Y=l[v+8>>2]|0,l[Y+12>>2]=a,l[a+8>>2]=Y;while(!1);do if(g){if(A=l[v+28>>2]|0,u=23732+(A<<2)|0,(v|0)==(l[u>>2]|0)){if(l[u>>2]=a,!a){f=f&~(1<<A),l[5858]=f;break}}else if(Y=g+16|0,l[((l[Y>>2]|0)==(v|0)?Y:g+20|0)>>2]=a,!a)break;l[a+24>>2]=g,A=l[v+16>>2]|0,A|0&&(l[a+16>>2]=A,l[A+24>>2]=a),A=l[v+20>>2]|0,A&&(l[a+20>>2]=A,l[A+24>>2]=a)}while(!1);e:do if(m>>>0<16)Y=m+E|0,l[v+4>>2]=Y|3,Y=v+Y+4|0,l[Y>>2]=l[Y>>2]|1;else{if(l[v+4>>2]=E|3,l[M+4>>2]=m|1,l[M+m>>2]=m,a=m>>>3,m>>>0<256){u=23468+(a<<1<<2)|0,A=l[5857]|0,a=1<<a,A&a?(A=u+8|0,a=l[A>>2]|0):(l[5857]=A|a,a=u,A=u+8|0),l[A>>2]=M,l[a+12>>2]=M,l[M+8>>2]=a,l[M+12>>2]=u;break}if(a=m>>>8,a?m>>>0>16777215?u=31:(K=(a+1048320|0)>>>16&8,Y=a<<K,Z=(Y+520192|0)>>>16&4,Y=Y<<Z,u=(Y+245760|0)>>>16&2,u=14-(Z|K|u)+(Y<<u>>>15)|0,u=m>>>(u+7|0)&1|u<<1):u=0,a=23732+(u<<2)|0,l[M+28>>2]=u,A=M+16|0,l[A+4>>2]=0,l[A>>2]=0,A=1<<u,!(f&A)){l[5858]=f|A,l[a>>2]=M,l[M+24>>2]=a,l[M+12>>2]=M,l[M+8>>2]=M;break}a=l[a>>2]|0;t:do if((l[a+4>>2]&-8|0)!=(m|0)){for(f=m<<((u|0)==31?0:25-(u>>>1)|0);u=a+16+(f>>>31<<2)|0,A=l[u>>2]|0,!!A;)if((l[A+4>>2]&-8|0)==(m|0)){a=A;break t}else f=f<<1,a=A;l[u>>2]=M,l[M+24>>2]=a,l[M+12>>2]=M,l[M+8>>2]=M;break e}while(!1);K=a+8|0,Y=l[K>>2]|0,l[Y+12>>2]=M,l[K>>2]=M,l[M+8>>2]=Y,l[M+12>>2]=a,l[M+24>>2]=0}while(!1);return Y=v+8|0,R=ve,Y|0}else D=E}else D=E;else D=-1;while(!1);if(u=l[5859]|0,u>>>0>=D>>>0)return a=u-D|0,A=l[5862]|0,a>>>0>15?(Y=A+D|0,l[5862]=Y,l[5859]=a,l[Y+4>>2]=a|1,l[A+u>>2]=a,l[A+4>>2]=D|3):(l[5859]=0,l[5862]=0,l[A+4>>2]=u|3,Y=A+u+4|0,l[Y>>2]=l[Y>>2]|1),Y=A+8|0,R=ve,Y|0;if(m=l[5860]|0,m>>>0>D>>>0)return Z=m-D|0,l[5860]=Z,Y=l[5863]|0,K=Y+D|0,l[5863]=K,l[K+4>>2]=Z|1,l[Y+4>>2]=D|3,Y=Y+8|0,R=ve,Y|0;if(l[5975]|0?A=l[5977]|0:(l[5977]=4096,l[5976]=4096,l[5978]=-1,l[5979]=-1,l[5980]=0,l[5968]=0,l[5975]=j&-16^1431655768,A=4096),v=D+48|0,b=D+47|0,g=A+b|0,d=0-A|0,E=g&d,E>>>0<=D>>>0||(A=l[5967]|0,A|0&&(M=l[5965]|0,j=M+E|0,j>>>0<=M>>>0|j>>>0>A>>>0)))return Y=0,R=ve,Y|0;e:do if(l[5968]&4)a=0,$=143;else{u=l[5863]|0;t:do if(u){for(f=23876;j=l[f>>2]|0,!(j>>>0<=u>>>0&&(j+(l[f+4>>2]|0)|0)>>>0>u>>>0);)if(A=l[f+8>>2]|0,A)f=A;else{$=128;break t}if(a=g-m&d,a>>>0<2147483647)if(A=$i(a|0)|0,(A|0)==((l[f>>2]|0)+(l[f+4>>2]|0)|0)){if((A|0)!=-1){m=a,g=A,$=145;break e}}else f=A,$=136;else a=0}else $=128;while(!1);do if(($|0)==128)if(u=$i(0)|0,(u|0)!=-1&&(a=u,W=l[5976]|0,V=W+-1|0,a=(V&a|0?(V+a&0-W)-a|0:0)+E|0,W=l[5965]|0,V=a+W|0,a>>>0>D>>>0&a>>>0<2147483647)){if(j=l[5967]|0,j|0&&V>>>0<=W>>>0|V>>>0>j>>>0){a=0;break}if(A=$i(a|0)|0,(A|0)==(u|0)){m=a,g=u,$=145;break e}else f=A,$=136}else a=0;while(!1);do if(($|0)==136){if(u=0-a|0,!(v>>>0>a>>>0&(a>>>0<2147483647&(f|0)!=-1)))if((f|0)==-1){a=0;break}else{m=a,g=f,$=145;break e}if(A=l[5977]|0,A=b-a+A&0-A,A>>>0>=2147483647){m=a,g=f,$=145;break e}if(($i(A|0)|0)==-1){$i(u|0)|0,a=0;break}else{m=A+a|0,g=f,$=145;break e}}while(!1);l[5968]=l[5968]|4,$=143}while(!1);if(($|0)==143&&E>>>0<2147483647&&(Z=$i(E|0)|0,V=$i(0)|0,re=V-Z|0,ee=re>>>0>(D+40|0)>>>0,!((Z|0)==-1|ee^1|Z>>>0<V>>>0&((Z|0)!=-1&(V|0)!=-1)^1))&&(m=ee?re:a,g=Z,$=145),($|0)==145){a=(l[5965]|0)+m|0,l[5965]=a,a>>>0>(l[5966]|0)>>>0&&(l[5966]=a),b=l[5863]|0;e:do if(b){for(a=23876;;){if(A=l[a>>2]|0,u=l[a+4>>2]|0,(g|0)==(A+u|0)){$=154;break}if(f=l[a+8>>2]|0,f)a=f;else break}if(($|0)==154&&(K=a+4|0,(l[a+12>>2]&8|0)==0)&&g>>>0>b>>>0&A>>>0<=b>>>0){l[K>>2]=u+m,Y=(l[5860]|0)+m|0,Z=b+8|0,Z=Z&7|0?0-Z&7:0,K=b+Z|0,Z=Y-Z|0,l[5863]=K,l[5860]=Z,l[K+4>>2]=Z|1,l[b+Y+4>>2]=40,l[5864]=l[5979];break}for(g>>>0<(l[5861]|0)>>>0&&(l[5861]=g),u=g+m|0,a=23876;;){if((l[a>>2]|0)==(u|0)){$=162;break}if(A=l[a+8>>2]|0,A)a=A;else break}if(($|0)==162&&!(l[a+12>>2]&8|0)){l[a>>2]=g,M=a+4|0,l[M>>2]=(l[M>>2]|0)+m,M=g+8|0,M=g+(M&7|0?0-M&7:0)|0,a=u+8|0,a=u+(a&7|0?0-a&7:0)|0,E=M+D|0,v=a-M-D|0,l[M+4>>2]=D|3;t:do if((b|0)==(a|0))Y=(l[5860]|0)+v|0,l[5860]=Y,l[5863]=E,l[E+4>>2]=Y|1;else{if((l[5862]|0)==(a|0)){Y=(l[5859]|0)+v|0,l[5859]=Y,l[5862]=E,l[E+4>>2]=Y|1,l[E+Y>>2]=Y;break}if(A=l[a+4>>2]|0,(A&3|0)==1){m=A&-8,f=A>>>3;n:do if(A>>>0<256)if(A=l[a+8>>2]|0,u=l[a+12>>2]|0,(u|0)==(A|0)){l[5857]=l[5857]&~(1<<f);break}else{l[A+12>>2]=u,l[u+8>>2]=A;break}else{g=l[a+24>>2]|0,A=l[a+12>>2]|0;do if((A|0)==(a|0)){if(u=a+16|0,f=u+4|0,A=l[f>>2]|0,A)u=f;else if(A=l[u>>2]|0,!A){A=0;break}for(;;)if(d=A+20|0,f=l[d>>2]|0,f)A=f,u=d;else if(d=A+16|0,f=l[d>>2]|0,f)A=f,u=d;else break;l[u>>2]=0}else Y=l[a+8>>2]|0,l[Y+12>>2]=A,l[A+8>>2]=Y;while(!1);if(!g)break;u=l[a+28>>2]|0,f=23732+(u<<2)|0;do if((l[f>>2]|0)!=(a|0)){if(Y=g+16|0,l[((l[Y>>2]|0)==(a|0)?Y:g+20|0)>>2]=A,!A)break n}else{if(l[f>>2]=A,A|0)break;l[5858]=l[5858]&~(1<<u);break n}while(!1);if(l[A+24>>2]=g,u=a+16|0,f=l[u>>2]|0,f|0&&(l[A+16>>2]=f,l[f+24>>2]=A),u=l[u+4>>2]|0,!u)break;l[A+20>>2]=u,l[u+24>>2]=A}while(!1);a=a+m|0,d=m+v|0}else d=v;if(a=a+4|0,l[a>>2]=l[a>>2]&-2,l[E+4>>2]=d|1,l[E+d>>2]=d,a=d>>>3,d>>>0<256){u=23468+(a<<1<<2)|0,A=l[5857]|0,a=1<<a,A&a?(A=u+8|0,a=l[A>>2]|0):(l[5857]=A|a,a=u,A=u+8|0),l[A>>2]=E,l[a+12>>2]=E,l[E+8>>2]=a,l[E+12>>2]=u;break}a=d>>>8;do if(!a)f=0;else{if(d>>>0>16777215){f=31;break}K=(a+1048320|0)>>>16&8,Y=a<<K,Z=(Y+520192|0)>>>16&4,Y=Y<<Z,f=(Y+245760|0)>>>16&2,f=14-(Z|K|f)+(Y<<f>>>15)|0,f=d>>>(f+7|0)&1|f<<1}while(!1);if(a=23732+(f<<2)|0,l[E+28>>2]=f,A=E+16|0,l[A+4>>2]=0,l[A>>2]=0,A=l[5858]|0,u=1<<f,!(A&u)){l[5858]=A|u,l[a>>2]=E,l[E+24>>2]=a,l[E+12>>2]=E,l[E+8>>2]=E;break}a=l[a>>2]|0;n:do if((l[a+4>>2]&-8|0)!=(d|0)){for(f=d<<((f|0)==31?0:25-(f>>>1)|0);u=a+16+(f>>>31<<2)|0,A=l[u>>2]|0,!!A;)if((l[A+4>>2]&-8|0)==(d|0)){a=A;break n}else f=f<<1,a=A;l[u>>2]=E,l[E+24>>2]=a,l[E+12>>2]=E,l[E+8>>2]=E;break t}while(!1);K=a+8|0,Y=l[K>>2]|0,l[Y+12>>2]=E,l[K>>2]=E,l[E+8>>2]=Y,l[E+12>>2]=a,l[E+24>>2]=0}while(!1);return Y=M+8|0,R=ve,Y|0}for(a=23876;A=l[a>>2]|0,!(A>>>0<=b>>>0&&(Y=A+(l[a+4>>2]|0)|0,Y>>>0>b>>>0));)a=l[a+8>>2]|0;d=Y+-47|0,A=d+8|0,A=d+(A&7|0?0-A&7:0)|0,d=b+16|0,A=A>>>0<d>>>0?b:A,a=A+8|0,u=m+-40|0,Z=g+8|0,Z=Z&7|0?0-Z&7:0,K=g+Z|0,Z=u-Z|0,l[5863]=K,l[5860]=Z,l[K+4>>2]=Z|1,l[g+u+4>>2]=40,l[5864]=l[5979],u=A+4|0,l[u>>2]=27,l[a>>2]=l[5969],l[a+4>>2]=l[5970],l[a+8>>2]=l[5971],l[a+12>>2]=l[5972],l[5969]=g,l[5970]=m,l[5972]=0,l[5971]=a,a=A+24|0;do K=a,a=a+4|0,l[a>>2]=7;while((K+8|0)>>>0<Y>>>0);if((A|0)!=(b|0)){if(g=A-b|0,l[u>>2]=l[u>>2]&-2,l[b+4>>2]=g|1,l[A>>2]=g,a=g>>>3,g>>>0<256){u=23468+(a<<1<<2)|0,A=l[5857]|0,a=1<<a,A&a?(A=u+8|0,a=l[A>>2]|0):(l[5857]=A|a,a=u,A=u+8|0),l[A>>2]=b,l[a+12>>2]=b,l[b+8>>2]=a,l[b+12>>2]=u;break}if(a=g>>>8,a?g>>>0>16777215?f=31:(K=(a+1048320|0)>>>16&8,Y=a<<K,Z=(Y+520192|0)>>>16&4,Y=Y<<Z,f=(Y+245760|0)>>>16&2,f=14-(Z|K|f)+(Y<<f>>>15)|0,f=g>>>(f+7|0)&1|f<<1):f=0,u=23732+(f<<2)|0,l[b+28>>2]=f,l[b+20>>2]=0,l[d>>2]=0,a=l[5858]|0,A=1<<f,!(a&A)){l[5858]=a|A,l[u>>2]=b,l[b+24>>2]=u,l[b+12>>2]=b,l[b+8>>2]=b;break}a=l[u>>2]|0;t:do if((l[a+4>>2]&-8|0)!=(g|0)){for(f=g<<((f|0)==31?0:25-(f>>>1)|0);u=a+16+(f>>>31<<2)|0,A=l[u>>2]|0,!!A;)if((l[A+4>>2]&-8|0)==(g|0)){a=A;break t}else f=f<<1,a=A;l[u>>2]=b,l[b+24>>2]=a,l[b+12>>2]=b,l[b+8>>2]=b;break e}while(!1);K=a+8|0,Y=l[K>>2]|0,l[Y+12>>2]=b,l[K>>2]=b,l[b+8>>2]=Y,l[b+12>>2]=a,l[b+24>>2]=0}}else Y=l[5861]|0,(Y|0)==0|g>>>0<Y>>>0&&(l[5861]=g),l[5969]=g,l[5970]=m,l[5972]=0,l[5866]=l[5975],l[5865]=-1,l[5870]=23468,l[5869]=23468,l[5872]=23476,l[5871]=23476,l[5874]=23484,l[5873]=23484,l[5876]=23492,l[5875]=23492,l[5878]=23500,l[5877]=23500,l[5880]=23508,l[5879]=23508,l[5882]=23516,l[5881]=23516,l[5884]=23524,l[5883]=23524,l[5886]=23532,l[5885]=23532,l[5888]=23540,l[5887]=23540,l[5890]=23548,l[5889]=23548,l[5892]=23556,l[5891]=23556,l[5894]=23564,l[5893]=23564,l[5896]=23572,l[5895]=23572,l[5898]=23580,l[5897]=23580,l[5900]=23588,l[5899]=23588,l[5902]=23596,l[5901]=23596,l[5904]=23604,l[5903]=23604,l[5906]=23612,l[5905]=23612,l[5908]=23620,l[5907]=23620,l[5910]=23628,l[5909]=23628,l[5912]=23636,l[5911]=23636,l[5914]=23644,l[5913]=23644,l[5916]=23652,l[5915]=23652,l[5918]=23660,l[5917]=23660,l[5920]=23668,l[5919]=23668,l[5922]=23676,l[5921]=23676,l[5924]=23684,l[5923]=23684,l[5926]=23692,l[5925]=23692,l[5928]=23700,l[5927]=23700,l[5930]=23708,l[5929]=23708,l[5932]=23716,l[5931]=23716,Y=m+-40|0,Z=g+8|0,Z=Z&7|0?0-Z&7:0,K=g+Z|0,Z=Y-Z|0,l[5863]=K,l[5860]=Z,l[K+4>>2]=Z|1,l[g+Y+4>>2]=40,l[5864]=l[5979];while(!1);if(a=l[5860]|0,a>>>0>D>>>0)return Z=a-D|0,l[5860]=Z,Y=l[5863]|0,K=Y+D|0,l[5863]=K,l[K+4>>2]=Z|1,l[Y+4>>2]=D|3,Y=Y+8|0,R=ve,Y|0}return Y=CS()|0,l[Y>>2]=12,Y=0,R=ve,Y|0}function Ne(A){A=A|0;var a=0,u=0,f=0,d=0,g=0,m=0,v=0,b=0;if(A){u=A+-8|0,d=l[5861]|0,A=l[A+-4>>2]|0,a=A&-8,b=u+a|0;do if(A&1)v=u,m=u;else{if(f=l[u>>2]|0,!(A&3)||(m=u+(0-f)|0,g=f+a|0,m>>>0<d>>>0))return;if((l[5862]|0)==(m|0)){if(A=b+4|0,a=l[A>>2]|0,(a&3|0)!=3){v=m,a=g;break}l[5859]=g,l[A>>2]=a&-2,l[m+4>>2]=g|1,l[m+g>>2]=g;return}if(u=f>>>3,f>>>0<256)if(A=l[m+8>>2]|0,a=l[m+12>>2]|0,(a|0)==(A|0)){l[5857]=l[5857]&~(1<<u),v=m,a=g;break}else{l[A+12>>2]=a,l[a+8>>2]=A,v=m,a=g;break}d=l[m+24>>2]|0,A=l[m+12>>2]|0;do if((A|0)==(m|0)){if(a=m+16|0,u=a+4|0,A=l[u>>2]|0,A)a=u;else if(A=l[a>>2]|0,!A){A=0;break}for(;;)if(f=A+20|0,u=l[f>>2]|0,u)A=u,a=f;else if(f=A+16|0,u=l[f>>2]|0,u)A=u,a=f;else break;l[a>>2]=0}else v=l[m+8>>2]|0,l[v+12>>2]=A,l[A+8>>2]=v;while(!1);if(d){if(a=l[m+28>>2]|0,u=23732+(a<<2)|0,(l[u>>2]|0)==(m|0)){if(l[u>>2]=A,!A){l[5858]=l[5858]&~(1<<a),v=m,a=g;break}}else if(v=d+16|0,l[((l[v>>2]|0)==(m|0)?v:d+20|0)>>2]=A,!A){v=m,a=g;break}l[A+24>>2]=d,a=m+16|0,u=l[a>>2]|0,u|0&&(l[A+16>>2]=u,l[u+24>>2]=A),a=l[a+4>>2]|0,a?(l[A+20>>2]=a,l[a+24>>2]=A,v=m,a=g):(v=m,a=g)}else v=m,a=g}while(!1);if(!(m>>>0>=b>>>0)&&(A=b+4|0,f=l[A>>2]|0,!!(f&1))){if(f&2)l[A>>2]=f&-2,l[v+4>>2]=a|1,l[m+a>>2]=a,d=a;else{if((l[5863]|0)==(b|0)){if(b=(l[5860]|0)+a|0,l[5860]=b,l[5863]=v,l[v+4>>2]=b|1,(v|0)!=(l[5862]|0))return;l[5862]=0,l[5859]=0;return}if((l[5862]|0)==(b|0)){b=(l[5859]|0)+a|0,l[5859]=b,l[5862]=m,l[v+4>>2]=b|1,l[m+b>>2]=b;return}d=(f&-8)+a|0,u=f>>>3;do if(f>>>0<256)if(a=l[b+8>>2]|0,A=l[b+12>>2]|0,(A|0)==(a|0)){l[5857]=l[5857]&~(1<<u);break}else{l[a+12>>2]=A,l[A+8>>2]=a;break}else{g=l[b+24>>2]|0,A=l[b+12>>2]|0;do if((A|0)==(b|0)){if(a=b+16|0,u=a+4|0,A=l[u>>2]|0,A)a=u;else if(A=l[a>>2]|0,!A){u=0;break}for(;;)if(f=A+20|0,u=l[f>>2]|0,u)A=u,a=f;else if(f=A+16|0,u=l[f>>2]|0,u)A=u,a=f;else break;l[a>>2]=0,u=A}else u=l[b+8>>2]|0,l[u+12>>2]=A,l[A+8>>2]=u,u=A;while(!1);if(g|0){if(A=l[b+28>>2]|0,a=23732+(A<<2)|0,(l[a>>2]|0)==(b|0)){if(l[a>>2]=u,!u){l[5858]=l[5858]&~(1<<A);break}}else if(f=g+16|0,l[((l[f>>2]|0)==(b|0)?f:g+20|0)>>2]=u,!u)break;l[u+24>>2]=g,A=b+16|0,a=l[A>>2]|0,a|0&&(l[u+16>>2]=a,l[a+24>>2]=u),A=l[A+4>>2]|0,A|0&&(l[u+20>>2]=A,l[A+24>>2]=u)}}while(!1);if(l[v+4>>2]=d|1,l[m+d>>2]=d,(v|0)==(l[5862]|0)){l[5859]=d;return}}if(A=d>>>3,d>>>0<256){u=23468+(A<<1<<2)|0,a=l[5857]|0,A=1<<A,a&A?(a=u+8|0,A=l[a>>2]|0):(l[5857]=a|A,A=u,a=u+8|0),l[a>>2]=v,l[A+12>>2]=v,l[v+8>>2]=A,l[v+12>>2]=u;return}A=d>>>8,A?d>>>0>16777215?f=31:(m=(A+1048320|0)>>>16&8,b=A<<m,g=(b+520192|0)>>>16&4,b=b<<g,f=(b+245760|0)>>>16&2,f=14-(g|m|f)+(b<<f>>>15)|0,f=d>>>(f+7|0)&1|f<<1):f=0,A=23732+(f<<2)|0,l[v+28>>2]=f,l[v+20>>2]=0,l[v+16>>2]=0,a=l[5858]|0,u=1<<f;e:do if(!(a&u))l[5858]=a|u,l[A>>2]=v,l[v+24>>2]=A,l[v+12>>2]=v,l[v+8>>2]=v;else{A=l[A>>2]|0;t:do if((l[A+4>>2]&-8|0)!=(d|0)){for(f=d<<((f|0)==31?0:25-(f>>>1)|0);u=A+16+(f>>>31<<2)|0,a=l[u>>2]|0,!!a;)if((l[a+4>>2]&-8|0)==(d|0)){A=a;break t}else f=f<<1,A=a;l[u>>2]=v,l[v+24>>2]=A,l[v+12>>2]=v,l[v+8>>2]=v;break e}while(!1);m=A+8|0,b=l[m>>2]|0,l[b+12>>2]=v,l[m>>2]=v,l[v+8>>2]=b,l[v+12>>2]=A,l[v+24>>2]=0}while(!1);if(b=(l[5865]|0)+-1|0,l[5865]=b,!(b|0)){for(A=23884;A=l[A>>2]|0,A;)A=A+8|0;l[5865]=-1}}}}function Yr(A,a){A=A|0,a=a|0;var u=0;return A?(u=Pn(a,A)|0,(a|A)>>>0>65535&&(u=((u>>>0)/(A>>>0)|0|0)==(a|0)?u:-1)):u=0,A=Qr(u)|0,!A||!(l[A+-4>>2]&3)||Fs(A|0,0,u|0)|0,A|0}function Ze(A,a,u,f){return A=A|0,a=a|0,u=u|0,f=f|0,u=A+u>>>0,Re(a+f+(u>>>0<A>>>0|0)>>>0|0),u|0|0}function vn(A,a,u,f){return A=A|0,a=a|0,u=u|0,f=f|0,f=a-f-(u>>>0>A>>>0|0)>>>0,Re(f|0),A-u>>>0|0|0}function C1(A){return A=A|0,(A?31-(pn(A^A-1)|0)|0:32)|0}function F0(A,a,u,f,d){A=A|0,a=a|0,u=u|0,f=f|0,d=d|0;var g=0,m=0,v=0,b=0,E=0,M=0,D=0,j=0,W=0,V=0;if(M=A,b=a,E=b,m=u,j=f,v=j,!E)return g=(d|0)!=0,v?g?(l[d>>2]=A|0,l[d+4>>2]=a&0,j=0,d=0,Re(j|0),d|0):(j=0,d=0,Re(j|0),d|0):(g&&(l[d>>2]=(M>>>0)%(m>>>0),l[d+4>>2]=0),j=0,d=(M>>>0)/(m>>>0)>>>0,Re(j|0),d|0);g=(v|0)==0;do if(m){if(!g){if(g=(pn(v|0)|0)-(pn(E|0)|0)|0,g>>>0<=31){D=g+1|0,v=31-g|0,a=g-31>>31,m=D,A=M>>>(D>>>0)&a|E<<v,a=E>>>(D>>>0)&a,g=0,v=M<<v;break}return d?(l[d>>2]=A|0,l[d+4>>2]=b|a&0,j=0,d=0,Re(j|0),d|0):(j=0,d=0,Re(j|0),d|0)}if(g=m-1|0,g&m|0){v=(pn(m|0)|0)+33-(pn(E|0)|0)|0,V=64-v|0,D=32-v|0,b=D>>31,W=v-32|0,a=W>>31,m=v,A=D-1>>31&E>>>(W>>>0)|(E<<D|M>>>(v>>>0))&a,a=a&E>>>(v>>>0),g=M<<V&b,v=(E<<V|M>>>(W>>>0))&b|M<<D&v-33>>31;break}return d|0&&(l[d>>2]=g&M,l[d+4>>2]=0),(m|0)==1?(W=b|a&0,V=A|0|0,Re(W|0),V|0):(V=C1(m|0)|0,W=E>>>(V>>>0)|0,V=E<<32-V|M>>>(V>>>0)|0,Re(W|0),V|0)}else{if(g)return d|0&&(l[d>>2]=(E>>>0)%(m>>>0),l[d+4>>2]=0),W=0,V=(E>>>0)/(m>>>0)>>>0,Re(W|0),V|0;if(!M)return d|0&&(l[d>>2]=0,l[d+4>>2]=(E>>>0)%(v>>>0)),W=0,V=(E>>>0)/(v>>>0)>>>0,Re(W|0),V|0;if(g=v-1|0,!(g&v))return d|0&&(l[d>>2]=A|0,l[d+4>>2]=g&E|a&0),W=0,V=E>>>((C1(v|0)|0)>>>0),Re(W|0),V|0;if(g=(pn(v|0)|0)-(pn(E|0)|0)|0,g>>>0<=30){a=g+1|0,v=31-g|0,m=a,A=E<<v|M>>>(a>>>0),a=E>>>(a>>>0),g=0,v=M<<v;break}return d?(l[d>>2]=A|0,l[d+4>>2]=b|a&0,W=0,V=0,Re(W|0),V|0):(W=0,V=0,Re(W|0),V|0)}while(!1);if(!m)E=v,b=0,v=0;else{D=u|0|0,M=j|f&0,E=Ze(D|0,M|0,-1,-1)|0,u=N()|0,b=v,v=0;do f=b,b=g>>>31|b<<1,g=v|g<<1,f=A<<1|f>>>31|0,j=A>>>31|a<<1|0,vn(E|0,u|0,f|0,j|0)|0,V=N()|0,W=V>>31|((V|0)<0?-1:0)<<1,v=W&1,A=vn(f|0,j|0,W&D|0,(((V|0)<0?-1:0)>>31|((V|0)<0?-1:0)<<1)&M|0)|0,a=N()|0,m=m-1|0;while(m|0);E=b,b=0}return m=0,d|0&&(l[d>>2]=A,l[d+4>>2]=a),W=(g|0)>>>31|(E|m)<<1|(m<<1|g>>>31)&0|b,V=(g<<1|0)&-2|v,Re(W|0),V|0}function Ds(A,a,u,f){A=A|0,a=a|0,u=u|0,f=f|0;var d=0,g=0,m=0,v=0,b=0,E=0;return E=a>>31|((a|0)<0?-1:0)<<1,b=((a|0)<0?-1:0)>>31|((a|0)<0?-1:0)<<1,g=f>>31|((f|0)<0?-1:0)<<1,d=((f|0)<0?-1:0)>>31|((f|0)<0?-1:0)<<1,v=vn(E^A|0,b^a|0,E|0,b|0)|0,m=N()|0,A=g^E,a=d^b,vn((F0(v,m,vn(g^u|0,d^f|0,g|0,d|0)|0,N()|0,0)|0)^A|0,(N()|0)^a|0,A|0,a|0)|0}function LS(A,a){A=A|0,a=a|0;var u=0,f=0,d=0,g=0;return g=A&65535,d=a&65535,u=Pn(d,g)|0,f=A>>>16,A=(u>>>16)+(Pn(d,f)|0)|0,d=a>>>16,a=Pn(d,g)|0,Re((A>>>16)+(Pn(d,f)|0)+(((A&65535)+a|0)>>>16)|0),A+a<<16|u&65535|0|0}function yn(A,a,u,f){A=A|0,a=a|0,u=u|0,f=f|0;var d=0,g=0;return d=A,g=u,u=LS(d,g)|0,A=N()|0,Re((Pn(a,g)|0)+(Pn(f,d)|0)+A|A&0|0),u|0|0|0}function Pu(A,a,u,f){A=A|0,a=a|0,u=u|0,f=f|0;var d=0,g=0,m=0,v=0,b=0,E=0;return d=R,R=R+16|0,v=d|0,m=a>>31|((a|0)<0?-1:0)<<1,g=((a|0)<0?-1:0)>>31|((a|0)<0?-1:0)<<1,E=f>>31|((f|0)<0?-1:0)<<1,b=((f|0)<0?-1:0)>>31|((f|0)<0?-1:0)<<1,A=vn(m^A|0,g^a|0,m|0,g|0)|0,a=N()|0,F0(A,a,vn(E^u|0,b^f|0,E|0,b|0)|0,N()|0,v)|0,f=vn(l[v>>2]^m|0,l[v+4>>2]^g|0,m|0,g|0)|0,u=N()|0,R=d,Re(u|0),f|0}function Oo(A,a,u,f){A=A|0,a=a|0,u=u|0,f=f|0;var d=0,g=0;return g=R,R=R+16|0,d=g|0,F0(A,a,u,f,d)|0,R=g,Re(l[d+4>>2]|0),l[d>>2]|0|0}function M1(A,a,u){return A=A|0,a=a|0,u=u|0,(u|0)<32?(Re(a>>u|0),A>>>u|(a&(1<<u)-1)<<32-u):(Re(((a|0)<0?-1:0)|0),a>>u-32|0)}function ae(A,a,u){return A=A|0,a=a|0,u=u|0,(u|0)<32?(Re(a>>>u|0),A>>>u|(a&(1<<u)-1)<<32-u):(Re(0),a>>>u-32|0)}function ge(A,a,u){return A=A|0,a=a|0,u=u|0,(u|0)<32?(Re(a<<u|(A&(1<<u)-1<<32-u)>>>32-u|0),A<<u):(Re(A<<u-32|0),0)}function L1(A,a){return A=+A,a=+a,A!=A?+a:a!=a?+A:+Hi(+A,+a)}function B0(A,a){return A=+A,a=+a,A!=A?+a:a!=a?+A:+gn(+A,+a)}function ku(A){return A=+A,A>=0?+Vt(A+.5):+Gi(A-.5)}function Iu(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0;if((u|0)>=8192)return Eu(A|0,a|0,u|0)|0,A|0;if(g=A|0,d=A+u|0,(A&3)==(a&3)){for(;A&3;){if(!u)return g|0;Oe[A>>0]=Oe[a>>0]|0,A=A+1|0,a=a+1|0,u=u-1|0}for(u=d&-4|0,f=u-64|0;(A|0)<=(f|0);)l[A>>2]=l[a>>2],l[A+4>>2]=l[a+4>>2],l[A+8>>2]=l[a+8>>2],l[A+12>>2]=l[a+12>>2],l[A+16>>2]=l[a+16>>2],l[A+20>>2]=l[a+20>>2],l[A+24>>2]=l[a+24>>2],l[A+28>>2]=l[a+28>>2],l[A+32>>2]=l[a+32>>2],l[A+36>>2]=l[a+36>>2],l[A+40>>2]=l[a+40>>2],l[A+44>>2]=l[a+44>>2],l[A+48>>2]=l[a+48>>2],l[A+52>>2]=l[a+52>>2],l[A+56>>2]=l[a+56>>2],l[A+60>>2]=l[a+60>>2],A=A+64|0,a=a+64|0;for(;(A|0)<(u|0);)l[A>>2]=l[a>>2],A=A+4|0,a=a+4|0}else for(u=d-4|0;(A|0)<(u|0);)Oe[A>>0]=Oe[a>>0]|0,Oe[A+1>>0]=Oe[a+1>>0]|0,Oe[A+2>>0]=Oe[a+2>>0]|0,Oe[A+3>>0]=Oe[a+3>>0]|0,A=A+4|0,a=a+4|0;for(;(A|0)<(d|0);)Oe[A>>0]=Oe[a>>0]|0,A=A+1|0,a=a+1|0;return g|0}function Fs(A,a,u){A=A|0,a=a|0,u=u|0;var f=0,d=0,g=0,m=0;if(g=A+u|0,a=a&255,(u|0)>=67){for(;A&3;)Oe[A>>0]=a,A=A+1|0;for(f=g&-4|0,m=a|a<<8|a<<16|a<<24,d=f-64|0;(A|0)<=(d|0);)l[A>>2]=m,l[A+4>>2]=m,l[A+8>>2]=m,l[A+12>>2]=m,l[A+16>>2]=m,l[A+20>>2]=m,l[A+24>>2]=m,l[A+28>>2]=m,l[A+32>>2]=m,l[A+36>>2]=m,l[A+40>>2]=m,l[A+44>>2]=m,l[A+48>>2]=m,l[A+52>>2]=m,l[A+56>>2]=m,l[A+60>>2]=m,A=A+64|0;for(;(A|0)<(f|0);)l[A>>2]=m,A=A+4|0}for(;(A|0)<(g|0);)Oe[A>>0]=a,A=A+1|0;return g-u|0}function P1(A){return A=+A,A>=0?+Vt(A+.5):+Gi(A-.5)}function $i(A){A=A|0;var a=0,u=0,f=0;return f=bu()|0,u=l[ot>>2]|0,a=u+A|0,(A|0)>0&(a|0)<(u|0)|(a|0)<0?(Kn(a|0)|0,hr(12),-1):(a|0)>(f|0)&&!(Mo(a|0)|0)?(hr(12),-1):(l[ot>>2]=a,u|0)}return{___divdi3:Ds,___muldi3:yn,___remdi3:Pu,___uremdi3:Oo,_areNeighborCells:gx,_bitshift64Ashr:M1,_bitshift64Lshr:ae,_bitshift64Shl:ge,_calloc:Yr,_cellAreaKm2:Xx,_cellAreaM2:Zx,_cellAreaRads2:D0,_cellToBoundary:bA,_cellToCenterChild:Px,_cellToChildPos:Ux,_cellToChildren:Mx,_cellToChildrenSize:Lu,_cellToLatLng:wA,_cellToLocalIj:rS,_cellToParent:L0,_cellToVertex:mr,_cellToVertexes:wS,_cellsToDirectedEdge:px,_cellsToLinkedMultiPolygon:Ee,_childPosToCell:zx,_compactCells:kx,_destroyLinkedMultiPolygon:p1,_directedEdgeToBoundary:Mu,_directedEdgeToCells:_x,_edgeLengthKm:qx,_edgeLengthM:Jx,_edgeLengthRads:Kx,_emscripten_replace_memory:dA,_free:Ne,_getBaseCellNumber:u1,_getDirectedEdgeDestination:vx,_getDirectedEdgeOrigin:mx,_getHexagonAreaAvgKm2:Wx,_getHexagonAreaAvgM2:Qx,_getHexagonEdgeLengthAvgKm:Yx,_getHexagonEdgeLengthAvgM:$x,_getIcosahedronFaces:f1,_getNumCells:O0,_getPentagons:R0,_getRes0Cells:sx,_getResolution:Cx,_greatCircleDistanceKm:TA,_greatCircleDistanceM:jx,_greatCircleDistanceRads:Vx,_gridDisk:Tu,_gridDiskDistances:vA,_gridDistance:sS,_gridPathCells:aS,_gridPathCellsSize:oS,_gridRingUnsafe:I,_i64Add:Ze,_i64Subtract:vn,_isPentagon:yt,_isResClassIII:Ox,_isValidCell:M0,_isValidDirectedEdge:yx,_isValidVertex:ES,_latLngToCell:c1,_llvm_maxnum_f64:L1,_llvm_minnum_f64:B0,_llvm_round_f64:ku,_localIjToCell:iS,_malloc:Qr,_maxFaceCount:Bx,_maxGridDiskSize:Wr,_maxPolygonToCellsSize:F,_memcpy:Iu,_memset:Fs,_originToDirectedEdges:wx,_pentagonCount:Nx,_polygonToCells:J,_readInt64AsDoubleFromPointer:mS,_res0CellCount:ix,_round:P1,_sbrk:$i,_sizeOfCellBoundary:fS,_sizeOfCoordIJ:pS,_sizeOfGeoLoop:hS,_sizeOfGeoPolygon:dS,_sizeOfH3Index:uS,_sizeOfLatLng:cS,_sizeOfLinkedGeoPolygon:gS,_uncompactCells:Ix,_uncompactCellsSize:Rx,_vertexToLatLng:bS,establishStackSpace:Lo,stackAlloc:gA,stackRestore:mA,stackSave:pA}}(_0,xo,ne);e.___divdi3=le.___divdi3,e.___muldi3=le.___muldi3,e.___remdi3=le.___remdi3,e.___uremdi3=le.___uremdi3,e._areNeighborCells=le._areNeighborCells,e._bitshift64Ashr=le._bitshift64Ashr,e._bitshift64Lshr=le._bitshift64Lshr,e._bitshift64Shl=le._bitshift64Shl,e._calloc=le._calloc,e._cellAreaKm2=le._cellAreaKm2,e._cellAreaM2=le._cellAreaM2,e._cellAreaRads2=le._cellAreaRads2,e._cellToBoundary=le._cellToBoundary,e._cellToCenterChild=le._cellToCenterChild,e._cellToChildPos=le._cellToChildPos,e._cellToChildren=le._cellToChildren,e._cellToChildrenSize=le._cellToChildrenSize,e._cellToLatLng=le._cellToLatLng,e._cellToLocalIj=le._cellToLocalIj,e._cellToParent=le._cellToParent,e._cellToVertex=le._cellToVertex,e._cellToVertexes=le._cellToVertexes,e._cellsToDirectedEdge=le._cellsToDirectedEdge,e._cellsToLinkedMultiPolygon=le._cellsToLinkedMultiPolygon,e._childPosToCell=le._childPosToCell,e._compactCells=le._compactCells,e._destroyLinkedMultiPolygon=le._destroyLinkedMultiPolygon,e._directedEdgeToBoundary=le._directedEdgeToBoundary,e._directedEdgeToCells=le._directedEdgeToCells,e._edgeLengthKm=le._edgeLengthKm,e._edgeLengthM=le._edgeLengthM,e._edgeLengthRads=le._edgeLengthRads;var w0=e._emscripten_replace_memory=le._emscripten_replace_memory;e._free=le._free,e._getBaseCellNumber=le._getBaseCellNumber,e._getDirectedEdgeDestination=le._getDirectedEdgeDestination,e._getDirectedEdgeOrigin=le._getDirectedEdgeOrigin,e._getHexagonAreaAvgKm2=le._getHexagonAreaAvgKm2,e._getHexagonAreaAvgM2=le._getHexagonAreaAvgM2,e._getHexagonEdgeLengthAvgKm=le._getHexagonEdgeLengthAvgKm,e._getHexagonEdgeLengthAvgM=le._getHexagonEdgeLengthAvgM,e._getIcosahedronFaces=le._getIcosahedronFaces,e._getNumCells=le._getNumCells,e._getPentagons=le._getPentagons,e._getRes0Cells=le._getRes0Cells,e._getResolution=le._getResolution,e._greatCircleDistanceKm=le._greatCircleDistanceKm,e._greatCircleDistanceM=le._greatCircleDistanceM,e._greatCircleDistanceRads=le._greatCircleDistanceRads,e._gridDisk=le._gridDisk,e._gridDiskDistances=le._gridDiskDistances,e._gridDistance=le._gridDistance,e._gridPathCells=le._gridPathCells,e._gridPathCellsSize=le._gridPathCellsSize,e._gridRingUnsafe=le._gridRingUnsafe,e._i64Add=le._i64Add,e._i64Subtract=le._i64Subtract,e._isPentagon=le._isPentagon,e._isResClassIII=le._isResClassIII,e._isValidCell=le._isValidCell,e._isValidDirectedEdge=le._isValidDirectedEdge,e._isValidVertex=le._isValidVertex,e._latLngToCell=le._latLngToCell,e._llvm_maxnum_f64=le._llvm_maxnum_f64,e._llvm_minnum_f64=le._llvm_minnum_f64,e._llvm_round_f64=le._llvm_round_f64,e._localIjToCell=le._localIjToCell,e._malloc=le._malloc,e._maxFaceCount=le._maxFaceCount,e._maxGridDiskSize=le._maxGridDiskSize,e._maxPolygonToCellsSize=le._maxPolygonToCellsSize,e._memcpy=le._memcpy,e._memset=le._memset,e._originToDirectedEdges=le._originToDirectedEdges,e._pentagonCount=le._pentagonCount,e._polygonToCells=le._polygonToCells,e._readInt64AsDoubleFromPointer=le._readInt64AsDoubleFromPointer,e._res0CellCount=le._res0CellCount,e._round=le._round,e._sbrk=le._sbrk,e._sizeOfCellBoundary=le._sizeOfCellBoundary,e._sizeOfCoordIJ=le._sizeOfCoordIJ,e._sizeOfGeoLoop=le._sizeOfGeoLoop,e._sizeOfGeoPolygon=le._sizeOfGeoPolygon,e._sizeOfH3Index=le._sizeOfH3Index,e._sizeOfLatLng=le._sizeOfLatLng,e._sizeOfLinkedGeoPolygon=le._sizeOfLinkedGeoPolygon,e._uncompactCells=le._uncompactCells,e._uncompactCellsSize=le._uncompactCellsSize,e._vertexToLatLng=le._vertexToLatLng,e.establishStackSpace=le.establishStackSpace;var lA=e.stackAlloc=le.stackAlloc,yu=e.stackRestore=le.stackRestore,uA=e.stackSave=le.stackSave;if(e.asm=le,e.cwrap=P,e.setValue=T,e.getValue=S,Ot){gu(Ot)||(Ot=s(Ot));{du();var cA=function(q){q.byteLength&&(q=new Uint8Array(q)),ce.set(q,w),e.memoryInitializerRequest&&delete e.memoryInitializerRequest.response,Eo()},_u=function(){o(Ot,cA,function(){throw"could not load memory initializer "+Ot})},wu=AA(Ot);if(wu)cA(wu.buffer);else if(e.memoryInitializerRequest){var fA=function(){var q=e.memoryInitializerRequest,se=q.response;if(q.status!==200&&q.status!==0){var _e=AA(e.memoryInitializerRequestURL);if(_e)se=_e.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+q.status+", retrying "+Ot),_u();return}}cA(se)};e.memoryInitializerRequest.response?setTimeout(fA,0):e.memoryInitializerRequest.addEventListener("load",fA)}else _u()}}var So;kr=function q(){So||hA(),So||(kr=q)};function hA(q){if(Mt>0||(xt(),Mt>0))return;function se(){So||(So=!0,!k&&(Pr(),de(),e.onRuntimeInitialized&&e.onRuntimeInitialized(),Ie()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),se()},1)):se()}e.run=hA;function ji(q){throw e.onAbort&&e.onAbort(q),q+="",c(q),h(q),k=!0,"abort("+q+"). Build with -s ASSERTIONS=1 for more info."}if(e.abort=ji,e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return hA(),t}(typeof Qn=="object"?Qn:{}),$e="number",Fe=$e,YA=$e,Ve=$e,je=$e,En=$e,Ce=$e,Az=[["sizeOfH3Index",$e],["sizeOfLatLng",$e],["sizeOfCellBoundary",$e],["sizeOfGeoLoop",$e],["sizeOfGeoPolygon",$e],["sizeOfLinkedGeoPolygon",$e],["sizeOfCoordIJ",$e],["readInt64AsDoubleFromPointer",$e],["isValidCell",YA,[Ve,je]],["latLngToCell",Fe,[$e,$e,En,Ce]],["cellToLatLng",Fe,[Ve,je,Ce]],["cellToBoundary",Fe,[Ve,je,Ce]],["maxGridDiskSize",Fe,[$e,Ce]],["gridDisk",Fe,[Ve,je,$e,Ce]],["gridDiskDistances",Fe,[Ve,je,$e,Ce,Ce]],["gridRingUnsafe",Fe,[Ve,je,$e,Ce]],["maxPolygonToCellsSize",Fe,[Ce,En,$e,Ce]],["polygonToCells",Fe,[Ce,En,$e,Ce]],["cellsToLinkedMultiPolygon",Fe,[Ce,$e,Ce]],["destroyLinkedMultiPolygon",null,[Ce]],["compactCells",Fe,[Ce,Ce,$e,$e]],["uncompactCells",Fe,[Ce,$e,$e,Ce,$e,En]],["uncompactCellsSize",Fe,[Ce,$e,$e,En,Ce]],["isPentagon",YA,[Ve,je]],["isResClassIII",YA,[Ve,je]],["getBaseCellNumber",$e,[Ve,je]],["getResolution",$e,[Ve,je]],["maxFaceCount",Fe,[Ve,je,Ce]],["getIcosahedronFaces",Fe,[Ve,je,Ce]],["cellToParent",Fe,[Ve,je,En,Ce]],["cellToChildren",Fe,[Ve,je,En,Ce]],["cellToCenterChild",Fe,[Ve,je,En,Ce]],["cellToChildrenSize",Fe,[Ve,je,En,Ce]],["cellToChildPos",Fe,[Ve,je,En,Ce]],["childPosToCell",Fe,[$e,$e,Ve,je,En,Ce]],["areNeighborCells",Fe,[Ve,je,Ve,je,Ce]],["cellsToDirectedEdge",Fe,[Ve,je,Ve,je,Ce]],["getDirectedEdgeOrigin",Fe,[Ve,je,Ce]],["getDirectedEdgeDestination",Fe,[Ve,je,Ce]],["isValidDirectedEdge",YA,[Ve,je]],["directedEdgeToCells",Fe,[Ve,je,Ce]],["originToDirectedEdges",Fe,[Ve,je,Ce]],["directedEdgeToBoundary",Fe,[Ve,je,Ce]],["gridDistance",Fe,[Ve,je,Ve,je,Ce]],["gridPathCells",Fe,[Ve,je,Ve,je,Ce]],["gridPathCellsSize",Fe,[Ve,je,Ve,je,Ce]],["cellToLocalIj",Fe,[Ve,je,Ve,je,$e,Ce]],["localIjToCell",Fe,[Ve,je,Ce,$e,Ce]],["getHexagonAreaAvgM2",Fe,[En,Ce]],["getHexagonAreaAvgKm2",Fe,[En,Ce]],["getHexagonEdgeLengthAvgM",Fe,[En,Ce]],["getHexagonEdgeLengthAvgKm",Fe,[En,Ce]],["greatCircleDistanceM",$e,[Ce,Ce]],["greatCircleDistanceKm",$e,[Ce,Ce]],["greatCircleDistanceRads",$e,[Ce,Ce]],["cellAreaM2",Fe,[Ve,je,Ce]],["cellAreaKm2",Fe,[Ve,je,Ce]],["cellAreaRads2",Fe,[Ve,je,Ce]],["edgeLengthM",Fe,[Ve,je,Ce]],["edgeLengthKm",Fe,[Ve,je,Ce]],["edgeLengthRads",Fe,[Ve,je,Ce]],["getNumCells",Fe,[En,Ce]],["getRes0Cells",Fe,[Ce]],["res0CellCount",$e],["getPentagons",Fe,[$e,Ce]],["pentagonCount",$e],["cellToVertex",Fe,[Ve,je,$e,Ce]],["cellToVertexes",Fe,[Ve,je,Ce]],["vertexToLatLng",Fe,[Ve,je,Ce]],["isValidVertex",YA,[Ve,je]]],lz=0,uz=1,cz=2,fz=3,hz=4,dz=5,gz=6,pz=7,mz=8,vz=9,yz=10,_z=11,wz=12,bz=13,Ez=14,Tz=15,dn={};dn[lz]="Success";dn[uz]="The operation failed but a more specific error is not available";dn[cz]="Argument was outside of acceptable range";dn[fz]="Latitude or longitude arguments were outside of acceptable range";dn[hz]="Resolution argument was outside of acceptable range";dn[dz]="Cell argument was not valid";dn[gz]="Directed edge argument was not valid";dn[pz]="Undirected edge argument was not valid";dn[mz]="Vertex argument was not valid";dn[vz]="Pentagon distortion was encountered";dn[yz]="Duplicate input";dn[_z]="Cell arguments were not neighbors";dn[wz]="Cell arguments had incompatible resolutions";dn[bz]="Memory allocation failed";dn[Ez]="Bounds of provided memory were insufficient";dn[Tz]="Mode or flags argument was not valid";var xz=1e3,Sz=1001,G4=1002,d0={};d0[xz]="Unknown unit";d0[Sz]="Array length out of bounds";d0[G4]="Got unexpected null value for H3 index";var Cz="Unknown error";function H4(t,e,n){var r=n&&"value"in n,i=new Error((t[e]||Cz)+" (code: "+e+(r?", value: "+n.value:"")+")");return i.code=e,i}function Mz(t,e){var n=arguments.length===2?{value:e}:{};return H4(dn,t,n)}function Lz(t,e){var n=arguments.length===2?{value:e}:{};return H4(d0,t,n)}function W4(t){if(t!==0)throw Mz(t)}var di={};Az.forEach(function(e){di[e[0]]=Qn.cwrap.apply(Qn,e)});var la=16,Pz=4,Q4=8,Xg=di.sizeOfH3Index(),Y4=di.sizeOfLatLng();di.sizeOfCellBoundary();di.sizeOfGeoPolygon();di.sizeOfGeoLoop();di.sizeOfLinkedGeoPolygon();di.sizeOfCoordIJ();function kz(t){if(!t)throw Lz(G4);return t}var Iz=/[^0-9a-fA-F]/;function Rz(t){if(Array.isArray(t)&&t.length===2&&Number.isInteger(t[0])&&Number.isInteger(t[1]))return t;if(typeof t!="string"||Iz.test(t))return[0,0];var e=parseInt(t.substring(0,t.length-8),la),n=parseInt(t.substring(t.length-8),la);return[n,e]}function P_(t){if(t>=0)return t.toString(la);t=t&2147483647;var e=$4(8,t.toString(la)),n=(parseInt(e[0],la)+8).toString(la);return e=n+e.substring(1),e}function Oz(t,e){return P_(e)+$4(8,P_(t))}function $4(t,e){for(var n=t-e.length,r="",i=0;i<n;i++)r+="0";return r=r+e,r}function Dz(t,e){e===void 0&&(e=0);var n=Qn.getValue(t+Xg*e,"i32"),r=Qn.getValue(t+Xg*e+Pz,"i32");return r?Oz(n,r):null}function k_(t){return Uz(Qn.getValue(t,"double"))}function Fz(t){return[k_(t),k_(t+Q4)]}function Bz(t,e,n){var r=Qn._malloc(Y4);Qn.HEAPF64.set([t,e].map(Nz),r/Q4);var i=Qn._malloc(Xg);try{return W4(di.latLngToCell(r,n,i)),kz(Dz(i))}finally{Qn._free(i),Qn._free(r)}}function I_(t){var e=Qn._malloc(Y4),n=Rz(t),r=n[0],i=n[1];try{return W4(di.cellToLatLng(r,i,e)),Fz(e)}finally{Qn._free(e)}}function Nz(t){return t*Math.PI/180}function Uz(t){return t*180/Math.PI}function zz(t,e=1,n=20){let r=t.map(o=>({id:o.id,zoom:n,lat:+o.lat,lon:+o.lon}));const i=[];let s=null;for(let o=n-1;o>=e;o--){const c=o-4,h=r.reduce((_,y)=>{const w=Bz(+y.lat,+y.lon,c);return _[w]||(_[w]=[]),_[w].push(y),_},{}),p=Object.keys(h);if(p.length<t.length&&(s===null&&(s=o+1),r=p.map(_=>{if(h[_].length===1){const y=h[_][0];return{id:`{[${y.id}:${o}]}`,zoom:o,lat:y.lat,lon:y.lon,children:[y.id]}}return{id:`{[${_}:${o}]}`,zoom:o,lat:I_(_)[0],lon:I_(_)[1],children:h[_].map(y=>y.id)}}),i.unshift({zoom:o,nodes:r})),p.length<=1)break}return i.push({zoom:s??n,nodes:t}),i}const Vz="https://gist.githubusercontent.com/ilyabo/",R_=`${Vz}/68d3dba61d86164b940ffe60e9d36931/raw/a72938b5d51b6df9fa7bba9aa1fb7df00cd0f06a`;let fc;async function jz(t="HCA"){return fc||(fc=await Promise.all([L_(`${R_}/locations.csv`,(e,n)=>({id:e.id,name:e.name,lat:Number(e.lat),lon:Number(e.lon)})),L_(`${R_}/flows.csv`,e=>({origin:e.origin,dest:e.dest,count:Number(e.count)}))]).then(([e,n])=>({locations:e,flows:n}))),{...fc,...t==="H3"?{clusterLevels:zz(fc.locations)}:null}}/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.18.2
 * @author George Michael Brower
 * @license MIT
 */class ui{constructor(e,n,r,i,s="div"){this.parent=e,this.object=n,this.property=r,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(i),this.$name=document.createElement("div"),this.$name.classList.add("name"),ui.nextNameID=ui.nextNameID||0,this.$name.id=`lil-gui-name-${++ui.nextNameID}`,this.$widget=document.createElement(s),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.domElement.addEventListener("keydown",o=>o.stopPropagation()),this.domElement.addEventListener("keyup",o=>o.stopPropagation()),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(r)}name(e){return this._name=e,this.$name.innerHTML=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled?this:(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e),this)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(e){const n=this.parent.add(this.object,this.property,e);return n.name(this._name),this.destroy(),n}min(e){return this}max(e){return this}step(e){return this}decimals(e){return this}listen(e=!0){return this._listening=e,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const e=this.save();e!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=e}getValue(){return this.object[this.property]}setValue(e){return this.object[this.property]=e,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class Gz extends ui{constructor(e,n,r){super(e,n,r,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function Zg(t){let e,n;return(e=t.match(/(#|0x)?([a-f0-9]{6})/i))?n=e[2]:(e=t.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?n=parseInt(e[1]).toString(16).padStart(2,0)+parseInt(e[2]).toString(16).padStart(2,0)+parseInt(e[3]).toString(16).padStart(2,0):(e=t.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),n?"#"+n:!1}const Hz={isPrimitive:!0,match:t=>typeof t=="string",fromHexString:Zg,toHexString:Zg},Xl={isPrimitive:!0,match:t=>typeof t=="number",fromHexString:t=>parseInt(t.substring(1),16),toHexString:t=>"#"+t.toString(16).padStart(6,0)},Wz={isPrimitive:!1,match:t=>Array.isArray(t),fromHexString(t,e,n=1){const r=Xl.fromHexString(t);e[0]=(r>>16&255)/255*n,e[1]=(r>>8&255)/255*n,e[2]=(r&255)/255*n},toHexString([t,e,n],r=1){r=255/r;const i=t*r<<16^e*r<<8^n*r<<0;return Xl.toHexString(i)}},Qz={isPrimitive:!1,match:t=>Object(t)===t,fromHexString(t,e,n=1){const r=Xl.fromHexString(t);e.r=(r>>16&255)/255*n,e.g=(r>>8&255)/255*n,e.b=(r&255)/255*n},toHexString({r:t,g:e,b:n},r=1){r=255/r;const i=t*r<<16^e*r<<8^n*r<<0;return Xl.toHexString(i)}},Yz=[Hz,Xl,Wz,Qz];function $z(t){return Yz.find(e=>e.match(t))}class Xz extends ui{constructor(e,n,r,i){super(e,n,r,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=$z(this.initialValue),this._rgbScale=i,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const s=Zg(this.$text.value);s&&this._setValueFromHexString(s)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){const n=this._format.fromHexString(e);this.setValue(n)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class Ad extends ui{constructor(e,n,r){super(e,n,r,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",i=>{i.preventDefault(),this.getValue().call(this.object),this._callOnChange()}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class Zz extends ui{constructor(e,n,r,i,s,o){super(e,n,r,"number"),this._initInput(),this.min(i),this.max(s);const c=o!==void 0;this.step(c?o:this._getImplicitStep(),c),this.updateDisplay()}decimals(e){return this._decimals=e,this.updateDisplay(),this}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,n=!0){return this._step=e,this._stepExplicit=n,this}updateDisplay(){const e=this.getValue();if(this._hasSlider){let n=(e-this._min)/(this._max-this._min);n=Math.max(0,Math.min(n,1)),this.$fill.style.width=n*100+"%"}return this._inputFocused||(this.$input.value=this._decimals===void 0?e:e.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),window.matchMedia("(pointer: coarse)").matches&&(this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any")),this.$widget.appendChild(this.$input),this.$disable=this.$input;const n=()=>{let C=parseFloat(this.$input.value);isNaN(C)||(this._stepExplicit&&(C=this._snap(C)),this.setValue(this._clamp(C)))},r=C=>{const P=parseFloat(this.$input.value);isNaN(P)||(this._snapClampSetValue(P+C),this.$input.value=this.getValue())},i=C=>{C.key==="Enter"&&this.$input.blur(),C.code==="ArrowUp"&&(C.preventDefault(),r(this._step*this._arrowKeyMultiplier(C))),C.code==="ArrowDown"&&(C.preventDefault(),r(this._step*this._arrowKeyMultiplier(C)*-1))},s=C=>{this._inputFocused&&(C.preventDefault(),r(this._step*this._normalizeMouseWheel(C)))};let o=!1,c,h,p,_,y;const w=5,T=C=>{c=C.clientX,h=p=C.clientY,o=!0,_=this.getValue(),y=0,window.addEventListener("mousemove",S),window.addEventListener("mouseup",k)},S=C=>{if(o){const P=C.clientX-c,B=C.clientY-h;Math.abs(B)>w?(C.preventDefault(),this.$input.blur(),o=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(P)>w&&k()}if(!o){const P=C.clientY-p;y-=P*this._step*this._arrowKeyMultiplier(C),_+y>this._max?y=this._max-_:_+y<this._min&&(y=this._min-_),this._snapClampSetValue(_+y)}p=C.clientY},k=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",k)},U=()=>{this._inputFocused=!0},x=()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()};this.$input.addEventListener("input",n),this.$input.addEventListener("keydown",i),this.$input.addEventListener("wheel",s,{passive:!1}),this.$input.addEventListener("mousedown",T),this.$input.addEventListener("focus",U),this.$input.addEventListener("blur",x)}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const e=(x,C,P,B,z)=>(x-C)/(P-C)*(z-B)+B,n=x=>{const C=this.$slider.getBoundingClientRect();let P=e(x,C.left,C.right,this._min,this._max);this._snapClampSetValue(P)},r=x=>{this._setDraggingStyle(!0),n(x.clientX),window.addEventListener("mousemove",i),window.addEventListener("mouseup",s)},i=x=>{n(x.clientX)},s=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",s)};let o=!1,c,h;const p=x=>{x.preventDefault(),this._setDraggingStyle(!0),n(x.touches[0].clientX),o=!1},_=x=>{x.touches.length>1||(this._hasScrollBar?(c=x.touches[0].clientX,h=x.touches[0].clientY,o=!0):p(x),window.addEventListener("touchmove",y,{passive:!1}),window.addEventListener("touchend",w))},y=x=>{if(o){const C=x.touches[0].clientX-c,P=x.touches[0].clientY-h;Math.abs(C)>Math.abs(P)?p(x):(window.removeEventListener("touchmove",y),window.removeEventListener("touchend",w))}else x.preventDefault(),n(x.touches[0].clientX)},w=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",y),window.removeEventListener("touchend",w)},T=this._callOnFinishChange.bind(this),S=400;let k;const U=x=>{if(Math.abs(x.deltaX)<Math.abs(x.deltaY)&&this._hasScrollBar)return;x.preventDefault();const P=this._normalizeMouseWheel(x)*this._step;this._snapClampSetValue(this.getValue()+P),this.$input.value=this.getValue(),clearTimeout(k),k=setTimeout(T,S)};this.$slider.addEventListener("mousedown",r),this.$slider.addEventListener("touchstart",_,{passive:!1}),this.$slider.addEventListener("wheel",U,{passive:!1})}_setDraggingStyle(e,n="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle(`lil-gui-${n}`,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:n,deltaY:r}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(n=0,r=-e.wheelDelta/120,r*=this._stepExplicit?1:10),n+-r}_arrowKeyMultiplier(e){let n=this._stepExplicit?1:10;return e.shiftKey?n*=10:e.altKey&&(n/=10),n}_snap(e){const n=Math.round(e/this._step)*this._step;return parseFloat(n.toPrecision(15))}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){const e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}}class Kz extends ui{constructor(e,n,r,i){super(e,n,r,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(i)?i:Object.values(i),this._names=Array.isArray(i)?i:Object.keys(i),this._names.forEach(s=>{const o=document.createElement("option");o.innerHTML=s,this.$select.appendChild(o)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const e=this.getValue(),n=this._values.indexOf(e);return this.$select.selectedIndex=n,this.$display.innerHTML=n===-1?e:this._names[n],this}}class qz extends ui{constructor(e,n,r){super(e,n,r,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",i=>{i.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}const Jz=`.lil-gui {
  font-family: var(--font-family);
  font-size: var(--font-size);
  line-height: 1;
  font-weight: normal;
  font-style: normal;
  text-align: left;
  background-color: var(--background-color);
  color: var(--text-color);
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  --background-color: #1f1f1f;
  --text-color: #ebebeb;
  --title-background-color: #111111;
  --title-text-color: #ebebeb;
  --widget-color: #424242;
  --hover-color: #4f4f4f;
  --focus-color: #595959;
  --number-color: #2cc9ff;
  --string-color: #a2db3c;
  --font-size: 11px;
  --input-font-size: 11px;
  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;
  --padding: 4px;
  --spacing: 4px;
  --widget-height: 20px;
  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);
  --name-width: 45%;
  --slider-knob-width: 2px;
  --slider-input-width: 27%;
  --color-input-width: 27%;
  --slider-input-min-width: 45px;
  --color-input-min-width: 45px;
  --folder-indent: 7px;
  --widget-padding: 0 0 0 3px;
  --widget-border-radius: 2px;
  --checkbox-size: calc(0.75 * var(--widget-height));
  --scrollbar-width: 5px;
}
.lil-gui, .lil-gui * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
.lil-gui.root {
  width: var(--width, 245px);
  display: flex;
  flex-direction: column;
}
.lil-gui.root > .title {
  background: var(--title-background-color);
  color: var(--title-text-color);
}
.lil-gui.root > .children {
  overflow-x: hidden;
  overflow-y: auto;
}
.lil-gui.root > .children::-webkit-scrollbar {
  width: var(--scrollbar-width);
  height: var(--scrollbar-width);
  background: var(--background-color);
}
.lil-gui.root > .children::-webkit-scrollbar-thumb {
  border-radius: var(--scrollbar-width);
  background: var(--focus-color);
}
@media (pointer: coarse) {
  .lil-gui.allow-touch-styles, .lil-gui.allow-touch-styles .lil-gui {
    --widget-height: 28px;
    --padding: 6px;
    --spacing: 6px;
    --font-size: 13px;
    --input-font-size: 16px;
    --folder-indent: 10px;
    --scrollbar-width: 7px;
    --slider-input-min-width: 50px;
    --color-input-min-width: 65px;
  }
}
.lil-gui.force-touch-styles, .lil-gui.force-touch-styles .lil-gui {
  --widget-height: 28px;
  --padding: 6px;
  --spacing: 6px;
  --font-size: 13px;
  --input-font-size: 16px;
  --folder-indent: 10px;
  --scrollbar-width: 7px;
  --slider-input-min-width: 50px;
  --color-input-min-width: 65px;
}
.lil-gui.autoPlace {
  max-height: 100%;
  position: fixed;
  top: 0;
  right: 15px;
  z-index: 1001;
}

.lil-gui .controller {
  display: flex;
  align-items: center;
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
}
.lil-gui .controller.disabled {
  opacity: 0.5;
}
.lil-gui .controller.disabled, .lil-gui .controller.disabled * {
  pointer-events: none !important;
}
.lil-gui .controller > .name {
  min-width: var(--name-width);
  flex-shrink: 0;
  white-space: pre;
  padding-right: var(--spacing);
  line-height: var(--widget-height);
}
.lil-gui .controller .widget {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  min-height: var(--widget-height);
}
.lil-gui .controller.string input {
  color: var(--string-color);
}
.lil-gui .controller.boolean .widget {
  cursor: pointer;
}
.lil-gui .controller.color .display {
  width: 100%;
  height: var(--widget-height);
  border-radius: var(--widget-border-radius);
  position: relative;
}
@media (hover: hover) {
  .lil-gui .controller.color .display:hover:before {
    content: " ";
    display: block;
    position: absolute;
    border-radius: var(--widget-border-radius);
    border: 1px solid #fff9;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}
.lil-gui .controller.color input[type=color] {
  opacity: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
}
.lil-gui .controller.color input[type=text] {
  margin-left: var(--spacing);
  font-family: var(--font-family-mono);
  min-width: var(--color-input-min-width);
  width: var(--color-input-width);
  flex-shrink: 0;
}
.lil-gui .controller.option select {
  opacity: 0;
  position: absolute;
  width: 100%;
  max-width: 100%;
}
.lil-gui .controller.option .display {
  position: relative;
  pointer-events: none;
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  line-height: var(--widget-height);
  max-width: 100%;
  overflow: hidden;
  word-break: break-all;
  padding-left: 0.55em;
  padding-right: 1.75em;
  background: var(--widget-color);
}
@media (hover: hover) {
  .lil-gui .controller.option .display.focus {
    background: var(--focus-color);
  }
}
.lil-gui .controller.option .display.active {
  background: var(--focus-color);
}
.lil-gui .controller.option .display:after {
  font-family: "lil-gui";
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  padding-right: 0.375em;
}
.lil-gui .controller.option .widget,
.lil-gui .controller.option select {
  cursor: pointer;
}
@media (hover: hover) {
  .lil-gui .controller.option .widget:hover .display {
    background: var(--hover-color);
  }
}
.lil-gui .controller.number input {
  color: var(--number-color);
}
.lil-gui .controller.number.hasSlider input {
  margin-left: var(--spacing);
  width: var(--slider-input-width);
  min-width: var(--slider-input-min-width);
  flex-shrink: 0;
}
.lil-gui .controller.number .slider {
  width: 100%;
  height: var(--widget-height);
  background-color: var(--widget-color);
  border-radius: var(--widget-border-radius);
  padding-right: var(--slider-knob-width);
  overflow: hidden;
  cursor: ew-resize;
  touch-action: pan-y;
}
@media (hover: hover) {
  .lil-gui .controller.number .slider:hover {
    background-color: var(--hover-color);
  }
}
.lil-gui .controller.number .slider.active {
  background-color: var(--focus-color);
}
.lil-gui .controller.number .slider.active .fill {
  opacity: 0.95;
}
.lil-gui .controller.number .fill {
  height: 100%;
  border-right: var(--slider-knob-width) solid var(--number-color);
  box-sizing: content-box;
}

.lil-gui-dragging .lil-gui {
  --hover-color: var(--widget-color);
}
.lil-gui-dragging * {
  cursor: ew-resize !important;
}

.lil-gui-dragging.lil-gui-vertical * {
  cursor: ns-resize !important;
}

.lil-gui .title {
  height: var(--title-height);
  line-height: calc(var(--title-height) - 4px);
  font-weight: 600;
  padding: 0 var(--padding);
  -webkit-tap-highlight-color: transparent;
  cursor: pointer;
  outline: none;
  text-decoration-skip: objects;
}
.lil-gui .title:before {
  font-family: "lil-gui";
  content: "";
  padding-right: 2px;
  display: inline-block;
}
.lil-gui .title:active {
  background: var(--title-background-color);
  opacity: 0.75;
}
@media (hover: hover) {
  body:not(.lil-gui-dragging) .lil-gui .title:hover {
    background: var(--title-background-color);
    opacity: 0.85;
  }
  .lil-gui .title:focus {
    text-decoration: underline var(--focus-color);
  }
}
.lil-gui.root > .title:focus {
  text-decoration: none !important;
}
.lil-gui.closed > .title:before {
  content: "";
}
.lil-gui.closed > .children {
  transform: translateY(-7px);
  opacity: 0;
}
.lil-gui.closed:not(.transition) > .children {
  display: none;
}
.lil-gui.transition > .children {
  transition-duration: 300ms;
  transition-property: height, opacity, transform;
  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);
  overflow: hidden;
  pointer-events: none;
}
.lil-gui .children:empty:before {
  content: "Empty";
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
  display: block;
  height: var(--widget-height);
  font-style: italic;
  line-height: var(--widget-height);
  opacity: 0.5;
}
.lil-gui.root > .children > .lil-gui > .title {
  border: 0 solid var(--widget-color);
  border-width: 1px 0;
  transition: border-color 300ms;
}
.lil-gui.root > .children > .lil-gui.closed > .title {
  border-bottom-color: transparent;
}
.lil-gui + .controller {
  border-top: 1px solid var(--widget-color);
  margin-top: 0;
  padding-top: var(--spacing);
}
.lil-gui .lil-gui .lil-gui > .title {
  border: none;
}
.lil-gui .lil-gui .lil-gui > .children {
  border: none;
  margin-left: var(--folder-indent);
  border-left: 2px solid var(--widget-color);
}
.lil-gui .lil-gui .controller {
  border: none;
}

.lil-gui input {
  -webkit-tap-highlight-color: transparent;
  border: 0;
  outline: none;
  font-family: var(--font-family);
  font-size: var(--input-font-size);
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  background: var(--widget-color);
  color: var(--text-color);
  width: 100%;
}
@media (hover: hover) {
  .lil-gui input:hover {
    background: var(--hover-color);
  }
  .lil-gui input:active {
    background: var(--focus-color);
  }
}
.lil-gui input:disabled {
  opacity: 1;
}
.lil-gui input[type=text],
.lil-gui input[type=number] {
  padding: var(--widget-padding);
}
.lil-gui input[type=text]:focus,
.lil-gui input[type=number]:focus {
  background: var(--focus-color);
}
.lil-gui input::-webkit-outer-spin-button,
.lil-gui input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
.lil-gui input[type=number] {
  -moz-appearance: textfield;
}
.lil-gui input[type=checkbox] {
  appearance: none;
  -webkit-appearance: none;
  height: var(--checkbox-size);
  width: var(--checkbox-size);
  border-radius: var(--widget-border-radius);
  text-align: center;
  cursor: pointer;
}
.lil-gui input[type=checkbox]:checked:before {
  font-family: "lil-gui";
  content: "";
  font-size: var(--checkbox-size);
  line-height: var(--checkbox-size);
}
@media (hover: hover) {
  .lil-gui input[type=checkbox]:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui button {
  -webkit-tap-highlight-color: transparent;
  outline: none;
  cursor: pointer;
  font-family: var(--font-family);
  font-size: var(--font-size);
  color: var(--text-color);
  width: 100%;
  height: var(--widget-height);
  text-transform: none;
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
  border: 1px solid var(--widget-color);
  text-align: center;
  line-height: calc(var(--widget-height) - 4px);
}
@media (hover: hover) {
  .lil-gui button:hover {
    background: var(--hover-color);
    border-color: var(--hover-color);
  }
  .lil-gui button:focus {
    border-color: var(--focus-color);
  }
}
.lil-gui button:active {
  background: var(--focus-color);
}

@font-face {
  font-family: "lil-gui";
  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");
}`;function eV(t){const e=document.createElement("style");e.innerHTML=t;const n=document.querySelector("head link[rel=stylesheet], head style");n?document.head.insertBefore(e,n):document.head.appendChild(e)}let O_=!1;class Wm{constructor({parent:e,autoPlace:n=e===void 0,container:r,width:i,title:s="Controls",closeFolders:o=!1,injectStyles:c=!0,touchStyles:h=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",p=>{(p.code==="Enter"||p.code==="Space")&&(p.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(s),this.parent){this.parent.children.push(this),this.parent.folders.push(this),this.parent.$children.appendChild(this.domElement);return}this.domElement.classList.add("root"),h&&this.domElement.classList.add("allow-touch-styles"),!O_&&c&&(eV(Jz),O_=!0),r?r.appendChild(this.domElement):n&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),i&&this.domElement.style.setProperty("--width",i+"px"),this._closeFolders=o}add(e,n,r,i,s){if(Object(r)===r)return new Kz(this,e,n,r);const o=e[n];switch(typeof o){case"number":return new Zz(this,e,n,r,i,s);case"boolean":return new Gz(this,e,n);case"string":return new qz(this,e,n);case"function":return new Ad(this,e,n)}console.error(`gui.add failed
	property:`,n,`
	object:`,e,`
	value:`,o)}addColor(e,n,r=1){return new Xz(this,e,n,r)}addFolder(e){const n=new Wm({parent:this,title:e});return this.root._closeFolders&&n.close(),n}load(e,n=!0){return e.controllers&&this.controllers.forEach(r=>{r instanceof Ad||r._name in e.controllers&&r.load(e.controllers[r._name])}),n&&e.folders&&this.folders.forEach(r=>{r._title in e.folders&&r.load(e.folders[r._title])}),this}save(e=!0){const n={controllers:{},folders:{}};return this.controllers.forEach(r=>{if(!(r instanceof Ad)){if(r._name in n.controllers)throw new Error(`Cannot save GUI with duplicate property "${r._name}"`);n.controllers[r._name]=r.save()}}),e&&this.folders.forEach(r=>{if(r._title in n.folders)throw new Error(`Cannot save GUI with duplicate folder "${r._title}"`);n.folders[r._title]=r.save()}),n}open(e=!0){return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}_setClosed(e){this._closed!==e&&(this._closed=e,this._callOnOpenClose(this))}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{const n=this.$children.clientHeight;this.$children.style.height=n+"px",this.domElement.classList.add("transition");const r=s=>{s.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",r))};this.$children.addEventListener("transitionend",r);const i=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame(()=>{this.$children.style.height=i+"px"})}),this}title(e){return this._title=e,this.$title.innerHTML=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach(r=>r.reset()),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),this._onChange!==void 0&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onOpenClose(e){return this._onOpenClose=e,this}_callOnOpenClose(e){this.parent&&this.parent._callOnOpenClose(e),this._onOpenClose!==void 0&&this._onOpenClose.call(this,e)}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(e=>e.destroy())}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach(n=>{e=e.concat(n.controllersRecursive())}),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach(n=>{e=e.concat(n.foldersRecursive())}),e}}function tV(t,e){const[n,r]=pe.useState(t),i=pe.useRef();return pe.useEffect(()=>{const s=new Wm;e(s);const o=s.controllersRecursive();for(const c in t)if(t[c]){if(o.find(p=>p._name===c))continue;const h=[t,c];s.add.apply(s,h)}return s.onChange(c=>{r(h=>({...h,[c.property]:c.value}))}),i.current=s,()=>{s.destroy()}},[t,e]),n}const Ur={TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,DOUBLE:5130},nV=`#define SHADER_NAME animated-flow-lines-layer-fragment-shader

precision highp float;

uniform float animationTailLength;

varying vec4 vColor;
varying float sourceToTarget;
varying vec2 uv;
                                   
void main(void) {
  geometry.uv = uv;

  gl_FragColor = vec4(vColor.xyz, vColor.w * smoothstep(1.0 - animationTailLength, 1.0, fract(sourceToTarget)));

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,rV=`#define SHADER_NAME animated-flow-lines-layer-vertex-shader
#define SPEED 0.015
#define NUM_PARTS 5.0

attribute vec3 positions;
attribute vec3 instanceSourcePositions;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions64Low;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute float instanceWidths;
attribute float instancePickable;
attribute float instanceStaggering;

uniform float opacity;
uniform float currentTime;
uniform float thicknessUnit;
    
varying vec4 vColor;
varying float sourceToTarget;
varying vec2 uv;

// offset vector by strokeWidth pixels
// offset_direction is -1 (left) or 1 (right)
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  return dir_screenspace * offset_direction * width / 2.0;
}

void main(void) {
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;

  // Position
  vec4 source_commonspace;
  vec4 target_commonspace;
  vec4 source = project_position_to_clipspace(instanceSourcePositions, instanceSourcePositions64Low, vec3(0.), source_commonspace);
  vec4 target = project_position_to_clipspace(instanceTargetPositions, instanceTargetPositions64Low, vec3(0.), target_commonspace);

  float widthPixels = instanceWidths * thicknessUnit;
  
  
  // linear interpolation of source & target to pick right coord
  float segmentIndex = positions.x;
  vec4 p = mix(source, target, segmentIndex);
  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);
  uv = positions.xy;
  geometry.uv = uv;
  if (instancePickable > 0.5) {
    geometry.pickingColor = instancePickingColors;
  }
  
  // extrude
  vec3 offset = vec3(
    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),
    0.0);
  DECKGL_FILTER_SIZE(offset, geometry);
  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Color
  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;
  DECKGL_FILTER_COLOR(vColor, geometry);

  sourceToTarget = positions.x * length(source - target) * NUM_PARTS - currentTime * SPEED + instanceStaggering; 
}
`,iV=[0,132,193,255],X4=1800,sV=20,D_=X4/sV;class Rc extends hi{constructor(e){super(e)}getShaders(){return super.getShaders({vs:rV,fs:nV,modules:[tA,nA],shaderCache:this.context.shaderCache})}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:Ur.DOUBLE,transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:Ur.DOUBLE,transition:!0,accessor:"getTargetPosition"},instanceColors:{size:4,type:Ur.UNSIGNED_BYTE,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getThickness",defaultValue:1},instanceStaggering:{accessor:"getStaggering",size:1,transition:!1},instancePickable:{accessor:"getPickable",size:1,transition:!1}})}getNeedsRedraw(){return!0}updateState({props:e,oldProps:n,changeFlags:r}){var i;if(super.updateState({props:e,oldProps:n,changeFlags:r}),r.extensionsChanged){const{gl:s}=this.context;(i=this.state.model)==null||i.delete(),this.state.model=this._getModel(s),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{thicknessUnit:n,animationTailLength:r}=this.props,s=Date.now()/1e3%D_/D_*X4;this.state.model.setUniforms({...e,thicknessUnit:n*4,animationTailLength:r,currentTime:s}).draw()}_getModel(e){const n=[0,-1,0,0,1,0,1,-1,0,1,1,0];return new vo(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new Ja({drawMode:Ur.TRIANGLE_STRIP,attributes:{positions:new Float32Array(n)}}),isInstanced:!0}))}}Rc.defaultProps={currentTime:0,animationTailLength:.7,getSourcePosition:{type:"accessor",value:t=>[0,0]},getTargetPosition:{type:"accessor",value:t=>[0,0]},getPickable:{type:"accessor",value:t=>1},getStaggering:{type:"accessor",value:(t,{index:e})=>Math.random()},getColor:{type:"accessor",value:iV},getThickness:{type:"accessor",value:1},thicknessUnit:15*2,parameters:{depthTest:!1}};const oV=`#define SHADER_NAME flow-line-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 uv;

void main(void) {
  if (vColor.a == 0.0) {
    discard;
  }

  geometry.uv = uv;
  gl_FragColor = vColor;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,aV=`#define SHADER_NAME flow-line-layer-vertex-shader

attribute vec3 positions;
attribute vec3 normals;
attribute vec4 instanceColors;
attribute float instanceThickness;    // 0..0.5
attribute vec3 instanceSourcePositions;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions64Low;
attribute vec3 instancePickingColors;
attribute vec2 instanceEndpointOffsets;
attribute float instancePickable;

uniform vec4 outlineColor;
uniform float thicknessUnit;
uniform float gap;
uniform float opacity;

varying vec4 vColor;
varying vec2 uv;

void main(void) {
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;
  
  // Position
  vec4 source_commonspace;    
  vec4 target_commonspace;
  vec4 source = project_position_to_clipspace(instanceSourcePositions, instanceSourcePositions64Low, vec3(0.), source_commonspace);
  vec4 target = project_position_to_clipspace(instanceTargetPositions, instanceTargetPositions64Low, vec3(0.), target_commonspace);

  // linear interpolation of source & target to pick right coord
  float sourceOrTarget = positions.x;
  geometry.position = mix(source_commonspace, target_commonspace, sourceOrTarget);
  uv = positions.xy;
  geometry.uv = uv;
  if (instancePickable > 0.5) {
    geometry.pickingColor = instancePickingColors;
  }
  
  // set the clamp limits in pixel size 
  float lengthCommon = length(target_commonspace - source_commonspace);    
  vec2 offsetDistances = project_pixel_size(positions.yz) * thicknessUnit;
  
  vec2 limitedOffsetDistances = clamp(   
    project_pixel_size(positions.yz) * thicknessUnit,
    -lengthCommon*.8, lengthCommon*.8
  );
  float startOffsetCommon = project_pixel_size(instanceEndpointOffsets[0]);
  float endOffsetCommon = project_pixel_size(instanceEndpointOffsets[1]);
  float endpointOffset = mix(
    clamp(startOffsetCommon, 0.0, lengthCommon*.2),
    -clamp(endOffsetCommon, 0.0, lengthCommon*.2),
    positions.x
  );

  vec2 flowlineDir = normalize(target_commonspace.xy - source_commonspace.xy);
  vec2 perpendicularDir = vec2(-flowlineDir.y, flowlineDir.x);
  vec2 normalsCommon = project_pixel_size(normals.xy);
  float gapCommon = project_pixel_size(gap);
  vec3 offsetCommon = vec3(
    flowlineDir * (instanceThickness * limitedOffsetDistances[1] + normalsCommon.y + endpointOffset * 1.05) -
    perpendicularDir * (instanceThickness * limitedOffsetDistances[0] + gapCommon + normalsCommon.x),
    0.0
  );
  
  DECKGL_FILTER_SIZE(offsetCommon, geometry);
  vec4 position_commonspace = mix(source_commonspace, target_commonspace, sourceOrTarget);
  vec4 offset_commonspace = vec4(offsetCommon, 0.0);
  gl_Position = project_common_position_to_clipspace(position_commonspace + offset_commonspace);
      
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  
  vec4 fillColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;
  vColor = mix(fillColor, vec4(outlineColor.xyz, outlineColor.w * fillColor.w), normals.z);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,AV=[0,132,193,255],F_=[1,0,0,1,2,-3,1,1,-3,1,0,0,1,1,-3,0,1,0,1,0,0,0,1,0,0,0,0];function lV(t,e){return[-1,2*t,1,2*t,-t,1,t,-t,1,-1,2*t,1,t,-t,1,t,-t,1,-1,2*t,1,t,-t,1,-1,-t,1]}const uV=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class ua extends hi{constructor(e){super(e)}getShaders(){return super.getShaders({vs:aV,fs:oV,modules:[tA,nA],shaderCache:this.context.shaderCache})}initializeState(){const{attributeManager:e}=this.state;e.addInstanced({instanceSourcePositions:{accessor:"getSourcePosition",size:3,transition:!1,type:Ur.DOUBLE},instanceTargetPositions:{accessor:"getTargetPosition",size:3,transition:!1,type:Ur.DOUBLE},instanceThickness:{accessor:"getThickness",size:1,transition:!1},instanceEndpointOffsets:{accessor:"getEndpointOffsets",size:2,transition:!1},instanceColors:{accessor:"getColor",size:4,type:Ur.UNSIGNED_BYTE,transition:!1},instancePickable:{accessor:"getPickable",size:1,transition:!1}})}updateState({props:e,oldProps:n,changeFlags:r}){if(super.updateState({props:e,oldProps:n,changeFlags:r}),r.extensionsChanged){const{gl:i}=this.context;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(i)}),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{gl:n}=this.context,{outlineColor:r,thicknessUnit:i}=this.props;n.lineWidth(1),this.state.model.setUniforms({...e,outlineColor:r.map(s=>s/255),thicknessUnit:i*2,gap:.5}).draw()}_getModel(e){let n=[],r=[];const{drawOutline:i,outlineThickness:s}=this.props;if(i){n=n.concat(F_);const o=s;r=r.concat(lV(o))}return n=n.concat(F_),r=r.concat(uV),new vo(e,{id:this.props.id,...this.getShaders(),geometry:new Ja({drawMode:Ur.TRIANGLES,attributes:{positions:new Float32Array(n),normals:new Float32Array(r)}}),isInstanced:!0,shaderCache:this.context.shaderCache})}}ua.layerName="FlowLinesLayer";ua.defaultProps={getSourcePosition:{type:"accessor",value:t=>[0,0]},getTargetPosition:{type:"accessor",value:t=>[0,0]},getColor:{type:"accessor",value:AV},getThickness:{type:"accessor",value:t=>t.count},getPickable:{type:"accessor",value:t=>1},drawOutline:!0,thicknessUnit:12,outlineThickness:1,outlineColor:[255,255,255,255],parameters:{depthTest:!1}};const cV=`#define SHADER_NAME flow-circles-layer-fragment-shader
#define SOFT_OUTLINE 0.05
#define EPS 0.05
precision highp float;

uniform vec4 emptyColor;
uniform float outlineEmptyMix;

varying vec4 vColor;
varying vec2 unitPosition;
varying float unitInRadius;
varying float unitOutRadius;

float when_gt(float x, float y) {
  return max(sign(x - y), 0.0);
}

void main(void) {
  geometry.uv = unitPosition;
  float distToCenter = length(unitPosition);
  if (distToCenter > 1.0) {
    discard;
  }

  // See https://stackoverflow.com/questions/47285778
  vec4 ringColor = mix(
    emptyColor / 255., vColor,
    when_gt(unitInRadius, unitOutRadius)
  );
  vec4 outlineColor = mix(
    mix(vColor, emptyColor / 255., outlineEmptyMix),
    vColor,
    when_gt(unitInRadius, unitOutRadius)
  );
  
  float innerR = min(unitInRadius, unitOutRadius) * (1.0 - SOFT_OUTLINE);
  
  // Inner circle
  float step2 = innerR - 2.0 * EPS; 
  float step3 = innerR - EPS;
  
  // Ring
  float step4 = innerR;
  // float step5 = 1.0 - SOFT_OUTLINE - EPS;
  // float step6 = 1.0 - SOFT_OUTLINE;
  float step5 = 1.0 - 5.0 * EPS;
  float step6 = 1.0;
  
  gl_FragColor = vColor;
  gl_FragColor = mix(gl_FragColor, emptyColor / 255., smoothstep(step2, step3, distToCenter));
  gl_FragColor = mix(gl_FragColor, ringColor, smoothstep(step3, step4, distToCenter));
  gl_FragColor = mix(gl_FragColor, outlineColor, smoothstep(step5, step6, distToCenter));
  // gl_FragColor = mix(gl_FragColor, emptyColor / 255., smoothstep(step6, 1.0, distToCenter));
  gl_FragColor.a = vColor.a;
  gl_FragColor.a *= smoothstep(0.0, SOFT_OUTLINE, 1.0 - distToCenter);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,fV=`#define SHADER_NAME flow-circles-layer-vertex-shader
#define radiusScale 100

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceInRadius;
attribute float instanceOutRadius;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform vec4 emptyColor;
uniform float outlineEmptyMix;

varying vec4 vColor;
varying vec2 unitPosition;
varying float unitInRadius;
varying float unitOutRadius;

void main(void) {
  geometry.worldPosition = instancePositions;

  float outerRadiusPixels = max(instanceInRadius, instanceOutRadius);
  unitInRadius = instanceInRadius / outerRadiusPixels; 
  unitOutRadius = instanceOutRadius / outerRadiusPixels; 

  // position on the containing square in [-1, 1] space
  unitPosition = positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;
                                                                                                    
  // Find the center of the point and add the current vertex
  vec3 offset = positions * project_pixel_size(outerRadiusPixels);
  DECKGL_FILTER_SIZE(offset, geometry);
  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
                            
  // Apply opacity to instance color, or return instance picking color
  vColor = vec4(instanceColors.rgb / 255., instanceColors.a / 255. * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,Z4=[0,0,0,255],hV=[255,255,255,255],dV=.4;class gl extends hi{constructor(e){super(e)}getShaders(){return super.getShaders({vs:fV,fs:cV,modules:[tA,nA]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:Ur.DOUBLE,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceInRadius:{size:1,transition:!0,accessor:"getInRadius",defaultValue:1},instanceOutRadius:{size:1,transition:!0,accessor:"getOutRadius",defaultValue:1},instanceColors:{size:4,transition:!0,type:Ur.UNSIGNED_BYTE,accessor:"getColor",defaultValue:Z4}})}updateState({props:e,oldProps:n,changeFlags:r}){if(super.updateState({props:e,oldProps:n,changeFlags:r}),r.extensionsChanged){const{gl:i}=this.context;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(i)}),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{emptyColor:n,outlineEmptyMix:r}=this.props;this.state.model.setUniforms({...e,emptyColor:n,outlineEmptyMix:r}).draw()}_getModel(e){const n=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new vo(e,Object.assign(this.getShaders(),{id:this.props.id,geometry:new Ja({drawMode:Ur.TRIANGLE_FAN,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(n)}}}),isInstanced:!0}))}}gl.layerName="FlowCirclesLayer";gl.defaultProps={getColor:{type:"accessor",value:Z4},emptyColor:{type:"accessor",value:hV},outlineEmptyMix:{type:"accessor",value:dV},getPosition:{type:"accessor",value:t=>t.position},getInRadius:{type:"accessor",value:1},getOutRadius:{type:"accessor",value:1},parameters:{depthTest:!1}};const gV=`#define SHADER_NAME icon-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute vec4 instanceIconFrames;
attribute float instanceColorModes;
attribute vec2 instanceOffsets;
attribute vec2 instancePixelOffset;

uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = angle * PI / 180.0;
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;

  vec2 iconSize = instanceIconFrames.zw;
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), 
    sizeMinPixels, sizeMaxPixels
  );
  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;
  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
  pixelOffset += instancePixelOffset;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);

  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); 
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }

  vTextureCoords = mix(
    instanceIconFrames.xy,
    instanceIconFrames.xy + iconSize,
    (positions.xy + 1.0) / 2.0
  ) / iconsTextureDim;

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);

  vColorMode = instanceColorModes;
}
`,pV=`#define SHADER_NAME icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  vec4 texColor = texture2D(iconsTexture, vTextureCoords);
  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
  float a = texColor.a * opacity * vColor.a;

  if (a < alphaCutoff) {
    discard;
  }

  gl_FragColor = vec4(color, a);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,mV=1024,vV=4,B_=()=>{},N_={10241:9987,10240:9729,10242:33071,10243:33071};function yV(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function _V(t,e,n,r){const i=Math.min(n/e.width,r/e.height),s=Math.floor(e.width*i),o=Math.floor(e.height*i);return i===1?{data:e,width:s,height:o}:(t.canvas.height=o,t.canvas.width=s,t.clearRect(0,0,s,o),t.drawImage(e,0,0,e.width,e.height,0,0,s,o),{data:t.canvas,width:s,height:o})}function Zl(t){return t&&(t.id||t.url)}function wV(t,e,n,r){const i=t.width,s=t.height,o=new ur(t.gl,{width:e,height:n,parameters:r});return JL(t,o,{targetY:0,width:i,height:s}),t.delete(),o}function U_(t,e,n){for(let r=0;r<e.length;r++){const{icon:i,xOffset:s}=e[r],o=Zl(i);t[o]={...i,x:s,y:n}}}function bV({icons:t,buffer:e,mapping:n={},xOffset:r=0,yOffset:i=0,rowHeight:s=0,canvasWidth:o}){let c=[];for(let h=0;h<t.length;h++){const p=t[h],_=Zl(p);if(!n[_]){const{height:y,width:w}=p;r+w+e>o&&(U_(n,c,i),r=0,i=s+i+e,s=0,c=[]),c.push({icon:p,xOffset:r}),r=r+w+e,s=Math.max(s,y)}}return c.length>0&&U_(n,c,i),{mapping:n,rowHeight:s,xOffset:r,yOffset:i,canvasWidth:o,canvasHeight:yV(s+i+e)}}function EV(t,e,n){if(!t||!e)return null;n=n||{};const r={},{iterable:i,objectInfo:s}=ym(t);for(const o of i){s.index++;const c=e(o,s),h=Zl(c);if(!c)throw new Error("Icon is missing.");if(!c.url)throw new Error("Icon url is missing.");!r[h]&&(!n[h]||c.url!==n[h].url)&&(r[h]={...c,source:o,sourceIndex:s.index})}return r}class TV{constructor(e,{onUpdate:n=B_,onError:r=B_}){L(this,"gl",void 0),L(this,"onUpdate",void 0),L(this,"onError",void 0),L(this,"_loadOptions",null),L(this,"_texture",null),L(this,"_externalTexture",null),L(this,"_mapping",{}),L(this,"_textureParameters",null),L(this,"_pendingCount",0),L(this,"_autoPacking",!1),L(this,"_xOffset",0),L(this,"_yOffset",0),L(this,"_rowHeight",0),L(this,"_buffer",vV),L(this,"_canvasWidth",mV),L(this,"_canvasHeight",0),L(this,"_canvas",null),this.gl=e,this.onUpdate=n,this.onError=r}finalize(){var e;(e=this._texture)===null||e===void 0||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const n=this._autoPacking?Zl(e):e;return this._mapping[n]||{}}setProps({loadOptions:e,autoPacking:n,iconAtlas:r,iconMapping:i,textureParameters:s}){if(e&&(this._loadOptions=e),n!==void 0&&(this._autoPacking=n),i&&(this._mapping=i),r){var o;(o=this._texture)===null||o===void 0||o.delete(),this._texture=null,this._externalTexture=r}s&&(this._textureParameters=s)}get isLoaded(){return this._pendingCount===0}packIcons(e,n){if(!this._autoPacking||typeof document>"u")return;const r=Object.values(EV(e,n,this._mapping)||{});if(r.length>0){const{mapping:i,xOffset:s,yOffset:o,rowHeight:c,canvasHeight:h}=bV({icons:r,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=c,this._mapping=i,this._xOffset=s,this._yOffset=o,this._canvasHeight=h,this._texture||(this._texture=new ur(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||N_})),this._texture.height!==this._canvasHeight&&(this._texture=wV(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||N_)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(r)}}_loadIcons(e){const n=this._canvas.getContext("2d",{willReadFrequently:!0});for(const r of e)this._pendingCount++,Af(r.url,this._loadOptions).then(i=>{const s=Zl(r),o=this._mapping[s],{x:c,y:h,width:p,height:_}=o,{data:y,width:w,height:T}=_V(n,i,p,_);this._texture.setSubImageData({data:y,x:c+(p-w)/2,y:h+(_-T)/2,width:w,height:T}),o.width=w,o.height=T,this._texture.generateMipmap(),this.onUpdate()}).catch(i=>{this.onError({url:r.url,source:r.source,sourceIndex:r.sourceIndex,loadOptions:this._loadOptions,error:i})}).finally(()=>{this._pendingCount--})}}const K4=[0,0,0,255],xV={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:K4},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0}};class Qm extends hi{constructor(...e){super(...e),L(this,"state",void 0)}getShaders(){return super.getShaders({vs:gV,fs:pV,modules:[tA,nA]})}initializeState(){this.state={iconManager:new TV(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:K4},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:n,oldProps:r,changeFlags:i}=e,s=this.getAttributeManager(),{iconAtlas:o,iconMapping:c,data:h,getIcon:p,textureParameters:_}=n,{iconManager:y}=this.state,w=o||this.internalState.isAsyncPropLoading("iconAtlas");if(y.setProps({loadOptions:n.loadOptions,autoPacking:!w,iconAtlas:o,iconMapping:w?c:null,textureParameters:_}),w?r.iconMapping!==n.iconMapping&&s.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&y.packIcons(h,p),i.extensionsChanged){var T;const{gl:S}=this.context;(T=this.state.model)===null||T===void 0||T.delete(),this.state.model=this._getModel(S),s.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,sizeUnits:s,billboard:o,alphaCutoff:c}=this.props,{iconManager:h}=this.state,p=h.getTexture();p&&this.state.model.setUniforms(e).setUniforms({iconsTexture:p,iconsTextureDim:[p.width,p.height],sizeUnits:Ra[s],sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,billboard:o,alphaCutoff:c}).draw()}_getModel(e){const n=[-1,-1,-1,1,1,1,1,-1];return new vo(e,{...this.getShaders(),id:this.props.id,geometry:new Ja({drawMode:6,attributes:{positions:{size:2,value:new Float32Array(n)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var n;const r=(n=this.getCurrentLayer())===null||n===void 0?void 0:n.props.onIconError;r?r(e):at.error(e.error.message)()}getInstanceOffset(e){const{width:n,height:r,anchorX:i=n/2,anchorY:s=r/2}=this.state.iconManager.getIconMapping(e);return[n/2-i,r/2-s]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:n,y:r,width:i,height:s}=this.state.iconManager.getIconMapping(e);return[n,r,i,s]}}L(Qm,"defaultProps",xV);L(Qm,"layerName","IconLayer");const SV=`#define SHADER_NAME scatterplot-layer-vertex-shader

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceRadius;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;


void main(void) {
  geometry.worldPosition = instancePositions;
  outerRadiusPixels = clamp(
    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
    radiusMinPixels, radiusMaxPixels
  );
  float lineWidthPixels = clamp(
    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
    lineWidthMinPixels, lineWidthMaxPixels
  );
  outerRadiusPixels += stroked * lineWidthPixels / 2.0;
  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;
  unitPosition = edgePadding * positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
  
  if (billboard) {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = edgePadding * positions * outerRadiusPixels;
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,CV=`#define SHADER_NAME scatterplot-layer-fragment-shader

precision highp float;

uniform bool filled;
uniform float stroked;
uniform bool antialiasing;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition) * outerRadiusPixels;
  float inCircle = antialiasing ? 
    smoothedge(distToCenter, outerRadiusPixels) : 
    step(distToCenter, outerRadiusPixels);

  if (inCircle == 0.0) {
    discard;
  }

  if (stroked > 0.5) {
    float isLine = antialiasing ? 
      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
      step(innerUnitRadius * outerRadiusPixels, distToCenter);

    if (filled) {
      gl_FragColor = mix(vFillColor, vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
    }
  } else if (!filled) {
    discard;
  } else {
    gl_FragColor = vFillColor;
  }

  gl_FragColor.a *= inCircle;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,z_=[0,0,0,255],MV={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:z_},getLineColor:{type:"accessor",value:z_},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class Ym extends hi{getShaders(){return super.getShaders({vs:SV,fs:CV,modules:[tA,nA]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){if(super.updateState(e),e.changeFlags.extensionsChanged){var n;const{gl:r}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{radiusUnits:n,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:s,stroked:o,filled:c,billboard:h,antialiasing:p,lineWidthUnits:_,lineWidthScale:y,lineWidthMinPixels:w,lineWidthMaxPixels:T}=this.props;this.state.model.setUniforms(e).setUniforms({stroked:o?1:0,filled:c,billboard:h,antialiasing:p,radiusUnits:Ra[n],radiusScale:r,radiusMinPixels:i,radiusMaxPixels:s,lineWidthUnits:Ra[_],lineWidthScale:y,lineWidthMinPixels:w,lineWidthMaxPixels:T}).draw()}_getModel(e){const n=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new vo(e,{...this.getShaders(),id:this.props.id,geometry:new Ja({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(n)}}}),isInstanced:!0})}}L(Ym,"defaultProps",MV);L(Ym,"layerName","ScatterplotLayer");const LV=`#define SHADER_NAME multi-icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float gamma;
uniform bool sdf;
uniform float alphaCutoff;
uniform float sdfBuffer;
uniform float outlineBuffer;
uniform vec4 outlineColor;

varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  if (!picking_uActive) {
    float alpha = texture2D(iconsTexture, vTextureCoords).a;
    vec4 color = vColor;
    if (sdf) {
      float distance = alpha;
      alpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);

      if (outlineBuffer > 0.0) {
        float inFill = alpha;
        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);
        color = mix(outlineColor, vColor, inFill);
        alpha = inBorder;
      }
    }
    float a = alpha * color.a;
    
    if (a < alphaCutoff) {
      discard;
    }

    gl_FragColor = vec4(color.rgb, a * opacity);
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,ld=192/256,V_=[],PV={getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class $m extends Qm{constructor(...e){super(...e),L(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:LV}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(n,{index:r,target:i})=>this.encodePickingColor(r,i)}})}updateState(e){super.updateState(e);const{props:n,oldProps:r}=e;let{outlineColor:i}=n;i!==r.outlineColor&&(i=i.map(s=>s/255),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!n.sdf&&n.outlineWidth&&at.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:n,smoothing:r,outlineWidth:i}=this.props,{outlineColor:s}=this.state,o=i?Math.max(r,ld*(1-i)):-1;if(e.uniforms={...e.uniforms,sdfBuffer:ld,outlineBuffer:o,gamma:r,sdf:!!n,outlineColor:s},super.draw(e),n&&i){const{iconManager:c}=this.state;c.getTexture()&&this.state.model.draw({uniforms:{outlineBuffer:ld}})}}getInstanceOffset(e){return e?Array.from(e).flatMap(n=>super.getInstanceOffset(n)):V_}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(n=>super.getInstanceIconFrame(n)):V_}}L($m,"defaultProps",PV);L($m,"layerName","MultiIconLayer");const pl=1e20;class kV{constructor({fontSize:e=24,buffer:n=3,radius:r=8,cutoff:i=.25,fontFamily:s="sans-serif",fontWeight:o="normal",fontStyle:c="normal"}={}){this.buffer=n,this.cutoff=i,this.radius=r;const h=this.size=e+n*4,p=this._createCanvas(h),_=this.ctx=p.getContext("2d",{willReadFrequently:!0});_.font=`${c} ${o} ${e}px ${s}`,_.textBaseline="alphabetic",_.textAlign="left",_.fillStyle="black",this.gridOuter=new Float64Array(h*h),this.gridInner=new Float64Array(h*h),this.f=new Float64Array(h),this.z=new Float64Array(h+1),this.v=new Uint16Array(h)}_createCanvas(e){const n=document.createElement("canvas");return n.width=n.height=e,n}draw(e){const{width:n,actualBoundingBoxAscent:r,actualBoundingBoxDescent:i,actualBoundingBoxLeft:s,actualBoundingBoxRight:o}=this.ctx.measureText(e),c=Math.ceil(r),h=0,p=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-s))),_=Math.min(this.size-this.buffer,c+Math.ceil(i)),y=p+2*this.buffer,w=_+2*this.buffer,T=Math.max(y*w,0),S=new Uint8ClampedArray(T),k={data:S,width:y,height:w,glyphWidth:p,glyphHeight:_,glyphTop:c,glyphLeft:h,glyphAdvance:n};if(p===0||_===0)return k;const{ctx:U,buffer:x,gridInner:C,gridOuter:P}=this;U.clearRect(x,x,p,_),U.fillText(e,x,x+c);const B=U.getImageData(x,x,p,_);P.fill(pl,0,T),C.fill(0,0,T);for(let z=0;z<_;z++)for(let H=0;H<p;H++){const X=B.data[4*(z*p+H)+3]/255;if(X===0)continue;const Q=(z+x)*y+H+x;if(X===1)P[Q]=0,C[Q]=pl;else{const te=.5-X;P[Q]=te>0?te*te:0,C[Q]=te<0?te*te:0}}j_(P,0,0,y,w,y,this.f,this.v,this.z),j_(C,x,x,p,_,y,this.f,this.v,this.z);for(let z=0;z<T;z++){const H=Math.sqrt(P[z])-Math.sqrt(C[z]);S[z]=Math.round(255-255*(H/this.radius+this.cutoff))}return k}}function j_(t,e,n,r,i,s,o,c,h){for(let p=e;p<e+r;p++)G_(t,n*s+p,s,i,o,c,h);for(let p=n;p<n+i;p++)G_(t,p*s+e,1,r,o,c,h)}function G_(t,e,n,r,i,s,o){s[0]=0,o[0]=-pl,o[1]=pl,i[0]=t[e];for(let c=1,h=0,p=0;c<r;c++){i[c]=t[e+c*n];const _=c*c;do{const y=s[h];p=(i[c]-i[y]+_-y*y)/(c-y)/2}while(p<=o[h]&&--h>-1);h++,s[h]=c,o[h]=p,o[h+1]=pl}for(let c=0,h=0;c<r;c++){for(;o[h+1]<c;)h++;const p=s[h],_=c-p;t[e+c*n]=i[p]+_*_}}const IV=32,RV=[];function OV(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function DV({characterSet:t,getFontWidth:e,fontHeight:n,buffer:r,maxCanvasWidth:i,mapping:s={},xOffset:o=0,yOffset:c=0}){let h=0,p=o;const _=n+r*2;for(const y of t)if(!s[y]){const w=e(y);p+w+r*2>i&&(p=0,h++),s[y]={x:p+r,y:c+h*_+r,width:w,height:_,layoutWidth:w,layoutHeight:n},p+=w+r*2}return{mapping:s,xOffset:p,yOffset:c+h*_,canvasHeight:OV(c+(h+1)*_)}}function q4(t,e,n,r){let i=0;for(let o=e;o<n;o++){var s;const c=t[o];i+=((s=r[c])===null||s===void 0?void 0:s.layoutWidth)||0}return i}function J4(t,e,n,r,i,s){let o=e,c=0;for(let h=e;h<n;h++){const p=q4(t,h,h+1,i);c+p>r&&(o<h&&s.push(h),o=h,c=0),c+=p}return c}function FV(t,e,n,r,i,s){let o=e,c=e,h=e,p=0;for(let _=e;_<n;_++)if((t[_]===" "||t[_+1]===" "||_+1===n)&&(h=_+1),h>c){let y=q4(t,c,h,i);p+y>r&&(o<c&&(s.push(c),o=c,p=0),y>r&&(y=J4(t,c,h,r,i,s),o=s[s.length-1])),c=h,p+=y}return p}function BV(t,e,n,r,i=0,s){s===void 0&&(s=t.length);const o=[];return e==="break-all"?J4(t,i,s,n,r,o):FV(t,i,s,n,r,o),o}function NV(t,e,n,r,i,s){let o=0,c=0;for(let h=e;h<n;h++){const p=t[h],_=r[p];_?(c||(c=_.layoutHeight),i[h]=o+_.layoutWidth/2,o+=_.layoutWidth):(at.warn("Missing character: ".concat(p," (").concat(p.codePointAt(0),")"))(),i[h]=o,o+=IV)}s[0]=o,s[1]=c}function UV(t,e,n,r,i){const s=Array.from(t),o=s.length,c=new Array(o),h=new Array(o),p=new Array(o),_=(n==="break-word"||n==="break-all")&&isFinite(r)&&r>0,y=[0,0],w=[0,0];let T=0,S=0,k=0;for(let x=0;x<=o;x++){const C=s[x];if((C===`
`||x===o)&&(k=x),k>S){const P=_?BV(s,n,r,i,S,k):RV;for(let B=0;B<=P.length;B++){const z=B===0?S:P[B-1],H=B<P.length?P[B]:k;NV(s,z,H,i,c,w);for(let X=z;X<H;X++){var U;const Q=s[X],te=((U=i[Q])===null||U===void 0?void 0:U.layoutOffsetY)||0;h[X]=T+w[1]/2+te,p[X]=w[0]}T=T+w[1]*e,y[0]=Math.max(y[0],w[0])}S=k}C===`
`&&(c[S]=0,h[S]=0,p[S]=0,S++)}return y[1]=T,{x:c,y:h,rowWidth:p,size:y}}function zV({value:t,length:e,stride:n,offset:r,startIndices:i,characterSet:s}){const o=t.BYTES_PER_ELEMENT,c=n?n/o:1,h=r?r/o:0,p=i[e]||Math.ceil((t.length-h)/c),_=s&&new Set,y=new Array(e);let w=t;if(c>1||h>0){const T=t.constructor;w=new T(p);for(let S=0;S<p;S++)w[S]=t[S*c+h]}for(let T=0;T<e;T++){const S=i[T],k=i[T+1]||p,U=w.subarray(S,k);y[T]=String.fromCodePoint.apply(null,U),_&&U.forEach(_.add,_)}if(_)for(const T of _)s.add(String.fromCodePoint(T));return{texts:y,characterCount:p}}class ex{constructor(e=5){L(this,"limit",void 0),L(this,"_cache",{}),L(this,"_order",[]),this.limit=e}get(e){const n=this._cache[e];return n&&(this._deleteOrder(e),this._appendOrder(e)),n}set(e,n){this._cache[e]?(this.delete(e),this._cache[e]=n,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=n,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const n=this._order.indexOf(e);n>=0&&this._order.splice(n,1)}_appendOrder(e){this._order.push(e)}}function VV(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}const xa={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:VV(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},H_=1024,W_=.9,Q_=1.2,tx=3;let Df=new ex(tx);function jV(t,e){let n;typeof e=="string"?n=new Set(Array.from(e)):n=new Set(e);const r=Df.get(t);if(!r)return n;for(const i in r.mapping)n.has(i)&&n.delete(i);return n}function GV(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function Y_(t,e,n,r){t.font="".concat(r," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}function HV(t){at.assert(Number.isFinite(t)&&t>=tx,"Invalid cache limit"),Df=new ex(t)}class WV{constructor(){L(this,"props",{...xa}),L(this,"_key",void 0),L(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:e,buffer:n}=this.props;return(e*Q_+n*2)/e}setProps(e={}){Object.assign(this.props,e),this._key=this._getKey();const n=jV(this._key,this.props.characterSet),r=Df.get(this._key);if(r&&n.size===0){this._atlas!==r&&(this._atlas=r);return}const i=this._generateFontAtlas(n,r);this._atlas=i,Df.set(this._key,i)}_generateFontAtlas(e,n){const{fontFamily:r,fontWeight:i,fontSize:s,buffer:o,sdf:c,radius:h,cutoff:p}=this.props;let _=n&&n.data;_||(_=document.createElement("canvas"),_.width=H_);const y=_.getContext("2d",{willReadFrequently:!0});Y_(y,r,s,i);const{mapping:w,canvasHeight:T,xOffset:S,yOffset:k}=DV({getFontWidth:U=>y.measureText(U).width,fontHeight:s*Q_,buffer:o,characterSet:e,maxCanvasWidth:H_,...n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset}});if(_.height!==T){const U=y.getImageData(0,0,_.width,_.height);_.height=T,y.putImageData(U,0,0)}if(Y_(y,r,s,i),c){const U=new kV({fontSize:s,buffer:o,radius:h,cutoff:p,fontFamily:r,fontWeight:"".concat(i)});for(const x of e){const{data:C,width:P,height:B,glyphTop:z}=U.draw(x);w[x].width=P,w[x].layoutOffsetY=s*W_-z;const H=y.createImageData(P,B);GV(C,H),y.putImageData(H,w[x].x,w[x].y)}}else for(const U of e)y.fillText(U,w[U].x,w[U].y+o+s*W_);return{xOffset:S,yOffset:k,mapping:w,data:_,width:_.width,height:_.height}}_getKey(){const{fontFamily:e,fontWeight:n,fontSize:r,buffer:i,sdf:s,radius:o,cutoff:c}=this.props;return s?"".concat(e," ").concat(n," ").concat(r," ").concat(i," ").concat(o," ").concat(c):"".concat(e," ").concat(n," ").concat(r," ").concat(i)}}const QV=`#define SHADER_NAME text-background-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec4 instanceRects;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec2 instancePixelOffsets;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform bool billboard;
uniform float opacity;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform vec4 padding;
uniform int sizeUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = radians(angle);
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;
  vLineWidth = instanceLineWidths;
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
    sizeMinPixels, sizeMaxPixels
  );

  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;

  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
  pixelOffset += instancePixelOffsets;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,YV=`#define SHADER_NAME text-background-layer-fragment-shader

precision highp float;

uniform bool stroked;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

void main(void) {
  geometry.uv = uv;

  vec2 pixelPosition = uv * dimensions;
  if (stroked) {
    float distToEdge = min(
      min(pixelPosition.x, dimensions.x - pixelPosition.x),
      min(pixelPosition.y, dimensions.y - pixelPosition.y)
    );
    float isBorder = smoothedge(distToEdge, vLineWidth);
    gl_FragColor = mix(vFillColor, vLineColor, isBorder);
  } else {
    gl_FragColor = vFillColor;
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,$V={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class Xm extends hi{constructor(...e){super(...e),L(this,"state",void 0)}getShaders(){return super.getShaders({vs:QV,fs:YV,modules:[tA,nA]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:n}=e;if(n.extensionsChanged){var r;const{gl:i}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(i),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{billboard:n,sizeScale:r,sizeUnits:i,sizeMinPixels:s,sizeMaxPixels:o,getLineWidth:c}=this.props;let{padding:h}=this.props;h.length<4&&(h=[h[0],h[1],h[0],h[1]]),this.state.model.setUniforms(e).setUniforms({billboard:n,stroked:!!c,padding:h,sizeUnits:Ra[i],sizeScale:r,sizeMinPixels:s,sizeMaxPixels:o}).draw()}_getModel(e){const n=[0,0,1,0,1,1,0,1];return new vo(e,{...this.getShaders(),id:this.props.id,geometry:new Ja({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(n)}}}),isInstanced:!0})}}L(Xm,"defaultProps",$V);L(Xm,"layerName","TextBackgroundLayer");const $_={start:1,middle:0,end:-1},X_={top:1,center:0,bottom:-1},ud=[0,0,0,255],XV=1,ZV={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:ud},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:xa.characterSet},fontFamily:xa.fontFamily,fontWeight:xa.fontWeight,lineHeight:XV,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:ud},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:ud},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class Zm extends Tm{constructor(...e){super(...e),L(this,"state",void 0),L(this,"getBoundingRect",(n,r)=>{let{size:[i,s]}=this.transformParagraph(n,r);const{fontSize:o}=this.state.fontAtlasManager.props;i/=o,s/=o;const{getTextAnchor:c,getAlignmentBaseline:h}=this.props,p=$_[typeof c=="function"?c(n,r):c],_=X_[typeof h=="function"?h(n,r):h];return[(p-1)*i/2,(_-1)*s/2,i,s]}),L(this,"getIconOffsets",(n,r)=>{const{getTextAnchor:i,getAlignmentBaseline:s}=this.props,{x:o,y:c,rowWidth:h,size:[p,_]}=this.transformParagraph(n,r),y=$_[typeof i=="function"?i(n,r):i],w=X_[typeof s=="function"?s(n,r):s],T=o.length,S=new Array(T*2);let k=0;for(let U=0;U<T;U++){const x=(1-y)*(p-h[U])/2;S[k++]=(y-1)*p/2+x+o[U],S[k++]=(w-1)*_/2+c[U]}return S})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new WV},this.props.maxWidth>0&&at.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(e){const{props:n,oldProps:r,changeFlags:i}=e;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||n.lineHeight!==r.lineHeight||n.wordBreak!==r.wordBreak||n.maxWidth!==r.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:n,fontWeight:r}=this.props,{fontAtlasManager:i,characterSet:s}=this.state,o={...e,characterSet:s,fontFamily:n,fontWeight:r};if(!i.mapping)return i.setProps(o),!0;for(const c in o)if(o[c]!==i.props[c])return i.setProps(o),!0;return!1}_updateText(){var e;const{data:n,characterSet:r}=this.props,i=(e=n.attributes)===null||e===void 0?void 0:e.getText;let{getText:s}=this.props,o=n.startIndices,c;const h=r==="auto"&&new Set;if(i&&o){const{texts:p,characterCount:_}=zV({...ArrayBuffer.isView(i)?{value:i}:i,length:n.length,startIndices:o,characterSet:h});c=_,s=(y,{index:w})=>p[w]}else{const{iterable:p,objectInfo:_}=ym(n);o=[0],c=0;for(const y of p){_.index++;const w=Array.from(s(y,_)||"");h&&w.forEach(h.add,h),c+=w.length,o.push(c)}}this.setState({getText:s,startIndices:o,numInstances:c,characterSet:h||r})}transformParagraph(e,n){const{fontAtlasManager:r}=this.state,i=r.mapping,s=this.state.getText,{wordBreak:o,lineHeight:c,maxWidth:h}=this.props,p=s(e,n)||"";return UV(p,c,o,h*r.props.fontSize,i)}renderLayers(){const{startIndices:e,numInstances:n,getText:r,fontAtlasManager:{scale:i,texture:s,mapping:o},styleVersion:c}=this.state,{data:h,_dataDiff:p,getPosition:_,getColor:y,getSize:w,getAngle:T,getPixelOffset:S,getBackgroundColor:k,getBorderColor:U,getBorderWidth:x,backgroundPadding:C,background:P,billboard:B,fontSettings:z,outlineWidth:H,outlineColor:X,sizeScale:Q,sizeUnits:te,sizeMinPixels:ie,sizeMaxPixels:ne,transitions:fe,updateTriggers:ce}=this.props,xe=this.getSubLayerClass("characters",$m),Pe=this.getSubLayerClass("background",Xm);return[P&&new Pe({getFillColor:k,getLineColor:U,getLineWidth:x,padding:C,getPosition:_,getSize:w,getAngle:T,getPixelOffset:S,billboard:B,sizeScale:Q,sizeUnits:te,sizeMinPixels:ie,sizeMaxPixels:ne,transitions:fe&&{getPosition:fe.getPosition,getAngle:fe.getAngle,getSize:fe.getSize,getFillColor:fe.getBackgroundColor,getLineColor:fe.getBorderColor,getLineWidth:fe.getBorderWidth,getPixelOffset:fe.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:ce.getPosition,getAngle:ce.getAngle,getSize:ce.getSize,getFillColor:ce.getBackgroundColor,getLineColor:ce.getBorderColor,getLineWidth:ce.getBorderWidth,getPixelOffset:ce.getPixelOffset,getBoundingRect:{getText:ce.getText,getTextAnchor:ce.getTextAnchor,getAlignmentBaseline:ce.getAlignmentBaseline,styleVersion:c}}}),{data:h.attributes&&h.attributes.background?{length:h.length,attributes:h.attributes.background}:h,_dataDiff:p,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new xe({sdf:z.sdf,smoothing:Number.isFinite(z.smoothing)?z.smoothing:xa.smoothing,outlineWidth:H/(z.radius||xa.radius),outlineColor:X,iconAtlas:s,iconMapping:o,getPosition:_,getColor:y,getSize:w,getAngle:T,getPixelOffset:S,billboard:B,sizeScale:Q*i,sizeUnits:te,sizeMinPixels:ie*i,sizeMaxPixels:ne*i,transitions:fe&&{getPosition:fe.getPosition,getAngle:fe.getAngle,getColor:fe.getColor,getSize:fe.getSize,getPixelOffset:fe.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:ce.getText,getPosition:ce.getPosition,getAngle:ce.getAngle,getColor:ce.getColor,getSize:ce.getSize,getPixelOffset:ce.getPixelOffset,getIconOffsets:{getTextAnchor:ce.getTextAnchor,getAlignmentBaseline:ce.getAlignmentBaseline,styleVersion:c}}}),{data:h,_dataDiff:p,startIndices:e,numInstances:n,getIconOffsets:this.getIconOffsets,getIcon:r})]}static set fontAtlasCacheLimit(e){HV(e)}}L(Zm,"defaultProps",ZV);L(Zm,"layerName","TextLayer");var $a;(function(t){t.LOCATION="location",t.FLOW="flow"})($a||($a={}));const KV=["filter","locationsEnabled","locationTotalsEnabled","locationLabelsEnabled","adaptiveScalesEnabled","animationEnabled","clusteringEnabled","clusteringLevel","fadeEnabled","fadeOpacityEnabled","clusteringAuto","darkMode","fadeAmount","colorScheme","highlightColor","maxTopFlowsDisplayNum"];var ca;(function(t){t.LOCATION="location",t.FLOW="flow"})(ca||(ca={}));class Xt extends Tm{constructor(e){super({...e,onHover:(n,r)=>{const i=Date.now();this.setState({highlightedObject:this._getHighlightedObject(n),lastHoverTime:i});const{onHover:s}=e;s&&this._getFlowmapLayerPickingInfo(n).then(o=>{var c;(((c=this.state)==null?void 0:c.lastHoverTime)??0)<=i&&(this.setState({pickingInfo:o}),s(o,r))})},onClick:(n,r)=>{const{onClick:i}=e,s=Date.now();this.setState({lastClickTime:s}),i&&this._getFlowmapLayerPickingInfo(n).then(o=>{var c;(((c=this.state)==null?void 0:c.lastClickTime)??0)<=s&&(this.setState({pickingInfo:o}),o&&i(o,r))})}})}initializeState(){this.state={accessors:new jg(this.props),dataProvider:this._getOrMakeDataProvider(),layersData:void 0,highlightedObject:void 0,pickingInfo:void 0,lastHoverTime:void 0,lastClickTime:void 0}}getPickingInfo({info:e}){var n,r;if(!e.object){const i=(r=(n=this.state)==null?void 0:n.pickingInfo)==null?void 0:r.object;if(i)return{...e,object:i,picked:!0}}return e}_getOrMakeDataProvider(){const{data:e,dataProvider:n}=this.props;if(KU(n))return n;if(ZU(e)){const r=new qU(this.props);return r.setFlowmapData(e),r}throw new Error("FlowmapLayer: data must be a FlowmapDataProvider or FlowmapData")}_updateDataProvider(){this.setState({dataProvider:this._getOrMakeDataProvider()})}shouldUpdateState(e){const{changeFlags:n}=e;return n.viewportChanged?!0:super.shouldUpdateState(e)}updateState({oldProps:e,props:n,changeFlags:r}){if(r.propsChanged,r.dataChanged&&this._updateDataProvider(),(r.viewportChanged||r.dataChanged)&&this.setState({highlightedObject:void 0}),r.viewportChanged||r.dataChanged||r.propsChanged&&KV.some(i=>e[i]!==n[i])){const{dataProvider:i}=this.state||{};i&&(i.setFlowmapState(this._getFlowmapState()),i.updateLayersData(s=>{this.setState({layersData:s,highlightedObject:void 0})},r))}}_getSettingsState(){const{locationsEnabled:e,locationTotalsEnabled:n,locationLabelsEnabled:r,adaptiveScalesEnabled:i,animationEnabled:s,clusteringEnabled:o,clusteringLevel:c,fadeEnabled:h,fadeOpacityEnabled:p,clusteringAuto:_,darkMode:y,fadeAmount:w,colorScheme:T,highlightColor:S,maxTopFlowsDisplayNum:k}=this.props;return{locationsEnabled:e,locationTotalsEnabled:n,locationLabelsEnabled:r,adaptiveScalesEnabled:i,animationEnabled:s,clusteringEnabled:o,clusteringLevel:c,fadeEnabled:h,fadeOpacityEnabled:p,clusteringAuto:_,darkMode:y,fadeAmount:w,colorScheme:T,highlightColor:S,maxTopFlowsDisplayNum:k}}_getFlowmapState(){return{viewport:qV(this.context.viewport),filter:this.props.filter,settings:this._getSettingsState()}}async _getFlowmapLayerPickingInfo(e){var c;const{index:n,sourceLayer:r}=e,{dataProvider:i,accessors:s}=this.state||{};if(!i||!s)return;const o={...e,picked:e.picked,layer:e.layer,index:e.index,x:e.x,y:e.y,coordinate:e.coordinate,event:e.event};if(r instanceof ua||r instanceof Rc){const h=n===-1?void 0:await i.getFlowByIndex(n);if(h){const p=await i.getLocationById(s.getFlowOriginId(h)),_=await i.getLocationById(s.getFlowDestId(h));if(p&&_)return{...o,object:{type:$a.FLOW,flow:h,origin:p,dest:_,count:s.getFlowMagnitude(h)}}}}else if(r instanceof gl){const h=n===-1?void 0:await i.getLocationByIndex(n);if(h){const p=s.getLocationId(h),_=s.getLocationName(h),y=await i.getTotalsForLocation(p),{circleAttributes:w}=((c=this.state)==null?void 0:c.layersData)||{};if(y&&w){const T=rd(w,e.index);return{...o,object:{type:$a.LOCATION,location:h,id:p,name:_,totals:y,circleRadius:T}}}}}}_getHighlightedObject(e){var i,s;const{index:n,sourceLayer:r}=e;if(!(n<0)){if(r instanceof ua||r instanceof Rc){const{lineAttributes:o}=((i=this.state)==null?void 0:i.layersData)||{};if(o){let c=DU(o,n);return this.props.fadeOpacityEnabled&&(c={...c,attributes:{...c.attributes,getColor:{...c.attributes.getColor,value:new Uint8Array([...c.attributes.getColor.value.slice(0,3),255])}}}),{type:ca.FLOW,lineAttributes:c}}}else if(r instanceof gl){const{circleAttributes:o}=((s=this.state)==null?void 0:s.layersData)||{};if(o)return{type:ca.LOCATION,coords:p_(o,n),radius:rd(o,n)}}}}renderLayers(){var n;const e=[];if((n=this.state)!=null&&n.layersData){const{layersData:r,highlightedObject:i}=this.state,{circleAttributes:s,lineAttributes:o,locationLabels:c}=r||{};if(s&&o){const h=MN(this._getSettingsState()),p=li(h.outlineColor||(this.props.darkMode?"#000":"#fff")),_={data:o,parameters:{...this.props.parameters,depthTest:!1}};if(this.props.animationEnabled?e.push(new Rc({...this.getSubLayerProps({..._,id:"animated-flow-lines",drawOutline:!1,thicknessUnit:20})})):e.push(new ua({...this.getSubLayerProps({..._,id:"flow-lines",drawOutline:!0,outlineColor:p})})),e.push(new gl(this.getSubLayerProps({id:"circles",data:s,emptyColor:this.props.darkMode?[0,0,0,255]:[255,255,255,255],outlineEmptyMix:.4}))),i)switch(i.type){case ca.LOCATION:e.push(new Ym({...this.getSubLayerProps({id:"location-highlight",data:[i],pickable:!1,antialiasing:!0,stroked:!0,filled:!1,lineWidthUnits:"pixels",getLineWidth:2,radiusUnits:"pixels",getRadius:y=>y.radius,getLineColor:li(this.props.highlightColor),getPosition:y=>y.coords})}));break;case ca.FLOW:e.push(new ua({...this.getSubLayerProps({id:"flow-highlight",data:i.lineAttributes,drawOutline:!0,pickable:!1,outlineColor:li(this.props.highlightColor),outlineThickness:1,parameters:{depthTest:!1}})}));break}}c&&e.push(new Zm(this.getSubLayerProps({id:"location-labels",data:c,maxWidth:1e3,pickable:!1,fontFamily:"Helvetica",getPixelOffset:(h,{index:p})=>[0,rd(s,p)+5],getPosition:(h,{index:p})=>p_(s,p),getText:h=>h,getSize:10,getColor:[255,255,255,255],getAngle:0,getTextAnchor:"middle",getAlignmentBaseline:"top"})))}return e}}Xt.defaultProps={darkMode:!0,fadeAmount:50,locationsEnabled:!0,locationTotalsEnabled:!0,locationLabelsEnabled:!1,animationEnabled:!1,clusteringEnabled:!0,fadeEnabled:!0,fadeOpacityEnabled:!1,clusteringAuto:!0,clusteringLevel:void 0,adaptiveScalesEnabled:!0,colorScheme:"Teal",highlightColor:"orange",maxTopFlowsDisplayNum:5e3};function qV(t){const{width:e,height:n,longitude:r,latitude:i,zoom:s,pitch:o,bearing:c}=t;return{width:e,height:n,longitude:r,latitude:i,zoom:s,pitch:o,bearing:c}}const tn={darkMode:!0,colorScheme:"Teal",highlightColor:"#ff9b29",opacity:1,fadeEnabled:Xt.defaultProps.fadeEnabled,fadeOpacityEnabled:Xt.defaultProps.fadeOpacityEnabled,fadeAmount:Xt.defaultProps.fadeAmount,clusteringEnabled:Xt.defaultProps.clusteringEnabled,clusteringAuto:Xt.defaultProps.clusteringAuto,clusteringLevel:5,clusteringMethod:"HCA",animationEnabled:Xt.defaultProps.animationEnabled,adaptiveScalesEnabled:Xt.defaultProps.adaptiveScalesEnabled,locationsEnabled:Xt.defaultProps.locationsEnabled,locationTotalsEnabled:Xt.defaultProps.locationTotalsEnabled,locationLabelsEnabled:Xt.defaultProps.locationLabelsEnabled,maxTopFlowsDisplayNum:Xt.defaultProps.maxTopFlowsDisplayNum},JV=t=>{t.add(tn,"darkMode"),t.add(tn,"colorScheme",Object.keys(m4)),t.addColor(tn,"highlightColor"),t.add(tn,"animationEnabled"),t.add(tn,"adaptiveScalesEnabled"),t.add(tn,"locationsEnabled"),t.add(tn,"locationTotalsEnabled"),t.add(tn,"locationLabelsEnabled"),t.add(tn,"maxTopFlowsDisplayNum").min(0).max(1e4).step(10).enable(Xt.defaultProps.maxTopFlowsDisplayNum),t.add(tn,"opacity",0,1);const e=t.addFolder("Fade"),n=e.add(tn,"fadeEnabled"),r=e.add(tn,"fadeOpacityEnabled").enable(Xt.defaultProps.fadeEnabled),i=e.add(tn,"fadeAmount").min(0).max(100).enable(Xt.defaultProps.fadeEnabled);n.onChange(_=>{i.enable(_),r.enable(_)});const s=t.addFolder("Clustering"),o=s.add(tn,"clusteringEnabled"),c=s.add(tn,"clusteringMethod",["HCA","H3"]).enable(Xt.defaultProps.clusteringEnabled),h=s.add(tn,"clusteringAuto"),p=s.add(tn,"clusteringLevel").min(0).max(20).step(1).enable(!Xt.defaultProps.clusteringAuto);o.onChange(_=>{h.enable(_),c.enable(_),p.enable(_&&!o.object.clusteringAuto)}),h.enable(Xt.defaultProps.clusteringEnabled).onChange(_=>{p.enable(!_)})},ej="modulepreload",tj=function(t){return"/"+t},Z_={},nj=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(h=>{if(h=tj(h),h in Z_)return;Z_[h]=!0;const p=h.endsWith(".css"),_=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${_}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":ej,p||(y.as="script"),y.crossOrigin="",y.href=h,c&&y.setAttribute("nonce",c),document.head.appendChild(y),p)return new Promise((w,T)=>{y.addEventListener("load",w),y.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})},rj=pe.createContext(null);function ij(t,e){const n=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0,i=Array.isArray(e)?e[0]:e?e.x:0,s=Array.isArray(e)?e[1]:e?e.y:0;return n===i&&r===s}function bi(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!bi(t[n],e[n]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n)if(!e.hasOwnProperty(i)||!bi(t[i],e[i]))return!1;return!0}return!1}function sj(t){const e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}function K_(t,e){if(!t.getProjection)return;const n=t.getProjection(),r=e.getProjection();bi(n,r)||e.setProjection(n)}function q_(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function J_(t,e){const n=e.viewState||e;let r=!1;if("longitude"in n&&"latitude"in n){const i=t.center;t.center=new i.constructor(n.longitude,n.latitude),r=r||i!==t.center}if("zoom"in n){const i=t.zoom;t.zoom=n.zoom,r=r||i!==t.zoom}if("bearing"in n){const i=t.bearing;t.bearing=n.bearing,r=r||i!==t.bearing}if("pitch"in n){const i=t.pitch;t.pitch=n.pitch,r=r||i!==t.pitch}return n.padding&&!t.isPaddingEqual(n.padding)&&(r=!0,t.padding=n.padding),r}const oj=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ew(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const e={};for(const r of t.layers)e[r.id]=r;const n=t.layers.map(r=>{let i=null;"interactive"in r&&(i=Object.assign({},r),delete i.interactive);const s=e[r.ref];if(s){i=i||Object.assign({},r),delete i.ref;for(const o of oj)o in s&&(i[o]=s[o])}return i||r});return{...t,layers:n}}var tw={};const nw={version:8,sources:{},layers:[]},rw={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},cd={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},iw={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},aj=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],Aj=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Xa{constructor(e,n,r){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=i=>{const s=this.props[iw[i.type]];s?s(i):i.type==="error"&&console.error(i.error)},this._onPointerEvent=i=>{(i.type==="mousemove"||i.type==="mouseout")&&this._updateHover(i);const s=this.props[rw[i.type]];s&&(this.props.interactiveLayerIds&&i.type!=="mouseover"&&i.type!=="mouseout"&&(i.features=this._hoveredFeatures||this._queryRenderedFeatures(i.point)),s(i),delete i.features)},this._onCameraEvent=i=>{if(!this._internalUpdate){const s=this.props[cd[i.type]];s&&s(i)}i.type in this._deferredEvents&&(this._deferredEvents[i.type]=!1)},this._MapClass=e,this.props=n,this._initialize(r)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const n=this.props;this.props=e;const r=this._updateSettings(e,n);r&&this._createShadowTransform(this._map);const i=this._updateSize(e),s=this._updateViewState(e,!0);this._updateStyle(e,n),this._updateStyleComponents(e,n),this._updateHandlers(e,n),(r||i||s&&!this._map.isMoving())&&this.redraw()}static reuse(e,n){const r=Xa.savedMaps.pop();if(!r)return null;const i=r.map,s=i.getContainer();for(n.className=s.className;s.childNodes.length>0;)n.appendChild(s.childNodes[0]);i._container=n;const o=i._resizeObserver;o&&(o.disconnect(),o.observe(n)),r.setProps({...e,styleDiffing:!1}),i.resize();const{initialViewState:c}=e;return c&&(c.bounds?i.fitBounds(c.bounds,{...c.fitBoundsOptions,duration:0}):r._updateViewState(c,!1)),i.isStyleLoaded()?i.fire("load"):i.once("styledata",()=>i.fire("load")),i._update(),r}_initialize(e){const{props:n}=this,{mapStyle:r=nw}=n,i={...n,...n.initialViewState,accessToken:n.mapboxAccessToken||lj()||null,container:e,style:ew(r)},s=i.initialViewState||i.viewState||i;if(Object.assign(i,{center:[s.longitude||0,s.latitude||0],zoom:s.zoom||0,pitch:s.pitch||0,bearing:s.bearing||0}),n.gl){const _=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=_,n.gl)}const o=new this._MapClass(i);s.padding&&o.setPadding(s.padding),n.cursor&&(o.getCanvas().style.cursor=n.cursor),this._createShadowTransform(o);const c=o._render;o._render=_=>{this._inRender=!0,c.call(o,_),this._inRender=!1};const h=o._renderTaskQueue.run;o._renderTaskQueue.run=_=>{h.call(o._renderTaskQueue,_),this._onBeforeRepaint()},o.on("render",()=>this._onAfterRepaint());const p=o.fire;o.fire=this._fireEvent.bind(this,p),o.on("resize",()=>{this._renderTransform.resize(o.transform.width,o.transform.height)}),o.on("styledata",()=>{this._updateStyleComponents(this.props,{}),K_(o.transform,this._renderTransform)}),o.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const _ in rw)o.on(_,this._onPointerEvent);for(const _ in cd)o.on(_,this._onCameraEvent);for(const _ in iw)o.on(_,this._onEvent);this._map=o}recycle(){const n=this.map.getContainer().querySelector("[mapboxgl-children]");n==null||n.remove(),Xa.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const n=sj(e.transform);e.painter.transform=n,this._renderTransform=n}_updateSize(e){const{viewState:n}=e;if(n){const r=this._map;if(n.width!==r.transform.width||n.height!==r.transform.height)return r.resize(),!0}return!1}_updateViewState(e,n){if(this._internalUpdate)return!1;const r=this._map,i=this._renderTransform,{zoom:s,pitch:o,bearing:c}=i,h=r.isMoving();h&&(i.cameraElevationReference="sea");const p=J_(i,{...q_(r.transform),...e});if(h&&(i.cameraElevationReference="ground"),p&&n){const _=this._deferredEvents;_.move=!0,_.zoom||(_.zoom=s!==i.zoom),_.rotate||(_.rotate=c!==i.bearing),_.pitch||(_.pitch=o!==i.pitch)}return h||J_(r.transform,e),p}_updateSettings(e,n){const r=this._map;let i=!1;for(const s of aj)if(s in e&&!bi(e[s],n[s])){i=!0;const o=r[`set${s[0].toUpperCase()}${s.slice(1)}`];o==null||o.call(r,e[s])}return i}_updateStyle(e,n){if(e.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==n.mapStyle){const{mapStyle:r=nw,styleDiffing:i=!0}=e,s={diff:i};return"localIdeographFontFamily"in e&&(s.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(ew(r),s),!0}return!1}_updateStyleComponents(e,n){const r=this._map;let i=!1;return r.isStyleLoaded()&&("light"in e&&r.setLight&&!bi(e.light,n.light)&&(i=!0,r.setLight(e.light)),"fog"in e&&r.setFog&&!bi(e.fog,n.fog)&&(i=!0,r.setFog(e.fog)),"terrain"in e&&r.setTerrain&&!bi(e.terrain,n.terrain)&&(!e.terrain||r.getSource(e.terrain.source))&&(i=!0,r.setTerrain(e.terrain))),i}_updateHandlers(e,n){var r,i;const s=this._map;let o=!1;for(const c of Aj){const h=(r=e[c])!==null&&r!==void 0?r:!0,p=(i=n[c])!==null&&i!==void 0?i:!0;bi(h,p)||(o=!0,h?s[c].enable(h):s[c].disable())}return o}_queryRenderedFeatures(e){const n=this._map,r=n.transform,{interactiveLayerIds:i=[]}=this.props;try{return n.transform=this._renderTransform,n.queryRenderedFeatures(e,{layers:i.filter(n.getLayer.bind(n))})}catch{return[]}finally{n.transform=r}}_updateHover(e){var n;const{props:r}=this;if(r.interactiveLayerIds&&(r.onMouseMove||r.onMouseEnter||r.onMouseLeave)){const s=e.type,o=((n=this._hoveredFeatures)===null||n===void 0?void 0:n.length)>0,c=this._queryRenderedFeatures(e.point),h=c.length>0;!h&&o&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=c,h&&!o&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=s}else this._hoveredFeatures=null}_fireEvent(e,n,r){const i=this._map,s=i.transform,o=typeof n=="string"?n:n.type;return o==="move"&&this._updateViewState(this.props,!1),o in cd&&(typeof n=="object"&&(n.viewState=q_(s)),this._map.isMoving())?(i.transform=this._renderTransform,e.call(i,n,r),i.transform=s,i):(e.call(i,n,r),i)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const r in this._deferredEvents)this._deferredEvents[r]&&e.fire(r);this._internalUpdate=!1;const n=this._map.transform;e.transform=this._renderTransform,this._onAfterRepaint=()=>{K_(this._renderTransform,n),e.transform=n}}}Xa.savedMaps=[];function lj(){let t=null;if(typeof location<"u"){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||tw.MapboxAccessToken}catch{}try{t=t||tw.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return t}const uj=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function cj(t){if(!t)return null;const e=t.map,n={getMap:()=>e,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:r=>{const i=e.transform;e.transform=t.transform;const s=e.project(r);return e.transform=i,s},unproject:r=>{const i=e.transform;e.transform=t.transform;const s=e.unproject(r);return e.transform=i,s},queryTerrainElevation:(r,i)=>{const s=e.transform;e.transform=t.transform;const o=e.queryTerrainElevation(r,i);return e.transform=s,o},queryRenderedFeatures:(r,i)=>{const s=e.transform;e.transform=t.transform;const o=e.queryRenderedFeatures(r,i);return e.transform=s,o}};for(const r of fj(e))!(r in n)&&!uj.includes(r)&&(n[r]=e[r].bind(e));return n}function fj(t){const e=new Set;let n=t;for(;n;){for(const r of Object.getOwnPropertyNames(n))r[0]!=="_"&&typeof t[r]=="function"&&r!=="fire"&&r!=="setEventedParent"&&e.add(r);n=Object.getPrototypeOf(n)}return Array.from(e)}const hj=typeof document<"u"?pe.useLayoutEffect:pe.useEffect,dj=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function gj(t,e){for(const r of dj)r in e&&(t[r]=e[r]);const{RTLTextPlugin:n="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=e;n&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"&&t.setRTLTextPlugin(n,r=>{r&&console.error(r)},!1)}const g0=pe.createContext(null);function pj(t,e,n){const r=pe.useContext(rj),[i,s]=pe.useState(null),o=pe.useRef(),{current:c}=pe.useRef({mapLib:null,map:null});pe.useEffect(()=>{const _=t.mapLib;let y=!0,w;return Promise.resolve(_||n).then(T=>{if(!y)return;if(!T)throw new Error("Invalid mapLib");const S="Map"in T?T:T.default;if(!S.Map)throw new Error("Invalid mapLib");if(gj(S,t),!S.supported||S.supported(t))t.reuseMaps&&(w=Xa.reuse(t,o.current)),w||(w=new Xa(S.Map,t,o.current)),c.map=cj(w),c.mapLib=S,s(w),r==null||r.onMapMount(c.map,t.id);else throw new Error("Map is not supported by this browser")}).catch(T=>{const{onError:S}=t;S?S({type:"error",target:null,originalEvent:null,error:T}):console.error(T)}),()=>{y=!1,w&&(r==null||r.onMapUnmount(t.id),t.reuseMaps?w.recycle():w.destroy())}},[]),hj(()=>{i&&i.setProps(t)}),pe.useImperativeHandle(e,()=>c.map,[i]);const h=pe.useMemo(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]),p={height:"100%"};return pe.createElement("div",{id:t.id,ref:o,style:h},i&&pe.createElement(g0.Provider,{value:c},pe.createElement("div",{"mapboxgl-children":"",style:p},t.children)))}const mj=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function bo(t,e){if(!t||!e)return;const n=t.style;for(const r in e){const i=e[r];Number.isFinite(i)&&!mj.test(r)?n[r]=`${i}px`:n[r]=i}}function vj(t,e){const{map:n,mapLib:r}=pe.useContext(g0),i=pe.useRef({props:t});i.current.props=t;const s=pe.useMemo(()=>{let k=!1;pe.Children.forEach(t.children,C=>{C&&(k=!0)});const U={...t,element:k?document.createElement("div"):null},x=new r.Marker(U);return x.setLngLat([t.longitude,t.latitude]),x.getElement().addEventListener("click",C=>{var P,B;(B=(P=i.current.props).onClick)===null||B===void 0||B.call(P,{type:"click",target:x,originalEvent:C})}),x.on("dragstart",C=>{var P,B;const z=C;z.lngLat=s.getLngLat(),(B=(P=i.current.props).onDragStart)===null||B===void 0||B.call(P,z)}),x.on("drag",C=>{var P,B;const z=C;z.lngLat=s.getLngLat(),(B=(P=i.current.props).onDrag)===null||B===void 0||B.call(P,z)}),x.on("dragend",C=>{var P,B;const z=C;z.lngLat=s.getLngLat(),(B=(P=i.current.props).onDragEnd)===null||B===void 0||B.call(P,z)}),x},[]);pe.useEffect(()=>(s.addTo(n.getMap()),()=>{s.remove()}),[]);const{longitude:o,latitude:c,offset:h,style:p,draggable:_=!1,popup:y=null,rotation:w=0,rotationAlignment:T="auto",pitchAlignment:S="auto"}=t;return pe.useEffect(()=>{bo(s.getElement(),p)},[p]),pe.useImperativeHandle(e,()=>s,[]),(s.getLngLat().lng!==o||s.getLngLat().lat!==c)&&s.setLngLat([o,c]),h&&!ij(s.getOffset(),h)&&s.setOffset(h),s.isDraggable()!==_&&s.setDraggable(_),s.getRotation()!==w&&s.setRotation(w),s.getRotationAlignment()!==T&&s.setRotationAlignment(T),s.getPitchAlignment()!==S&&s.setPitchAlignment(S),s.getPopup()!==y&&s.setPopup(y),Wp.createPortal(t.children,s.getElement())}pe.memo(pe.forwardRef(vj));function sw(t){return new Set(t?t.trim().split(/\s+/):[])}function yj(t,e){const{map:n,mapLib:r}=pe.useContext(g0),i=pe.useMemo(()=>document.createElement("div"),[]),s=pe.useRef({props:t});s.current.props=t;const o=pe.useMemo(()=>{const c={...t},h=new r.Popup(c);return h.setLngLat([t.longitude,t.latitude]),h.once("open",p=>{var _,y;(y=(_=s.current.props).onOpen)===null||y===void 0||y.call(_,p)}),h},[]);if(pe.useEffect(()=>{const c=h=>{var p,_;(_=(p=s.current.props).onClose)===null||_===void 0||_.call(p,h)};return o.on("close",c),o.setDOMContent(i).addTo(n.getMap()),()=>{o.off("close",c),o.isOpen()&&o.remove()}},[]),pe.useEffect(()=>{bo(o.getElement(),t.style)},[t.style]),pe.useImperativeHandle(e,()=>o,[]),o.isOpen()&&((o.getLngLat().lng!==t.longitude||o.getLngLat().lat!==t.latitude)&&o.setLngLat([t.longitude,t.latitude]),t.offset&&!bi(o.options.offset,t.offset)&&o.setOffset(t.offset),(o.options.anchor!==t.anchor||o.options.maxWidth!==t.maxWidth)&&(o.options.anchor=t.anchor,o.setMaxWidth(t.maxWidth)),o.options.className!==t.className)){const c=sw(o.options.className),h=sw(t.className);for(const p of c)h.has(p)||o.removeClassName(p);for(const p of h)c.has(p)||o.addClassName(p);o.options.className=t.className}return Wp.createPortal(t.children,i)}pe.memo(pe.forwardRef(yj));function hu(t,e,n,r){const i=pe.useContext(g0),s=pe.useMemo(()=>t(i),[]);return pe.useEffect(()=>{const o=e,c=null,h=typeof e=="function"?e:null,{map:p}=i;return p.hasControl(s)||(p.addControl(s,o==null?void 0:o.position),c&&c(i)),()=>{h&&h(i),p.hasControl(s)&&p.removeControl(s)}},[]),s}function _j(t){const e=hu(({mapLib:n})=>new n.AttributionControl(t),{position:t.position});return pe.useEffect(()=>{bo(e._container,t.style)},[t.style]),null}pe.memo(_j);function wj(t){const e=hu(({mapLib:n})=>new n.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return pe.useEffect(()=>{bo(e._controlContainer,t.style)},[t.style]),null}pe.memo(wj);function bj(t,e){const n=pe.useRef({props:t}),r=hu(({mapLib:i})=>{const s=new i.GeolocateControl(t),o=s._setupUI;return s._setupUI=c=>{s._container.hasChildNodes()||o(c)},s.on("geolocate",c=>{var h,p;(p=(h=n.current.props).onGeolocate)===null||p===void 0||p.call(h,c)}),s.on("error",c=>{var h,p;(p=(h=n.current.props).onError)===null||p===void 0||p.call(h,c)}),s.on("outofmaxbounds",c=>{var h,p;(p=(h=n.current.props).onOutOfMaxBounds)===null||p===void 0||p.call(h,c)}),s.on("trackuserlocationstart",c=>{var h,p;(p=(h=n.current.props).onTrackUserLocationStart)===null||p===void 0||p.call(h,c)}),s.on("trackuserlocationend",c=>{var h,p;(p=(h=n.current.props).onTrackUserLocationEnd)===null||p===void 0||p.call(h,c)}),s},{position:t.position});return n.current.props=t,pe.useImperativeHandle(e,()=>r,[]),pe.useEffect(()=>{bo(r._container,t.style)},[t.style]),null}pe.memo(pe.forwardRef(bj));function Ej(t){const e=hu(({mapLib:n})=>new n.NavigationControl(t),{position:t.position});return pe.useEffect(()=>{bo(e._container,t.style)},[t.style]),null}pe.memo(Ej);function Tj(t){const e=hu(({mapLib:s})=>new s.ScaleControl(t),{position:t.position}),n=pe.useRef(t),r=n.current;n.current=t;const{style:i}=t;return t.maxWidth!==void 0&&t.maxWidth!==r.maxWidth&&(e.options.maxWidth=t.maxWidth),t.unit!==void 0&&t.unit!==r.unit&&e.setUnit(t.unit),pe.useEffect(()=>{bo(e._container,i)},[i]),null}pe.memo(Tj);const xj=nj(()=>import("./mapbox-gl-DrZKi9WS.js").then(t=>t.m),[]),Sj=pe.forwardRef(function(e,n){return pj(e,n,xj)}),Cj="pk.eyJ1IjoiaWx5YWJvIiwiYSI6ImNqcXdrcThpbjAwODQ0M3FqbHg0OHR6aTQifQ.pg_UKPa08PeDU8mDBCnfRg",nx="mapbox://styles/mapbox/streets-v11",Mj=nx;function Lj(){const t=tV(tn,JV),[e,n]=pe.useState(),[r,i]=pe.useState(),[s,o]=pe.useState();pe.useEffect(()=>{(async()=>i(await jz(t.clusteringMethod)))()},[t.clusteringMethod]),pe.useEffect(()=>{if(!e&&(r!=null&&r.locations)){const[p,_]=[globalThis.innerWidth,globalThis.innerHeight],y=V4(r.locations,w=>[w.lon,w.lat],[p,_]);n({...y,latitude:y.latitude-.02,zoom:y.zoom+1,width:p,height:_})}},[r]);const c=({viewState:p})=>{n(p),o(void 0)},h=[];return r&&h.push(new Xt({id:"my-flowmap-layer",data:r,opacity:t.opacity,pickable:!0,darkMode:t.darkMode,colorScheme:t.colorScheme,fadeAmount:t.fadeAmount,fadeEnabled:t.fadeEnabled,fadeOpacityEnabled:t.fadeOpacityEnabled,locationsEnabled:t.locationsEnabled,locationTotalsEnabled:t.locationTotalsEnabled,locationLabelsEnabled:t.locationLabelsEnabled,animationEnabled:t.animationEnabled,clusteringEnabled:t.clusteringEnabled,clusteringAuto:t.clusteringAuto,clusteringLevel:t.clusteringLevel,adaptiveScalesEnabled:t.adaptiveScalesEnabled,highlightColor:t.highlightColor,maxTopFlowsDisplayNum:t.maxTopFlowsDisplayNum,getLocationId:p=>p.id,getLocationLat:p=>p.lat,getLocationLon:p=>p.lon,getFlowOriginId:p=>p.origin,getLocationName:p=>p.name,getFlowDestId:p=>p.dest,getFlowMagnitude:p=>p.count,onHover:p=>o(Pj(p)),onClick:p=>{var _;return console.log("clicked",(_=p.object)==null?void 0:_.type,p.object,p)}})),e?Tn.jsxs("div",{className:`flowmap-container ${t.darkMode?"dark":"light"}`,style:{position:"relative"},children:[Tn.jsx(AT,{width:"100%",height:"100%",initialViewState:e,onViewStateChange:c,controller:!0,layers:h,style:{mixBlendMode:t.darkMode?"screen":"darken"},children:Tn.jsx(Sj,{mapboxAccessToken:Cj,mapStyle:t.darkMode?Mj:nx})}),s&&Tn.jsx("div",{className:"tooltip",style:s.position,children:s.content})]}):null}function Pj(t){if(!t)return;const{x:e,y:n,object:r}=t,i={left:e,top:n};switch(r==null?void 0:r.type){case $a.LOCATION:return{position:i,content:Tn.jsxs(Tn.Fragment,{children:[Tn.jsx("div",{children:r.name}),Tn.jsxs("div",{children:["Incoming trips: ",r.totals.incomingCount]}),Tn.jsxs("div",{children:["Outgoing trips: ",r.totals.outgoingCount]}),Tn.jsxs("div",{children:["Internal or round trips: ",r.totals.internalCount]})]})};case $a.FLOW:return{position:i,content:Tn.jsxs(Tn.Fragment,{children:[Tn.jsxs("div",{children:[r.origin.id,"  ",r.dest.id]}),Tn.jsx("div",{children:r.count})]})}}}fd.createRoot(document.getElementById("root")).render(Tn.jsx($S.StrictMode,{children:Tn.jsx(Lj,{})}));export{co as c,kS as g};
