"use strict";(self.webpackChunkflowmap_gl_docs=self.webpackChunkflowmap_gl_docs||[]).push([[320],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>u});var a=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function r(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var c=a.createContext({}),s=function(e){var n=a.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},p=function(e){var n=s(e.components);return a.createElement(c.Provider,{value:n},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},g=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,i=e.originalType,c=e.parentName,p=r(e,["components","mdxType","originalType","parentName"]),d=s(t),g=o,u=d["".concat(c,".").concat(g)]||d[g]||m[g]||i;return t?a.createElement(u,l(l({ref:n},p),{},{components:t})):a.createElement(u,l({ref:n},p))}));function u(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=t.length,l=new Array(i);l[0]=g;var r={};for(var c in n)hasOwnProperty.call(n,c)&&(r[c]=n[c]);r.originalType=e,r[d]="string"==typeof e?e:o,l[1]=r;for(var s=2;s<i;s++)l[s]=t[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}g.displayName="MDXCreateElement"},1585:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>r,toc:()=>s});var a=t(7462),o=(t(7294),t(3905));const i={sidebar_position:2},l="Vanilla JavaScript",r={unversionedId:"guides/vanilla-js",id:"guides/vanilla-js",title:"Vanilla JavaScript",description:"This guide shows how to use flowmap.gl with vanilla JavaScript (no React).",source:"@site/docs/guides/vanilla-js.md",sourceDirName:"guides",slug:"/guides/vanilla-js",permalink:"/docs/guides/vanilla-js",draft:!1,editUrl:"https://github.com/visgl/flowmap.gl-docs/docs/guides/vanilla-js.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"docsSidebar",previous:{title:"React Integration",permalink:"/docs/guides/react-integration"},next:{title:"Svelte Integration",permalink:"/docs/guides/svelte"}},c={},s=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"HTML Setup",id:"html-setup",level:2},{value:"JavaScript Implementation",id:"javascript-implementation",level:2},{value:"Adding a Tooltip",id:"adding-a-tooltip",level:2},{value:"With UI Controls",id:"with-ui-controls",level:2},{value:"Using with Vite",id:"using-with-vite",level:2},{value:"Using with Webpack",id:"using-with-webpack",level:2},{value:"Complete Example Repository",id:"complete-example-repository",level:2}],p={toc:s};function d(e){let{components:n,...t}=e;return(0,o.kt)("wrapper",(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"vanilla-javascript"},"Vanilla JavaScript"),(0,o.kt)("p",null,"This guide shows how to use flowmap.gl with vanilla JavaScript (no React)."),(0,o.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("p",null,"Install the required dependencies:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm install @flowmap.gl/layers @flowmap.gl/data @deck.gl/core mapbox-gl\n")),(0,o.kt)("h2",{id:"html-setup"},"HTML Setup"),(0,o.kt)("p",null,"Create an HTML file with a canvas for deck.gl and a container for the map:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'<!DOCTYPE html>\n<html>\n<head>\n  <meta charset="utf-8" />\n  <title>Flowmap.gl</title>\n  <meta name="viewport" content="width=device-width, initial-scale=1" />\n  <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet" />\n  <style>\n    body {\n      margin: 0;\n      padding: 0;\n    }\n    #map {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n    }\n    #deck-canvas {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      mix-blend-mode: screen;\n    }\n  </style>\n</head>\n<body>\n  <div id="map"></div>\n  <canvas id="deck-canvas"></canvas>\n  <script type="module" src="./app.js"><\/script>\n</body>\n</html>\n')),(0,o.kt)("h2",{id:"javascript-implementation"},"JavaScript Implementation"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import {Deck} from '@deck.gl/core';\nimport mapboxgl from 'mapbox-gl';\nimport {FlowmapLayer} from '@flowmap.gl/layers';\nimport {getViewStateForLocations} from '@flowmap.gl/data';\n\nconst MAPBOX_TOKEN = 'your-mapbox-token';\n\n// Sample data\nconst data = {\n  locations: [\n    {id: 'NYC', name: 'New York', lat: 40.7128, lon: -74.0060},\n    {id: 'LA', name: 'Los Angeles', lat: 34.0522, lon: -118.2437},\n    {id: 'CHI', name: 'Chicago', lat: 41.8781, lon: -87.6298},\n  ],\n  flows: [\n    {origin: 'NYC', dest: 'LA', count: 1200},\n    {origin: 'NYC', dest: 'CHI', count: 850},\n    {origin: 'LA', dest: 'CHI', count: 500},\n  ],\n};\n\n// Calculate initial view state\nconst [width, height] = [window.innerWidth, window.innerHeight];\nconst INITIAL_VIEW_STATE = getViewStateForLocations(\n  data.locations,\n  (loc) => [loc.lon, loc.lat],\n  [width, height],\n  {pad: 0.3}\n);\n\n// Initialize Mapbox\nconst map = new mapboxgl.Map({\n  container: 'map',\n  accessToken: MAPBOX_TOKEN,\n  style: 'mapbox://styles/mapbox/dark-v10',\n  interactive: false,  // deck.gl will handle interaction\n  center: [INITIAL_VIEW_STATE.longitude, INITIAL_VIEW_STATE.latitude],\n  zoom: INITIAL_VIEW_STATE.zoom,\n  bearing: INITIAL_VIEW_STATE.bearing || 0,\n  pitch: INITIAL_VIEW_STATE.pitch || 0,\n});\n\n// Initialize deck.gl\nconst deck = new Deck({\n  canvas: 'deck-canvas',\n  width: '100%',\n  height: '100%',\n  initialViewState: INITIAL_VIEW_STATE,\n  controller: true,\n  onViewStateChange: ({viewState}) => {\n    // Sync Mapbox with deck.gl view state\n    map.jumpTo({\n      center: [viewState.longitude, viewState.latitude],\n      zoom: viewState.zoom,\n      bearing: viewState.bearing,\n      pitch: viewState.pitch,\n    });\n  },\n  layers: [],\n});\n\n// Create and add the FlowmapLayer\nfunction updateLayers() {\n  deck.setProps({\n    layers: [\n      new FlowmapLayer({\n        id: 'flowmap-layer',\n        data,\n        pickable: true,\n\n        // Display settings\n        darkMode: true,\n        colorScheme: 'Teal',\n        fadeAmount: 50,\n\n        // Accessors\n        getLocationId: (loc) => loc.id,\n        getLocationLat: (loc) => loc.lat,\n        getLocationLon: (loc) => loc.lon,\n        getLocationName: (loc) => loc.name,\n        getFlowOriginId: (flow) => flow.origin,\n        getFlowDestId: (flow) => flow.dest,\n        getFlowMagnitude: (flow) => flow.count,\n\n        // Event handlers\n        onHover: handleHover,\n        onClick: handleClick,\n      }),\n    ],\n  });\n}\n\nfunction handleHover(info) {\n  if (info?.object) {\n    console.log('Hovered:', info.object);\n    // Update tooltip, etc.\n  }\n}\n\nfunction handleClick(info) {\n  if (info?.object) {\n    console.log('Clicked:', info.object);\n  }\n}\n\n// Initial render\nupdateLayers();\n")),(0,o.kt)("h2",{id:"adding-a-tooltip"},"Adding a Tooltip"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'<style>\n  .tooltip {\n    position: absolute;\n    background: rgba(0, 0, 0, 0.8);\n    color: white;\n    padding: 8px 12px;\n    border-radius: 4px;\n    pointer-events: none;\n    font-family: sans-serif;\n    font-size: 14px;\n    display: none;\n  }\n</style>\n\n<div id="tooltip" class="tooltip"></div>\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"const tooltip = document.getElementById('tooltip');\n\nfunction handleHover(info) {\n  if (!info?.object) {\n    tooltip.style.display = 'none';\n    return;\n  }\n\n  tooltip.style.display = 'block';\n  tooltip.style.left = `${info.x + 10}px`;\n  tooltip.style.top = `${info.y + 10}px`;\n\n  const {object} = info;\n  if (object.type === 'location') {\n    tooltip.innerHTML = `\n      <strong>${object.name}</strong><br/>\n      Incoming: ${object.totals.incomingCount.toLocaleString()}<br/>\n      Outgoing: ${object.totals.outgoingCount.toLocaleString()}\n    `;\n  } else if (object.type === 'flow') {\n    tooltip.innerHTML = `\n      ${object.origin.name} \u2192 ${object.dest.name}<br/>\n      ${object.count.toLocaleString()}\n    `;\n  }\n}\n")),(0,o.kt)("h2",{id:"with-ui-controls"},"With UI Controls"),(0,o.kt)("p",null,"Here's a more complete example with runtime configuration:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import {Deck} from '@deck.gl/core';\nimport mapboxgl from 'mapbox-gl';\nimport {FlowmapLayer} from '@flowmap.gl/layers';\nimport {getViewStateForLocations} from '@flowmap.gl/data';\n\nconst MAPBOX_TOKEN = 'your-mapbox-token';\n\n// Configuration state\nconst config = {\n  darkMode: true,\n  colorScheme: 'Teal',\n  fadeAmount: 50,\n  animationEnabled: false,\n  clusteringEnabled: true,\n  clusteringAuto: true,\n};\n\nlet map;\nlet deck;\nlet data;\n\nasync function init() {\n  // Load data\n  data = await fetchData();\n\n  // Calculate initial view\n  const [width, height] = [window.innerWidth, window.innerHeight];\n  const initialViewState = getViewStateForLocations(\n    data.locations,\n    (loc) => [loc.lon, loc.lat],\n    [width, height],\n    {pad: 0.3}\n  );\n\n  // Initialize map\n  map = new mapboxgl.Map({\n    container: 'map',\n    accessToken: MAPBOX_TOKEN,\n    style: 'mapbox://styles/mapbox/dark-v10',\n    interactive: false,\n    center: [initialViewState.longitude, initialViewState.latitude],\n    zoom: initialViewState.zoom,\n  });\n\n  // Initialize deck.gl\n  deck = new Deck({\n    canvas: 'deck-canvas',\n    width: '100%',\n    height: '100%',\n    initialViewState,\n    controller: true,\n    onViewStateChange: ({viewState}) => {\n      map.jumpTo({\n        center: [viewState.longitude, viewState.latitude],\n        zoom: viewState.zoom,\n        bearing: viewState.bearing,\n        pitch: viewState.pitch,\n      });\n    },\n    layers: [],\n  });\n\n  updateDeck();\n  setupControls();\n}\n\nfunction updateDeck() {\n  deck.setProps({\n    layers: [\n      new FlowmapLayer({\n        id: 'flowmap-layer',\n        data,\n        pickable: true,\n        darkMode: config.darkMode,\n        colorScheme: config.colorScheme,\n        fadeAmount: config.fadeAmount,\n        animationEnabled: config.animationEnabled,\n        clusteringEnabled: config.clusteringEnabled,\n        clusteringAuto: config.clusteringAuto,\n        getLocationId: (loc) => loc.id,\n        getLocationLat: (loc) => loc.lat,\n        getLocationLon: (loc) => loc.lon,\n        getLocationName: (loc) => loc.name,\n        getFlowOriginId: (flow) => flow.origin,\n        getFlowDestId: (flow) => flow.dest,\n        getFlowMagnitude: (flow) => flow.count,\n      }),\n    ],\n  });\n}\n\nfunction setupControls() {\n  // Dark mode toggle\n  document.getElementById('darkMode').addEventListener('change', (e) => {\n    config.darkMode = e.target.checked;\n    map.setStyle(`mapbox://styles/mapbox/${config.darkMode ? 'dark' : 'light'}-v10`);\n    updateDeck();\n  });\n\n  // Animation toggle\n  document.getElementById('animation').addEventListener('change', (e) => {\n    config.animationEnabled = e.target.checked;\n    updateDeck();\n  });\n\n  // Clustering toggle\n  document.getElementById('clustering').addEventListener('change', (e) => {\n    config.clusteringEnabled = e.target.checked;\n    updateDeck();\n  });\n\n  // Color scheme select\n  document.getElementById('colorScheme').addEventListener('change', (e) => {\n    config.colorScheme = e.target.value;\n    updateDeck();\n  });\n}\n\nasync function fetchData() {\n  // Replace with your data loading logic\n  return {\n    locations: [\n      {id: 'NYC', name: 'New York', lat: 40.7128, lon: -74.0060},\n      {id: 'LA', name: 'Los Angeles', lat: 34.0522, lon: -118.2437},\n      {id: 'CHI', name: 'Chicago', lat: 41.8781, lon: -87.6298},\n    ],\n    flows: [\n      {origin: 'NYC', dest: 'LA', count: 1200},\n      {origin: 'NYC', dest: 'CHI', count: 850},\n      {origin: 'LA', dest: 'CHI', count: 500},\n    ],\n  };\n}\n\n// Start the application\ninit();\n")),(0,o.kt)("h2",{id:"using-with-vite"},"Using with Vite"),(0,o.kt)("p",null,"For modern development, use Vite:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm create vite@latest my-flowmap-app -- --template vanilla\ncd my-flowmap-app\nnpm install @flowmap.gl/layers @flowmap.gl/data @deck.gl/core mapbox-gl\n")),(0,o.kt)("p",null,"Then update ",(0,o.kt)("inlineCode",{parentName:"p"},"main.js")," with the code above."),(0,o.kt)("h2",{id:"using-with-webpack"},"Using with Webpack"),(0,o.kt)("p",null,"For Webpack projects, ensure you have the necessary loaders:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"// webpack.config.js\nmodule.exports = {\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        use: ['style-loader', 'css-loader'],\n      },\n    ],\n  },\n};\n")),(0,o.kt)("h2",{id:"complete-example-repository"},"Complete Example Repository"),(0,o.kt)("p",null,"See the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/visgl/flowmap.gl/tree/main/examples/vite-app"},"vite-app example")," for a complete working setup."))}d.isMDXComponent=!0}}]);