"use strict";(self.webpackChunkflowmap_gl_docs=self.webpackChunkflowmap_gl_docs||[]).push([[825],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>f});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},l=Object.keys(e);for(o=0;o<l.length;o++)n=l[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)n=l[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=o.createContext({}),s=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=s(e.components);return o.createElement(c.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,c=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=s(n),m=a,f=d["".concat(c,".").concat(m)]||d[m]||u[m]||l;return n?o.createElement(f,r(r({ref:t},p),{},{components:n})):o.createElement(f,r({ref:t},p))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,r=new Array(l);r[0]=m;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i[d]="string"==typeof e?e:a,r[1]=i;for(var s=2;s<l;s++)r[s]=n[s];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},678:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>d,frontMatter:()=>l,metadata:()=>i,toc:()=>s});var o=n(7462),a=(n(7294),n(3905));const l={sidebar_position:3},r="Data Format",i={unversionedId:"data-format",id:"data-format",title:"Data Format",description:"flowmap.gl visualizes movement between geographic locations. This guide explains how to structure your data.",source:"@site/docs/data-format.md",sourceDirName:".",slug:"/data-format",permalink:"/docs/data-format",draft:!1,editUrl:"https://github.com/visgl/flowmap.gl-docs/docs/data-format.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"docsSidebar",previous:{title:"Getting Started",permalink:"/docs/getting-started"},next:{title:"React Integration",permalink:"/docs/guides/react-integration"}},c={},s=[{value:"FlowmapData Structure",id:"flowmapdata-structure",level:2},{value:"Location Data",id:"location-data",level:2},{value:"Example Location Data",id:"example-location-data",level:3},{value:"Location Accessor Functions",id:"location-accessor-functions",level:3},{value:"Flow Data",id:"flow-data",level:2},{value:"Example Flow Data",id:"example-flow-data",level:3},{value:"Flow Accessor Functions",id:"flow-accessor-functions",level:3},{value:"Complete Example",id:"complete-example",level:2},{value:"Loading Data from CSV",id:"loading-data-from-csv",level:2},{value:"Loading Data from JSON",id:"loading-data-from-json",level:2},{value:"Custom Field Names",id:"custom-field-names",level:2},{value:"Pre-computed Clusters",id:"pre-computed-clusters",level:2}],p={toc:s};function d(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"data-format"},"Data Format"),(0,a.kt)("p",null,"flowmap.gl visualizes movement between geographic locations. This guide explains how to structure your data."),(0,a.kt)("h2",{id:"flowmapdata-structure"},"FlowmapData Structure"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"FlowmapLayer")," accepts data in the following structure:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"interface FlowmapData<L, F> {\n  locations: Iterable<L>;  // Array or iterable of location objects\n  flows: Iterable<F>;      // Array or iterable of flow objects\n  clusterLevels?: ClusterLevels;  // Optional pre-computed clusters\n}\n")),(0,a.kt)("h2",{id:"location-data"},"Location Data"),(0,a.kt)("p",null,"Each location represents a geographic point. At minimum, locations need:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"A unique identifier"),(0,a.kt)("li",{parentName:"ul"},"Latitude coordinate"),(0,a.kt)("li",{parentName:"ul"},"Longitude coordinate"),(0,a.kt)("li",{parentName:"ul"},"Optional: name for display")),(0,a.kt)("h3",{id:"example-location-data"},"Example Location Data"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"const locations = [\n  {id: 'NYC', name: 'New York', lat: 40.7128, lon: -74.0060},\n  {id: 'LA', name: 'Los Angeles', lat: 34.0522, lon: -118.2437},\n  {id: 'CHI', name: 'Chicago', lat: 41.8781, lon: -87.6298},\n  {id: 'HOU', name: 'Houston', lat: 29.7604, lon: -95.3698},\n];\n")),(0,a.kt)("h3",{id:"location-accessor-functions"},"Location Accessor Functions"),(0,a.kt)("p",null,"Tell flowmap.gl how to read your location data with accessor functions:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"new FlowmapLayer({\n  // ...\n  getLocationId: (loc) => loc.id,\n  getLocationLat: (loc) => loc.lat,\n  getLocationLon: (loc) => loc.lon,\n  getLocationName: (loc) => loc.name,  // Optional\n});\n")),(0,a.kt)("h2",{id:"flow-data"},"Flow Data"),(0,a.kt)("p",null,"Each flow represents movement from an origin to a destination. At minimum, flows need:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Origin location ID"),(0,a.kt)("li",{parentName:"ul"},"Destination location ID"),(0,a.kt)("li",{parentName:"ul"},"Magnitude (count/amount)")),(0,a.kt)("h3",{id:"example-flow-data"},"Example Flow Data"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"const flows = [\n  {origin: 'NYC', dest: 'LA', count: 1200},\n  {origin: 'NYC', dest: 'CHI', count: 850},\n  {origin: 'LA', dest: 'NYC', count: 900},\n  {origin: 'LA', dest: 'CHI', count: 500},\n  {origin: 'CHI', dest: 'HOU', count: 300},\n];\n")),(0,a.kt)("h3",{id:"flow-accessor-functions"},"Flow Accessor Functions"),(0,a.kt)("p",null,"Tell flowmap.gl how to read your flow data with accessor functions:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"new FlowmapLayer({\n  // ...\n  getFlowOriginId: (flow) => flow.origin,\n  getFlowDestId: (flow) => flow.dest,\n  getFlowMagnitude: (flow) => flow.count,\n});\n")),(0,a.kt)("h2",{id:"complete-example"},"Complete Example"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"import {FlowmapLayer} from '@flowmap.gl/layers';\n\nconst data = {\n  locations: [\n    {id: 'NYC', name: 'New York', lat: 40.7128, lon: -74.0060},\n    {id: 'LA', name: 'Los Angeles', lat: 34.0522, lon: -118.2437},\n    {id: 'CHI', name: 'Chicago', lat: 41.8781, lon: -87.6298},\n  ],\n  flows: [\n    {origin: 'NYC', dest: 'LA', count: 1200},\n    {origin: 'NYC', dest: 'CHI', count: 850},\n    {origin: 'LA', dest: 'CHI', count: 500},\n  ],\n};\n\nconst layer = new FlowmapLayer({\n  id: 'flowmap-layer',\n  data,\n  getLocationId: (loc) => loc.id,\n  getLocationLat: (loc) => loc.lat,\n  getLocationLon: (loc) => loc.lon,\n  getLocationName: (loc) => loc.name,\n  getFlowOriginId: (flow) => flow.origin,\n  getFlowDestId: (flow) => flow.dest,\n  getFlowMagnitude: (flow) => flow.count,\n});\n")),(0,a.kt)("h2",{id:"loading-data-from-csv"},"Loading Data from CSV"),(0,a.kt)("p",null,"A common pattern is loading data from CSV files:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"import Papa from 'papaparse';\n\n// locations.csv:\n// id,name,lat,lon\n// NYC,New York,40.7128,-74.0060\n// LA,Los Angeles,34.0522,-118.2437\n\n// flows.csv:\n// origin,dest,count\n// NYC,LA,1200\n// NYC,CHI,850\n\nasync function loadData() {\n  const [locationsResponse, flowsResponse] = await Promise.all([\n    fetch('/data/locations.csv'),\n    fetch('/data/flows.csv'),\n  ]);\n\n  const locationsText = await locationsResponse.text();\n  const flowsText = await flowsResponse.text();\n\n  const locations = Papa.parse(locationsText, {\n    header: true,\n    dynamicTyping: true,\n  }).data;\n\n  const flows = Papa.parse(flowsText, {\n    header: true,\n    dynamicTyping: true,\n  }).data;\n\n  return {locations, flows};\n}\n")),(0,a.kt)("h2",{id:"loading-data-from-json"},"Loading Data from JSON"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},'// data.json\n{\n  "locations": [\n    {"id": "NYC", "name": "New York", "lat": 40.7128, "lon": -74.0060},\n    {"id": "LA", "name": "Los Angeles", "lat": 34.0522, "lon": -118.2437}\n  ],\n  "flows": [\n    {"origin": "NYC", "dest": "LA", "count": 1200}\n  ]\n}\n\n// Loading\nconst response = await fetch(\'/data.json\');\nconst data = await response.json();\n')),(0,a.kt)("h2",{id:"custom-field-names"},"Custom Field Names"),(0,a.kt)("p",null,"Your data doesn't need to use specific field names. The accessor functions let you map any structure:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"// Data with custom field names\nconst locations = [\n  {location_code: 'NYC', display_name: 'New York', latitude: 40.7128, longitude: -74.0060},\n];\n\nconst flows = [\n  {from_location: 'NYC', to_location: 'LA', passenger_count: 1200},\n];\n\n// Map custom fields with accessors\nnew FlowmapLayer({\n  data: {locations, flows},\n  getLocationId: (loc) => loc.location_code,\n  getLocationLat: (loc) => loc.latitude,\n  getLocationLon: (loc) => loc.longitude,\n  getLocationName: (loc) => loc.display_name,\n  getFlowOriginId: (flow) => flow.from_location,\n  getFlowDestId: (flow) => flow.to_location,\n  getFlowMagnitude: (flow) => flow.passenger_count,\n});\n")),(0,a.kt)("h2",{id:"pre-computed-clusters"},"Pre-computed Clusters"),(0,a.kt)("p",null,"For large datasets, you can provide pre-computed cluster levels to improve performance. See the ",(0,a.kt)("a",{parentName:"p",href:"/docs/api/clustering"},"Clustering")," documentation for details."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"const data = {\n  locations,\n  flows,\n  clusterLevels: [\n    {\n      zoom: 4,\n      nodes: [\n        {id: 'cluster-1', lat: 40.0, lon: -90.0, children: ['NYC', 'CHI']},\n        // ...\n      ],\n    },\n    // ...\n  ],\n};\n")))}d.isMDXComponent=!0}}]);