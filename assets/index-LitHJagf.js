function CE(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const f of o.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function A_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function ME(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var Jh={exports:{}},$l={},ed={exports:{}},Dt={};var x1;function LE(){if(x1)return Dt;x1=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),f=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.iterator;function C(K){return K===null||typeof K!="object"?null:(K=T&&K[T]||K["@@iterator"],typeof K=="function"?K:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,U={};function j(K,ye,Ye){this.props=K,this.context=ye,this.refs=U,this.updater=Ye||P}j.prototype.isReactComponent={},j.prototype.setState=function(K,ye){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,ye,"setState")},j.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function G(){}G.prototype=j.prototype;function Q(K,ye,Ye){this.props=K,this.context=ye,this.refs=U,this.updater=Ye||P}var X=Q.prototype=new G;X.constructor=Q,R(X,j.prototype),X.isPureReactComponent=!0;var q=Array.isArray,ee=Object.prototype.hasOwnProperty,ie={current:null},pe={key:!0,ref:!0,__self:!0,__source:!0};function ue(K,ye,Ye){var Mt,wt={},zt=null,kt=null;if(ye!=null)for(Mt in ye.ref!==void 0&&(kt=ye.ref),ye.key!==void 0&&(zt=""+ye.key),ye)ee.call(ye,Mt)&&!pe.hasOwnProperty(Mt)&&(wt[Mt]=ye[Mt]);var gt=arguments.length-2;if(gt===1)wt.children=Ye;else if(1<gt){for(var Ct=Array(gt),Se=0;Se<gt;Se++)Ct[Se]=arguments[Se+2];wt.children=Ct}if(K&&K.defaultProps)for(Mt in gt=K.defaultProps,gt)wt[Mt]===void 0&&(wt[Mt]=gt[Mt]);return{$$typeof:n,type:K,key:zt,ref:kt,props:wt,_owner:ie.current}}function me(K,ye){return{$$typeof:n,type:K.type,key:ye,ref:K.ref,props:K.props,_owner:K._owner}}function Ce(K){return typeof K=="object"&&K!==null&&K.$$typeof===n}function ge(K){var ye={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(Ye){return ye[Ye]})}var ke=/\/+/g;function Me(K,ye){return typeof K=="object"&&K!==null&&K.key!=null?ge(""+K.key):ye.toString(36)}function ze(K,ye,Ye,Mt,wt){var zt=typeof K;(zt==="undefined"||zt==="boolean")&&(K=null);var kt=!1;if(K===null)kt=!0;else switch(zt){case"string":case"number":kt=!0;break;case"object":switch(K.$$typeof){case n:case e:kt=!0}}if(kt)return kt=K,wt=wt(kt),K=Mt===""?"."+Me(kt,0):Mt,q(wt)?(Ye="",K!=null&&(Ye=K.replace(ke,"$&/")+"/"),ze(wt,ye,Ye,"",function(Se){return Se})):wt!=null&&(Ce(wt)&&(wt=me(wt,Ye+(!wt.key||kt&&kt.key===wt.key?"":(""+wt.key).replace(ke,"$&/")+"/")+K)),ye.push(wt)),1;if(kt=0,Mt=Mt===""?".":Mt+":",q(K))for(var gt=0;gt<K.length;gt++){zt=K[gt];var Ct=Mt+Me(zt,gt);kt+=ze(zt,ye,Ye,Ct,wt)}else if(Ct=C(K),typeof Ct=="function")for(K=Ct.call(K),gt=0;!(zt=K.next()).done;)zt=zt.value,Ct=Mt+Me(zt,gt++),kt+=ze(zt,ye,Ye,Ct,wt);else if(zt==="object")throw ye=String(K),Error("Objects are not valid as a React child (found: "+(ye==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":ye)+"). If you meant to render a collection of children, use an array instead.");return kt}function We(K,ye,Ye){if(K==null)return K;var Mt=[],wt=0;return ze(K,Mt,"","",function(zt){return ye.call(Ye,zt,wt++)}),Mt}function tt(K){if(K._status===-1){var ye=K._result;ye=ye(),ye.then(function(Ye){(K._status===0||K._status===-1)&&(K._status=1,K._result=Ye)},function(Ye){(K._status===0||K._status===-1)&&(K._status=2,K._result=Ye)}),K._status===-1&&(K._status=0,K._result=ye)}if(K._status===1)return K._result.default;throw K._result}var _t={current:null},De={transition:null},Qe={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:De,ReactCurrentOwner:ie};return Dt.Children={map:We,forEach:function(K,ye,Ye){We(K,function(){ye.apply(this,arguments)},Ye)},count:function(K){var ye=0;return We(K,function(){ye++}),ye},toArray:function(K){return We(K,function(ye){return ye})||[]},only:function(K){if(!Ce(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},Dt.Component=j,Dt.Fragment=t,Dt.Profiler=i,Dt.PureComponent=Q,Dt.StrictMode=r,Dt.Suspense=m,Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qe,Dt.cloneElement=function(K,ye,Ye){if(K==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+K+".");var Mt=R({},K.props),wt=K.key,zt=K.ref,kt=K._owner;if(ye!=null){if(ye.ref!==void 0&&(zt=ye.ref,kt=ie.current),ye.key!==void 0&&(wt=""+ye.key),K.type&&K.type.defaultProps)var gt=K.type.defaultProps;for(Ct in ye)ee.call(ye,Ct)&&!pe.hasOwnProperty(Ct)&&(Mt[Ct]=ye[Ct]===void 0&&gt!==void 0?gt[Ct]:ye[Ct])}var Ct=arguments.length-2;if(Ct===1)Mt.children=Ye;else if(1<Ct){gt=Array(Ct);for(var Se=0;Se<Ct;Se++)gt[Se]=arguments[Se+2];Mt.children=gt}return{$$typeof:n,type:K.type,key:wt,ref:zt,props:Mt,_owner:kt}},Dt.createContext=function(K){return K={$$typeof:f,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},K.Provider={$$typeof:o,_context:K},K.Consumer=K},Dt.createElement=ue,Dt.createFactory=function(K){var ye=ue.bind(null,K);return ye.type=K,ye},Dt.createRef=function(){return{current:null}},Dt.forwardRef=function(K){return{$$typeof:d,render:K}},Dt.isValidElement=Ce,Dt.lazy=function(K){return{$$typeof:E,_payload:{_status:-1,_result:K},_init:tt}},Dt.memo=function(K,ye){return{$$typeof:_,type:K,compare:ye===void 0?null:ye}},Dt.startTransition=function(K){var ye=De.transition;De.transition={};try{K()}finally{De.transition=ye}},Dt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},Dt.useCallback=function(K,ye){return _t.current.useCallback(K,ye)},Dt.useContext=function(K){return _t.current.useContext(K)},Dt.useDebugValue=function(){},Dt.useDeferredValue=function(K){return _t.current.useDeferredValue(K)},Dt.useEffect=function(K,ye){return _t.current.useEffect(K,ye)},Dt.useId=function(){return _t.current.useId()},Dt.useImperativeHandle=function(K,ye,Ye){return _t.current.useImperativeHandle(K,ye,Ye)},Dt.useInsertionEffect=function(K,ye){return _t.current.useInsertionEffect(K,ye)},Dt.useLayoutEffect=function(K,ye){return _t.current.useLayoutEffect(K,ye)},Dt.useMemo=function(K,ye){return _t.current.useMemo(K,ye)},Dt.useReducer=function(K,ye,Ye){return _t.current.useReducer(K,ye,Ye)},Dt.useRef=function(K){return _t.current.useRef(K)},Dt.useState=function(K){return _t.current.useState(K)},Dt.useSyncExternalStore=function(K,ye,Ye){return _t.current.useSyncExternalStore(K,ye,Ye)},Dt.useTransition=function(){return _t.current.useTransition()},Dt.version="18.2.0",Dt}var S1;function ep(){return S1||(S1=1,ed.exports=LE()),ed.exports}var C1;function PE(){if(C1)return $l;C1=1;var n=ep(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function f(d,m,_){var E,T={},C=null,P=null;_!==void 0&&(C=""+_),m.key!==void 0&&(C=""+m.key),m.ref!==void 0&&(P=m.ref);for(E in m)r.call(m,E)&&!o.hasOwnProperty(E)&&(T[E]=m[E]);if(d&&d.defaultProps)for(E in m=d.defaultProps,m)T[E]===void 0&&(T[E]=m[E]);return{$$typeof:e,type:d,key:C,ref:P,props:T,_owner:i.current}}return $l.Fragment=t,$l.jsx=f,$l.jsxs=f,$l}var M1;function kE(){return M1||(M1=1,Jh.exports=PE()),Jh.exports}var fr=kE(),Ue=ep();const IE=A_(Ue);var $c={},td={exports:{}},Pr={},nd={exports:{}},rd={};var L1;function RE(){return L1||(L1=1,(function(n){function e(De,Qe){var K=De.length;De.push(Qe);e:for(;0<K;){var ye=K-1>>>1,Ye=De[ye];if(0<i(Ye,Qe))De[ye]=Qe,De[K]=Ye,K=ye;else break e}}function t(De){return De.length===0?null:De[0]}function r(De){if(De.length===0)return null;var Qe=De[0],K=De.pop();if(K!==Qe){De[0]=K;e:for(var ye=0,Ye=De.length,Mt=Ye>>>1;ye<Mt;){var wt=2*(ye+1)-1,zt=De[wt],kt=wt+1,gt=De[kt];if(0>i(zt,K))kt<Ye&&0>i(gt,zt)?(De[ye]=gt,De[kt]=K,ye=kt):(De[ye]=zt,De[wt]=K,ye=wt);else if(kt<Ye&&0>i(gt,K))De[ye]=gt,De[kt]=K,ye=kt;else break e}}return Qe}function i(De,Qe){var K=De.sortIndex-Qe.sortIndex;return K!==0?K:De.id-Qe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var f=Date,d=f.now();n.unstable_now=function(){return f.now()-d}}var m=[],_=[],E=1,T=null,C=3,P=!1,R=!1,U=!1,j=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function X(De){for(var Qe=t(_);Qe!==null;){if(Qe.callback===null)r(_);else if(Qe.startTime<=De)r(_),Qe.sortIndex=Qe.expirationTime,e(m,Qe);else break;Qe=t(_)}}function q(De){if(U=!1,X(De),!R)if(t(m)!==null)R=!0,tt(ee);else{var Qe=t(_);Qe!==null&&_t(q,Qe.startTime-De)}}function ee(De,Qe){R=!1,U&&(U=!1,G(ue),ue=-1),P=!0;var K=C;try{for(X(Qe),T=t(m);T!==null&&(!(T.expirationTime>Qe)||De&&!ge());){var ye=T.callback;if(typeof ye=="function"){T.callback=null,C=T.priorityLevel;var Ye=ye(T.expirationTime<=Qe);Qe=n.unstable_now(),typeof Ye=="function"?T.callback=Ye:T===t(m)&&r(m),X(Qe)}else r(m);T=t(m)}if(T!==null)var Mt=!0;else{var wt=t(_);wt!==null&&_t(q,wt.startTime-Qe),Mt=!1}return Mt}finally{T=null,C=K,P=!1}}var ie=!1,pe=null,ue=-1,me=5,Ce=-1;function ge(){return!(n.unstable_now()-Ce<me)}function ke(){if(pe!==null){var De=n.unstable_now();Ce=De;var Qe=!0;try{Qe=pe(!0,De)}finally{Qe?Me():(ie=!1,pe=null)}}else ie=!1}var Me;if(typeof Q=="function")Me=function(){Q(ke)};else if(typeof MessageChannel<"u"){var ze=new MessageChannel,We=ze.port2;ze.port1.onmessage=ke,Me=function(){We.postMessage(null)}}else Me=function(){j(ke,0)};function tt(De){pe=De,ie||(ie=!0,Me())}function _t(De,Qe){ue=j(function(){De(n.unstable_now())},Qe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(De){De.callback=null},n.unstable_continueExecution=function(){R||P||(R=!0,tt(ee))},n.unstable_forceFrameRate=function(De){0>De||125<De?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):me=0<De?Math.floor(1e3/De):5},n.unstable_getCurrentPriorityLevel=function(){return C},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(De){switch(C){case 1:case 2:case 3:var Qe=3;break;default:Qe=C}var K=C;C=Qe;try{return De()}finally{C=K}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(De,Qe){switch(De){case 1:case 2:case 3:case 4:case 5:break;default:De=3}var K=C;C=De;try{return Qe()}finally{C=K}},n.unstable_scheduleCallback=function(De,Qe,K){var ye=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ye+K:ye):K=ye,De){case 1:var Ye=-1;break;case 2:Ye=250;break;case 5:Ye=1073741823;break;case 4:Ye=1e4;break;default:Ye=5e3}return Ye=K+Ye,De={id:E++,callback:Qe,priorityLevel:De,startTime:K,expirationTime:Ye,sortIndex:-1},K>ye?(De.sortIndex=K,e(_,De),t(m)===null&&De===t(_)&&(U?(G(ue),ue=-1):U=!0,_t(q,K-ye))):(De.sortIndex=Ye,e(m,De),R||P||(R=!0,tt(ee))),De},n.unstable_shouldYield=ge,n.unstable_wrapCallback=function(De){var Qe=C;return function(){var K=C;C=Qe;try{return De.apply(this,arguments)}finally{C=K}}}})(rd)),rd}var P1;function OE(){return P1||(P1=1,nd.exports=RE()),nd.exports}var k1;function DE(){if(k1)return Pr;k1=1;var n=ep(),e=OE();function t(s){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+s,p=1;p<arguments.length;p++)l+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(s,l){f(s,l),f(s+"Capture",l)}function f(s,l){for(i[s]=l,s=0;s<l.length;s++)r.add(l[s])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},T={};function C(s){return m.call(T,s)?!0:m.call(E,s)?!1:_.test(s)?T[s]=!0:(E[s]=!0,!1)}function P(s,l,p,w){if(p!==null&&p.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return w?!1:p!==null?!p.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function R(s,l,p,w){if(l===null||typeof l>"u"||P(s,l,p,w))return!0;if(w)return!1;if(p!==null)switch(p.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function U(s,l,p,w,x,M,O){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=w,this.attributeNamespace=x,this.mustUseProperty=p,this.propertyName=s,this.type=l,this.sanitizeURL=M,this.removeEmptyString=O}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){j[s]=new U(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var l=s[0];j[l]=new U(l,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){j[s]=new U(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){j[s]=new U(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){j[s]=new U(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){j[s]=new U(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){j[s]=new U(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){j[s]=new U(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){j[s]=new U(s,5,!1,s.toLowerCase(),null,!1,!1)});var G=/[\-:]([a-z])/g;function Q(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var l=s.replace(G,Q);j[l]=new U(l,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var l=s.replace(G,Q);j[l]=new U(l,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var l=s.replace(G,Q);j[l]=new U(l,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){j[s]=new U(s,1,!1,s.toLowerCase(),null,!1,!1)}),j.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){j[s]=new U(s,1,!1,s.toLowerCase(),null,!0,!0)});function X(s,l,p,w){var x=j.hasOwnProperty(l)?j[l]:null;(x!==null?x.type!==0:w||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(R(l,p,x,w)&&(p=null),w||x===null?C(l)&&(p===null?s.removeAttribute(l):s.setAttribute(l,""+p)):x.mustUseProperty?s[x.propertyName]=p===null?x.type===3?!1:"":p:(l=x.attributeName,w=x.attributeNamespace,p===null?s.removeAttribute(l):(x=x.type,p=x===3||x===4&&p===!0?"":""+p,w?s.setAttributeNS(w,l,p):s.setAttribute(l,p))))}var q=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ee=Symbol.for("react.element"),ie=Symbol.for("react.portal"),pe=Symbol.for("react.fragment"),ue=Symbol.for("react.strict_mode"),me=Symbol.for("react.profiler"),Ce=Symbol.for("react.provider"),ge=Symbol.for("react.context"),ke=Symbol.for("react.forward_ref"),Me=Symbol.for("react.suspense"),ze=Symbol.for("react.suspense_list"),We=Symbol.for("react.memo"),tt=Symbol.for("react.lazy"),_t=Symbol.for("react.offscreen"),De=Symbol.iterator;function Qe(s){return s===null||typeof s!="object"?null:(s=De&&s[De]||s["@@iterator"],typeof s=="function"?s:null)}var K=Object.assign,ye;function Ye(s){if(ye===void 0)try{throw Error()}catch(p){var l=p.stack.trim().match(/\n( *(at )?)/);ye=l&&l[1]||""}return`
`+ye+s}var Mt=!1;function wt(s,l){if(!s||Mt)return"";Mt=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(fe){var w=fe}Reflect.construct(s,[],l)}else{try{l.call()}catch(fe){w=fe}s.call(l.prototype)}else{try{throw Error()}catch(fe){w=fe}s()}}catch(fe){if(fe&&w&&typeof fe.stack=="string"){for(var x=fe.stack.split(`
`),M=w.stack.split(`
`),O=x.length-1,W=M.length-1;1<=O&&0<=W&&x[O]!==M[W];)W--;for(;1<=O&&0<=W;O--,W--)if(x[O]!==M[W]){if(O!==1||W!==1)do if(O--,W--,0>W||x[O]!==M[W]){var J=`
`+x[O].replace(" at new "," at ");return s.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",s.displayName)),J}while(1<=O&&0<=W);break}}}finally{Mt=!1,Error.prepareStackTrace=p}return(s=s?s.displayName||s.name:"")?Ye(s):""}function zt(s){switch(s.tag){case 5:return Ye(s.type);case 16:return Ye("Lazy");case 13:return Ye("Suspense");case 19:return Ye("SuspenseList");case 0:case 2:case 15:return s=wt(s.type,!1),s;case 11:return s=wt(s.type.render,!1),s;case 1:return s=wt(s.type,!0),s;default:return""}}function kt(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case pe:return"Fragment";case ie:return"Portal";case me:return"Profiler";case ue:return"StrictMode";case Me:return"Suspense";case ze:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case ge:return(s.displayName||"Context")+".Consumer";case Ce:return(s._context.displayName||"Context")+".Provider";case ke:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case We:return l=s.displayName||null,l!==null?l:kt(s.type)||"Memo";case tt:l=s._payload,s=s._init;try{return kt(s(l))}catch{}}return null}function gt(s){var l=s.type;switch(s.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=l.render,s=s.displayName||s.name||"",l.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kt(l);case 8:return l===ue?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Ct(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Se(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function at(s){var l=Se(s)?"checked":"value",p=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),w=""+s[l];if(!s.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var x=p.get,M=p.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return x.call(this)},set:function(O){w=""+O,M.call(this,O)}}),Object.defineProperty(s,l,{enumerable:p.enumerable}),{getValue:function(){return w},setValue:function(O){w=""+O},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function xt(s){s._valueTracker||(s._valueTracker=at(s))}function Ee(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var p=l.getValue(),w="";return s&&(w=Se(s)?s.checked?"true":"false":s.value),s=w,s!==p?(l.setValue(s),!0):!1}function Kt(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function It(s,l){var p=l.checked;return K({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??s._wrapperState.initialChecked})}function An(s,l){var p=l.defaultValue==null?"":l.defaultValue,w=l.checked!=null?l.checked:l.defaultChecked;p=Ct(l.value!=null?l.value:p),s._wrapperState={initialChecked:w,initialValue:p,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function $t(s,l){l=l.checked,l!=null&&X(s,"checked",l,!1)}function Jt(s,l){$t(s,l);var p=Ct(l.value),w=l.type;if(p!=null)w==="number"?(p===0&&s.value===""||s.value!=p)&&(s.value=""+p):s.value!==""+p&&(s.value=""+p);else if(w==="submit"||w==="reset"){s.removeAttribute("value");return}l.hasOwnProperty("value")?zs(s,l.type,p):l.hasOwnProperty("defaultValue")&&zs(s,l.type,Ct(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(s.defaultChecked=!!l.defaultChecked)}function Er(s,l,p){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var w=l.type;if(!(w!=="submit"&&w!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+s._wrapperState.initialValue,p||l===s.value||(s.value=l),s.defaultValue=l}p=s.name,p!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,p!==""&&(s.name=p)}function zs(s,l,p){(l!=="number"||Kt(s.ownerDocument)!==s)&&(p==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+p&&(s.defaultValue=""+p))}var qr=Array.isArray;function Xt(s,l,p,w){if(s=s.options,l){l={};for(var x=0;x<p.length;x++)l["$"+p[x]]=!0;for(p=0;p<s.length;p++)x=l.hasOwnProperty("$"+s[p].value),s[p].selected!==x&&(s[p].selected=x),x&&w&&(s[p].defaultSelected=!0)}else{for(p=""+Ct(p),l=null,x=0;x<s.length;x++){if(s[x].value===p){s[x].selected=!0,w&&(s[x].defaultSelected=!0);return}l!==null||s[x].disabled||(l=s[x])}l!==null&&(l.selected=!0)}}function cs(s,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return K({},l,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Po(s,l){var p=l.value;if(p==null){if(p=l.children,l=l.defaultValue,p!=null){if(l!=null)throw Error(t(92));if(qr(p)){if(1<p.length)throw Error(t(93));p=p[0]}l=p}l==null&&(l=""),p=l}s._wrapperState={initialValue:Ct(p)}}function pi(s,l){var p=Ct(l.value),w=Ct(l.defaultValue);p!=null&&(p=""+p,p!==s.value&&(s.value=p),l.defaultValue==null&&s.defaultValue!==p&&(s.defaultValue=p)),w!=null&&(s.defaultValue=""+w)}function Vs(s){var l=s.textContent;l===s._wrapperState.initialValue&&l!==""&&l!==null&&(s.value=l)}function Ia(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function js(s,l){return s==null||s==="http://www.w3.org/1999/xhtml"?Ia(l):s==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Ii,ko=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,p,w,x){MSApp.execUnsafeLocalFunction(function(){return s(l,p,w,x)})}:s})(function(s,l){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=l;else{for(Ii=Ii||document.createElement("div"),Ii.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Ii.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;l.firstChild;)s.appendChild(l.firstChild)}});function Ri(s,l){if(l){var p=s.firstChild;if(p&&p===s.lastChild&&p.nodeType===3){p.nodeValue=l;return}}s.textContent=l}var Kr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Io=["Webkit","ms","Moz","O"];Object.keys(Kr).forEach(function(s){Io.forEach(function(l){l=l+s.charAt(0).toUpperCase()+s.substring(1),Kr[l]=Kr[s]})});function Ra(s,l,p){return l==null||typeof l=="boolean"||l===""?"":p||typeof l!="number"||l===0||Kr.hasOwnProperty(s)&&Kr[s]?(""+l).trim():l+"px"}function Oa(s,l){s=s.style;for(var p in l)if(l.hasOwnProperty(p)){var w=p.indexOf("--")===0,x=Ra(p,l[p],w);p==="float"&&(p="cssFloat"),w?s.setProperty(p,x):s[p]=x}}var ll=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fs(s,l){if(l){if(ll[s]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function Ro(s,l){if(s.indexOf("-")===-1)return typeof l.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oi=null;function Te(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Oo=null,Jr=null,mi=null;function Gs(s){if(s=si(s)){if(typeof Oo!="function")throw Error(t(280));var l=s.stateNode;l&&(l=_e(l),Oo(s.stateNode,s.type,l))}}function Hs(s){Jr?mi?mi.push(s):mi=[s]:Jr=s}function Do(){if(Jr){var s=Jr,l=mi;if(mi=Jr=null,Gs(s),l)for(s=0;s<l.length;s++)Gs(l[s])}}function Fo(s,l){return s(l)}function Ws(){}var Di=!1;function Qs(s,l,p){if(Di)return s(l,p);Di=!0;try{return Fo(s,l,p)}finally{Di=!1,(Jr!==null||mi!==null)&&(Ws(),Do())}}function Tr(s,l){var p=s.stateNode;if(p===null)return null;var w=_e(p);if(w===null)return null;p=w[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(s=s.type,w=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!w;break e;default:s=!1}if(s)return null;if(p&&typeof p!="function")throw Error(t(231,l,typeof p));return p}var le=!1;if(d)try{var ve={};Object.defineProperty(ve,"passive",{get:function(){le=!0}}),window.addEventListener("test",ve,ve),window.removeEventListener("test",ve,ve)}catch{le=!1}function Be(s,l,p,w,x,M,O,W,J){var fe=Array.prototype.slice.call(arguments,3);try{l.apply(p,fe)}catch(xe){this.onError(xe)}}var rt=!1,u=null,N=!1,Lt=null,Nt={onError:function(s){rt=!0,u=s}};function fn(s,l,p,w,x,M,O,W,J){rt=!1,u=null,Be.apply(Nt,arguments)}function Et(s,l,p,w,x,M,O,W,J){if(fn.apply(this,arguments),rt){if(rt){var fe=u;rt=!1,u=null}else throw Error(t(198));N||(N=!0,Lt=fe)}}function Tt(s){var l=s,p=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(p=l.return),s=l.return;while(s)}return l.tag===3?p:null}function xr(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function Rt(s){if(Tt(s)!==s)throw Error(t(188))}function lt(s){var l=s.alternate;if(!l){if(l=Tt(s),l===null)throw Error(t(188));return l!==s?null:s}for(var p=s,w=l;;){var x=p.return;if(x===null)break;var M=x.alternate;if(M===null){if(w=x.return,w!==null){p=w;continue}break}if(x.child===M.child){for(M=x.child;M;){if(M===p)return Rt(x),s;if(M===w)return Rt(x),l;M=M.sibling}throw Error(t(188))}if(p.return!==w.return)p=x,w=M;else{for(var O=!1,W=x.child;W;){if(W===p){O=!0,p=x,w=M;break}if(W===w){O=!0,w=x,p=M;break}W=W.sibling}if(!O){for(W=M.child;W;){if(W===p){O=!0,p=M,w=x;break}if(W===w){O=!0,w=M,p=x;break}W=W.sibling}if(!O)throw Error(t(189))}}if(p.alternate!==w)throw Error(t(190))}if(p.tag!==3)throw Error(t(188));return p.stateNode.current===p?s:l}function bn(s){return s=lt(s),s!==null?Or(s):null}function Or(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var l=Or(s);if(l!==null)return l;s=s.sibling}return null}var hs=e.unstable_scheduleCallback,Fi=e.unstable_cancelCallback,tr=e.unstable_shouldYield,Bi=e.unstable_requestPaint,Ot=e.unstable_now,Nn=e.unstable_getCurrentPriorityLevel,ei=e.unstable_ImmediatePriority,Mn=e.unstable_UserBlockingPriority,it=e.unstable_NormalPriority,V=e.unstable_LowPriority,Ze=e.unstable_IdlePriority,Xn=null,gr=null;function Da(s){if(gr&&typeof gr.onCommitFiberRoot=="function")try{gr.onCommitFiberRoot(Xn,s,void 0,(s.current.flags&128)===128)}catch{}}var Un=Math.clz32?Math.clz32:Bo,pr=Math.log,F=Math.LN2;function Bo(s){return s>>>=0,s===0?32:31-(pr(s)/F|0)|0}var Ni=64,Ui=4194304;function vi(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function yi(s,l){var p=s.pendingLanes;if(p===0)return 0;var w=0,x=s.suspendedLanes,M=s.pingedLanes,O=p&268435455;if(O!==0){var W=O&~x;W!==0?w=vi(W):(M&=O,M!==0&&(w=vi(M)))}else O=p&~x,O!==0?w=vi(O):M!==0&&(w=vi(M));if(w===0)return 0;if(l!==0&&l!==w&&(l&x)===0&&(x=w&-w,M=l&-l,x>=M||x===16&&(M&4194240)!==0))return l;if((w&4)!==0&&(w|=p&16),l=s.entangledLanes,l!==0)for(s=s.entanglements,l&=w;0<l;)p=31-Un(l),x=1<<p,w|=s[p],l&=~x;return w}function ti(s,l){switch(s){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fa(s,l){for(var p=s.suspendedLanes,w=s.pingedLanes,x=s.expirationTimes,M=s.pendingLanes;0<M;){var O=31-Un(M),W=1<<O,J=x[O];J===-1?((W&p)===0||(W&w)!==0)&&(x[O]=ti(W,l)):J<=l&&(s.expiredLanes|=W),M&=~W}}function ds(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function gs(){var s=Ni;return Ni<<=1,(Ni&4194240)===0&&(Ni=64),s}function nr(s){for(var l=[],p=0;31>p;p++)l.push(s);return l}function rn(s,l,p){s.pendingLanes|=l,l!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,l=31-Un(l),s[l]=p}function No(s,l){var p=s.pendingLanes&~l;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=l,s.mutableReadLanes&=l,s.entangledLanes&=l,l=s.entanglements;var w=s.eventTimes;for(s=s.expirationTimes;0<p;){var x=31-Un(p),M=1<<x;l[x]=0,w[x]=-1,s[x]=-1,p&=~M}}function D(s,l){var p=s.entangledLanes|=l;for(s=s.entanglements;p;){var w=31-Un(p),x=1<<w;x&l|s[w]&l&&(s[w]|=l),p&=~x}}var B=0;function $(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var ce,we,Ve,$e,on,ln=!1,mn=[],En=null,zi=null,_i=null,ps=new Map,ms=new Map,Vi=[],T0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ul(s,l){switch(s){case"focusin":case"focusout":En=null;break;case"dragenter":case"dragleave":zi=null;break;case"mouseover":case"mouseout":_i=null;break;case"pointerover":case"pointerout":ps.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":ms.delete(l.pointerId)}}function Ys(s,l,p,w,x,M){return s===null||s.nativeEvent!==M?(s={blockedOn:l,domEventName:p,eventSystemFlags:w,nativeEvent:M,targetContainers:[x]},l!==null&&(l=si(l),l!==null&&we(l)),s):(s.eventSystemFlags|=w,l=s.targetContainers,x!==null&&l.indexOf(x)===-1&&l.push(x),s)}function $u(s,l,p,w,x){switch(l){case"focusin":return En=Ys(En,s,l,p,w,x),!0;case"dragenter":return zi=Ys(zi,s,l,p,w,x),!0;case"mouseover":return _i=Ys(_i,s,l,p,w,x),!0;case"pointerover":var M=x.pointerId;return ps.set(M,Ys(ps.get(M)||null,s,l,p,w,x)),!0;case"gotpointercapture":return M=x.pointerId,ms.set(M,Ys(ms.get(M)||null,s,l,p,w,x)),!0}return!1}function Xu(s){var l=ii(s.target);if(l!==null){var p=Tt(l);if(p!==null){if(l=p.tag,l===13){if(l=xr(p),l!==null){s.blockedOn=l,on(s.priority,function(){Ve(p)});return}}else if(l===3&&p.stateNode.current.memoizedState.isDehydrated){s.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ba(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var p=za(s.domEventName,s.eventSystemFlags,l[0],s.nativeEvent);if(p===null){p=s.nativeEvent;var w=new p.constructor(p.type,p);Oi=w,p.target.dispatchEvent(w),Oi=null}else return l=si(p),l!==null&&we(l),s.blockedOn=p,!1;l.shift()}return!0}function Zu(s,l,p){Ba(s)&&p.delete(l)}function zn(){ln=!1,En!==null&&Ba(En)&&(En=null),zi!==null&&Ba(zi)&&(zi=null),_i!==null&&Ba(_i)&&(_i=null),ps.forEach(Zu),ms.forEach(Zu)}function Dr(s,l){s.blockedOn===l&&(s.blockedOn=null,ln||(ln=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,zn)))}function Tn(s){function l(x){return Dr(x,s)}if(0<mn.length){Dr(mn[0],s);for(var p=1;p<mn.length;p++){var w=mn[p];w.blockedOn===s&&(w.blockedOn=null)}}for(En!==null&&Dr(En,s),zi!==null&&Dr(zi,s),_i!==null&&Dr(_i,s),ps.forEach(l),ms.forEach(l),p=0;p<Vi.length;p++)w=Vi[p],w.blockedOn===s&&(w.blockedOn=null);for(;0<Vi.length&&(p=Vi[0],p.blockedOn===null);)Xu(p),p.blockedOn===null&&Vi.shift()}var ji=q.ReactCurrentBatchConfig,Uo=!0;function Na(s,l,p,w){var x=B,M=ji.transition;ji.transition=null;try{B=1,cl(s,l,p,w)}finally{B=x,ji.transition=M}}function x0(s,l,p,w){var x=B,M=ji.transition;ji.transition=null;try{B=4,cl(s,l,p,w)}finally{B=x,ji.transition=M}}function cl(s,l,p,w){if(Uo){var x=za(s,l,p,w);if(x===null)un(s,l,w,Ua,p),ul(s,w);else if($u(x,s,l,p,w))w.stopPropagation();else if(ul(s,w),l&4&&-1<T0.indexOf(s)){for(;x!==null;){var M=si(x);if(M!==null&&ce(M),M=za(s,l,p,w),M===null&&un(s,l,w,Ua,p),M===x)break;x=M}x!==null&&w.stopPropagation()}else un(s,l,w,null,p)}}var Ua=null;function za(s,l,p,w){if(Ua=null,s=Te(w),s=ii(s),s!==null)if(l=Tt(s),l===null)s=null;else if(p=l.tag,p===13){if(s=xr(l),s!==null)return s;s=null}else if(p===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null);return Ua=s,null}function zo(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Nn()){case ei:return 1;case Mn:return 4;case it:case V:return 16;case Ze:return 536870912;default:return 16}default:return 16}}var rr=null,Va=null,Vo=null;function jo(){if(Vo)return Vo;var s,l=Va,p=l.length,w,x="value"in rr?rr.value:rr.textContent,M=x.length;for(s=0;s<p&&l[s]===x[s];s++);var O=p-s;for(w=1;w<=O&&l[p-w]===x[M-w];w++);return Vo=x.slice(s,1<w?1-w:void 0)}function ni(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Fr(){return!0}function fl(){return!1}function ir(s){function l(p,w,x,M,O){this._reactName=p,this._targetInst=x,this.type=w,this.nativeEvent=M,this.target=O,this.currentTarget=null;for(var W in s)s.hasOwnProperty(W)&&(p=s[W],this[W]=p?p(M):M[W]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?Fr:fl,this.isPropagationStopped=fl,this}return K(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Fr)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Fr)},persist:function(){},isPersistent:Fr}),l}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hl=ir(Gi),Go=K({},Gi,{view:0,detail:0}),qu=ir(Go),dl,gl,Ho,ja=K({},Go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ha,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ho&&(Ho&&s.type==="mousemove"?(dl=s.screenX-Ho.screenX,gl=s.screenY-Ho.screenY):gl=dl=0,Ho=s),dl)},movementY:function(s){return"movementY"in s?s.movementY:gl}}),Ku=ir(ja),S0=K({},ja,{dataTransfer:0}),C0=ir(S0),M0=K({},Go,{relatedTarget:0}),$s=ir(M0),L0=K({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),P0=ir(L0),k0=K({},Gi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Wo=ir(k0),I0=K({},Gi,{data:0}),Ga=ir(I0),Ju={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},R0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pl(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=R0[s])?!!l[s]:!1}function Ha(){return pl}var O0=K({},Go,{key:function(s){if(s.key){var l=Ju[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=ni(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Xs[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ha,charCode:function(s){return s.type==="keypress"?ni(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ni(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ec=ir(O0),ml=K({},ja,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wa=ir(ml),Qa=K({},Go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ha}),qt=ir(Qa),D0=K({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),F0=ir(D0),B0=K({},ja,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),N0=ir(B0),U0=[9,13,27,32],vl=d&&"CompositionEvent"in window,Qo=null;d&&"documentMode"in document&&(Qo=document.documentMode);var sr=d&&"TextEvent"in window&&!Qo,Ya=d&&(!vl||Qo&&8<Qo&&11>=Qo),Hi=" ",tc=!1;function $a(s,l){switch(s){case"keyup":return U0.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nc(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ln=!1;function rc(s,l){switch(s){case"compositionend":return nc(l);case"keypress":return l.which!==32?null:(tc=!0,Hi);case"textInput":return s=l.data,s===Hi&&tc?null:s;default:return null}}function yl(s,l){if(Ln)return s==="compositionend"||!vl&&$a(s,l)?(s=jo(),Vo=Va=rr=null,Ln=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Ya&&l.locale!=="ko"?null:l.data;default:return null}}var Zs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qs(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!Zs[s.type]:l==="textarea"}function Ks(s,l,p,w){Hs(w),l=nA(l,"onChange"),0<l.length&&(p=new hl("onChange","change",null,p,w),s.push({event:p,listeners:l}))}var Yo=null,Js=null;function z0(s){fc(s,0)}function eo(s){var l=_s(s);if(Ee(l))return s}function V0(s,l){if(s==="change")return l}var ic=!1;if(d){var Xa;if(d){var Za="oninput"in document;if(!Za){var to=document.createElement("div");to.setAttribute("oninput","return;"),Za=typeof to.oninput=="function"}Xa=Za}else Xa=!1;ic=Xa&&(!document.documentMode||9<document.documentMode)}function vs(){Yo&&(Yo.detachEvent("onpropertychange",sc),Js=Yo=null)}function sc(s){if(s.propertyName==="value"&&eo(Js)){var l=[];Ks(l,Js,s,Te(s)),Qs(z0,l)}}function $o(s,l,p){s==="focusin"?(vs(),Yo=l,Js=p,Yo.attachEvent("onpropertychange",sc)):s==="focusout"&&vs()}function j0(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return eo(Js)}function G0(s,l){if(s==="click")return eo(l)}function H0(s,l){if(s==="input"||s==="change")return eo(l)}function W0(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var Br=typeof Object.is=="function"?Object.is:W0;function Xo(s,l){if(Br(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var p=Object.keys(s),w=Object.keys(l);if(p.length!==w.length)return!1;for(w=0;w<p.length;w++){var x=p[w];if(!m.call(l,x)||!Br(s[x],l[x]))return!1}return!0}function oc(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function qa(s,l){var p=oc(s);s=0;for(var w;p;){if(p.nodeType===3){if(w=s+p.textContent.length,s<=l&&w>=l)return{node:p,offset:l-s};s=w}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=oc(p)}}function _l(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?_l(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function Ka(){for(var s=window,l=Kt();l instanceof s.HTMLIFrameElement;){try{var p=typeof l.contentWindow.location.href=="string"}catch{p=!1}if(p)s=l.contentWindow;else break;l=Kt(s.document)}return l}function wl(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}function Q0(s){var l=Ka(),p=s.focusedElem,w=s.selectionRange;if(l!==p&&p&&p.ownerDocument&&_l(p.ownerDocument.documentElement,p)){if(w!==null&&wl(p)){if(l=w.start,s=w.end,s===void 0&&(s=l),"selectionStart"in p)p.selectionStart=l,p.selectionEnd=Math.min(s,p.value.length);else if(s=(l=p.ownerDocument||document)&&l.defaultView||window,s.getSelection){s=s.getSelection();var x=p.textContent.length,M=Math.min(w.start,x);w=w.end===void 0?M:Math.min(w.end,x),!s.extend&&M>w&&(x=w,w=M,M=x),x=qa(p,M);var O=qa(p,w);x&&O&&(s.rangeCount!==1||s.anchorNode!==x.node||s.anchorOffset!==x.offset||s.focusNode!==O.node||s.focusOffset!==O.offset)&&(l=l.createRange(),l.setStart(x.node,x.offset),s.removeAllRanges(),M>w?(s.addRange(l),s.extend(O.node,O.offset)):(l.setEnd(O.node,O.offset),s.addRange(l)))}}for(l=[],s=p;s=s.parentNode;)s.nodeType===1&&l.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<l.length;p++)s=l[p],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Y0=d&&"documentMode"in document&&11>=document.documentMode,no=null,bl=null,Zo=null,El=!1;function Tl(s,l,p){var w=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;El||no==null||no!==Kt(w)||(w=no,"selectionStart"in w&&wl(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Zo&&Xo(Zo,w)||(Zo=w,w=nA(bl,"onSelect"),0<w.length&&(l=new hl("onSelect","select",null,l,p),s.push({event:l,listeners:w}),l.target=no)))}function Ja(s,l){var p={};return p[s.toLowerCase()]=l.toLowerCase(),p["Webkit"+s]="webkit"+l,p["Moz"+s]="moz"+l,p}var ys={animationend:Ja("Animation","AnimationEnd"),animationiteration:Ja("Animation","AnimationIteration"),animationstart:Ja("Animation","AnimationStart"),transitionend:Ja("Transition","TransitionEnd")},Nr={},xl={};d&&(xl=document.createElement("div").style,"AnimationEvent"in window||(delete ys.animationend.animation,delete ys.animationiteration.animation,delete ys.animationstart.animation),"TransitionEvent"in window||delete ys.transitionend.transition);function eA(s){if(Nr[s])return Nr[s];if(!ys[s])return s;var l=ys[s],p;for(p in l)if(l.hasOwnProperty(p)&&p in xl)return Nr[s]=l[p];return s}var ac=eA("animationend"),Ac=eA("animationiteration"),lc=eA("animationstart"),uc=eA("transitionend"),wi=new Map,Sl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bi(s,l){wi.set(s,l),o(l,[s])}for(var Cl=0;Cl<Sl.length;Cl++){var Ml=Sl[Cl],$0=Ml.toLowerCase(),X0=Ml[0].toUpperCase()+Ml.slice(1);bi($0,"on"+X0)}bi(ac,"onAnimationEnd"),bi(Ac,"onAnimationIteration"),bi(lc,"onAnimationStart"),bi("dblclick","onDoubleClick"),bi("focusin","onFocus"),bi("focusout","onBlur"),bi(uc,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Z0=new Set("cancel close invalid load scroll toggle".split(" ").concat(qo));function cc(s,l,p){var w=s.type||"unknown-event";s.currentTarget=p,Et(w,l,void 0,s),s.currentTarget=null}function fc(s,l){l=(l&4)!==0;for(var p=0;p<s.length;p++){var w=s[p],x=w.event;w=w.listeners;e:{var M=void 0;if(l)for(var O=w.length-1;0<=O;O--){var W=w[O],J=W.instance,fe=W.currentTarget;if(W=W.listener,J!==M&&x.isPropagationStopped())break e;cc(x,W,fe),M=J}else for(O=0;O<w.length;O++){if(W=w[O],J=W.instance,fe=W.currentTarget,W=W.listener,J!==M&&x.isPropagationStopped())break e;cc(x,W,fe),M=J}}}if(N)throw s=Lt,N=!1,Lt=null,s}function en(s,l){var p=l[Ei];p===void 0&&(p=l[Ei]=new Set);var w=s+"__bubble";p.has(w)||(Pl(l,s,2,!1),p.add(w))}function Ll(s,l,p){var w=0;l&&(w|=4),Pl(p,s,w,l)}var tA="_reactListening"+Math.random().toString(36).slice(2);function ro(s){if(!s[tA]){s[tA]=!0,r.forEach(function(p){p!=="selectionchange"&&(Z0.has(p)||Ll(p,!1,s),Ll(p,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[tA]||(l[tA]=!0,Ll("selectionchange",!1,l))}}function Pl(s,l,p,w){switch(zo(l)){case 1:var x=Na;break;case 4:x=x0;break;default:x=cl}p=x.bind(null,l,p,s),x=void 0,!le||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(x=!0),w?x!==void 0?s.addEventListener(l,p,{capture:!0,passive:x}):s.addEventListener(l,p,!0):x!==void 0?s.addEventListener(l,p,{passive:x}):s.addEventListener(l,p,!1)}function un(s,l,p,w,x){var M=w;if((l&1)===0&&(l&2)===0&&w!==null)e:for(;;){if(w===null)return;var O=w.tag;if(O===3||O===4){var W=w.stateNode.containerInfo;if(W===x||W.nodeType===8&&W.parentNode===x)break;if(O===4)for(O=w.return;O!==null;){var J=O.tag;if((J===3||J===4)&&(J=O.stateNode.containerInfo,J===x||J.nodeType===8&&J.parentNode===x))return;O=O.return}for(;W!==null;){if(O=ii(W),O===null)return;if(J=O.tag,J===5||J===6){w=M=O;continue e}W=W.parentNode}}w=w.return}Qs(function(){var fe=M,xe=Te(p),Le=[];e:{var be=wi.get(s);if(be!==void 0){var He=hl,qe=s;switch(s){case"keypress":if(ni(p)===0)break e;case"keydown":case"keyup":He=ec;break;case"focusin":qe="focus",He=$s;break;case"focusout":qe="blur",He=$s;break;case"beforeblur":case"afterblur":He=$s;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":He=Ku;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":He=C0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":He=qt;break;case ac:case Ac:case lc:He=P0;break;case uc:He=F0;break;case"scroll":He=qu;break;case"wheel":He=N0;break;case"copy":case"cut":case"paste":He=Wo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":He=Wa}var Je=(l&4)!==0,xn=!Je&&s==="scroll",ae=Je?be!==null?be+"Capture":null:be;Je=[];for(var te=fe,Ae;te!==null;){Ae=te;var Re=Ae.stateNode;if(Ae.tag===5&&Re!==null&&(Ae=Re,ae!==null&&(Re=Tr(te,ae),Re!=null&&Je.push(Ko(te,Re,Ae)))),xn)break;te=te.return}0<Je.length&&(be=new He(be,qe,null,p,xe),Le.push({event:be,listeners:Je}))}}if((l&7)===0){e:{if(be=s==="mouseover"||s==="pointerover",He=s==="mouseout"||s==="pointerout",be&&p!==Oi&&(qe=p.relatedTarget||p.fromElement)&&(ii(qe)||qe[zr]))break e;if((He||be)&&(be=xe.window===xe?xe:(be=xe.ownerDocument)?be.defaultView||be.parentWindow:window,He?(qe=p.relatedTarget||p.toElement,He=fe,qe=qe?ii(qe):null,qe!==null&&(xn=Tt(qe),qe!==xn||qe.tag!==5&&qe.tag!==6)&&(qe=null)):(He=null,qe=fe),He!==qe)){if(Je=Ku,Re="onMouseLeave",ae="onMouseEnter",te="mouse",(s==="pointerout"||s==="pointerover")&&(Je=Wa,Re="onPointerLeave",ae="onPointerEnter",te="pointer"),xn=He==null?be:_s(He),Ae=qe==null?be:_s(qe),be=new Je(Re,te+"leave",He,p,xe),be.target=xn,be.relatedTarget=Ae,Re=null,ii(xe)===fe&&(Je=new Je(ae,te+"enter",qe,p,xe),Je.target=Ae,Je.relatedTarget=xn,Re=Je),xn=Re,He&&qe)t:{for(Je=He,ae=qe,te=0,Ae=Je;Ae;Ae=ri(Ae))te++;for(Ae=0,Re=ae;Re;Re=ri(Re))Ae++;for(;0<te-Ae;)Je=ri(Je),te--;for(;0<Ae-te;)ae=ri(ae),Ae--;for(;te--;){if(Je===ae||ae!==null&&Je===ae.alternate)break t;Je=ri(Je),ae=ri(ae)}Je=null}else Je=null;He!==null&&mr(Le,be,He,Je,!1),qe!==null&&xn!==null&&mr(Le,xn,qe,Je,!0)}}e:{if(be=fe?_s(fe):window,He=be.nodeName&&be.nodeName.toLowerCase(),He==="select"||He==="input"&&be.type==="file")var et=V0;else if(qs(be))if(ic)et=H0;else{et=j0;var ut=$o}else(He=be.nodeName)&&He.toLowerCase()==="input"&&(be.type==="checkbox"||be.type==="radio")&&(et=G0);if(et&&(et=et(s,fe))){Ks(Le,et,p,xe);break e}ut&&ut(s,be,fe),s==="focusout"&&(ut=be._wrapperState)&&ut.controlled&&be.type==="number"&&zs(be,"number",be.value)}switch(ut=fe?_s(fe):window,s){case"focusin":(qs(ut)||ut.contentEditable==="true")&&(no=ut,bl=fe,Zo=null);break;case"focusout":Zo=bl=no=null;break;case"mousedown":El=!0;break;case"contextmenu":case"mouseup":case"dragend":El=!1,Tl(Le,p,xe);break;case"selectionchange":if(Y0)break;case"keydown":case"keyup":Tl(Le,p,xe)}var ct;if(vl)e:{switch(s){case"compositionstart":var pt="onCompositionStart";break e;case"compositionend":pt="onCompositionEnd";break e;case"compositionupdate":pt="onCompositionUpdate";break e}pt=void 0}else Ln?$a(s,p)&&(pt="onCompositionEnd"):s==="keydown"&&p.keyCode===229&&(pt="onCompositionStart");pt&&(Ya&&p.locale!=="ko"&&(Ln||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&Ln&&(ct=jo()):(rr=xe,Va="value"in rr?rr.value:rr.textContent,Ln=!0)),ut=nA(fe,pt),0<ut.length&&(pt=new Ga(pt,s,null,p,xe),Le.push({event:pt,listeners:ut}),ct?pt.data=ct:(ct=nc(p),ct!==null&&(pt.data=ct)))),(ct=sr?rc(s,p):yl(s,p))&&(fe=nA(fe,"onBeforeInput"),0<fe.length&&(xe=new Ga("onBeforeInput","beforeinput",null,p,xe),Le.push({event:xe,listeners:fe}),xe.data=ct))}fc(Le,l)})}function Ko(s,l,p){return{instance:s,listener:l,currentTarget:p}}function nA(s,l){for(var p=l+"Capture",w=[];s!==null;){var x=s,M=x.stateNode;x.tag===5&&M!==null&&(x=M,M=Tr(s,p),M!=null&&w.unshift(Ko(s,M,x)),M=Tr(s,l),M!=null&&w.push(Ko(s,M,x))),s=s.return}return w}function ri(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function mr(s,l,p,w,x){for(var M=l._reactName,O=[];p!==null&&p!==w;){var W=p,J=W.alternate,fe=W.stateNode;if(J!==null&&J===w)break;W.tag===5&&fe!==null&&(W=fe,x?(J=Tr(p,M),J!=null&&O.unshift(Ko(p,J,W))):x||(J=Tr(p,M),J!=null&&O.push(Ko(p,J,W)))),p=p.return}O.length!==0&&s.push({event:l,listeners:O})}var q0=/\r\n?/g,K0=/\u0000|\uFFFD/g;function hc(s){return(typeof s=="string"?s:""+s).replace(q0,`
`).replace(K0,"")}function Jo(s,l,p){if(l=hc(l),hc(s)!==l&&p)throw Error(t(425))}function ea(){}var rA=null,iA=null;function kl(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Il=typeof setTimeout=="function"?setTimeout:void 0,J0=typeof clearTimeout=="function"?clearTimeout:void 0,dc=typeof Promise=="function"?Promise:void 0,eh=typeof queueMicrotask=="function"?queueMicrotask:typeof dc<"u"?function(s){return dc.resolve(null).then(s).catch(Wi)}:Il;function Wi(s){setTimeout(function(){throw s})}function Sr(s,l){var p=l,w=0;do{var x=p.nextSibling;if(s.removeChild(p),x&&x.nodeType===8)if(p=x.data,p==="/$"){if(w===0){s.removeChild(x),Tn(l);return}w--}else p!=="$"&&p!=="$?"&&p!=="$!"||w++;p=x}while(p);Tn(l)}function ot(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return s}function Ur(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var p=s.data;if(p==="$"||p==="$!"||p==="$?"){if(l===0)return s;l--}else p==="/$"&&l++}s=s.previousSibling}return null}var bt=Math.random().toString(36).slice(2),tn="__reactFiber$"+bt,io="__reactProps$"+bt,zr="__reactContainer$"+bt,Ei="__reactEvents$"+bt,th="__reactListeners$"+bt,Vn="__reactHandles$"+bt;function ii(s){var l=s[tn];if(l)return l;for(var p=s.parentNode;p;){if(l=p[zr]||p[tn]){if(p=l.alternate,l.child!==null||p!==null&&p.child!==null)for(s=Ur(s);s!==null;){if(p=s[tn])return p;s=Ur(s)}return l}s=p,p=s.parentNode}return null}function si(s){return s=s[tn]||s[zr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function _s(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function _e(s){return s[io]||null}var Oe=[],ws=-1;function oi(s){return{current:s}}function Yt(s){0>ws||(s.current=Oe[ws],Oe[ws]=null,ws--)}function Wt(s,l){ws++,Oe[ws]=s.current,s.current=l}var or={},Pn=oi(or),hn=oi(!1),A=or;function a(s,l){var p=s.type.contextTypes;if(!p)return or;var w=s.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===l)return w.__reactInternalMemoizedMaskedChildContext;var x={},M;for(M in p)x[M]=l[M];return w&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=l,s.__reactInternalMemoizedMaskedChildContext=x),x}function c(s){return s=s.childContextTypes,s!=null}function h(){Yt(hn),Yt(Pn)}function g(s,l,p){if(Pn.current!==or)throw Error(t(168));Wt(Pn,l),Wt(hn,p)}function v(s,l,p){var w=s.stateNode;if(l=l.childContextTypes,typeof w.getChildContext!="function")return p;w=w.getChildContext();for(var x in w)if(!(x in l))throw Error(t(108,gt(s)||"Unknown",x));return K({},p,w)}function y(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||or,A=Pn.current,Wt(Pn,s),Wt(hn,hn.current),!0}function b(s,l,p){var w=s.stateNode;if(!w)throw Error(t(169));p?(s=v(s,l,A),w.__reactInternalMemoizedMergedChildContext=s,Yt(hn),Yt(Pn),Wt(Pn,s)):Yt(hn),Wt(hn,p)}var S=null,L=!1,k=!1;function z(s){S===null?S=[s]:S.push(s)}function Y(s){L=!0,z(s)}function Z(){if(!k&&S!==null){k=!0;var s=0,l=B;try{var p=S;for(B=1;s<p.length;s++){var w=p[s];do w=w(!0);while(w!==null)}S=null,L=!1}catch(x){throw S!==null&&(S=S.slice(s+1)),hs(ei,Z),x}finally{B=l,k=!1}}return null}var H=[],re=0,de=null,he=0,se=[],oe=0,ne=null,Ie=1,Ne="";function Pe(s,l){H[re++]=he,H[re++]=de,de=s,he=l}function Fe(s,l,p){se[oe++]=Ie,se[oe++]=Ne,se[oe++]=ne,ne=s;var w=Ie;s=Ne;var x=32-Un(w)-1;w&=~(1<<x),p+=1;var M=32-Un(l)+x;if(30<M){var O=x-x%5;M=(w&(1<<O)-1).toString(32),w>>=O,x-=O,Ie=1<<32-Un(l)+x|p<<x|w,Ne=M+s}else Ie=1<<M|p<<x|w,Ne=s}function Bt(s){s.return!==null&&(Pe(s,1),Fe(s,1,0))}function Pt(s){for(;s===de;)de=H[--re],H[re]=null,he=H[--re],H[re]=null;for(;s===ne;)ne=se[--oe],se[oe]=null,Ne=se[--oe],se[oe]=null,Ie=se[--oe],se[oe]=null}var dt=null,st=null,Ge=!1,At=null;function Vt(s,l){var p=ui(5,null,null,0);p.elementType="DELETED",p.stateNode=l,p.return=s,l=s.deletions,l===null?(s.deletions=[p],s.flags|=16):l.push(p)}function ft(s,l){switch(s.tag){case 5:var p=s.type;return l=l.nodeType!==1||p.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(s.stateNode=l,dt=s,st=ot(l.firstChild),!0):!1;case 6:return l=s.pendingProps===""||l.nodeType!==3?null:l,l!==null?(s.stateNode=l,dt=s,st=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(p=ne!==null?{id:Ie,overflow:Ne}:null,s.memoizedState={dehydrated:l,treeContext:p,retryLane:1073741824},p=ui(18,null,null,0),p.stateNode=l,p.return=s,s.child=p,dt=s,st=null,!0):!1;default:return!1}}function Qt(s){return(s.mode&1)!==0&&(s.flags&128)===0}function kn(s){if(Ge){var l=st;if(l){var p=l;if(!ft(s,l)){if(Qt(s))throw Error(t(418));l=ot(p.nextSibling);var w=dt;l&&ft(s,l)?Vt(w,p):(s.flags=s.flags&-4097|2,Ge=!1,dt=s)}}else{if(Qt(s))throw Error(t(418));s.flags=s.flags&-4097|2,Ge=!1,dt=s}}}function Rl(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;dt=s}function gc(s){if(s!==dt)return!1;if(!Ge)return Rl(s),Ge=!0,!1;var l;if((l=s.tag!==3)&&!(l=s.tag!==5)&&(l=s.type,l=l!=="head"&&l!=="body"&&!kl(s.type,s.memoizedProps)),l&&(l=st)){if(Qt(s))throw em(),Error(t(418));for(;l;)Vt(s,l),l=ot(l.nextSibling)}if(Rl(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8){var p=s.data;if(p==="/$"){if(l===0){st=ot(s.nextSibling);break e}l--}else p!=="$"&&p!=="$!"&&p!=="$?"||l++}s=s.nextSibling}st=null}}else st=dt?ot(s.stateNode.nextSibling):null;return!0}function em(){for(var s=st;s;)s=ot(s.nextSibling)}function sA(){st=dt=null,Ge=!1}function nh(s){At===null?At=[s]:At.push(s)}var Y3=q.ReactCurrentBatchConfig;function Ti(s,l){if(s&&s.defaultProps){l=K({},l),s=s.defaultProps;for(var p in s)l[p]===void 0&&(l[p]=s[p]);return l}return l}var pc=oi(null),mc=null,oA=null,rh=null;function ih(){rh=oA=mc=null}function sh(s){var l=pc.current;Yt(pc),s._currentValue=l}function oh(s,l,p){for(;s!==null;){var w=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,w!==null&&(w.childLanes|=l)):w!==null&&(w.childLanes&l)!==l&&(w.childLanes|=l),s===p)break;s=s.return}}function aA(s,l){mc=s,rh=oA=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&l)!==0&&(Cr=!0),s.firstContext=null)}function ai(s){var l=s._currentValue;if(rh!==s)if(s={context:s,memoizedValue:l,next:null},oA===null){if(mc===null)throw Error(t(308));oA=s,mc.dependencies={lanes:0,firstContext:s}}else oA=oA.next=s;return l}var ta=null;function ah(s){ta===null?ta=[s]:ta.push(s)}function tm(s,l,p,w){var x=l.interleaved;return x===null?(p.next=p,ah(l)):(p.next=x.next,x.next=p),l.interleaved=p,bs(s,w)}function bs(s,l){s.lanes|=l;var p=s.alternate;for(p!==null&&(p.lanes|=l),p=s,s=s.return;s!==null;)s.childLanes|=l,p=s.alternate,p!==null&&(p.childLanes|=l),p=s,s=s.return;return p.tag===3?p.stateNode:null}var so=!1;function Ah(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nm(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Es(s,l){return{eventTime:s,lane:l,tag:0,payload:null,callback:null,next:null}}function oo(s,l,p){var w=s.updateQueue;if(w===null)return null;if(w=w.shared,(Ut&2)!==0){var x=w.pending;return x===null?l.next=l:(l.next=x.next,x.next=l),w.pending=l,bs(s,p)}return x=w.interleaved,x===null?(l.next=l,ah(w)):(l.next=x.next,x.next=l),w.interleaved=l,bs(s,p)}function vc(s,l,p){if(l=l.updateQueue,l!==null&&(l=l.shared,(p&4194240)!==0)){var w=l.lanes;w&=s.pendingLanes,p|=w,l.lanes=p,D(s,p)}}function rm(s,l){var p=s.updateQueue,w=s.alternate;if(w!==null&&(w=w.updateQueue,p===w)){var x=null,M=null;if(p=p.firstBaseUpdate,p!==null){do{var O={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};M===null?x=M=O:M=M.next=O,p=p.next}while(p!==null);M===null?x=M=l:M=M.next=l}else x=M=l;p={baseState:w.baseState,firstBaseUpdate:x,lastBaseUpdate:M,shared:w.shared,effects:w.effects},s.updateQueue=p;return}s=p.lastBaseUpdate,s===null?p.firstBaseUpdate=l:s.next=l,p.lastBaseUpdate=l}function yc(s,l,p,w){var x=s.updateQueue;so=!1;var M=x.firstBaseUpdate,O=x.lastBaseUpdate,W=x.shared.pending;if(W!==null){x.shared.pending=null;var J=W,fe=J.next;J.next=null,O===null?M=fe:O.next=fe,O=J;var xe=s.alternate;xe!==null&&(xe=xe.updateQueue,W=xe.lastBaseUpdate,W!==O&&(W===null?xe.firstBaseUpdate=fe:W.next=fe,xe.lastBaseUpdate=J))}if(M!==null){var Le=x.baseState;O=0,xe=fe=J=null,W=M;do{var be=W.lane,He=W.eventTime;if((w&be)===be){xe!==null&&(xe=xe.next={eventTime:He,lane:0,tag:W.tag,payload:W.payload,callback:W.callback,next:null});e:{var qe=s,Je=W;switch(be=l,He=p,Je.tag){case 1:if(qe=Je.payload,typeof qe=="function"){Le=qe.call(He,Le,be);break e}Le=qe;break e;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=Je.payload,be=typeof qe=="function"?qe.call(He,Le,be):qe,be==null)break e;Le=K({},Le,be);break e;case 2:so=!0}}W.callback!==null&&W.lane!==0&&(s.flags|=64,be=x.effects,be===null?x.effects=[W]:be.push(W))}else He={eventTime:He,lane:be,tag:W.tag,payload:W.payload,callback:W.callback,next:null},xe===null?(fe=xe=He,J=Le):xe=xe.next=He,O|=be;if(W=W.next,W===null){if(W=x.shared.pending,W===null)break;be=W,W=be.next,be.next=null,x.lastBaseUpdate=be,x.shared.pending=null}}while(!0);if(xe===null&&(J=Le),x.baseState=J,x.firstBaseUpdate=fe,x.lastBaseUpdate=xe,l=x.shared.interleaved,l!==null){x=l;do O|=x.lane,x=x.next;while(x!==l)}else M===null&&(x.shared.lanes=0);ia|=O,s.lanes=O,s.memoizedState=Le}}function im(s,l,p){if(s=l.effects,l.effects=null,s!==null)for(l=0;l<s.length;l++){var w=s[l],x=w.callback;if(x!==null){if(w.callback=null,w=p,typeof x!="function")throw Error(t(191,x));x.call(w)}}}var sm=new n.Component().refs;function lh(s,l,p,w){l=s.memoizedState,p=p(w,l),p=p==null?l:K({},l,p),s.memoizedState=p,s.lanes===0&&(s.updateQueue.baseState=p)}var _c={isMounted:function(s){return(s=s._reactInternals)?Tt(s)===s:!1},enqueueSetState:function(s,l,p){s=s._reactInternals;var w=yr(),x=uo(s),M=Es(w,x);M.payload=l,p!=null&&(M.callback=p),l=oo(s,M,x),l!==null&&(Ci(l,s,x,w),vc(l,s,x))},enqueueReplaceState:function(s,l,p){s=s._reactInternals;var w=yr(),x=uo(s),M=Es(w,x);M.tag=1,M.payload=l,p!=null&&(M.callback=p),l=oo(s,M,x),l!==null&&(Ci(l,s,x,w),vc(l,s,x))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var p=yr(),w=uo(s),x=Es(p,w);x.tag=2,l!=null&&(x.callback=l),l=oo(s,x,w),l!==null&&(Ci(l,s,w,p),vc(l,s,w))}};function om(s,l,p,w,x,M,O){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(w,M,O):l.prototype&&l.prototype.isPureReactComponent?!Xo(p,w)||!Xo(x,M):!0}function am(s,l,p){var w=!1,x=or,M=l.contextType;return typeof M=="object"&&M!==null?M=ai(M):(x=c(l)?A:Pn.current,w=l.contextTypes,M=(w=w!=null)?a(s,x):or),l=new l(p,M),s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=_c,s.stateNode=l,l._reactInternals=s,w&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=x,s.__reactInternalMemoizedMaskedChildContext=M),l}function Am(s,l,p,w){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(p,w),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(p,w),l.state!==s&&_c.enqueueReplaceState(l,l.state,null)}function uh(s,l,p,w){var x=s.stateNode;x.props=p,x.state=s.memoizedState,x.refs=sm,Ah(s);var M=l.contextType;typeof M=="object"&&M!==null?x.context=ai(M):(M=c(l)?A:Pn.current,x.context=a(s,M)),x.state=s.memoizedState,M=l.getDerivedStateFromProps,typeof M=="function"&&(lh(s,l,M,p),x.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(l=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),l!==x.state&&_c.enqueueReplaceState(x,x.state,null),yc(s,p,x,w),x.state=s.memoizedState),typeof x.componentDidMount=="function"&&(s.flags|=4194308)}function Ol(s,l,p){if(s=p.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(t(309));var w=p.stateNode}if(!w)throw Error(t(147,s));var x=w,M=""+s;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===M?l.ref:(l=function(O){var W=x.refs;W===sm&&(W=x.refs={}),O===null?delete W[M]:W[M]=O},l._stringRef=M,l)}if(typeof s!="string")throw Error(t(284));if(!p._owner)throw Error(t(290,s))}return s}function wc(s,l){throw s=Object.prototype.toString.call(l),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s))}function lm(s){var l=s._init;return l(s._payload)}function um(s){function l(ae,te){if(s){var Ae=ae.deletions;Ae===null?(ae.deletions=[te],ae.flags|=16):Ae.push(te)}}function p(ae,te){if(!s)return null;for(;te!==null;)l(ae,te),te=te.sibling;return null}function w(ae,te){for(ae=new Map;te!==null;)te.key!==null?ae.set(te.key,te):ae.set(te.index,te),te=te.sibling;return ae}function x(ae,te){return ae=fo(ae,te),ae.index=0,ae.sibling=null,ae}function M(ae,te,Ae){return ae.index=Ae,s?(Ae=ae.alternate,Ae!==null?(Ae=Ae.index,Ae<te?(ae.flags|=2,te):Ae):(ae.flags|=2,te)):(ae.flags|=1048576,te)}function O(ae){return s&&ae.alternate===null&&(ae.flags|=2),ae}function W(ae,te,Ae,Re){return te===null||te.tag!==6?(te=Yh(Ae,ae.mode,Re),te.return=ae,te):(te=x(te,Ae),te.return=ae,te)}function J(ae,te,Ae,Re){var et=Ae.type;return et===pe?xe(ae,te,Ae.props.children,Re,Ae.key):te!==null&&(te.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===tt&&lm(et)===te.type)?(Re=x(te,Ae.props),Re.ref=Ol(ae,te,Ae),Re.return=ae,Re):(Re=zc(Ae.type,Ae.key,Ae.props,null,ae.mode,Re),Re.ref=Ol(ae,te,Ae),Re.return=ae,Re)}function fe(ae,te,Ae,Re){return te===null||te.tag!==4||te.stateNode.containerInfo!==Ae.containerInfo||te.stateNode.implementation!==Ae.implementation?(te=$h(Ae,ae.mode,Re),te.return=ae,te):(te=x(te,Ae.children||[]),te.return=ae,te)}function xe(ae,te,Ae,Re,et){return te===null||te.tag!==7?(te=Aa(Ae,ae.mode,Re,et),te.return=ae,te):(te=x(te,Ae),te.return=ae,te)}function Le(ae,te,Ae){if(typeof te=="string"&&te!==""||typeof te=="number")return te=Yh(""+te,ae.mode,Ae),te.return=ae,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case ee:return Ae=zc(te.type,te.key,te.props,null,ae.mode,Ae),Ae.ref=Ol(ae,null,te),Ae.return=ae,Ae;case ie:return te=$h(te,ae.mode,Ae),te.return=ae,te;case tt:var Re=te._init;return Le(ae,Re(te._payload),Ae)}if(qr(te)||Qe(te))return te=Aa(te,ae.mode,Ae,null),te.return=ae,te;wc(ae,te)}return null}function be(ae,te,Ae,Re){var et=te!==null?te.key:null;if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return et!==null?null:W(ae,te,""+Ae,Re);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case ee:return Ae.key===et?J(ae,te,Ae,Re):null;case ie:return Ae.key===et?fe(ae,te,Ae,Re):null;case tt:return et=Ae._init,be(ae,te,et(Ae._payload),Re)}if(qr(Ae)||Qe(Ae))return et!==null?null:xe(ae,te,Ae,Re,null);wc(ae,Ae)}return null}function He(ae,te,Ae,Re,et){if(typeof Re=="string"&&Re!==""||typeof Re=="number")return ae=ae.get(Ae)||null,W(te,ae,""+Re,et);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case ee:return ae=ae.get(Re.key===null?Ae:Re.key)||null,J(te,ae,Re,et);case ie:return ae=ae.get(Re.key===null?Ae:Re.key)||null,fe(te,ae,Re,et);case tt:var ut=Re._init;return He(ae,te,Ae,ut(Re._payload),et)}if(qr(Re)||Qe(Re))return ae=ae.get(Ae)||null,xe(te,ae,Re,et,null);wc(te,Re)}return null}function qe(ae,te,Ae,Re){for(var et=null,ut=null,ct=te,pt=te=0,Hn=null;ct!==null&&pt<Ae.length;pt++){ct.index>pt?(Hn=ct,ct=null):Hn=ct.sibling;var jt=be(ae,ct,Ae[pt],Re);if(jt===null){ct===null&&(ct=Hn);break}s&&ct&&jt.alternate===null&&l(ae,ct),te=M(jt,te,pt),ut===null?et=jt:ut.sibling=jt,ut=jt,ct=Hn}if(pt===Ae.length)return p(ae,ct),Ge&&Pe(ae,pt),et;if(ct===null){for(;pt<Ae.length;pt++)ct=Le(ae,Ae[pt],Re),ct!==null&&(te=M(ct,te,pt),ut===null?et=ct:ut.sibling=ct,ut=ct);return Ge&&Pe(ae,pt),et}for(ct=w(ae,ct);pt<Ae.length;pt++)Hn=He(ct,ae,pt,Ae[pt],Re),Hn!==null&&(s&&Hn.alternate!==null&&ct.delete(Hn.key===null?pt:Hn.key),te=M(Hn,te,pt),ut===null?et=Hn:ut.sibling=Hn,ut=Hn);return s&&ct.forEach(function(ho){return l(ae,ho)}),Ge&&Pe(ae,pt),et}function Je(ae,te,Ae,Re){var et=Qe(Ae);if(typeof et!="function")throw Error(t(150));if(Ae=et.call(Ae),Ae==null)throw Error(t(151));for(var ut=et=null,ct=te,pt=te=0,Hn=null,jt=Ae.next();ct!==null&&!jt.done;pt++,jt=Ae.next()){ct.index>pt?(Hn=ct,ct=null):Hn=ct.sibling;var ho=be(ae,ct,jt.value,Re);if(ho===null){ct===null&&(ct=Hn);break}s&&ct&&ho.alternate===null&&l(ae,ct),te=M(ho,te,pt),ut===null?et=ho:ut.sibling=ho,ut=ho,ct=Hn}if(jt.done)return p(ae,ct),Ge&&Pe(ae,pt),et;if(ct===null){for(;!jt.done;pt++,jt=Ae.next())jt=Le(ae,jt.value,Re),jt!==null&&(te=M(jt,te,pt),ut===null?et=jt:ut.sibling=jt,ut=jt);return Ge&&Pe(ae,pt),et}for(ct=w(ae,ct);!jt.done;pt++,jt=Ae.next())jt=He(ct,ae,pt,jt.value,Re),jt!==null&&(s&&jt.alternate!==null&&ct.delete(jt.key===null?pt:jt.key),te=M(jt,te,pt),ut===null?et=jt:ut.sibling=jt,ut=jt);return s&&ct.forEach(function(SE){return l(ae,SE)}),Ge&&Pe(ae,pt),et}function xn(ae,te,Ae,Re){if(typeof Ae=="object"&&Ae!==null&&Ae.type===pe&&Ae.key===null&&(Ae=Ae.props.children),typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case ee:e:{for(var et=Ae.key,ut=te;ut!==null;){if(ut.key===et){if(et=Ae.type,et===pe){if(ut.tag===7){p(ae,ut.sibling),te=x(ut,Ae.props.children),te.return=ae,ae=te;break e}}else if(ut.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===tt&&lm(et)===ut.type){p(ae,ut.sibling),te=x(ut,Ae.props),te.ref=Ol(ae,ut,Ae),te.return=ae,ae=te;break e}p(ae,ut);break}else l(ae,ut);ut=ut.sibling}Ae.type===pe?(te=Aa(Ae.props.children,ae.mode,Re,Ae.key),te.return=ae,ae=te):(Re=zc(Ae.type,Ae.key,Ae.props,null,ae.mode,Re),Re.ref=Ol(ae,te,Ae),Re.return=ae,ae=Re)}return O(ae);case ie:e:{for(ut=Ae.key;te!==null;){if(te.key===ut)if(te.tag===4&&te.stateNode.containerInfo===Ae.containerInfo&&te.stateNode.implementation===Ae.implementation){p(ae,te.sibling),te=x(te,Ae.children||[]),te.return=ae,ae=te;break e}else{p(ae,te);break}else l(ae,te);te=te.sibling}te=$h(Ae,ae.mode,Re),te.return=ae,ae=te}return O(ae);case tt:return ut=Ae._init,xn(ae,te,ut(Ae._payload),Re)}if(qr(Ae))return qe(ae,te,Ae,Re);if(Qe(Ae))return Je(ae,te,Ae,Re);wc(ae,Ae)}return typeof Ae=="string"&&Ae!==""||typeof Ae=="number"?(Ae=""+Ae,te!==null&&te.tag===6?(p(ae,te.sibling),te=x(te,Ae),te.return=ae,ae=te):(p(ae,te),te=Yh(Ae,ae.mode,Re),te.return=ae,ae=te),O(ae)):p(ae,te)}return xn}var AA=um(!0),cm=um(!1),Dl={},Qi=oi(Dl),Fl=oi(Dl),Bl=oi(Dl);function na(s){if(s===Dl)throw Error(t(174));return s}function ch(s,l){switch(Wt(Bl,l),Wt(Fl,s),Wt(Qi,Dl),s=l.nodeType,s){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:js(null,"");break;default:s=s===8?l.parentNode:l,l=s.namespaceURI||null,s=s.tagName,l=js(l,s)}Yt(Qi),Wt(Qi,l)}function lA(){Yt(Qi),Yt(Fl),Yt(Bl)}function fm(s){na(Bl.current);var l=na(Qi.current),p=js(l,s.type);l!==p&&(Wt(Fl,s),Wt(Qi,p))}function fh(s){Fl.current===s&&(Yt(Qi),Yt(Fl))}var dn=oi(0);function bc(s){for(var l=s;l!==null;){if(l.tag===13){var p=l.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var hh=[];function dh(){for(var s=0;s<hh.length;s++)hh[s]._workInProgressVersionPrimary=null;hh.length=0}var Ec=q.ReactCurrentDispatcher,gh=q.ReactCurrentBatchConfig,ra=0,gn=null,In=null,jn=null,Tc=!1,Nl=!1,Ul=0,$3=0;function ar(){throw Error(t(321))}function ph(s,l){if(l===null)return!1;for(var p=0;p<l.length&&p<s.length;p++)if(!Br(s[p],l[p]))return!1;return!0}function mh(s,l,p,w,x,M){if(ra=M,gn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Ec.current=s===null||s.memoizedState===null?K3:J3,s=p(w,x),Nl){M=0;do{if(Nl=!1,Ul=0,25<=M)throw Error(t(301));M+=1,jn=In=null,l.updateQueue=null,Ec.current=eE,s=p(w,x)}while(Nl)}if(Ec.current=Cc,l=In!==null&&In.next!==null,ra=0,jn=In=gn=null,Tc=!1,l)throw Error(t(300));return s}function vh(){var s=Ul!==0;return Ul=0,s}function Yi(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jn===null?gn.memoizedState=jn=s:jn=jn.next=s,jn}function Ai(){if(In===null){var s=gn.alternate;s=s!==null?s.memoizedState:null}else s=In.next;var l=jn===null?gn.memoizedState:jn.next;if(l!==null)jn=l,In=s;else{if(s===null)throw Error(t(310));In=s,s={memoizedState:In.memoizedState,baseState:In.baseState,baseQueue:In.baseQueue,queue:In.queue,next:null},jn===null?gn.memoizedState=jn=s:jn=jn.next=s}return jn}function zl(s,l){return typeof l=="function"?l(s):l}function yh(s){var l=Ai(),p=l.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=s;var w=In,x=w.baseQueue,M=p.pending;if(M!==null){if(x!==null){var O=x.next;x.next=M.next,M.next=O}w.baseQueue=x=M,p.pending=null}if(x!==null){M=x.next,w=w.baseState;var W=O=null,J=null,fe=M;do{var xe=fe.lane;if((ra&xe)===xe)J!==null&&(J=J.next={lane:0,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),w=fe.hasEagerState?fe.eagerState:s(w,fe.action);else{var Le={lane:xe,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null};J===null?(W=J=Le,O=w):J=J.next=Le,gn.lanes|=xe,ia|=xe}fe=fe.next}while(fe!==null&&fe!==M);J===null?O=w:J.next=W,Br(w,l.memoizedState)||(Cr=!0),l.memoizedState=w,l.baseState=O,l.baseQueue=J,p.lastRenderedState=w}if(s=p.interleaved,s!==null){x=s;do M=x.lane,gn.lanes|=M,ia|=M,x=x.next;while(x!==s)}else x===null&&(p.lanes=0);return[l.memoizedState,p.dispatch]}function _h(s){var l=Ai(),p=l.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=s;var w=p.dispatch,x=p.pending,M=l.memoizedState;if(x!==null){p.pending=null;var O=x=x.next;do M=s(M,O.action),O=O.next;while(O!==x);Br(M,l.memoizedState)||(Cr=!0),l.memoizedState=M,l.baseQueue===null&&(l.baseState=M),p.lastRenderedState=M}return[M,w]}function hm(){}function dm(s,l){var p=gn,w=Ai(),x=l(),M=!Br(w.memoizedState,x);if(M&&(w.memoizedState=x,Cr=!0),w=w.queue,wh(mm.bind(null,p,w,s),[s]),w.getSnapshot!==l||M||jn!==null&&jn.memoizedState.tag&1){if(p.flags|=2048,Vl(9,pm.bind(null,p,w,x,l),void 0,null),Gn===null)throw Error(t(349));(ra&30)!==0||gm(p,l,x)}return x}function gm(s,l,p){s.flags|=16384,s={getSnapshot:l,value:p},l=gn.updateQueue,l===null?(l={lastEffect:null,stores:null},gn.updateQueue=l,l.stores=[s]):(p=l.stores,p===null?l.stores=[s]:p.push(s))}function pm(s,l,p,w){l.value=p,l.getSnapshot=w,vm(l)&&ym(s)}function mm(s,l,p){return p(function(){vm(l)&&ym(s)})}function vm(s){var l=s.getSnapshot;s=s.value;try{var p=l();return!Br(s,p)}catch{return!0}}function ym(s){var l=bs(s,1);l!==null&&Ci(l,s,1,-1)}function _m(s){var l=Yi();return typeof s=="function"&&(s=s()),l.memoizedState=l.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zl,lastRenderedState:s},l.queue=s,s=s.dispatch=q3.bind(null,gn,s),[l.memoizedState,s]}function Vl(s,l,p,w){return s={tag:s,create:l,destroy:p,deps:w,next:null},l=gn.updateQueue,l===null?(l={lastEffect:null,stores:null},gn.updateQueue=l,l.lastEffect=s.next=s):(p=l.lastEffect,p===null?l.lastEffect=s.next=s:(w=p.next,p.next=s,s.next=w,l.lastEffect=s)),s}function wm(){return Ai().memoizedState}function xc(s,l,p,w){var x=Yi();gn.flags|=s,x.memoizedState=Vl(1|l,p,void 0,w===void 0?null:w)}function Sc(s,l,p,w){var x=Ai();w=w===void 0?null:w;var M=void 0;if(In!==null){var O=In.memoizedState;if(M=O.destroy,w!==null&&ph(w,O.deps)){x.memoizedState=Vl(l,p,M,w);return}}gn.flags|=s,x.memoizedState=Vl(1|l,p,M,w)}function bm(s,l){return xc(8390656,8,s,l)}function wh(s,l){return Sc(2048,8,s,l)}function Em(s,l){return Sc(4,2,s,l)}function Tm(s,l){return Sc(4,4,s,l)}function xm(s,l){if(typeof l=="function")return s=s(),l(s),function(){l(null)};if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function Sm(s,l,p){return p=p!=null?p.concat([s]):null,Sc(4,4,xm.bind(null,l,s),p)}function bh(){}function Cm(s,l){var p=Ai();l=l===void 0?null:l;var w=p.memoizedState;return w!==null&&l!==null&&ph(l,w[1])?w[0]:(p.memoizedState=[s,l],s)}function Mm(s,l){var p=Ai();l=l===void 0?null:l;var w=p.memoizedState;return w!==null&&l!==null&&ph(l,w[1])?w[0]:(s=s(),p.memoizedState=[s,l],s)}function Lm(s,l,p){return(ra&21)===0?(s.baseState&&(s.baseState=!1,Cr=!0),s.memoizedState=p):(Br(p,l)||(p=gs(),gn.lanes|=p,ia|=p,s.baseState=!0),l)}function X3(s,l){var p=B;B=p!==0&&4>p?p:4,s(!0);var w=gh.transition;gh.transition={};try{s(!1),l()}finally{B=p,gh.transition=w}}function Pm(){return Ai().memoizedState}function Z3(s,l,p){var w=uo(s);if(p={lane:w,action:p,hasEagerState:!1,eagerState:null,next:null},km(s))Im(l,p);else if(p=tm(s,l,p,w),p!==null){var x=yr();Ci(p,s,w,x),Rm(p,l,w)}}function q3(s,l,p){var w=uo(s),x={lane:w,action:p,hasEagerState:!1,eagerState:null,next:null};if(km(s))Im(l,x);else{var M=s.alternate;if(s.lanes===0&&(M===null||M.lanes===0)&&(M=l.lastRenderedReducer,M!==null))try{var O=l.lastRenderedState,W=M(O,p);if(x.hasEagerState=!0,x.eagerState=W,Br(W,O)){var J=l.interleaved;J===null?(x.next=x,ah(l)):(x.next=J.next,J.next=x),l.interleaved=x;return}}catch{}p=tm(s,l,x,w),p!==null&&(x=yr(),Ci(p,s,w,x),Rm(p,l,w))}}function km(s){var l=s.alternate;return s===gn||l!==null&&l===gn}function Im(s,l){Nl=Tc=!0;var p=s.pending;p===null?l.next=l:(l.next=p.next,p.next=l),s.pending=l}function Rm(s,l,p){if((p&4194240)!==0){var w=l.lanes;w&=s.pendingLanes,p|=w,l.lanes=p,D(s,p)}}var Cc={readContext:ai,useCallback:ar,useContext:ar,useEffect:ar,useImperativeHandle:ar,useInsertionEffect:ar,useLayoutEffect:ar,useMemo:ar,useReducer:ar,useRef:ar,useState:ar,useDebugValue:ar,useDeferredValue:ar,useTransition:ar,useMutableSource:ar,useSyncExternalStore:ar,useId:ar,unstable_isNewReconciler:!1},K3={readContext:ai,useCallback:function(s,l){return Yi().memoizedState=[s,l===void 0?null:l],s},useContext:ai,useEffect:bm,useImperativeHandle:function(s,l,p){return p=p!=null?p.concat([s]):null,xc(4194308,4,xm.bind(null,l,s),p)},useLayoutEffect:function(s,l){return xc(4194308,4,s,l)},useInsertionEffect:function(s,l){return xc(4,2,s,l)},useMemo:function(s,l){var p=Yi();return l=l===void 0?null:l,s=s(),p.memoizedState=[s,l],s},useReducer:function(s,l,p){var w=Yi();return l=p!==void 0?p(l):l,w.memoizedState=w.baseState=l,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:l},w.queue=s,s=s.dispatch=Z3.bind(null,gn,s),[w.memoizedState,s]},useRef:function(s){var l=Yi();return s={current:s},l.memoizedState=s},useState:_m,useDebugValue:bh,useDeferredValue:function(s){return Yi().memoizedState=s},useTransition:function(){var s=_m(!1),l=s[0];return s=X3.bind(null,s[1]),Yi().memoizedState=s,[l,s]},useMutableSource:function(){},useSyncExternalStore:function(s,l,p){var w=gn,x=Yi();if(Ge){if(p===void 0)throw Error(t(407));p=p()}else{if(p=l(),Gn===null)throw Error(t(349));(ra&30)!==0||gm(w,l,p)}x.memoizedState=p;var M={value:p,getSnapshot:l};return x.queue=M,bm(mm.bind(null,w,M,s),[s]),w.flags|=2048,Vl(9,pm.bind(null,w,M,p,l),void 0,null),p},useId:function(){var s=Yi(),l=Gn.identifierPrefix;if(Ge){var p=Ne,w=Ie;p=(w&~(1<<32-Un(w)-1)).toString(32)+p,l=":"+l+"R"+p,p=Ul++,0<p&&(l+="H"+p.toString(32)),l+=":"}else p=$3++,l=":"+l+"r"+p.toString(32)+":";return s.memoizedState=l},unstable_isNewReconciler:!1},J3={readContext:ai,useCallback:Cm,useContext:ai,useEffect:wh,useImperativeHandle:Sm,useInsertionEffect:Em,useLayoutEffect:Tm,useMemo:Mm,useReducer:yh,useRef:wm,useState:function(){return yh(zl)},useDebugValue:bh,useDeferredValue:function(s){var l=Ai();return Lm(l,In.memoizedState,s)},useTransition:function(){var s=yh(zl)[0],l=Ai().memoizedState;return[s,l]},useMutableSource:hm,useSyncExternalStore:dm,useId:Pm,unstable_isNewReconciler:!1},eE={readContext:ai,useCallback:Cm,useContext:ai,useEffect:wh,useImperativeHandle:Sm,useInsertionEffect:Em,useLayoutEffect:Tm,useMemo:Mm,useReducer:_h,useRef:wm,useState:function(){return _h(zl)},useDebugValue:bh,useDeferredValue:function(s){var l=Ai();return In===null?l.memoizedState=s:Lm(l,In.memoizedState,s)},useTransition:function(){var s=_h(zl)[0],l=Ai().memoizedState;return[s,l]},useMutableSource:hm,useSyncExternalStore:dm,useId:Pm,unstable_isNewReconciler:!1};function uA(s,l){try{var p="",w=l;do p+=zt(w),w=w.return;while(w);var x=p}catch(M){x=`
Error generating stack: `+M.message+`
`+M.stack}return{value:s,source:l,stack:x,digest:null}}function Eh(s,l,p){return{value:s,source:null,stack:p??null,digest:l??null}}function Th(s,l){try{console.error(l.value)}catch(p){setTimeout(function(){throw p})}}var tE=typeof WeakMap=="function"?WeakMap:Map;function Om(s,l,p){p=Es(-1,p),p.tag=3,p.payload={element:null};var w=l.value;return p.callback=function(){Oc||(Oc=!0,Uh=w),Th(s,l)},p}function Dm(s,l,p){p=Es(-1,p),p.tag=3;var w=s.type.getDerivedStateFromError;if(typeof w=="function"){var x=l.value;p.payload=function(){return w(x)},p.callback=function(){Th(s,l)}}var M=s.stateNode;return M!==null&&typeof M.componentDidCatch=="function"&&(p.callback=function(){Th(s,l),typeof w!="function"&&(Ao===null?Ao=new Set([this]):Ao.add(this));var O=l.stack;this.componentDidCatch(l.value,{componentStack:O!==null?O:""})}),p}function Fm(s,l,p){var w=s.pingCache;if(w===null){w=s.pingCache=new tE;var x=new Set;w.set(l,x)}else x=w.get(l),x===void 0&&(x=new Set,w.set(l,x));x.has(p)||(x.add(p),s=gE.bind(null,s,l,p),l.then(s,s))}function Bm(s){do{var l;if((l=s.tag===13)&&(l=s.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return s;s=s.return}while(s!==null);return null}function Nm(s,l,p,w,x){return(s.mode&1)===0?(s===l?s.flags|=65536:(s.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(l=Es(-1,1),l.tag=2,oo(p,l,1))),p.lanes|=1),s):(s.flags|=65536,s.lanes=x,s)}var nE=q.ReactCurrentOwner,Cr=!1;function vr(s,l,p,w){l.child=s===null?cm(l,null,p,w):AA(l,s.child,p,w)}function Um(s,l,p,w,x){p=p.render;var M=l.ref;return aA(l,x),w=mh(s,l,p,w,M,x),p=vh(),s!==null&&!Cr?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~x,Ts(s,l,x)):(Ge&&p&&Bt(l),l.flags|=1,vr(s,l,w,x),l.child)}function zm(s,l,p,w,x){if(s===null){var M=p.type;return typeof M=="function"&&!Qh(M)&&M.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(l.tag=15,l.type=M,Vm(s,l,M,w,x)):(s=zc(p.type,null,w,l,l.mode,x),s.ref=l.ref,s.return=l,l.child=s)}if(M=s.child,(s.lanes&x)===0){var O=M.memoizedProps;if(p=p.compare,p=p!==null?p:Xo,p(O,w)&&s.ref===l.ref)return Ts(s,l,x)}return l.flags|=1,s=fo(M,w),s.ref=l.ref,s.return=l,l.child=s}function Vm(s,l,p,w,x){if(s!==null){var M=s.memoizedProps;if(Xo(M,w)&&s.ref===l.ref)if(Cr=!1,l.pendingProps=w=M,(s.lanes&x)!==0)(s.flags&131072)!==0&&(Cr=!0);else return l.lanes=s.lanes,Ts(s,l,x)}return xh(s,l,p,w,x)}function jm(s,l,p){var w=l.pendingProps,x=w.children,M=s!==null?s.memoizedState:null;if(w.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Wt(fA,Vr),Vr|=p;else{if((p&1073741824)===0)return s=M!==null?M.baseLanes|p:p,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:s,cachePool:null,transitions:null},l.updateQueue=null,Wt(fA,Vr),Vr|=s,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=M!==null?M.baseLanes:p,Wt(fA,Vr),Vr|=w}else M!==null?(w=M.baseLanes|p,l.memoizedState=null):w=p,Wt(fA,Vr),Vr|=w;return vr(s,l,x,p),l.child}function Gm(s,l){var p=l.ref;(s===null&&p!==null||s!==null&&s.ref!==p)&&(l.flags|=512,l.flags|=2097152)}function xh(s,l,p,w,x){var M=c(p)?A:Pn.current;return M=a(l,M),aA(l,x),p=mh(s,l,p,w,M,x),w=vh(),s!==null&&!Cr?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~x,Ts(s,l,x)):(Ge&&w&&Bt(l),l.flags|=1,vr(s,l,p,x),l.child)}function Hm(s,l,p,w,x){if(c(p)){var M=!0;y(l)}else M=!1;if(aA(l,x),l.stateNode===null)Lc(s,l),am(l,p,w),uh(l,p,w,x),w=!0;else if(s===null){var O=l.stateNode,W=l.memoizedProps;O.props=W;var J=O.context,fe=p.contextType;typeof fe=="object"&&fe!==null?fe=ai(fe):(fe=c(p)?A:Pn.current,fe=a(l,fe));var xe=p.getDerivedStateFromProps,Le=typeof xe=="function"||typeof O.getSnapshotBeforeUpdate=="function";Le||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(W!==w||J!==fe)&&Am(l,O,w,fe),so=!1;var be=l.memoizedState;O.state=be,yc(l,w,O,x),J=l.memoizedState,W!==w||be!==J||hn.current||so?(typeof xe=="function"&&(lh(l,p,xe,w),J=l.memoizedState),(W=so||om(l,p,W,w,be,J,fe))?(Le||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(l.flags|=4194308)):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=w,l.memoizedState=J),O.props=w,O.state=J,O.context=fe,w=W):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),w=!1)}else{O=l.stateNode,nm(s,l),W=l.memoizedProps,fe=l.type===l.elementType?W:Ti(l.type,W),O.props=fe,Le=l.pendingProps,be=O.context,J=p.contextType,typeof J=="object"&&J!==null?J=ai(J):(J=c(p)?A:Pn.current,J=a(l,J));var He=p.getDerivedStateFromProps;(xe=typeof He=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(W!==Le||be!==J)&&Am(l,O,w,J),so=!1,be=l.memoizedState,O.state=be,yc(l,w,O,x);var qe=l.memoizedState;W!==Le||be!==qe||hn.current||so?(typeof He=="function"&&(lh(l,p,He,w),qe=l.memoizedState),(fe=so||om(l,p,fe,w,be,qe,J)||!1)?(xe||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(w,qe,J),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(w,qe,J)),typeof O.componentDidUpdate=="function"&&(l.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof O.componentDidUpdate!="function"||W===s.memoizedProps&&be===s.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||W===s.memoizedProps&&be===s.memoizedState||(l.flags|=1024),l.memoizedProps=w,l.memoizedState=qe),O.props=w,O.state=qe,O.context=J,w=fe):(typeof O.componentDidUpdate!="function"||W===s.memoizedProps&&be===s.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||W===s.memoizedProps&&be===s.memoizedState||(l.flags|=1024),w=!1)}return Sh(s,l,p,w,M,x)}function Sh(s,l,p,w,x,M){Gm(s,l);var O=(l.flags&128)!==0;if(!w&&!O)return x&&b(l,p,!1),Ts(s,l,M);w=l.stateNode,nE.current=l;var W=O&&typeof p.getDerivedStateFromError!="function"?null:w.render();return l.flags|=1,s!==null&&O?(l.child=AA(l,s.child,null,M),l.child=AA(l,null,W,M)):vr(s,l,W,M),l.memoizedState=w.state,x&&b(l,p,!0),l.child}function Wm(s){var l=s.stateNode;l.pendingContext?g(s,l.pendingContext,l.pendingContext!==l.context):l.context&&g(s,l.context,!1),ch(s,l.containerInfo)}function Qm(s,l,p,w,x){return sA(),nh(x),l.flags|=256,vr(s,l,p,w),l.child}var Ch={dehydrated:null,treeContext:null,retryLane:0};function Mh(s){return{baseLanes:s,cachePool:null,transitions:null}}function Ym(s,l,p){var w=l.pendingProps,x=dn.current,M=!1,O=(l.flags&128)!==0,W;if((W=O)||(W=s!==null&&s.memoizedState===null?!1:(x&2)!==0),W?(M=!0,l.flags&=-129):(s===null||s.memoizedState!==null)&&(x|=1),Wt(dn,x&1),s===null)return kn(l),s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((l.mode&1)===0?l.lanes=1:s.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(O=w.children,s=w.fallback,M?(w=l.mode,M=l.child,O={mode:"hidden",children:O},(w&1)===0&&M!==null?(M.childLanes=0,M.pendingProps=O):M=Vc(O,w,0,null),s=Aa(s,w,p,null),M.return=l,s.return=l,M.sibling=s,l.child=M,l.child.memoizedState=Mh(p),l.memoizedState=Ch,s):Lh(l,O));if(x=s.memoizedState,x!==null&&(W=x.dehydrated,W!==null))return rE(s,l,O,w,W,x,p);if(M){M=w.fallback,O=l.mode,x=s.child,W=x.sibling;var J={mode:"hidden",children:w.children};return(O&1)===0&&l.child!==x?(w=l.child,w.childLanes=0,w.pendingProps=J,l.deletions=null):(w=fo(x,J),w.subtreeFlags=x.subtreeFlags&14680064),W!==null?M=fo(W,M):(M=Aa(M,O,p,null),M.flags|=2),M.return=l,w.return=l,w.sibling=M,l.child=w,w=M,M=l.child,O=s.child.memoizedState,O=O===null?Mh(p):{baseLanes:O.baseLanes|p,cachePool:null,transitions:O.transitions},M.memoizedState=O,M.childLanes=s.childLanes&~p,l.memoizedState=Ch,w}return M=s.child,s=M.sibling,w=fo(M,{mode:"visible",children:w.children}),(l.mode&1)===0&&(w.lanes=p),w.return=l,w.sibling=null,s!==null&&(p=l.deletions,p===null?(l.deletions=[s],l.flags|=16):p.push(s)),l.child=w,l.memoizedState=null,w}function Lh(s,l){return l=Vc({mode:"visible",children:l},s.mode,0,null),l.return=s,s.child=l}function Mc(s,l,p,w){return w!==null&&nh(w),AA(l,s.child,null,p),s=Lh(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function rE(s,l,p,w,x,M,O){if(p)return l.flags&256?(l.flags&=-257,w=Eh(Error(t(422))),Mc(s,l,O,w)):l.memoizedState!==null?(l.child=s.child,l.flags|=128,null):(M=w.fallback,x=l.mode,w=Vc({mode:"visible",children:w.children},x,0,null),M=Aa(M,x,O,null),M.flags|=2,w.return=l,M.return=l,w.sibling=M,l.child=w,(l.mode&1)!==0&&AA(l,s.child,null,O),l.child.memoizedState=Mh(O),l.memoizedState=Ch,M);if((l.mode&1)===0)return Mc(s,l,O,null);if(x.data==="$!"){if(w=x.nextSibling&&x.nextSibling.dataset,w)var W=w.dgst;return w=W,M=Error(t(419)),w=Eh(M,w,void 0),Mc(s,l,O,w)}if(W=(O&s.childLanes)!==0,Cr||W){if(w=Gn,w!==null){switch(O&-O){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(w.suspendedLanes|O))!==0?0:x,x!==0&&x!==M.retryLane&&(M.retryLane=x,bs(s,x),Ci(w,s,x,-1))}return Wh(),w=Eh(Error(t(421))),Mc(s,l,O,w)}return x.data==="$?"?(l.flags|=128,l.child=s.child,l=pE.bind(null,s),x._reactRetry=l,null):(s=M.treeContext,st=ot(x.nextSibling),dt=l,Ge=!0,At=null,s!==null&&(se[oe++]=Ie,se[oe++]=Ne,se[oe++]=ne,Ie=s.id,Ne=s.overflow,ne=l),l=Lh(l,w.children),l.flags|=4096,l)}function $m(s,l,p){s.lanes|=l;var w=s.alternate;w!==null&&(w.lanes|=l),oh(s.return,l,p)}function Ph(s,l,p,w,x){var M=s.memoizedState;M===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:w,tail:p,tailMode:x}:(M.isBackwards=l,M.rendering=null,M.renderingStartTime=0,M.last=w,M.tail=p,M.tailMode=x)}function Xm(s,l,p){var w=l.pendingProps,x=w.revealOrder,M=w.tail;if(vr(s,l,w.children,p),w=dn.current,(w&2)!==0)w=w&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&$m(s,p,l);else if(s.tag===19)$m(s,p,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}w&=1}if(Wt(dn,w),(l.mode&1)===0)l.memoizedState=null;else switch(x){case"forwards":for(p=l.child,x=null;p!==null;)s=p.alternate,s!==null&&bc(s)===null&&(x=p),p=p.sibling;p=x,p===null?(x=l.child,l.child=null):(x=p.sibling,p.sibling=null),Ph(l,!1,x,p,M);break;case"backwards":for(p=null,x=l.child,l.child=null;x!==null;){if(s=x.alternate,s!==null&&bc(s)===null){l.child=x;break}s=x.sibling,x.sibling=p,p=x,x=s}Ph(l,!0,p,null,M);break;case"together":Ph(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Lc(s,l){(l.mode&1)===0&&s!==null&&(s.alternate=null,l.alternate=null,l.flags|=2)}function Ts(s,l,p){if(s!==null&&(l.dependencies=s.dependencies),ia|=l.lanes,(p&l.childLanes)===0)return null;if(s!==null&&l.child!==s.child)throw Error(t(153));if(l.child!==null){for(s=l.child,p=fo(s,s.pendingProps),l.child=p,p.return=l;s.sibling!==null;)s=s.sibling,p=p.sibling=fo(s,s.pendingProps),p.return=l;p.sibling=null}return l.child}function iE(s,l,p){switch(l.tag){case 3:Wm(l),sA();break;case 5:fm(l);break;case 1:c(l.type)&&y(l);break;case 4:ch(l,l.stateNode.containerInfo);break;case 10:var w=l.type._context,x=l.memoizedProps.value;Wt(pc,w._currentValue),w._currentValue=x;break;case 13:if(w=l.memoizedState,w!==null)return w.dehydrated!==null?(Wt(dn,dn.current&1),l.flags|=128,null):(p&l.child.childLanes)!==0?Ym(s,l,p):(Wt(dn,dn.current&1),s=Ts(s,l,p),s!==null?s.sibling:null);Wt(dn,dn.current&1);break;case 19:if(w=(p&l.childLanes)!==0,(s.flags&128)!==0){if(w)return Xm(s,l,p);l.flags|=128}if(x=l.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Wt(dn,dn.current),w)break;return null;case 22:case 23:return l.lanes=0,jm(s,l,p)}return Ts(s,l,p)}var Zm,kh,qm,Km;Zm=function(s,l){for(var p=l.child;p!==null;){if(p.tag===5||p.tag===6)s.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===l)break;for(;p.sibling===null;){if(p.return===null||p.return===l)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},kh=function(){},qm=function(s,l,p,w){var x=s.memoizedProps;if(x!==w){s=l.stateNode,na(Qi.current);var M=null;switch(p){case"input":x=It(s,x),w=It(s,w),M=[];break;case"select":x=K({},x,{value:void 0}),w=K({},w,{value:void 0}),M=[];break;case"textarea":x=cs(s,x),w=cs(s,w),M=[];break;default:typeof x.onClick!="function"&&typeof w.onClick=="function"&&(s.onclick=ea)}fs(p,w);var O;p=null;for(fe in x)if(!w.hasOwnProperty(fe)&&x.hasOwnProperty(fe)&&x[fe]!=null)if(fe==="style"){var W=x[fe];for(O in W)W.hasOwnProperty(O)&&(p||(p={}),p[O]="")}else fe!=="dangerouslySetInnerHTML"&&fe!=="children"&&fe!=="suppressContentEditableWarning"&&fe!=="suppressHydrationWarning"&&fe!=="autoFocus"&&(i.hasOwnProperty(fe)?M||(M=[]):(M=M||[]).push(fe,null));for(fe in w){var J=w[fe];if(W=x?.[fe],w.hasOwnProperty(fe)&&J!==W&&(J!=null||W!=null))if(fe==="style")if(W){for(O in W)!W.hasOwnProperty(O)||J&&J.hasOwnProperty(O)||(p||(p={}),p[O]="");for(O in J)J.hasOwnProperty(O)&&W[O]!==J[O]&&(p||(p={}),p[O]=J[O])}else p||(M||(M=[]),M.push(fe,p)),p=J;else fe==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,W=W?W.__html:void 0,J!=null&&W!==J&&(M=M||[]).push(fe,J)):fe==="children"?typeof J!="string"&&typeof J!="number"||(M=M||[]).push(fe,""+J):fe!=="suppressContentEditableWarning"&&fe!=="suppressHydrationWarning"&&(i.hasOwnProperty(fe)?(J!=null&&fe==="onScroll"&&en("scroll",s),M||W===J||(M=[])):(M=M||[]).push(fe,J))}p&&(M=M||[]).push("style",p);var fe=M;(l.updateQueue=fe)&&(l.flags|=4)}},Km=function(s,l,p,w){p!==w&&(l.flags|=4)};function jl(s,l){if(!Ge)switch(s.tailMode){case"hidden":l=s.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?s.tail=null:p.sibling=null;break;case"collapsed":p=s.tail;for(var w=null;p!==null;)p.alternate!==null&&(w=p),p=p.sibling;w===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:w.sibling=null}}function Ar(s){var l=s.alternate!==null&&s.alternate.child===s.child,p=0,w=0;if(l)for(var x=s.child;x!==null;)p|=x.lanes|x.childLanes,w|=x.subtreeFlags&14680064,w|=x.flags&14680064,x.return=s,x=x.sibling;else for(x=s.child;x!==null;)p|=x.lanes|x.childLanes,w|=x.subtreeFlags,w|=x.flags,x.return=s,x=x.sibling;return s.subtreeFlags|=w,s.childLanes=p,l}function sE(s,l,p){var w=l.pendingProps;switch(Pt(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ar(l),null;case 1:return c(l.type)&&h(),Ar(l),null;case 3:return w=l.stateNode,lA(),Yt(hn),Yt(Pn),dh(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(s===null||s.child===null)&&(gc(l)?l.flags|=4:s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,At!==null&&(jh(At),At=null))),kh(s,l),Ar(l),null;case 5:fh(l);var x=na(Bl.current);if(p=l.type,s!==null&&l.stateNode!=null)qm(s,l,p,w,x),s.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!w){if(l.stateNode===null)throw Error(t(166));return Ar(l),null}if(s=na(Qi.current),gc(l)){w=l.stateNode,p=l.type;var M=l.memoizedProps;switch(w[tn]=l,w[io]=M,s=(l.mode&1)!==0,p){case"dialog":en("cancel",w),en("close",w);break;case"iframe":case"object":case"embed":en("load",w);break;case"video":case"audio":for(x=0;x<qo.length;x++)en(qo[x],w);break;case"source":en("error",w);break;case"img":case"image":case"link":en("error",w),en("load",w);break;case"details":en("toggle",w);break;case"input":An(w,M),en("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!M.multiple},en("invalid",w);break;case"textarea":Po(w,M),en("invalid",w)}fs(p,M),x=null;for(var O in M)if(M.hasOwnProperty(O)){var W=M[O];O==="children"?typeof W=="string"?w.textContent!==W&&(M.suppressHydrationWarning!==!0&&Jo(w.textContent,W,s),x=["children",W]):typeof W=="number"&&w.textContent!==""+W&&(M.suppressHydrationWarning!==!0&&Jo(w.textContent,W,s),x=["children",""+W]):i.hasOwnProperty(O)&&W!=null&&O==="onScroll"&&en("scroll",w)}switch(p){case"input":xt(w),Er(w,M,!0);break;case"textarea":xt(w),Vs(w);break;case"select":case"option":break;default:typeof M.onClick=="function"&&(w.onclick=ea)}w=x,l.updateQueue=w,w!==null&&(l.flags|=4)}else{O=x.nodeType===9?x:x.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Ia(p)),s==="http://www.w3.org/1999/xhtml"?p==="script"?(s=O.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof w.is=="string"?s=O.createElement(p,{is:w.is}):(s=O.createElement(p),p==="select"&&(O=s,w.multiple?O.multiple=!0:w.size&&(O.size=w.size))):s=O.createElementNS(s,p),s[tn]=l,s[io]=w,Zm(s,l,!1,!1),l.stateNode=s;e:{switch(O=Ro(p,w),p){case"dialog":en("cancel",s),en("close",s),x=w;break;case"iframe":case"object":case"embed":en("load",s),x=w;break;case"video":case"audio":for(x=0;x<qo.length;x++)en(qo[x],s);x=w;break;case"source":en("error",s),x=w;break;case"img":case"image":case"link":en("error",s),en("load",s),x=w;break;case"details":en("toggle",s),x=w;break;case"input":An(s,w),x=It(s,w),en("invalid",s);break;case"option":x=w;break;case"select":s._wrapperState={wasMultiple:!!w.multiple},x=K({},w,{value:void 0}),en("invalid",s);break;case"textarea":Po(s,w),x=cs(s,w),en("invalid",s);break;default:x=w}fs(p,x),W=x;for(M in W)if(W.hasOwnProperty(M)){var J=W[M];M==="style"?Oa(s,J):M==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,J!=null&&ko(s,J)):M==="children"?typeof J=="string"?(p!=="textarea"||J!=="")&&Ri(s,J):typeof J=="number"&&Ri(s,""+J):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(i.hasOwnProperty(M)?J!=null&&M==="onScroll"&&en("scroll",s):J!=null&&X(s,M,J,O))}switch(p){case"input":xt(s),Er(s,w,!1);break;case"textarea":xt(s),Vs(s);break;case"option":w.value!=null&&s.setAttribute("value",""+Ct(w.value));break;case"select":s.multiple=!!w.multiple,M=w.value,M!=null?Xt(s,!!w.multiple,M,!1):w.defaultValue!=null&&Xt(s,!!w.multiple,w.defaultValue,!0);break;default:typeof x.onClick=="function"&&(s.onclick=ea)}switch(p){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Ar(l),null;case 6:if(s&&l.stateNode!=null)Km(s,l,s.memoizedProps,w);else{if(typeof w!="string"&&l.stateNode===null)throw Error(t(166));if(p=na(Bl.current),na(Qi.current),gc(l)){if(w=l.stateNode,p=l.memoizedProps,w[tn]=l,(M=w.nodeValue!==p)&&(s=dt,s!==null))switch(s.tag){case 3:Jo(w.nodeValue,p,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Jo(w.nodeValue,p,(s.mode&1)!==0)}M&&(l.flags|=4)}else w=(p.nodeType===9?p:p.ownerDocument).createTextNode(w),w[tn]=l,l.stateNode=w}return Ar(l),null;case 13:if(Yt(dn),w=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Ge&&st!==null&&(l.mode&1)!==0&&(l.flags&128)===0)em(),sA(),l.flags|=98560,M=!1;else if(M=gc(l),w!==null&&w.dehydrated!==null){if(s===null){if(!M)throw Error(t(318));if(M=l.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(t(317));M[tn]=l}else sA(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Ar(l),M=!1}else At!==null&&(jh(At),At=null),M=!0;if(!M)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=p,l):(w=w!==null,w!==(s!==null&&s.memoizedState!==null)&&w&&(l.child.flags|=8192,(l.mode&1)!==0&&(s===null||(dn.current&1)!==0?Rn===0&&(Rn=3):Wh())),l.updateQueue!==null&&(l.flags|=4),Ar(l),null);case 4:return lA(),kh(s,l),s===null&&ro(l.stateNode.containerInfo),Ar(l),null;case 10:return sh(l.type._context),Ar(l),null;case 17:return c(l.type)&&h(),Ar(l),null;case 19:if(Yt(dn),M=l.memoizedState,M===null)return Ar(l),null;if(w=(l.flags&128)!==0,O=M.rendering,O===null)if(w)jl(M,!1);else{if(Rn!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(O=bc(s),O!==null){for(l.flags|=128,jl(M,!1),w=O.updateQueue,w!==null&&(l.updateQueue=w,l.flags|=4),l.subtreeFlags=0,w=p,p=l.child;p!==null;)M=p,s=w,M.flags&=14680066,O=M.alternate,O===null?(M.childLanes=0,M.lanes=s,M.child=null,M.subtreeFlags=0,M.memoizedProps=null,M.memoizedState=null,M.updateQueue=null,M.dependencies=null,M.stateNode=null):(M.childLanes=O.childLanes,M.lanes=O.lanes,M.child=O.child,M.subtreeFlags=0,M.deletions=null,M.memoizedProps=O.memoizedProps,M.memoizedState=O.memoizedState,M.updateQueue=O.updateQueue,M.type=O.type,s=O.dependencies,M.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),p=p.sibling;return Wt(dn,dn.current&1|2),l.child}s=s.sibling}M.tail!==null&&Ot()>hA&&(l.flags|=128,w=!0,jl(M,!1),l.lanes=4194304)}else{if(!w)if(s=bc(O),s!==null){if(l.flags|=128,w=!0,p=s.updateQueue,p!==null&&(l.updateQueue=p,l.flags|=4),jl(M,!0),M.tail===null&&M.tailMode==="hidden"&&!O.alternate&&!Ge)return Ar(l),null}else 2*Ot()-M.renderingStartTime>hA&&p!==1073741824&&(l.flags|=128,w=!0,jl(M,!1),l.lanes=4194304);M.isBackwards?(O.sibling=l.child,l.child=O):(p=M.last,p!==null?p.sibling=O:l.child=O,M.last=O)}return M.tail!==null?(l=M.tail,M.rendering=l,M.tail=l.sibling,M.renderingStartTime=Ot(),l.sibling=null,p=dn.current,Wt(dn,w?p&1|2:p&1),l):(Ar(l),null);case 22:case 23:return Hh(),w=l.memoizedState!==null,s!==null&&s.memoizedState!==null!==w&&(l.flags|=8192),w&&(l.mode&1)!==0?(Vr&1073741824)!==0&&(Ar(l),l.subtreeFlags&6&&(l.flags|=8192)):Ar(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function oE(s,l){switch(Pt(l),l.tag){case 1:return c(l.type)&&h(),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return lA(),Yt(hn),Yt(Pn),dh(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 5:return fh(l),null;case 13:if(Yt(dn),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(t(340));sA()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Yt(dn),null;case 4:return lA(),null;case 10:return sh(l.type._context),null;case 22:case 23:return Hh(),null;case 24:return null;default:return null}}var Pc=!1,lr=!1,aE=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function cA(s,l){var p=s.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(w){vn(s,l,w)}else p.current=null}function Ih(s,l,p){try{p()}catch(w){vn(s,l,w)}}var Jm=!1;function AE(s,l){if(rA=Uo,s=Ka(),wl(s)){if("selectionStart"in s)var p={start:s.selectionStart,end:s.selectionEnd};else e:{p=(p=s.ownerDocument)&&p.defaultView||window;var w=p.getSelection&&p.getSelection();if(w&&w.rangeCount!==0){p=w.anchorNode;var x=w.anchorOffset,M=w.focusNode;w=w.focusOffset;try{p.nodeType,M.nodeType}catch{p=null;break e}var O=0,W=-1,J=-1,fe=0,xe=0,Le=s,be=null;t:for(;;){for(var He;Le!==p||x!==0&&Le.nodeType!==3||(W=O+x),Le!==M||w!==0&&Le.nodeType!==3||(J=O+w),Le.nodeType===3&&(O+=Le.nodeValue.length),(He=Le.firstChild)!==null;)be=Le,Le=He;for(;;){if(Le===s)break t;if(be===p&&++fe===x&&(W=O),be===M&&++xe===w&&(J=O),(He=Le.nextSibling)!==null)break;Le=be,be=Le.parentNode}Le=He}p=W===-1||J===-1?null:{start:W,end:J}}else p=null}p=p||{start:0,end:0}}else p=null;for(iA={focusedElem:s,selectionRange:p},Uo=!1,Xe=l;Xe!==null;)if(l=Xe,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,Xe=s;else for(;Xe!==null;){l=Xe;try{var qe=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(qe!==null){var Je=qe.memoizedProps,xn=qe.memoizedState,ae=l.stateNode,te=ae.getSnapshotBeforeUpdate(l.elementType===l.type?Je:Ti(l.type,Je),xn);ae.__reactInternalSnapshotBeforeUpdate=te}break;case 3:var Ae=l.stateNode.containerInfo;Ae.nodeType===1?Ae.textContent="":Ae.nodeType===9&&Ae.documentElement&&Ae.removeChild(Ae.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Re){vn(l,l.return,Re)}if(s=l.sibling,s!==null){s.return=l.return,Xe=s;break}Xe=l.return}return qe=Jm,Jm=!1,qe}function Gl(s,l,p){var w=l.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var x=w=w.next;do{if((x.tag&s)===s){var M=x.destroy;x.destroy=void 0,M!==void 0&&Ih(l,p,M)}x=x.next}while(x!==w)}}function kc(s,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var p=l=l.next;do{if((p.tag&s)===s){var w=p.create;p.destroy=w()}p=p.next}while(p!==l)}}function Rh(s){var l=s.ref;if(l!==null){var p=s.stateNode;s.tag,s=p,typeof l=="function"?l(s):l.current=s}}function e1(s){var l=s.alternate;l!==null&&(s.alternate=null,e1(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&(delete l[tn],delete l[io],delete l[Ei],delete l[th],delete l[Vn])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function t1(s){return s.tag===5||s.tag===3||s.tag===4}function n1(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||t1(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Oh(s,l,p){var w=s.tag;if(w===5||w===6)s=s.stateNode,l?p.nodeType===8?p.parentNode.insertBefore(s,l):p.insertBefore(s,l):(p.nodeType===8?(l=p.parentNode,l.insertBefore(s,p)):(l=p,l.appendChild(s)),p=p._reactRootContainer,p!=null||l.onclick!==null||(l.onclick=ea));else if(w!==4&&(s=s.child,s!==null))for(Oh(s,l,p),s=s.sibling;s!==null;)Oh(s,l,p),s=s.sibling}function Dh(s,l,p){var w=s.tag;if(w===5||w===6)s=s.stateNode,l?p.insertBefore(s,l):p.appendChild(s);else if(w!==4&&(s=s.child,s!==null))for(Dh(s,l,p),s=s.sibling;s!==null;)Dh(s,l,p),s=s.sibling}var Zn=null,xi=!1;function ao(s,l,p){for(p=p.child;p!==null;)r1(s,l,p),p=p.sibling}function r1(s,l,p){if(gr&&typeof gr.onCommitFiberUnmount=="function")try{gr.onCommitFiberUnmount(Xn,p)}catch{}switch(p.tag){case 5:lr||cA(p,l);case 6:var w=Zn,x=xi;Zn=null,ao(s,l,p),Zn=w,xi=x,Zn!==null&&(xi?(s=Zn,p=p.stateNode,s.nodeType===8?s.parentNode.removeChild(p):s.removeChild(p)):Zn.removeChild(p.stateNode));break;case 18:Zn!==null&&(xi?(s=Zn,p=p.stateNode,s.nodeType===8?Sr(s.parentNode,p):s.nodeType===1&&Sr(s,p),Tn(s)):Sr(Zn,p.stateNode));break;case 4:w=Zn,x=xi,Zn=p.stateNode.containerInfo,xi=!0,ao(s,l,p),Zn=w,xi=x;break;case 0:case 11:case 14:case 15:if(!lr&&(w=p.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){x=w=w.next;do{var M=x,O=M.destroy;M=M.tag,O!==void 0&&((M&2)!==0||(M&4)!==0)&&Ih(p,l,O),x=x.next}while(x!==w)}ao(s,l,p);break;case 1:if(!lr&&(cA(p,l),w=p.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=p.memoizedProps,w.state=p.memoizedState,w.componentWillUnmount()}catch(W){vn(p,l,W)}ao(s,l,p);break;case 21:ao(s,l,p);break;case 22:p.mode&1?(lr=(w=lr)||p.memoizedState!==null,ao(s,l,p),lr=w):ao(s,l,p);break;default:ao(s,l,p)}}function i1(s){var l=s.updateQueue;if(l!==null){s.updateQueue=null;var p=s.stateNode;p===null&&(p=s.stateNode=new aE),l.forEach(function(w){var x=mE.bind(null,s,w);p.has(w)||(p.add(w),w.then(x,x))})}}function Si(s,l){var p=l.deletions;if(p!==null)for(var w=0;w<p.length;w++){var x=p[w];try{var M=s,O=l,W=O;e:for(;W!==null;){switch(W.tag){case 5:Zn=W.stateNode,xi=!1;break e;case 3:Zn=W.stateNode.containerInfo,xi=!0;break e;case 4:Zn=W.stateNode.containerInfo,xi=!0;break e}W=W.return}if(Zn===null)throw Error(t(160));r1(M,O,x),Zn=null,xi=!1;var J=x.alternate;J!==null&&(J.return=null),x.return=null}catch(fe){vn(x,l,fe)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)s1(l,s),l=l.sibling}function s1(s,l){var p=s.alternate,w=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Si(l,s),$i(s),w&4){try{Gl(3,s,s.return),kc(3,s)}catch(Je){vn(s,s.return,Je)}try{Gl(5,s,s.return)}catch(Je){vn(s,s.return,Je)}}break;case 1:Si(l,s),$i(s),w&512&&p!==null&&cA(p,p.return);break;case 5:if(Si(l,s),$i(s),w&512&&p!==null&&cA(p,p.return),s.flags&32){var x=s.stateNode;try{Ri(x,"")}catch(Je){vn(s,s.return,Je)}}if(w&4&&(x=s.stateNode,x!=null)){var M=s.memoizedProps,O=p!==null?p.memoizedProps:M,W=s.type,J=s.updateQueue;if(s.updateQueue=null,J!==null)try{W==="input"&&M.type==="radio"&&M.name!=null&&$t(x,M),Ro(W,O);var fe=Ro(W,M);for(O=0;O<J.length;O+=2){var xe=J[O],Le=J[O+1];xe==="style"?Oa(x,Le):xe==="dangerouslySetInnerHTML"?ko(x,Le):xe==="children"?Ri(x,Le):X(x,xe,Le,fe)}switch(W){case"input":Jt(x,M);break;case"textarea":pi(x,M);break;case"select":var be=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!M.multiple;var He=M.value;He!=null?Xt(x,!!M.multiple,He,!1):be!==!!M.multiple&&(M.defaultValue!=null?Xt(x,!!M.multiple,M.defaultValue,!0):Xt(x,!!M.multiple,M.multiple?[]:"",!1))}x[io]=M}catch(Je){vn(s,s.return,Je)}}break;case 6:if(Si(l,s),$i(s),w&4){if(s.stateNode===null)throw Error(t(162));x=s.stateNode,M=s.memoizedProps;try{x.nodeValue=M}catch(Je){vn(s,s.return,Je)}}break;case 3:if(Si(l,s),$i(s),w&4&&p!==null&&p.memoizedState.isDehydrated)try{Tn(l.containerInfo)}catch(Je){vn(s,s.return,Je)}break;case 4:Si(l,s),$i(s);break;case 13:Si(l,s),$i(s),x=s.child,x.flags&8192&&(M=x.memoizedState!==null,x.stateNode.isHidden=M,!M||x.alternate!==null&&x.alternate.memoizedState!==null||(Nh=Ot())),w&4&&i1(s);break;case 22:if(xe=p!==null&&p.memoizedState!==null,s.mode&1?(lr=(fe=lr)||xe,Si(l,s),lr=fe):Si(l,s),$i(s),w&8192){if(fe=s.memoizedState!==null,(s.stateNode.isHidden=fe)&&!xe&&(s.mode&1)!==0)for(Xe=s,xe=s.child;xe!==null;){for(Le=Xe=xe;Xe!==null;){switch(be=Xe,He=be.child,be.tag){case 0:case 11:case 14:case 15:Gl(4,be,be.return);break;case 1:cA(be,be.return);var qe=be.stateNode;if(typeof qe.componentWillUnmount=="function"){w=be,p=be.return;try{l=w,qe.props=l.memoizedProps,qe.state=l.memoizedState,qe.componentWillUnmount()}catch(Je){vn(w,p,Je)}}break;case 5:cA(be,be.return);break;case 22:if(be.memoizedState!==null){A1(Le);continue}}He!==null?(He.return=be,Xe=He):A1(Le)}xe=xe.sibling}e:for(xe=null,Le=s;;){if(Le.tag===5){if(xe===null){xe=Le;try{x=Le.stateNode,fe?(M=x.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none"):(W=Le.stateNode,J=Le.memoizedProps.style,O=J!=null&&J.hasOwnProperty("display")?J.display:null,W.style.display=Ra("display",O))}catch(Je){vn(s,s.return,Je)}}}else if(Le.tag===6){if(xe===null)try{Le.stateNode.nodeValue=fe?"":Le.memoizedProps}catch(Je){vn(s,s.return,Je)}}else if((Le.tag!==22&&Le.tag!==23||Le.memoizedState===null||Le===s)&&Le.child!==null){Le.child.return=Le,Le=Le.child;continue}if(Le===s)break e;for(;Le.sibling===null;){if(Le.return===null||Le.return===s)break e;xe===Le&&(xe=null),Le=Le.return}xe===Le&&(xe=null),Le.sibling.return=Le.return,Le=Le.sibling}}break;case 19:Si(l,s),$i(s),w&4&&i1(s);break;case 21:break;default:Si(l,s),$i(s)}}function $i(s){var l=s.flags;if(l&2){try{e:{for(var p=s.return;p!==null;){if(t1(p)){var w=p;break e}p=p.return}throw Error(t(160))}switch(w.tag){case 5:var x=w.stateNode;w.flags&32&&(Ri(x,""),w.flags&=-33);var M=n1(s);Dh(s,M,x);break;case 3:case 4:var O=w.stateNode.containerInfo,W=n1(s);Oh(s,W,O);break;default:throw Error(t(161))}}catch(J){vn(s,s.return,J)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function lE(s,l,p){Xe=s,o1(s)}function o1(s,l,p){for(var w=(s.mode&1)!==0;Xe!==null;){var x=Xe,M=x.child;if(x.tag===22&&w){var O=x.memoizedState!==null||Pc;if(!O){var W=x.alternate,J=W!==null&&W.memoizedState!==null||lr;W=Pc;var fe=lr;if(Pc=O,(lr=J)&&!fe)for(Xe=x;Xe!==null;)O=Xe,J=O.child,O.tag===22&&O.memoizedState!==null?l1(x):J!==null?(J.return=O,Xe=J):l1(x);for(;M!==null;)Xe=M,o1(M),M=M.sibling;Xe=x,Pc=W,lr=fe}a1(s)}else(x.subtreeFlags&8772)!==0&&M!==null?(M.return=x,Xe=M):a1(s)}}function a1(s){for(;Xe!==null;){var l=Xe;if((l.flags&8772)!==0){var p=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:lr||kc(5,l);break;case 1:var w=l.stateNode;if(l.flags&4&&!lr)if(p===null)w.componentDidMount();else{var x=l.elementType===l.type?p.memoizedProps:Ti(l.type,p.memoizedProps);w.componentDidUpdate(x,p.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var M=l.updateQueue;M!==null&&im(l,M,w);break;case 3:var O=l.updateQueue;if(O!==null){if(p=null,l.child!==null)switch(l.child.tag){case 5:p=l.child.stateNode;break;case 1:p=l.child.stateNode}im(l,O,p)}break;case 5:var W=l.stateNode;if(p===null&&l.flags&4){p=W;var J=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":J.autoFocus&&p.focus();break;case"img":J.src&&(p.src=J.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var fe=l.alternate;if(fe!==null){var xe=fe.memoizedState;if(xe!==null){var Le=xe.dehydrated;Le!==null&&Tn(Le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}lr||l.flags&512&&Rh(l)}catch(be){vn(l,l.return,be)}}if(l===s){Xe=null;break}if(p=l.sibling,p!==null){p.return=l.return,Xe=p;break}Xe=l.return}}function A1(s){for(;Xe!==null;){var l=Xe;if(l===s){Xe=null;break}var p=l.sibling;if(p!==null){p.return=l.return,Xe=p;break}Xe=l.return}}function l1(s){for(;Xe!==null;){var l=Xe;try{switch(l.tag){case 0:case 11:case 15:var p=l.return;try{kc(4,l)}catch(J){vn(l,p,J)}break;case 1:var w=l.stateNode;if(typeof w.componentDidMount=="function"){var x=l.return;try{w.componentDidMount()}catch(J){vn(l,x,J)}}var M=l.return;try{Rh(l)}catch(J){vn(l,M,J)}break;case 5:var O=l.return;try{Rh(l)}catch(J){vn(l,O,J)}}}catch(J){vn(l,l.return,J)}if(l===s){Xe=null;break}var W=l.sibling;if(W!==null){W.return=l.return,Xe=W;break}Xe=l.return}}var uE=Math.ceil,Ic=q.ReactCurrentDispatcher,Fh=q.ReactCurrentOwner,li=q.ReactCurrentBatchConfig,Ut=0,Gn=null,Sn=null,qn=0,Vr=0,fA=oi(0),Rn=0,Hl=null,ia=0,Rc=0,Bh=0,Wl=null,Mr=null,Nh=0,hA=1/0,xs=null,Oc=!1,Uh=null,Ao=null,Dc=!1,lo=null,Fc=0,Ql=0,zh=null,Bc=-1,Nc=0;function yr(){return(Ut&6)!==0?Ot():Bc!==-1?Bc:Bc=Ot()}function uo(s){return(s.mode&1)===0?1:(Ut&2)!==0&&qn!==0?qn&-qn:Y3.transition!==null?(Nc===0&&(Nc=gs()),Nc):(s=B,s!==0||(s=window.event,s=s===void 0?16:zo(s.type)),s)}function Ci(s,l,p,w){if(50<Ql)throw Ql=0,zh=null,Error(t(185));rn(s,p,w),((Ut&2)===0||s!==Gn)&&(s===Gn&&((Ut&2)===0&&(Rc|=p),Rn===4&&co(s,qn)),Lr(s,w),p===1&&Ut===0&&(l.mode&1)===0&&(hA=Ot()+500,L&&Z()))}function Lr(s,l){var p=s.callbackNode;Fa(s,l);var w=yi(s,s===Gn?qn:0);if(w===0)p!==null&&Fi(p),s.callbackNode=null,s.callbackPriority=0;else if(l=w&-w,s.callbackPriority!==l){if(p!=null&&Fi(p),l===1)s.tag===0?Y(c1.bind(null,s)):z(c1.bind(null,s)),eh(function(){(Ut&6)===0&&Z()}),p=null;else{switch($(w)){case 1:p=ei;break;case 4:p=Mn;break;case 16:p=it;break;case 536870912:p=Ze;break;default:p=it}p=y1(p,u1.bind(null,s))}s.callbackPriority=l,s.callbackNode=p}}function u1(s,l){if(Bc=-1,Nc=0,(Ut&6)!==0)throw Error(t(327));var p=s.callbackNode;if(dA()&&s.callbackNode!==p)return null;var w=yi(s,s===Gn?qn:0);if(w===0)return null;if((w&30)!==0||(w&s.expiredLanes)!==0||l)l=Uc(s,w);else{l=w;var x=Ut;Ut|=2;var M=h1();(Gn!==s||qn!==l)&&(xs=null,hA=Ot()+500,oa(s,l));do try{hE();break}catch(W){f1(s,W)}while(!0);ih(),Ic.current=M,Ut=x,Sn!==null?l=0:(Gn=null,qn=0,l=Rn)}if(l!==0){if(l===2&&(x=ds(s),x!==0&&(w=x,l=Vh(s,x))),l===1)throw p=Hl,oa(s,0),co(s,w),Lr(s,Ot()),p;if(l===6)co(s,w);else{if(x=s.current.alternate,(w&30)===0&&!cE(x)&&(l=Uc(s,w),l===2&&(M=ds(s),M!==0&&(w=M,l=Vh(s,M))),l===1))throw p=Hl,oa(s,0),co(s,w),Lr(s,Ot()),p;switch(s.finishedWork=x,s.finishedLanes=w,l){case 0:case 1:throw Error(t(345));case 2:aa(s,Mr,xs);break;case 3:if(co(s,w),(w&130023424)===w&&(l=Nh+500-Ot(),10<l)){if(yi(s,0)!==0)break;if(x=s.suspendedLanes,(x&w)!==w){yr(),s.pingedLanes|=s.suspendedLanes&x;break}s.timeoutHandle=Il(aa.bind(null,s,Mr,xs),l);break}aa(s,Mr,xs);break;case 4:if(co(s,w),(w&4194240)===w)break;for(l=s.eventTimes,x=-1;0<w;){var O=31-Un(w);M=1<<O,O=l[O],O>x&&(x=O),w&=~M}if(w=x,w=Ot()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*uE(w/1960))-w,10<w){s.timeoutHandle=Il(aa.bind(null,s,Mr,xs),w);break}aa(s,Mr,xs);break;case 5:aa(s,Mr,xs);break;default:throw Error(t(329))}}}return Lr(s,Ot()),s.callbackNode===p?u1.bind(null,s):null}function Vh(s,l){var p=Wl;return s.current.memoizedState.isDehydrated&&(oa(s,l).flags|=256),s=Uc(s,l),s!==2&&(l=Mr,Mr=p,l!==null&&jh(l)),s}function jh(s){Mr===null?Mr=s:Mr.push.apply(Mr,s)}function cE(s){for(var l=s;;){if(l.flags&16384){var p=l.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var w=0;w<p.length;w++){var x=p[w],M=x.getSnapshot;x=x.value;try{if(!Br(M(),x))return!1}catch{return!1}}}if(p=l.child,l.subtreeFlags&16384&&p!==null)p.return=l,l=p;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function co(s,l){for(l&=~Bh,l&=~Rc,s.suspendedLanes|=l,s.pingedLanes&=~l,s=s.expirationTimes;0<l;){var p=31-Un(l),w=1<<p;s[p]=-1,l&=~w}}function c1(s){if((Ut&6)!==0)throw Error(t(327));dA();var l=yi(s,0);if((l&1)===0)return Lr(s,Ot()),null;var p=Uc(s,l);if(s.tag!==0&&p===2){var w=ds(s);w!==0&&(l=w,p=Vh(s,w))}if(p===1)throw p=Hl,oa(s,0),co(s,l),Lr(s,Ot()),p;if(p===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=l,aa(s,Mr,xs),Lr(s,Ot()),null}function Gh(s,l){var p=Ut;Ut|=1;try{return s(l)}finally{Ut=p,Ut===0&&(hA=Ot()+500,L&&Z())}}function sa(s){lo!==null&&lo.tag===0&&(Ut&6)===0&&dA();var l=Ut;Ut|=1;var p=li.transition,w=B;try{if(li.transition=null,B=1,s)return s()}finally{B=w,li.transition=p,Ut=l,(Ut&6)===0&&Z()}}function Hh(){Vr=fA.current,Yt(fA)}function oa(s,l){s.finishedWork=null,s.finishedLanes=0;var p=s.timeoutHandle;if(p!==-1&&(s.timeoutHandle=-1,J0(p)),Sn!==null)for(p=Sn.return;p!==null;){var w=p;switch(Pt(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&h();break;case 3:lA(),Yt(hn),Yt(Pn),dh();break;case 5:fh(w);break;case 4:lA();break;case 13:Yt(dn);break;case 19:Yt(dn);break;case 10:sh(w.type._context);break;case 22:case 23:Hh()}p=p.return}if(Gn=s,Sn=s=fo(s.current,null),qn=Vr=l,Rn=0,Hl=null,Bh=Rc=ia=0,Mr=Wl=null,ta!==null){for(l=0;l<ta.length;l++)if(p=ta[l],w=p.interleaved,w!==null){p.interleaved=null;var x=w.next,M=p.pending;if(M!==null){var O=M.next;M.next=x,w.next=O}p.pending=w}ta=null}return s}function f1(s,l){do{var p=Sn;try{if(ih(),Ec.current=Cc,Tc){for(var w=gn.memoizedState;w!==null;){var x=w.queue;x!==null&&(x.pending=null),w=w.next}Tc=!1}if(ra=0,jn=In=gn=null,Nl=!1,Ul=0,Fh.current=null,p===null||p.return===null){Rn=1,Hl=l,Sn=null;break}e:{var M=s,O=p.return,W=p,J=l;if(l=qn,W.flags|=32768,J!==null&&typeof J=="object"&&typeof J.then=="function"){var fe=J,xe=W,Le=xe.tag;if((xe.mode&1)===0&&(Le===0||Le===11||Le===15)){var be=xe.alternate;be?(xe.updateQueue=be.updateQueue,xe.memoizedState=be.memoizedState,xe.lanes=be.lanes):(xe.updateQueue=null,xe.memoizedState=null)}var He=Bm(O);if(He!==null){He.flags&=-257,Nm(He,O,W,M,l),He.mode&1&&Fm(M,fe,l),l=He,J=fe;var qe=l.updateQueue;if(qe===null){var Je=new Set;Je.add(J),l.updateQueue=Je}else qe.add(J);break e}else{if((l&1)===0){Fm(M,fe,l),Wh();break e}J=Error(t(426))}}else if(Ge&&W.mode&1){var xn=Bm(O);if(xn!==null){(xn.flags&65536)===0&&(xn.flags|=256),Nm(xn,O,W,M,l),nh(uA(J,W));break e}}M=J=uA(J,W),Rn!==4&&(Rn=2),Wl===null?Wl=[M]:Wl.push(M),M=O;do{switch(M.tag){case 3:M.flags|=65536,l&=-l,M.lanes|=l;var ae=Om(M,J,l);rm(M,ae);break e;case 1:W=J;var te=M.type,Ae=M.stateNode;if((M.flags&128)===0&&(typeof te.getDerivedStateFromError=="function"||Ae!==null&&typeof Ae.componentDidCatch=="function"&&(Ao===null||!Ao.has(Ae)))){M.flags|=65536,l&=-l,M.lanes|=l;var Re=Dm(M,W,l);rm(M,Re);break e}}M=M.return}while(M!==null)}g1(p)}catch(et){l=et,Sn===p&&p!==null&&(Sn=p=p.return);continue}break}while(!0)}function h1(){var s=Ic.current;return Ic.current=Cc,s===null?Cc:s}function Wh(){(Rn===0||Rn===3||Rn===2)&&(Rn=4),Gn===null||(ia&268435455)===0&&(Rc&268435455)===0||co(Gn,qn)}function Uc(s,l){var p=Ut;Ut|=2;var w=h1();(Gn!==s||qn!==l)&&(xs=null,oa(s,l));do try{fE();break}catch(x){f1(s,x)}while(!0);if(ih(),Ut=p,Ic.current=w,Sn!==null)throw Error(t(261));return Gn=null,qn=0,Rn}function fE(){for(;Sn!==null;)d1(Sn)}function hE(){for(;Sn!==null&&!tr();)d1(Sn)}function d1(s){var l=v1(s.alternate,s,Vr);s.memoizedProps=s.pendingProps,l===null?g1(s):Sn=l,Fh.current=null}function g1(s){var l=s;do{var p=l.alternate;if(s=l.return,(l.flags&32768)===0){if(p=sE(p,l,Vr),p!==null){Sn=p;return}}else{if(p=oE(p,l),p!==null){p.flags&=32767,Sn=p;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Rn=6,Sn=null;return}}if(l=l.sibling,l!==null){Sn=l;return}Sn=l=s}while(l!==null);Rn===0&&(Rn=5)}function aa(s,l,p){var w=B,x=li.transition;try{li.transition=null,B=1,dE(s,l,p,w)}finally{li.transition=x,B=w}return null}function dE(s,l,p,w){do dA();while(lo!==null);if((Ut&6)!==0)throw Error(t(327));p=s.finishedWork;var x=s.finishedLanes;if(p===null)return null;if(s.finishedWork=null,s.finishedLanes=0,p===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var M=p.lanes|p.childLanes;if(No(s,M),s===Gn&&(Sn=Gn=null,qn=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||Dc||(Dc=!0,y1(it,function(){return dA(),null})),M=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||M){M=li.transition,li.transition=null;var O=B;B=1;var W=Ut;Ut|=4,Fh.current=null,AE(s,p),s1(p,s),Q0(iA),Uo=!!rA,iA=rA=null,s.current=p,lE(p),Bi(),Ut=W,B=O,li.transition=M}else s.current=p;if(Dc&&(Dc=!1,lo=s,Fc=x),M=s.pendingLanes,M===0&&(Ao=null),Da(p.stateNode),Lr(s,Ot()),l!==null)for(w=s.onRecoverableError,p=0;p<l.length;p++)x=l[p],w(x.value,{componentStack:x.stack,digest:x.digest});if(Oc)throw Oc=!1,s=Uh,Uh=null,s;return(Fc&1)!==0&&s.tag!==0&&dA(),M=s.pendingLanes,(M&1)!==0?s===zh?Ql++:(Ql=0,zh=s):Ql=0,Z(),null}function dA(){if(lo!==null){var s=$(Fc),l=li.transition,p=B;try{if(li.transition=null,B=16>s?16:s,lo===null)var w=!1;else{if(s=lo,lo=null,Fc=0,(Ut&6)!==0)throw Error(t(331));var x=Ut;for(Ut|=4,Xe=s.current;Xe!==null;){var M=Xe,O=M.child;if((Xe.flags&16)!==0){var W=M.deletions;if(W!==null){for(var J=0;J<W.length;J++){var fe=W[J];for(Xe=fe;Xe!==null;){var xe=Xe;switch(xe.tag){case 0:case 11:case 15:Gl(8,xe,M)}var Le=xe.child;if(Le!==null)Le.return=xe,Xe=Le;else for(;Xe!==null;){xe=Xe;var be=xe.sibling,He=xe.return;if(e1(xe),xe===fe){Xe=null;break}if(be!==null){be.return=He,Xe=be;break}Xe=He}}}var qe=M.alternate;if(qe!==null){var Je=qe.child;if(Je!==null){qe.child=null;do{var xn=Je.sibling;Je.sibling=null,Je=xn}while(Je!==null)}}Xe=M}}if((M.subtreeFlags&2064)!==0&&O!==null)O.return=M,Xe=O;else e:for(;Xe!==null;){if(M=Xe,(M.flags&2048)!==0)switch(M.tag){case 0:case 11:case 15:Gl(9,M,M.return)}var ae=M.sibling;if(ae!==null){ae.return=M.return,Xe=ae;break e}Xe=M.return}}var te=s.current;for(Xe=te;Xe!==null;){O=Xe;var Ae=O.child;if((O.subtreeFlags&2064)!==0&&Ae!==null)Ae.return=O,Xe=Ae;else e:for(O=te;Xe!==null;){if(W=Xe,(W.flags&2048)!==0)try{switch(W.tag){case 0:case 11:case 15:kc(9,W)}}catch(et){vn(W,W.return,et)}if(W===O){Xe=null;break e}var Re=W.sibling;if(Re!==null){Re.return=W.return,Xe=Re;break e}Xe=W.return}}if(Ut=x,Z(),gr&&typeof gr.onPostCommitFiberRoot=="function")try{gr.onPostCommitFiberRoot(Xn,s)}catch{}w=!0}return w}finally{B=p,li.transition=l}}return!1}function p1(s,l,p){l=uA(p,l),l=Om(s,l,1),s=oo(s,l,1),l=yr(),s!==null&&(rn(s,1,l),Lr(s,l))}function vn(s,l,p){if(s.tag===3)p1(s,s,p);else for(;l!==null;){if(l.tag===3){p1(l,s,p);break}else if(l.tag===1){var w=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(Ao===null||!Ao.has(w))){s=uA(p,s),s=Dm(l,s,1),l=oo(l,s,1),s=yr(),l!==null&&(rn(l,1,s),Lr(l,s));break}}l=l.return}}function gE(s,l,p){var w=s.pingCache;w!==null&&w.delete(l),l=yr(),s.pingedLanes|=s.suspendedLanes&p,Gn===s&&(qn&p)===p&&(Rn===4||Rn===3&&(qn&130023424)===qn&&500>Ot()-Nh?oa(s,0):Bh|=p),Lr(s,l)}function m1(s,l){l===0&&((s.mode&1)===0?l=1:(l=Ui,Ui<<=1,(Ui&130023424)===0&&(Ui=4194304)));var p=yr();s=bs(s,l),s!==null&&(rn(s,l,p),Lr(s,p))}function pE(s){var l=s.memoizedState,p=0;l!==null&&(p=l.retryLane),m1(s,p)}function mE(s,l){var p=0;switch(s.tag){case 13:var w=s.stateNode,x=s.memoizedState;x!==null&&(p=x.retryLane);break;case 19:w=s.stateNode;break;default:throw Error(t(314))}w!==null&&w.delete(l),m1(s,p)}var v1;v1=function(s,l,p){if(s!==null)if(s.memoizedProps!==l.pendingProps||hn.current)Cr=!0;else{if((s.lanes&p)===0&&(l.flags&128)===0)return Cr=!1,iE(s,l,p);Cr=(s.flags&131072)!==0}else Cr=!1,Ge&&(l.flags&1048576)!==0&&Fe(l,he,l.index);switch(l.lanes=0,l.tag){case 2:var w=l.type;Lc(s,l),s=l.pendingProps;var x=a(l,Pn.current);aA(l,p),x=mh(null,l,w,s,x,p);var M=vh();return l.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,c(w)?(M=!0,y(l)):M=!1,l.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,Ah(l),x.updater=_c,l.stateNode=x,x._reactInternals=l,uh(l,w,s,p),l=Sh(null,l,w,!0,M,p)):(l.tag=0,Ge&&M&&Bt(l),vr(null,l,x,p),l=l.child),l;case 16:w=l.elementType;e:{switch(Lc(s,l),s=l.pendingProps,x=w._init,w=x(w._payload),l.type=w,x=l.tag=yE(w),s=Ti(w,s),x){case 0:l=xh(null,l,w,s,p);break e;case 1:l=Hm(null,l,w,s,p);break e;case 11:l=Um(null,l,w,s,p);break e;case 14:l=zm(null,l,w,Ti(w.type,s),p);break e}throw Error(t(306,w,""))}return l;case 0:return w=l.type,x=l.pendingProps,x=l.elementType===w?x:Ti(w,x),xh(s,l,w,x,p);case 1:return w=l.type,x=l.pendingProps,x=l.elementType===w?x:Ti(w,x),Hm(s,l,w,x,p);case 3:e:{if(Wm(l),s===null)throw Error(t(387));w=l.pendingProps,M=l.memoizedState,x=M.element,nm(s,l),yc(l,w,null,p);var O=l.memoizedState;if(w=O.element,M.isDehydrated)if(M={element:w,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},l.updateQueue.baseState=M,l.memoizedState=M,l.flags&256){x=uA(Error(t(423)),l),l=Qm(s,l,w,p,x);break e}else if(w!==x){x=uA(Error(t(424)),l),l=Qm(s,l,w,p,x);break e}else for(st=ot(l.stateNode.containerInfo.firstChild),dt=l,Ge=!0,At=null,p=cm(l,null,w,p),l.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(sA(),w===x){l=Ts(s,l,p);break e}vr(s,l,w,p)}l=l.child}return l;case 5:return fm(l),s===null&&kn(l),w=l.type,x=l.pendingProps,M=s!==null?s.memoizedProps:null,O=x.children,kl(w,x)?O=null:M!==null&&kl(w,M)&&(l.flags|=32),Gm(s,l),vr(s,l,O,p),l.child;case 6:return s===null&&kn(l),null;case 13:return Ym(s,l,p);case 4:return ch(l,l.stateNode.containerInfo),w=l.pendingProps,s===null?l.child=AA(l,null,w,p):vr(s,l,w,p),l.child;case 11:return w=l.type,x=l.pendingProps,x=l.elementType===w?x:Ti(w,x),Um(s,l,w,x,p);case 7:return vr(s,l,l.pendingProps,p),l.child;case 8:return vr(s,l,l.pendingProps.children,p),l.child;case 12:return vr(s,l,l.pendingProps.children,p),l.child;case 10:e:{if(w=l.type._context,x=l.pendingProps,M=l.memoizedProps,O=x.value,Wt(pc,w._currentValue),w._currentValue=O,M!==null)if(Br(M.value,O)){if(M.children===x.children&&!hn.current){l=Ts(s,l,p);break e}}else for(M=l.child,M!==null&&(M.return=l);M!==null;){var W=M.dependencies;if(W!==null){O=M.child;for(var J=W.firstContext;J!==null;){if(J.context===w){if(M.tag===1){J=Es(-1,p&-p),J.tag=2;var fe=M.updateQueue;if(fe!==null){fe=fe.shared;var xe=fe.pending;xe===null?J.next=J:(J.next=xe.next,xe.next=J),fe.pending=J}}M.lanes|=p,J=M.alternate,J!==null&&(J.lanes|=p),oh(M.return,p,l),W.lanes|=p;break}J=J.next}}else if(M.tag===10)O=M.type===l.type?null:M.child;else if(M.tag===18){if(O=M.return,O===null)throw Error(t(341));O.lanes|=p,W=O.alternate,W!==null&&(W.lanes|=p),oh(O,p,l),O=M.sibling}else O=M.child;if(O!==null)O.return=M;else for(O=M;O!==null;){if(O===l){O=null;break}if(M=O.sibling,M!==null){M.return=O.return,O=M;break}O=O.return}M=O}vr(s,l,x.children,p),l=l.child}return l;case 9:return x=l.type,w=l.pendingProps.children,aA(l,p),x=ai(x),w=w(x),l.flags|=1,vr(s,l,w,p),l.child;case 14:return w=l.type,x=Ti(w,l.pendingProps),x=Ti(w.type,x),zm(s,l,w,x,p);case 15:return Vm(s,l,l.type,l.pendingProps,p);case 17:return w=l.type,x=l.pendingProps,x=l.elementType===w?x:Ti(w,x),Lc(s,l),l.tag=1,c(w)?(s=!0,y(l)):s=!1,aA(l,p),am(l,w,x),uh(l,w,x,p),Sh(null,l,w,!0,s,p);case 19:return Xm(s,l,p);case 22:return jm(s,l,p)}throw Error(t(156,l.tag))};function y1(s,l){return hs(s,l)}function vE(s,l,p,w){this.tag=s,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ui(s,l,p,w){return new vE(s,l,p,w)}function Qh(s){return s=s.prototype,!(!s||!s.isReactComponent)}function yE(s){if(typeof s=="function")return Qh(s)?1:0;if(s!=null){if(s=s.$$typeof,s===ke)return 11;if(s===We)return 14}return 2}function fo(s,l){var p=s.alternate;return p===null?(p=ui(s.tag,l,s.key,s.mode),p.elementType=s.elementType,p.type=s.type,p.stateNode=s.stateNode,p.alternate=s,s.alternate=p):(p.pendingProps=l,p.type=s.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=s.flags&14680064,p.childLanes=s.childLanes,p.lanes=s.lanes,p.child=s.child,p.memoizedProps=s.memoizedProps,p.memoizedState=s.memoizedState,p.updateQueue=s.updateQueue,l=s.dependencies,p.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},p.sibling=s.sibling,p.index=s.index,p.ref=s.ref,p}function zc(s,l,p,w,x,M){var O=2;if(w=s,typeof s=="function")Qh(s)&&(O=1);else if(typeof s=="string")O=5;else e:switch(s){case pe:return Aa(p.children,x,M,l);case ue:O=8,x|=8;break;case me:return s=ui(12,p,l,x|2),s.elementType=me,s.lanes=M,s;case Me:return s=ui(13,p,l,x),s.elementType=Me,s.lanes=M,s;case ze:return s=ui(19,p,l,x),s.elementType=ze,s.lanes=M,s;case _t:return Vc(p,x,M,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Ce:O=10;break e;case ge:O=9;break e;case ke:O=11;break e;case We:O=14;break e;case tt:O=16,w=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return l=ui(O,p,l,x),l.elementType=s,l.type=w,l.lanes=M,l}function Aa(s,l,p,w){return s=ui(7,s,w,l),s.lanes=p,s}function Vc(s,l,p,w){return s=ui(22,s,w,l),s.elementType=_t,s.lanes=p,s.stateNode={isHidden:!1},s}function Yh(s,l,p){return s=ui(6,s,null,l),s.lanes=p,s}function $h(s,l,p){return l=ui(4,s.children!==null?s.children:[],s.key,l),l.lanes=p,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function _E(s,l,p,w,x){this.tag=l,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nr(0),this.expirationTimes=nr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nr(0),this.identifierPrefix=w,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function Xh(s,l,p,w,x,M,O,W,J){return s=new _E(s,l,p,W,J),l===1?(l=1,M===!0&&(l|=8)):l=0,M=ui(3,null,null,l),s.current=M,M.stateNode=s,M.memoizedState={element:w,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ah(M),s}function wE(s,l,p){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:w==null?null:""+w,children:s,containerInfo:l,implementation:p}}function _1(s){if(!s)return or;s=s._reactInternals;e:{if(Tt(s)!==s||s.tag!==1)throw Error(t(170));var l=s;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(c(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(s.tag===1){var p=s.type;if(c(p))return v(s,p,l)}return l}function w1(s,l,p,w,x,M,O,W,J){return s=Xh(p,w,!0,s,x,M,O,W,J),s.context=_1(null),p=s.current,w=yr(),x=uo(p),M=Es(w,x),M.callback=l??null,oo(p,M,x),s.current.lanes=x,rn(s,x,w),Lr(s,w),s}function jc(s,l,p,w){var x=l.current,M=yr(),O=uo(x);return p=_1(p),l.context===null?l.context=p:l.pendingContext=p,l=Es(M,O),l.payload={element:s},w=w===void 0?null:w,w!==null&&(l.callback=w),s=oo(x,l,O),s!==null&&(Ci(s,x,O,M),vc(s,x,O)),O}function Gc(s){return s=s.current,s.child?(s.child.tag===5,s.child.stateNode):null}function b1(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var p=s.retryLane;s.retryLane=p!==0&&p<l?p:l}}function Zh(s,l){b1(s,l),(s=s.alternate)&&b1(s,l)}function bE(){return null}var E1=typeof reportError=="function"?reportError:function(s){console.error(s)};function qh(s){this._internalRoot=s}Hc.prototype.render=qh.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(t(409));jc(s,l,null,null)},Hc.prototype.unmount=qh.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;sa(function(){jc(null,s,null,null)}),l[zr]=null}};function Hc(s){this._internalRoot=s}Hc.prototype.unstable_scheduleHydration=function(s){if(s){var l=$e();s={blockedOn:null,target:s,priority:l};for(var p=0;p<Vi.length&&l!==0&&l<Vi[p].priority;p++);Vi.splice(p,0,s),p===0&&Xu(s)}};function Kh(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Wc(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function T1(){}function EE(s,l,p,w,x){if(x){if(typeof w=="function"){var M=w;w=function(){var fe=Gc(O);M.call(fe)}}var O=w1(l,w,s,0,null,!1,!1,"",T1);return s._reactRootContainer=O,s[zr]=O.current,ro(s.nodeType===8?s.parentNode:s),sa(),O}for(;x=s.lastChild;)s.removeChild(x);if(typeof w=="function"){var W=w;w=function(){var fe=Gc(J);W.call(fe)}}var J=Xh(s,0,!1,null,null,!1,!1,"",T1);return s._reactRootContainer=J,s[zr]=J.current,ro(s.nodeType===8?s.parentNode:s),sa(function(){jc(l,J,p,w)}),J}function Qc(s,l,p,w,x){var M=p._reactRootContainer;if(M){var O=M;if(typeof x=="function"){var W=x;x=function(){var J=Gc(O);W.call(J)}}jc(l,O,s,x)}else O=EE(p,l,s,x,w);return Gc(O)}ce=function(s){switch(s.tag){case 3:var l=s.stateNode;if(l.current.memoizedState.isDehydrated){var p=vi(l.pendingLanes);p!==0&&(D(l,p|1),Lr(l,Ot()),(Ut&6)===0&&(hA=Ot()+500,Z()))}break;case 13:sa(function(){var w=bs(s,1);if(w!==null){var x=yr();Ci(w,s,1,x)}}),Zh(s,1)}},we=function(s){if(s.tag===13){var l=bs(s,134217728);if(l!==null){var p=yr();Ci(l,s,134217728,p)}Zh(s,134217728)}},Ve=function(s){if(s.tag===13){var l=uo(s),p=bs(s,l);if(p!==null){var w=yr();Ci(p,s,l,w)}Zh(s,l)}},$e=function(){return B},on=function(s,l){var p=B;try{return B=s,l()}finally{B=p}},Oo=function(s,l,p){switch(l){case"input":if(Jt(s,p),l=p.name,p.type==="radio"&&l!=null){for(p=s;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<p.length;l++){var w=p[l];if(w!==s&&w.form===s.form){var x=_e(w);if(!x)throw Error(t(90));Ee(w),Jt(w,x)}}}break;case"textarea":pi(s,p);break;case"select":l=p.value,l!=null&&Xt(s,!!p.multiple,l,!1)}},Fo=Gh,Ws=sa;var TE={usingClientEntryPoint:!1,Events:[si,_s,_e,Hs,Do,Gh]},Yl={findFiberByHostInstance:ii,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},xE={bundleType:Yl.bundleType,version:Yl.version,rendererPackageName:Yl.rendererPackageName,rendererConfig:Yl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=bn(s),s===null?null:s.stateNode},findFiberByHostInstance:Yl.findFiberByHostInstance||bE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yc.isDisabled&&Yc.supportsFiber)try{Xn=Yc.inject(xE),gr=Yc}catch{}}return Pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TE,Pr.createPortal=function(s,l){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kh(l))throw Error(t(200));return wE(s,l,null,p)},Pr.createRoot=function(s,l){if(!Kh(s))throw Error(t(299));var p=!1,w="",x=E1;return l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(w=l.identifierPrefix),l.onRecoverableError!==void 0&&(x=l.onRecoverableError)),l=Xh(s,1,!1,null,null,p,!1,w,x),s[zr]=l.current,ro(s.nodeType===8?s.parentNode:s),new qh(l)},Pr.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=bn(l),s=s===null?null:s.stateNode,s},Pr.flushSync=function(s){return sa(s)},Pr.hydrate=function(s,l,p){if(!Wc(l))throw Error(t(200));return Qc(null,s,l,!0,p)},Pr.hydrateRoot=function(s,l,p){if(!Kh(s))throw Error(t(405));var w=p!=null&&p.hydratedSources||null,x=!1,M="",O=E1;if(p!=null&&(p.unstable_strictMode===!0&&(x=!0),p.identifierPrefix!==void 0&&(M=p.identifierPrefix),p.onRecoverableError!==void 0&&(O=p.onRecoverableError)),l=w1(l,null,s,1,p??null,x,!1,M,O),s[zr]=l.current,ro(s),w)for(s=0;s<w.length;s++)p=w[s],x=p._getVersion,x=x(p._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[p,x]:l.mutableSourceEagerHydrationData.push(p,x);return new Hc(l)},Pr.render=function(s,l,p){if(!Wc(l))throw Error(t(200));return Qc(null,s,l,!1,p)},Pr.unmountComponentAtNode=function(s){if(!Wc(s))throw Error(t(40));return s._reactRootContainer?(sa(function(){Qc(null,null,s,!1,function(){s._reactRootContainer=null,s[zr]=null})}),!0):!1},Pr.unstable_batchedUpdates=Gh,Pr.unstable_renderSubtreeIntoContainer=function(s,l,p,w){if(!Wc(p))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Qc(s,l,p,!1,w)},Pr.version="18.2.0-next-9e3b772b8-20220608",Pr}var I1;function l_(){if(I1)return td.exports;I1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),td.exports=DE(),td.exports}var R1;function FE(){if(R1)return $c;R1=1;var n=l_();return $c.createRoot=n.createRoot,$c.hydrateRoot=n.hydrateRoot,$c}var BE=FE();const NE=A_(BE);function Lf(n,e){if(!n)throw new Error(e||"loader assertion failed.")}const tp=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),O1=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);O1&&parseFloat(O1[1]);const UE="3.4.14";function Is(n,e){if(!n)throw new Error(e||"loaders.gl assertion failed.")}const hf=typeof process!="object"||String(process)!=="[object process]"||process.browser,zE=typeof window<"u"&&typeof window.orientation<"u",D1=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);D1&&parseFloat(D1[1]);function yu(n){"@babel/helpers - typeof";return yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yu(n)}function VE(n,e){if(yu(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(yu(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function jE(n){var e=VE(n,"string");return yu(e)==="symbol"?e:String(e)}function I(n,e,t){return e=jE(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}class GE{constructor(e,t){I(this,"name",void 0),I(this,"workerThread",void 0),I(this,"isRunning",!0),I(this,"result",void 0),I(this,"_resolve",()=>{}),I(this,"_reject",()=>{}),this.name=e,this.workerThread=t,this.result=new Promise((r,i)=>{this._resolve=r,this._reject=i})}postMessage(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})}done(e){Is(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Is(this.isRunning),this.isRunning=!1,this._reject(e)}}let id=class{terminate(){}};const sd=new Map;function HE(n){Is(n.source&&!n.url||!n.source&&n.url);let e=sd.get(n.source||n.url);return e||(n.url&&(e=WE(n.url),sd.set(n.url,e)),n.source&&(e=u_(n.source),sd.set(n.source,e))),Is(e),e}function WE(n){if(!n.startsWith("http"))return n;const e=QE(n);return u_(e)}function u_(n){const e=new Blob([n],{type:"application/javascript"});return URL.createObjectURL(e)}function QE(n){return`try {
  importScripts('`.concat(n,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function c_(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=arguments.length>2?arguments[2]:void 0;const r=t||new Set;if(n){if(F1(n))r.add(n);else if(F1(n.buffer))r.add(n.buffer);else if(!ArrayBuffer.isView(n)){if(e&&typeof n=="object")for(const i in n)c_(n[i],e,r)}}return t===void 0?Array.from(r):[]}function F1(n){return n?n instanceof ArrayBuffer||typeof MessagePort<"u"&&n instanceof MessagePort||typeof ImageBitmap<"u"&&n instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas:!1}const od=()=>{};class Ag{static isSupported(){return typeof Worker<"u"&&hf||typeof id<"u"&&!hf}constructor(e){I(this,"name",void 0),I(this,"source",void 0),I(this,"url",void 0),I(this,"terminated",!1),I(this,"worker",void 0),I(this,"onMessage",void 0),I(this,"onError",void 0),I(this,"_loadableURL","");const{name:t,source:r,url:i}=e;Is(r||i),this.name=t,this.source=r,this.url=i,this.onMessage=od,this.onError=o=>console.log(o),this.worker=hf?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=od,this.onError=od,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,t){t=t||c_(e),this.worker.postMessage(e,t)}_getErrorFromErrorEvent(e){let t="Failed to load ";return t+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(t+="".concat(e.message," in ")),e.lineno&&(t+=":".concat(e.lineno,":").concat(e.colno)),new Error(t)}_createBrowserWorker(){this._loadableURL=HE({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=t=>{t.data?this.onMessage(t.data):this.onError(new Error("No data received"))},e.onerror=t=>{this.onError(this._getErrorFromErrorEvent(t)),this.terminated=!0},e.onmessageerror=t=>console.error(t),e}_createNodeWorker(){let e;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new id(r,{eval:!1})}else if(this.source)e=new id(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",t=>{this.onMessage(t)}),e.on("error",t=>{this.onError(t)}),e.on("exit",t=>{}),e}}class YE{static isSupported(){return Ag.isSupported()}constructor(e){I(this,"name","unnamed"),I(this,"source",void 0),I(this,"url",void 0),I(this,"maxConcurrency",1),I(this,"maxMobileConcurrency",1),I(this,"onDebug",()=>{}),I(this,"reuseWorkers",!0),I(this,"props",{}),I(this,"jobQueue",[]),I(this,"idleQueue",[]),I(this,"count",0),I(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:(o,f,d)=>o.done(d),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:(o,f)=>o.error(f);const i=new Promise(o=>(this.jobQueue.push({name:e,onMessage:t,onError:r,onStart:o}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const t=this.jobQueue.shift();if(t){this.onDebug({message:"Starting job",name:t.name,workerThread:e,backlog:this.jobQueue.length});const r=new GE(t.name,e);e.onMessage=i=>t.onMessage(r,i.type,i.payload),e.onError=i=>t.onError(r,i),t.onStart(r);try{await r.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new Ag({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return zE?this.maxMobileConcurrency:this.maxConcurrency}}const $E={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class Ms{static isSupported(){return Ag.isSupported()}static getWorkerFarm(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ms._workerFarm=Ms._workerFarm||new Ms({}),Ms._workerFarm.setProps(e),Ms._workerFarm}constructor(e){I(this,"props",void 0),I(this,"workerPools",new Map),this.props={...$E},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const t of this.workerPools.values())t.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:t,source:r,url:i}=e;let o=this.workerPools.get(t);return o||(o=new YE({name:t,source:r,url:i}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(t,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}I(Ms,"_workerFarm",void 0);const XE="latest";function ZE(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=e[n.id]||{},r="".concat(n.id,"-worker.js");let i=t.workerUrl;if(!i&&n.id==="compression"&&(i=e.workerUrl),e._workerType==="test"&&(i="modules/".concat(n.module,"/dist/").concat(r)),!i){let o=n.version;o==="latest"&&(o=XE);const f=o?"@".concat(o):"";i="https://unpkg.com/@loaders.gl/".concat(n.module).concat(f,"/dist/").concat(r)}return Is(i),i}function qE(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:UE;Is(n,"no worker provided");const t=n.version;return!(!e||!t)}const KE={},JE=Object.freeze(Object.defineProperty({__proto__:null,default:KE},Symbol.toStringTag,{value:"Module"}));function eT(n,e){return!Ms.isSupported()||!hf&&!(e!=null&&e._nodeWorkers)?!1:n.worker&&e?.worker}async function tT(n,e,t,r,i){const o=n.id,f=ZE(n,t),m=Ms.getWorkerFarm(t).getWorkerPool({name:o,url:f});t=JSON.parse(JSON.stringify(t)),r=JSON.parse(JSON.stringify(r||{}));const _=await m.startJob("process-on-worker",nT.bind(null,i));return _.postMessage("process",{input:e,options:t,context:r}),await(await _.result).result}async function nT(n,e,t,r){switch(t){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:i,input:o,options:f}=r;try{const d=await n(o,f);e.postMessage("done",{id:i,result:d})}catch(d){const m=d instanceof Error?d.message:"unknown error";e.postMessage("error",{id:i,error:m})}break;default:console.warn("parse-with-worker unknown message ".concat(t))}}function rT(n,e,t){if(t=t||n.byteLength,n.byteLength<t||e.byteLength<t)return!1;const r=new Uint8Array(n),i=new Uint8Array(e);for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}function iT(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];const r=e.map(d=>d instanceof ArrayBuffer?new Uint8Array(d):d),i=r.reduce((d,m)=>d+m.byteLength,0),o=new Uint8Array(i);let f=0;for(const d of r)o.set(d,f),f+=d.byteLength;return o.buffer}async function sT(n){const e=[];for await(const t of n)e.push(t);return iT(...e)}let oT="";const B1={};function aT(n){for(const e in B1)if(n.startsWith(e)){const t=B1[e];n=n.replace(e,t)}return!n.startsWith("http://")&&!n.startsWith("https://")&&(n="".concat(oT).concat(n)),n}function AT(n){return n&&typeof n=="object"&&n.isBuffer}function f_(n){if(AT(n))return n;if(n instanceof ArrayBuffer)return n;if(ArrayBuffer.isView(n))return n.byteOffset===0&&n.byteLength===n.buffer.byteLength?n.buffer:n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);if(typeof n=="string"){const e=n;return new TextEncoder().encode(e).buffer}if(n&&typeof n=="object"&&n._toArrayBuffer)return n._toArrayBuffer();throw new Error("toArrayBuffer")}function h_(n){const e=n?n.lastIndexOf("/"):-1;return e>=0?n.substr(e+1):""}function lT(n){const e=n?n.lastIndexOf("/"):-1;return e>=0?n.substr(0,e):""}const uT=n=>typeof n=="boolean",fu=n=>typeof n=="function",Fu=n=>n!==null&&typeof n=="object",N1=n=>Fu(n)&&n.constructor==={}.constructor,cT=n=>n&&typeof n[Symbol.iterator]=="function",fT=n=>n&&typeof n[Symbol.asyncIterator]=="function",xa=n=>typeof Response<"u"&&n instanceof Response||n&&n.arrayBuffer&&n.text&&n.json,Sa=n=>typeof Blob<"u"&&n instanceof Blob,hT=n=>n&&typeof n=="object"&&n.isBuffer,dT=n=>typeof ReadableStream<"u"&&n instanceof ReadableStream||Fu(n)&&fu(n.tee)&&fu(n.cancel)&&fu(n.getReader),gT=n=>Fu(n)&&fu(n.read)&&fu(n.pipe)&&uT(n.readable),d_=n=>dT(n)||gT(n),pT=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,mT=/^([-\w.]+\/[-\w.+]+)/;function vT(n){const e=mT.exec(n);return e?e[1]:n}function U1(n){const e=pT.exec(n);return e?e[1]:""}const g_=/\?.*/;function yT(n){const e=n.match(g_);return e&&e[0]}function np(n){return n.replace(g_,"")}function o0(n){return xa(n)?n.url:Sa(n)?n.name||"":typeof n=="string"?n:""}function rp(n){if(xa(n)){const e=n,t=e.headers.get("content-type")||"",r=np(e.url);return vT(t)||U1(r)}return Sa(n)?n.type||"":typeof n=="string"?U1(n):""}function _T(n){return xa(n)?n.headers["content-length"]||-1:Sa(n)?n.size:typeof n=="string"?n.length:n instanceof ArrayBuffer||ArrayBuffer.isView(n)?n.byteLength:-1}async function p_(n){if(xa(n))return n;const e={},t=_T(n);t>=0&&(e["content-length"]=String(t));const r=o0(n),i=rp(n);i&&(e["content-type"]=i);const o=await ET(n);o&&(e["x-first-bytes"]=o),typeof n=="string"&&(n=new TextEncoder().encode(n));const f=new Response(n,{headers:e});return Object.defineProperty(f,"url",{value:r}),f}async function wT(n){if(!n.ok){const e=await bT(n);throw new Error(e)}}async function bT(n){let e="Failed to fetch resource ".concat(n.url," (").concat(n.status,"): ");try{const t=n.headers.get("Content-Type");let r=n.statusText;t.includes("application/json")&&(r+=" ".concat(await n.text())),e+=r,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}async function ET(n){if(typeof n=="string")return"data:,".concat(n.slice(0,5));if(n instanceof Blob){const t=n.slice(0,5);return await new Promise(r=>{const i=new FileReader;i.onload=o=>{var f;return r(o==null||(f=o.target)===null||f===void 0?void 0:f.result)},i.readAsDataURL(t)})}if(n instanceof ArrayBuffer){const t=n.slice(0,5),r=TT(t);return"data:base64,".concat(r)}return null}function TT(n){let e="";const t=new Uint8Array(n);for(let r=0;r<t.byteLength;r++)e+=String.fromCharCode(t[r]);return btoa(e)}async function z1(n,e){if(typeof n=="string"){n=aT(n);let t=e;return e!=null&&e.fetch&&typeof e?.fetch!="function"&&(t=e.fetch),await fetch(n,t)}return await p_(n)}function xT(n){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const t=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent;return!!(t&&t.indexOf("Electron")>=0)}function Bu(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||xT()}const Xc=globalThis.window||globalThis.self||globalThis.global,Xl=globalThis.process||{},m_=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Bu();function ST(n){try{const e=window[n],t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch{return null}}let CT=class{constructor(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";this.storage=void 0,this.id=void 0,this.config=void 0,this.storage=ST(r),this.id=e,this.config=t,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}}_loadConfiguration(){let e={};if(this.storage){const t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}};function MT(n){let e;return n<10?e="".concat(n.toFixed(2),"ms"):n<100?e="".concat(n.toFixed(1),"ms"):n<1e3?e="".concat(n.toFixed(0),"ms"):e="".concat((n/1e3).toFixed(2),"s"),e}function LT(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const t=Math.max(e-n.length,0);return"".concat(" ".repeat(t)).concat(n)}function ad(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=n.src.replace(/\(/g,"%28").replace(/\)/g,"%29");n.width>r&&(t=Math.min(t,r/n.width));const o=n.width*t,f=n.height*t,d=["font-size:1px;","padding:".concat(Math.floor(f/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(f,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(f,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),d]}let Pf;(function(n){n[n.BLACK=30]="BLACK",n[n.RED=31]="RED",n[n.GREEN=32]="GREEN",n[n.YELLOW=33]="YELLOW",n[n.BLUE=34]="BLUE",n[n.MAGENTA=35]="MAGENTA",n[n.CYAN=36]="CYAN",n[n.WHITE=37]="WHITE",n[n.BRIGHT_BLACK=90]="BRIGHT_BLACK",n[n.BRIGHT_RED=91]="BRIGHT_RED",n[n.BRIGHT_GREEN=92]="BRIGHT_GREEN",n[n.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",n[n.BRIGHT_BLUE=94]="BRIGHT_BLUE",n[n.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",n[n.BRIGHT_CYAN=96]="BRIGHT_CYAN",n[n.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(Pf||(Pf={}));const PT=10;function V1(n){return typeof n!="string"?n:(n=n.toUpperCase(),Pf[n]||Pf.WHITE)}function kT(n,e,t){if(!Bu&&typeof n=="string"){if(e){const r=V1(e);n="\x1B[".concat(r,"m").concat(n,"\x1B[39m")}if(t){const r=V1(t);n="\x1B[".concat(r+PT,"m").concat(n,"\x1B[49m")}}return n}function IT(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const t=Object.getPrototypeOf(n),r=Object.getOwnPropertyNames(t),i=n;for(const o of r){const f=i[o];typeof f=="function"&&(e.find(d=>o===d)||(i[o]=f.bind(n)))}}function kf(n,e){if(!n)throw new Error(e||"Assertion failed")}function gA(){let n;if(Bu()&&Xc.performance){var e,t;n=Xc==null||(e=Xc.performance)===null||e===void 0||(t=e.now)===null||t===void 0?void 0:t.call(e)}else if("hrtime"in Xl){var r;const i=Xl==null||(r=Xl.hrtime)===null||r===void 0?void 0:r.call(Xl);n=i[0]*1e3+i[1]/1e6}else n=Date.now();return n}const pA={debug:Bu()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},RT={enabled:!0,level:0};function ci(){}const j1={},G1={once:!0};let ip=class{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};this.id=void 0,this.VERSION=m_,this._startTs=gA(),this._deltaTs=gA(),this._storage=void 0,this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new CT("__probe-".concat(this.id,"__"),RT),this.timeStamp("".concat(this.id," started")),IT(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((gA()-this._startTs).toPrecision(10))}getDelta(){return Number((gA()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,t){this._storage.setConfiguration({[e]:t})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,t){kf(e,t)}warn(e){return this._getLogFunction(0,e,pA.warn,arguments,G1)}error(e){return this._getLogFunction(0,e,pA.error,arguments)}deprecated(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}removed(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}probe(e,t){return this._getLogFunction(e,t,pA.log,arguments,{time:!0,once:!0})}log(e,t){return this._getLogFunction(e,t,pA.debug,arguments)}info(e,t){return this._getLogFunction(e,t,console.info,arguments)}once(e,t){return this._getLogFunction(e,t,pA.debug||pA.info,arguments,G1)}table(e,t,r){return t?this._getLogFunction(e,t,console.table||ci,r&&[r],{tag:BT(t)}):ci}image(e){let{logLevel:t,priority:r,image:i,message:o="",scale:f=1}=e;return this._shouldLog(t||r)?Bu()?FT({image:i,message:o,scale:f}):DT():ci}time(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}timeEnd(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,t){return this._getLogFunction(e,t,console.timeStamp||ci)}group(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=H1({logLevel:e,message:t,opts:r}),{collapsed:o}=r;return i.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,t,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||ci)}withGroup(e,t,r){this.group(e,t)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=v_(e)}_getLogFunction(e,t,r,i,o){if(this._shouldLog(e)){o=H1({logLevel:e,message:t,args:i,opts:o}),r=r||o.method,kf(r),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=gA();const f=o.tag||o.message;if(o.once&&f)if(!j1[f])j1[f]=gA();else return ci;return t=OT(this.id,o.message,o),r.bind(console,t,...o.args)}return ci}};ip.VERSION=m_;function v_(n){if(!n)return 0;let e;switch(typeof n){case"number":e=n;break;case"object":e=n.logLevel||n.priority||0;break;default:return 0}return kf(Number.isFinite(e)&&e>=0),e}function H1(n){const{logLevel:e,message:t}=n;n.logLevel=v_(e);const r=n.args?Array.from(n.args):[];for(;r.length&&r.shift()!==t;);switch(typeof e){case"string":case"function":t!==void 0&&r.unshift(t),n.message=e;break;case"object":Object.assign(n,e);break}typeof n.message=="function"&&(n.message=n.message());const i=typeof n.message;return kf(i==="string"||i==="object"),Object.assign(n,{args:r},n.opts)}function OT(n,e,t){if(typeof e=="string"){const r=t.time?LT(MT(t.total)):"";e=t.time?"".concat(n,": ").concat(r,"  ").concat(e):"".concat(n,": ").concat(e),e=kT(e,t.color,t.background)}return e}function DT(n){return console.warn("removed"),ci}function FT(n){let{image:e,message:t="",scale:r=1}=n;if(typeof e=="string"){const o=new Image;return o.onload=()=>{const f=ad(o,t,r);console.log(...f)},o.src=e,ci}const i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...ad(e,t,r)),ci;if(i.toLowerCase()==="canvas"){const o=new Image;return o.onload=()=>console.log(...ad(o,t,r)),o.src=e.toDataURL(),ci}return ci}function BT(n){for(const e in n)for(const t in n[e])return t||"untitled";return"empty"}const W1=new ip({id:"loaders.gl"});class NT{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class UT{constructor(){I(this,"console",void 0),this.console=console}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.console.log.bind(this.console,...t)}info(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.console.info.bind(this.console,...t)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.console.warn.bind(this.console,...t)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.console.error.bind(this.console,...t)}}const y_={fetch:null,mimeType:void 0,nothrow:!1,log:new UT,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:tp,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},zT={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function __(){globalThis.loaders=globalThis.loaders||{};const{loaders:n}=globalThis;return n._state=n._state||{},n._state}const w_=()=>{const n=__();return n.globalOptions=n.globalOptions||{...y_},n.globalOptions};function VT(n,e,t,r){return t=t||[],t=Array.isArray(t)?t:[t],jT(n,t),HT(e,n,r)}function jT(n,e){Q1(n,null,y_,zT,e);for(const t of e){const r=n&&n[t.id]||{},i=t.options&&t.options[t.id]||{},o=t.deprecatedOptions&&t.deprecatedOptions[t.id]||{};Q1(r,t.id,i,o,e)}}function Q1(n,e,t,r,i){const o=e||"Top level",f=e?"".concat(e,"."):"";for(const d in n){const m=!e&&Fu(n[d]),_=d==="baseUri"&&!e,E=d==="workerUrl"&&e;if(!(d in t)&&!_&&!E){if(d in r)W1.warn("".concat(o," loader option '").concat(f).concat(d,"' no longer supported, use '").concat(r[d],"'"))();else if(!m){const T=GT(d,i);W1.warn("".concat(o," loader option '").concat(f).concat(d,"' not recognized. ").concat(T))()}}}}function GT(n,e){const t=n.toLowerCase();let r="";for(const i of e)for(const o in i.options){if(n===o)return"Did you mean '".concat(i.id,".").concat(o,"'?");const f=o.toLowerCase();(t.startsWith(f)||f.startsWith(t))&&(r=r||"Did you mean '".concat(i.id,".").concat(o,"'?"))}return r}function HT(n,e,t){const i={...n.options||{}};return WT(i,t),i.log===null&&(i.log=new NT),Y1(i,w_()),Y1(i,e),i}function Y1(n,e){for(const t in e)if(t in e){const r=e[t];N1(r)&&N1(n[t])?n[t]={...n[t],...e[t]}:n[t]=e[t]}}function WT(n,e){e&&!("baseUri"in n)&&(n.baseUri=e)}function sp(n){var e;return n?(Array.isArray(n)&&(n=n[0]),Array.isArray((e=n)===null||e===void 0?void 0:e.extensions)):!1}function op(n){var e,t;Lf(n,"null loader"),Lf(sp(n),"invalid loader");let r;return Array.isArray(n)&&(r=n[1],n=n[0],n={...n,options:{...n.options,...r}}),((e=n)!==null&&e!==void 0&&e.parseTextSync||(t=n)!==null&&t!==void 0&&t.parseText)&&(n.text=!0),n.text||(n.binary=!0),n}const b_=()=>{const n=__();return n.loaderRegistry=n.loaderRegistry||[],n.loaderRegistry};function QT(n){const e=b_();n=Array.isArray(n)?n:[n];for(const t of n){const r=op(t);e.find(i=>r===i)||e.unshift(r)}}function YT(){return b_()}const $T=new ip({id:"loaders.gl"}),XT=/\.([^.]+)$/;async function ZT(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!E_(n))return null;let i=$1(n,e,{...t,nothrow:!0},r);if(i)return i;if(Sa(n)&&(n=await n.slice(0,10).arrayBuffer(),i=$1(n,e,t,r)),!i&&!(t!=null&&t.nothrow))throw new Error(T_(n));return i}function $1(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!E_(n))return null;if(e&&!Array.isArray(e))return op(e);let i=[];e&&(i=i.concat(e)),t!=null&&t.ignoreRegisteredLoaders||i.push(...YT()),KT(i);const o=qT(n,i,t,r);if(!o&&!(t!=null&&t.nothrow))throw new Error(T_(n));return o}function qT(n,e,t,r){const i=o0(n),o=rp(n),f=np(i)||r?.url;let d=null,m="";if(t!=null&&t.mimeType&&(d=Ad(e,t?.mimeType),m="match forced by supplied MIME type ".concat(t?.mimeType)),d=d||JT(e,f),m=m||(d?"matched url ".concat(f):""),d=d||Ad(e,o),m=m||(d?"matched MIME type ".concat(o):""),d=d||t4(e,n),m=m||(d?"matched initial data ".concat(x_(n)):""),d=d||Ad(e,t?.fallbackMimeType),m=m||(d?"matched fallback MIME type ".concat(o):""),m){var _;$T.log(1,"selectLoader selected ".concat((_=d)===null||_===void 0?void 0:_.name,": ").concat(m,"."))}return d}function E_(n){return!(n instanceof Response&&n.status===204)}function T_(n){const e=o0(n),t=rp(n);let r="No valid loader found (";r+=e?"".concat(h_(e),", "):"no url provided, ",r+="MIME type: ".concat(t?'"'.concat(t,'"'):"not provided",", ");const i=n?x_(n):"";return r+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",r+=")",r}function KT(n){for(const e of n)op(e)}function JT(n,e){const t=e&&XT.exec(e),r=t&&t[1];return r?e4(n,r):null}function e4(n,e){e=e.toLowerCase();for(const t of n)for(const r of t.extensions)if(r.toLowerCase()===e)return t;return null}function Ad(n,e){for(const t of n)if(t.mimeTypes&&t.mimeTypes.includes(e)||e==="application/x.".concat(t.id))return t;return null}function t4(n,e){if(!e)return null;for(const t of n)if(typeof e=="string"){if(n4(e,t))return t}else if(ArrayBuffer.isView(e)){if(X1(e.buffer,e.byteOffset,t))return t}else if(e instanceof ArrayBuffer&&X1(e,0,t))return t;return null}function n4(n,e){return e.testText?e.testText(n):(Array.isArray(e.tests)?e.tests:[e.tests]).some(r=>n.startsWith(r))}function X1(n,e,t){return(Array.isArray(t.tests)?t.tests:[t.tests]).some(i=>r4(n,e,t,i))}function r4(n,e,t,r){if(r instanceof ArrayBuffer)return rT(r,n,r.byteLength);switch(typeof r){case"function":return r(n,t);case"string":const i=lg(n,e,r.length);return r===i;default:return!1}}function x_(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;return typeof n=="string"?n.slice(0,e):ArrayBuffer.isView(n)?lg(n.buffer,n.byteOffset,e):n instanceof ArrayBuffer?lg(n,0,e):""}function lg(n,e,t){if(n.byteLength<e+t)return"";const r=new DataView(n);let i="";for(let o=0;o<t;o++)i+=String.fromCharCode(r.getUint8(e+o));return i}const i4=256*1024;function*s4(n,e){const t=e?.chunkSize||i4;let r=0;const i=new TextEncoder;for(;r<n.length;){const o=Math.min(n.length-r,t),f=n.slice(r,r+o);r+=o,yield i.encode(f)}}const o4=256*1024;function a4(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(function*(){const{chunkSize:t=o4}=e;let r=0;for(;r<n.byteLength;){const i=Math.min(n.byteLength-r,t),o=new ArrayBuffer(i),f=new Uint8Array(n,r,i);new Uint8Array(o).set(f),r+=i,yield o}})()}const A4=1024*1024;async function*l4(n,e){const t=e?.chunkSize||A4;let r=0;for(;r<n.size;){const i=r+t,o=await n.slice(r,i).arrayBuffer();r=i,yield o}}function Z1(n,e){return tp?u4(n,e):c4(n)}async function*u4(n,e){const t=n.getReader();let r;try{for(;;){const i=r||t.read();e!=null&&e._streamReadAhead&&(r=t.read());const{done:o,value:f}=await i;if(o)return;yield f_(f)}}catch{t.releaseLock()}}async function*c4(n,e){for await(const t of n)yield f_(t)}function f4(n,e){if(typeof n=="string")return s4(n,e);if(n instanceof ArrayBuffer)return a4(n,e);if(Sa(n))return l4(n,e);if(d_(n))return Z1(n,e);if(xa(n))return Z1(n.body,e);throw new Error("makeIterator")}const S_="Cannot convert supplied data type";function h4(n,e,t){if(e.text&&typeof n=="string")return n;if(hT(n)&&(n=n.buffer),n instanceof ArrayBuffer){const r=n;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(n)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(n);let r=n.buffer;const i=n.byteLength||n.length;return(n.byteOffset!==0||i!==r.byteLength)&&(r=r.slice(n.byteOffset,n.byteOffset+i)),r}throw new Error(S_)}async function d4(n,e,t){const r=n instanceof ArrayBuffer||ArrayBuffer.isView(n);if(typeof n=="string"||r)return h4(n,e);if(Sa(n)&&(n=await p_(n)),xa(n)){const i=n;return await wT(i),e.binary?await i.arrayBuffer():await i.text()}if(d_(n)&&(n=f4(n,t)),cT(n)||fT(n))return sT(n);throw new Error(S_)}function C_(n,e){const t=w_(),r=n||t;return typeof r.fetch=="function"?r.fetch:Fu(r.fetch)?i=>z1(i,r):e!=null&&e.fetch?e?.fetch:z1}function g4(n,e,t){if(t)return t;const r={fetch:C_(e,n),...n};if(r.url){const i=np(r.url);r.baseUrl=i,r.queryString=yT(r.url),r.filename=h_(i),r.baseUrl=lT(i)}return Array.isArray(r.loaders)||(r.loaders=null),r}function p4(n,e){if(!e&&n&&!Array.isArray(n))return n;let t;if(n&&(t=Array.isArray(n)?n:[n]),e&&e.loaders){const r=Array.isArray(e.loaders)?e.loaders:[e.loaders];t=t?[...t,...r]:r}return t&&t.length?t:null}async function ap(n,e,t,r){Is(!r||typeof r=="object"),e&&!Array.isArray(e)&&!sp(e)&&(r=void 0,t=e,e=void 0),n=await n,t=t||{};const i=o0(n),f=p4(e,r),d=await ZT(n,f,t);return d?(t=VT(t,d,f,i),r=g4({url:i,parse:ap,loaders:f},t,r||null),await m4(d,n,t,r)):null}async function m4(n,e,t,r){if(qE(n),xa(e)){const i=e,{ok:o,redirected:f,status:d,statusText:m,type:_,url:E}=i,T=Object.fromEntries(i.headers.entries());r.response={headers:T,ok:o,redirected:f,status:d,statusText:m,type:_,url:E}}if(e=await d4(e,n,t),n.parseTextSync&&typeof e=="string")return t.dataType="text",n.parseTextSync(e,t,r,n);if(eT(n,t))return await tT(n,e,t,r,ap);if(n.parseText&&typeof e=="string")return await n.parseText(e,t,r,n);if(n.parse)return await n.parse(e,t,r,n);throw Is(!n.parseSync),new Error("".concat(n.id," loader - no parser found and worker is disabled"))}async function If(n,e,t,r){!Array.isArray(e)&&!sp(e)&&(t=e,e=void 0);const i=C_(t);let o=n;return typeof n=="string"&&(o=await i(n)),Sa(n)&&(o=await i(n)),await ap(o,e,t)}const v4="3.4.14",{_parseImageNode:y4}=globalThis,ug=typeof Image<"u",cg=typeof ImageBitmap<"u",_4=!!y4,fg=tp?!0:_4;function w4(n){switch(n){case"auto":return cg||ug||fg;case"imagebitmap":return cg;case"image":return ug;case"data":return fg;default:throw new Error("@loaders.gl/images: image ".concat(n," not supported in this environment"))}}function b4(){if(cg)return"imagebitmap";if(ug)return"image";if(fg)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function E4(n){const e=x4(n);if(!e)throw new Error("Not an image");return e}function T4(n){switch(E4(n)){case"data":return n;case"image":case"imagebitmap":const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)throw new Error("getImageData");return e.width=n.width,e.height=n.height,t.drawImage(n,0,0),t.getImageData(0,0,n.width,n.height);default:throw new Error("getImageData")}}function x4(n){return typeof ImageBitmap<"u"&&n instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&n instanceof Image?"image":n&&typeof n=="object"&&n.data&&n.width&&n.height?"data":null}const S4=/^data:image\/svg\+xml/,C4=/\.svg((\?|#).*)?$/;function Ap(n){return n&&(S4.test(n)||C4.test(n))}function M4(n,e){if(Ap(e)){let r=new TextDecoder().decode(n);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(r))}return M_(n,e)}function M_(n,e){if(Ap(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(n)])}async function L_(n,e,t){const r=M4(n,t),i=self.URL||self.webkitURL,o=typeof r!="string"&&i.createObjectURL(r);try{return await L4(o||r,e)}finally{o&&i.revokeObjectURL(o)}}async function L4(n,e){const t=new Image;return t.src=n,e.image&&e.image.decode&&t.decode?(await t.decode(),t):await new Promise((r,i)=>{try{t.onload=()=>r(t),t.onerror=o=>i(new Error("Could not load image ".concat(n,": ").concat(o)))}catch(o){i(o)}})}const P4={};let q1=!0;async function k4(n,e,t){let r;Ap(t)?r=await L_(n,e,t):r=M_(n,t);const i=e&&e.imagebitmap;return await I4(r,i)}async function I4(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if((R4(e)||!q1)&&(e=null),e)try{return await createImageBitmap(n,e)}catch(t){console.warn(t),q1=!1}return await createImageBitmap(n)}function R4(n){for(const e in n||P4)return!1;return!0}function O4(n){return!N4(n,"ftyp",4)||(n[8]&96)===0?null:D4(n)}function D4(n){switch(F4(n,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function F4(n,e,t){return String.fromCharCode(...n.slice(e,t))}function B4(n){return[...n].map(e=>e.charCodeAt(0))}function N4(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const r=B4(e);for(let i=0;i<r.length;++i)if(r[i]!==n[i+t])return!1;return!0}const Ji=!1,hu=!0;function P_(n){const e=Nu(n);return z4(e)||G4(e)||V4(e)||j4(e)||U4(e)}function U4(n){const e=new Uint8Array(n instanceof DataView?n.buffer:n),t=O4(e);return t?{mimeType:t.mimeType,width:0,height:0}:null}function z4(n){const e=Nu(n);return e.byteLength>=24&&e.getUint32(0,Ji)===2303741511?{mimeType:"image/png",width:e.getUint32(16,Ji),height:e.getUint32(20,Ji)}:null}function V4(n){const e=Nu(n);return e.byteLength>=10&&e.getUint32(0,Ji)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,hu),height:e.getUint16(8,hu)}:null}function j4(n){const e=Nu(n);return e.byteLength>=14&&e.getUint16(0,Ji)===16973&&e.getUint32(2,hu)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,hu),height:e.getUint32(22,hu)}:null}function G4(n){const e=Nu(n);if(!(e.byteLength>=3&&e.getUint16(0,Ji)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:r,sofMarkers:i}=H4();let o=2;for(;o+9<e.byteLength;){const f=e.getUint16(o,Ji);if(i.has(f))return{mimeType:"image/jpeg",height:e.getUint16(o+5,Ji),width:e.getUint16(o+7,Ji)};if(!r.has(f))return null;o+=2,o+=e.getUint16(o,Ji)}return null}function H4(){const n=new Set([65499,65476,65484,65501,65534]);for(let t=65504;t<65520;++t)n.add(t);return{tableMarkers:n,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function Nu(n){if(n instanceof DataView)return n;if(ArrayBuffer.isView(n))return new DataView(n.buffer);if(n instanceof ArrayBuffer)return new DataView(n);throw new Error("toDataView")}async function W4(n,e){const{mimeType:t}=P_(n)||{},r=globalThis._parseImageNode;return Lf(r),await r(n,t)}async function Q4(n,e,t){e=e||{};const i=(e.image||{}).type||"auto",{url:o}=t||{},f=Y4(i);let d;switch(f){case"imagebitmap":d=await k4(n,e,o);break;case"image":d=await L_(n,e,o);break;case"data":d=await W4(n);break;default:Lf(!1)}return i==="data"&&(d=T4(d)),d}function Y4(n){switch(n){case"auto":case"data":return b4();default:return w4(n),n}}const $4=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],X4=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],Z4={image:{type:"auto",decode:!0}},q4={id:"image",module:"images",name:"Images",version:v4,mimeTypes:X4,extensions:$4,parse:Q4,tests:[n=>!!P_(new DataView(n))],options:Z4};function k_(n){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const t=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent;return!!(t&&t.indexOf("Electron")>=0)}function Bs(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||k_()}const df={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,process:typeof process=="object"&&process},Zc=df.window||df.self||df.global,Zl=df.process||{},I_=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Bs();const ld=globalThis;function R_(n){if(!Bs())return"Node";if(k_())return"Electron";const t=(typeof navigator<"u"?navigator:{}).userAgent||"";if(t.indexOf("Edge")>-1)return"Edge";const r=t.indexOf("MSIE ")!==-1,i=t.indexOf("Trident/")!==-1;return r||i?"IE":ld.chrome?"Chrome":ld.safari?"Safari":ld.mozInnerScreenX?"Firefox":"Unknown"}function K4(n){try{const e=window[n],t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch{return null}}class J4{constructor(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";I(this,"storage",void 0),I(this,"id",void 0),I(this,"config",void 0),this.storage=K4(r),this.id=e,this.config=t,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}}_loadConfiguration(){let e={};if(this.storage){const t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}function ex(n){let e;return n<10?e="".concat(n.toFixed(2),"ms"):n<100?e="".concat(n.toFixed(1),"ms"):n<1e3?e="".concat(n.toFixed(0),"ms"):e="".concat((n/1e3).toFixed(2),"s"),e}function tx(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const t=Math.max(e-n.length,0);return"".concat(" ".repeat(t)).concat(n)}function ud(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=n.src.replace(/\(/g,"%28").replace(/\)/g,"%29");n.width>r&&(t=Math.min(t,r/n.width));const o=n.width*t,f=n.height*t,d=["font-size:1px;","padding:".concat(Math.floor(f/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(f,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(f,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),d]}let Rf;(function(n){n[n.BLACK=30]="BLACK",n[n.RED=31]="RED",n[n.GREEN=32]="GREEN",n[n.YELLOW=33]="YELLOW",n[n.BLUE=34]="BLUE",n[n.MAGENTA=35]="MAGENTA",n[n.CYAN=36]="CYAN",n[n.WHITE=37]="WHITE",n[n.BRIGHT_BLACK=90]="BRIGHT_BLACK",n[n.BRIGHT_RED=91]="BRIGHT_RED",n[n.BRIGHT_GREEN=92]="BRIGHT_GREEN",n[n.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",n[n.BRIGHT_BLUE=94]="BRIGHT_BLUE",n[n.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",n[n.BRIGHT_CYAN=96]="BRIGHT_CYAN",n[n.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(Rf||(Rf={}));function K1(n){return typeof n=="string"?Rf[n.toUpperCase()]||Rf.WHITE:n}function nx(n,e,t){return!Bs&&typeof n=="string"&&(e&&(e=K1(e),n="\x1B[".concat(e,"m").concat(n,"\x1B[39m")),t&&(e=K1(t),n="\x1B[".concat(t+10,"m").concat(n,"\x1B[49m"))),n}function rx(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const t=Object.getPrototypeOf(n),r=Object.getOwnPropertyNames(t);for(const i of r)typeof n[i]=="function"&&(e.find(o=>i===o)||(n[i]=n[i].bind(n)))}function Of(n,e){if(!n)throw new Error(e||"Assertion failed")}function mA(){let n;if(Bs&&"performance"in Zc){var e,t;n=Zc==null||(e=Zc.performance)===null||e===void 0||(t=e.now)===null||t===void 0?void 0:t.call(e)}else if("hrtime"in Zl){var r;const i=Zl==null||(r=Zl.hrtime)===null||r===void 0?void 0:r.call(Zl);n=i[0]*1e3+i[1]/1e6}else n=Date.now();return n}const vA={debug:Bs&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},ix={enabled:!0,level:0};function fi(){}const J1={},e2={once:!0};class lp{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};I(this,"id",void 0),I(this,"VERSION",I_),I(this,"_startTs",mA()),I(this,"_deltaTs",mA()),I(this,"_storage",void 0),I(this,"userData",{}),I(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new J4("__probe-".concat(this.id,"__"),ix),this.timeStamp("".concat(this.id," started")),rx(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((mA()-this._startTs).toPrecision(10))}getDelta(){return Number((mA()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,t){this._storage.setConfiguration({[e]:t})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,t){Of(e,t)}warn(e){return this._getLogFunction(0,e,vA.warn,arguments,e2)}error(e){return this._getLogFunction(0,e,vA.error,arguments)}deprecated(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}removed(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}probe(e,t){return this._getLogFunction(e,t,vA.log,arguments,{time:!0,once:!0})}log(e,t){return this._getLogFunction(e,t,vA.debug,arguments)}info(e,t){return this._getLogFunction(e,t,console.info,arguments)}once(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return this._getLogFunction(e,t,vA.debug||vA.info,arguments,e2)}table(e,t,r){return t?this._getLogFunction(e,t,console.table||fi,r&&[r],{tag:Ax(t)}):fi}image(e){let{logLevel:t,priority:r,image:i,message:o="",scale:f=1}=e;return this._shouldLog(t||r)?Bs?ax({image:i,message:o,scale:f}):ox():fi}time(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}timeEnd(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,t){return this._getLogFunction(e,t,console.timeStamp||fi)}group(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=t2({logLevel:e,message:t,opts:r}),{collapsed:o}=r;return i.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,t,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||fi)}withGroup(e,t,r){this.group(e,t)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=O_(e)}_getLogFunction(e,t,r,i,o){if(this._shouldLog(e)){o=t2({logLevel:e,message:t,args:i,opts:o}),r=r||o.method,Of(r),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=mA();const f=o.tag||o.message;if(o.once)if(!J1[f])J1[f]=mA();else return fi;return t=sx(this.id,o.message,o),r.bind(console,t,...o.args)}return fi}}I(lp,"VERSION",I_);function O_(n){if(!n)return 0;let e;switch(typeof n){case"number":e=n;break;case"object":e=n.logLevel||n.priority||0;break;default:return 0}return Of(Number.isFinite(e)&&e>=0),e}function t2(n){const{logLevel:e,message:t}=n;n.logLevel=O_(e);const r=n.args?Array.from(n.args):[];for(;r.length&&r.shift()!==t;);switch(typeof e){case"string":case"function":t!==void 0&&r.unshift(t),n.message=e;break;case"object":Object.assign(n,e);break}typeof n.message=="function"&&(n.message=n.message());const i=typeof n.message;return Of(i==="string"||i==="object"),Object.assign(n,{args:r},n.opts)}function sx(n,e,t){if(typeof e=="string"){const r=t.time?tx(ex(t.total)):"";e=t.time?"".concat(n,": ").concat(r,"  ").concat(e):"".concat(n,": ").concat(e),e=nx(e,t.color,t.background)}return e}function ox(n){return console.warn("removed"),fi}function ax(n){let{image:e,message:t="",scale:r=1}=n;if(typeof e=="string"){const o=new Image;return o.onload=()=>{const f=ud(o,t,r);console.log(...f)},o.src=e,fi}const i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...ud(e,t,r)),fi;if(i.toLowerCase()==="canvas"){const o=new Image;return o.onload=()=>console.log(...ud(o,t,r)),o.src=e.toDataURL(),fi}return fi}function Ax(n){for(const e in n)for(const t in n[e])return t||"untitled";return"empty"}const Gt=new lp({id:"deck"});let hg={};function lx(n){hg=n}function hr(n,e,t,r){Gt.level>0&&hg[n]&&hg[n].call(null,e,t,r)}function ux(n){const e=n[0],t=n[n.length-1];return e==="{"&&t==="}"||e==="["&&t==="]"}const cx={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:ux,parseTextSync:JSON.parse};function fx(){const n="8.9.28",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==n)throw new Error("deck.gl - multiple versions detected: ".concat(e," vs ").concat(n));return e||(Gt.log(1,"deck.gl ".concat(n))(),globalThis.deck={...globalThis.deck,VERSION:n,version:n,log:Gt,_registerLoggers:lx},QT([cx,[q4,{imagebitmap:{premultiplyAlpha:"none"}}]])),n}const hx=fx(),Zt={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(Zt,"IDENTITY",{get:()=>(Gt.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const es={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},VA={common:0,meters:1,pixels:2},n2={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},nt=new lp({id:"luma.gl"});function _r(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}const dx="Invalid WebGLRenderingContext",gx="Requires WebGL2";function a0(n){return typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext?!0:!!(n&&Number.isFinite(n._version))}function Ft(n){return typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext?!0:!!(n&&n._version===2)}function px(n){return Ft(n)?n:null}function A0(n){return _r(a0(n),dx),n}function dr(n){return _r(Ft(n),gx),n}const lu={};function mx(n){globalThis.console&&globalThis.console.error&&globalThis.console.error(n)}function vx(n){globalThis.console&&globalThis.console.log&&globalThis.console.log(n)}function yx(n,e){lu[n]=!0,mx(e)}function _x(n){const e=n.getError;n.getError=function(){let r;do r=e.apply(n),r!==0&&(lu[r]=!0);while(r!==0);for(r in lu)if(lu[r])return delete lu[r],parseInt(r,10);return 0}}const Uu=function n(e){const t=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let r=0;r<this.attribs.length;r++){const i=new n.VertexAttrib(t);this.attribs[r]=i}this.maxAttrib=0};Uu.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};Uu.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Ca=function(e){const t=this;this.gl=e,_x(e);const r=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(o){return o===t.VERTEX_ARRAY_BINDING_OES?t.currentVertexArrayObject===t.defaultVertexArrayObject?null:t.currentVertexArrayObject:r.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(o){const f=t.currentVertexArrayObject;f.maxAttrib=Math.max(f.maxAttrib,o);const d=f.attribs[o];return d.enabled=!0,r.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(o){const f=t.currentVertexArrayObject;f.maxAttrib=Math.max(f.maxAttrib,o);const d=f.attribs[o];return d.enabled=!1,r.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(o,f){switch(o){case 34962:t.currentArrayBuffer=f;break;case 34963:t.currentVertexArrayObject.elementArrayBuffer=f;break}return r.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(o,f){const m=t.currentVertexArrayObject.attribs[o];switch(f){case 34975:return m.buffer;case 34338:return m.enabled;case 34339:return m.size;case 34340:return m.stride;case 34341:return m.type;case 34922:return m.normalized;default:return r.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(o,f,d,m,_,E){const T=t.currentVertexArrayObject;T.maxAttrib=Math.max(T.maxAttrib,o);const C=T.attribs[o];return C.buffer=t.currentArrayBuffer,C.size=f,C.type=d,C.normalized=m,C.stride=_,C.offset=E,C.recache(),r.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{vx("OESVertexArrayObject emulation library context restored"),t.reset_()},!0),this.reset_()};Ca.prototype.VERTEX_ARRAY_BINDING_OES=34229;Ca.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let r=0;r<this.vertexArrayObjects.length;++r)this.vertexArrayObjects.isAlive=!1;const t=this.gl;this.maxVertexAttribs=t.getParameter(34921),this.defaultVertexArrayObject=new Uu(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};Ca.prototype.createVertexArrayOES=function(){const e=new Uu(this);return this.vertexArrayObjects.push(e),e};Ca.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)};Ca.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof Uu&&e.hasBeenBound&&e.ext===this)};Ca.prototype.bindVertexArrayOES=function(e){const t=this.gl;if(e&&!e.isAlive){yx(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const r=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const o=this.currentVertexArrayObject;if(i===o)return;(!i||o.elementArrayBuffer!==i.elementArrayBuffer)&&r.bindBuffer.call(t,34963,o.elementArrayBuffer);let f=this.currentArrayBuffer;const d=Math.max(i?i.maxAttrib:0,o.maxAttrib);for(let m=0;m<=d;m++){const _=o.attribs[m],E=i?i.attribs[m]:null;if((!i||_.enabled!==E.enabled)&&(_.enabled?r.enableVertexAttribArray.call(t,m):r.disableVertexAttribArray.call(t,m)),_.enabled){let T=!1;(!i||_.buffer!==E.buffer)&&(f!==_.buffer&&(r.bindBuffer.call(t,34962,_.buffer),f=_.buffer),T=!0),(T||_.cached!==E.cached)&&r.vertexAttribPointer.call(t,m,_.size,_.type,_.normalized,_.stride,_.offset)}}this.currentArrayBuffer!==f&&r.bindBuffer.call(t,34962,this.currentArrayBuffer)};function wx(n){if(typeof n.createVertexArray=="function")return;const e=n.getSupportedExtensions;n.getSupportedExtensions=function(){const i=e.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};const t=n.getExtension;n.getExtension=function(i){const o=t.call(this,i);return o||(i!=="OES_vertex_array_object"?null:(n.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Ca(this)),this.__OESVertexArrayObject))}}const r2="OES_element_index",i2="WEBGL_draw_buffers",bx="EXT_disjoint_timer_query",Ex="EXT_disjoint_timer_query_webgl2",Tx="EXT_texture_filter_anisotropic",s2="WEBGL_debug_renderer_info",xx=35723,Sx=4352,Cx=36795,Mx=34047,Lx=37445,Px=37446,sn=n=>Ft(n)?void 0:0,kx={3074:n=>Ft(n)?void 0:36064,[xx]:n=>Ft(n)?void 0:Sx,35977:sn,32937:sn,[Cx]:(n,e)=>{const t=Ft(n)?n.getExtension(Ex):n.getExtension(bx);return t&&t.GPU_DISJOINT_EXT?e(t.GPU_DISJOINT_EXT):0},[Lx]:(n,e)=>{const t=n.getExtension(s2);return e(t&&t.UNMASKED_VENDOR_WEBGL||7936)},[Px]:(n,e)=>{const t=n.getExtension(s2);return e(t&&t.UNMASKED_RENDERER_WEBGL||7937)},[Mx]:(n,e)=>{const t=n.luma.extensions[Tx];return t?e(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:sn,35071:sn,37447:sn,36063:(n,e)=>{if(!Ft(n)){const t=n.getExtension(i2);return t?e(t.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:sn,35374:sn,35377:sn,34852:n=>{if(!Ft(n)){const e=n.getExtension(i2);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:n=>n.getExtension(r2)?2147483647:65535,33001:n=>n.getExtension(r2)?16777216:65535,33e3:n=>16777216,37157:sn,35373:sn,35657:sn,36183:sn,37137:sn,34045:sn,35978:sn,35979:sn,35968:sn,35376:sn,35375:sn,35659:sn,37154:sn,35371:sn,35658:sn,35076:sn,35077:sn,35380:sn};function Ix(n,e,t){const r=kx[t],i=typeof r=="function"?r(n,e,t):r;return i!==void 0?i:e(t)}const Rx="OES_vertex_array_object",D_="ANGLE_instanced_arrays",Ox="WEBGL_draw_buffers",Dx="EXT_disjoint_timer_query",Fx="EXT_texture_filter_anisotropic",Bx="VertexArray requires WebGL2 or OES_vertex_array_object extension";function Nx(n,e){return{webgl2:Ft(n),ext:n.getExtension(e)}}const F_={[Rx]:{meta:{suffix:"OES"},createVertexArray:()=>{_r(!1,Bx)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[D_]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(n,e){_r(e===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[Ox]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{_r(!1)}},[Dx]:{meta:{suffix:"EXT"},createQuery:()=>{_r(!1)},deleteQuery:()=>{_r(!1)},beginQuery:()=>{_r(!1)},endQuery:()=>{},getQuery(n,e){return this.getQueryObject(n,e)},getQueryParameter(n,e){return this.getQueryObject(n,e)},getQueryObject:()=>{}}},cd={readBuffer:(n,e,t)=>{Ft(n)&&e(t)},getVertexAttrib:(n,e,t,r)=>{const{webgl2:i,ext:o}=Nx(n,D_);let f;switch(r){case 35069:f=i?void 0:!1;break;case 35070:f=!i&&!o?0:void 0;break}return f!==void 0?f:e(t,r)},getProgramParameter:(n,e,t,r)=>{if(!Ft(n))switch(r){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return e(t,r)},getInternalformatParameter:(n,e,t,r,i)=>!Ft(n)&&i===32937?new Int32Array([0]):n.getInternalformatParameter(t,r,i),getTexParameter(n,e,t,r){if(r===34046){const{extensions:i}=n.luma,o=i[Fx];r=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(t,r)},getParameter:Ix,hint(n,e,t,r){return e(t,r)}};function Ux(n){n.luma=n.luma||{};const{luma:e}=n;return e.polyfilled||(wx(n),zx(n),jx(n,F_),Vx(n,{target:e,target2:n}),e.polyfilled=!0),n}globalThis.polyfillContext=Ux;function zx(n){n.luma.extensions={};const e=n.getSupportedExtensions()||[];for(const t of e)n.luma[t]=n.getExtension(t)}function Vx(n,e){let{target:t,target2:r}=e;Object.keys(cd).forEach(i=>{if(typeof cd[i]=="function"){const o=n[i]?n[i].bind(n):()=>{},f=cd[i].bind(null,n,o);t[i]=f,r[i]=f}})}function jx(n,e){for(const t of Object.getOwnPropertyNames(e))t!=="overrides"&&Gx(n,{extension:t,target:n.luma,target2:n})}function Gx(n,e){let{extension:t,target:r,target2:i}=e;const o=F_[t];_r(o);const{meta:f={}}=o,{suffix:d=""}=f,m=n.getExtension(t);for(const _ of Object.keys(o)){const E="".concat(_).concat(d);let T=null;_==="meta"||typeof n[_]=="function"||(m&&typeof m[E]=="function"?T=function(){return m[E](...arguments)}:typeof o[_]=="function"&&(T=o[_].bind(r))),T&&(r[_]=T,i[_]=T)}}const up={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},go=(n,e,t)=>e?n.enable(t):n.disable(t),o2=(n,e,t)=>n.hint(t,e),jr=(n,e,t)=>n.pixelStorei(t,e),Hx=(n,e)=>{const t=Ft(n)?36009:36160;return n.bindFramebuffer(t,e)},Wx=(n,e)=>n.bindFramebuffer(36008,e);function ql(n){return Array.isArray(n)||ArrayBuffer.isView(n)}const Qx={3042:go,32773:(n,e)=>n.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(n,e)=>n.clearColor(...e),3107:(n,e)=>n.colorMask(...e),2884:go,2885:(n,e)=>n.cullFace(e),2929:go,2931:(n,e)=>n.clearDepth(e),2932:(n,e)=>n.depthFunc(e),2928:(n,e)=>n.depthRange(...e),2930:(n,e)=>n.depthMask(e),3024:go,35723:o2,36006:Hx,2886:(n,e)=>n.frontFace(e),33170:o2,2849:(n,e)=>n.lineWidth(e),32823:go,32824:"polygonOffset",10752:"polygonOffset",35977:go,32938:"sampleCoverage",32939:"sampleCoverage",3089:go,3088:(n,e)=>n.scissor(...e),2960:go,2961:(n,e)=>n.clearStencil(e),2968:(n,e)=>n.stencilMaskSeparate(1028,e),36005:(n,e)=>n.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(n,e)=>n.viewport(...e),3333:jr,3317:jr,37440:jr,37441:jr,37443:jr,3330:jr,3332:jr,3331:jr,36010:Wx,3314:jr,32878:jr,3316:jr,3315:jr,32877:jr,framebuffer:(n,e)=>{const t=e&&"handle"in e?e.handle:e;return n.bindFramebuffer(36160,t)},blend:(n,e)=>e?n.enable(3042):n.disable(3042),blendColor:(n,e)=>n.blendColor(...e),blendEquation:(n,e)=>{e=ql(e)?e:[e,e],n.blendEquationSeparate(...e)},blendFunc:(n,e)=>{e=ql(e)&&e.length===2?[...e,...e]:e,n.blendFuncSeparate(...e)},clearColor:(n,e)=>n.clearColor(...e),clearDepth:(n,e)=>n.clearDepth(e),clearStencil:(n,e)=>n.clearStencil(e),colorMask:(n,e)=>n.colorMask(...e),cull:(n,e)=>e?n.enable(2884):n.disable(2884),cullFace:(n,e)=>n.cullFace(e),depthTest:(n,e)=>e?n.enable(2929):n.disable(2929),depthFunc:(n,e)=>n.depthFunc(e),depthMask:(n,e)=>n.depthMask(e),depthRange:(n,e)=>n.depthRange(...e),dither:(n,e)=>e?n.enable(3024):n.disable(3024),derivativeHint:(n,e)=>{n.hint(35723,e)},frontFace:(n,e)=>n.frontFace(e),mipmapHint:(n,e)=>n.hint(33170,e),lineWidth:(n,e)=>n.lineWidth(e),polygonOffsetFill:(n,e)=>e?n.enable(32823):n.disable(32823),polygonOffset:(n,e)=>n.polygonOffset(...e),sampleCoverage:(n,e)=>n.sampleCoverage(...e),scissorTest:(n,e)=>e?n.enable(3089):n.disable(3089),scissor:(n,e)=>n.scissor(...e),stencilTest:(n,e)=>e?n.enable(2960):n.disable(2960),stencilMask:(n,e)=>{e=ql(e)?e:[e,e];const[t,r]=e;n.stencilMaskSeparate(1028,t),n.stencilMaskSeparate(1029,r)},stencilFunc:(n,e)=>{e=ql(e)&&e.length===3?[...e,...e]:e;const[t,r,i,o,f,d]=e;n.stencilFuncSeparate(1028,t,r,i),n.stencilFuncSeparate(1029,o,f,d)},stencilOp:(n,e)=>{e=ql(e)&&e.length===3?[...e,...e]:e;const[t,r,i,o,f,d]=e;n.stencilOpSeparate(1028,t,r,i),n.stencilOpSeparate(1029,o,f,d)},viewport:(n,e)=>n.viewport(...e)};function yn(n,e,t){return e[n]!==void 0?e[n]:t[n]}const Yx={blendEquation:(n,e,t)=>n.blendEquationSeparate(yn(32777,e,t),yn(34877,e,t)),blendFunc:(n,e,t)=>n.blendFuncSeparate(yn(32969,e,t),yn(32968,e,t),yn(32971,e,t),yn(32970,e,t)),polygonOffset:(n,e,t)=>n.polygonOffset(yn(32824,e,t),yn(10752,e,t)),sampleCoverage:(n,e,t)=>n.sampleCoverage(yn(32938,e,t),yn(32939,e,t)),stencilFuncFront:(n,e,t)=>n.stencilFuncSeparate(1028,yn(2962,e,t),yn(2967,e,t),yn(2963,e,t)),stencilFuncBack:(n,e,t)=>n.stencilFuncSeparate(1029,yn(34816,e,t),yn(36003,e,t),yn(36004,e,t)),stencilOpFront:(n,e,t)=>n.stencilOpSeparate(1028,yn(2964,e,t),yn(2965,e,t),yn(2966,e,t)),stencilOpBack:(n,e,t)=>n.stencilOpSeparate(1029,yn(34817,e,t),yn(34818,e,t),yn(34819,e,t))},a2={enable:(n,e)=>n({[e]:!0}),disable:(n,e)=>n({[e]:!1}),pixelStorei:(n,e,t)=>n({[e]:t}),hint:(n,e,t)=>n({[e]:t}),bindFramebuffer:(n,e,t)=>{switch(e){case 36160:return n({36006:t,36010:t});case 36009:return n({36006:t});case 36008:return n({36010:t});default:return null}},blendColor:(n,e,t,r,i)=>n({32773:new Float32Array([e,t,r,i])}),blendEquation:(n,e)=>n({32777:e,34877:e}),blendEquationSeparate:(n,e,t)=>n({32777:e,34877:t}),blendFunc:(n,e,t)=>n({32969:e,32968:t,32971:e,32970:t}),blendFuncSeparate:(n,e,t,r,i)=>n({32969:e,32968:t,32971:r,32970:i}),clearColor:(n,e,t,r,i)=>n({3106:new Float32Array([e,t,r,i])}),clearDepth:(n,e)=>n({2931:e}),clearStencil:(n,e)=>n({2961:e}),colorMask:(n,e,t,r,i)=>n({3107:[e,t,r,i]}),cullFace:(n,e)=>n({2885:e}),depthFunc:(n,e)=>n({2932:e}),depthRange:(n,e,t)=>n({2928:new Float32Array([e,t])}),depthMask:(n,e)=>n({2930:e}),frontFace:(n,e)=>n({2886:e}),lineWidth:(n,e)=>n({2849:e}),polygonOffset:(n,e,t)=>n({32824:e,10752:t}),sampleCoverage:(n,e,t)=>n({32938:e,32939:t}),scissor:(n,e,t,r,i)=>n({3088:new Int32Array([e,t,r,i])}),stencilMask:(n,e)=>n({2968:e,36005:e}),stencilMaskSeparate:(n,e,t)=>n({[e===1028?2968:36005]:t}),stencilFunc:(n,e,t,r)=>n({2962:e,2967:t,2963:r,34816:e,36003:t,36004:r}),stencilFuncSeparate:(n,e,t,r,i)=>n({[e===1028?2962:34816]:t,[e===1028?2967:36003]:r,[e===1028?2963:36004]:i}),stencilOp:(n,e,t,r)=>n({2964:e,2965:t,2966:r,34817:e,34818:t,34819:r}),stencilOpSeparate:(n,e,t,r,i)=>n({[e===1028?2964:34817]:t,[e===1028?2965:34818]:r,[e===1028?2966:34819]:i}),viewport:(n,e,t,r,i)=>n({2978:[e,t,r,i]})},Xi=(n,e)=>n.isEnabled(e),A2={3042:Xi,2884:Xi,2929:Xi,3024:Xi,32823:Xi,32926:Xi,32928:Xi,3089:Xi,2960:Xi,35977:Xi};function B_(n){for(const e in n)return!1;return!0}function $x(n,e){if(n===e)return!0;const t=Array.isArray(n)||ArrayBuffer.isView(n),r=Array.isArray(e)||ArrayBuffer.isView(e);if(t&&r&&n.length===e.length){for(let i=0;i<n.length;++i)if(n[i]!==e[i])return!1;return!0}return!1}function l2(n,e){const t=n[e].bind(n);n[e]=function(){const i=arguments.length<=0?void 0:arguments[0];return i in n.state.cache?n.state.enable?n.state.cache[i]:t(...arguments):t(...arguments)},Object.defineProperty(n[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function Xx(n,e,t){const r=n[e].bind(n);n[e]=function(){for(var o=arguments.length,f=new Array(o),d=0;d<o;d++)f[d]=arguments[d];const{valueChanged:m,oldValue:_}=t(n.state._updateCache,...f);return m&&r(...f),_},Object.defineProperty(n[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function Zx(n){const e=n.useProgram.bind(n);n.useProgram=function(r){n.state.program!==r&&(e(r),n.state.program=r)}}class qx{constructor(e){let{copyState:t=!1,log:r=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=t?Jx(e):Object.assign({},up),this.log=r,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){_r(this.stateStack.length>0);const e=this.stateStack[this.stateStack.length-1];Rs(this.gl,e),this.stateStack.pop()}_updateCache(e){let t=!1,r;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const o in e){_r(o!==void 0);const f=e[o],d=this.cache[o];$x(f,d)||(t=!0,r=d,i&&!(o in i)&&(i[o]=d),this.cache[o]=f)}return{valueChanged:t,oldValue:r}}}function N_(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{enable:t=!0,copyState:r}=e;if(_r(r!==void 0),!n.state){const{polyfillContext:i}=globalThis;i&&i(n),n.state=new qx(n,{copyState:r}),Zx(n);for(const o in a2){const f=a2[o];Xx(n,o,f)}l2(n,"getParameter"),l2(n,"isEnabled")}return n.state.enable=t,n}function Kx(n){n.state||N_(n,{copyState:!1}),n.state.push()}function u2(n){_r(n.state),n.state.pop()}function Rs(n,e){if(_r(a0(n),"setParameters requires a WebGL context"),B_(e))return;const t={};for(const i in e){const o=Number(i),f=Qx[i];f&&(typeof f=="string"?t[f]=!0:f(n,e[i],o))}const r=n.state&&n.state.cache;if(r)for(const i in t){const o=Yx[i];o(n,e,r)}}function Jx(n,e){if(e=e||up,typeof e=="number"){const i=e,o=A2[i];return o?o(n,i):n.getParameter(i)}const t=Array.isArray(e)?e:Object.keys(e),r={};for(const i of t){const o=A2[i];r[i]=o?o(n,Number(i)):n.getParameter(Number(i))}return r}function eS(n){Rs(n,up)}function ki(n,e,t){if(B_(e))return t(n);const{nocatch:r=!0}=e;Kx(n),Rs(n,e);let i;if(r)i=t(n),u2(n);else try{i=t(n)}finally{u2(n)}return i}function jA(n){const{luma:e}=n;if(n.canvas&&e){const t=e.canvasSizeInfo,r="clientWidth"in t?t.clientWidth:n.canvas.clientWidth;return r?n.drawingBufferWidth/r:1}return 1}function fd(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=jA(n),i=n.drawingBufferWidth,o=n.drawingBufferHeight;return nS(e,r,i,o,t)}function tS(n){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(n)?n<=0?1:n:n?e:1}function nS(n,e,t,r,i){const o=c2(n[0],e,t);let f=f2(n[1],e,r,i),d=c2(n[0]+1,e,t);const m=d===t-1?d:d-1;d=f2(n[1]+1,e,r,i);let _;return i?(d=d===0?d:d+1,_=f,f=d):_=d===r-1?d:d-1,{x:o,y:f,width:Math.max(m-o+1,1),height:Math.max(_-f+1,1)}}function c2(n,e,t){return Math.min(Math.round(n*e),t-1)}function f2(n,e,t,r){return r?Math.max(0,t-1-Math.round(n*e)):Math.min(Math.round(n*e),t-1)}const cp=Bs(),rS=cp&&typeof document<"u",U_={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function z_(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_r(cp,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),n=Object.assign({},U_,n);const{width:e,height:t}=n;function r(d){if(n.throwOnError)throw new Error(d);return console.error(d),null}n.onError=r;let i;const{canvas:o}=n,f=aS({canvas:o,width:e,height:t,onError:r});return i=oS(f,n),i?(i=fp(i,n),AS(i),i):null}function fp(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!n||n._instrumented)return n;n._version=n._version||lS(n),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{},e=Object.assign({},U_,e);const{manageState:t,debug:r}=e;return t&&N_(n,{copyState:!1,log:function(){for(var i=arguments.length,o=new Array(i),f=0;f<i;f++)o[f]=arguments[f];return nt.log(1,...o)()}}),cp&&r&&(globalThis.makeDebugContext?(n=globalThis.makeDebugContext(n,e),nt.level=Math.max(nt.level,1)):nt.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),n._instrumented=!0,n}function iS(n){const e=n.getParameter(7936),t=n.getParameter(7937),r=n.getExtension("WEBGL_debug_renderer_info"),i=r&&n.getParameter(r.UNMASKED_VENDOR_WEBGL||7936),o=r&&n.getParameter(r.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||e,renderer:o||t,vendorMasked:e,rendererMasked:t,version:n.getParameter(7938),shadingLanguageVersion:n.getParameter(35724)}}function sS(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(n.canvas){const r=tS(e.useDevicePixels);uS(n,r,e);return}const t=n.getExtension("STACKGL_resize_drawingbuffer");t&&"width"in e&&"height"in e&&t.resize(e.width,e.height)}function oS(n,e){const{onError:t}=e;let r=null;const i=m=>r=m.statusMessage||r;n.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:o=!0,webgl2:f=!0}=e;let d=null;return f&&(d=d||n.getContext("webgl2",e),d=d||n.getContext("experimental-webgl2",e)),o&&(d=d||n.getContext("webgl",e),d=d||n.getContext("experimental-webgl",e)),n.removeEventListener("webglcontextcreationerror",i,!1),d?(e.onContextLost&&n.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&n.addEventListener("webglcontextrestored",e.onContextRestored,!1),d):t("Failed to create ".concat(f&&!o?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"))}function aS(n){let{canvas:e,width:t=800,height:r=600,onError:i}=n,o;return typeof e=="string"?(rS&&document.readyState==="complete"||i("createGLContext called on canvas '".concat(e,"' before page was loaded")),o=document.getElementById(e)):e?o=e:(o=document.createElement("canvas"),o.id="lumagl-canvas",o.style.width=Number.isFinite(t)?"".concat(t,"px"):"100%",o.style.height=Number.isFinite(r)?"".concat(r,"px"):"100%",document.body.insertBefore(o,document.body.firstChild)),o}function AS(n){const e=Ft(n)?"WebGL2":"WebGL1",t=iS(n),r=t?"(".concat(t.vendor,",").concat(t.renderer,")"):"",i=n.debug?" debug":"";nt.info(1,"".concat(e).concat(i," context ").concat(r))()}function lS(n){return typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext?2:1}function uS(n,e,t){let r="width"in t?t.width:n.canvas.clientWidth,i="height"in t?t.height:n.canvas.clientHeight;(!r||!i)&&(nt.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=n.canvas.width||1,i=n.canvas.height||1),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{};const o=n.luma.canvasSizeInfo;if(o.clientWidth!==r||o.clientHeight!==i||o.devicePixelRatio!==e){let f=e;const d=Math.floor(r*f),m=Math.floor(i*f);n.canvas.width=d,n.canvas.height=m,(n.drawingBufferWidth!==d||n.drawingBufferHeight!==m)&&(nt.warn("Device pixel ratio clamped")(),f=Math.min(n.drawingBufferWidth/r,n.drawingBufferHeight/i),n.canvas.width=Math.floor(r*f),n.canvas.height=Math.floor(i*f)),Object.assign(n.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}function h2(){let n;if(typeof window<"u"&&window.performance)n=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();n=e[0]*1e3+e[1]/1e6}else n=Date.now();return n}class d2{constructor(e,t){I(this,"name",void 0),I(this,"type",void 0),I(this,"sampleSize",1),I(this,"time",void 0),I(this,"count",void 0),I(this,"samples",void 0),I(this,"lastTiming",void 0),I(this,"lastSampleTime",void 0),I(this,"lastSampleCount",void 0),I(this,"_count",0),I(this,"_time",0),I(this,"_samples",0),I(this,"_startTime",0),I(this,"_timerPending",!1),this.name=e,this.type=t,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=h2(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(h2()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class hp{constructor(e){I(this,"id",void 0),I(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:t})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const t in this.stats)e(this.stats[t])}getTable(){const e={};return this.forEach(t=>{e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(t=>this._getOrCreate(t))}_getOrCreate(e){if(!e||!e.name)return null;const{name:t,type:r}=e;return this.stats[t]||(e instanceof d2?this.stats[t]=e:this.stats[t]=new d2(t,r)),this.stats[t]}}const du="8.5.21",cS="set luma.log.level=1 (or higher) to trace rendering";class fS{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new hp({id:e})),this.stats.get(e)}}const da=new fS;if(globalThis.luma&&globalThis.luma.VERSION!==du)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(du));globalThis.luma||(Bs()&&nt.log(1,"luma.gl ".concat(du," - ").concat(cS))(),globalThis.luma=globalThis.luma||{VERSION:du,version:du,log:nt,stats:da,globals:{modules:{},nodeIO:{}}});function hS(n){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(n):setTimeout(n,1e3/60)}function dS(n){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(n):clearTimeout(n)}function je(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}function hd(n,e){if(typeof e!="string")return e;const t=Number(e);if(!isNaN(t))return t;e=e.replace(/^.*\./,"");const r=n[e];return je(r!==void 0,"Accessing undefined constant GL.".concat(e)),r}function xo(n,e){e=Number(e);for(const t in n)if(n[t]===e)return"GL.".concat(t);return String(e)}const dd={};function Co(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";dd[n]=dd[n]||1;const e=dd[n]++;return"".concat(n,"-").concat(e)}function g2(n){return je(typeof n=="number","Input must be a number"),n&&(n&n-1)===0}function GA(n){let e=!0;for(const t in n){e=!1;break}return e}function V_(n,e,t,r){const i="See luma.gl ".concat(t," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(n);r.forEach(f=>{o.methodName||(o[f]=()=>{throw nt.removed("Calling removed method ".concat(e,".").concat(f,": "),i)(),new Error(f)})})}const yA="Resource subclass must define virtual methods";let Ns=class{get[Symbol.toStringTag](){return"Resource"}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};A0(e);const{id:r,userData:i={}}=t;this.gl=e,this.gl2=e,this.id=r||Co(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=t.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,t&&e&&t.filter(Boolean).forEach(r=>r.delete()),this}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof e!="function")return this._bindHandle(e),this;let t;return this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t}unbind(){this.bind(null)}getParameter(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e=hd(this.gl,e),je(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const o=Ft(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){const d=i.webgl1,m="webgl2"in i?i.webgl2:i.webgl1;return o?m:d}}return this._getParameter(e,t)}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{parameters:t,keys:r}=e,i=this.constructor.PARAMETERS||{},o=Ft(this.gl),f={},d=t||Object.keys(i);for(const m of d){const _=i[m];if(_&&(!("webgl2"in _)||o)&&(!("extension"in _)||this.gl.getExtension(_.extension))){const T=r?xo(this.gl,m):m;f[T]=this.getParameter(m,e),r&&_.type==="GLenum"&&(f[T]=xo(this.gl,f[T]))}}return f}setParameter(e,t){e=hd(this.gl,e),je(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const o=Ft(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(t=hd(t))}return this._setParameter(e,t),this}setParameters(e){for(const t in e)this.setParameter(t,e[t]);return this}stubRemovedMethods(e,t,r){return V_(this,e,t,r)}initialize(e){}_createHandle(){throw new Error(yA)}_deleteHandle(){throw new Error(yA)}_bindHandle(e){throw new Error(yA)}_getOptsFromHandle(){throw new Error(yA)}_getParameter(e,t){throw new Error(yA)}_setParameter(e,t){throw new Error(yA)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],t=da.get("Resource Counts");t.get("Resources Created").incrementCount(),t.get("".concat(e,"s Created")).incrementCount(),t.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];da.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,t),this._trackAllocatedMemoryForContext(e,t,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";const i=da.get("Memory Usage".concat(r));i.get("GPU Memory").addCount(e),i.get("".concat(t," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=da.get("Memory Usage".concat(t));r.get("GPU Memory").subtractCount(this.byteLength),r.get("".concat(e," Memory")).subtractCount(this.byteLength)}};const gS="Failed to deduce GL constant from typed array";function dg(n){switch(ArrayBuffer.isView(n)?n.constructor:n){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(gS)}}function _u(n){let{clamped:e=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(n){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function pS(n){let{data:e,width:t,height:r,bytesPerPixel:i=4,temp:o}=n;const f=t*i;o=o||new Uint8Array(f);for(let d=0;d<r/2;++d){const m=d*f,_=(r-d-1)*f;o.set(e.subarray(m,m+f)),e.copyWithin(m,_,_+f),e.set(o,_)}}function mS(n){let{data:e,width:t,height:r}=n;const i=Math.round(t/2),o=Math.round(r/2),f=new Uint8Array(i*o*4);for(let d=0;d<o;d++)for(let m=0;m<i;m++)for(let _=0;_<4;_++)f[(d*i+m)*4+_]=e[(d*2*t+m*2)*4+_];return{data:f,width:i,height:o}}function gg(n,e,t){const{removedProps:r={},deprecatedProps:i={},replacedProps:o={}}=t;for(const d in r)if(d in e){const _=r[d]?"".concat(n,".").concat(r[d]):"N/A";nt.removed("".concat(n,".").concat(d),_)()}for(const d in i)if(d in e){const m=i[d];nt.deprecated("".concat(n,".").concat(d),"".concat(n,".").concat(m))()}let f=null;for(const d in o)if(d in e){const m=o[d];nt.deprecated("".concat(n,".").concat(d),"".concat(n,".").concat(m))(),f=f||Object.assign({},e),f[m]=e[d],delete f[d]}return f||e}const vS={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},yS={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Yr{static getBytesPerElement(e){return _u(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return je(e.size),_u(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new Yr(vS,...t)}constructor(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(i=>this._assign(i)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Yr.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Yr.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e=gg("Accessor",e,yS),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this}}const p2=10,j_={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},_S={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:j_},wS={removedProps:j_};class nn extends Ns{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,t),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=t.target||(this.gl.webgl2?36662:34962),this.initialize(t),Object.seal(this)}getElementCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Yr.getBytesPerElement(e))}getVertexCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Yr.getBytesPerVertex(e))}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=gg("Buffer",e,_S),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return e=gg("Buffer",e,wS),"accessor"in e&&this.setAccessor(e.accessor),this}setAccessor(e){return e=Object.assign({},e),delete e.buffer,this.accessor=new Yr(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:t,offset:r=0,srcOffset:i=0}=e,o=e.byteLength||e.length;je(t);const f=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(f,this.handle),i!==0||o!==void 0?(dr(this.gl),this.gl.bufferSubData(this.target,r,t,i,o)):this.gl.bufferSubData(f,r,t),this.gl.bindBuffer(f,null),this.debugData=null,this._inferType(t),this}copyData(e){let{sourceBuffer:t,readOffset:r=0,writeOffset:i=0,size:o}=e;const{gl:f}=this;return dr(f),f.bindBuffer(36662,t.handle),f.bindBuffer(36663,this.handle),f.copyBufferSubData(36662,36663,r,i,o),f.bindBuffer(36662,null),f.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:t=0,dstOffset:r=0,length:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};dr(this.gl);const o=_u(this.accessor.type||5126,{clamped:!1}),f=this._getAvailableElementCount(t),d=r;let m,_;e?(_=e.length,m=_-d):(m=Math.min(f,i||f),_=d+m);const E=Math.min(f,m);return i=i||E,je(i<=E),e=e||new o(_),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,t,e,r,i),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:t=this.accessor&&this.accessor.index,offset:r=0,size:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?i!==void 0?this.gl.bindBufferRange(e,t,this.handle,r,i):(je(r===0),this.gl.bindBufferBase(e,t,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:t=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?this.gl.bindBufferBase(e,t,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(p2,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.byteLength+t;je(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,this.usage),this.gl.bufferSubData(i,t,e),this.gl.bindBuffer(i,null),this.debugData=e.slice(0,p2),this.bytesUsed=r,this._trackAllocatedMemory(r);const o=dg(e);return je(o),this.setAccessor(new Yr(this.accessor,{type:o})),this}_setByteLength(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;je(e>=0),this._trackDeallocatedMemory();let r=e;e===0&&(r=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,t),this.gl.bindBuffer(i,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const t=_u(this.accessor.type||5126,{clamped:!1}),r=e/t.BYTES_PER_ELEMENT;return this.getElementCount()-r}_inferType(e){this.accessor.type||this.setAccessor(new Yr(this.accessor,{type:dg(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}get type(){return nt.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return nt.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return nt.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return nt.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Yr(this.accessor,e),this}}const dp={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},G_={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},H_={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function bS(n,e){const t=dp[e];if(!t)return!1;if(t.gl1===void 0&&t.gl2===void 0)return!0;const r=Ft(n)&&t.gl2||t.gl1;return typeof r=="string"?n.getExtension(r):r}function ES(n,e){const t=dp[e];switch(t&&t.types[0]){case 5126:return n.getExtension("OES_texture_float_linear");case 5131:return n.getExtension("OES_texture_half_float_linear");default:return!0}}const TS=[9729,9728],m2=globalThis.WebGLBuffer||function(){};class va extends Ns{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{format:r,linearFiltering:i}=t;let o=!0;return r&&(o=o&&bS(e,r),o=o&&(!i||ES(e,r))),o}constructor(e,t){const{id:r=Co("texture"),handle:i,target:o}=t;super(e,{id:r,handle:i}),this.target=o,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.data;if(t instanceof Promise)return t.then(Q=>this.initialize(Object.assign({},e,{pixels:Q,data:Q}))),this;const r=typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement;if(r&&t.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,t.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:i=null,format:o=6408,border:f=0,recreate:d=!1,parameters:m={},pixelStore:_={},textureUnit:E=void 0}=e;t||(t=i);let{width:T,height:C,dataFormat:P,type:R,compressed:U=!1,mipmaps:j=!0}=e;const{depth:G=0}=e;return{width:T,height:C,compressed:U,dataFormat:P,type:R}=this._deduceParameters({format:o,type:R,dataFormat:P,compressed:U,data:t,width:T,height:C}),this.width=T,this.height=C,this.depth=G,this.format=o,this.type=R,this.dataFormat=P,this.border=f,this.textureUnit=E,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),j&&this._isNPOT()&&(nt.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),j=!1,this._updateForNPOT(m)),this.mipmaps=j,this.setImageData({data:t,width:T,height:C,depth:G,format:o,type:R,dataFormat:P,border:f,mipmaps:j,parameters:_,compressed:U}),j&&this.generateMipmap(),this.setParameters(m),d&&(this.data=t),r&&(this._video={video:t,parameters:m,lastTime:t.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?t.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:t,lastTime:r}=this._video;if(r===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:t}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:t,width:r,mipmaps:i=!1}=e;return r!==this.width||t!==this.height?this.initialize({width:r,height:t,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(nt.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),ki(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:t=this.target,pixels:r=null,level:i=0,format:o=this.format,border:f=this.border,offset:d=0,parameters:m={}}=e;let{data:_=null,type:E=this.type,width:T=this.width,height:C=this.height,dataFormat:P=this.dataFormat,compressed:R=!1}=e;_||(_=r),{type:E,dataFormat:P,compressed:R,width:T,height:C}=this._deduceParameters({format:o,type:E,dataFormat:P,compressed:R,data:_,width:T,height:C});const{gl:U}=this;U.bindTexture(this.target,this.handle);let j=null;({data:_,dataType:j}=this._getDataType({data:_,compressed:R}));let G,Q=0;if(ki(this.gl,m,()=>{switch(j){case"null":U.texImage2D(t,i,o,T,C,f,P,E,_);break;case"typed-array":U.texImage2D(t,i,o,T,C,f,P,E,_,d);break;case"buffer":G=dr(U),G.bindBuffer(35052,_.handle||_),G.texImage2D(t,i,o,T,C,f,P,E,d),G.bindBuffer(35052,null);break;case"browser-object":Ft(U)?U.texImage2D(t,i,o,T,C,f,P,E,_):U.texImage2D(t,i,o,P,E,_);break;case"compressed":for(const[X,q]of _.entries())U.compressedTexImage2D(t,X,q.format,q.width,q.height,f,q.data),Q+=q.levelSize;break;default:je(!1,"Unknown image data type")}}),j==="compressed")this._trackAllocatedMemory(Q,"Texture");else if(_&&_.byteLength)this._trackAllocatedMemory(_.byteLength,"Texture");else{const X=G_[this.dataFormat]||4,q=H_[this.type]||1;this._trackAllocatedMemory(this.width*this.height*X*q,"Texture")}return this.loaded=!0,this}setSubImageData(e){let{target:t=this.target,pixels:r=null,data:i=null,x:o=0,y:f=0,width:d=this.width,height:m=this.height,level:_=0,format:E=this.format,type:T=this.type,dataFormat:C=this.dataFormat,compressed:P=!1,offset:R=0,border:U=this.border,parameters:j={}}=e;if({type:T,dataFormat:C,compressed:P,width:d,height:m}=this._deduceParameters({format:E,type:T,dataFormat:C,compressed:P,data:i,width:d,height:m}),je(this.depth===0,"texSubImage not supported for 3D textures"),i||(i=r),i&&i.data){const G=i;i=G.data,d=G.shape[0],m=G.shape[1]}i instanceof nn&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),ki(this.gl,j,()=>{if(P)this.gl.compressedTexSubImage2D(t,_,o,f,d,m,E,i);else if(i===null)this.gl.texSubImage2D(t,_,o,f,d,m,C,T,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(t,_,o,f,d,m,C,T,i,R);else if(i instanceof m2){const G=dr(this.gl);G.bindBuffer(35052,i),G.texSubImage2D(t,_,o,f,d,m,C,T,R),G.bindBuffer(35052,null)}else Ft(this.gl)?dr(this.gl).texSubImage2D(t,_,o,f,d,m,C,T,i):this.gl.texSubImage2D(t,_,o,f,C,T,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return nt.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:t}=this;return e!==void 0&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:t}=this;return e!==void 0&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}_getDataType(e){let{data:t,compressed:r=!1}=e;return r?{data:t,dataType:"compressed"}:t===null?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof nn?{data:t.handle,dataType:"buffer"}:t instanceof m2?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}_deduceParameters(e){const{format:t,data:r}=e;let{width:i,height:o,dataFormat:f,type:d,compressed:m}=e;const _=dp[t];return f=f||_&&_.dataFormat,d=d||_&&_.types[0],m=m||_&&_.compressed,{width:i,height:o}=this._deduceImageSize(r,i,o),{dataFormat:f,type:d,compressed:m,width:i,height:o,format:t,data:r}}_deduceImageSize(e,t,r){let i;return typeof ImageData<"u"&&e instanceof ImageData?i={width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?i={width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement?i={width:e.width,height:e.height}:typeof ImageBitmap<"u"&&e instanceof ImageBitmap?i={width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?i={width:e.videoWidth,height:e.videoHeight}:e?i={width:t,height:r}:i={width:t>=0?t:1,height:r>=0?r:1},je(i,"Could not deduced texture size"),je(t===void 0||i.width===t,"Deduced texture width does not match supplied width"),je(r===void 0||i.height===r,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}_setParameter(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:je(!1);break;default:this.gl.texParameteri(this.target,e,t);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return Ft(this.gl)||!this.width||!this.height?!1:!g2(this.width)||!g2(this.height)}_updateForNPOT(e){e[this.gl.TEXTURE_MIN_FILTER]===void 0&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),e[this.gl.TEXTURE_WRAP_S]===void 0&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),e[this.gl.TEXTURE_WRAP_T]===void 0&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,t){if(this._isNPOT())switch(e){case 10241:TS.indexOf(t)===-1&&(t=9729);break;case 10242:case 10243:t!==33071&&(t=33071);break}return t}}let xS="";function SS(n,e){return je(typeof n=="string"),n=xS+n,new Promise((t,r)=>{try{const i=new Image;i.onload=()=>t(i),i.onerror=()=>r(new Error("Could not load image ".concat(n,"."))),i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=n}catch(i){r(i)}})}class Zr extends va{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,t){return va.isSupported(e,t)}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};A0(e),(t instanceof Promise||typeof t=="string")&&(t={data:t}),typeof t.data=="string"&&(t=Object.assign({},t,{data:SS(t.data)})),super(e,Object.assign({},t,{target:3553})),this.initialize(t),Object.seal(this)}}const pg=[34069,34070,34071,34072,34073,34074];class W_ extends va{get[Symbol.toStringTag](){return"TextureCube"}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};A0(e),super(e,Object.assign({},t,{target:34067})),this.initialize(t),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{mipmaps:t=!0,parameters:r={}}=e;return this.opts=e,this.setCubeMapImageData(e).then(()=>{this.loaded=!0,t&&this.generateMipmap(e),this.setParameters(r)}),this}subImage(e){let{face:t,data:r,x:i=0,y:o=0,mipmapLevel:f=0}=e;return this._subImage({target:t,data:r,x:i,y:o,mipmapLevel:f})}async setCubeMapImageData(e){let{width:t,height:r,pixels:i,data:o,border:f=0,format:d=6408,type:m=5121}=e;const{gl:_}=this,E=i||o,T=await Promise.all(pg.map(C=>{const P=E[C];return Promise.all(Array.isArray(P)?P:[P])}));this.bind(),pg.forEach((C,P)=>{T[P].length>1&&this.opts.mipmaps!==!1&&nt.warn("".concat(this.id," has mipmap and multiple LODs."))(),T[P].forEach((R,U)=>{t&&r?_.texImage2D(C,U,d,t,r,f,d,m,R):_.texImage2D(C,U,d,d,m,R)})}),this.unbind()}setImageDataForFace(e){const{face:t,width:r,height:i,pixels:o,data:f,border:d=0,format:m=6408,type:_=5121}=e,{gl:E}=this,T=o||f;return this.bind(),T instanceof Promise?T.then(C=>this.setImageDataForFace(Object.assign({},e,{face:t,data:C,pixels:C}))):this.width||this.height?E.texImage2D(t,0,m,r,i,d,m,_,T):E.texImage2D(t,0,m,m,_,T),this}}W_.FACES=pg;class CS extends va{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return Ft(e)}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};dr(e),t=Object.assign({depth:1},t,{target:32879,unpackFlipY:!1}),super(e,t),this.initialize(t),Object.seal(this)}setImageData(e){let{level:t=0,dataFormat:r=6408,width:i,height:o,depth:f=1,border:d=0,format:m,type:_=5121,offset:E=0,data:T,parameters:C={}}=e;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),ki(this.gl,C,()=>{ArrayBuffer.isView(T)&&this.gl.texImage3D(this.target,t,r,i,o,f,d,m,_,T),T instanceof nn&&(this.gl.bindBuffer(35052,T.handle),this.gl.texImage3D(this.target,t,r,i,o,f,d,m,_,E))}),T&&T.byteLength)this._trackAllocatedMemory(T.byteLength,"Texture");else{const P=G_[this.dataFormat]||4,R=H_[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*P*R,"Texture")}return this.loaded=!0,this}}const la="EXT_color_buffer_float",v2={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:la,bpp:2},33327:{gl2:la,bpp:4},34842:{gl2:la,bpp:8},33326:{gl2:la,bpp:4},33328:{gl2:la,bpp:8},34836:{gl2:la,bpp:16},35898:{gl2:la,bpp:4}};function MS(n,e,t){const r=t[e];if(!r)return!1;const i=Ft(n)&&r.gl2||r.gl1;return typeof i=="string"?n.getExtension(i):i}class CA extends Ns{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!t||MS(e,t,v2)}static getSamplesForFormat(e,t){let{format:r}=t;return e.getInternalformatParameter(36161,r,32937)}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,t),this.initialize(t),Object.seal(this)}initialize(e){let{format:t,width:r=1,height:i=1,samples:o=0}=e;return je(t,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),o!==0&&Ft(this.gl)?this.gl.renderbufferStorageMultisample(36161,o,t,r,i):this.gl.renderbufferStorage(36161,t,r,i),this.format=t,this.width=r,this.height=i,this.samples=o,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*v2[this.format].bpp),this}resize(e){let{width:t,height:r}=e;return t!==this.width||r!==this.height?this.initialize({width:t,height:r,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const LS=256,PS=1024,kS=16384,y2=6144,_2=6145,w2=6146,b2=34041,Q_="clear: bad arguments";function gp(n){let{framebuffer:e=null,color:t=null,depth:r=null,stencil:i=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o={};e&&(o.framebuffer=e);let f=0;t&&(f|=kS,t!==!0&&(o.clearColor=t)),r&&(f|=LS,r!==!0&&(o.clearDepth=r)),i&&(f|=PS,r!==!0&&(o.clearStencil=r)),je(f!==0,Q_),ki(n,o,()=>{n.clear(f)})}function IS(n){let{framebuffer:e=null,buffer:t=y2,drawBuffer:r=0,value:i=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};dr(n),ki(n,{framebuffer:e},()=>{switch(t){case y2:switch(i.constructor){case Int32Array:n.clearBufferiv(t,r,i);break;case Uint32Array:n.clearBufferuiv(t,r,i);break;case Float32Array:default:n.clearBufferfv(t,r,i)}break;case _2:n.clearBufferfv(_2,0,[i]);break;case w2:n.clearBufferiv(w2,0,[i]);break;case b2:const[o,f]=i;n.clearBufferfi(b2,0,o,f);break;default:je(!1,Q_)}})}function RS(n){switch(n){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return je(!1),0}}function l0(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{sourceX:t=0,sourceY:r=0,sourceFormat:i=6408}=e;let{sourceAttachment:o=36064,target:f=null,sourceWidth:d,sourceHeight:m,sourceType:_}=e;const{framebuffer:E,deleteFramebuffer:T}=Y_(n);je(E);const{gl:C,handle:P,attachments:R}=E;d=d||E.width,m=m||E.height,o===36064&&P===null&&(o=1028),je(R[o]),_=_||R[o].type,f=DS(f,_,i,d,m),_=_||dg(f);const U=C.bindFramebuffer(36160,P);return C.readPixels(t,r,d,m,i,_,f),C.bindFramebuffer(36160,U||null),T&&E.delete(),f}function E2(n){let{sourceAttachment:e=36064,targetMaxHeight:t=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=l0(n,{sourceAttachment:e}),{width:i,height:o}=n;for(;o>t;)({data:r,width:i,height:o}=mS({data:r,width:i,height:o}));pS({data:r,width:i,height:o});const f=document.createElement("canvas");f.width=i,f.height=o;const d=f.getContext("2d"),m=d.createImageData(i,o);return m.data.set(r),d.putImageData(m,0,0),f.toDataURL()}function OS(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{sourceX:r=0,sourceY:i=0,targetMipmaplevel:o=0,targetInternalFormat:f=6408}=t;let{targetX:d,targetY:m,targetZ:_,width:E,height:T}=t;const{framebuffer:C,deleteFramebuffer:P}=Y_(n);je(C);const{gl:R,handle:U}=C,j=typeof d<"u"||typeof m<"u"||typeof _<"u";d=d||0,m=m||0,_=_||0;const G=R.bindFramebuffer(36160,U);je(e);let Q=null;if(e instanceof va&&(Q=e,E=Number.isFinite(E)?E:Q.width,T=Number.isFinite(T)?T:Q.height,Q.bind(0),e=Q.target),!j)R.copyTexImage2D(e,o,f,r,i,E,T,0);else switch(e){case 3553:case 34067:R.copyTexSubImage2D(e,o,d,m,r,i,E,T);break;case 35866:case 32879:dr(R).copyTexSubImage3D(e,o,d,m,_,r,i,E,T);break}return Q&&Q.unbind(),R.bindFramebuffer(36160,G||null),P&&C.delete(),Q}function Y_(n){return n instanceof Bn?{framebuffer:n,deleteFramebuffer:!1}:{framebuffer:WS(n),deleteFramebuffer:!0}}function DS(n,e,t,r,i){if(n)return n;e=e||5121;const o=_u(e,{clamped:!1}),f=RS(t);return new o(r*i*f)}const cn={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function FS(n){const e=new Zr(n,{format:6408,type:5126,dataFormat:6408}),t=new Bn(n,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),r=t.getStatus();return e.delete(),t.delete(),r===36053}const $_={[cn.WEBGL2]:[!1,!0],[cn.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[cn.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[cn.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[cn.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[cn.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[cn.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[cn.FLOAT_BLEND]:["EXT_float_blend"],[cn.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[cn.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[cn.TEXTURE_FLOAT]:["OES_texture_float",!0],[cn.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[cn.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[cn.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[cn.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[cn.COLOR_ATTACHMENT_RGBA32F]:[FS,"EXT_color_buffer_float"],[cn.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[cn.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[cn.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[cn.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[cn.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[cn.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},BS=2;function NS(n,e){return X_(n,e)}function X_(n,e){return e=Array.isArray(e)?e:[e],e.every(t=>Z_(n,t))}function US(n){n.luma=n.luma||{},n.luma.caps=n.luma.caps||{};for(const e in $_)n.luma.caps[e]===void 0&&(n.luma.caps[e]=Z_(n,e));return n.luma.caps}function Z_(n,e){return n.luma=n.luma||{},n.luma.caps=n.luma.caps||{},n.luma.caps[e]===void 0&&(n.luma.caps[e]=zS(n,e)),n.luma.caps[e]||nt.log(BS,"Feature: ".concat(e," not supported"))(),n.luma.caps[e]}function zS(n,e){const t=$_[e];je(t,e);let r;const i=Ft(n)&&t[1]||t[0];if(typeof i=="function")r=i(n);else if(Array.isArray(i)){r=!0;for(const o of i)r=r&&!!n.getExtension(o)}else typeof i=="string"?r=!!n.getExtension(i):typeof i=="boolean"?r=i:je(!1);return r}const T2="Multiple render targets not supported";class Bn extends Ns{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{colorBufferFloat:r,colorBufferHalfFloat:i}=t;let o=!0;return r&&(o=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),i&&(o=o&&!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),o}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new Bn(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=dr(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=dr(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,t),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(t),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:t=1,height:r=1,attachments:i=null,color:o=!0,depth:f=!0,stencil:d=!1,check:m=!0,readBuffer:_=void 0,drawBuffers:E=void 0}=e;if(je(t>=0&&r>=0,"Width and height need to be integers"),this.width=t,this.height=r,i)for(const T in i){const C=i[T];(Array.isArray(C)?C[0]:C).resize({width:t,height:r})}else i=this._createDefaultAttachments(o,f,d,t,r);this.update({clearAttachments:!0,attachments:i,readBuffer:_,drawBuffers:E}),i&&m&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:t={},readBuffer:r,drawBuffers:i,clearAttachments:o=!1,resizeAttachments:f=!0}=e;this.attach(t,{clearAttachments:o,resizeAttachments:f});const{gl:d}=this,m=d.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),d.bindFramebuffer(36160,m||null),this}resize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:t,height:r}=e;if(this.handle===null)return je(t===void 0&&r===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;t===void 0&&(t=this.gl.drawingBufferWidth),r===void 0&&(r=this.gl.drawingBufferHeight),t!==this.width&&r!==this.height&&nt.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(t,"x").concat(r))();for(const i in this.attachments)this.attachments[i].resize({width:t,height:r});return this.width=t,this.height=r,this}attach(e){let{clearAttachments:t=!1,resizeAttachments:r=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i={};t&&Object.keys(this.attachments).forEach(f=>{i[f]=null}),Object.assign(i,e);const o=this.gl.bindFramebuffer(36160,this.handle);for(const f in i){je(f!==void 0,"Misspelled framebuffer binding point?");const d=Number(f),m=i[d];let _=m;if(!_)this._unattach(d);else if(_ instanceof CA)this._attachRenderbuffer({attachment:d,renderbuffer:_});else if(Array.isArray(m)){const[E,T=0,C=0]=m;_=E,this._attachTexture({attachment:d,texture:E,layer:T,level:C})}else this._attachTexture({attachment:d,texture:_,layer:0,level:0});r&&_&&_.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,o||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(f=>!this.attachments[f]).forEach(f=>{delete this.attachments[f]})}checkStatus(){const{gl:e}=this,t=this.getStatus();if(t!==36053)throw new Error(jS(t));return this}getStatus(){const{gl:e}=this,t=e.bindFramebuffer(36160,this.handle),r=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,t||null),r}clear(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:t,depth:r,stencil:i,drawBuffers:o=[]}=e,f=this.gl.bindFramebuffer(36160,this.handle);return(t||r||i)&&gp(this.gl,{color:t,depth:r,stencil:i}),o.forEach((d,m)=>{IS(this.gl,{drawBuffer:m,value:d})}),this.gl.bindFramebuffer(36160,f||null),this}readPixels(){return nt.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return nt.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return nt.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return nt.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return nt.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return nt.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:t=[],x:r=0,y:i=0,width:o,height:f}=e;const d=dr(this.gl),m=d.bindFramebuffer(36008,this.handle);return r===0&&i===0&&o===void 0&&f===void 0?d.invalidateFramebuffer(36008,t):d.invalidateFramebuffer(36008,t,r,i,o,f),d.bindFramebuffer(36008,m),this}getAttachmentParameter(e,t,r){let i=this._getAttachmentParameterFallback(t);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),r&&i>1e3&&(i=xo(this.gl,i)),i}getAttachmentParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const i={};for(const o of r){const f=t?xo(this.gl,o):o;i[f]=this.getAttachmentParameter(e,o,t)}return i}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const t=Object.keys(this.attachments),r={};for(const i of t){const o=Number(i),f=e?xo(this.gl,o):o;r[f]=this.getAttachmentParameters(o,e)}return r}show(){return typeof window<"u"&&window.open(E2(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e>nt.level||typeof window>"u")return this;t=t||"Framebuffer ".concat(this.id);const r=E2(this,{targetMaxHeight:100});return nt.image({logLevel:e,message:t,image:r},t)(),this}bind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,t,r,i,o){let f=null;return e&&(f=f||{},f[36064]=new Zr(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:o,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(f[36064])),t&&r?(f=f||{},f[33306]=new CA(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(f[33306])):t?(f=f||{},f[36096]=new CA(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:o}),this.ownResources.push(f[36096])):r&&je(!1),f}_unattach(e){const t=this.attachments[e];t&&(t instanceof CA?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:t=36064,renderbuffer:r}=e;const{gl:i}=this;i.framebufferRenderbuffer(36160,t,36161,r.handle),this.attachments[t]=r}_attachTexture(e){let{attachment:t=36064,texture:r,layer:i,level:o}=e;const{gl:f}=this;switch(f.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:dr(f).framebufferTextureLayer(36160,t,r.target,o,i);break;case 34067:const m=VS(i);f.framebufferTexture2D(36160,t,m,r.handle,o);break;case 3553:f.framebufferTexture2D(36160,t,3553,r.handle,o);break;default:je(!1,"Illegal texture type")}f.bindTexture(r.target,null),this.attachments[t]=r}_setReadBuffer(e){const t=px(this.gl);t?t.readBuffer(e):je(e===36064||e===1029,T2),this.readBuffer=e}_setDrawBuffers(e){const{gl:t}=this,r=dr(t);if(r)r.drawBuffers(e);else{const i=t.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(e):je(e.length===1&&(e[0]===36064||e[0]===1029),T2)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const t=US(this.gl);switch(e){case 36052:return t.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.WEBGL2?null:8;case 33297:return t.WEBGL2?null:5125;case 33296:return!t.WEBGL2&&!t.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}function VS(n){return n<34069?n+34069:n}function jS(n){return(Bn.STATUS||{})[n]||"Framebuffer error ".concat(n)}const GS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];Bn.ATTACHMENT_PARAMETERS=GS;function HS(n,e){je(n instanceof Zr||n instanceof W_||n instanceof CS);const t=n.constructor,{gl:r,width:i,height:o,format:f,type:d,dataFormat:m,border:_,mipmaps:E}=n,T=Object.assign({width:i,height:o,format:f,type:d,dataFormat:m,border:_,mipmaps:E},e);return new t(r,T)}function WS(n,e){const{gl:t,width:r,height:i,id:o}=n;return new Bn(t,Object.assign({},e,{id:"framebuffer-for-".concat(o),width:r,height:i,attachments:{36064:n}}))}function gf(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed";const t=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=n.match(t);return r?r[1]:e}const QS=35632,YS=35633;function $S(n){switch(n){case QS:return"fragment";case YS:return"vertex";default:return"unknown type"}}function XS(n,e,t,r){const i=n.split(/\r?\n/),o={},f={},d=r||gf(e)||"(unnamed)",m="".concat($S(t)," shader ").concat(d);for(let E=0;E<i.length;E++){const T=i[E];if(T.length<=1)continue;const C=T.split(":"),P=C[0],R=parseInt(C[2],10);if(isNaN(R))throw new Error("GLSL compilation error in ".concat(m,": ").concat(n));P!=="WARNING"?o[R]=T:f[R]=T}const _=ZS(e);return{shaderName:m,errors:x2(o,_),warnings:x2(f,_)}}function x2(n,e){let t="";for(let r=0;r<e.length;r++){const i=e[r];if(!(!n[r+3]&&!n[r+2]&&!n[r+1])&&(t+="".concat(i,`
`),n[r+1])){const o=n[r+1],f=o.split(":",3),d=f[0],m=parseInt(f[1],10)||0,_=o.substring(f.join(":").length+1).trim();t+=q_("^^^ ".concat(d,": ").concat(_,`

`),m)}}return t}function ZS(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ";const r=n.split(/\r?\n/),i=String(r.length+e-1).length;return r.map((o,f)=>{const d=String(f+e),m=d.length;return q_(d,i-m)+t+o})}function q_(n,e){let t="";for(let r=0;r<e;++r)t+=" ";return"".concat(t).concat(n)}function K_(n){let e=100;const t=n.match(/[^\s]+/g);if(t.length>=2&&t[0]==="#version"){const r=parseInt(t[1],10);Number.isFinite(r)&&(e=r)}return e}const qS="Shader: GLSL source code must be a JavaScript string";class wu extends Ns{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return je(!1),"unknown"}}constructor(e,t){A0(e),je(typeof t.source=="string",qS);const r=gf(t.source,null)||t.id||Co("unnamed ".concat(wu.getTypeName(t.shaderType)));super(e,{id:r}),this.shaderType=t.shaderType,this.source=t.source,this.initialize(t)}initialize(e){let{source:t}=e;const r=gf(t,null);r&&(this.id=Co(r)),this._compile(t)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(wu.getTypeName(this.shaderType),":").concat(this.id)}getName(){return gf(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(e.startsWith("#version ")||(e=`#version 100
`.concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const r=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:o,warnings:f}=XS(r,this.source,this.shaderType,this.id);throw nt.error("GLSL compilation errors in ".concat(i,`
`).concat(o))(),nt.warn("GLSL compilation warnings in ".concat(i,`
`).concat(f))(),new Error("GLSL compilation errors in ".concat(i))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}let gd=class extends wu{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,t){typeof t=="string"&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}},pd=class extends wu{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,t){typeof t=="string"&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}};const KS={5126:an.bind(null,"uniform1fv",Gr,1,ur),35664:an.bind(null,"uniform2fv",Gr,2,ur),35665:an.bind(null,"uniform3fv",Gr,3,ur),35666:an.bind(null,"uniform4fv",Gr,4,ur),5124:an.bind(null,"uniform1iv",po,1,ur),35667:an.bind(null,"uniform2iv",po,2,ur),35668:an.bind(null,"uniform3iv",po,3,ur),35669:an.bind(null,"uniform4iv",po,4,ur),35670:an.bind(null,"uniform1iv",po,1,ur),35671:an.bind(null,"uniform2iv",po,2,ur),35672:an.bind(null,"uniform3iv",po,3,ur),35673:an.bind(null,"uniform4iv",po,4,ur),35674:an.bind(null,"uniformMatrix2fv",Gr,4,Ss),35675:an.bind(null,"uniformMatrix3fv",Gr,9,Ss),35676:an.bind(null,"uniformMatrix4fv",Gr,16,Ss),35678:Kn,35680:Kn,5125:an.bind(null,"uniform1uiv",qc,1,ur),36294:an.bind(null,"uniform2uiv",qc,2,ur),36295:an.bind(null,"uniform3uiv",qc,3,ur),36296:an.bind(null,"uniform4uiv",qc,4,ur),35685:an.bind(null,"uniformMatrix2x3fv",Gr,6,Ss),35686:an.bind(null,"uniformMatrix2x4fv",Gr,8,Ss),35687:an.bind(null,"uniformMatrix3x2fv",Gr,6,Ss),35688:an.bind(null,"uniformMatrix3x4fv",Gr,12,Ss),35689:an.bind(null,"uniformMatrix4x2fv",Gr,8,Ss),35690:an.bind(null,"uniformMatrix4x3fv",Gr,12,Ss),35678:Kn,35680:Kn,35679:Kn,35682:Kn,36289:Kn,36292:Kn,36293:Kn,36298:Kn,36299:Kn,36300:Kn,36303:Kn,36306:Kn,36307:Kn,36308:Kn,36311:Kn},JS={},eC={},tC={},S2=[0];function pp(n,e,t,r){e===1&&typeof n=="boolean"&&(n=n?1:0),Number.isFinite(n)&&(S2[0]=n,n=S2);const i=n.length;if(i%e&&nt.warn("Uniform size should be multiples of ".concat(e),n)(),n instanceof t)return n;let o=r[i];o||(o=new t(i),r[i]=o);for(let f=0;f<i;f++)o[f]=n[f];return o}function Gr(n,e){return pp(n,e,Float32Array,JS)}function po(n,e){return pp(n,e,Int32Array,eC)}function qc(n,e){return pp(n,e,Uint32Array,tC)}function C2(n,e,t){const r=KS[t.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(t.type));return r().bind(null,n,e)}function nC(n){if(n[n.length-1]!=="]")return{name:n,length:1,isArray:!1};const e=/([^[]*)(\[[0-9]+\])?/,t=n.match(e);if(!t||t.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(n));return{name:t[1],length:t[2]||1,isArray:!!t[2]}}function rC(n,e,t){for(const r in n){const i=n[r];if((!t||!!t[r])&&!iC(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),i),new Error("".concat(e," Bad uniform ").concat(r))}return!0}function iC(n){return Array.isArray(n)||ArrayBuffer.isView(n)?oC(n):isFinite(n)||n===!0||n===!1||n instanceof va||n instanceof CA?!0:n instanceof Bn?!!n.texture:!1}function sC(n,e,t){if(Array.isArray(t)||ArrayBuffer.isView(t))if(n[e]){const r=n[e];for(let i=0,o=t.length;i<o;++i)r[i]=t[i]}else n[e]=t.slice();else n[e]=t}function oC(n){if(n.length===0)return!1;const e=Math.min(n.length,16);for(let t=0;t<e;++t)if(!Number.isFinite(n[t]))return!1;return!0}function Kn(){let n=null;return(e,t,r)=>{const i=n!==r;return i&&(e.uniform1i(t,r),n=r),i}}function an(n,e,t,r){let i=null,o=null;return(f,d,m)=>{const _=e(m,t),E=_.length;let T=!1;if(i===null)i=new Float32Array(E),o=E,T=!0;else{je(o===E,"Uniform length cannot change.");for(let C=0;C<E;++C)if(_[C]!==i[C]){T=!0;break}}return T&&(r(f,n,d,_),i.set(_)),T}}function ur(n,e,t,r){n[e](t,r)}function Ss(n,e,t,r){n[e](t,!1,r)}const aC=5120,AC=5121,lC=5122,uC=5123,M2=0,Kc=1,cC=2,fC=3,Jc=4,hC=5,dC=6,On=5126,gC=35664,pC=35665,mC=35666,Kl=5124,vC=35667,yC=35668,_C=35669,Jl=5125,wC=36294,bC=36295,EC=36296,TC=35670,xC=35671,SC=35672,CC=35673,MC=35674,LC=35675,PC=35676,kC=35685,IC=35686,RC=35687,OC=35688,DC=35689,FC=35690,mg={[On]:[On,1,"float"],[gC]:[On,2,"vec2"],[pC]:[On,3,"vec3"],[mC]:[On,4,"vec4"],[Kl]:[Kl,1,"int"],[vC]:[Kl,2,"ivec2"],[yC]:[Kl,3,"ivec3"],[_C]:[Kl,4,"ivec4"],[Jl]:[Jl,1,"uint"],[wC]:[Jl,2,"uvec2"],[bC]:[Jl,3,"uvec3"],[EC]:[Jl,4,"uvec4"],[TC]:[On,1,"bool"],[xC]:[On,2,"bvec2"],[SC]:[On,3,"bvec3"],[CC]:[On,4,"bvec4"],[MC]:[On,8,"mat2"],[kC]:[On,8,"mat2x3"],[IC]:[On,8,"mat2x4"],[LC]:[On,12,"mat3"],[RC]:[On,12,"mat3x2"],[OC]:[On,12,"mat3x4"],[PC]:[On,16,"mat4"],[DC]:[On,16,"mat4x2"],[FC]:[On,16,"mat4x3"]};function BC(n){switch(n){case M2:return M2;case Kc:return Kc;case fC:return Kc;case cC:return Kc;case Jc:return Jc;case hC:return Jc;case dC:return Jc;default:return je(!1),0}}function L2(n){const e=mg[n];if(!e)return null;const[t,r]=e;return{type:t,components:r}}function J_(n,e){switch(n){case aC:case AC:case lC:case uC:n=On;break}for(const t in mg){const[r,i,o]=mg[t];if(r===n&&i===e)return{glType:t,name:o}}return null}class NC{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const t=Number(e);return Number.isFinite(t)?this.attributeInfosByLocation[t]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const t=this.getAttributeInfo(e);return t?t.location:-1}getAttributeAccessor(e){const t=this.getAttributeInfo(e);return t?t.accessor:null}getVaryingInfo(e){const t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const t=this.getVaryingInfo();return t?t.location:-1}getVaryingAccessor(e){const t=this.getVaryingInfo();return t?t.accessor:null}_readAttributesFromProgram(e){const{gl:t}=e,r=t.getProgramParameter(e.handle,35721);for(let i=0;i<r;i++){const{name:o,type:f,size:d}=t.getActiveAttrib(e.handle,i),m=t.getAttribLocation(e.handle,o);m>=0&&this._addAttribute(m,o,f,d)}this.attributeInfos.sort((i,o)=>i.location-o.location)}_readVaryingsFromProgram(e){const{gl:t}=e;if(!Ft(t))return;const r=t.getProgramParameter(e.handle,35971);for(let i=0;i<r;i++){const{name:o,type:f,size:d}=t.getTransformFeedbackVarying(e.handle,i);this._addVarying(i,o,f,d)}this.varyingInfos.sort((i,o)=>i.location-o.location)}_addAttribute(e,t,r,i){const{type:o,components:f}=L2(r),d={type:o,size:i*f};this._inferProperties(e,t,d);const m={location:e,name:t,accessor:new Yr(d)};this.attributeInfos.push(m),this.attributeInfosByLocation[e]=m,this.attributeInfosByName[m.name]=m}_inferProperties(e,t,r){/instance/i.test(t)&&(r.divisor=1)}_addVarying(e,t,r,i){const{type:o,components:f}=L2(r),d=new Yr({type:o,size:i*f}),m={location:e,name:t,accessor:d};this.varyingInfos.push(m),this.varyingInfosByName[m.name]=m}}const P2=4,UC=35981,zC=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class ew extends Ns{get[Symbol.toStringTag](){return"Program"}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,t),this.stubRemovedMethods("Program","v6.0",zC),this._isCached=!1,this.initialize(t),Object.seal(this),this._setId(t.id)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{hash:t,vs:r,fs:i,varyings:o,bufferMode:f=UC}=e;return this.hash=t||"",this.vs=typeof r=="string"?new gd(this.gl,{id:"".concat(e.id,"-vs"),source:r}):r,this.fs=typeof i=="string"?new pd(this.gl,{id:"".concat(e.id,"-fs"),source:i}):i,je(this.vs instanceof gd),je(this.fs instanceof pd),this.uniforms={},this._textureUniforms={},o&&o.length>0&&(dr(this.gl),this.varyings=o,this.gl2.transformFeedbackVaryings(this.handle,o,f)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new NC(this),this.setProps(e)}delete(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:t,drawMode:r=4,vertexCount:i,offset:o=0,start:f,end:d,isIndexed:m=!1,indexType:_=5123,instanceCount:E=0,isInstanced:T=E>0,vertexArray:C=null,transformFeedback:P,framebuffer:R,parameters:U={},uniforms:j,samplers:G}=e;if((j||G)&&(nt.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(j||{})),nt.priority>=t){const Q=R?R.id:"default",X="mode=".concat(xo(this.gl,r)," verts=").concat(i," ")+"instances=".concat(E," indexType=").concat(xo(this.gl,_)," ")+"isInstanced=".concat(T," isIndexed=").concat(m," ")+"Framebuffer=".concat(Q);nt.log(t,X)()}return je(C),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||i===0||T&&E===0?!1:(C.bindForDraw(i,E,()=>{if(R!==void 0&&(U=Object.assign({},U,{framebuffer:R})),P){const Q=BC(r);P.begin(Q)}this._bindTextures(),ki(this.gl,U,()=>{m&&T?this.gl2.drawElementsInstanced(r,i,_,o,E):m&&Ft(this.gl)&&!isNaN(f)&&!isNaN(d)?this.gl2.drawRangeElements(r,f,d,i,_,o):m?this.gl.drawElements(r,i,_,o):T?this.gl2.drawArraysInstanced(r,o,i,E):this.gl.drawArrays(r,o,i)}),P&&P.end()}),!0)}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};nt.priority>=2&&rC(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const t in e){const r=e[t],i=this._uniformSetters[t];if(i){let o=r,f=!1;if(o instanceof Bn&&(o=o.texture),o instanceof va)if(f=this.uniforms[t]!==r,f){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);const d=o,{textureIndex:m}=i;d.bind(m),o=m,this._textureUniforms[t]=d}else o=i.textureIndex;else this._textureUniforms[t]&&delete this._textureUniforms[t];(i(o)||f)&&sC(this.uniforms,t,r)}}return this}_areTexturesRenderable(){let e=!0;for(const t in this._textureUniforms){const r=this._textureUniforms[t];r.update(),e=e&&r.loaded}return e}_bindTextures(){for(const e in this._textureUniforms){const t=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(t)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const t=this.gl.getAttachedShaders(e),r={};for(const i of t)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new gd({handle:i});break;case 35632:r.fs=new pd({handle:i});break}return r}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const t=this._getName();this.id=Co(t)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),nt.time(P2,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),nt.timeEnd(P2,"linkProgram for ".concat(this._getName()))(),e.debug||nt.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let t=0;t<this._uniformCount;t++){const r=this.gl.getActiveUniform(this.handle,t),{name:i}=nC(r.name);let o=e.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=C2(e,o,r),r.size>1)for(let f=0;f<r.size;f++)o=e.getUniformLocation(this.handle,"".concat(i,"[").concat(f,"]")),this._uniformSetters["".concat(i,"[").concat(f,"]")]=C2(e,o,r)}this._textureIndexCounter=0}getActiveUniforms(e,t){return this.gl2.getActiveUniforms(this.handle,e,t)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,t){return this.gl2.getActiveUniformBlockParameter(this.handle,e,t)}uniformBlockBinding(e,t){this.gl2.uniformBlockBinding(this.handle,e,t)}}const VC=34918,jC=34919,GC=35007,HC=36795,WC=35976,QC=35887,YC=36202;class Df extends Ns{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const r=Ft(e),i=X_(e,cn.TIMER_QUERY);let o=r||i;for(const f of t)switch(f){case"queries":o=o&&r;break;case"timers":o=o&&i;break;default:je(!1)}return o}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,t),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(GC)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(e?YC:QC)}beginTransformFeedbackQuery(){return this.begin(WC)}begin(e){return this._queryPending?this:(this.target=e,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,jC);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(HC)}getResult(){return this.gl2.getQueryParameter(this.handle,VC)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let t=0;return this._pollingPromise=new Promise((r,i)=>{const o=()=>{this.isResultAvailable()?(r(this.getResult()),this._pollingPromise=null):t++>e?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(o)};requestAnimationFrame(o)}),this._pollingPromise}_createHandle(){return Df.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class tw extends Ns{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return Ft(e)}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};dr(e),super(e,t),this.initialize(t),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,GA(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(const t in e)this.setBuffer(t,e[t])}),this}setBuffer(e,t){const r=this._getVaryingIndex(e),{buffer:i,byteSize:o,byteOffset:f}=this._getBufferParams(t);return r<0?(this.unused[e]=i,nt.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[r]=t,this.bindOnUse||this._bindBuffer(r,i,f,o),this)}begin(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let t,r,i;return e instanceof nn?i=e:(i=e.buffer,r=e.byteSize,t=e.byteOffset),(t!==void 0||r!==void 0)&&(t=t||0,r=r||i.byteLength-t),{buffer:i,byteOffset:t,byteSize:r}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const t=Number(e);return Number.isFinite(t)?t:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:t,byteSize:r,byteOffset:i}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,t,i,r)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const o=t&&t.handle;return!o||i===void 0?this.gl.bindBufferBase(35982,e,o):this.gl.bindBufferRange(35982,e,o,r,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}let ef=null;function $C(n){return(!ef||ef.byteLength<n)&&(ef=new ArrayBuffer(n)),ef}function XC(n,e){const t=$C(n.BYTES_PER_ELEMENT*e);return new n(t,0,e)}function ZC(n){let{target:e,source:t,start:r=0,count:i=1}=n;const o=t.length,f=i*o;let d=0;for(let m=r;d<o;d++)e[m++]=t[d];for(;d<f;)d<f-d?(e.copyWithin(r+d,r,r+d),d*=2):(e.copyWithin(r+d,r,r+f-d),d=f);return e}const qC="elements must be GL.ELEMENT_ARRAY_BUFFER";class Hr extends Ns{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?Ft(e)||R_()==="Chrome":!0}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new Hr(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return Hr.MAX_ATTRIBUTES=Hr.MAX_ATTRIBUTES||e.getParameter(34921),Hr.MAX_ATTRIBUTES}static setConstant(e,t,r){switch(r.constructor){case Float32Array:Hr._setConstantFloatArray(e,t,r);break;case Int32Array:Hr._setConstantIntArray(e,t,r);break;case Uint32Array:Hr._setConstantUintArray(e,t,r);break;default:je(!1)}}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=t.id||t.program&&t.program.id;super(e,Object.assign({},t,{id:r})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=t.isDefaultArray||!1,this.gl2=e,this.initialize(t),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Hr.getMaxAttributes(this.gl)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(e)}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return je(!e||e.target===34963,qC),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,t,r){if(t.target===34963)return this.setElementBuffer(t,r);const{size:i,type:o,stride:f,offset:d,normalized:m,integer:_,divisor:E}=r,{gl:T,gl2:C}=this;return e=Number(e),this.bind(()=>{T.bindBuffer(34962,t.handle),_?(je(Ft(T)),C.vertexAttribIPointer(e,i,o,f,d)):T.vertexAttribPointer(e,i,o,m,f,d),T.enableVertexAttribArray(e),C.vertexAttribDivisor(e,E||0)}),this}enable(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!t&&e===0&&!Hr.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>t?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,t){const r=this._normalizeConstantArrayValue(t),i=r.byteLength*e,o=r.length*e;let f=!this.buffer;if(this.buffer=this.buffer||new nn(this.gl,i),f=f||this.buffer.reallocate(i),f=f||!this._compareConstantArrayValues(r,this.bufferValue),f){const d=XC(t.constructor,o);ZC({target:d,source:r,start:0,count:o}),this.buffer.subData(d),this.bufferValue=t}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}static _setConstantFloatArray(e,t,r){switch(r.length){case 1:e.vertexAttrib1fv(t,r);break;case 2:e.vertexAttrib2fv(t,r);break;case 3:e.vertexAttrib3fv(t,r);break;case 4:e.vertexAttrib4fv(t,r);break;default:je(!1)}}static _setConstantIntArray(e,t,r){switch(je(Ft(e)),r.length){case 1:e.vertexAttribI1iv(t,r);break;case 2:e.vertexAttribI2iv(t,r);break;case 3:e.vertexAttribI3iv(t,r);break;case 4:e.vertexAttribI4iv(t,r);break;default:je(!1)}}static _setConstantUintArray(e,t,r){switch(je(Ft(e)),r.length){case 1:e.vertexAttribI1uiv(t,r);break;case 2:e.vertexAttribI2uiv(t,r);break;case 3:e.vertexAttribI3uiv(t,r);break;case 4:e.vertexAttribI4uiv(t,r);break;default:je(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,t){let{location:r}=t;return je(Number.isFinite(r)),this.bind(()=>e===34373?this.gl.getVertexAttribOffset(r,e):this.gl.getVertexAttrib(r,e))}}const KC="VertexArray: attributes must be Buffers or constants (i.e. typed array)",JC=/^(.+)__LOCATION_([0-9]+)$/,e6=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class t6{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=t.id||t.program&&t.program.id;this.id=r,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Hr(e),V_(this,"VertexArray","v6.0",e6),this.initialize(t),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const t in e){const r=e[t];this._setAttribute(t,r)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=e,this.elementsAccessor=t,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,t),this}setBuffer(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(t.target===34963)return this.setElementBuffer(t,r);const{location:i,accessor:o}=this._resolveLocationAndAccessor(e,t,t.accessor,r);return i>=0&&(this.values[i]=t,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,t,o)),this}setConstant(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{location:i,accessor:o}=this._resolveLocationAndAccessor(e,t,Object.assign({size:t.length},r));return i>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t),this.values[i]=t,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new nn(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof nn&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const t=this.values[e];t instanceof nn&&this.setBuffer(e,t)}}),this}bindForDraw(e,t,r){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,t),i=r()}),i}_resolveLocationAndAccessor(e,t,r,i){const o={location:-1,accessor:null},{location:f,name:d}=this._getAttributeIndex(e);if(!Number.isFinite(f)||f<0)return this.unused[e]=t,nt.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),o;const m=this._getAttributeInfo(d||f);if(!m)return o;const _=this.accessors[f]||{},E=Yr.resolve(m.accessor,_,r,i),{size:T,type:C}=E;return je(Number.isFinite(T)&&Number.isFinite(C)),{location:f,accessor:E}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const t=Number(e);if(Number.isFinite(t))return{location:t};const r=JC.exec(e),i=r?r[1]:e,o=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+o,name:i}:{location:-1}}_setAttribute(e,t){if(t instanceof nn)this.setBuffer(e,t);else if(Array.isArray(t)&&t.length&&t[0]instanceof nn){const r=t[0],i=t[1];this.setBuffer(e,r,i)}else if(ArrayBuffer.isView(t)||Array.isArray(t)){const r=t;this.setConstant(e,r)}else if(t.buffer instanceof nn){const r=t;this.setBuffer(e,r.buffer,r)}else throw new Error(KC)}_setConstantAttributes(e,t){const r=Math.max(e|0,t|0);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,r);for(let o=1;o<this.vertexArrayObject.MAX_ATTRIBUTES;o++)i=this.values[o],ArrayBuffer.isView(i)&&this._setConstantAttribute(o,i)}_setConstantAttributeZero(e,t){if(Hr.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,e);return}const r=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}_setConstantAttribute(e,t){Hr.setConstant(this.gl,e,t)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,t){const r=this.values[t],i=this.accessors[t];if(!r)return;const{divisor:o}=i,f=o>0;if(e.isInstanced=e.isInstanced||f,r instanceof nn){const d=r;if(f){const m=d.getVertexCount(i);e.instanceCount=Math.min(e.instanceCount,m)}else{const m=d.getVertexCount(i);e.vertexCount=Math.min(e.vertexCount,m)}}}setElements(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return nt.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,t)}}function n6(n,e){const{maxElts:t=16,size:r=1}=e;let i="[";for(let f=0;f<n.length&&f<t;++f)f>0&&(i+=",".concat(f%r===0?" ":"")),i+=bu(n[f],e);const o=n.length>t?"...":"]";return"".concat(i).concat(o)}function bu(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=1e-16,{isInteger:r=!1}=e;if(Array.isArray(n)||ArrayBuffer.isView(n))return n6(n,e);if(!Number.isFinite(n))return String(n);if(Math.abs(n)<t)return r?"0":"0.";if(r||Math.abs(n)>100&&Math.abs(n)<1e4)return n.toFixed(0);const i=n.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function k2(n){let{header:e="Uniforms",program:t,uniforms:r,undefinedOnly:i=!1}=n;je(t);const o=".*_.*",f=".*Matrix",d=t._uniformSetters,m={},_=Object.keys(d).sort();let E=0;for(const P of _)!P.match(o)&&!P.match(f)&&md({table:m,header:e,uniforms:r,uniformName:P,undefinedOnly:i})&&E++;for(const P of _)P.match(f)&&md({table:m,header:e,uniforms:r,uniformName:P,undefinedOnly:i})&&E++;for(const P of _)m[P]||md({table:m,header:e,uniforms:r,uniformName:P,undefinedOnly:i})&&E++;let T=0;const C={};if(!i)for(const P in r){const R=r[P];m[P]||(T++,C[P]={Type:"NOT USED: ".concat(R),[e]:bu(R)})}return{table:m,count:E,unusedTable:C,unusedCount:T}}function md(n){let{table:e,header:t,uniforms:r,uniformName:i,undefinedOnly:o}=n;const f=r[i],d=r6(f);return!o||!d?(e[i]={[t]:d?bu(f):"N/A","Uniform Type":d?f:"NOT PROVIDED"},!0):!1}function r6(n){return n!=null}function i6(n){let{vertexArray:e,header:t="Attributes"}=n;if(!e.configuration)return{};const r={};e.elements&&(r.ELEMENT_ARRAY_BUFFER=I2(e,e.elements,null,t));const i=e.values;for(const o in i){const f=e._getAttributeInfo(o);if(f){let d="".concat(o,": ").concat(f.name);const m=e.accessors[f.location];m&&(d="".concat(o,": ").concat(s6(f.name,m))),r[d]=I2(e,i[o],m,t)}}return r}function I2(n,e,t,r){const{gl:i}=n;if(!e)return{[r]:"null","Format ":"N/A"};let o="NOT PROVIDED",f=1,d=0,m=0,_,E,T;if(t&&(o=t.type,f=t.size,o=String(o).replace("Array",""),_=o.indexOf("nt")!==-1),e instanceof nn){const C=e,{data:P,changed:R}=C.getDebugData();E=R?"*":"",T=P,m=C.byteLength,d=m/P.BYTES_PER_ELEMENT/f;let U;if(t){const j=t.divisor>0;U="".concat(j?"I ":"P "," ").concat(d," (x").concat(f,"=").concat(m," bytes ").concat(xo(i,o),")")}else _=!0,U="".concat(m," bytes");return{[r]:"".concat(E).concat(bu(T,{size:f,isInteger:_})),"Format ":U}}return T=e,f=e.length,o=String(e.constructor.name).replace("Array",""),_=o.indexOf("nt")!==-1,{[r]:"".concat(bu(T,{size:f,isInteger:_})," (constant)"),"Format ":"".concat(f,"x").concat(o," (constant)")}}function s6(n,e){const{type:t,size:r}=e,i=J_(t,r);return i?"".concat(n," (").concat(i.name,")"):n}function o6(n){const e={},t="Accessors for ".concat(n.id);for(const r of n.attributeInfos)if(r){const i=R2(r);e["in ".concat(i)]={[t]:JSON.stringify(r.accessor)}}for(const r of n.varyingInfos)if(r){const i=R2(r);e["out ".concat(i)]={[t]:JSON.stringify(r.accessor)}}return e}function R2(n){const{type:e,size:t}=n.accessor,r=J_(e,t);return r?"".concat(r.name," ").concat(n.name):n.name}const O2=Bs()&&typeof document<"u";let a6=0;class A6{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{onCreateContext:t=j=>z_(j),onAddHTML:r=null,onInitialize:i=()=>{},onRender:o=()=>{},onFinalize:f=()=>{},onError:d,gl:m=null,glOptions:_={},debug:E=!1,createFramebuffer:T=!1,autoResizeViewport:C=!0,autoResizeDrawingBuffer:P=!0,stats:R=da.get("animation-loop-".concat(a6++))}=e;let{useDevicePixels:U=!0}=e;"useDevicePixelRatio"in e&&(nt.deprecated("useDevicePixelRatio","useDevicePixels")(),U=e.useDevicePixelRatio),this.props={onCreateContext:t,onAddHTML:r,onInitialize:i,onRender:o,onFinalize:f,onError:d,gl:m,glOptions:_,debug:E,createFramebuffer:T},this.gl=m,this.needsRedraw=null,this.timeline=null,this.stats=R,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:C,autoResizeDrawingBuffer:P,useDevicePixels:U}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return je(typeof e=="string"),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;const t=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=Df.isSupported(this.gl,["timers"])?new Df(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(r=>{this._running&&(this._addCallbackData(r||{}),r!==!1&&this._startLoop())});return this.props.onError&&t.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const r=document.getElementById(e);return r?Number(r.value):t}setViewParameters(){return nt.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=O2?new Promise((e,t)=>{if(O2&&document.readyState==="complete"){e(document);return}window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):dS(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):hS(e)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:t,aspect:r}=this._getSizeAndAspect();(e!==this.animationProps.width||t!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=t,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){typeof e=="object"&&e!==null&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?fp(this.props.gl,e):this.onCreateContext(e),!a0(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");eS(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);const r=this.props.onAddHTML(t);r&&(t.innerHTML=r)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight;let r=1;const{canvas:i}=this.gl;return i&&i.clientHeight?r=i.clientWidth/i.clientHeight:e>0&&t>0&&(r=e/t),{width:e,height:t,aspect:r}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&sS(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new Bn(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}const zu="vs",mp="fs";function Xr(n,e){if(!n)throw new Error(e||"shadertools: assertion failed.")}const vd={number:{validate(n,e){return Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)}},array:{validate(n,e){return Array.isArray(n)||ArrayBuffer.isView(n)}}};function l6(n){const e={};for(const t in n){const r=n[t],i=u6(r);e[t]=i}return e}function u6(n){let e=D2(n);return e==="object"?n?"type"in n?Object.assign({},n,vd[n.type]):"value"in n?(e=D2(n.value),Object.assign({type:e},n,vd[e])):{type:"object",value:n}:{type:"object",value:null}:Object.assign({type:e,value:n},vd[e])}function D2(n){return Array.isArray(n)||ArrayBuffer.isView(n)?"array":typeof n}const c6="vs",f6="fs";class F2{constructor(e){let{name:t,vs:r,fs:i,dependencies:o=[],uniforms:f,getUniforms:d,deprecations:m=[],defines:_={},inject:E={},vertexShader:T,fragmentShader:C}=e;Xr(typeof t=="string"),this.name=t,this.vs=r||T,this.fs=i||C,this.getModuleUniforms=d,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(m),this.defines=_,this.injections=h6(E),f&&(this.uniforms=l6(f))}getModuleSource(e){let t;switch(e){case c6:t=this.vs||"";break;case f6:t=this.fs||"";break;default:Xr(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(t,"// END MODULE_").concat(this.name,`

`)}getUniforms(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,t){this.deprecations.forEach(r=>{r.regex.test(e)&&(r.deprecated?t.deprecated(r.old,r.new)():t.removed(r.old,r.new)())})}_parseDeprecationDefinitions(e){return e.forEach(t=>{t.type==="function"?t.regex=new RegExp("\\b".concat(t.old,"\\(")):t.regex=new RegExp("".concat(t.type," ").concat(t.old,";"))}),e}_defaultGetUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t={},r=this.uniforms;for(const i in r){const o=r[i];i in e&&!o.private?(o.validate&&Xr(o.validate(e[i],o),"".concat(this.name,": invalid ").concat(i)),t[i]=e[i]):t[i]=o.value}return t}}function h6(n){const e={vs:{},fs:{}};for(const t in n){let r=n[t];const i=t.slice(0,2);typeof r=="string"&&(r={order:0,injection:r}),e[i][t]=r}return e}function d6(n){return g6(rw(n))}function g6(n){const e={},t={};return nw({modules:n,level:0,moduleMap:e,moduleDepth:t}),Object.keys(t).sort((r,i)=>t[i]-t[r]).map(r=>e[r])}function nw(n){let{modules:e,level:t,moduleMap:r,moduleDepth:i}=n;if(t>=5)throw new Error("Possible loop in shader dependency graph");for(const o of e)r[o.name]=o,(i[o.name]===void 0||i[o.name]<t)&&(i[o.name]=t);for(const o of e)o.dependencies&&nw({modules:o.dependencies,level:t+1,moduleMap:r,moduleDepth:i})}function rw(n,e){return n.map(t=>(t instanceof F2||(Xr(typeof t!="string","Shader module use by name is deprecated. Import shader module '".concat(t,"' and use it directly.")),Xr(t.name,"shader module has no name"),t=new F2(t),t.dependencies=rw(t.dependencies)),t))}function p6(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=typeof window<"u"?window.navigator||{}:{},t=n.userAgent||e.userAgent||"",r=t.indexOf("MSIE ")!==-1,i=t.indexOf("Trident/")!==-1;return r||i}const m6=7936,v6=7937,y6=7938,_6=35724,vp={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},fa={};Object.keys(vp).forEach(n=>{fa[n]=n});function w6(n){return typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext?!0:!!(n&&n._version===2)}function b6(n){const e=n.getExtension("WEBGL_debug_renderer_info"),t=n.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||m6),r=n.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||v6);return{gpuVendor:E6(t,r),vendor:t,renderer:r,version:n.getParameter(y6),shadingLanguageVersion:n.getParameter(_6)}}function E6(n,e){return n.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":n.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":n.match(/AMD/i)||e.match(/AMD/i)||n.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const yd={};function B2(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=vp[e];if(Xr(r,e),!p6(t))return!0;if(e in yd)return yd[e];const i=r[0],o=t.behavior||"enable",f="#extension GL_".concat(i," : ").concat(o,`
void main(void) {}`),d=n.createShader(35633);n.shaderSource(d,f),n.compileShader(d);const m=n.getShaderParameter(d,35713);return n.deleteShader(d),yd[e]=m,m}function T6(n,e){const t=vp[e];Xr(t,e);const r=w6(n)&&t[1]||t[0],i=typeof r=="string"?!!n.getExtension(r):r;return Xr(i===!1||i===!0),i}function tf(n,e){return e=Array.isArray(e)?e:[e],e.every(t=>T6(n,t))}function x6(n){switch(b6(n).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function S6(n,e,t){let r=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return tf(n,fa.GLSL_FRAG_DEPTH)&&(r+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),tf(n,fa.GLSL_DERIVATIVES)&&B2(n,fa.GLSL_DERIVATIVES)&&(r+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),tf(n,fa.GLSL_FRAG_DATA)&&B2(n,fa.GLSL_FRAG_DATA,{behavior:"require"})&&(r+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),tf(n,fa.GLSL_TEXTURE_LOD)&&(r+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),r}const C6=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,M6=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,L6={[zu]:C6,[mp]:M6},pf="__LUMA_INJECT_DECLARATIONS__",N2=/void\s+main\s*\([^)]*\)\s*\{\n?/,U2=/}\n?[^{}]*$/,_d=[];function z2(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=e===zu;for(const o in t){const f=t[o];f.sort((m,_)=>m.order-_.order),_d.length=f.length;for(let m=0,_=f.length;m<_;++m)_d[m]=f[m].injection;const d="".concat(_d.join(`
`),`
`);switch(o){case"vs:#decl":i&&(n=n.replace(pf,d));break;case"vs:#main-start":i&&(n=n.replace(N2,m=>m+d));break;case"vs:#main-end":i&&(n=n.replace(U2,m=>d+m));break;case"fs:#decl":i||(n=n.replace(pf,d));break;case"fs:#main-start":i||(n=n.replace(N2,m=>m+d));break;case"fs:#main-end":i||(n=n.replace(U2,m=>d+m));break;default:n=n.replace(o,m=>m+d)}}return n=n.replace(pf,""),r&&(n=n.replace(/\}\s*$/,o=>o+L6[e])),n}function vg(n){const e={};return Xr(Array.isArray(n)&&n.length>1),n.forEach(t=>{for(const r in t)e[r]=e[r]?"".concat(e[r],`
`).concat(t[r]):t[r]}),e}function HA(n){return new RegExp("\\b".concat(n,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const iw=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],P6=[...iw,[HA("attribute"),"in $1"],[HA("varying"),"out $1"]],k6=[...iw,[HA("varying"),"in $1"]],sw=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],I6=[...sw,[HA("in"),"attribute $1"],[HA("out"),"varying $1"]],R6=[...sw,[HA("in"),"varying $1"]],yg="gl_FragColor",_g=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,O6=/void\s+main\s*\([^)]*\)\s*\{\n?/;function D6(n,e,t){switch(e){case 300:return t?Ff(n,P6):F6(n);case 100:return t?Ff(n,I6):B6(n);default:throw new Error("unknown GLSL version ".concat(e))}}function Ff(n,e){for(const[t,r]of e)n=n.replace(t,r);return n}function F6(n){n=Ff(n,k6);const e=n.match(_g);if(e){const t=e[1];n=n.replace(new RegExp("\\b".concat(yg,"\\b"),"g"),t)}else{const t="fragmentColor";n=n.replace(O6,r=>"out vec4 ".concat(t,`;
`).concat(r)).replace(new RegExp("\\b".concat(yg,"\\b"),"g"),t)}return n}function B6(n){n=Ff(n,R6);const e=n.match(_g);if(e){const t=e[1];n=n.replace(_g,"").replace(new RegExp("\\b".concat(t,"\\b"),"g"),yg)}return n}const N6=`

`.concat(pf,`

`),ow={[zu]:"vertex",[mp]:"fragment"},U6=`precision highp float;

`;function z6(n,e){const{vs:t,fs:r}=e,i=d6(e.modules||[]);return{gl:n,vs:V2(n,Object.assign({},e,{source:t,type:zu,modules:i})),fs:V2(n,Object.assign({},e,{source:r,type:mp,modules:i})),getUniforms:V6(i)}}function V2(n,e){let{id:t,source:r,type:i,modules:o,defines:f={},hookFunctions:d=[],inject:m={},transpileToGLSL100:_=!1,prologue:E=!0,log:T}=e;Xr(typeof r=="string","shader source must be a string");const C=i===zu,P=r.split(`
`);let R=100,U="",j=r;P[0].indexOf("#version ")===0?(R=300,U=P[0],j=P.slice(1).join(`
`)):U="#version ".concat(R);const G={};o.forEach(pe=>{Object.assign(G,pe.getDefines())}),Object.assign(G,f);let Q=E?"".concat(U,`
`).concat(G6({id:t,source:r,type:i}),`
`).concat(j6({type:i}),`
`).concat(x6(n),`
`).concat(S6(n),`
`).concat(H6(G),`
`).concat(C?"":U6,`
`):"".concat(U,`
`);const X=Q6(d),q={},ee={},ie={};for(const pe in m){const ue=typeof m[pe]=="string"?{injection:m[pe],order:0}:m[pe],me=pe.match(/^(v|f)s:(#)?([\w-]+)$/);if(me){const Ce=me[2],ge=me[3];Ce?ge==="decl"?ee[pe]=[ue]:ie[pe]=[ue]:q[pe]=[ue]}else ie[pe]=[ue]}for(const pe of o){T&&pe.checkDeprecations(j,T);const ue=pe.getModuleSource(i,R);Q+=ue;const me=pe.injections[i];for(const Ce in me){const ge=Ce.match(/^(v|f)s:#([\w-]+)$/);if(ge){const Me=ge[2]==="decl"?ee:ie;Me[Ce]=Me[Ce]||[],Me[Ce].push(me[Ce])}else q[Ce]=q[Ce]||[],q[Ce].push(me[Ce])}}return Q+=N6,Q=z2(Q,i,ee),Q+=W6(X[i],q),Q+=j,Q=z2(Q,i,ie),Q=D6(Q,_?100:R,C),Q}function V6(n){return function(t){const r={};for(const i of n){const o=i.getUniforms(t,r);Object.assign(r,o)}return r}}function j6(n){let{type:e}=n;return`
#define SHADER_TYPE_`.concat(ow[e].toUpperCase(),`
`)}function G6(n){let{id:e,source:t,type:r}=n;return e&&typeof e=="string"&&t.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(e,"_").concat(ow[r],`

`):""}function H6(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=0,t="";for(const r in n){e===0&&(t+=`
// APPLICATION DEFINES
`),e++;const i=n[r];(i||Number.isFinite(i))&&(t+="#define ".concat(r.toUpperCase()," ").concat(n[r],`
`))}return e===0&&(t+=`
`),t}function W6(n,e){let t="";for(const r in n){const i=n[r];if(t+="void ".concat(i.signature,` {
`),i.header&&(t+="  ".concat(i.header)),e[r]){const o=e[r];o.sort((f,d)=>f.order-d.order);for(const f of o)t+="  ".concat(f.injection,`
`)}i.footer&&(t+="  ".concat(i.footer)),t+=`}
`}return t}function Q6(n){const e={vs:{},fs:{}};return n.forEach(t=>{let r;typeof t!="string"?(r=t,t=r.hook):r={},t=t.trim();const[i,o]=t.split(":"),f=t.replace(/\(.+/,"");e[i][f]=Object.assign(r,{signature:o})}),e}const Y6="void main() {gl_FragColor = vec4(0);}",aw=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,$6=`#version 300 es
`.concat(aw);function Aw(n,e){e=Array.isArray(e)?e:[e];const t=n.replace(/^\s+/,"").split(/\s+/),[r,i,o]=t;if(!e.includes(r)||!i||!o)return null;const f=o.split(";")[0];return{qualifier:r,type:i,name:f}}function lw(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{version:e=100,input:t,inputType:r,output:i}=n;if(!t)return e===300?$6:e>300?"#version ".concat(e,`
`).concat(aw):Y6;const o=q6(t,r);return e>=300?"#version ".concat(e," ").concat(e===300?"es":"",`
in `).concat(r," ").concat(t,`;
out vec4 `).concat(i,`;
void main() {
  `).concat(i," = ").concat(o,`;
}`):"varying ".concat(r," ").concat(t,`;
void main() {
  gl_FragColor = `).concat(o,`;
}`)}function X6(n){switch(n){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Xr(!1),null}}function Z6(n){switch(n){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Xr(!1),null}}function q6(n,e){switch(e){case"float":return"vec4(".concat(n,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(n,", 0.0, 1.0)");case"vec3":return"vec4(".concat(n,", 1.0)");case"vec4":return n;default:return Xr(!1),null}}const K6=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,J6={name:"fp32",vs:K6,fs:null};function j2(n,e){if(!n)throw new Error("math.gl assertion ".concat(e))}const di={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function e5(n,{precision:e=di.precision}={}){return n=t5(n),"".concat(parseFloat(n.toPrecision(e)))}function WA(n){return Array.isArray(n)||ArrayBuffer.isView(n)&&!(n instanceof DataView)}function bo(n,e,t){return r5(n,r=>Math.max(e,Math.min(t,r)))}function Bf(n,e,t){return WA(n)?n.map((r,i)=>Bf(r,e[i],t)):t*e+(1-t)*n}function Eu(n,e,t){const r=di.EPSILON;try{if(n===e)return!0;if(WA(n)&&WA(e)){if(n.length!==e.length)return!1;for(let i=0;i<n.length;++i)if(!Eu(n[i],e[i]))return!1;return!0}return n&&n.equals?n.equals(e):e&&e.equals?e.equals(n):typeof n=="number"&&typeof e=="number"?Math.abs(n-e)<=di.EPSILON*Math.max(1,Math.abs(n),Math.abs(e)):!1}finally{di.EPSILON=r}}function t5(n){return Math.round(n/di.EPSILON)*di.EPSILON}function n5(n){return n.clone?n.clone():new Array(n.length)}function r5(n,e,t){if(WA(n)){const r=n;t=t||n5(r);for(let i=0;i<t.length&&i<r.length;++i)t[i]=e(n[i],i,t);return t}return e(n)}function i5(n){function e(){var t=Reflect.construct(n,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return e.prototype=Object.create(n.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n,e}class uw extends i5(Array){clone(){return new this.constructor().copy(this)}fromArray(e,t=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=e[r+t];return this.check()}toArray(e=[],t=0){for(let r=0;r<this.ELEMENTS;++r)e[t+r]=this[r];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:WA(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(di)}formatString(e){let t="";for(let r=0;r<this.ELEMENTS;++r)t+=(r>0?", ":"")+e5(this[r],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!Eu(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,r){if(r===void 0)return this.lerp(this,e,t);for(let i=0;i<this.ELEMENTS;++i){const o=e[i];this[i]=o+r*(t[i]-o)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),t[r]);return this.check()}add(...e){for(const t of e)for(let r=0;r<this.ELEMENTS;++r)this[r]+=t[r];return this.check()}subtract(...e){for(const t of e)for(let r=0;r<this.ELEMENTS;++r)this[r]-=t[r];return this.check()}scale(e){if(typeof e=="number")for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;else for(let t=0;t<this.ELEMENTS&&t<e.length;++t)this[t]*=e[t];return this.check()}multiplyByScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}check(){if(di.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),t);return this.check()}get elements(){return this}}function s5(n,e){if(n.length!==e)return!1;for(let t=0;t<n.length;++t)if(!Number.isFinite(n[t]))return!1;return!0}function Qr(n){if(!Number.isFinite(n))throw new Error("Invalid number ".concat(n));return n}function wd(n,e,t=""){if(di.debug&&!s5(n,e))throw new Error("math.gl: ".concat(t," some fields set to invalid numbers'"));return n}class o5 extends uw{get x(){return this[0]}set x(e){this[0]=Qr(e)}get y(){return this[1]}set y(e){this[1]=Qr(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let r=0;r<this.ELEMENTS;++r){const i=this[r]-e[r];t+=i*i}return Qr(t)}dot(e){let t=0;for(let r=0;r<this.ELEMENTS;++r)t+=this[r]*e[r];return Qr(t)}normalize(){const e=this.magnitude();if(e!==0)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(...e){for(const t of e)for(let r=0;r<this.ELEMENTS;++r)this[r]*=t[r];return this.check()}divide(...e){for(const t of e)for(let r=0;r<this.ELEMENTS;++r)this[r]/=t[r];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return j2(e>=0&&e<this.ELEMENTS,"index is out of range"),Qr(this[e])}setComponent(e,t){return j2(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}var Cn=1e-6,QA=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});function a5(){var n=new QA(2);return QA!=Float32Array&&(n[0]=0,n[1]=0),n}function Nf(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function cw(n,e){return n[0]=-e[0],n[1]=-e[1],n}function fw(n,e,t,r){var i=e[0],o=e[1];return n[0]=i+r*(t[0]-i),n[1]=o+r*(t[1]-o),n}function A5(n,e,t){var r=e[0],i=e[1];return n[0]=t[0]*r+t[4]*i+t[12],n[1]=t[1]*r+t[5]*i+t[13],n}(function(){var n=a5();return function(e,t,r,i,o,f){var d,m;for(t||(t=2),r||(r=0),i?m=Math.min(i*t+r,e.length):m=e.length,d=r;d<m;d+=t)n[0]=e[d],n[1]=e[d+1],o(n,n,f),e[d]=n[0],e[d+1]=n[1];return e}})();function l5(n,e,t){const r=e[0],i=e[1],o=t[3]*r+t[7]*i||1;return n[0]=(t[0]*r+t[4]*i)/o,n[1]=(t[1]*r+t[5]*i)/o,n}function hw(n,e,t){const r=e[0],i=e[1],o=e[2],f=t[3]*r+t[7]*i+t[11]*o||1;return n[0]=(t[0]*r+t[4]*i+t[8]*o)/f,n[1]=(t[1]*r+t[5]*i+t[9]*o)/f,n[2]=(t[2]*r+t[6]*i+t[10]*o)/f,n}function u5(n,e,t){const r=e[0],i=e[1];return n[0]=t[0]*r+t[2]*i,n[1]=t[1]*r+t[3]*i,n[2]=e[2],n}function c5(){var n=new QA(3);return QA!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function f5(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n}function h5(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}function d5(n,e,t){return n[0]=e[0]*t[0],n[1]=e[1]*t[1],n[2]=e[2]*t[2],n}function g5(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n}function p5(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function m5(n,e,t){var r=e[0],i=e[1],o=e[2],f=t[0],d=t[1],m=t[2];return n[0]=i*m-o*d,n[1]=o*f-r*m,n[2]=r*d-i*f,n}function dw(n,e,t){var r=e[0],i=e[1],o=e[2],f=t[3]*r+t[7]*i+t[11]*o+t[15];return f=f||1,n[0]=(t[0]*r+t[4]*i+t[8]*o+t[12])/f,n[1]=(t[1]*r+t[5]*i+t[9]*o+t[13])/f,n[2]=(t[2]*r+t[6]*i+t[10]*o+t[14])/f,n}function v5(n,e,t){var r=e[0],i=e[1],o=e[2];return n[0]=r*t[0]+i*t[3]+o*t[6],n[1]=r*t[1]+i*t[4]+o*t[7],n[2]=r*t[2]+i*t[5]+o*t[8],n}function y5(n,e,t){var r=t[0],i=t[1],o=t[2],f=t[3],d=e[0],m=e[1],_=e[2],E=i*_-o*m,T=o*d-r*_,C=r*m-i*d,P=i*C-o*T,R=o*E-r*C,U=r*T-i*E,j=f*2;return E*=j,T*=j,C*=j,P*=2,R*=2,U*=2,n[0]=d+E+P,n[1]=m+T+R,n[2]=_+C+U,n}function _5(n,e,t,r){var i=[],o=[];return i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),n[0]=o[0]+t[0],n[1]=o[1]+t[1],n[2]=o[2]+t[2],n}function w5(n,e,t,r){var i=[],o=[];return i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),n[0]=o[0]+t[0],n[1]=o[1]+t[1],n[2]=o[2]+t[2],n}function b5(n,e,t,r){var i=[],o=[];return i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],n[0]=o[0]+t[0],n[1]=o[1]+t[1],n[2]=o[2]+t[2],n}function E5(n,e){var t=n[0],r=n[1],i=n[2],o=e[0],f=e[1],d=e[2],m=Math.sqrt(t*t+r*r+i*i),_=Math.sqrt(o*o+f*f+d*d),E=m*_,T=E&&p5(n,e)/E;return Math.acos(Math.min(Math.max(T,-1),1))}var T5=h5,x5=d5;(function(){var n=c5();return function(e,t,r,i,o,f){var d,m;for(t||(t=3),r||(r=0),i?m=Math.min(i*t+r,e.length):m=e.length,d=r;d<m;d+=t)n[0]=e[d],n[1]=e[d+1],n[2]=e[d+2],o(n,n,f),e[d]=n[0],e[d+1]=n[1],e[d+2]=n[2];return e}})();const bd=[0,0,0];let nf;class as extends o5{static get ZERO(){return nf||(nf=new as(0,0,0),Object.freeze(nf)),nf}constructor(e=0,t=0,r=0){super(-0,-0,-0),arguments.length===1&&WA(e)?this.copy(e):(di.debug&&(Qr(e),Qr(t),Qr(r)),this[0]=e,this[1]=t,this[2]=r)}set(e,t,r){return this[0]=e,this[1]=t,this[2]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return di.debug&&(Qr(e.x),Qr(e.y),Qr(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=Qr(e)}angle(e){return E5(this,e)}cross(e){return m5(this,this,e),this.check()}rotateX({radians:e,origin:t=bd}){return _5(this,this,t,e),this.check()}rotateY({radians:e,origin:t=bd}){return w5(this,this,t,e),this.check()}rotateZ({radians:e,origin:t=bd}){return b5(this,this,t,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return dw(this,this,e),this.check()}transformAsVector(e){return hw(this,this,e),this.check()}transformByMatrix3(e){return v5(this,this,e),this.check()}transformByMatrix2(e){return u5(this,this,e),this.check()}transformByQuaternion(e){return y5(this,this,e),this.check()}}class S5 extends uw{toString(){let e="[";if(di.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let r=0;r<this.RANK;++r)e+=" ".concat(this[r*this.RANK+t])}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=" ".concat(this[t])}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,r){return this[t*this.RANK+e]=Qr(r),this}getColumn(e,t=new Array(this.RANK).fill(-0)){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)t[i]=this[r+i];return t}setColumn(e,t){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)this[r+i]=t[i];return this}}function C5(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function M5(n,e){if(n===e){var t=e[1],r=e[2],i=e[3],o=e[6],f=e[7],d=e[11];n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=t,n[6]=e[9],n[7]=e[13],n[8]=r,n[9]=o,n[11]=e[14],n[12]=i,n[13]=f,n[14]=d}else n[0]=e[0],n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=e[1],n[5]=e[5],n[6]=e[9],n[7]=e[13],n[8]=e[2],n[9]=e[6],n[10]=e[10],n[11]=e[14],n[12]=e[3],n[13]=e[7],n[14]=e[11],n[15]=e[15];return n}function Uf(n,e){var t=e[0],r=e[1],i=e[2],o=e[3],f=e[4],d=e[5],m=e[6],_=e[7],E=e[8],T=e[9],C=e[10],P=e[11],R=e[12],U=e[13],j=e[14],G=e[15],Q=t*d-r*f,X=t*m-i*f,q=t*_-o*f,ee=r*m-i*d,ie=r*_-o*d,pe=i*_-o*m,ue=E*U-T*R,me=E*j-C*R,Ce=E*G-P*R,ge=T*j-C*U,ke=T*G-P*U,Me=C*G-P*j,ze=Q*Me-X*ke+q*ge+ee*Ce-ie*me+pe*ue;return ze?(ze=1/ze,n[0]=(d*Me-m*ke+_*ge)*ze,n[1]=(i*ke-r*Me-o*ge)*ze,n[2]=(U*pe-j*ie+G*ee)*ze,n[3]=(C*ie-T*pe-P*ee)*ze,n[4]=(m*Ce-f*Me-_*me)*ze,n[5]=(t*Me-i*Ce+o*me)*ze,n[6]=(j*q-R*pe-G*X)*ze,n[7]=(E*pe-C*q+P*X)*ze,n[8]=(f*ke-d*Ce+_*ue)*ze,n[9]=(r*Ce-t*ke-o*ue)*ze,n[10]=(R*ie-U*q+G*Q)*ze,n[11]=(T*q-E*ie-P*Q)*ze,n[12]=(d*me-f*ge-m*ue)*ze,n[13]=(t*ge-r*me+i*ue)*ze,n[14]=(U*X-R*ee-j*Q)*ze,n[15]=(E*ee-T*X+C*Q)*ze,n):null}function L5(n){var e=n[0],t=n[1],r=n[2],i=n[3],o=n[4],f=n[5],d=n[6],m=n[7],_=n[8],E=n[9],T=n[10],C=n[11],P=n[12],R=n[13],U=n[14],j=n[15],G=e*f-t*o,Q=e*d-r*o,X=e*m-i*o,q=t*d-r*f,ee=t*m-i*f,ie=r*m-i*d,pe=_*R-E*P,ue=_*U-T*P,me=_*j-C*P,Ce=E*U-T*R,ge=E*j-C*R,ke=T*j-C*U;return G*ke-Q*ge+X*Ce+q*me-ee*ue+ie*pe}function ns(n,e,t){var r=e[0],i=e[1],o=e[2],f=e[3],d=e[4],m=e[5],_=e[6],E=e[7],T=e[8],C=e[9],P=e[10],R=e[11],U=e[12],j=e[13],G=e[14],Q=e[15],X=t[0],q=t[1],ee=t[2],ie=t[3];return n[0]=X*r+q*d+ee*T+ie*U,n[1]=X*i+q*m+ee*C+ie*j,n[2]=X*o+q*_+ee*P+ie*G,n[3]=X*f+q*E+ee*R+ie*Q,X=t[4],q=t[5],ee=t[6],ie=t[7],n[4]=X*r+q*d+ee*T+ie*U,n[5]=X*i+q*m+ee*C+ie*j,n[6]=X*o+q*_+ee*P+ie*G,n[7]=X*f+q*E+ee*R+ie*Q,X=t[8],q=t[9],ee=t[10],ie=t[11],n[8]=X*r+q*d+ee*T+ie*U,n[9]=X*i+q*m+ee*C+ie*j,n[10]=X*o+q*_+ee*P+ie*G,n[11]=X*f+q*E+ee*R+ie*Q,X=t[12],q=t[13],ee=t[14],ie=t[15],n[12]=X*r+q*d+ee*T+ie*U,n[13]=X*i+q*m+ee*C+ie*j,n[14]=X*o+q*_+ee*P+ie*G,n[15]=X*f+q*E+ee*R+ie*Q,n}function Tu(n,e,t){var r=t[0],i=t[1],o=t[2],f,d,m,_,E,T,C,P,R,U,j,G;return e===n?(n[12]=e[0]*r+e[4]*i+e[8]*o+e[12],n[13]=e[1]*r+e[5]*i+e[9]*o+e[13],n[14]=e[2]*r+e[6]*i+e[10]*o+e[14],n[15]=e[3]*r+e[7]*i+e[11]*o+e[15]):(f=e[0],d=e[1],m=e[2],_=e[3],E=e[4],T=e[5],C=e[6],P=e[7],R=e[8],U=e[9],j=e[10],G=e[11],n[0]=f,n[1]=d,n[2]=m,n[3]=_,n[4]=E,n[5]=T,n[6]=C,n[7]=P,n[8]=R,n[9]=U,n[10]=j,n[11]=G,n[12]=f*r+E*i+R*o+e[12],n[13]=d*r+T*i+U*o+e[13],n[14]=m*r+C*i+j*o+e[14],n[15]=_*r+P*i+G*o+e[15]),n}function u0(n,e,t){var r=t[0],i=t[1],o=t[2];return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n[3]=e[3]*r,n[4]=e[4]*i,n[5]=e[5]*i,n[6]=e[6]*i,n[7]=e[7]*i,n[8]=e[8]*o,n[9]=e[9]*o,n[10]=e[10]*o,n[11]=e[11]*o,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function P5(n,e,t,r){var i=r[0],o=r[1],f=r[2],d=Math.hypot(i,o,f),m,_,E,T,C,P,R,U,j,G,Q,X,q,ee,ie,pe,ue,me,Ce,ge,ke,Me,ze,We;return d<Cn?null:(d=1/d,i*=d,o*=d,f*=d,m=Math.sin(t),_=Math.cos(t),E=1-_,T=e[0],C=e[1],P=e[2],R=e[3],U=e[4],j=e[5],G=e[6],Q=e[7],X=e[8],q=e[9],ee=e[10],ie=e[11],pe=i*i*E+_,ue=o*i*E+f*m,me=f*i*E-o*m,Ce=i*o*E-f*m,ge=o*o*E+_,ke=f*o*E+i*m,Me=i*f*E+o*m,ze=o*f*E-i*m,We=f*f*E+_,n[0]=T*pe+U*ue+X*me,n[1]=C*pe+j*ue+q*me,n[2]=P*pe+G*ue+ee*me,n[3]=R*pe+Q*ue+ie*me,n[4]=T*Ce+U*ge+X*ke,n[5]=C*Ce+j*ge+q*ke,n[6]=P*Ce+G*ge+ee*ke,n[7]=R*Ce+Q*ge+ie*ke,n[8]=T*Me+U*ze+X*We,n[9]=C*Me+j*ze+q*We,n[10]=P*Me+G*ze+ee*We,n[11]=R*Me+Q*ze+ie*We,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n)}function gw(n,e,t){var r=Math.sin(t),i=Math.cos(t),o=e[4],f=e[5],d=e[6],m=e[7],_=e[8],E=e[9],T=e[10],C=e[11];return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[4]=o*i+_*r,n[5]=f*i+E*r,n[6]=d*i+T*r,n[7]=m*i+C*r,n[8]=_*i-o*r,n[9]=E*i-f*r,n[10]=T*i-d*r,n[11]=C*i-m*r,n}function k5(n,e,t){var r=Math.sin(t),i=Math.cos(t),o=e[0],f=e[1],d=e[2],m=e[3],_=e[8],E=e[9],T=e[10],C=e[11];return e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=o*i-_*r,n[1]=f*i-E*r,n[2]=d*i-T*r,n[3]=m*i-C*r,n[8]=o*r+_*i,n[9]=f*r+E*i,n[10]=d*r+T*i,n[11]=m*r+C*i,n}function pw(n,e,t){var r=Math.sin(t),i=Math.cos(t),o=e[0],f=e[1],d=e[2],m=e[3],_=e[4],E=e[5],T=e[6],C=e[7];return e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=o*i+_*r,n[1]=f*i+E*r,n[2]=d*i+T*r,n[3]=m*i+C*r,n[4]=_*i-o*r,n[5]=E*i-f*r,n[6]=T*i-d*r,n[7]=C*i-m*r,n}function I5(n,e){var t=e[0],r=e[1],i=e[2],o=e[3],f=t+t,d=r+r,m=i+i,_=t*f,E=r*f,T=r*d,C=i*f,P=i*d,R=i*m,U=o*f,j=o*d,G=o*m;return n[0]=1-T-R,n[1]=E+G,n[2]=C-j,n[3]=0,n[4]=E-G,n[5]=1-_-R,n[6]=P+U,n[7]=0,n[8]=C+j,n[9]=P-U,n[10]=1-_-T,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function R5(n,e,t,r,i,o,f){var d=1/(t-e),m=1/(i-r),_=1/(o-f);return n[0]=o*2*d,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=o*2*m,n[6]=0,n[7]=0,n[8]=(t+e)*d,n[9]=(i+r)*m,n[10]=(f+o)*_,n[11]=-1,n[12]=0,n[13]=0,n[14]=f*o*2*_,n[15]=0,n}function O5(n,e,t,r,i){var o=1/Math.tan(e/2),f;return n[0]=o/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=o,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,i!=null&&i!==1/0?(f=1/(r-i),n[10]=(i+r)*f,n[14]=2*i*r*f):(n[10]=-1,n[14]=-2*r),n}var mw=O5;function D5(n,e,t,r,i,o,f){var d=1/(e-t),m=1/(r-i),_=1/(o-f);return n[0]=-2*d,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*m,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*_,n[11]=0,n[12]=(e+t)*d,n[13]=(i+r)*m,n[14]=(f+o)*_,n[15]=1,n}var F5=D5;function B5(n,e,t,r){var i,o,f,d,m,_,E,T,C,P,R=e[0],U=e[1],j=e[2],G=r[0],Q=r[1],X=r[2],q=t[0],ee=t[1],ie=t[2];return Math.abs(R-q)<Cn&&Math.abs(U-ee)<Cn&&Math.abs(j-ie)<Cn?C5(n):(E=R-q,T=U-ee,C=j-ie,P=1/Math.hypot(E,T,C),E*=P,T*=P,C*=P,i=Q*C-X*T,o=X*E-G*C,f=G*T-Q*E,P=Math.hypot(i,o,f),P?(P=1/P,i*=P,o*=P,f*=P):(i=0,o=0,f=0),d=T*f-C*o,m=C*i-E*f,_=E*o-T*i,P=Math.hypot(d,m,_),P?(P=1/P,d*=P,m*=P,_*=P):(d=0,m=0,_=0),n[0]=i,n[1]=d,n[2]=E,n[3]=0,n[4]=o,n[5]=m,n[6]=T,n[7]=0,n[8]=f,n[9]=_,n[10]=C,n[11]=0,n[12]=-(i*R+o*U+f*j),n[13]=-(d*R+m*U+_*j),n[14]=-(E*R+T*U+C*j),n[15]=1,n)}function G2(n,e){var t=n[0],r=n[1],i=n[2],o=n[3],f=n[4],d=n[5],m=n[6],_=n[7],E=n[8],T=n[9],C=n[10],P=n[11],R=n[12],U=n[13],j=n[14],G=n[15],Q=e[0],X=e[1],q=e[2],ee=e[3],ie=e[4],pe=e[5],ue=e[6],me=e[7],Ce=e[8],ge=e[9],ke=e[10],Me=e[11],ze=e[12],We=e[13],tt=e[14],_t=e[15];return Math.abs(t-Q)<=Cn*Math.max(1,Math.abs(t),Math.abs(Q))&&Math.abs(r-X)<=Cn*Math.max(1,Math.abs(r),Math.abs(X))&&Math.abs(i-q)<=Cn*Math.max(1,Math.abs(i),Math.abs(q))&&Math.abs(o-ee)<=Cn*Math.max(1,Math.abs(o),Math.abs(ee))&&Math.abs(f-ie)<=Cn*Math.max(1,Math.abs(f),Math.abs(ie))&&Math.abs(d-pe)<=Cn*Math.max(1,Math.abs(d),Math.abs(pe))&&Math.abs(m-ue)<=Cn*Math.max(1,Math.abs(m),Math.abs(ue))&&Math.abs(_-me)<=Cn*Math.max(1,Math.abs(_),Math.abs(me))&&Math.abs(E-Ce)<=Cn*Math.max(1,Math.abs(E),Math.abs(Ce))&&Math.abs(T-ge)<=Cn*Math.max(1,Math.abs(T),Math.abs(ge))&&Math.abs(C-ke)<=Cn*Math.max(1,Math.abs(C),Math.abs(ke))&&Math.abs(P-Me)<=Cn*Math.max(1,Math.abs(P),Math.abs(Me))&&Math.abs(R-ze)<=Cn*Math.max(1,Math.abs(R),Math.abs(ze))&&Math.abs(U-We)<=Cn*Math.max(1,Math.abs(U),Math.abs(We))&&Math.abs(j-tt)<=Cn*Math.max(1,Math.abs(j),Math.abs(tt))&&Math.abs(G-_t)<=Cn*Math.max(1,Math.abs(G),Math.abs(_t))}function N5(){var n=new QA(4);return QA!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0),n}function U5(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n}function Vu(n,e,t){var r=e[0],i=e[1],o=e[2],f=e[3];return n[0]=t[0]*r+t[4]*i+t[8]*o+t[12]*f,n[1]=t[1]*r+t[5]*i+t[9]*o+t[13]*f,n[2]=t[2]*r+t[6]*i+t[10]*o+t[14]*f,n[3]=t[3]*r+t[7]*i+t[11]*o+t[15]*f,n}(function(){var n=N5();return function(e,t,r,i,o,f){var d,m;for(t||(t=4),r||(r=0),i?m=Math.min(i*t+r,e.length):m=e.length,d=r;d<m;d+=t)n[0]=e[d],n[1]=e[d+1],n[2]=e[d+2],n[3]=e[d+3],o(n,n,f),e[d]=n[0],e[d+1]=n[1],e[d+2]=n[2],e[d+3]=n[3];return e}})();var wg;(function(n){n[n.COL0ROW0=0]="COL0ROW0",n[n.COL0ROW1=1]="COL0ROW1",n[n.COL0ROW2=2]="COL0ROW2",n[n.COL0ROW3=3]="COL0ROW3",n[n.COL1ROW0=4]="COL1ROW0",n[n.COL1ROW1=5]="COL1ROW1",n[n.COL1ROW2=6]="COL1ROW2",n[n.COL1ROW3=7]="COL1ROW3",n[n.COL2ROW0=8]="COL2ROW0",n[n.COL2ROW1=9]="COL2ROW1",n[n.COL2ROW2=10]="COL2ROW2",n[n.COL2ROW3=11]="COL2ROW3",n[n.COL3ROW0=12]="COL3ROW0",n[n.COL3ROW1=13]="COL3ROW1",n[n.COL3ROW2=14]="COL3ROW2",n[n.COL3ROW3=15]="COL3ROW3"})(wg||(wg={}));const z5=45*Math.PI/180,V5=1,Ed=.1,Td=500,j5=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class As extends S5{static get IDENTITY(){return H5()}static get ZERO(){return G5()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return wg}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,t,r,i,o,f,d,m,_,E,T,C,P,R,U,j){return this[0]=e,this[1]=t,this[2]=r,this[3]=i,this[4]=o,this[5]=f,this[6]=d,this[7]=m,this[8]=_,this[9]=E,this[10]=T,this[11]=C,this[12]=P,this[13]=R,this[14]=U,this[15]=j,this.check()}setRowMajor(e,t,r,i,o,f,d,m,_,E,T,C,P,R,U,j){return this[0]=e,this[1]=o,this[2]=_,this[3]=P,this[4]=t,this[5]=f,this[6]=E,this[7]=R,this[8]=r,this[9]=d,this[10]=T,this[11]=U,this[12]=i,this[13]=m,this[14]=C,this[15]=j,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(j5)}fromObject(e){return this.check()}fromQuaternion(e){return I5(this,e),this.check()}frustum(e){const{left:t,right:r,bottom:i,top:o,near:f=Ed,far:d=Td}=e;return d===1/0?W5(this,t,r,i,o,f):R5(this,t,r,i,o,f,d),this.check()}lookAt(e){const{eye:t,center:r=[0,0,0],up:i=[0,1,0]}=e;return B5(this,t,r,i),this.check()}ortho(e){const{left:t,right:r,bottom:i,top:o,near:f=Ed,far:d=Td}=e;return F5(this,t,r,i,o,f,d),this.check()}orthographic(e){const{fovy:t=z5,aspect:r=V5,focalDistance:i=1,near:o=Ed,far:f=Td}=e;H2(t);const d=t/2,m=i*Math.tan(d),_=m*r;return this.ortho({left:-_,right:_,bottom:-m,top:m,near:o,far:f})}perspective(e){const{fovy:t=45*Math.PI/180,aspect:r=1,near:i=.1,far:o=500}=e;return H2(t),mw(this,t,r,i,o),this.check()}determinant(){return L5(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],t=t||[-0,-0,-0];const r=this.getScale(t),i=1/r[0],o=1/r[1],f=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*o,e[2]=this[2]*f,e[3]=0,e[4]=this[4]*i,e[5]=this[5]*o,e[6]=this[6]*f,e[7]=0,e[8]=this[8]*i,e[9]=this[9]*o,e[10]=this[10]*f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],t=t||[-0,-0,-0];const r=this.getScale(t),i=1/r[0],o=1/r[1],f=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*o,e[2]=this[2]*f,e[3]=this[4]*i,e[4]=this[5]*o,e[5]=this[6]*f,e[6]=this[8]*i,e[7]=this[9]*o,e[8]=this[10]*f,e}transpose(){return M5(this,this),this.check()}invert(){return Uf(this,this),this.check()}multiplyLeft(e){return ns(this,e,this),this.check()}multiplyRight(e){return ns(this,this,e),this.check()}rotateX(e){return gw(this,this,e),this.check()}rotateY(e){return k5(this,this,e),this.check()}rotateZ(e){return pw(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,t){return P5(this,this,e,t),this.check()}scale(e){return u0(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return Tu(this,this,e),this.check()}transform(e,t){return e.length===4?(t=Vu(t||[-0,-0,-0,-0],e,this),wd(t,4),t):this.transformAsPoint(e,t)}transformAsPoint(e,t){const{length:r}=e;let i;switch(r){case 2:i=A5(t||[-0,-0],e,this);break;case 3:i=dw(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return wd(i,e.length),i}transformAsVector(e,t){let r;switch(e.length){case 2:r=l5(t||[-0,-0],e,this);break;case 3:r=hw(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return wd(r,e.length),r}transformPoint(e,t){return this.transformAsPoint(e,t)}transformVector(e,t){return this.transformAsPoint(e,t)}transformDirection(e,t){return this.transformAsVector(e,t)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,t,r){return this.identity().translate([e,t,r])}}let rf,sf;function G5(){return rf||(rf=new As([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(rf)),rf}function H5(){return sf||(sf=new As,Object.freeze(sf)),sf}function H2(n){if(n>Math.PI*2)throw Error("expected radians")}function W5(n,e,t,r,i,o){const f=2*o/(t-e),d=2*o/(i-r),m=(t+e)/(t-e),_=(i+r)/(i-r),E=-1,T=-1,C=-2*o;return n[0]=f,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=d,n[6]=0,n[7]=0,n[8]=m,n[9]=_,n[10]=E,n[11]=T,n[12]=0,n[13]=0,n[14]=C,n[15]=0,n}const Q5=new Uint8Array([0,255,255,255]),Y5={pickingSelectedColor:null,pickingHighlightColor:Q5,pickingActive:!1,pickingAttribute:!1};function $5(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Y5;const e={};if(n.pickingSelectedColor!==void 0)if(!n.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{const t=n.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=t}if(n.pickingHighlightColor){const t=Array.from(n.pickingHighlightColor,r=>r/255);Number.isFinite(t[3])||(t[3]=1),e.picking_uHighlightColor=t}return n.pickingActive!==void 0&&(e.picking_uActive=!!n.pickingActive,e.picking_uAttribute=!!n.pickingAttribute),e}const X5=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,Z5=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,q5={name:"picking",vs:X5,fs:Z5,getUniforms:$5},K5=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,J5={name:"transform",vs:K5,fs:null};class ju{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new ju(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(t=>t.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const t=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(r=>r.name!==t),this.stateHash++}addShaderHook(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{vs:t="",fs:r="",defines:i={},inject:o={},varyings:f=[],bufferMode:d=35981,transpileToGLSL100:m=!1}=e,_=this._getModuleList(e.modules),E=this._getHash(t),T=this._getHash(r),C=_.map(X=>this._getHash(X.name)).sort(),P=f.map(X=>this._getHash(X)),R=Object.keys(i).sort(),U=Object.keys(o).sort(),j=[],G=[];for(const X of R)j.push(this._getHash(X)),j.push(this._getHash(i[X]));for(const X of U)G.push(this._getHash(X)),G.push(this._getHash(o[X]));const Q="".concat(E,"/").concat(T,"D").concat(j.join("/"),"M").concat(C.join("/"),"I").concat(G.join("/"),"V").concat(P.join("/"),"H").concat(this.stateHash,"B").concat(d).concat(m?"T":"");if(!this._programCache[Q]){const X=z6(this.gl,{vs:t,fs:r,modules:_,inject:o,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:m});this._programCache[Q]=new ew(this.gl,{hash:Q,vs:X.vs,fs:X.fs,varyings:f,bufferMode:d}),this._getUniforms[Q]=X.getUniforms||(q=>{}),this._useCounts[Q]=0}return this._useCounts[Q]++,this._programCache[Q]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const t=e.hash;this._useCounts[t]--,this._useCounts[t]===0&&(this._programCache[t].delete(),delete this._programCache[t],delete this._getUniforms[t],delete this._useCounts[t])}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=new Array(this._defaultModules.length+e.length),r={};let i=0;for(let o=0,f=this._defaultModules.length;o<f;++o){const d=this._defaultModules[o],m=d.name;t[i++]=d,r[m]=!0}for(let o=0,f=e.length;o<f;++o){const d=e[o],m=d.name;r[m]||(t[i++]=d,r[m]=!0)}return t.length=i,t}}const e8={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function t8(n,e,t){const r={};let i=e.indices;for(const o in e.attributes){const f=e.attributes[o],d=n8(o);if(o==="indices")i=f;else if(f.constant)r[d]=f.value;else{const m=f.value,_={...f};delete _.value,r[d]=[new nn(n,m),_],r8(o,_)}}if(i){const o=i.value||i;je(o instanceof Uint16Array||o instanceof Uint32Array,'attribute array for "indices" must be of integer type');const f={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};r.indices=[new nn(n,{data:o,target:34963}),f]}return r}function n8(n,e){const{attributeMap:t=e8}={};return t&&t[n]||n}function r8(n,e){let t;switch(n){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":t="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":t="vectors";break}switch(t){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break}je(Number.isFinite(e.size),"attribute ".concat(n," needs size"))}const _A=2,i8=1e4,s8="Model needs drawMode and vertexCount",W2=()=>{},o8={};class Ma{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:r=Co("model")}=t;je(a0(e)),this.id=r,this.gl=e,this.id=t.id||Co("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(t)}initialize(e){this.props={},this.programManager=e.programManager||ju.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:t=null,vs:r,fs:i,modules:o,defines:f,inject:d,varyings:m,bufferMode:_,transpileToGLSL100:E}=e;this.programProps={program:t,vs:r,fs:i,modules:o,defines:f,inject:d,varyings:m,bufferMode:_,transpileToGLSL100:E},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=e.drawMode!==void 0?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},je(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),s8)}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:t,vs:r,fs:i,modules:o,defines:f,inject:d,varyings:m,bufferMode:_,transpileToGLSL100:E}=e;this.programProps={program:t,vs:r,fs:i,modules:o,defines:f,inject:d,varyings:m,bufferMode:_,transpileToGLSL100:E},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return je(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return je(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=t8(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(GA(e))return this;const t={};for(const r in e){const i=e[r];t[r]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(t),this}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const t=this.programManager.getUniforms(this.program);return t?t(e):{}}updateModuleSettings(e){const t=this.getModuleUniforms(e||{});return this.setUniforms(t)}clear(e){return gp(this.program.gl,e),this}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();const{moduleSettings:t=null,framebuffer:r,uniforms:i={},attributes:o={},transformFeedback:f=this.transformFeedback,parameters:d={},vertexArray:m=this.vertexArray}=e;this.setAttributes(o),this.updateModuleSettings(t),this.setUniforms(i);let _;nt.priority>=_A&&(_=this._logDrawCallStart(_A));const E=this.vertexArray.getDrawParams(),{isIndexed:T=E.isIndexed,indexType:C=E.indexType,indexOffset:P=E.indexOffset,vertexArrayInstanced:R=E.isInstanced}=this.props;R&&!this.isInstanced&&nt.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:U,instanceCount:j}=this,{onBeforeRender:G=W2,onAfterRender:Q=W2}=this.props;G(),this.program.setUniforms(this.uniforms);const X=this.program.draw(Object.assign(o8,e,{logPriority:_,uniforms:null,framebuffer:r,parameters:d,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:m,transformFeedback:f,isIndexed:T,indexType:C,isInstanced:U,instanceCount:j,offset:T?P:0}));return Q(),nt.priority>=_A&&this._logDrawCallEnd(_,m,r),X}transform(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{discard:t=!0,feedbackBuffers:r,unbindModels:i=[]}=e;let{parameters:o}=e;r&&this._setFeedbackBuffers(r),t&&(o=Object.assign({},o,{35977:t})),i.forEach(f=>f.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:o}))}finally{i.forEach(f=>f.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return nt.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:t}=this.programProps;if(t)this._managedProgram=!1;else{const{vs:r,fs:i,modules:o,inject:f,defines:d,varyings:m,bufferMode:_,transpileToGLSL100:E}=this.programProps;t=this.programManager.get({vs:r,fs:i,modules:o,inject:f,defines:d,varyings:m,bufferMode:_,transpileToGLSL100:E}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}je(t instanceof ew,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new t6(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof nn&&t.delete()}}_setAnimationProps(e){this.animated&&je(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(GA(e))return this;const{gl:t}=this.program;return this.transformFeedback=this.transformFeedback||new tw(t,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const t=e>3?0:i8;if(!(Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),nt.group(_A,">>> DRAWING MODEL ".concat(this.id),{collapsed:nt.level<=2})(),e}_logDrawCallEnd(e,t,r,i){if(e===void 0)return;const o=i6({vertexArray:t,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:f,unusedTable:d,unusedCount:m}=k2({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),{table:_,count:E}=k2({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0});E>0&&nt.log("MISSING UNIFORMS",Object.keys(_))(),m>0&&nt.log("UNUSED UNIFORMS",Object.keys(d))();const T=o6(this.vertexArray.configuration);nt.table(e,o)(),nt.table(e,f)(),nt.table(e+1,T)(),i&&i.log({logLevel:_A,message:"Rendered to ".concat(i.id)}),nt.groupEnd(_A)()}}class a8{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}setupResources(e){for(const t of this.bindings)this._setupTransformFeedback(t,e)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyings:t}=this;return t.length>0&&(e=Object.assign({},e,{varyings:t})),e}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=this.bindings[this.currentIndex],{sourceBuffers:r,transformFeedback:i}=t;return{attributes:Object.assign({},r,e.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:t}=this.bindings[this.currentIndex],r=e?t[e]:null;return r?r instanceof nn?r:r.buffer:null}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyingName:t}=e,r=this.getBuffer(t);return r?r.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&je(Ft(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:t={}}=e,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const o=this.feedbackMap[i];i in t&&(r[o]=i)}Object.assign(r,e.feedbackBuffers);for(const i in r){const o=r[i];if(typeof o=="string"){const f=t[o],{byteLength:d,usage:m,accessor:_}=f;r[i]=this._createNewBuffer(i,{byteLength:d,usage:m,accessor:_})}}return r}_setupBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:t=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const r=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:t,feedbackBuffers:r})}_setupTransformFeedback(e,t){let{model:r}=t;const{program:i}=r;e.transformFeedback=new tw(this.gl,{program:i,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:t,feedbackBuffers:r}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:t,feedbackBuffers:r})}}_updateBinding(e,t){return e?(Object.assign(e.sourceBuffers,t.sourceBuffers),Object.assign(e.feedbackBuffers,t.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},t.sourceBuffers),feedbackBuffers:Object.assign({},t.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const t=Object.assign({},e.sourceBuffers),r=Object.assign({},e.feedbackBuffers);for(const i in this.feedbackMap){const o=this.feedbackMap[i];t[i]=e.feedbackBuffers[o],r[o]=e.sourceBuffers[i],je(r[o]instanceof nn)}return{sourceBuffers:t,feedbackBuffers:r}}_createNewBuffer(e,t){const r=new nn(this.gl,t);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=r,r}_getNextIndex(){return(this.currentIndex+1)%2}}const A8="transform_uSampler_",zf="transform_uSize_",Q2="transform_position";function l8(n){let{vs:e,sourceTextureMap:t,targetTextureVarying:r,targetTexture:i}=n,f=Object.keys(t).length,d=null;const m={};let _=e,E={};if(f>0||r){const T=_.split(`
`),C=T.slice();if(T.forEach((P,R,U)=>{if(f>0){const j=d8(P,t);if(j){const{updatedLine:G,inject:Q}=j;C[R]=G,E=vg([E,Q]),Object.assign(m,j.samplerTextureMap),f--}}r&&!d&&(d=h8(P,r))}),r){je(i);const P="".concat(zf).concat(r),R="uniform vec2 ".concat(P,`;
`),U="     vec2 ".concat(Q2," = transform_getPos(").concat(P,`);
     gl_Position = vec4(`).concat(Q2,`, 0, 1.);
`);E=vg([E,{"vs:#decl":R,"vs:#main-start":U}])}_=C.join(`
`)}return{vs:_,targetTextureType:d,inject:E,samplerTextureMap:m}}function u8(n){let{sourceTextureMap:e,targetTextureVarying:t,targetTexture:r}=n;const i={};let o,f;t&&({width:o,height:f}=r,i["".concat(zf).concat(t)]=[o,f]);for(const d in e)({width:o,height:f}=e[d]),i["".concat(zf).concat(d)]=[o,f];return i}function c8(n){return Aw(n,["attribute","in"])}function f8(n){const e="".concat(A8).concat(n),t="".concat(zf).concat(n),r="  uniform sampler2D ".concat(e,`;
  uniform vec2 `).concat(t,";");return{samplerName:e,sizeName:t,uniformDeclerations:r}}function h8(n,e){const t=Aw(n,["varying","out"]);return t&&t.name===e?t.type:null}function d8(n,e){const t={},r=c8(n);if(!r)return null;const{type:i,name:o}=r;if(o&&e[o]){const f="// ".concat(n," => Replaced by Transform with a sampler"),{samplerName:d,sizeName:m,uniformDeclerations:_}=f8(o),E=X6(i),T="  ".concat(i," ").concat(o," = transform_getInput(").concat(d,", ").concat(m,").").concat(E,`;
`);return t[d]=o,{updatedLine:f,inject:{"vs:#decl":_,"vs:#main-start":T},samplerTextureMap:t}}return null}const g8={10241:9728,10240:9728,10242:33071,10243:33071},p8="transform_output";class m8{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=this._processVertexShader(e);return Object.assign({},e,t)}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:t,sourceTextures:r,framebuffer:i,targetTexture:o}=this.bindings[this.currentIndex],f=Object.assign({},t,e.attributes),d=Object.assign({},e.uniforms),m=Object.assign({},e.parameters);let _=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){f.transform_elementID=this.elementIDBuffer;for(const T in this.samplerTextureMap){const C=this.samplerTextureMap[T];d[T]=r[C]}this._setSourceTextureParameters();const E=u8({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(d,E)}return this.hasTargetTexture&&(_=!1,m.viewport=[0,0,i.width,i.height]),{attributes:f,framebuffer:i,uniforms:d,discard:_,parameters:m}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{framebuffer:t}=this.bindings[this.currentIndex],r=l0(t);if(!e)return r;const i=r.constructor,o=Z6(this.targetTextureType),f=new i(r.length*o/4);let d=0;for(let m=0;m<r.length;m+=4)for(let _=0;_<o;_++)f[d++]=r[m+_];return f}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_targetTextureVarying:t,_swapTexture:r}=e;this._swapTexture=r,this.targetTextureVarying=t,this.hasTargetTexture=t,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:t,textureOrReference:r}=e;if(r instanceof Zr)return r;const i=t[r];return i?(this._targetRefTexName=r,this._createNewTexture(i)):null}_setupTextures(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:t,_sourceTextures:r={},_targetTexture:i}=e,o=this._createTargetTexture({sourceTextures:r,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:t,sourceTextures:r,targetTexture:o}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if(typeof e!="number"||this.elementCount>=e)return;const t=new Float32Array(e);t.forEach((r,i,o)=>{o[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=new nn(this.gl,{data:t,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:t,targetTexture:r}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:t,targetTexture:r})}}_updateBinding(e,t){const{sourceBuffers:r,sourceTextures:i,targetTexture:o}=t;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,i),Object.assign(e.sourceBuffers,r),o){e.targetTexture=o;const{width:f,height:d}=o,{framebuffer:m}=e;m?(m.update({attachments:{36064:o},resizeAttachments:!1}),m.resize({width:f,height:d})):e.framebuffer=new Bn(this.gl,{id:"transform-framebuffer",width:f,height:d,attachments:{36064:o}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:t}=this.bindings[e];for(const r in t)t[r].setParameters(g8)}_swapTextures(e){if(!this._swapTexture)return null;const t=Object.assign({},e.sourceTextures);t[this._swapTexture]=e.targetTexture;const r=e.sourceTextures[this._swapTexture];return{sourceTextures:t,targetTexture:r}}_createNewTexture(e){const t=HS(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=t,t}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceTextures:t,targetTexture:r}=this.bindings[this.currentIndex],{vs:i,uniforms:o,targetTextureType:f,inject:d,samplerTextureMap:m}=l8({vs:e.vs,sourceTextureMap:t,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),_=vg([e.inject||{},d]);this.targetTextureType=f,this.samplerTextureMap=m;const E=e._fs||lw({version:K_(i),input:this.targetTextureVarying,inputType:f,output:p8}),T=this.hasSourceTextures||this.targetTextureVarying?[J5].concat(e.modules||[]):e.modules;return{vs:i,fs:E,modules:T,uniforms:o,inject:_}}}class yp{static isSupported(e){return Ft(e)}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(t),Object.seal(this)}delete(){const{model:e,bufferTransform:t,textureTransform:r}=this;e&&e.delete(),t&&t.delete(),r&&r.delete()}run(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{clearRenderTarget:t=!0}=e,r=this._updateDrawOptions(e);t&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}swap(){let e=!1;const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of t)e=e||r.swap();je(e,"Nothing to swap")}getBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of t){const i=r.getData(e);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of t)r.update(e)}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{gl:t}=this;this._buildResourceTransforms(t,e),e=this._updateModelProps(e),this.model=new Ma(t,Object.assign({},e,{fs:e.fs||lw({version:K_(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let t=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)t=i.updateModelProps(t);return t}_buildResourceTransforms(e,t){v8(t)&&(this.bufferTransform=new a8(e,t)),y8(t)&&(this.textureTransform=new m8(e,t)),je(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let t=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)t=Object.assign(t,i.getDrawOptions(t));return t}}function v8(n){return!!(!GA(n.feedbackBuffers)||!GA(n.feedbackMap)||n.varyings&&n.varyings.length>0)}function y8(n){return!!(!GA(n._sourceTextures)||n._targetTexture||n._targetTextureVarying)}const Y2={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class il{static get DRAW_MODE(){return Y2}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:t=Co("geometry"),drawMode:r=Y2.TRIANGLES,attributes:i={},indices:o=null,vertexCount:f=null}=e;this.id=t,this.drawMode=r|0,this.attributes={},this.userData={},this._setAttributes(i,o),this.vertexCount=f||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,t){t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t);for(const r in e){let i=e[r];i=ArrayBuffer.isView(i)?{value:i}:i,je(ArrayBuffer.isView(i.value),"".concat(this._print(r),": must be typed array or object with value as typed array")),(r==="POSITION"||r==="positions")&&!i.size&&(i.size=3),r==="indices"?(je(!this.indices),this.indices=i):this.attributes[r]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,t){if(t)return t.value.length;let r=1/0;for(const i in e){const o=e[i],{value:f,size:d,constant:m}=o;!m&&f&&d>=1&&(r=Math.min(r,f.length/d))}return je(Number.isFinite(r)),r}}let _8=1,w8=1;class vw{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:t=0,duration:r=Number.POSITIVE_INFINITY,rate:i=1,repeat:o=1}=e,f=_8++,d={time:0,delay:t,duration:r,rate:i,repeat:o};return this._setChannelTime(d,this.time),this.channels.set(f,d),f}removeChannel(e){this.channels.delete(e);for(const[t,r]of this.animations)r.channel===e&&this.detachAnimation(t)}isFinished(e){const t=this.channels.get(e);return t===void 0?!1:this.time>=t.delay+t.duration*t.repeat}getTime(e){if(e===void 0)return this.time;const t=this.channels.get(e);return t===void 0?-1:t.time}setTime(e){this.time=Math.max(0,e);const t=this.channels.values();for(const i of t)this._setChannelTime(i,this.time);const r=this.animations.values();for(const i of r){const{animation:o,channel:f}=i;o.setTime(this.getTime(f))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,t){const r=w8++;return this.animations.set(r,{animation:e,channel:t}),e.setTime(this.getTime(t)),r}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,t){const r=t-e.delay,i=e.duration*e.repeat;r>=i?e.time=e.duration*e.rate:(e.time=Math.max(0,r)%e.duration,e.time*=e.rate)}}const b8=[255,255,255],E8=1;let T8=0;class x8{constructor(e={}){I(this,"id",void 0),I(this,"color",void 0),I(this,"intensity",void 0),I(this,"type","ambient");const{color:t=b8}=e,{intensity:r=E8}=e;this.id=e.id||"ambient-".concat(T8++),this.color=t,this.intensity=r}}const S8=[255,255,255],C8=1,M8=[0,0,-1];let L8=0;class $2{constructor(e={}){I(this,"id",void 0),I(this,"color",void 0),I(this,"intensity",void 0),I(this,"type","directional"),I(this,"direction",void 0),I(this,"shadow",void 0);const{color:t=S8}=e,{intensity:r=C8}=e,{direction:i=M8}=e,{_shadow:o=!1}=e;this.id=e.id||"directional-".concat(L8++),this.color=t,this.intensity=r,this.type="directional",this.direction=new as(i).normalize().toArray(),this.shadow=o}getProjectedLight(e){return this}}class P8{constructor(e,t={id:"pass"}){I(this,"id",void 0),I(this,"gl",void 0),I(this,"props",void 0);const{id:r}=t;this.id=r,this.gl=e,this.props={...t}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class _p extends P8{constructor(...e){super(...e),I(this,"_lastRenderIndex",-1)}render(e){const t=this.gl;return Rs(t,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:t,moduleParameters:r,viewports:i,views:o,onViewportActive:f,clearStack:d=!0,clearCanvas:m=!0}=e;e.pass=e.pass||"unknown";const _=this.gl;m&&I8(_,t),d&&(this._lastRenderIndex=-1);const E=[];for(const T of i){const C=o&&o[T.id];f?.(T);const P=this._getDrawLayerParams(T,e),R=T.subViewports||[T];for(const U of R){const j=this._drawLayersInViewport(_,{target:t,moduleParameters:r,viewport:U,view:C,pass:e.pass,layers:e.layers},P);E.push(j)}}return E}_getDrawLayerParams(e,{layers:t,pass:r,isPicking:i=!1,layerFilter:o,cullRect:f,effects:d,moduleParameters:m},_=!1){const E=[],T=yw(this._lastRenderIndex+1),C={layer:t[0],viewport:e,isPicking:i,renderPass:r,cullRect:f},P={};for(let R=0;R<t.length;R++){const U=t[R],j=this._shouldDrawLayer(U,C,o,P),G={shouldDrawLayer:j};j&&!_&&(G.layerRenderIndex=T(U,j),G.moduleParameters=this._getModuleParameters(U,d,r,m),G.layerParameters=this.getLayerParameters(U,R,e)),E[R]=G}return E}_drawLayersInViewport(e,{layers:t,moduleParameters:r,pass:i,target:o,viewport:f,view:d},m){const _=k8(e,{moduleParameters:r,target:o,viewport:f});if(d&&d.props.clear){const T=d.props.clear===!0?{color:!0,depth:!0}:d.props.clear;ki(e,{scissorTest:!0,scissor:_},()=>gp(e,T))}const E={totalCount:t.length,visibleCount:0,compositeCount:0,pickableCount:0};Rs(e,{viewport:_});for(let T=0;T<t.length;T++){const C=t[T],{shouldDrawLayer:P,layerRenderIndex:R,moduleParameters:U,layerParameters:j}=m[T];if(P&&C.props.pickable&&E.pickableCount++,C.isComposite)E.compositeCount++;else if(P){E.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,R),U.viewport=f;try{C._drawLayer({moduleParameters:U,uniforms:{layerIndex:R},parameters:j})}catch(G){C.raiseError(G,"drawing ".concat(C," to ").concat(i))}}}return E}shouldDrawLayer(e){return!0}getModuleParameters(e,t){return null}getLayerParameters(e,t,r){return e.props.parameters}_shouldDrawLayer(e,t,r,i){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;t.layer=e;let f=e.parent;for(;f;){if(!f.props.visible||!f.filterSubLayer(t))return!1;t.layer=f,f=f.parent}if(r){const d=t.layer.id;if(d in i||(i[d]=r(t)),!i[d])return!1}return e.activateViewport(t.viewport),!0}_getModuleParameters(e,t,r,i){var o;const f=Object.assign(Object.create(((o=e.internalState)===null||o===void 0?void 0:o.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:jA(this.gl)});if(t)for(const m of t){var d;Object.assign(f,(d=m.getModuleParameters)===null||d===void 0?void 0:d.call(m,e))}return Object.assign(f,this.getModuleParameters(e,t),i)}}function yw(n=0,e={}){const t={},r=(i,o)=>{const f=i.props._offset,d=i.id,m=i.parent&&i.parent.id;let _;if(m&&!(m in e)&&r(i.parent,!1),m in t){const E=t[m]=t[m]||yw(e[m],e);_=E(i,o),t[d]=E}else Number.isFinite(f)?(_=f+(e[m]||0),t[d]=null):_=n;return o&&_>=n&&(n=_+1),e[d]=_,_};return r}function k8(n,{moduleParameters:e,target:t,viewport:r}){const i=t&&t.id!=="default-framebuffer",o=e&&e.devicePixelRatio||jA(n),f=i?t.height:n.drawingBufferHeight,d=r;return[d.x*o,f-(d.y+d.height)*o,d.width*o,d.height*o]}function I8(n,e){const t=e?e.width:n.drawingBufferWidth,r=e?e.height:n.drawingBufferHeight;Rs(n,{viewport:[0,0,t,r]}),n.clear(16640)}class R8 extends _p{constructor(e,t){super(e,t),I(this,"shadowMap",void 0),I(this,"depthBuffer",void 0),I(this,"fbo",void 0),this.shadowMap=new Zr(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new CA(e,{format:33189,width:1,height:1}),this.fbo=new Bn(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const t=this.fbo;ki(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const r=e.viewports[0],i=jA(this.gl),o=r.width*i,f=r.height*i;(o!==t.width||f!==t.height)&&t.resize({width:o,height:f}),super.render({...e,target:t,pass:"shadow"})})}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const _w="#define SMOOTH_EDGE_RADIUS 0.5",O8=`
`.concat(_w,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),D8=`
`.concat(_w,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),F8={name:"geometry",vs:O8,fs:D8},B8=Object.keys(Zt).map(n=>"const int COORDINATE_SYSTEM_".concat(n," = ").concat(Zt[n],";")).join(""),N8=Object.keys(es).map(n=>"const int PROJECTION_MODE_".concat(n," = ").concat(es[n],";")).join(""),U8=Object.keys(VA).map(n=>"const int UNIT_".concat(n.toUpperCase()," = ").concat(VA[n],";")).join(""),z8="".concat(B8,`
`).concat(N8,`
`).concat(U8,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
  float y = clamp(lat, -89.9, 89.9);
  return 1.0 / cos(radians(y));
}

float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {
    
    if (geometry.position.w == 0.0) {
      return project_size_at_latitude(geometry.worldPosition.y);
    }
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}

float project_size_at_latitude(float meters, float lat) {
  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}
vec3 project_normal(vec3 vector) {
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size_at_latitude(position_world.z, position_world.y),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    position_world.xyz -= project_uCoordinateOrigin;
  }
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function V8(n,e){if(n===e)return!0;if(Array.isArray(n)){const t=n.length;if(!e||e.length!==t)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}return!1}function Gu(n){let e={},t;return r=>{for(const i in r)if(!V8(r[i],e[i])){t=n(r),e=r;break}return t}}const X2=[0,0,0,0],j8=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],ww=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],G8=[0,0,0],bw=[0,0,0],H8=Gu(Y8);function Ew(n,e,t=bw){t.length<3&&(t=[t[0],t[1],0]);let r=t,i,o=!0;switch(e===Zt.LNGLAT_OFFSETS||e===Zt.METER_OFFSETS?i=t:i=n.isGeospatial?[Math.fround(n.longitude),Math.fround(n.latitude),0]:null,n.projectionMode){case es.WEB_MERCATOR:(e===Zt.LNGLAT||e===Zt.CARTESIAN)&&(i=[0,0,0],o=!1);break;case es.WEB_MERCATOR_AUTO_OFFSET:e===Zt.LNGLAT?r=i:e===Zt.CARTESIAN&&(r=[Math.fround(n.center[0]),Math.fround(n.center[1]),0],i=n.unprojectPosition(r),r[0]-=t[0],r[1]-=t[1],r[2]-=t[2]);break;case es.IDENTITY:r=n.position.map(Math.fround),r[2]=r[2]||0;break;case es.GLOBE:o=!1,i=null;break;default:o=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:r,offsetMode:o}}function W8(n,e,t){const{viewMatrixUncentered:r,projectionMatrix:i}=n;let{viewMatrix:o,viewProjectionMatrix:f}=n,d=X2,m=X2,_=n.cameraPosition;const{geospatialOrigin:E,shaderCoordinateOrigin:T,offsetMode:C}=Ew(n,e,t);return C&&(m=n.projectPosition(E||T),_=[_[0]-m[0],_[1]-m[1],_[2]-m[2]],m[3]=1,d=Vu([],m,f),o=r||o,f=ns([],i,o),f=ns([],f,j8)),{viewMatrix:o,viewProjectionMatrix:f,projectionCenter:d,originCommon:m,cameraPosCommon:_,shaderCoordinateOrigin:T,geospatialOrigin:E}}function Q8({viewport:n,devicePixelRatio:e=1,modelMatrix:t=null,coordinateSystem:r=Zt.DEFAULT,coordinateOrigin:i=bw,autoWrapLongitude:o=!1}){r===Zt.DEFAULT&&(r=n.isGeospatial?Zt.LNGLAT:Zt.CARTESIAN);const f=H8({viewport:n,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:i});return f.project_uWrapLongitude=o,f.project_uModelMatrix=t||ww,f}function Y8({viewport:n,devicePixelRatio:e,coordinateSystem:t,coordinateOrigin:r}){const{projectionCenter:i,viewProjectionMatrix:o,originCommon:f,cameraPosCommon:d,shaderCoordinateOrigin:m,geospatialOrigin:_}=W8(n,t,r),E=n.getDistanceScales(),T=[n.width*e,n.height*e],C=Vu([],[0,0,-n.focalDistance,1],n.projectionMatrix)[3]||1,P={project_uCoordinateSystem:t,project_uProjectionMode:n.projectionMode,project_uCoordinateOrigin:m,project_uCommonOrigin:f.slice(0,3),project_uCenter:i,project_uPseudoMeters:!!n._pseudoMeters,project_uViewportSize:T,project_uDevicePixelRatio:e,project_uFocalDistance:C,project_uCommonUnitsPerMeter:E.unitsPerMeter,project_uCommonUnitsPerWorldUnit:E.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:G8,project_uScale:n.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:ww,project_uCameraPosition:d};if(_){const R=n.getDistanceScales(_);switch(t){case Zt.METER_OFFSETS:P.project_uCommonUnitsPerWorldUnit=R.unitsPerMeter,P.project_uCommonUnitsPerWorldUnit2=R.unitsPerMeter2;break;case Zt.LNGLAT:case Zt.LNGLAT_OFFSETS:n._pseudoMeters||(P.project_uCommonUnitsPerMeter=R.unitsPerMeter),P.project_uCommonUnitsPerWorldUnit=R.unitsPerDegree,P.project_uCommonUnitsPerWorldUnit2=R.unitsPerDegree2;break;case Zt.CARTESIAN:P.project_uCommonUnitsPerWorldUnit=[1,1,R.unitsPerMeter[2]],P.project_uCommonUnitsPerWorldUnit2=[0,0,R.unitsPerMeter2[2]];break}}return P}const $8={};function X8(n=$8){return"viewport"in n?Q8(n):{}}const wp={name:"project",dependencies:[J6,F8],vs:z8,getUniforms:X8};function mf(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function RA(n,e){const t=Vu([],e,n);return U5(t,t,1/t[3]),t}function Z2(n,e){const t=n%e;return t<0?e+t:t}function bg(n,e,t){return n<e?e:n>t?t:n}function Z8(n){return Math.log(n)*Math.LOG2E}const bp=Math.log2||Z8;function Os(n,e){if(!n)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Li=Math.PI,Tw=Li/4,gi=Li/180,Eg=180/Li,YA=512,Vf=4003e4,of=85.051129,xw=1.5;function q8(n){return Math.pow(2,n)}function K8(n){return bp(n)}function Eo(n){const[e,t]=n;Os(Number.isFinite(e)),Os(Number.isFinite(t)&&t>=-90&&t<=90,"invalid latitude");const r=e*gi,i=t*gi,o=YA*(r+Li)/(2*Li),f=YA*(Li+Math.log(Math.tan(Tw+i*.5)))/(2*Li);return[o,f]}function ks(n){const[e,t]=n,r=e/YA*(2*Li)-Li,i=2*(Math.atan(Math.exp(t/YA*(2*Li)-Li))-Tw);return[r*Eg,i*Eg]}function J8(n){const{latitude:e}=n;Os(Number.isFinite(e));const t=Math.cos(e*gi);return K8(Vf*t)-9}function xd(n){const e=Math.cos(n*gi);return YA/Vf/e}function jf(n){const{latitude:e,longitude:t,highPrecision:r=!1}=n;Os(Number.isFinite(e)&&Number.isFinite(t));const i=YA,o=Math.cos(e*gi),f=i/360,d=f/o,m=i/Vf/o,_={unitsPerMeter:[m,m,m],metersPerUnit:[1/m,1/m,1/m],unitsPerDegree:[f,d,m],degreesPerUnit:[1/f,1/d,1/m]};if(r){const E=gi*Math.tan(e*gi)/o,T=f*E/2,C=i/Vf*E,P=C/d*m;_.unitsPerDegree2=[0,T,C],_.unitsPerMeter2=[P,0,P]}return _}function Sw(n,e){const[t,r,i]=n,[o,f,d]=e,{unitsPerMeter:m,unitsPerMeter2:_}=jf({longitude:t,latitude:r,highPrecision:!0}),E=Eo(n);E[0]+=o*(m[0]+_[0]*f),E[1]+=f*(m[1]+_[1]*f);const T=ks(E),C=(i||0)+(d||0);return Number.isFinite(i)||Number.isFinite(d)?[T[0],T[1],C]:T}function Cw(n){const{height:e,pitch:t,bearing:r,altitude:i,scale:o,center:f}=n,d=mf();Tu(d,d,[0,0,-i]),gw(d,d,-t*gi),pw(d,d,r*gi);const m=o/e;return u0(d,d,[m,m,m]),f&&Tu(d,d,g5([],f)),d}function Mw(n){const{width:e,height:t,altitude:r,pitch:i=0,offset:o,center:f,scale:d,nearZMultiplier:m=1,farZMultiplier:_=1}=n;let{fovy:E=$A(xw)}=n;r!==void 0&&(E=$A(r));const T=E*gi,C=i*gi,P=Ep(E);let R=P;f&&(R+=f[2]*d/Math.cos(C)/t);const U=T*(.5+(o?o[1]:0)/t),j=Math.sin(U)*R/Math.sin(bg(Math.PI/2-C-U,.01,Math.PI-.01)),G=Math.sin(C)*j+R,Q=R*10,X=Math.min(G*_,Q);return{fov:T,aspect:e/t,focalDistance:P,near:m,far:X}}function eM(n){const{fov:e,aspect:t,near:r,far:i}=Mw(n);return mw([],e,t,r,i)}function $A(n){return 2*Math.atan(.5/n)*Eg}function Ep(n){return .5/Math.tan(.5*n*gi)}function Tp(n,e){const[t,r,i=0]=n;return Os(Number.isFinite(t)&&Number.isFinite(r)&&Number.isFinite(i)),RA(e,[t,r,i,1])}function xu(n,e,t=0){const[r,i,o]=n;if(Os(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(o))return RA(e,[r,i,o,1]);const f=RA(e,[r,i,0,1]),d=RA(e,[r,i,1,1]),m=f[2],_=d[2],E=m===_?0:((t||0)-m)/(_-m);return fw([],f,d,E)}function xp(n){const{width:e,height:t,bounds:r,minExtent:i=0,maxZoom:o=24,offset:f=[0,0]}=n,[[d,m],[_,E]]=r,T=tM(n.padding),C=Eo([d,bg(E,-of,of)]),P=Eo([_,bg(m,-of,of)]),R=[Math.max(Math.abs(P[0]-C[0]),i),Math.max(Math.abs(P[1]-C[1]),i)],U=[e-T.left-T.right-Math.abs(f[0])*2,t-T.top-T.bottom-Math.abs(f[1])*2];Os(U[0]>0&&U[1]>0);const j=U[0]/R[0],G=U[1]/R[1],Q=(T.right-T.left)/2/j,X=(T.top-T.bottom)/2/G,q=[(P[0]+C[0])/2+Q,(P[1]+C[1])/2+X],ee=ks(q),ie=Math.min(o,bp(Math.abs(Math.min(j,G))));return Os(Number.isFinite(ie)),{longitude:ee[0],latitude:ee[1],zoom:ie}}function tM(n=0){return typeof n=="number"?{top:n,bottom:n,left:n,right:n}:(Os(Number.isFinite(n.top)&&Number.isFinite(n.bottom)&&Number.isFinite(n.left)&&Number.isFinite(n.right)),n)}const q2=Math.PI/180;function Lw(n,e=0){const{width:t,height:r,unproject:i}=n,o={targetZ:e},f=i([0,r],o),d=i([t,r],o);let m,_;const E=n.fovy?.5*n.fovy*q2:Math.atan(.5/n.altitude),T=(90-n.pitch)*q2;return E>T-.01?(m=K2(n,0,e),_=K2(n,t,e)):(m=i([0,0],o),_=i([t,0],o)),[f,d,_,m]}function K2(n,e,t){const{pixelUnprojectionMatrix:r}=n,i=RA(r,[e,0,1,1]),o=RA(r,[e,n.height,1,1]),d=(t*n.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2]),m=fw([],i,o,d),_=ks(m);return _.push(t),_}let nM=class Tg{constructor(e={width:1,height:1}){I(this,"latitude",void 0),I(this,"longitude",void 0),I(this,"zoom",void 0),I(this,"pitch",void 0),I(this,"bearing",void 0),I(this,"altitude",void 0),I(this,"fovy",void 0),I(this,"meterOffset",void 0),I(this,"center",void 0),I(this,"width",void 0),I(this,"height",void 0),I(this,"scale",void 0),I(this,"distanceScales",void 0),I(this,"viewMatrix",void 0),I(this,"projectionMatrix",void 0),I(this,"viewProjectionMatrix",void 0),I(this,"pixelProjectionMatrix",void 0),I(this,"pixelUnprojectionMatrix",void 0),I(this,"equals",G=>G instanceof Tg?G.width===this.width&&G.height===this.height&&G2(G.projectionMatrix,this.projectionMatrix)&&G2(G.viewMatrix,this.viewMatrix):!1),I(this,"project",(G,Q={})=>{const{topLeft:X=!0}=Q,q=this.projectPosition(G),ee=Tp(q,this.pixelProjectionMatrix),[ie,pe]=ee,ue=X?pe:this.height-pe;return G.length===2?[ie,ue]:[ie,ue,ee[2]]}),I(this,"unproject",(G,Q={})=>{const{topLeft:X=!0,targetZ:q=void 0}=Q,[ee,ie,pe]=G,ue=X?ie:this.height-ie,me=q&&q*this.distanceScales.unitsPerMeter[2],Ce=xu([ee,ue,pe],this.pixelUnprojectionMatrix,me),[ge,ke,Me]=this.unprojectPosition(Ce);return Number.isFinite(pe)?[ge,ke,Me]:Number.isFinite(q)?[ge,ke,q]:[ge,ke]}),I(this,"projectPosition",G=>{const[Q,X]=Eo(G),q=(G[2]||0)*this.distanceScales.unitsPerMeter[2];return[Q,X,q]}),I(this,"unprojectPosition",G=>{const[Q,X]=ks(G),q=(G[2]||0)*this.distanceScales.metersPerUnit[2];return[Q,X,q]});let{width:t,height:r,altitude:i=null,fovy:o=null}=e;const{latitude:f=0,longitude:d=0,zoom:m=0,pitch:_=0,bearing:E=0,position:T=null,nearZMultiplier:C=.02,farZMultiplier:P=1.01}=e;t=t||1,r=r||1,o===null&&i===null?(i=xw,o=$A(i)):o===null?o=$A(i):i===null&&(i=Ep(o));const R=q8(m);i=Math.max(.75,i);const U=jf({longitude:d,latitude:f}),j=Eo([d,f]);j.push(0),T&&f5(j,j,x5([],T,U.unitsPerMeter)),this.projectionMatrix=eM({width:t,height:r,scale:R,center:j,pitch:_,fovy:o,nearZMultiplier:C,farZMultiplier:P}),this.viewMatrix=Cw({height:r,scale:R,center:j,pitch:_,bearing:E,altitude:i}),this.width=t,this.height=r,this.scale=R,this.latitude=f,this.longitude=d,this.zoom=m,this.pitch=_,this.bearing=E,this.altitude=i,this.fovy=o,this.center=j,this.meterOffset=T||[0,0,0],this.distanceScales=U,this._initMatrices(),Object.freeze(this)}_initMatrices(){const{width:e,height:t,projectionMatrix:r,viewMatrix:i}=this,o=mf();ns(o,o,r),ns(o,o,i),this.viewProjectionMatrix=o;const f=mf();u0(f,f,[e/2,-t/2,1]),Tu(f,f,[1,-1,0]),ns(f,f,o);const d=Uf(mf(),f);if(!d)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=f,this.pixelUnprojectionMatrix=d}projectFlat(e){return Eo(e)}unprojectFlat(e){return ks(e)}getMapCenterByLngLatPosition({lngLat:e,pos:t}){const r=xu(t,this.pixelUnprojectionMatrix),i=Eo(e),o=Nf([],i,cw([],r)),f=Nf([],this.center,o);return ks(f)}fitBounds(e,t={}){const{width:r,height:i}=this,{longitude:o,latitude:f,zoom:d}=xp(Object.assign({width:r,height:i,bounds:e},t));return new Tg({width:r,height:i,longitude:o,latitude:f,zoom:d})}getBounds(e){const t=this.getBoundingRegion(e),r=Math.min(...t.map(d=>d[0])),i=Math.max(...t.map(d=>d[0])),o=Math.min(...t.map(d=>d[1])),f=Math.max(...t.map(d=>d[1]));return[[r,o],[i,f]]}getBoundingRegion(e={}){return Lw(this,e.z||0)}getLocationAtPoint({lngLat:e,pos:t}){return this.getMapCenterByLngLatPosition({lngLat:e,pos:t})}};const J2=512;function rM(n){const{width:e,height:t,pitch:r=0}=n;let{longitude:i,latitude:o,zoom:f,bearing:d=0}=n;(i<-180||i>180)&&(i=Z2(i+180,360)-180),(d<-180||d>180)&&(d=Z2(d+180,360)-180);const m=bp(t/J2);if(f<=m)f=m,o=0;else{const _=t/2/Math.pow(2,f),E=ks([0,_])[1];if(o<E)o=E;else{const T=ks([0,J2-_])[1];o>T&&(o=T)}}return{width:e,height:t,longitude:i,latitude:o,zoom:f,pitch:r,bearing:d}}const iM=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,sM=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,oM=Gu(cM),aM=Gu(fM),AM=[0,0,0,1],lM=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function uM(n,e){const[t,r,i]=n,o=xu([t,r,i],e);return Number.isFinite(i)?o:[o[0],o[1],0]}function cM({viewport:n,center:e}){return new As(n.viewProjectionMatrix).invert().transform(e)}function fM({viewport:n,shadowMatrices:e}){const t=[],r=n.pixelUnprojectionMatrix,i=n.isGeospatial?void 0:1,o=[[0,0,i],[n.width,0,i],[0,n.height,i],[n.width,n.height,i],[0,0,-1],[n.width,0,-1],[0,n.height,-1],[n.width,n.height,-1]].map(f=>uM(f,r));for(const f of e){const d=f.clone().translate(new as(n.center).negate()),m=o.map(E=>d.transform(E)),_=new As().ortho({left:Math.min(...m.map(E=>E[0])),right:Math.max(...m.map(E=>E[0])),bottom:Math.min(...m.map(E=>E[1])),top:Math.max(...m.map(E=>E[1])),near:Math.min(...m.map(E=>-E[2])),far:Math.max(...m.map(E=>-E[2]))});t.push(_.multiplyRight(f))}return t}function hM(n,e){const{shadowEnabled:t=!0}=n;if(!t||!n.shadowMatrices||!n.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const r={shadow_uDrawShadowMap:!!n.drawToShadowMap,shadow_uUseShadowMap:n.shadowMaps?n.shadowMaps.length>0:!1,shadow_uColor:n.shadowColor||AM,shadow_uLightId:n.shadowLightId||0,shadow_uLightCount:n.shadowMatrices.length},i=oM({viewport:n.viewport,center:e.project_uCenter}),o=[],f=aM({shadowMatrices:n.shadowMatrices,viewport:n.viewport}).slice();for(let d=0;d<n.shadowMatrices.length;d++){const m=f[d],_=m.clone().translate(new as(n.viewport.center).negate());e.project_uCoordinateSystem===Zt.LNGLAT&&e.project_uProjectionMode===es.WEB_MERCATOR?(f[d]=_,o[d]=i):(f[d]=m.clone().multiplyRight(lM),o[d]=_.transform(i))}for(let d=0;d<f.length;d++)r["shadow_uViewProjectionMatrices[".concat(d,"]")]=f[d],r["shadow_uProjectCenters[".concat(d,"]")]=o[d],n.shadowMaps&&n.shadowMaps.length>0?r["shadow_uShadowMap".concat(d)]=n.shadowMaps[d]:r["shadow_uShadowMap".concat(d)]=n.dummyShadowMap;return r}const Sd={name:"shadow",dependencies:[wp],vs:iM,fs:sM,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(n={},e={})=>"viewport"in n&&(n.drawToShadowMap||n.shadowMaps&&n.shadowMaps.length>0)?hM(n,e):{}},dM={color:[255,255,255],intensity:1},ev=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],gM=[0,0,0,200/255];class Pw{constructor(e={}){I(this,"id","lighting-effect"),I(this,"props",void 0),I(this,"shadowColor",gM),I(this,"shadow",void 0),I(this,"ambientLight",void 0),I(this,"directionalLights",void 0),I(this,"pointLights",void 0),I(this,"shadowPasses",[]),I(this,"shadowMaps",[]),I(this,"dummyShadowMap",null),I(this,"programManager",void 0),I(this,"shadowMatrices",void 0),this.setProps(e)}setProps(e){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const t in e){const r=e[t];switch(r.type){case"ambient":this.ambientLight=r;break;case"directional":this.directionalLights.push(r);break;case"point":this.pointLights.push(r);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(t=>t.shadow),this.props=e}preRender(e,{layers:t,layerFilter:r,viewports:i,onViewportActive:o,views:f}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(e),this.programManager||(this.programManager=ju.getDefaultProgramManager(e),Sd&&this.programManager.addDefaultModule(Sd)),this.dummyShadowMap||(this.dummyShadowMap=new Zr(e,{width:1,height:1}));for(let d=0;d<this.shadowPasses.length;d++)this.shadowPasses[d].render({layers:t,layerFilter:r,viewports:i,onViewportActive:o,views:f,moduleParameters:{shadowLightId:d,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const t=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return t.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(r=>r.getProjectedLight({layer:e})),pointLights:this.pointLights.map(r=>r.getProjectedLight({layer:e}))},t}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(Sd),this.programManager=null)}_calculateMatrices(){const e=[];for(const t of this.directionalLights){const r=new As().lookAt({eye:new as(t.direction).negate()});e.push(r)}return e}_createShadowPasses(e){for(let t=0;t<this.directionalLights.length;t++){const r=new R8(e);this.shadowPasses[t]=r,this.shadowMaps[t]=r.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:t,directionalLights:r}=this;!e&&t.length===0&&r.length===0&&(this.ambientLight=new x8(dM),this.directionalLights.push(new $2(ev[0]),new $2(ev[1])))}}class pM{constructor(e={}){I(this,"_pool",[]),I(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,t,{size:r=1,type:i,padding:o=0,copy:f=!1,initialize:d=!1,maxCount:m}){const _=i||e&&e.constructor||Float32Array,E=t*r+o;if(ArrayBuffer.isView(e)){if(E<=e.length)return e;if(E*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new _(e.buffer,0,E)}let T=1/0;m&&(T=m*r+o);const C=this._allocate(_,E,d,T);return e&&f?C.set(e):d||C.fill(0,0,4),this._release(e),C}release(e){this._release(e)}_allocate(e,t,r,i){let o=Math.max(Math.ceil(t*this.opts.overAlloc),1);o>i&&(o=i);const f=this._pool,d=e.BYTES_PER_ELEMENT*o,m=f.findIndex(_=>_.byteLength>=d);if(m>=0){const _=new e(f.splice(m,1)[0],0,o);return r&&_.fill(0),_}return new e(o)}_release(e){if(!ArrayBuffer.isView(e))return;const t=this._pool,{buffer:r}=e,{byteLength:i}=r,o=t.findIndex(f=>f.byteLength>=i);o<0?t.push(r):(o>0||t.length<this.opts.poolSize)&&t.splice(o,0,r),t.length>this.opts.poolSize&&t.shift()}}const Su=new pM;function uu(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function mM(n){return[n[12],n[13],n[14]]}function vM(n){return{left:wA(n[3]+n[0],n[7]+n[4],n[11]+n[8],n[15]+n[12]),right:wA(n[3]-n[0],n[7]-n[4],n[11]-n[8],n[15]-n[12]),bottom:wA(n[3]+n[1],n[7]+n[5],n[11]+n[9],n[15]+n[13]),top:wA(n[3]-n[1],n[7]-n[5],n[11]-n[9],n[15]-n[13]),near:wA(n[3]+n[2],n[7]+n[6],n[11]+n[10],n[15]+n[14]),far:wA(n[3]-n[2],n[7]-n[6],n[11]-n[10],n[15]-n[14])}}const tv=new as;function wA(n,e,t,r){tv.set(n,e,t);const i=tv.len();return{distance:r/i,normal:new as(-n/i,-e/i,-t/i)}}function yM(n){return n-Math.fround(n)}let eu;function Cd(n,e){const{size:t=1,startIndex:r=0}=e,i=e.endIndex!==void 0?e.endIndex:n.length,o=(i-r)/t;eu=Su.allocate(eu,o,{type:Float32Array,size:t*2});let f=r,d=0;for(;f<i;){for(let m=0;m<t;m++){const _=n[f++];eu[d+m]=_,eu[d+m+t]=yM(_)}d+=t*2}return eu.subarray(0,o*t*2)}function _M(n){let e=null,t=!1;for(const r of n)r&&(e?(t||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],t=!0),e[0][0]=Math.min(e[0][0],r[0][0]),e[0][1]=Math.min(e[0][1],r[0][1]),e[1][0]=Math.max(e[1][0],r[1][0]),e[1][1]=Math.max(e[1][1],r[1][1])):e=r);return e}const wM=Math.PI/180,bM=uu(),nv=[0,0,0],EM={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function TM({width:n,height:e,orthographic:t,fovyRadians:r,focalDistance:i,padding:o,near:f,far:d}){const m=n/e,_=t?new As().orthographic({fovy:r,aspect:m,focalDistance:i,near:f,far:d}):new As().perspective({fovy:r,aspect:m,near:f,far:d});if(o){const{left:E=0,right:T=0,top:C=0,bottom:P=0}=o,R=bo((E+n-T)/2,0,n)-n/2,U=bo((C+e-P)/2,0,e)-e/2;_[8]-=R*2/n,_[9]+=U*2/e}return _}class sl{constructor(e={}){I(this,"id",void 0),I(this,"x",void 0),I(this,"y",void 0),I(this,"width",void 0),I(this,"height",void 0),I(this,"padding",void 0),I(this,"isGeospatial",void 0),I(this,"zoom",void 0),I(this,"focalDistance",void 0),I(this,"position",void 0),I(this,"modelMatrix",void 0),I(this,"distanceScales",void 0),I(this,"scale",void 0),I(this,"center",void 0),I(this,"cameraPosition",void 0),I(this,"projectionMatrix",void 0),I(this,"viewMatrix",void 0),I(this,"viewMatrixUncentered",void 0),I(this,"viewMatrixInverse",void 0),I(this,"viewProjectionMatrix",void 0),I(this,"pixelProjectionMatrix",void 0),I(this,"pixelUnprojectionMatrix",void 0),I(this,"resolution",void 0),I(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||EM,this.focalDistance=e.focalDistance||1,this.position=e.position||nv,this.modelMatrix=e.modelMatrix||null;const{longitude:t,latitude:r}=e;this.isGeospatial=Number.isFinite(r)&&Number.isFinite(t),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?es.WEB_MERCATOR:es.WEB_MERCATOR_AUTO_OFFSET:es.IDENTITY}equals(e){return e instanceof sl?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Eu(e.projectionMatrix,this.projectionMatrix)&&Eu(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:t=!0}={}){const r=this.projectPosition(e),i=Tp(r,this.pixelProjectionMatrix),[o,f]=i,d=t?f:this.height-f;return e.length===2?[o,d]:[o,d,i[2]]}unproject(e,{topLeft:t=!0,targetZ:r}={}){const[i,o,f]=e,d=t?o:this.height-o,m=r&&r*this.distanceScales.unitsPerMeter[2],_=xu([i,d,f],this.pixelUnprojectionMatrix,m),[E,T,C]=this.unprojectPosition(_);return Number.isFinite(f)?[E,T,C]:Number.isFinite(r)?[E,T,r]:[E,T]}projectPosition(e){const[t,r]=this.projectFlat(e),i=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[t,r,i]}unprojectPosition(e){const[t,r]=this.unprojectFlat(e),i=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[t,r,i]}projectFlat(e){if(this.isGeospatial){const t=Eo(e);return t[1]=bo(t[1],-318,830),t}return e}unprojectFlat(e){return this.isGeospatial?ks(e):e}getBounds(e={}){const t={targetZ:e.z||0},r=this.unproject([0,0],t),i=this.unproject([this.width,0],t),o=this.unproject([0,this.height],t),f=this.unproject([this.width,this.height],t);return[Math.min(r[0],i[0],o[0],f[0]),Math.min(r[1],i[1],o[1],f[1]),Math.max(r[0],i[0],o[0],f[0]),Math.max(r[1],i[1],o[1],f[1])]}getDistanceScales(e){return e?jf({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:t,width:r=1,height:i=1}){return e<this.x+this.width&&this.x<e+r&&t<this.y+this.height&&this.y<t+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,vM(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,t){return null}_initProps(e){const t=e.longitude,r=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=J8({latitude:r})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||jf({latitude:r,longitude:t}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:o,modelMatrix:f}=e;let d=nv;if(o&&(d=f?new As(f).transformAsVector(o,[]):o),this.isGeospatial){const m=this.projectPosition([t,r,0]);this.center=new as(d).scale(this.distanceScales.unitsPerMeter).add(m)}else this.center=this.projectPosition(d)}_initMatrices(e){const{viewMatrix:t=bM,projectionMatrix:r=null,orthographic:i=!1,fovyRadians:o,fovy:f=75,near:d=.1,far:m=1e3,padding:_=null,focalDistance:E=1}=e;this.viewMatrixUncentered=t,this.viewMatrix=new As().multiplyRight(t).translate(new as(this.center).negate()),this.projectionMatrix=r||TM({width:this.width,height:this.height,orthographic:i,fovyRadians:o||f*wM,focalDistance:E,padding:_,near:d,far:m});const T=uu();ns(T,T,this.projectionMatrix),ns(T,T,this.viewMatrix),this.viewProjectionMatrix=T,this.viewMatrixInverse=Uf([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=mM(this.viewMatrixInverse);const C=uu(),P=uu();u0(C,C,[this.width/2,-this.height/2,1]),Tu(C,C,[1,-1,0]),ns(P,C,this.viewProjectionMatrix),this.pixelProjectionMatrix=P,this.pixelUnprojectionMatrix=Uf(uu(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Gt.warn("Pixel project matrix not invertible")()}}I(sl,"displayName","Viewport");class XA extends sl{constructor(e={}){const{latitude:t=0,longitude:r=0,zoom:i=0,pitch:o=0,bearing:f=0,nearZMultiplier:d=.1,farZMultiplier:m=1.01,nearZ:_,farZ:E,orthographic:T=!1,projectionMatrix:C,repeat:P=!1,worldOffset:R=0,position:U,padding:j,legacyMeterSizes:G=!1}=e;let{width:Q,height:X,altitude:q=1.5}=e;const ee=Math.pow(2,i);Q=Q||1,X=X||1;let ie,pe=null;if(C)q=C[5]/2,ie=$A(q);else{e.fovy?(ie=e.fovy,q=Ep(ie)):ie=$A(q);let me;if(j){const{top:Ce=0,bottom:ge=0}=j;me=[0,bo((Ce+X-ge)/2,0,X)-X/2]}pe=Mw({width:Q,height:X,scale:ee,center:U&&[0,0,U[2]*xd(t)],offset:me,pitch:o,fovy:ie,nearZMultiplier:d,farZMultiplier:m}),Number.isFinite(_)&&(pe.near=_),Number.isFinite(E)&&(pe.far=E)}let ue=Cw({height:X,pitch:o,bearing:f,scale:ee,altitude:q});R&&(ue=new As().translate([512*R,0,0]).multiplyLeft(ue)),super({...e,width:Q,height:X,viewMatrix:ue,longitude:r,latitude:t,zoom:i,...pe,fovy:ie,focalDistance:q}),I(this,"longitude",void 0),I(this,"latitude",void 0),I(this,"pitch",void 0),I(this,"bearing",void 0),I(this,"altitude",void 0),I(this,"fovy",void 0),I(this,"orthographic",void 0),I(this,"_subViewports",void 0),I(this,"_pseudoMeters",void 0),this.latitude=t,this.longitude=r,this.zoom=i,this.pitch=o,this.bearing=f,this.altitude=q,this.fovy=ie,this.orthographic=T,this._subViewports=P?[]:null,this._pseudoMeters=G,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),t=Math.floor((e[0]+180)/360),r=Math.ceil((e[2]-180)/360);for(let i=t;i<=r;i++){const o=i?new XA({...this,worldOffset:i}):this;this._subViewports.push(o)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[t,r]=this.projectFlat(e),i=(e[2]||0)*xd(e[1]);return[t,r,i]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[t,r]=this.unprojectFlat(e),i=(e[2]||0)/xd(r);return[t,r,i]}addMetersToLngLat(e,t){return Sw(e,t)}panByPosition(e,t){const r=xu(t,this.pixelUnprojectionMatrix),i=this.projectFlat(e),o=Nf([],i,cw([],r)),f=Nf([],this.center,o),[d,m]=this.unprojectFlat(f);return{longitude:d,latitude:m}}getBounds(e={}){const t=Lw(this,e.z||0);return[Math.min(t[0][0],t[1][0],t[2][0],t[3][0]),Math.min(t[0][1],t[1][1],t[2][1],t[3][1]),Math.max(t[0][0],t[1][0],t[2][0],t[3][0]),Math.max(t[0][1],t[1][1],t[2][1],t[3][1])]}fitBounds(e,t={}){const{width:r,height:i}=this,{longitude:o,latitude:f,zoom:d}=xp({width:r,height:i,bounds:e,...t});return new XA({width:r,height:i,longitude:o,latitude:f,zoom:d})}}I(XA,"displayName","WebMercatorViewport");const rv=[0,0,0];function Md(n,e,t=!1){const r=e.projectPosition(n);if(t&&e instanceof XA){const[i,o,f=0]=n,d=e.getDistanceScales([i,o]);r[2]=f*d.unitsPerMeter[2]}return r}function xM(n){const{viewport:e,modelMatrix:t,coordinateOrigin:r}=n;let{coordinateSystem:i,fromCoordinateSystem:o,fromCoordinateOrigin:f}=n;return i===Zt.DEFAULT&&(i=e.isGeospatial?Zt.LNGLAT:Zt.CARTESIAN),o===void 0&&(o=i),f===void 0&&(f=r),{viewport:e,coordinateSystem:i,coordinateOrigin:r,modelMatrix:t,fromCoordinateSystem:o,fromCoordinateOrigin:f}}function kw(n,{viewport:e,modelMatrix:t,coordinateSystem:r,coordinateOrigin:i,offsetMode:o}){let[f,d,m=0]=n;switch(t&&([f,d,m]=Vu([],[f,d,m,1],t)),r){case Zt.LNGLAT:return Md([f,d,m],e,o);case Zt.LNGLAT_OFFSETS:return Md([f+i[0],d+i[1],m+(i[2]||0)],e,o);case Zt.METER_OFFSETS:return Md(Sw(i,[f,d,m]),e,o);case Zt.CARTESIAN:default:return e.isGeospatial?[f+i[0],d+i[1],m+i[2]]:e.projectPosition([f,d,m])}}function SM(n,e){const{viewport:t,coordinateSystem:r,coordinateOrigin:i,modelMatrix:o,fromCoordinateSystem:f,fromCoordinateOrigin:d}=xM(e),{autoOffset:m=!0}=e,{geospatialOrigin:_=rv,shaderCoordinateOrigin:E=rv,offsetMode:T=!1}=m?Ew(t,r,i):{},C=kw(n,{viewport:t,modelMatrix:o,coordinateSystem:f,coordinateOrigin:d,offsetMode:T});if(T){const P=t.projectPosition(_||E);T5(C,C,P)}return C}const iv={blendFunc:[1,0,32771,0],blendEquation:32774};class Iw extends _p{constructor(...e){super(...e),I(this,"pickZ",void 0),I(this,"_colorEncoderState",null)}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:t,views:r,viewports:i,onViewportActive:o,pickingFBO:f,deviceRect:{x:d,y:m,width:_,height:E},cullRect:T,effects:C,pass:P="picking",pickZ:R,moduleParameters:U}){const j=this.gl;this.pickZ=R;const G=this._resetColorEncoder(R),Q=ki(j,{scissorTest:!0,scissor:[d,m,_,E],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...iv,blend:!R},()=>super.render({target:f,layers:e,layerFilter:t,views:r,viewports:i,onViewportActive:o,cullRect:T,effects:C?.filter(q=>q.useInPicking),pass:P,isPicking:!0,moduleParameters:U}));return this._colorEncoderState=null,{decodePickingColor:G&&MM.bind(null,G),stats:Q}}shouldDrawLayer(e){const{pickable:t,operation:r}=e.props;return t&&r.includes("draw")||r.includes("terrain")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,t,r){const i={...e.props.parameters},{pickable:o,operation:f}=e.props;return this._colorEncoderState?o&&f.includes("draw")&&(Object.assign(i,iv),i.blend=!0,i.blendColor=CM(this._colorEncoderState,e,r)):i.blend=!1,f.includes("terrain")&&(i.blend=!1),i}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function CM(n,e,t){const{byLayer:r,byAlpha:i}=n;let o,f=r.get(e);return f?(f.viewports.push(t),o=f.a):(o=r.size+1,o<=255?(f={a:o,layer:e,viewports:[t]},r.set(e,f),i[o]=f):(Gt.warn("Too many pickable layers, only picking the first 255")(),o=0)),[0,0,0,o/255]}function MM(n,e){const t=n.byAlpha[e[3]];return t&&{pickedLayer:t.layer,pickedViewports:t.viewports,pickedObjectIndex:t.layer.decodePickingColor(e)}}const xA={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},Gf=Symbol.for("component"),So=Symbol.for("propTypes"),Ld=Symbol.for("deprecatedProps"),OA=Symbol.for("asyncPropDefaults"),ya=Symbol.for("asyncPropOriginal"),To=Symbol.for("asyncPropResolved");function Sp(n,e=()=>!0){return Array.isArray(n)?Rw(n,e,[]):e(n)?[n]:[]}function Rw(n,e,t){let r=-1;for(;++r<n.length;){const i=n[r];Array.isArray(i)?Rw(i,e,t):e(i)&&t.push(i)}return t}function LM({target:n,source:e,start:t=0,count:r=1}){const i=e.length,o=r*i;let f=0;for(let d=t;f<i;f++)n[d++]=e[f];for(;f<o;)f<o-f?(n.copyWithin(t+f,t,t+f),f*=2):(n.copyWithin(t+f,t,t+o-f),f=o);return n}class PM{constructor(e,t,r){I(this,"id",void 0),I(this,"context",void 0),I(this,"isLoaded",void 0),I(this,"persistent",void 0),I(this,"_loadCount",0),I(this,"_subscribers",new Set),I(this,"_data",void 0),I(this,"_loader",void 0),I(this,"_error",void 0),I(this,"_content",void 0),this.id=e,this.context=r,this.setData(t)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,t){if(e===this._data&&!t)return;this._data=e;const r=++this._loadCount;let i=e;typeof e=="string"&&(i=If(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(o=>{this._loadCount===r&&(this.isLoaded=!0,this._error=void 0,this._content=o)}).catch(o=>{this._loadCount===r&&(this.isLoaded=!0,this._error=o||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const o of this._subscribers)o.onChange(this.getData())}}class kM{constructor({gl:e,protocol:t}){I(this,"protocol",void 0),I(this,"_context",void 0),I(this,"_resources",void 0),I(this,"_consumers",void 0),I(this,"_pruneRequest",void 0),this.protocol=t||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:t,forceUpdate:r=!1,persistent:i=!0}){let o=this._resources[e];o?o.setData(t,r):(o=new PM(e,t,this._context),this._resources[e]=o),o.persistent=i}remove(e){const t=this._resources[e];t&&(t.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const t=this._consumers[e];if(t){for(const r in t){const i=t[r],o=this._resources[i.resourceId];o&&o.unsubscribe(i)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:t,consumerId:r,requestId:i="default"}){const{_resources:o,protocol:f}=this;e.startsWith(f)&&(e=e.replace(f,""),o[e]||this.add({resourceId:e,data:null,persistent:!1}));const d=o[e];if(this._track(r,i,d,t),d)return d.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,t,r,i){const o=this._consumers,f=o[e]=o[e]||{},d=f[t]||{},m=d.resourceId&&this._resources[d.resourceId];m&&(m.unsubscribe(d),this.prune()),r&&(f[t]=d,d.onChange=i,d.resourceId=r.id,r.subscribe(d))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const t=this._resources[e];!t.persistent&&!t.inUse()&&(t.delete(),delete this._resources[e])}}}const IM=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,ol={name:"project32",dependencies:[wp],vs:IM},al={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:#decl":`
uniform bool picking_uAttribute;
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...q5},RM=[wp],OM=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function DM(n){const e=ju.getDefaultProgramManager(n);for(const t of RM)e.addDefaultModule(t);for(const t of OM)e.addShaderHook(t);return e}const FM="layerManager.setLayers",BM="layerManager.activateViewport";class NM{constructor(e,{deck:t,stats:r,viewport:i,timeline:o}={}){I(this,"layers",void 0),I(this,"context",void 0),I(this,"resourceManager",void 0),I(this,"_lastRenderedLayers",[]),I(this,"_needsRedraw",!1),I(this,"_needsUpdate",!1),I(this,"_nextLayers",null),I(this,"_debug",!1),I(this,"activateViewport",f=>{hr(BM,this,f),f&&(this.context.viewport=f)}),this.layers=[],this.resourceManager=new kM({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:t,programManager:e&&DM(e),stats:r||new hp({id:"deck.gl"}),viewport:i||new sl({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new vw,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const r of this.layers){const i=r.getNeedsRedraw(e);t=t||i}return t}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(t=>e.find(r=>t.id.indexOf(r)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,t){hr(FM,this,t,e),this._lastRenderedLayers=e;const r=Sp(e,Boolean);for(const i of r)i.context=this.context;this._updateLayers(this.layers,r)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,t,r){r.raiseError(t,"".concat(e," of ").concat(r))}_updateLayers(e,t){const r={};for(const f of e)r[f.id]?Gt.warn("Multiple old layers with same id ".concat(f.id))():r[f.id]=f;const i=[];this._updateSublayersRecursively(t,r,i),this._finalizeOldLayers(r);let o=!1;for(const f of i)if(f.hasUniformTransition()){o="Uniform transition in ".concat(f);break}this._needsUpdate=o,this.layers=i}_updateSublayersRecursively(e,t,r){for(const i of e){i.context=this.context;const o=t[i.id];o===null&&Gt.warn("Multiple new layers with same id ".concat(i.id))(),t[i.id]=null;let f=null;try{this._debug&&o!==i&&i.validateProps(),o?(this._transferLayerState(o,i),this._updateLayer(i)):this._initializeLayer(i),r.push(i),f=i.isComposite?i.getSubLayers():null}catch(d){this._handleError("matching",d,i)}f&&this._updateSublayersRecursively(f,t,r)}}_finalizeOldLayers(e){for(const t in e){const r=e[t];r&&this._finalizeLayer(r)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=xA.INITIALIZED}catch(t){this._handleError("initialization",t,e)}}_transferLayerState(e,t){t._transferState(e),t.lifecycle=xA.MATCHED,t!==e&&(e.lifecycle=xA.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(t){this._handleError("update",t,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=xA.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=xA.FINALIZED}catch(t){this._handleError("finalization",t,e)}}}function ts(n,e,t){if(n===e)return!0;if(!t||!n||!e)return!1;if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(let r=0;r<n.length;r++)if(!ts(n[r],e[r],t-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof n=="object"&&typeof e=="object"){const r=Object.keys(n),i=Object.keys(e);if(r.length!==i.length)return!1;for(const o of r)if(!e.hasOwnProperty(o)||!ts(n[o],e[o],t-1))return!1;return!0}return!1}class UM{constructor(e){I(this,"width",void 0),I(this,"height",void 0),I(this,"views",void 0),I(this,"viewState",void 0),I(this,"controllers",void 0),I(this,"timeline",void 0),I(this,"_viewports",void 0),I(this,"_viewportMap",void 0),I(this,"_isUpdating",void 0),I(this,"_needsRedraw",void 0),I(this,"_needsUpdate",void 0),I(this,"_eventManager",void 0),I(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const t=this.controllers[e];t&&t.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const t=this.controllers[e];t&&t.updateTransition()}}getViewports(e){return e?this._viewports.filter(t=>t.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(t=>{e[t.id]=t}),e}getView(e){return this.views.find(t=>t.id===e)}getViewState(e){const t=typeof e=="string"?this.getView(e):e,r=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(r):r}getViewport(e){return this._viewportMap[e]}unproject(e,t){const r=this.getViewports(),i={x:e[0],y:e[1]};for(let o=r.length-1;o>=0;--o){const f=r[o];if(f.containsPixel(i)){const d=e.slice();return d[0]-=f.x,d[1]-=f.y,f.unproject(d,t)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,t){(e!==this.width||t!==this.height)&&(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}_setViews(e){e=Sp(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!ts(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):Gt.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,t){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...t,viewId:e})}_createController(e,t){const r=t.type;return new r({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,t.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:o=>{var f;return(f=this.getView(e.id))===null||f===void 0?void 0:f.makeViewport({viewState:o,width:this.width,height:this.height})}})}_updateController(e,t,r,i){const o=e.controller;if(o&&r){const f={...t,...o,id:e.id,x:r.x,y:r.y,width:r.width,height:r.height};return(!i||i.constructor!==o.type)&&(i=this._createController(e,f)),i&&i.setProps(f),i}return null}_rebuildViewports(){const{views:e}=this,t=this.controllers;this._viewports=[],this.controllers={};let r=!1;for(let i=e.length;i--;){const o=e[i],f=this.getViewState(o),d=o.makeViewport({viewState:f,width:this.width,height:this.height});let m=t[o.id];const _=!!o.controller;_&&!m&&(r=!0),(r||!_)&&m&&(m.finalize(),m=null),this.controllers[o.id]=this._updateController(o,f,d,m),d&&this._viewports.unshift(d)}for(const i in t){const o=t[i];o&&!this.controllers[i]&&o.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,t){return e.length!==t.length?!0:e.some((r,i)=>!e[i].equals(t[i]))}}const zM=/([0-9]+\.?[0-9]*)(%|px)/;function mo(n){switch(typeof n){case"number":return{position:n,relative:!1};case"string":const e=zM.exec(n);if(e&&e.length>=3){const t=e[2]==="%",r=parseFloat(e[1]);return{position:t?r/100:r,relative:t}}default:throw new Error("Could not parse position string ".concat(n))}}function vo(n,e){return n.relative?Math.round(n.position*e):n.position}function Jn(n,e){if(!n)throw new Error(e||"deck.gl: assertion failed.")}class ZA{constructor(e){I(this,"id",void 0),I(this,"viewportInstance",void 0),I(this,"_x",void 0),I(this,"_y",void 0),I(this,"_width",void 0),I(this,"_height",void 0),I(this,"_padding",void 0),I(this,"props",void 0);const{id:t,x:r=0,y:i=0,width:o="100%",height:f="100%",padding:d=null,viewportInstance:m}=e||{};Jn(!m||m instanceof sl),this.viewportInstance=m,this.id=t||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=mo(r),this._y=mo(i),this._width=mo(o),this._height=mo(f),this._padding=d&&{left:mo(d.left||0),right:mo(d.right||0),top:mo(d.top||0),bottom:mo(d.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.viewportInstance?e.viewportInstance?this.viewportInstance.equals(e.viewportInstance):!1:this.ViewportType===e.ViewportType&&ts(this.props,e.props,2)}makeViewport({width:e,height:t,viewState:r}){if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);const i=this.getDimensions({width:e,height:t});return!i.height||!i.width?null:new this.ViewportType({...r,...this.props,...i})}getViewStateId(){const{viewState:e}=this.props;return typeof e=="string"?e:e?.id||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const t={...e};for(const r in this.props.viewState)r!=="id"&&(t[r]=this.props.viewState[r]);return t}return e}getDimensions({width:e,height:t}){const r={x:vo(this._x,e),y:vo(this._y,t),width:vo(this._width,e),height:vo(this._height,t)};return this._padding&&(r.padding={left:vo(this._padding.left,e),top:vo(this._padding.top,t),right:vo(this._padding.right,e),bottom:vo(this._padding.bottom,t)}),r}get controller(){const e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:{type:this.ControllerType,...e}:null}}class Hu{constructor(e){I(this,"_inProgress",void 0),I(this,"_handle",void 0),I(this,"_timeline",void 0),I(this,"time",void 0),I(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var t,r;this.cancel(),this.settings=e,this._inProgress=!0,(t=(r=this.settings).onStart)===null||t===void 0||t.call(r,this)}end(){if(this._inProgress){var e,t;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(e=(t=this.settings).onEnd)===null||e===void 0||e.call(t,this)}}cancel(){if(this._inProgress){var e,t;(e=(t=this.settings).onInterrupt)===null||e===void 0||e.call(t,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var e,t;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:r,settings:i}=this;this._handle=r.addChannel({delay:r.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(e=(t=this.settings).onUpdate)===null||e===void 0||e.call(t,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const sv=()=>{},xg={BREAK:1,SNAP_TO_END:2,IGNORE:3},VM=n=>n,jM=xg.BREAK;class GM{constructor(e){I(this,"getControllerState",void 0),I(this,"props",void 0),I(this,"propsInTransition",void 0),I(this,"transition",void 0),I(this,"onViewStateChange",void 0),I(this,"onStateChange",void 0),I(this,"_onTransitionUpdate",t=>{const{time:r,settings:{interpolator:i,startProps:o,endProps:f,duration:d,easing:m}}=t,_=m(r/d),E=i.interpolateProps(o,f,_);this.propsInTransition=this.getControllerState({...this.props,...E}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new Hu(e.timeline),this.onViewStateChange=e.onViewStateChange||sv,this.onStateChange=e.onStateChange||sv}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let t=!1;const r=this.props;if(this.props=e,!r||this._shouldIgnoreViewportChange(r,e))return!1;if(this._isTransitionEnabled(e)){let i=r;if(this.transition.inProgress){const{interruption:o,endProps:f}=this.transition.settings;i={...r,...o===xg.SNAP_TO_END?f:this.propsInTransition||r}}this._triggerTransition(i,e),t=!0}else this.transition.cancel();return t}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:t,transitionInterpolator:r}=e;return(t>0||t==="auto")&&!!r}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,t){return this.transition.inProgress?this.transition.settings.interruption===xg.IGNORE||this._isUpdateDueToCurrentTransition(t):this._isTransitionEnabled(t)?t.transitionInterpolator.arePropsEqual(e,t):!0}_triggerTransition(e,t){const r=this.getControllerState(e),i=this.getControllerState(t).shortestPathFrom(r),o=t.transitionInterpolator,f=o.getDuration?o.getDuration(e,t):t.transitionDuration;if(f===0)return;const d=o.initializeProps(e,i);this.propsInTransition={};const m={duration:f,easing:t.transitionEasing||VM,interpolator:o,interruption:t.transitionInterruption||jM,startProps:d.start,endProps:d.end,onStart:t.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(t.onTransitionInterrupt),onEnd:this._onTransitionEnd(t.onTransitionEnd)};this.transition.start(m),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return t=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e?.(t)}}}class HM{constructor(e){I(this,"_propsToCompare",void 0),I(this,"_propsToExtract",void 0),I(this,"_requiredProps",void 0);const{compare:t,extract:r,required:i}=e;this._propsToCompare=t,this._propsToExtract=r||t,this._requiredProps=i}arePropsEqual(e,t){for(const r of this._propsToCompare)if(!(r in e)||!(r in t)||!Eu(e[r],t[r]))return!1;return!0}initializeProps(e,t){const r={},i={};for(const o of this._propsToExtract)(o in e||o in t)&&(r[o]=e[o],i[o]=t[o]);return this._checkRequiredProps(r),this._checkRequiredProps(i),{start:r,end:i}}getDuration(e,t){return t.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(t=>{const r=e[t];Jn(Number.isFinite(r)||Array.isArray(r),"".concat(t," is required for transition"))})}}const WM=["longitude","latitude","zoom","bearing","pitch"],QM=["longitude","latitude","zoom"];class Ow extends HM{constructor(e={}){const t=Array.isArray(e)?e:e.transitionProps,r=Array.isArray(e)?{}:e;r.transitionProps=Array.isArray(t)?{compare:t,required:t}:t||{compare:WM,required:QM},super(r.transitionProps),I(this,"opts",void 0),this.opts=r}initializeProps(e,t){const r=super.initializeProps(e,t),{makeViewport:i,around:o}=this.opts;if(i&&o){const f=i(e),d=i(t),m=f.unproject(o);r.start.around=o,Object.assign(r.end,{around:d.project(m),aroundPosition:m,width:t.width,height:t.height})}return r}interpolateProps(e,t,r){const i={};for(const o of this._propsToExtract)i[o]=Bf(e[o]||0,t[o]||0,r);if(t.aroundPosition&&this.opts.makeViewport){const o=this.opts.makeViewport({...t,...i});Object.assign(i,o.panByPosition(t.aroundPosition,Bf(e.around,t.around,r)))}return i}}const yo={transitionDuration:0},YM=300,af=n=>1-(1-n)*(1-n),bA={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},ua={};let $M=class{constructor(e){I(this,"props",void 0),I(this,"state",{}),I(this,"transitionManager",void 0),I(this,"eventManager",void 0),I(this,"onViewStateChange",void 0),I(this,"onStateChange",void 0),I(this,"makeViewport",void 0),I(this,"_controllerState",void 0),I(this,"_events",{}),I(this,"_interactionState",{isDragging:!1}),I(this,"_customEvents",[]),I(this,"_eventStartBlocked",null),I(this,"_panMove",!1),I(this,"invertPan",!1),I(this,"dragMode","rotate"),I(this,"inertia",0),I(this,"scrollZoom",!0),I(this,"dragPan",!0),I(this,"dragRotate",!0),I(this,"doubleClickZoom",!0),I(this,"touchZoom",!0),I(this,"touchRotate",!1),I(this,"keyboard",!0),this.transitionManager=new GM({...e,getControllerState:t=>new this.ControllerState(t),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const t in this._events)if(this._events[t]){var e;(e=this.eventManager)===null||e===void 0||e.off(t,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const t=this._eventStartBlocked;switch(e.type){case"panstart":return t?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return t?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return t?!1:this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:t,y:r}=this.props,{offsetCenter:i}=e;return[i.x-t,i.y-r]}isPointInBounds(e,t){const{width:r,height:i}=this.props;if(t&&t.handled)return!1;const o=e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=i;return o&&t&&t.stopPropagation(),o}isFunctionKeyPressed(e){const{srcEvent:t}=e;return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const t=setTimeout(()=>{this._eventStartBlocked===t&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=t}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:t}=e;this.inertia=Number.isFinite(t)?t:t===!0?YM:0;const{scrollZoom:r=!0,dragPan:i=!0,dragRotate:o=!0,doubleClickZoom:f=!0,touchZoom:d=!0,touchRotate:m=!1,keyboard:_=!0}=e,E=!!this.onViewStateChange;this.toggleEvents(bA.WHEEL,E&&r),this.toggleEvents(bA.PAN,E),this.toggleEvents(bA.PINCH,E&&(d||m)),this.toggleEvents(bA.TRIPLE_PAN,E&&m),this.toggleEvents(bA.DOUBLE_TAP,E&&f),this.toggleEvents(bA.KEYBOARD,E&&_),this.scrollZoom=r,this.dragPan=i,this.dragRotate=o,this.doubleClickZoom=f,this.touchZoom=d,this.touchRotate=m,this.keyboard=_}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,t){this.eventManager&&e.forEach(r=>{this._events[r]!==t&&(this._events[r]=t,t?this.eventManager.on(r,this.handleEvent):this.eventManager.off(r,this.handleEvent))})}updateViewport(e,t=null,r={}){const i={...e.getViewportProps(),...t},o=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(r),o){const f=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:f})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;let r=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(r=!r);const i=this.controllerState[r?"panStart":"rotateStart"]({pos:t});return this._panMove=r,this.updateViewport(i,yo,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const t=this.getCenter(e),r=this.controllerState.pan({pos:t});return this.updateViewport(r,yo,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:t}=this;if(this.dragPan&&t&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*t/2,r[1]+e.velocityY*t/2],o=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:af},{isDragging:!1,isPanning:!0})}else{const r=this.controllerState.panEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const t=this.getCenter(e),r=this.controllerState.rotate({pos:t});return this.updateViewport(r,yo,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:t}=this;if(this.dragRotate&&t&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*t/2,r[1]+e.velocityY*t/2],o=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:af},{isDragging:!1,isRotating:!0})}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.srcEvent.preventDefault();const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const{speed:r=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:o}=e;let f=2/(1+Math.exp(-Math.abs(o*r)));o<0&&f!==0&&(f=1/f);const d=this.controllerState.zoom({pos:t,scale:f});return this.updateViewport(d,{...this._getTransitionProps({around:t}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const r=this.controllerState.rotateStart({pos:t});return this.updateViewport(r,yo,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const t=this.getCenter(e);t[0]-=e.deltaX;const r=this.controllerState.rotate({pos:t});return this.updateViewport(r,yo,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this;if(this.touchRotate&&t&&e.velocityY){const r=this.getCenter(e),i=[r[0],r[1]+=e.velocityY*t/2],o=this.controllerState.rotate({pos:i});this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:af},{isDragging:!1,isRotating:!0}),this.blockEvents(t)}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const r=this.controllerState.zoomStart({pos:t}).rotateStart({pos:t});return ua._startPinchRotation=e.rotation,ua._lastPinchEvent=e,this.updateViewport(r,yo,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let t=this.controllerState;if(this.touchZoom){const{scale:r}=e,i=this.getCenter(e);t=t.zoom({pos:i,scale:r})}if(this.touchRotate){const{rotation:r}=e;t=t.rotate({deltaAngleX:ua._startPinchRotation-r})}return this.updateViewport(t,yo,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),ua._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this,{_lastPinchEvent:r}=ua;if(this.touchZoom&&t&&r&&e.scale!==r.scale){const i=this.getCenter(e);let o=this.controllerState.rotateEnd();const f=Math.log2(e.scale),d=(f-Math.log2(r.scale))/(e.deltaTime-r.deltaTime),m=Math.pow(2,f+d*t/2);o=o.zoom({pos:i,scale:m}).zoomEnd(),this.updateViewport(o,{...this._getTransitionProps({around:i}),transitionDuration:t,transitionEasing:af},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(t)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return ua._startPinchRotation=null,ua._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const r=this.isFunctionKeyPressed(e),i=this.controllerState.zoom({pos:t,scale:r?.5:2});return this.updateViewport(i,this._getTransitionProps({around:t}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const t=this.isFunctionKeyPressed(e),{zoomSpeed:r,moveSpeed:i,rotateSpeedX:o,rotateSpeedY:f}=this.keyboard===!0?{}:this.keyboard,{controllerState:d}=this;let m;const _={};switch(e.srcEvent.code){case"Minus":m=t?d.zoomOut(r).zoomOut(r):d.zoomOut(r),_.isZooming=!0;break;case"Equal":m=t?d.zoomIn(r).zoomIn(r):d.zoomIn(r),_.isZooming=!0;break;case"ArrowLeft":t?(m=d.rotateLeft(o),_.isRotating=!0):(m=d.moveLeft(i),_.isPanning=!0);break;case"ArrowRight":t?(m=d.rotateRight(o),_.isRotating=!0):(m=d.moveRight(i),_.isPanning=!0);break;case"ArrowUp":t?(m=d.rotateUp(f),_.isRotating=!0):(m=d.moveUp(i),_.isPanning=!0);break;case"ArrowDown":t?(m=d.rotateDown(f),_.isRotating=!0):(m=d.moveDown(i),_.isPanning=!0);break;default:return!1}return this.updateViewport(m,this._getTransitionProps(),_),!0}_getTransitionProps(e){const{transition:t}=this;return!t||!t.transitionInterpolator?yo:e?{...t,transitionInterpolator:new Ow({...e,...t.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:t}};class XM{constructor(e,t){I(this,"_viewportProps",void 0),I(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=t}getViewportProps(){return this._viewportProps}getState(){return this._state}}const ov=5,ZM=1.2;class qM extends XM{constructor(e){const{width:t,height:r,latitude:i,longitude:o,zoom:f,bearing:d=0,pitch:m=0,altitude:_=1.5,position:E=[0,0,0],maxZoom:T=20,minZoom:C=0,maxPitch:P=60,minPitch:R=0,startPanLngLat:U,startZoomLngLat:j,startRotatePos:G,startBearing:Q,startPitch:X,startZoom:q,normalize:ee=!0}=e;Jn(Number.isFinite(o)),Jn(Number.isFinite(i)),Jn(Number.isFinite(f)),super({width:t,height:r,latitude:i,longitude:o,zoom:f,bearing:d,pitch:m,altitude:_,maxZoom:T,minZoom:C,maxPitch:P,minPitch:R,normalize:ee,position:E},{startPanLngLat:U,startZoomLngLat:j,startRotatePos:G,startBearing:Q,startPitch:X,startZoom:q}),I(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:t}){const r=this.getState().startPanLngLat||this._unproject(t);if(!r)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:r=0}){const{startRotatePos:i,startBearing:o,startPitch:f}=this.getState();if(!i||o===void 0||f===void 0)return this;let d;return e?d=this._getNewRotation(e,i,f,o):d={bearing:o+t,pitch:f+r},this._getUpdatedState(d)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:t,scale:r}){let{startZoom:i,startZoomLngLat:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(t)||this._unproject(e)),!o)return this;const{maxZoom:f,minZoom:d}=this.getViewportProps();let m=i+Math.log2(r);m=bo(m,d,f);const _=this.makeViewport({...this.getViewportProps(),zoom:m});return this._getUpdatedState({zoom:m,..._.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const t=e.getViewportProps(),r={...this.getViewportProps()},{bearing:i,longitude:o}=r;return Math.abs(i-t.bearing)>180&&(r.bearing=i<0?i+360:i-360),Math.abs(o-t.longitude)>180&&(r.longitude=o<0?o+360:o-360),r}applyConstraints(e){const{maxZoom:t,minZoom:r,zoom:i}=e;e.zoom=bo(i,r,t);const{maxPitch:o,minPitch:f,pitch:d}=e;e.pitch=bo(d,f,o);const{normalize:m=!0}=e;return m&&Object.assign(e,rM(e)),e}_zoomFromCenter(e){const{width:t,height:r}=this.getViewportProps();return this.zoom({pos:[t/2,r/2],scale:e})}_panFromCenter(e){const{width:t,height:r}=this.getViewportProps();return this.pan({startPos:[t/2,r/2],pos:[t/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const t=this.makeViewport(this.getViewportProps());return e&&t.unproject(e)}_getNewRotation(e,t,r,i){const o=e[0]-t[0],f=e[1]-t[1],d=e[1],m=t[1],{width:_,height:E}=this.getViewportProps(),T=o/_;let C=0;f>0?Math.abs(E-m)>ov&&(C=f/(m-E)*ZM):f<0&&m>ov&&(C=1-d/m),C=bo(C,-1,1);const{minPitch:P,maxPitch:R}=this.getViewportProps(),U=i+180*T;let j=r;return C>0?j=r+C*(R-r):C<0&&(j=r-C*(P-r)),{pitch:j,bearing:U}}}class KM extends $M{constructor(...e){super(...e),I(this,"ControllerState",qM),I(this,"transition",{transitionDuration:300,transitionInterpolator:new Ow({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),I(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const t=this.props;super.setProps(e),(!t||t.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class Dw extends ZA{get ViewportType(){return XA}get ControllerType(){return KM}}I(Dw,"displayName","MapView");const JM=new Pw;function eL(n,e){var t,r;const i=(t=n.order)!==null&&t!==void 0?t:1/0,o=(r=e.order)!==null&&r!==void 0?r:1/0;return i-o}class tL{constructor(){I(this,"effects",void 0),I(this,"_resolvedEffects",[]),I(this,"_defaultEffects",[]),I(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const t=this._defaultEffects;if(!t.find(r=>r.id===e.id)){const r=t.findIndex(i=>eL(i,e)>0);r<0?t.push(e):t.splice(r,0,e),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(ts(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}getEffects(){return this._resolvedEffects}_setEffects(e){const t={};for(const i of this.effects)t[i.id]=i;const r=[];for(const i of e){const o=t[i.id];o&&o!==i?o.setProps?(o.setProps(i.props),r.push(o)):(o.cleanup(),r.push(i)):r.push(i),delete t[i.id]}for(const i in t)t[i].cleanup();this.effects=r,this._resolvedEffects=r.concat(this._defaultEffects),e.some(i=>i instanceof Pw)||this._resolvedEffects.push(JM),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class nL extends _p{shouldDrawLayer(e){const{operation:t}=e.props;return t.includes("draw")||t.includes("terrain")}}const rL="deckRenderer.renderLayers";class iL{constructor(e){I(this,"gl",void 0),I(this,"layerFilter",void 0),I(this,"drawPickingColors",void 0),I(this,"drawLayersPass",void 0),I(this,"pickLayersPass",void 0),I(this,"renderCount",void 0),I(this,"_needsRedraw",void 0),I(this,"renderBuffers",void 0),I(this,"lastPostProcessEffect",void 0),this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new nL(e),this.pickLayersPass=new Iw(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){if(!e.viewports.length)return;const t=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,r={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e,target:e.target||Bn.getDefaultFramebuffer(this.gl)};r.effects&&this._preRender(r.effects,r);const i=this.lastPostProcessEffect?this.renderBuffers[0]:r.target,o=t.render({...r,target:i});r.effects&&this._postRender(r.effects,r),this.renderCount++,hr(rL,this,o,e)}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}finalize(){const{renderBuffers:e}=this;for(const t of e)t.delete();e.length=0}_preRender(e,t){this.lastPostProcessEffect=null,t.preRenderStats=t.preRenderStats||{};for(const r of e)t.preRenderStats[r.id]=r.preRender(this.gl,t),r.postRender&&(this.lastPostProcessEffect=r.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this;e.length===0&&e.push(new Bn(this.gl),new Bn(this.gl));for(const t of e)t.resize()}_postRender(e,t){const{renderBuffers:r}=this,i={...t,inputBuffer:r[0],swapBuffer:r[1],target:null};for(const o of e)if(o.postRender){if(o.id===this.lastPostProcessEffect){i.target=t.target,o.postRender(this.gl,i);break}const f=o.postRender(this.gl,i);i.inputBuffer=f,i.swapBuffer=f===r[0]?r[1]:r[0]}}}const sL={pickedColor:null,pickedObjectIndex:-1};function oL({pickedColors:n,decodePickingColor:e,deviceX:t,deviceY:r,deviceRadius:i,deviceRect:o}){const{x:f,y:d,width:m,height:_}=o;let E=i*i,T=-1,C=0;for(let P=0;P<_;P++){const R=P+d-r,U=R*R;if(U>E)C+=4*m;else for(let j=0;j<m;j++){if(n[C+3]-1>=0){const Q=j+f-t,X=Q*Q+U;X<=E&&(E=X,T=C)}C+=4}}if(T>=0){const P=n.slice(T,T+4),R=e(P);if(R){const U=Math.floor(T/4/m),j=T/4-U*m;return{...R,pickedColor:P,pickedX:f+j,pickedY:d+U}}Gt.error("Picked non-existent layer. Is picking buffer corrupt?")()}return sL}function aL({pickedColors:n,decodePickingColor:e}){const t=new Map;if(n){for(let r=0;r<n.length;r+=4)if(n[r+3]-1>=0){const o=n.slice(r,r+4),f=o.join(",");if(!t.has(f)){const d=e(o);d?t.set(f,{...d,color:o}):Gt.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(t.values())}function Fw({pickInfo:n,viewports:e,pixelRatio:t,x:r,y:i,z:o}){let f=e[0];e.length>1&&(f=lL(n?.pickedViewports||e,{x:r,y:i}));let d;if(f){const m=[r-f.x,i-f.y];o!==void 0&&(m[2]=o),d=f.unproject(m)}return{color:null,layer:null,viewport:f,index:-1,picked:!1,x:r,y:i,pixel:[r,i],coordinate:d,devicePixel:n&&"pickedX"in n?[n.pickedX,n.pickedY]:void 0,pixelRatio:t}}function AL(n){const{pickInfo:e,lastPickedInfo:t,mode:r,layers:i}=n,{pickedColor:o,pickedLayer:f,pickedObjectIndex:d}=e,m=f?[f]:[];if(r==="hover"){const T=t.index,C=t.layerId,P=f?f.props.id:null;if(P!==C||d!==T){if(P!==C){const R=i.find(U=>U.props.id===C);R&&m.unshift(R)}t.layerId=P,t.index=d,t.info=null}}const _=Fw(n),E=new Map;return E.set(null,_),m.forEach(T=>{let C={..._};T===f&&(C.color=o,C.index=d,C.picked=!0),C=Bw({layer:T,info:C,mode:r});const P=C.layer;T===f&&r==="hover"&&(t.info=C),E.set(P.id,C),r==="hover"&&P.updateAutoHighlight(C)}),E}function Bw({layer:n,info:e,mode:t}){for(;n&&e;){const r=e.layer||null;e.sourceLayer=r,e.layer=n,e=n.getPickingInfo({info:e,mode:t,sourceLayer:r}),n=n.parent}return e}function lL(n,e){for(let t=n.length-1;t>=0;t--){const r=n[t];if(r.containsPixel(e))return r}return n[0]}class uL{constructor(e){I(this,"gl",void 0),I(this,"pickingFBO",void 0),I(this,"depthFBO",void 0),I(this,"pickLayersPass",void 0),I(this,"layerFilter",void 0),I(this,"lastPickedInfo",void 0),I(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new Iw(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:t,layers:r,viewports:i},o=this.lastPickedInfo.info){const f=o&&o.layer&&o.layer.id,d=o&&o.viewport&&o.viewport.id,m=f?r.find(C=>C.id===f):null,_=d&&i.find(C=>C.id===d)||i[0],E=_&&_.unproject([e-_.x,t-_.y]);return{...o,...{x:e,y:t,viewport:_,coordinate:E,layer:m}}}_resizeBuffer(){var e,t;const{gl:r}=this;if(!this.pickingFBO&&(this.pickingFBO=new Bn(r),Bn.isSupported(r,{colorBufferFloat:!0}))){const i=new Bn(r);i.attach({36064:new Zr(r,{format:Ft(r)?34836:6408,type:5126})}),this.depthFBO=i}(e=this.pickingFBO)===null||e===void 0||e.resize({width:r.canvas.width,height:r.canvas.height}),(t=this.depthFBO)===null||t===void 0||t.resize({width:r.canvas.width,height:r.canvas.height})}_getPickable(e){if(this._pickable===!1)return null;const t=e.filter(r=>this.pickLayersPass.shouldDrawLayer(r)&&!r.isComposite);return t.length?t:null}_pickClosestObject({layers:e,views:t,viewports:r,x:i,y:o,radius:f=0,depth:d=1,mode:m="query",unproject3D:_,onViewportActive:E,effects:T}){const C=this._getPickable(e),P=jA(this.gl);if(!C)return{result:[],emptyInfo:Fw({viewports:r,x:i,y:o,pixelRatio:P})};this._resizeBuffer();const R=fd(this.gl,[i,o],!0),U=[R.x+Math.floor(R.width/2),R.y+Math.floor(R.height/2)],j=Math.round(f*P),{width:G,height:Q}=this.pickingFBO,X=this._getPickingRect({deviceX:U[0],deviceY:U[1],deviceRadius:j,deviceWidth:G,deviceHeight:Q}),q={x:i-f,y:o-f,width:f*2+1,height:f*2+1};let ee;const ie=[],pe=new Set;for(let ue=0;ue<d;ue++){let me;if(X){const ge=this._drawAndSample({layers:C,views:t,viewports:r,onViewportActive:E,deviceRect:X,cullRect:q,effects:T,pass:"picking:".concat(m)});me=oL({...ge,deviceX:U[0],deviceY:U[1],deviceRadius:j,deviceRect:X})}else me={pickedColor:null,pickedObjectIndex:-1};let Ce;if(me.pickedLayer&&_&&this.depthFBO){const{pickedColors:ge}=this._drawAndSample({layers:[me.pickedLayer],views:t,viewports:r,onViewportActive:E,deviceRect:{x:me.pickedX,y:me.pickedY,width:1,height:1},cullRect:q,effects:T,pass:"picking:".concat(m,":z")},!0);ge[3]&&(Ce=ge[0])}me.pickedLayer&&ue+1<d&&(pe.add(me.pickedLayer),me.pickedLayer.disablePickingIndex(me.pickedObjectIndex)),ee=AL({pickInfo:me,lastPickedInfo:this.lastPickedInfo,mode:m,layers:C,viewports:r,x:i,y:o,z:Ce,pixelRatio:P});for(const ge of ee.values())ge.layer&&ie.push(ge);if(!me.pickedColor)break}for(const ue of pe)ue.restorePickingColors();return{result:ie,emptyInfo:ee.get(null)}}_pickVisibleObjects({layers:e,views:t,viewports:r,x:i,y:o,width:f=1,height:d=1,mode:m="query",maxObjects:_=null,onViewportActive:E,effects:T}){const C=this._getPickable(e);if(!C)return[];this._resizeBuffer();const P=jA(this.gl),R=fd(this.gl,[i,o],!0),U=R.x,j=R.y+R.height,G=fd(this.gl,[i+f,o+d],!0),Q=G.x+G.width,X=G.y,q={x:U,y:X,width:Q-U,height:j-X},ee=this._drawAndSample({layers:C,views:t,viewports:r,onViewportActive:E,deviceRect:q,cullRect:{x:i,y:o,width:f,height:d},effects:T,pass:"picking:".concat(m)}),ie=aL(ee),pe=new Map,ue=Number.isFinite(_);for(let me=0;me<ie.length&&!(ue&&_&&pe.size>=_);me++){const Ce=ie[me];let ge={color:Ce.pickedColor,layer:null,index:Ce.pickedObjectIndex,picked:!0,x:i,y:o,pixelRatio:P};ge=Bw({layer:Ce.pickedLayer,info:ge,mode:m}),pe.has(ge.object)||pe.set(ge.object,ge)}return Array.from(pe.values())}_drawAndSample({layers:e,views:t,viewports:r,onViewportActive:i,deviceRect:o,cullRect:f,effects:d,pass:m},_=!1){const E=_?this.depthFBO:this.pickingFBO,T={layers:e,layerFilter:this.layerFilter,views:t,viewports:r,onViewportActive:i,pickingFBO:E,deviceRect:o,cullRect:f,effects:d,pass:m,pickZ:_,preRenderStats:{}};for(const Q of d)Q.useInPicking&&(T.preRenderStats[Q.id]=Q.preRender(this.gl,T));const{decodePickingColor:C}=this.pickLayersPass.render(T),{x:P,y:R,width:U,height:j}=o,G=new(_?Float32Array:Uint8Array)(U*j*4);return l0(E,{sourceX:P,sourceY:R,sourceWidth:U,sourceHeight:j,target:G}),{pickedColors:G,decodePickingColor:C}}_getPickingRect({deviceX:e,deviceY:t,deviceRadius:r,deviceWidth:i,deviceHeight:o}){const f=Math.max(0,e-r),d=Math.max(0,t-r),m=Math.min(i,e+r+1)-f,_=Math.min(o,t+r+1)-d;return m<=0||_<=0?null:{x:f,y:d,width:m,height:_}}}const cL={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class fL{constructor(e){I(this,"el",null),I(this,"isVisible",!1);const t=e.parentElement;t&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,cL),t.appendChild(this.el))}setTooltip(e,t,r){const i=this.el;if(i){if(typeof e=="string")i.innerText=e;else if(e)e.text&&(i.innerText=e.text),e.html&&(i.innerHTML=e.html),e.className&&(i.className=e.className);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(t,"px, ").concat(r,"px)"),e&&typeof e=="object"&&"style"in e&&Object.assign(i.style,e.style)}}remove(){this.el&&(this.el.remove(),this.el=null)}}var Pd={exports:{}};var av;function hL(){return av||(av=1,(function(n){(function(e,t,r,i){var o=["","webkit","Moz","MS","ms","o"],f=t.createElement("div"),d="function",m=Math.round,_=Math.abs,E=Date.now;function T(D,B,$){return setTimeout(X(D,$),B)}function C(D,B,$){return Array.isArray(D)?(P(D,$[B],$),!0):!1}function P(D,B,$){var ce;if(D)if(D.forEach)D.forEach(B,$);else if(D.length!==i)for(ce=0;ce<D.length;)B.call($,D[ce],ce,D),ce++;else for(ce in D)D.hasOwnProperty(ce)&&B.call($,D[ce],ce,D)}function R(D,B,$){var ce="DEPRECATED METHOD: "+B+`
`+$+` AT 
`;return function(){var we=new Error("get-stack-trace"),Ve=we&&we.stack?we.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",$e=e.console&&(e.console.warn||e.console.log);return $e&&$e.call(e.console,ce,Ve),D.apply(this,arguments)}}var U;typeof Object.assign!="function"?U=function(B){if(B===i||B===null)throw new TypeError("Cannot convert undefined or null to object");for(var $=Object(B),ce=1;ce<arguments.length;ce++){var we=arguments[ce];if(we!==i&&we!==null)for(var Ve in we)we.hasOwnProperty(Ve)&&($[Ve]=we[Ve])}return $}:U=Object.assign;var j=R(function(B,$,ce){for(var we=Object.keys($),Ve=0;Ve<we.length;)(!ce||ce&&B[we[Ve]]===i)&&(B[we[Ve]]=$[we[Ve]]),Ve++;return B},"extend","Use `assign`."),G=R(function(B,$){return j(B,$,!0)},"merge","Use `assign`.");function Q(D,B,$){var ce=B.prototype,we;we=D.prototype=Object.create(ce),we.constructor=D,we._super=ce,$&&U(we,$)}function X(D,B){return function(){return D.apply(B,arguments)}}function q(D,B){return typeof D==d?D.apply(B&&B[0]||i,B):D}function ee(D,B){return D===i?B:D}function ie(D,B,$){P(Ce(B),function(ce){D.addEventListener(ce,$,!1)})}function pe(D,B,$){P(Ce(B),function(ce){D.removeEventListener(ce,$,!1)})}function ue(D,B){for(;D;){if(D==B)return!0;D=D.parentNode}return!1}function me(D,B){return D.indexOf(B)>-1}function Ce(D){return D.trim().split(/\s+/g)}function ge(D,B,$){if(D.indexOf&&!$)return D.indexOf(B);for(var ce=0;ce<D.length;){if($&&D[ce][$]==B||!$&&D[ce]===B)return ce;ce++}return-1}function ke(D){return Array.prototype.slice.call(D,0)}function Me(D,B,$){for(var ce=[],we=[],Ve=0;Ve<D.length;){var $e=D[Ve][B];ge(we,$e)<0&&ce.push(D[Ve]),we[Ve]=$e,Ve++}return ce=ce.sort(function(ln,mn){return ln[B]>mn[B]}),ce}function ze(D,B){for(var $,ce,we=B[0].toUpperCase()+B.slice(1),Ve=0;Ve<o.length;){if($=o[Ve],ce=$?$+we:B,ce in D)return ce;Ve++}return i}var We=1;function tt(){return We++}function _t(D){var B=D.ownerDocument||D;return B.defaultView||B.parentWindow||e}var De=/mobile|tablet|ip(ad|hone|od)|android/i,Qe="ontouchstart"in e,K=ze(e,"PointerEvent")!==i,ye=Qe&&De.test(navigator.userAgent),Ye="touch",Mt="pen",wt="mouse",zt="kinect",kt=25,gt=1,Ct=2,Se=4,at=8,xt=1,Ee=2,Kt=4,It=8,An=16,$t=Ee|Kt,Jt=It|An,Er=$t|Jt,zs=["x","y"],qr=["clientX","clientY"];function Xt(D,B){var $=this;this.manager=D,this.callback=B,this.element=D.element,this.target=D.options.inputTarget,this.domHandler=function(ce){q(D.options.enable,[D])&&$.handler(ce)},this.init()}Xt.prototype={handler:function(){},init:function(){this.evEl&&ie(this.element,this.evEl,this.domHandler),this.evTarget&&ie(this.target,this.evTarget,this.domHandler),this.evWin&&ie(_t(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&pe(this.element,this.evEl,this.domHandler),this.evTarget&&pe(this.target,this.evTarget,this.domHandler),this.evWin&&pe(_t(this.element),this.evWin,this.domHandler)}};function cs(D){var B,$=D.options.inputClass;return $?B=$:K?B=Gs:ye?B=le:Qe?B=u:B=Oi,new B(D,Po)}function Po(D,B,$){var ce=$.pointers.length,we=$.changedPointers.length,Ve=B&gt&&ce-we===0,$e=B&(Se|at)&&ce-we===0;$.isFirst=!!Ve,$.isFinal=!!$e,Ve&&(D.session={}),$.eventType=B,pi(D,$),D.emit("hammer.input",$),D.recognize($),D.session.prevInput=$}function pi(D,B){var $=D.session,ce=B.pointers,we=ce.length;$.firstInput||($.firstInput=js(B)),we>1&&!$.firstMultiple?$.firstMultiple=js(B):we===1&&($.firstMultiple=!1);var Ve=$.firstInput,$e=$.firstMultiple,on=$e?$e.center:Ve.center,ln=B.center=Ii(ce);B.timeStamp=E(),B.deltaTime=B.timeStamp-Ve.timeStamp,B.angle=Io(on,ln),B.distance=Kr(on,ln),Vs($,B),B.offsetDirection=Ri(B.deltaX,B.deltaY);var mn=ko(B.deltaTime,B.deltaX,B.deltaY);B.overallVelocityX=mn.x,B.overallVelocityY=mn.y,B.overallVelocity=_(mn.x)>_(mn.y)?mn.x:mn.y,B.scale=$e?Oa($e.pointers,ce):1,B.rotation=$e?Ra($e.pointers,ce):0,B.maxPointers=$.prevInput?B.pointers.length>$.prevInput.maxPointers?B.pointers.length:$.prevInput.maxPointers:B.pointers.length,Ia($,B);var En=D.element;ue(B.srcEvent.target,En)&&(En=B.srcEvent.target),B.target=En}function Vs(D,B){var $=B.center,ce=D.offsetDelta||{},we=D.prevDelta||{},Ve=D.prevInput||{};(B.eventType===gt||Ve.eventType===Se)&&(we=D.prevDelta={x:Ve.deltaX||0,y:Ve.deltaY||0},ce=D.offsetDelta={x:$.x,y:$.y}),B.deltaX=we.x+($.x-ce.x),B.deltaY=we.y+($.y-ce.y)}function Ia(D,B){var $=D.lastInterval||B,ce=B.timeStamp-$.timeStamp,we,Ve,$e,on;if(B.eventType!=at&&(ce>kt||$.velocity===i)){var ln=B.deltaX-$.deltaX,mn=B.deltaY-$.deltaY,En=ko(ce,ln,mn);Ve=En.x,$e=En.y,we=_(En.x)>_(En.y)?En.x:En.y,on=Ri(ln,mn),D.lastInterval=B}else we=$.velocity,Ve=$.velocityX,$e=$.velocityY,on=$.direction;B.velocity=we,B.velocityX=Ve,B.velocityY=$e,B.direction=on}function js(D){for(var B=[],$=0;$<D.pointers.length;)B[$]={clientX:m(D.pointers[$].clientX),clientY:m(D.pointers[$].clientY)},$++;return{timeStamp:E(),pointers:B,center:Ii(B),deltaX:D.deltaX,deltaY:D.deltaY}}function Ii(D){var B=D.length;if(B===1)return{x:m(D[0].clientX),y:m(D[0].clientY)};for(var $=0,ce=0,we=0;we<B;)$+=D[we].clientX,ce+=D[we].clientY,we++;return{x:m($/B),y:m(ce/B)}}function ko(D,B,$){return{x:B/D||0,y:$/D||0}}function Ri(D,B){return D===B?xt:_(D)>=_(B)?D<0?Ee:Kt:B<0?It:An}function Kr(D,B,$){$||($=zs);var ce=B[$[0]]-D[$[0]],we=B[$[1]]-D[$[1]];return Math.sqrt(ce*ce+we*we)}function Io(D,B,$){$||($=zs);var ce=B[$[0]]-D[$[0]],we=B[$[1]]-D[$[1]];return Math.atan2(we,ce)*180/Math.PI}function Ra(D,B){return Io(B[1],B[0],qr)+Io(D[1],D[0],qr)}function Oa(D,B){return Kr(B[0],B[1],qr)/Kr(D[0],D[1],qr)}var ll={mousedown:gt,mousemove:Ct,mouseup:Se},fs="mousedown",Ro="mousemove mouseup";function Oi(){this.evEl=fs,this.evWin=Ro,this.pressed=!1,Xt.apply(this,arguments)}Q(Oi,Xt,{handler:function(B){var $=ll[B.type];$&gt&&B.button===0&&(this.pressed=!0),$&Ct&&B.which!==1&&($=Se),this.pressed&&($&Se&&(this.pressed=!1),this.callback(this.manager,$,{pointers:[B],changedPointers:[B],pointerType:wt,srcEvent:B}))}});var Te={pointerdown:gt,pointermove:Ct,pointerup:Se,pointercancel:at,pointerout:at},Oo={2:Ye,3:Mt,4:wt,5:zt},Jr="pointerdown",mi="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Jr="MSPointerDown",mi="MSPointerMove MSPointerUp MSPointerCancel");function Gs(){this.evEl=Jr,this.evWin=mi,Xt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}Q(Gs,Xt,{handler:function(B){var $=this.store,ce=!1,we=B.type.toLowerCase().replace("ms",""),Ve=Te[we],$e=Oo[B.pointerType]||B.pointerType,on=$e==Ye,ln=ge($,B.pointerId,"pointerId");Ve&gt&&(B.button===0||on)?ln<0&&($.push(B),ln=$.length-1):Ve&(Se|at)&&(ce=!0),!(ln<0)&&($[ln]=B,this.callback(this.manager,Ve,{pointers:$,changedPointers:[B],pointerType:$e,srcEvent:B}),ce&&$.splice(ln,1))}});var Hs={touchstart:gt,touchmove:Ct,touchend:Se,touchcancel:at},Do="touchstart",Fo="touchstart touchmove touchend touchcancel";function Ws(){this.evTarget=Do,this.evWin=Fo,this.started=!1,Xt.apply(this,arguments)}Q(Ws,Xt,{handler:function(B){var $=Hs[B.type];if($===gt&&(this.started=!0),!!this.started){var ce=Di.call(this,B,$);$&(Se|at)&&ce[0].length-ce[1].length===0&&(this.started=!1),this.callback(this.manager,$,{pointers:ce[0],changedPointers:ce[1],pointerType:Ye,srcEvent:B})}}});function Di(D,B){var $=ke(D.touches),ce=ke(D.changedTouches);return B&(Se|at)&&($=Me($.concat(ce),"identifier")),[$,ce]}var Qs={touchstart:gt,touchmove:Ct,touchend:Se,touchcancel:at},Tr="touchstart touchmove touchend touchcancel";function le(){this.evTarget=Tr,this.targetIds={},Xt.apply(this,arguments)}Q(le,Xt,{handler:function(B){var $=Qs[B.type],ce=ve.call(this,B,$);ce&&this.callback(this.manager,$,{pointers:ce[0],changedPointers:ce[1],pointerType:Ye,srcEvent:B})}});function ve(D,B){var $=ke(D.touches),ce=this.targetIds;if(B&(gt|Ct)&&$.length===1)return ce[$[0].identifier]=!0,[$,$];var we,Ve,$e=ke(D.changedTouches),on=[],ln=this.target;if(Ve=$.filter(function(mn){return ue(mn.target,ln)}),B===gt)for(we=0;we<Ve.length;)ce[Ve[we].identifier]=!0,we++;for(we=0;we<$e.length;)ce[$e[we].identifier]&&on.push($e[we]),B&(Se|at)&&delete ce[$e[we].identifier],we++;if(on.length)return[Me(Ve.concat(on),"identifier"),on]}var Be=2500,rt=25;function u(){Xt.apply(this,arguments);var D=X(this.handler,this);this.touch=new le(this.manager,D),this.mouse=new Oi(this.manager,D),this.primaryTouch=null,this.lastTouches=[]}Q(u,Xt,{handler:function(B,$,ce){var we=ce.pointerType==Ye,Ve=ce.pointerType==wt;if(!(Ve&&ce.sourceCapabilities&&ce.sourceCapabilities.firesTouchEvents)){if(we)N.call(this,$,ce);else if(Ve&&Nt.call(this,ce))return;this.callback(B,$,ce)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function N(D,B){D&gt?(this.primaryTouch=B.changedPointers[0].identifier,Lt.call(this,B)):D&(Se|at)&&Lt.call(this,B)}function Lt(D){var B=D.changedPointers[0];if(B.identifier===this.primaryTouch){var $={x:B.clientX,y:B.clientY};this.lastTouches.push($);var ce=this.lastTouches,we=function(){var Ve=ce.indexOf($);Ve>-1&&ce.splice(Ve,1)};setTimeout(we,Be)}}function Nt(D){for(var B=D.srcEvent.clientX,$=D.srcEvent.clientY,ce=0;ce<this.lastTouches.length;ce++){var we=this.lastTouches[ce],Ve=Math.abs(B-we.x),$e=Math.abs($-we.y);if(Ve<=rt&&$e<=rt)return!0}return!1}var fn=ze(f.style,"touchAction"),Et=fn!==i,Tt="compute",xr="auto",Rt="manipulation",lt="none",bn="pan-x",Or="pan-y",hs=Bi();function Fi(D,B){this.manager=D,this.set(B)}Fi.prototype={set:function(D){D==Tt&&(D=this.compute()),Et&&this.manager.element.style&&hs[D]&&(this.manager.element.style[fn]=D),this.actions=D.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var D=[];return P(this.manager.recognizers,function(B){q(B.options.enable,[B])&&(D=D.concat(B.getTouchAction()))}),tr(D.join(" "))},preventDefaults:function(D){var B=D.srcEvent,$=D.offsetDirection;if(this.manager.session.prevented){B.preventDefault();return}var ce=this.actions,we=me(ce,lt)&&!hs[lt],Ve=me(ce,Or)&&!hs[Or],$e=me(ce,bn)&&!hs[bn];if(we){var on=D.pointers.length===1,ln=D.distance<2,mn=D.deltaTime<250;if(on&&ln&&mn)return}if(!($e&&Ve)&&(we||Ve&&$&$t||$e&&$&Jt))return this.preventSrc(B)},preventSrc:function(D){this.manager.session.prevented=!0,D.preventDefault()}};function tr(D){if(me(D,lt))return lt;var B=me(D,bn),$=me(D,Or);return B&&$?lt:B||$?B?bn:Or:me(D,Rt)?Rt:xr}function Bi(){if(!Et)return!1;var D={},B=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function($){D[$]=B?e.CSS.supports("touch-action",$):!0}),D}var Ot=1,Nn=2,ei=4,Mn=8,it=Mn,V=16,Ze=32;function Xn(D){this.options=U({},this.defaults,D||{}),this.id=tt(),this.manager=null,this.options.enable=ee(this.options.enable,!0),this.state=Ot,this.simultaneous={},this.requireFail=[]}Xn.prototype={defaults:{},set:function(D){return U(this.options,D),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(D){if(C(D,"recognizeWith",this))return this;var B=this.simultaneous;return D=Un(D,this),B[D.id]||(B[D.id]=D,D.recognizeWith(this)),this},dropRecognizeWith:function(D){return C(D,"dropRecognizeWith",this)?this:(D=Un(D,this),delete this.simultaneous[D.id],this)},requireFailure:function(D){if(C(D,"requireFailure",this))return this;var B=this.requireFail;return D=Un(D,this),ge(B,D)===-1&&(B.push(D),D.requireFailure(this)),this},dropRequireFailure:function(D){if(C(D,"dropRequireFailure",this))return this;D=Un(D,this);var B=ge(this.requireFail,D);return B>-1&&this.requireFail.splice(B,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(D){return!!this.simultaneous[D.id]},emit:function(D){var B=this,$=this.state;function ce(we){B.manager.emit(we,D)}$<Mn&&ce(B.options.event+gr($)),ce(B.options.event),D.additionalEvent&&ce(D.additionalEvent),$>=Mn&&ce(B.options.event+gr($))},tryEmit:function(D){if(this.canEmit())return this.emit(D);this.state=Ze},canEmit:function(){for(var D=0;D<this.requireFail.length;){if(!(this.requireFail[D].state&(Ze|Ot)))return!1;D++}return!0},recognize:function(D){var B=U({},D);if(!q(this.options.enable,[this,B])){this.reset(),this.state=Ze;return}this.state&(it|V|Ze)&&(this.state=Ot),this.state=this.process(B),this.state&(Nn|ei|Mn|V)&&this.tryEmit(B)},process:function(D){},getTouchAction:function(){},reset:function(){}};function gr(D){return D&V?"cancel":D&Mn?"end":D&ei?"move":D&Nn?"start":""}function Da(D){return D==An?"down":D==It?"up":D==Ee?"left":D==Kt?"right":""}function Un(D,B){var $=B.manager;return $?$.get(D):D}function pr(){Xn.apply(this,arguments)}Q(pr,Xn,{defaults:{pointers:1},attrTest:function(D){var B=this.options.pointers;return B===0||D.pointers.length===B},process:function(D){var B=this.state,$=D.eventType,ce=B&(Nn|ei),we=this.attrTest(D);return ce&&($&at||!we)?B|V:ce||we?$&Se?B|Mn:B&Nn?B|ei:Nn:Ze}});function F(){pr.apply(this,arguments),this.pX=null,this.pY=null}Q(F,pr,{defaults:{event:"pan",threshold:10,pointers:1,direction:Er},getTouchAction:function(){var D=this.options.direction,B=[];return D&$t&&B.push(Or),D&Jt&&B.push(bn),B},directionTest:function(D){var B=this.options,$=!0,ce=D.distance,we=D.direction,Ve=D.deltaX,$e=D.deltaY;return we&B.direction||(B.direction&$t?(we=Ve===0?xt:Ve<0?Ee:Kt,$=Ve!=this.pX,ce=Math.abs(D.deltaX)):(we=$e===0?xt:$e<0?It:An,$=$e!=this.pY,ce=Math.abs(D.deltaY))),D.direction=we,$&&ce>B.threshold&&we&B.direction},attrTest:function(D){return pr.prototype.attrTest.call(this,D)&&(this.state&Nn||!(this.state&Nn)&&this.directionTest(D))},emit:function(D){this.pX=D.deltaX,this.pY=D.deltaY;var B=Da(D.direction);B&&(D.additionalEvent=this.options.event+B),this._super.emit.call(this,D)}});function Bo(){pr.apply(this,arguments)}Q(Bo,pr,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[lt]},attrTest:function(D){return this._super.attrTest.call(this,D)&&(Math.abs(D.scale-1)>this.options.threshold||this.state&Nn)},emit:function(D){if(D.scale!==1){var B=D.scale<1?"in":"out";D.additionalEvent=this.options.event+B}this._super.emit.call(this,D)}});function Ni(){Xn.apply(this,arguments),this._timer=null,this._input=null}Q(Ni,Xn,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[xr]},process:function(D){var B=this.options,$=D.pointers.length===B.pointers,ce=D.distance<B.threshold,we=D.deltaTime>B.time;if(this._input=D,!ce||!$||D.eventType&(Se|at)&&!we)this.reset();else if(D.eventType&gt)this.reset(),this._timer=T(function(){this.state=it,this.tryEmit()},B.time,this);else if(D.eventType&Se)return it;return Ze},reset:function(){clearTimeout(this._timer)},emit:function(D){this.state===it&&(D&&D.eventType&Se?this.manager.emit(this.options.event+"up",D):(this._input.timeStamp=E(),this.manager.emit(this.options.event,this._input)))}});function Ui(){pr.apply(this,arguments)}Q(Ui,pr,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[lt]},attrTest:function(D){return this._super.attrTest.call(this,D)&&(Math.abs(D.rotation)>this.options.threshold||this.state&Nn)}});function vi(){pr.apply(this,arguments)}Q(vi,pr,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:$t|Jt,pointers:1},getTouchAction:function(){return F.prototype.getTouchAction.call(this)},attrTest:function(D){var B=this.options.direction,$;return B&($t|Jt)?$=D.overallVelocity:B&$t?$=D.overallVelocityX:B&Jt&&($=D.overallVelocityY),this._super.attrTest.call(this,D)&&B&D.offsetDirection&&D.distance>this.options.threshold&&D.maxPointers==this.options.pointers&&_($)>this.options.velocity&&D.eventType&Se},emit:function(D){var B=Da(D.offsetDirection);B&&this.manager.emit(this.options.event+B,D),this.manager.emit(this.options.event,D)}});function yi(){Xn.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}Q(yi,Xn,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Rt]},process:function(D){var B=this.options,$=D.pointers.length===B.pointers,ce=D.distance<B.threshold,we=D.deltaTime<B.time;if(this.reset(),D.eventType&gt&&this.count===0)return this.failTimeout();if(ce&&we&&$){if(D.eventType!=Se)return this.failTimeout();var Ve=this.pTime?D.timeStamp-this.pTime<B.interval:!0,$e=!this.pCenter||Kr(this.pCenter,D.center)<B.posThreshold;this.pTime=D.timeStamp,this.pCenter=D.center,!$e||!Ve?this.count=1:this.count+=1,this._input=D;var on=this.count%B.taps;if(on===0)return this.hasRequireFailures()?(this._timer=T(function(){this.state=it,this.tryEmit()},B.interval,this),Nn):it}return Ze},failTimeout:function(){return this._timer=T(function(){this.state=Ze},this.options.interval,this),Ze},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==it&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function ti(D,B){return B=B||{},B.recognizers=ee(B.recognizers,ti.defaults.preset),new gs(D,B)}ti.VERSION="2.0.7",ti.defaults={domEvents:!1,touchAction:Tt,enable:!0,inputTarget:null,inputClass:null,preset:[[Ui,{enable:!1}],[Bo,{enable:!1},["rotate"]],[vi,{direction:$t}],[F,{direction:$t},["swipe"]],[yi],[yi,{event:"doubletap",taps:2},["tap"]],[Ni]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Fa=1,ds=2;function gs(D,B){this.options=U({},ti.defaults,B||{}),this.options.inputTarget=this.options.inputTarget||D,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=D,this.input=cs(this),this.touchAction=new Fi(this,this.options.touchAction),nr(this,!0),P(this.options.recognizers,function($){var ce=this.add(new $[0]($[1]));$[2]&&ce.recognizeWith($[2]),$[3]&&ce.requireFailure($[3])},this)}gs.prototype={set:function(D){return U(this.options,D),D.touchAction&&this.touchAction.update(),D.inputTarget&&(this.input.destroy(),this.input.target=D.inputTarget,this.input.init()),this},stop:function(D){this.session.stopped=D?ds:Fa},recognize:function(D){var B=this.session;if(!B.stopped){this.touchAction.preventDefaults(D);var $,ce=this.recognizers,we=B.curRecognizer;(!we||we&&we.state&it)&&(we=B.curRecognizer=null);for(var Ve=0;Ve<ce.length;)$=ce[Ve],B.stopped!==ds&&(!we||$==we||$.canRecognizeWith(we))?$.recognize(D):$.reset(),!we&&$.state&(Nn|ei|Mn)&&(we=B.curRecognizer=$),Ve++}},get:function(D){if(D instanceof Xn)return D;for(var B=this.recognizers,$=0;$<B.length;$++)if(B[$].options.event==D)return B[$];return null},add:function(D){if(C(D,"add",this))return this;var B=this.get(D.options.event);return B&&this.remove(B),this.recognizers.push(D),D.manager=this,this.touchAction.update(),D},remove:function(D){if(C(D,"remove",this))return this;if(D=this.get(D),D){var B=this.recognizers,$=ge(B,D);$!==-1&&(B.splice($,1),this.touchAction.update())}return this},on:function(D,B){if(D!==i&&B!==i){var $=this.handlers;return P(Ce(D),function(ce){$[ce]=$[ce]||[],$[ce].push(B)}),this}},off:function(D,B){if(D!==i){var $=this.handlers;return P(Ce(D),function(ce){B?$[ce]&&$[ce].splice(ge($[ce],B),1):delete $[ce]}),this}},emit:function(D,B){this.options.domEvents&&rn(D,B);var $=this.handlers[D]&&this.handlers[D].slice();if(!(!$||!$.length)){B.type=D,B.preventDefault=function(){B.srcEvent.preventDefault()};for(var ce=0;ce<$.length;)$[ce](B),ce++}},destroy:function(){this.element&&nr(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function nr(D,B){var $=D.element;if($.style){var ce;P(D.options.cssProps,function(we,Ve){ce=ze($.style,Ve),B?(D.oldCssProps[ce]=$.style[ce],$.style[ce]=we):$.style[ce]=D.oldCssProps[ce]||""}),B||(D.oldCssProps={})}}function rn(D,B){var $=t.createEvent("Event");$.initEvent(D,!0,!0),$.gesture=B,B.target.dispatchEvent($)}U(ti,{INPUT_START:gt,INPUT_MOVE:Ct,INPUT_END:Se,INPUT_CANCEL:at,STATE_POSSIBLE:Ot,STATE_BEGAN:Nn,STATE_CHANGED:ei,STATE_ENDED:Mn,STATE_RECOGNIZED:it,STATE_CANCELLED:V,STATE_FAILED:Ze,DIRECTION_NONE:xt,DIRECTION_LEFT:Ee,DIRECTION_RIGHT:Kt,DIRECTION_UP:It,DIRECTION_DOWN:An,DIRECTION_HORIZONTAL:$t,DIRECTION_VERTICAL:Jt,DIRECTION_ALL:Er,Manager:gs,Input:Xt,TouchAction:Fi,TouchInput:le,MouseInput:Oi,PointerEventInput:Gs,TouchMouseInput:u,SingleTouchInput:Ws,Recognizer:Xn,AttrRecognizer:pr,Tap:yi,Pan:F,Swipe:vi,Pinch:Bo,Rotate:Ui,Press:Ni,on:ie,off:pe,each:P,merge:G,extend:j,assign:U,inherit:Q,bindFn:X,prefixed:ze});var No=typeof e<"u"?e:typeof self<"u"?self:{};No.Hammer=ti,n.exports?n.exports=ti:e[r]=ti})(window,document,"Hammer")})(Pd)),Pd.exports}var c0=hL();const Zi=CE({__proto__:null},[c0]),Nw=1,Uw=2,Sg=4,dL={mousedown:Nw,mousemove:Uw,mouseup:Sg};function gL(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return!0;return!1}function pL(n){const e=n.prototype.handler;n.prototype.handler=function(r){const i=this.store;r.button>0&&r.type==="pointerdown"&&(gL(i,o=>o.pointerId===r.pointerId)||i.push(r)),e.call(this,r)}}function mL(n){n.prototype.handler=function(t){let r=dL[t.type];r&Nw&&t.button>=0&&(this.pressed=!0),r&Uw&&t.which===0&&(r=Sg),this.pressed&&(r&Sg&&(this.pressed=!1),this.callback(this.manager,r,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}}pL(c0.PointerEventInput);mL(c0.MouseInput);const vL=c0.Manager;class f0{constructor(e,t,r){this.element=e,this.callback=t,this.options={enable:!0,...r}}}const yL=Zi?[[Zi.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Zi.Rotate,{enable:!1}],[Zi.Pinch,{enable:!1}],[Zi.Swipe,{enable:!1}],[Zi.Pan,{threshold:0,enable:!1}],[Zi.Press,{enable:!1}],[Zi.Tap,{event:"doubletap",taps:2,enable:!1}],[Zi.Tap,{event:"anytap",enable:!1}],[Zi.Tap,{enable:!1}]]:null,Av={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},_L={doubletap:["tap"]},wL={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},Cp={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},bL={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},lv={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},EL=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",MA=typeof window<"u"?window:global;let Cg=!1;try{const n={get passive(){return Cg=!0,!0}};MA.addEventListener("test",null,n),MA.removeEventListener("test",null)}catch{Cg=!1}const TL=EL.indexOf("firefox")!==-1,{WHEEL_EVENTS:xL}=Cp,uv="wheel",cv=4.000244140625,SL=40,CL=.25;class ML extends f0{constructor(e,t,r){super(e,t,r),this.handleEvent=i=>{if(!this.options.enable)return;let o=i.deltaY;MA.WheelEvent&&(TL&&i.deltaMode===MA.WheelEvent.DOM_DELTA_PIXEL&&(o/=MA.devicePixelRatio),i.deltaMode===MA.WheelEvent.DOM_DELTA_LINE&&(o*=SL)),o!==0&&o%cv===0&&(o=Math.floor(o/cv)),i.shiftKey&&o&&(o=o*CL),this.callback({type:uv,center:{x:i.clientX,y:i.clientY},delta:-o,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat(xL),this.events.forEach(i=>e.addEventListener(i,this.handleEvent,Cg?{passive:!1}:!1))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===uv&&(this.options.enable=t)}}const{MOUSE_EVENTS:LL}=Cp,fv="pointermove",hv="pointerover",dv="pointerout",gv="pointerenter",pv="pointerleave";class PL extends f0{constructor(e,t,r){super(e,t,r),this.handleEvent=o=>{this.handleOverEvent(o),this.handleOutEvent(o),this.handleEnterEvent(o),this.handleLeaveEvent(o),this.handleMoveEvent(o)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(LL),this.events.forEach(o=>e.addEventListener(o,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===fv&&(this.enableMoveEvent=t),e===hv&&(this.enableOverEvent=t),e===dv&&(this.enableOutEvent=t),e===gv&&(this.enableEnterEvent=t),e===pv&&(this.enableLeaveEvent=t)}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit(hv,e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit(dv,e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit(gv,e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit(pv,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.which===0&&(this.pressed=!1),this.pressed||this._emit(fv,e);break;case"mouseup":this.pressed=!1;break}}_emit(e,t){this.callback({type:e,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})}}const{KEY_EVENTS:kL}=Cp,mv="keydown",vv="keyup";class IL extends f0{constructor(e,t,r){super(e,t,r),this.handleEvent=i=>{const o=i.target||i.srcElement;o.tagName==="INPUT"&&o.type==="text"||o.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:mv,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:vv,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(kL),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===mv&&(this.enableDownEvent=t),e===vv&&(this.enableUpEvent=t)}}const yv="contextmenu";class RL extends f0{constructor(e,t,r){super(e,t,r),this.handleEvent=i=>{this.options.enable&&this.callback({type:yv,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,t){e===yv&&(this.options.enable=t)}}const Mg=1,Hf=2,Lg=4,OL={pointerdown:Mg,pointermove:Hf,pointerup:Lg,mousedown:Mg,mousemove:Hf,mouseup:Lg},DL=1,FL=2,BL=3,NL=0,UL=1,zL=2,VL=1,jL=2,GL=4;function HL(n){const e=OL[n.srcEvent.type];if(!e)return null;const{buttons:t,button:r,which:i}=n.srcEvent;let o=!1,f=!1,d=!1;return e===Lg||e===Hf&&!Number.isFinite(t)?(o=i===DL,f=i===FL,d=i===BL):e===Hf?(o=!!(t&VL),f=!!(t&GL),d=!!(t&jL)):e===Mg&&(o=r===NL,f=r===UL,d=r===zL),{leftButton:o,middleButton:f,rightButton:d}}function WL(n,e){const t=n.center;if(!t)return null;const r=e.getBoundingClientRect(),i=r.width/e.offsetWidth||1,o=r.height/e.offsetHeight||1,f={x:(t.x-r.left-e.clientLeft)/i,y:(t.y-r.top-e.clientTop)/o};return{center:t,offsetCenter:f}}const kd={srcElement:"root",priority:0};class QL{constructor(e){this.handleEvent=t=>{if(this.isEmpty())return;const r=this._normalizeEvent(t);let i=t.srcEvent.target;for(;i&&i!==r.rootElement;){if(this._emit(r,i),r.handled)return;i=i.parentNode}this._emit(r,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,t,r,i=!1,o=!1){const{handlers:f,handlersByElement:d}=this;let m=kd;typeof r=="string"||r&&r.addEventListener?m={...kd,srcElement:r}:r&&(m={...kd,...r});let _=d.get(m.srcElement);_||(_=[],d.set(m.srcElement,_));const E={type:e,handler:t,srcElement:m.srcElement,priority:m.priority};i&&(E.once=!0),o&&(E.passive=!0),f.push(E),this._active=this._active||!E.passive;let T=_.length-1;for(;T>=0&&!(_[T].priority>=E.priority);)T--;_.splice(T+1,0,E)}remove(e,t){const{handlers:r,handlersByElement:i}=this;for(let o=r.length-1;o>=0;o--){const f=r[o];if(f.type===e&&f.handler===t){r.splice(o,1);const d=i.get(f.srcElement);d.splice(d.indexOf(f),1),d.length===0&&i.delete(f.srcElement)}}this._active=r.some(o=>!o.passive)}_emit(e,t){const r=this.handlersByElement.get(t);if(r){let i=!1;const o=()=>{e.handled=!0},f=()=>{e.handled=!0,i=!0},d=[];for(let m=0;m<r.length;m++){const{type:_,handler:E,once:T}=r[m];if(E({...e,type:_,stopPropagation:o,stopImmediatePropagation:f}),T&&d.push(r[m]),i)break}for(let m=0;m<d.length;m++){const{type:_,handler:E}=d[m];this.remove(_,E)}}}_normalizeEvent(e){const t=this.eventManager.getElement();return{...e,...HL(e),...WL(e,t),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:t}}}const YL={events:null,recognizers:null,recognizerOptions:{},Manager:vL,touchAction:"none",tabIndex:0};class $L{constructor(e=null,t){this._onBasicInput=i=>{const{srcEvent:o}=i,f=wL[o.type];f&&this.manager.emit(f,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={...YL,...t},this.events=new Map,this.setElement(e);const{events:r}=this.options;r&&this.on(r)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:t}=this,r=t.Manager;this.manager=new r(e,{touchAction:t.touchAction,recognizers:t.recognizers||yL}).on("hammer.input",this._onBasicInput),t.recognizers||Object.keys(Av).forEach(i=>{const o=this.manager.get(i);o&&Av[i].forEach(f=>{o.recognizeWith(f)})});for(const i in t.recognizerOptions){const o=this.manager.get(i);if(o){const f=t.recognizerOptions[i];delete f.enable,o.set(f)}}this.wheelInput=new ML(e,this._onOtherEvent,{enable:!1}),this.moveInput=new PL(e,this._onOtherEvent,{enable:!1}),this.keyInput=new IL(e,this._onOtherEvent,{enable:!1,tabIndex:t.tabIndex}),this.contextmenuInput=new RL(e,this._onOtherEvent,{enable:!1});for(const[i,o]of this.events)o.isEmpty()||(this._toggleRecognizer(o.recognizerName,!0),this.manager.on(i,o.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,t,r){this._addEventHandler(e,t,r,!1)}once(e,t,r){this._addEventHandler(e,t,r,!0)}watch(e,t,r){this._addEventHandler(e,t,r,!1,!0)}off(e,t){this._removeEventHandler(e,t)}_toggleRecognizer(e,t){const{manager:r}=this;if(!r)return;const i=r.get(e);if(i&&i.options.enable!==t){i.set({enable:t});const o=_L[e];o&&!this.options.recognizers&&o.forEach(f=>{const d=r.get(f);t?(d.requireFailure(e),i.dropRequireFailure(f)):d.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}_addEventHandler(e,t,r,i,o){if(typeof e!="string"){r=t;for(const E in e)this._addEventHandler(E,e[E],r,i,o);return}const{manager:f,events:d}=this,m=lv[e]||e;let _=d.get(m);_||(_=new QL(this),d.set(m,_),_.recognizerName=bL[m]||m,f&&f.on(m,_.handleEvent)),_.add(e,t,r,i,o),_.isEmpty()||this._toggleRecognizer(_.recognizerName,!0)}_removeEventHandler(e,t){if(typeof e!="string"){for(const f in e)this._removeEventHandler(f,e[f]);return}const{events:r}=this,i=lv[e]||e,o=r.get(i);if(o&&(o.remove(e,t),o.isEmpty())){const{recognizerName:f}=o;let d=!1;for(const m of r.values())if(m.recognizerName===f&&!m.isEmpty()){d=!0;break}d||this._toggleRecognizer(f,!1)}}}function ca(){}const XL=({isDragging:n})=>n?"grabbing":"grab",zw={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:ca,onResize:ca,onViewStateChange:ca,onInteractionStateChange:ca,onBeforeRender:ca,onAfterRender:ca,onLoad:ca,onError:n=>Gt.error(n.message,n.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:XL,getTooltip:null,debug:!1,drawPickingColors:!1};class h0{constructor(e){I(this,"props",void 0),I(this,"width",0),I(this,"height",0),I(this,"userData",{}),I(this,"canvas",null),I(this,"viewManager",null),I(this,"layerManager",null),I(this,"effectManager",null),I(this,"deckRenderer",null),I(this,"deckPicker",null),I(this,"eventManager",null),I(this,"tooltip",null),I(this,"metrics",void 0),I(this,"animationLoop",void 0),I(this,"stats",void 0),I(this,"viewState",void 0),I(this,"cursorState",void 0),I(this,"_needsRedraw",void 0),I(this,"_pickRequest",void 0),I(this,"_lastPointerDownInfo",null),I(this,"_metricsCounter",void 0),I(this,"_onPointerMove",t=>{const{_pickRequest:r}=this;if(t.type==="pointerleave")r.x=-1,r.y=-1,r.radius=0;else{if(t.leftButton||t.rightButton)return;{const i=t.offsetCenter;if(!i)return;r.x=i.x,r.y=i.y,r.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:r.x,y:r.y}),r.event=t}),I(this,"_onEvent",t=>{const r=n2[t.type],i=t.offsetCenter;if(!r||!i||!this.layerManager)return;const o=this.layerManager.getLayers(),f=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:o,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:d}=f,m=d&&(d[r.handler]||d.props[r.handler]),_=this.props[r.handler];let E=!1;m&&(E=m.call(d,f,t)),!E&&_&&_(f,t)}),I(this,"_onPointerDown",t=>{const r=t.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:r.x,y:r.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo}),this.props={...zw,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&Gt.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),R_()==="IE"&&Gt.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new hp({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&Su.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,t,r,i,o,f,d,m;if((e=this.animationLoop)===null||e===void 0||e.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(t=this.layerManager)===null||t===void 0||t.finalize(),this.layerManager=null,(r=this.viewManager)===null||r===void 0||r.finalize(),this.viewManager=null,(i=this.effectManager)===null||i===void 0||i.finalize(),this.effectManager=null,(o=this.deckRenderer)===null||o===void 0||o.finalize(),this.deckRenderer=null,(f=this.deckPicker)===null||f===void 0||f.finalize(),this.deckPicker=null,(d=this.eventManager)===null||d===void 0||d.destroy(),this.eventManager=null,(m=this.tooltip)===null||m===void 0||m.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var _;(_=this.canvas.parentElement)===null||_===void 0||_.removeChild(this.canvas),this.canvas=null}}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&Gt.removed("onLayerHover","onHover")(),"onLayerClick"in e&&Gt.removed("onLayerClick","onClick")(),e.initialViewState&&!ts(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const t=Object.create(this.props);Object.assign(t,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(t),this.layerManager&&(this.viewManager.setProps(t),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(t),this.effectManager.setProps(t),this.deckRenderer.setProps(t),this.deckPicker.setProps(t)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const r=this.viewManager.needsRedraw(e),i=this.layerManager.needsRedraw(e),o=this.effectManager.needsRedraw(e),f=this.deckRenderer.needsRedraw(e);return t=t||r||i||o||f,t}redraw(e){if(!this.layerManager)return;let t=this.needsRedraw({clearRedrawFlags:!0});t=e||t,t&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}get isInitialized(){return this.viewManager!==null}getViews(){return Jn(this.viewManager),this.viewManager.views}getViewports(e){return Jn(this.viewManager),this.viewManager.getViewports(e)}pickObject(e){const t=this._pick("pickObject","pickObject Time",e).result;return t.length?t[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,t=!1){for(const r in e)this.layerManager.resourceManager.add({resourceId:r,data:e[r],forceUpdate:t})}_removeResources(e){for(const t of e)this.layerManager.resourceManager.remove(t)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_pick(e,t,r){Jn(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(t).timeStart();const o=this.deckPicker[e]({layers:this.layerManager.getLayers(r),views:this.viewManager.getViews(),viewports:this.getViewports(r),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...r});return i.get(t).timeEnd(),o}_createCanvas(e){let t=e.canvas;return typeof t=="string"&&(t=document.getElementById(t),Jn(t)),t||(t=document.createElement("canvas"),t.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(t)),Object.assign(t.style,e.style),t}_setCanvasSize(e){if(!this.canvas)return;const{width:t,height:r}=e;if(t||t===0){const o=Number.isFinite(t)?"".concat(t,"px"):t;this.canvas.style.width=o}if(r||r===0){var i;const o=Number.isFinite(r)?"".concat(r,"px"):r;this.canvas.style.position=((i=e.style)===null||i===void 0?void 0:i.position)||"absolute",this.canvas.style.height=o}}_updateCanvasSize(){var e,t;const{canvas:r}=this;if(!r)return;const i=(e=r.clientWidth)!==null&&e!==void 0?e:r.width,o=(t=r.clientHeight)!==null&&t!==void 0?t:r.height;if(i!==this.width||o!==this.height){var f,d;this.width=i,this.height=o,(f=this.viewManager)===null||f===void 0||f.setProps({width:i,height:o}),(d=this.layerManager)===null||d===void 0||d.activateViewport(this.getViewports()[0]),this.props.onResize({width:i,height:o})}}_createAnimationLoop(e){const{width:t,height:r,gl:i,glOptions:o,debug:f,onError:d,onBeforeRender:m,onAfterRender:_,useDevicePixels:E}=e;return new A6({width:t,height:r,useDevicePixels:E,autoResizeDrawingBuffer:!i,autoResizeViewport:!1,gl:i,onCreateContext:T=>z_({...o,...T,canvas:this.canvas,debug:f,onContextLost:()=>this._onContextLost()}),onInitialize:T=>this._setGLContext(T.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:m,onAfterRender:_,onError:d})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new Dw({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:r,emptyInfo:i}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=r.length>0;let o=i,f=!1;for(const d of r){var t;o=d,f=((t=d.layer)===null||t===void 0?void 0:t.onHover(d,e.event))||f}if(!f&&this.props.onHover&&this.props.onHover(o,e.event),this.props.getTooltip&&this.tooltip){const d=this.props.getTooltip(o);this.tooltip.setTooltip(d,o.x,o.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,fp(e,{enable:!0,copyState:!0})),this.tooltip=new fL(this.canvas),Rs(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const t=new vw;t.play(),this.animationLoop.attachTimeline(t),this.eventManager=new $L(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const i in n2)this.eventManager.on(i,this._onEvent);this.viewManager=new UM({timeline:t,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const r=this.viewManager.getViewports()[0];this.layerManager=new NM(e,{deck:this,stats:this.stats,viewport:r,timeline:t}),this.effectManager=new tL,this.deckRenderer=new iL(e),this.deckPicker=new uL(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,t){const{gl:r}=this.layerManager.context;Rs(r,this.props.parameters),this.props.onBeforeRender({gl:r}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...t}),this.props.onAfterRender({gl:r})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),Gt.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:t},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const t=this.animationLoop.stats;e.get("GPU Time").addTime(t.get("GPU Time").lastTiming),e.get("CPU Time").addTime(t.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:t}=this;e.fps=t.get("frameRate").getHz(),e.setPropsTime=t.get("setProps Time").time,e.updateAttributesTime=t.get("Update Attributes").time,e.framesRedrawn=t.get("Redraw Count").count,e.pickTime=t.get("pickObject Time").time+t.get("pickMultipleObjects Time").time+t.get("pickObjects Time").time,e.pickCount=t.get("Pick Count").count,e.gpuTime=t.get("GPU Time").time,e.cpuTime=t.get("CPU Time").time,e.gpuTimePerFrame=t.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=t.get("CPU Time").getAverageTime();const r=da.get("Memory Usage");e.bufferMemory=r.get("Buffer Memory").count,e.textureMemory=r.get("Texture Memory").count,e.renderbufferMemory=r.get("Renderbuffer Memory").count,e.gpuMemory=r.get("GPU Memory").count}}I(h0,"defaultProps",zw);I(h0,"VERSION",hx);class Id{constructor(e,t){I(this,"opts",void 0),I(this,"source",void 0),this.opts=t,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),t=this.getAccessor();if(e)return[e,t];const{value:r}=this.source,{size:i}=t;let o=r;if(r&&r.length!==i){o=new Float32Array(i);const f=t.elementOffset||0;for(let d=0;d<i;++d)o[d]=r[f+d]}return o}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function ZL(n){switch(n){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function vf(n){return n.stride||n.size*n.bytesPerElement}function Vw(n,e){e.offset&&Gt.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const t=vf(n),r=e.vertexOffset!==void 0?e.vertexOffset:n.vertexOffset||0,i=e.elementOffset||0,o=r*t+i*n.bytesPerElement+(n.offset||0);return{...e,offset:o,stride:t}}function qL(n,e){const t=Vw(n,e);return{high:t,low:{...t,offset:t.offset+n.size*4}}}class KL{constructor(e,t,r){I(this,"gl",void 0),I(this,"id",void 0),I(this,"size",void 0),I(this,"settings",void 0),I(this,"value",void 0),I(this,"doublePrecision",void 0),I(this,"_buffer",void 0),I(this,"state",void 0),this.gl=e,this.id=t.id||"",this.size=t.size||1;const i=t.logicalType||t.type,o=i===5130;let{defaultValue:f}=t;f=Number.isFinite(f)?[f]:f||new Array(this.size).fill(0);let d;o?d=5126:!i&&t.isIndexed?d=e&&NS(e,cn.ELEMENT_INDEX_UINT32)?5125:5123:d=i||5126;let m=ZL(i||d||5126);this.doublePrecision=o,o&&t.fp64===!1&&(m=Float32Array),this.value=null,this.settings={...t,defaultType:m,defaultValue:f,logicalType:i,type:d,size:this.size,bytesPerElement:m.BYTES_PER_ELEMENT},this.state={...r,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:t}=this.settings;this._buffer=new nn(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:t}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*vf(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),Su.release(this.state.allocatedValue)}getShaderAttributes(e,t){if(this.doublePrecision){const r={},i=this.value instanceof Float64Array,o=qL(this.getAccessor(),t||{});return r[e]=new Id(this,o.high),r["".concat(e,"64Low")]=i?new Id(this,o.low):new Float32Array(this.size),r}if(t){const r=Vw(this.getAccessor(),t);return{[e]:new Id(this,r)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const t=Array.from(this.value);e=[t,t]}else{const{value:t,numInstances:r,size:i}=this,o=r*i;if(t&&o&&t.length>=o){const f=new Array(i).fill(1/0),d=new Array(i).fill(-1/0);for(let m=0;m<o;)for(let _=0;_<i;_++){const E=t[m++];E<f[_]&&(f[_]=E),E>d[_]&&(d[_]=E)}e=[f,d]}}return this.state.bounds=e,e}setData(e){const{state:t}=this;let r;ArrayBuffer.isView(e)?r={value:e}:e instanceof nn?r={buffer:e}:r=e;const i={...this.settings,...r};if(t.bufferAccessor=i,t.bounds=null,r.constant){let o=r.value;if(o=this._normalizeValue(o,[],0),this.settings.normalized&&(o=this.normalizeConstant(o)),!(!t.constant||!this._areValuesEqual(o,this.value)))return!1;t.externalBuffer=null,t.constant=!0,this.value=o}else if(r.buffer){const o=r.buffer;t.externalBuffer=o,t.constant=!1,this.value=r.value||null;const f=r.value instanceof Float64Array;i.type=r.type||o.accessor.type,i.bytesPerElement=o.accessor.BYTES_PER_ELEMENT*(f?2:1),i.stride=vf(i)}else if(r.value){this._checkExternalBuffer(r);let o=r.value;t.externalBuffer=null,t.constant=!1,this.value=o,i.bytesPerElement=o.BYTES_PER_ELEMENT,i.stride=vf(i);const{buffer:f,byteOffset:d}=this;this.doublePrecision&&o instanceof Float64Array&&(o=Cd(o,i));const m=o.byteLength+d+i.stride*2;f.byteLength<m&&f.reallocate(m),f.setAccessor(null),f.subData({data:o,offset:d}),i.type=r.type||f.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const t=this.value,{startOffset:r=0,endOffset:i}=e;this.buffer.subData({data:this.doublePrecision&&t instanceof Float64Array?Cd(t,{size:this.size,startIndex:r,endIndex:i}):t.subarray(r,i),offset:r*t.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,t=!1){const{state:r}=this,i=r.allocatedValue,o=Su.allocate(i,e+1,{size:this.size,type:this.settings.defaultType,copy:t});this.value=o;const{buffer:f,byteOffset:d}=this;return f.byteLength<o.byteLength+d&&(f.reallocate(o.byteLength+d),t&&i&&f.subData({data:i instanceof Float64Array?Cd(i,this):i,offset:d})),r.allocatedValue=o,r.constant=!1,r.externalBuffer=null,r.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:t}=e;if(!ArrayBuffer.isView(t))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const r=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=t.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(t.constructor.name));!(t instanceof r)&&this.settings.normalized&&!("normalized"in e)&&Gt.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(t=>(t+128)/255*2-1);case 5122:return new Float32Array(e).map(t=>(t+32768)/65535*2-1);case 5121:return new Float32Array(e).map(t=>t/255);case 5123:return new Float32Array(e).map(t=>t/65535);default:return e}}_normalizeValue(e,t,r){const{defaultValue:i,size:o}=this.settings;if(Number.isFinite(e))return t[r]=e,t;if(!e){let f=o;for(;--f>=0;)t[r+f]=i[f];return t}switch(o){case 4:t[r+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:t[r+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:t[r+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:t[r+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:let f=o;for(;--f>=0;)t[r+f]=Number.isFinite(e[f])?e[f]:i[f]}return t}_areValuesEqual(e,t){if(!e||!t)return!1;const{size:r}=this;for(let i=0;i<r;i++)if(e[i]!==t[i])return!1;return!0}}const _v=[],wv=[];function Mp(n,e=0,t=1/0){let r=_v;const i={index:-1,data:n,target:[]};return n?typeof n[Symbol.iterator]=="function"?r=n:n.length>0&&(wv.length=n.length,r=wv):r=_v,(e>0||Number.isFinite(t))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,t),i.index=e-1),{iterable:r,objectInfo:i}}function jw(n){return n&&n[Symbol.asyncIterator]}function JL(n,e){const{size:t,stride:r,offset:i,startIndices:o,nested:f}=e,d=n.BYTES_PER_ELEMENT,m=r?r/d:t,_=i?i/d:0,E=Math.floor((n.length-_)/m);return(T,{index:C,target:P})=>{if(!o){const G=C*m+_;for(let Q=0;Q<t;Q++)P[Q]=n[G+Q];return P}const R=o[C],U=o[C+1]||E;let j;if(f){j=new Array(U-R);for(let G=R;G<U;G++){const Q=G*m+_;P=new Array(t);for(let X=0;X<t;X++)P[X]=n[Q+X];j[G-R]=P}}else if(m===t)j=n.subarray(R*t+_,U*t+_);else{j=new n.constructor((U-R)*t);let G=0;for(let Q=R;Q<U;Q++){const X=Q*m+_;for(let q=0;q<t;q++)j[G++]=n[X+q]}}return j}}const eP=[],yf=[[0,1/0]];function tP(n,e){if(n===yf||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return n;const t=[],r=n.length;let i=0;for(let o=0;o<r;o++){const f=n[o];f[1]<e[0]?(t.push(f),i=o+1):f[0]>e[1]?t.push(f):e=[Math.min(f[0],e[0]),Math.max(f[1],e[1])]}return t.splice(i,0,e),t}function Rd(n){const{source:e,target:t,start:r=0,size:i,getData:o}=n,f=n.end||t.length,d=e.length,m=f-r;if(d>m){t.set(e.subarray(0,m),r);return}if(t.set(e,r),!o)return;let _=d;for(;_<m;){const E=o(_,e);for(let T=0;T<i;T++)t[r+_]=E[T]||0,_++}}function nP({source:n,target:e,size:t,getData:r,sourceStartIndices:i,targetStartIndices:o}){if(!Array.isArray(o))return Rd({source:n,target:e,size:t,getData:r}),e;let f=0,d=0;const m=r&&((E,T)=>r(E+d,T)),_=Math.min(i.length,o.length);for(let E=1;E<_;E++){const T=i[E]*t,C=o[E]*t;Rd({source:n.subarray(f,T),target:e,start:d,end:C,size:t,getData:m}),f=T,d=C}return d<e.length&&Rd({source:[],target:e,start:d,size:t,getData:m}),e}const rP={interpolation:{duration:0,easing:n=>n},spring:{stiffness:.05,damping:.5}};function Gw(n,e){if(!n)return null;Number.isFinite(n)&&(n={type:"interpolation",duration:n});const t=n.type||"interpolation";return{...rP[t],...e,...n,type:t}}function Hw(n,e){const t=e.getBuffer();return t?[t,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function Ww(n){switch(n){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(n,'"'))}}function Qw(n){n.push(n.shift())}function Lp(n,e){const{doublePrecision:t,settings:r,value:i,size:o}=n,f=t&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:e*o)*f}function Yw({buffer:n,numInstances:e,attribute:t,fromLength:r,fromStartIndices:i,getData:o=f=>f}){const f=t.doublePrecision&&t.value instanceof Float64Array?2:1,d=t.size*f,m=t.byteOffset,_=t.startIndices,E=i&&_,T=Lp(t,e),C=t.isConstant;if(!E&&r>=T)return;const P=C?t.value:t.getBuffer().getData({srcByteOffset:m});if(t.settings.normalized&&!C){const G=o;o=(Q,X)=>t.normalizeConstant(G(Q,X))}const R=C?(G,Q)=>o(P,Q):(G,Q)=>o(P.subarray(G,G+d),Q),U=n.getData({length:r}),j=new Float32Array(T);nP({source:U,target:j,sourceStartIndices:i,targetStartIndices:_,size:d,getData:R}),n.byteLength<j.byteLength+m&&n.reallocate(j.byteLength+m),n.subData({data:j,offset:m})}class Pp extends KL{constructor(e,t){super(e,t,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:yf}),I(this,"constant",!1),this.settings.update=t.update||(t.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const t=this.state.needsRedraw;return this.state.needsRedraw=t&&!e,t}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:t}=this.settings,r=this.settings.transition,i=Array.isArray(t)?e[t.find(o=>e[o])]:e[t];return Gw(i,r)}setNeedsUpdate(e=this.id,t){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),t){const{startRow:r=0,endRow:i=1/0}=t;this.state.updateRanges=tP(this.state.updateRanges,[r,i])}else this.state.updateRanges=yf}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=eP}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:t,settings:r}=this;return r.noAlloc?!1:r.update?(super.allocate(e,t.updateRanges!==yf),!0):!1}updateBuffer({numInstances:e,data:t,props:r,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:f,noAlloc:d}}=this;let m=!0;if(f){for(const[_,E]of o)f.call(i,this,{data:t,startRow:_,endRow:E,props:r,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[_,E]of o){const T=Number.isFinite(_)?this.getVertexOffset(_):0,C=Number.isFinite(E)?this.getVertexOffset(E):d||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:T,endOffset:C})}this._checkAttributeArray()}else m=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),m}setConstantValue(e){return e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:t}=this;return e?(this.clearNeedsUpdate(),t.lastExternalBuffer===e||(t.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(t.lastExternalBuffer=null,!1)}setBinaryValue(e,t=null){const{state:r,settings:i}=this;if(!e)return r.binaryValue=null,r.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(r.binaryValue===e)return this.clearNeedsUpdate(),!0;if(r.binaryValue=e,this.setNeedsRedraw(),i.transform||t!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const f=e;Jn(ArrayBuffer.isView(f.value),"invalid ".concat(i.accessor));const d=!!f.size&&f.size!==this.size;return r.binaryAccessor=JL(f.value,{size:f.size||this.size,stride:f.stride,offset:f.offset,startIndices:t,nested:d}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:t}=this;return(t?e<t.length?t[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},t={};for(const r in e)Object.assign(t,super.getShaderAttributes(r,e[r]));return t}_autoUpdater(e,{data:t,startRow:r,endRow:i,props:o,numInstances:f}){if(e.constant)return;const{settings:d,state:m,value:_,size:E,startIndices:T}=e,{accessor:C,transform:P}=d,R=m.binaryAccessor||(typeof C=="function"?C:o[C]);Jn(typeof R=="function",'accessor "'.concat(C,'" is not a function'));let U=e.getVertexOffset(r);const{iterable:j,objectInfo:G}=Mp(t,r,i);for(const Q of j){G.index++;let X=R(Q,G);if(P&&(X=P.call(this,X)),T){const q=(G.index<T.length-1?T[G.index+1]:f)-T[G.index];if(X&&Array.isArray(X[0])){let ee=U;for(const ie of X)e._normalizeValue(ie,_,ee),ee+=E}else X&&X.length>E?_.set(X,U):(e._normalizeValue(X,G.target,0),LM({target:_,source:G.target,start:U,count:q}));U+=q*E}else e._normalizeValue(X,_,U),U+=E}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,t=Math.min(4,this.size);if(e&&e.length>=t){let r=!0;switch(t){case 4:r=r&&Number.isFinite(e[3]);case 3:r=r&&Number.isFinite(e[2]);case 2:r=r&&Number.isFinite(e[1]);case 1:r=r&&Number.isFinite(e[0]);break;default:r=!1}if(!r)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class iP{constructor({gl:e,attribute:t,timeline:r}){I(this,"gl",void 0),I(this,"type","interpolation"),I(this,"attributeInTransition",void 0),I(this,"settings",void 0),I(this,"attribute",void 0),I(this,"transition",void 0),I(this,"currentStartIndices",void 0),I(this,"currentLength",void 0),I(this,"transform",void 0),I(this,"buffers",void 0),this.gl=e,this.transition=new Hu(r),this.attribute=t,this.attributeInTransition=new Pp(e,t.settings),this.currentStartIndices=t.startIndices,this.currentLength=0,this.transform=oP(e,t);const i={byteLength:0,usage:35050};this.buffers=[new nn(e,i),new nn(e,i)]}get inProgress(){return this.transition.inProgress}start(e,t){if(e.duration<=0){this.transition.cancel();return}this.settings=e;const{gl:r,buffers:i,attribute:o}=this;Qw(i);const f={numInstances:t,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const d of i)Yw({buffer:d,...f});this.currentStartIndices=o.startIndices,this.currentLength=Lp(o,t),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aFrom:i[0],aTo:Hw(r,o)},feedbackBuffers:{vCurrent:i[1]}})}update(){const e=this.transition.update();if(e){const{duration:t,easing:r}=this.settings,{time:i}=this.transition;let o=i/t;r&&(o=r(o)),this.transform.run({uniforms:{time:o}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}}const sP=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function oP(n,e){const t=Ww(e.size);return new yp(n,{vs:sP,defines:{ATTRIBUTE_TYPE:t},varyings:["vCurrent"]})}class aP{constructor({gl:e,attribute:t,timeline:r}){I(this,"gl",void 0),I(this,"type","spring"),I(this,"attributeInTransition",void 0),I(this,"settings",void 0),I(this,"attribute",void 0),I(this,"transition",void 0),I(this,"currentStartIndices",void 0),I(this,"currentLength",void 0),I(this,"texture",void 0),I(this,"framebuffer",void 0),I(this,"transform",void 0),I(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new Hu(r),this.attribute=t,this.attributeInTransition=new Pp(e,{...t.settings,normalized:!1}),this.currentStartIndices=t.startIndices,this.currentLength=0,this.texture=lP(e),this.framebuffer=uP(e,this.texture),this.transform=AP(e,t,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new nn(e,i),new nn(e,i),new nn(e,i)]}get inProgress(){return this.transition.inProgress}start(e,t){const{gl:r,buffers:i,attribute:o}=this,f={numInstances:t,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const d of i)Yw({buffer:d,...f});this.settings=e,this.currentStartIndices=o.startIndices,this.currentLength=Lp(o,t),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:Hw(r,o)}})}update(){const{buffers:e,transform:t,framebuffer:r,transition:i}=this;if(!i.update())return!1;const f=this.settings;return t.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),t.run({framebuffer:r,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:f.stiffness,damping:f.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),Qw(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),l0(r)[0]>0||i.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function AP(n,e,t){const r=Ww(e.size);return new yp(n,{framebuffer:t,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}function lP(n){return new Zr(n,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function uP(n,e){return new Bn(n,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}const cP={interpolation:iP,spring:aP};class fP{constructor(e,{id:t,timeline:r}){I(this,"id",void 0),I(this,"isSupported",void 0),I(this,"gl",void 0),I(this,"timeline",void 0),I(this,"transitions",void 0),I(this,"needsRedraw",void 0),I(this,"numInstances",void 0),this.id=t,this.gl=e,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=yp.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:t,numInstances:r}){this.numInstances=r||1;for(const i in e){const o=e[i],f=o.getTransitionSetting(t);f&&this._updateAttribute(i,o,f)}for(const i in this.transitions){const o=e[i];(!o||!o.getTransitionSetting(t))&&this._removeTransition(i)}}hasAttribute(e){const t=this.transitions[e];return t&&t.inProgress}getAttributes(){const e={};for(const t in this.transitions){const r=this.transitions[t];r.inProgress&&(e[t]=r.attributeInTransition)}return e}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const t in this.transitions)this.transitions[t].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,t,r){const i=this.transitions[e];let o=!i||i.type!==r.type;if(o){if(!this.isSupported){Gt.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();return}i&&this._removeTransition(e);const f=cP[r.type];f?this.transitions[e]=new f({attribute:t,timeline:this.timeline,gl:this.gl}):(Gt.error("unsupported transition type '".concat(r.type,"'"))(),o=!1)}(o||t.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(r,this.numInstances))}}const bv="attributeManager.invalidate",hP="attributeManager.updateStart",dP="attributeManager.updateEnd",gP="attribute.updateStart",pP="attribute.allocate",mP="attribute.updateEnd";class vP{constructor(e,{id:t="attribute-manager",stats:r,timeline:i}={}){I(this,"id",void 0),I(this,"gl",void 0),I(this,"attributes",void 0),I(this,"updateTriggers",void 0),I(this,"needsRedraw",void 0),I(this,"userData",void 0),I(this,"stats",void 0),I(this,"attributeTransitionManager",void 0),I(this,"mergeBoundsMemoized",Gu(_M)),this.id=t,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=r,this.attributeTransitionManager=new fP(e,{id:"".concat(t,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const t=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,t&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const t of e)this.attributes[t]!==void 0&&(this.attributes[t].delete(),delete this.attributes[t])}invalidate(e,t){const r=this._invalidateTrigger(e,t);hr(bv,this,e,r)}invalidateAll(e){for(const t in this.attributes)this.attributes[t].setNeedsUpdate(t,e);hr(bv,this,"all")}update({data:e,numInstances:t,startIndices:r=null,transitions:i,props:o={},buffers:f={},context:d={}}){let m=!1;hr(hP,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const _ in this.attributes){const E=this.attributes[_],T=E.settings.accessor;E.startIndices=r,E.numInstances=t,o[_]&&Gt.removed("props.".concat(_),"data.attributes.".concat(_))(),E.setExternalBuffer(f[_])||E.setBinaryValue(typeof T=="string"?f[T]:void 0,e.startIndices)||typeof T=="string"&&!f[T]&&E.setConstantValue(o[T])||E.needsUpdate()&&(m=!0,this._updateAttribute({attribute:E,numInstances:t,data:e,props:o,context:d})),this.needsRedraw=this.needsRedraw||E.needsRedraw()}m&&hr(dP,this,t),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:t,transitions:i})}updateTransition(){const{attributeTransitionManager:e}=this,t=e.run();return this.needsRedraw=this.needsRedraw||t,t}getAttributes(){return this.attributes}getBounds(e){const t=e.map(r=>{var i;return(i=this.attributes[r])===null||i===void 0?void 0:i.getBounds()});return this.mergeBoundsMemoized(t)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:t,attributeTransitionManager:r}=this,i={...r.getAttributes()};for(const o in t){const f=t[o];f.needsRedraw(e)&&!r.hasAttribute(o)&&(i[o]=f)}return i}getShaderAttributes(e,t={}){e||(e=this.getAttributes());const r={};for(const i in e)t[i]||Object.assign(r,e[i].getShaderAttributes());return r}_add(e,t={}){for(const r in e){const i=e[r];this.attributes[r]=this._createAttribute(r,i,t)}this._mapUpdateTriggersToAttributes()}_createAttribute(e,t,r){const i={...t,id:e,size:t.isIndexed&&1||t.size||1,divisor:r.instanced?1:t.divisor||0};return new Pp(this.gl,i)}_mapUpdateTriggersToAttributes(){const e={};for(const t in this.attributes)this.attributes[t].getUpdateTriggers().forEach(i=>{e[i]||(e[i]=[]),e[i].push(t)});this.updateTriggers=e}_invalidateTrigger(e,t){const{attributes:r,updateTriggers:i}=this,o=i[e];return o&&o.forEach(f=>{const d=r[f];d&&d.setNeedsUpdate(d.id,t)}),o}_updateAttribute(e){const{attribute:t,numInstances:r}=e;if(hr(gP,t),t.constant){t.setConstantValue(t.value);return}t.allocate(r)&&hr(pP,t,r),t.updateBuffer(e)&&(this.needsRedraw=!0,hr(mP,t,r))}}class yP extends Hu{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:t,toValue:r,duration:i,easing:o}}=this,f=o(e/i);this._value=Bf(t,r,f)}}const Ev=1e-5;function Tv(n,e,t,r,i){const o=e-n,d=(t-e)*i,m=-o*r;return d+m+o+e}function _P(n,e,t,r,i){if(Array.isArray(t)){const o=[];for(let f=0;f<t.length;f++)o[f]=Tv(n[f],e[f],t[f],r,i);return o}return Tv(n,e,t,r,i)}function xv(n,e){if(Array.isArray(n)){let t=0;for(let r=0;r<n.length;r++){const i=n[r]-e[r];t+=i*i}return Math.sqrt(t)}return Math.abs(n-e)}class wP extends Hu{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:t,damping:r,stiffness:i}=this.settings,{_prevValue:o=e,_currValue:f=e}=this;let d=_P(o,f,t,r,i);const m=xv(d,t),_=xv(d,f);m<Ev&&_<Ev&&(d=t,this.end()),this._prevValue=f,this._currValue=d}}const bP={interpolation:yP,spring:wP};class EP{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,t,r,i){const{transitions:o}=this;if(o.has(e)){const m=o.get(e),{value:_=m.settings.fromValue}=m;t=_,this.remove(e)}if(i=Gw(i),!i)return;const f=bP[i.type];if(!f){Gt.error("unsupported transition type '".concat(i.type,"'"))();return}const d=new f(this.timeline);d.start({...i,fromValue:t,toValue:r}),o.set(e,d)}remove(e){const{transitions:t}=this;t.has(e)&&(t.get(e).cancel(),t.delete(e))}update(){const e={};for(const[t,r]of this.transitions)r.update(),e[t]=r.value,r.inProgress||this.remove(t);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function TP(n){const e=n[So];for(const t in e){const r=e[t],{validate:i}=r;if(i&&!i(n[t],r))throw new Error("Invalid prop ".concat(t,": ").concat(n[t]))}}function xP(n,e){const t=$w({newProps:n,oldProps:e,propTypes:n[So],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=CP(n,e);let i=!1;return r||(i=MP(n,e)),{dataChanged:r,propsChanged:t,updateTriggersChanged:i,extensionsChanged:LP(n,e),transitionsChanged:SP(n,e)}}function SP(n,e){if(!n.transitions)return!1;const t={},r=n[So];let i=!1;for(const o in n.transitions){const f=r[o],d=f&&f.type;(d==="number"||d==="color"||d==="array")&&Pg(n[o],e[o],f)&&(t[o]=!0,i=!0)}return i?t:!1}function $w({newProps:n,oldProps:e,ignoreProps:t={},propTypes:r={},triggerName:i="props"}){if(e===n)return!1;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return"".concat(i," changed shallowly");for(const o of Object.keys(n))if(!(o in t)){if(!(o in e))return"".concat(i,".").concat(o," added");const f=Pg(n[o],e[o],r[o]);if(f)return"".concat(i,".").concat(o," ").concat(f)}for(const o of Object.keys(e))if(!(o in t)){if(!(o in n))return"".concat(i,".").concat(o," dropped");if(!Object.hasOwnProperty.call(n,o)){const f=Pg(n[o],e[o],r[o]);if(f)return"".concat(i,".").concat(o," ").concat(f)}}return!1}function Pg(n,e,t){let r=t&&t.equal;return r&&!r(n,e,t)||!r&&(r=n&&e&&n.equals,r&&!r.call(n,e))?"changed deeply":!r&&e!==n?"changed shallowly":null}function CP(n,e){if(e===null)return"oldProps is null, initial diff";let t=!1;const{dataComparator:r,_dataDiff:i}=n;return r?r(n.data,e.data)||(t="Data comparator detected a change"):n.data!==e.data&&(t="A new data container was supplied"),t&&i&&(t=i(n.data,e.data)||t),t}function MP(n,e){if(e===null)return{all:!0};if("all"in n.updateTriggers&&Sv(n,e,"all"))return{all:!0};const t={};let r=!1;for(const i in n.updateTriggers)i!=="all"&&Sv(n,e,i)&&(t[i]=!0,r=!0);return r?t:!1}function LP(n,e){if(e===null)return!0;const t=e.extensions,{extensions:r}=n;if(r===t)return!1;if(!t||!r||r.length!==t.length)return!0;for(let i=0;i<r.length;i++)if(!r[i].equals(t[i]))return!0;return!1}function Sv(n,e,t){let r=n.updateTriggers[t];r=r??{};let i=e.updateTriggers[t];return i=i??{},$w({oldProps:i,newProps:r,triggerName:t})}const PP="count(): argument not an object",kP="count(): argument not a container";function IP(n){if(!OP(n))throw new Error(PP);if(typeof n.count=="function")return n.count();if(Number.isFinite(n.size))return n.size;if(Number.isFinite(n.length))return n.length;if(RP(n))return Object.keys(n).length;throw new Error(kP)}function RP(n){return n!==null&&typeof n=="object"&&n.constructor===Object}function OP(n){return n!==null&&typeof n=="object"}function DP(n,e){if(!e)return n;const t={...n,...e};if("defines"in e&&(t.defines={...n.defines,...e.defines}),"modules"in e&&(t.modules=(n.modules||[]).concat(e.modules),e.modules.some(r=>r.name==="project64"))){const r=t.modules.findIndex(i=>i.name==="project32");r>=0&&t.modules.splice(r,1)}if("inject"in e)if(!n.inject)t.inject=e.inject;else{const r={...n.inject};for(const i in e.inject)r[i]=(r[i]||"")+e.inject[i];t.inject=r}return t}const FP={10241:9987,10240:9729,10242:33071,10243:33071},kg={};function BP(n,e,t,r){if(t instanceof Zr)return t;t.constructor&&t.constructor.name!=="Object"&&(t={data:t});let i=null;t.compressed&&(i={10241:t.data.length>1?9985:9729});const o=new Zr(e,{...t,parameters:{...FP,...i,...r}});return kg[o.id]=n,o}function NP(n,e){!e||!(e instanceof Zr)||kg[e.id]===n&&(e.delete(),delete kg[e.id])}const UP={boolean:{validate(n,e){return!0},equal(n,e,t){return!!n==!!e}},number:{validate(n,e){return Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)}},color:{validate(n,e){return e.optional&&!n||Ig(n)&&(n.length===3||n.length===4)},equal(n,e,t){return ts(n,e,1)}},accessor:{validate(n,e){const t=Wf(n);return t==="function"||t===Wf(e.value)},equal(n,e,t){return typeof e=="function"?!0:ts(n,e,1)}},array:{validate(n,e){return e.optional&&!n||Ig(n)},equal(n,e,t){const{compare:r}=t,i=Number.isInteger(r)?r:r?1:0;return r?ts(n,e,i):n===e}},object:{equal(n,e,t){if(t.ignore)return!0;const{compare:r}=t,i=Number.isInteger(r)?r:r?1:0;return r?ts(n,e,i):n===e}},function:{validate(n,e){return e.optional&&!n||typeof n=="function"},equal(n,e,t){return!t.compare&&t.ignore!==!1||n===e}},data:{transform:(n,e,t)=>{const{dataTransform:r}=t.props;return r&&n?r(n):n}},image:{transform:(n,e,t)=>{const r=t.context;return!r||!r.gl?null:BP(t.id,r.gl,n,{...e.parameters,...t.props.textureParameters})},release:(n,e,t)=>{NP(t.id,n)}}};function zP(n){const e={},t={},r={};for(const[i,o]of Object.entries(n)){const f=o?.deprecatedFor;if(f)r[i]=Array.isArray(f)?f:[f];else{const d=VP(i,o);e[i]=d,t[i]=d.value}}return{propTypes:e,defaultProps:t,deprecatedProps:r}}function VP(n,e){switch(Wf(e)){case"object":return tu(n,e);case"array":return tu(n,{type:"array",value:e,compare:!1});case"boolean":return tu(n,{type:"boolean",value:e});case"number":return tu(n,{type:"number",value:e});case"function":return tu(n,{type:"function",value:e,compare:!0});default:return{name:n,type:"unknown",value:e}}}function tu(n,e){return"type"in e?{name:n,...UP[e.type],...e}:"value"in e?{name:n,type:Wf(e.value),...e}:{name:n,type:"object",value:e}}function Ig(n){return Array.isArray(n)||ArrayBuffer.isView(n)}function Wf(n){return Ig(n)?"array":n===null?"null":typeof n}function jP(n,e){let t;for(let o=e.length-1;o>=0;o--){const f=e[o];"extensions"in f&&(t=f.extensions)}const r=Rg(n.constructor,t),i=Object.create(r);i[Gf]=n,i[ya]={},i[To]={};for(let o=0;o<e.length;++o){const f=e[o];for(const d in f)i[d]=f[d]}return Object.freeze(i),i}const GP="_mergedDefaultProps";function Rg(n,e){let t=GP;if(e)for(const i of e){const o=i.constructor;o&&(t+=":".concat(o.extensionName||o.name))}const r=Xw(n,t);return r||(n[t]=HP(n,e||[]))}function HP(n,e){if(!n.prototype)return null;const r=Object.getPrototypeOf(n),i=Rg(r),o=Xw(n,"defaultProps")||{},f=zP(o),d=Object.assign(Object.create(null),i,f.defaultProps),m=Object.assign(Object.create(null),i?.[So],f.propTypes),_=Object.assign(Object.create(null),i?.[Ld],f.deprecatedProps);for(const E of e){const T=Rg(E.constructor);T&&(Object.assign(d,T),Object.assign(m,T[So]),Object.assign(_,T[Ld]))}return WP(d,n),YP(d,m),QP(d,_),d[So]=m,d[Ld]=_,e.length===0&&!kp(n,"_propTypes")&&(n._propTypes=m),d}function WP(n,e){const t=XP(e);Object.defineProperties(n,{id:{writable:!0,value:t}})}function QP(n,e){for(const t in e)Object.defineProperty(n,t,{enumerable:!1,set(r){const i="".concat(this.id,": ").concat(t);for(const o of e[t])kp(this,o)||(this[o]=r);Gt.deprecated(i,e[t].join("/"))()}})}function YP(n,e){const t={},r={};for(const i in e){const o=e[i],{name:f,value:d}=o;o.async&&(t[f]=d,r[f]=$P(f))}n[OA]=t,n[ya]={},Object.defineProperties(n,r)}function $P(n){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||jw(e)?this[ya][n]=e:this[To][n]=e},get(){if(this[To]){if(n in this[To])return this[To][n]||this[OA][n];if(n in this[ya]){const e=this[Gf]&&this[Gf].internalState;if(e&&e.hasAsyncProp(n))return e.getAsyncProp(n)||this[OA][n]}}return this[OA][n]}}}function kp(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Xw(n,e){return kp(n,e)&&n[e]}function XP(n){const e=n.componentName;return e||Gt.warn("".concat(n.name,".componentName not specified"))(),e||n.name}let ZP=0;class Ip{constructor(...e){I(this,"id",void 0),I(this,"props",void 0),I(this,"count",void 0),this.props=jP(this,e),this.id=this.props.id,this.count=ZP++}clone(e){const{props:t}=this,r={};for(const i in t[OA])i in t[To]?r[i]=t[To][i]:i in t[ya]&&(r[i]=t[ya][i]);return new this.constructor({...t,...r,...e})}}I(Ip,"componentName","Component");I(Ip,"defaultProps",{});const qP=Object.freeze({});class KP{constructor(e){I(this,"component",void 0),I(this,"onAsyncPropUpdated",void 0),I(this,"asyncProps",void 0),I(this,"oldProps",void 0),I(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const t=this.asyncProps[e];t&&t.type&&t.type.release&&t.type.release(t.resolvedValue,t.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||qP}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const t=this.asyncProps[e];return t&&t.resolvedValue}isAsyncPropLoading(e){if(e){const t=this.asyncProps[e];return!!(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}for(const t in this.asyncProps)if(this.isAsyncPropLoading(t))return!0;return!1}reloadAsyncProp(e,t){this._watchPromise(e,Promise.resolve(t))}setAsyncProps(e){this.component=e[Gf]||this.component;const t=e[To]||{},r=e[ya]||e,i=e[OA]||{};for(const o in t){const f=t[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,f),t[o]=this.getAsyncProp(o)}for(const o in r){const f=r[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,f)}}_fetch(e,t){return null}_onResolve(e,t){}_onError(e,t){}_updateAsyncProp(e,t){if(this._didAsyncInputValueChange(e,t)){if(typeof t=="string"&&(t=this._fetch(e,t)),t instanceof Promise){this._watchPromise(e,t);return}if(jw(t)){this._resolveAsyncIterable(e,t);return}this._setPropValue(e,t)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,t){const r=this.asyncProps[e];return t===r.resolvedValue||t===r.lastValue?!1:(r.lastValue=t,!0)}_setPropValue(e,t){this._freezeAsyncOldProps();const r=this.asyncProps[e];r&&(t=this._postProcessValue(r,t),r.resolvedValue=t,r.pendingLoadCount++,r.resolvedLoadCount=r.pendingLoadCount)}_setAsyncPropValue(e,t,r){const i=this.asyncProps[e];i&&r>=i.resolvedLoadCount&&t!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=t,i.resolvedLoadCount=r,this.onAsyncPropUpdated(e,t))}_watchPromise(e,t){const r=this.asyncProps[e];if(r){r.pendingLoadCount++;const i=r.pendingLoadCount;t.then(o=>{this.component&&(o=this._postProcessValue(r,o),this._setAsyncPropValue(e,o,i),this._onResolve(e,o))}).catch(o=>{this._onError(e,o)})}}async _resolveAsyncIterable(e,t){if(e!=="data"){this._setPropValue(e,t);return}const r=this.asyncProps[e];if(!r)return;r.pendingLoadCount++;const i=r.pendingLoadCount;let o=[],f=0;for await(const d of t){if(!this.component)return;const{dataTransform:m}=this.component.props;m?o=m(d,o):o=o.concat(d),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:f,endRow:o.length}]}),f=o.length,this._setAsyncPropValue(e,o,i)}this._onResolve(e,o)}_postProcessValue(e,t){const r=e.type;return r&&this.component&&(r.release&&r.release(e.resolvedValue,r,this.component),r.transform)?r.transform(t,r,this.component):t}_createAsyncPropData(e,t){if(!this.asyncProps[e]){const i=this.component&&this.component.props[So];this.asyncProps[e]={type:i&&i[e],lastValue:null,resolvedValue:t,pendingLoadCount:0,resolvedLoadCount:0}}}}class JP extends KP{constructor({attributeManager:e,layer:t}){super(t),I(this,"attributeManager",void 0),I(this,"needsRedraw",void 0),I(this,"needsUpdate",void 0),I(this,"subLayers",void 0),I(this,"usesPickingColorCache",void 0),I(this,"hasPickingBuffer",void 0),I(this,"changeFlags",void 0),I(this,"viewport",void 0),I(this,"uniformTransitions",void 0),I(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,t){const r=this.layer,i=r?.props.fetch;return i?i(t,{propName:e,layer:r}):super._fetch(e,t)}_onResolve(e,t){const r=this.layer;if(r){const i=r.props.onDataLoad;e==="data"&&i&&i(t,{propName:e,layer:r})}}_onError(e,t){const r=this.layer;r&&r.raiseError(t,"loading ".concat(e," of ").concat(this.layer))}}const ek="layer.changeFlag",tk="layer.initialize",nk="layer.update",rk="layer.finalize",ik="layer.matched",Cv=2**24-1,sk=Object.freeze([]),ok=Gu(({oldViewport:n,viewport:e})=>n.equals(e));let qi=new Uint8ClampedArray(0);const ak={data:{type:"data",value:sk,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:n=>n&&n.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(n,{propName:e,layer:t,loaders:r,loadOptions:i,signal:o})=>{const{resourceManager:f}=t.context;if(i=i||t.getLoadOptions(),r=r||t.props.loaders,o){var d;i={...i,fetch:{...(d=i)===null||d===void 0?void 0:d.fetch,signal:o}}}let m=f.contains(n);return!m&&!i&&(f.add({resourceId:n,data:If(n,r),persistent:!1}),m=!0),m?f.subscribe({resourceId:n,onChange:_=>{var E;return(E=t.internalState)===null||E===void 0?void 0:E.reloadAsyncProp(e,_)},consumerId:t.id,requestId:e}):If(n,r,i)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:Zt.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:n})=>[0,-n*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class ls extends Ip{constructor(...e){super(...e),I(this,"internalState",null),I(this,"lifecycle",xA.NO_STATE),I(this,"context",void 0),I(this,"state",void 0),I(this,"parent",null)}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){const e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}project(e){Jn(this.internalState);const t=this.internalState.viewport||this.context.viewport,r=kw(e,{viewport:t,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,o,f]=Tp(r,t.pixelProjectionMatrix);return e.length===2?[i,o]:[i,o,f]}unproject(e){return Jn(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,t){Jn(this.internalState);const r=this.internalState.viewport||this.context.viewport;return SM(e,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...t})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const t of this.getModels())t.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===Zt.DEFAULT||e===Zt.LNGLAT||e===Zt.CARTESIAN}onHover(e,t){return this.props.onHover&&this.props.onHover(e,t)||!1}onClick(e,t){return this.props.onClick&&this.props.onClick(e,t)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,t=[]){return t[0]=e+1&255,t[1]=e+1>>8&255,t[2]=e+1>>8>>8&255,t}decodePickingColor(e){Jn(e instanceof Uint8Array);const[t,r,i]=e;return t+r*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:IP(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return(e=this.getAttributeManager())===null||e===void 0?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){for(const t of this.props.extensions)e=DP(e,t.getShaders.call(this,t));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const t=this.getAttributeManager(),{dataChanged:r}=e.changeFlags;if(r&&t)if(Array.isArray(r))for(const i of r)t.invalidateAll(i);else t.invalidateAll();if(t){const{props:i}=e,o=this.internalState.hasPickingBuffer,f=Number.isInteger(i.highlightedObjectIndex)||i.pickable||i.extensions.some(d=>d.getNeedsPickingBuffer.call(this,d));if(o!==f){this.internalState.hasPickingBuffer=f;const{pickingColors:d,instancePickingColors:m}=t.attributes,_=d||m;_&&(f&&_.constant&&(_.constant=!1,t.invalidate(_.id)),!_.value&&!f&&(_.constant=!0,_.value=[0,0,0]))}}}finalizeState(e){for(const r of this.getModels())r.delete();const t=this.getAttributeManager();t&&t.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const t of this.getModels())t.draw(e)}getPickingInfo({info:e,mode:t,sourceLayer:r}){const{index:i}=e;return i>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[i]),e}raiseError(e,t){var r,i;if(t&&(e=new Error("".concat(t,": ").concat(e.message),{cause:e})),!((r=(i=this.props).onError)!==null&&r!==void 0&&r.call(i,e))){var o,f;(o=this.context)===null||o===void 0||(f=o.onError)===null||f===void 0||f.call(o,e,this)}}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)===null||e===void 0?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const t=this.internalState.viewport;this.internalState.viewport=e,(!t||!ok({oldViewport:t,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const t=this.getAttributeManager();t&&(e==="all"?t.invalidateAll():t.invalidate(e))}updateAttributes(e){for(const t of this.getModels())this._setModelAttributes(t,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const t=this.props,r=this.getNumInstances(),i=this.getStartIndices();e.update({data:t.data,numInstances:r,startIndices:i,props:t,transitions:t.transitions,buffers:t.data.attributes,context:this});const o=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const t=e.update(),r=Object.create(this.props);for(const i in t)Object.defineProperty(r,i,{value:t[i]});return r}return this.props}calculateInstancePickingColors(e,{numInstances:t}){if(e.constant)return;const r=Math.floor(qi.length/3);if(this.internalState.usesPickingColorCache=!0,r<t){t>Cv&&Gt.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),qi=Su.allocate(qi,t,{size:3,copy:!0,maxCount:Math.max(t,Cv)});const i=Math.floor(qi.length/3),o=[];for(let f=r;f<i;f++)this.encodePickingColor(f,o),qi[f*3+0]=o[0],qi[f*3+1]=o[1],qi[f*3+2]=o[2]}e.value=qi.subarray(0,t*3)}_setModelAttributes(e,t){const r=this.getAttributeManager(),i=e.userData.excludeAttributes||{},o=r.getShaderAttributes(t,i);e.setAttributes(o)}disablePickingIndex(e){const t=this.props.data;if(!("attributes"in t)){this._disablePickingIndex(e);return}const{pickingColors:r,instancePickingColors:i}=this.getAttributeManager().attributes,o=r||i,f=o&&t.attributes&&t.attributes[o.id];if(f&&f.value){const d=f.value,m=this.encodePickingColor(e);for(let _=0;_<t.length;_++){const E=o.getVertexOffset(_);d[E]===m[0]&&d[E+1]===m[1]&&d[E+2]===m[2]&&this._disablePickingIndex(_)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:t,instancePickingColors:r}=this.getAttributeManager().attributes,i=t||r;if(!i)return;const o=i.getVertexOffset(e),f=i.getVertexOffset(e+1);i.buffer.subData({data:new Uint8Array(f-o),offset:o})}restorePickingColors(){const{pickingColors:e,instancePickingColors:t}=this.getAttributeManager().attributes,r=e||t;r&&(this.internalState.usesPickingColorCache&&r.value.buffer!==qi.buffer&&(r.value=qi.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0}))}_initialize(){Jn(!this.internalState),Jn(Number.isFinite(this.props.coordinateSystem)),hr(tk,this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new JP({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Gt.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new EP(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const t of this.props.extensions)t.initializeState.call(this,this.context,t);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){hr(ik,this,this===e);const{state:t,internalState:r}=e;this!==e&&(this.internalState=r,this.state=t,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(hr(nk,this,e),!e)return;const t=this.props,r=this.context,i=this.internalState,o=r.viewport,f=this._updateUniformTransition();i.propsInTransition=f,r.viewport=i.viewport||o,this.props=f;try{const d=this._getUpdateParams(),m=this.getModels();if(r.gl)this.updateState(d);else try{this.updateState(d)}catch{}for(const E of this.props.extensions)E.updateState.call(this,d,E);const _=this.getModels()[0]!==m[0];this._postUpdate(d,_)}finally{r.viewport=o,this.props=t,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){hr(rk,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({moduleParameters:e=null,uniforms:t={},parameters:r={}}){this._updateAttributeTransition();const i=this.props,o=this.context;this.props=this.internalState.propsInTransition||i;const f=this.props.opacity;t.opacity=Math.pow(f,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:d}=this.props,m=d&&d(t)||[0,0];Rs(o.gl,{polygonOffset:m}),ki(o.gl,r,()=>{const _={moduleParameters:e,uniforms:t,parameters:r,context:o};for(const E of this.props.extensions)E.draw.call(this,_,E);this.draw(_)})}finally{this.props=i}}getChangeFlags(){var e;return(e=this.internalState)===null||e===void 0?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:t}=this.internalState;for(const i in e)if(e[i]){let o=!1;switch(i){case"dataChanged":const f=e[i],d=t[i];f&&Array.isArray(d)&&(t.dataChanged=Array.isArray(f)?d.concat(f):f,o=!0);default:t[i]||(t[i]=e[i],o=!0)}o&&hr(ek,this,i,e)}const r=!!(t.dataChanged||t.updateTriggersChanged||t.propsChanged||t.extensionsChanged);t.propsOrDataChanged=r,t.somethingChanged=r||t.viewportChanged||t.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,t){const r=xP(e,t);if(r.updateTriggersChanged)for(const o in r.updateTriggersChanged)r.updateTriggersChanged[o]&&this.invalidateAttribute(o);if(r.transitionsChanged)for(const o in r.transitionsChanged){var i;this.internalState.uniformTransitions.add(o,t[o],e[o],(i=e.transitions)===null||i===void 0?void 0:i[o])}return this.setChangeFlags(r)}validateProps(){TP(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const t={pickingSelectedColor:e.picked?e.color:null},{highlightColor:r}=this.props;e.picked&&typeof r=="function"&&(t.pickingHighlightColor=r(e)),this.setModuleParameters(t),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new vP(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,t){const{props:r,oldProps:i}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:o}=this.state;o?.setInstanceCount(this.getNumInstances());const{autoHighlight:f,highlightedObjectIndex:d,highlightColor:m}=r;if(t||i.autoHighlight!==f||i.highlightedObjectIndex!==d||i.highlightColor!==m){const _={};f||(_.pickingSelectedColor=null),Array.isArray(m)&&(_.pickingHighlightColor=m),(t||d!==i.highlightedObjectIndex)&&(_.pickingSelectedColor=Number.isFinite(d)&&d>=0?this.encodePickingColor(d):null),this.setModuleParameters(_)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let t=!1;t=t||this.internalState.needsRedraw&&this.id;const r=this.getAttributeManager(),i=r?r.getNeedsRedraw(e):!1;if(t=t||i,t)for(const o of this.props.extensions)o.onNeedsRedraw.call(this,o);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,t}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}I(ls,"defaultProps",ak);I(ls,"layerName","Layer");const Ak="compositeLayer.renderLayers";class Rp extends ls{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:t}=e;return t&&t.__source&&t.__source.parent&&t.__source.parent.id===this.id&&(e.object=t.__source.object,e.index=t.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,t){return t&&t.length}getSubLayerClass(e,t){const{_subLayerProps:r}=this.props;return r&&r[e]&&r[e].type||t}getSubLayerRow(e,t,r){return e.__source={parent:this,object:t,index:r},e}getSubLayerAccessor(e){if(typeof e=="function"){const t={index:-1,data:this.props.data,target:[]};return(r,i)=>r&&r.__source?(t.index=r.__source.index,e(r.__source.object,t)):e(r,i)}return e}getSubLayerProps(e={}){var t;const{opacity:r,pickable:i,visible:o,parameters:f,getPolygonOffset:d,highlightedObjectIndex:m,autoHighlight:_,highlightColor:E,coordinateSystem:T,coordinateOrigin:C,wrapLongitude:P,positionFormat:R,modelMatrix:U,extensions:j,fetch:G,operation:Q,_subLayerProps:X}=this.props,q={id:"",updateTriggers:{},opacity:r,pickable:i,visible:o,parameters:f,getPolygonOffset:d,highlightedObjectIndex:m,autoHighlight:_,highlightColor:E,coordinateSystem:T,coordinateOrigin:C,wrapLongitude:P,positionFormat:R,modelMatrix:U,extensions:j,fetch:G,operation:Q},ee=X&&e.id&&X[e.id],ie=ee&&ee.updateTriggers,pe=e.id||"sublayer";if(ee){const ue=this.props[So],me=e.type?e.type._propTypes:{};for(const Ce in ee){const ge=me[Ce]||ue[Ce];ge&&ge.type==="accessor"&&(ee[Ce]=this.getSubLayerAccessor(ee[Ce]))}}Object.assign(q,e,ee),q.id="".concat(this.props.id,"-").concat(pe),q.updateTriggers={all:(t=this.props.updateTriggers)===null||t===void 0?void 0:t.all,...e.updateTriggers,...ie};for(const ue of j){const me=ue.getSubLayerProps.call(this,ue);me&&Object.assign(q,me,{updateTriggers:Object.assign(q.updateTriggers,me.updateTriggers)})}return q}_updateAutoHighlight(e){for(const t of this.getSubLayers())t.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,t){let r=this.internalState.subLayers;const i=!r||this.needsUpdate();if(i){const o=this.renderLayers();r=Sp(o,Boolean),this.internalState.subLayers=r}hr(Ak,this,i,r);for(const o of r)o.parent=this}}I(Rp,"layerName","CompositeLayer");const lk=typeof window<"u"?Ue.useLayoutEffect:Ue.useEffect;function Qf(n,e){for(;n;){if(n===e)return!0;n=Object.getPrototypeOf(n)}return!1}const uk={position:"absolute",zIndex:-1};function Zw(n,e){if(typeof n=="function")return n(e);if(Array.isArray(n))return n.map(t=>Zw(t,e));if(d0(n)){if(ck(n))return e.style=uk,Ue.cloneElement(n,e);if(fk(n))return Ue.cloneElement(n,e)}return n}function d0(n){return n&&typeof n=="object"&&"type"in n||!1}function ck(n){var e;return(e=n.props)===null||e===void 0?void 0:e.mapStyle}function fk(n){const e=n.type;return e&&e.deckGLViewProps}function Og(n){if(typeof n=="function")return Ue.createElement(ZA,{},n);if(Array.isArray(n))return n.map(Og);if(d0(n)){if(n.type===Ue.Fragment)return Og(n.props.children);if(Qf(n.type,ZA))return n}return n}function hk({children:n,layers:e=[],views:t=null}){const r=[],i=[],o={};return Ue.Children.forEach(Og(n),f=>{if(d0(f)){const d=f.type;if(Qf(d,ls)){const m=dk(d,f.props);i.push(m)}else r.push(f);if(Qf(d,ZA)&&d!==ZA&&f.props.id){const m=new d(f.props);o[m.id]=m}}else f&&r.push(f)}),Object.keys(o).length>0&&(Array.isArray(t)?t.forEach(f=>{o[f.id]=f}):t&&(o[t.id]=t),t=Object.values(o)),e=i.length>0?[...i,...e]:e,{layers:e,children:r,views:t}}function dk(n,e){const t={},r=n.defaultProps||{};for(const i in e)r[i]!==e[i]&&(t[i]=e[i]);return new n(t)}function gk({children:n,deck:e,ContextProvider:t}){const{viewManager:r}=e||{};if(!r||!r.views.length)return[];const i={},o=r.views[0].id;for(const f of n){let d=o,m=f;d0(f)&&Qf(f.type,ZA)&&(d=f.props.id||o,m=f.props.children);const _=r.getViewport(d),E=r.getViewState(d);if(_){E.padding=_.padding;const{x:T,y:C,width:P,height:R}=_;m=Zw(m,{x:T,y:C,width:P,height:R,viewport:_,viewState:E}),i[d]||(i[d]={viewport:_,children:[]}),i[d].children.push(m)}}return Object.keys(i).map(f=>{const{viewport:d,children:m}=i[f],{x:_,y:E,width:T,height:C}=d,P={position:"absolute",left:_,top:E,width:T,height:C},R="view-".concat(f),U=Ue.createElement("div",{key:R,id:R,style:P},...m);if(t){const j={viewport:d,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:G=>{G.viewId=f,e._onViewStateChange(G)}};return Ue.createElement(t,{key:R,value:j},U)}return U})}const pk={mixBlendMode:null};function mk({width:n,height:e,style:t}){const r={position:"absolute",zIndex:0,left:0,top:0,width:n,height:e},i={left:0,top:0};if(t)for(const o in t)o in pk?i[o]=t[o]:r[o]=t[o];return{containerStyle:r,canvasStyle:i}}function vk(n){return{get deck(){return n.deck},pickObject:e=>n.deck.pickObject(e),pickMultipleObjects:e=>n.deck.pickMultipleObjects(e),pickObjects:e=>n.deck.pickObjects(e)}}function qw(n){n.redrawReason&&(n.deck._drawLayers(n.redrawReason),n.redrawReason=null)}function yk(n,e,t){const r=new e({...t,_customRender:i=>{n.redrawReason=i;const o=r.getViewports();n.lastRenderedViewports!==o?n.forceUpdate():qw(n)}});return r}const Kw=Ue.forwardRef((n,e)=>{const[t,r]=Ue.useState(0),o=Ue.useRef({control:null,version:t,forceUpdate:()=>r(ee=>ee+1)}).current,f=Ue.useRef(null),d=Ue.useRef(null),m=Ue.useMemo(()=>hk(n),[n.layers,n.views,n.children]);let _=!0;const E=ee=>{var ie;return _&&n.viewState?(o.viewStateUpdateRequested=ee,null):(o.viewStateUpdateRequested=null,(ie=n.onViewStateChange)===null||ie===void 0?void 0:ie.call(n,ee))},T=ee=>{if(_)o.interactionStateUpdateRequested=ee;else{var ie;o.interactionStateUpdateRequested=null,(ie=n.onInteractionStateChange)===null||ie===void 0||ie.call(n,ee)}},C=Ue.useMemo(()=>{const ee={...n,style:null,width:"100%",height:"100%",parent:f.current,canvas:d.current,layers:m.layers,views:m.views,onViewStateChange:E,onInteractionStateChange:T};return delete ee._customRender,o.deck&&o.deck.setProps(ee),ee},[n]);Ue.useEffect(()=>{const ee=n.Deck||h0;return o.deck=yk(o,ee,{...C,parent:f.current,canvas:d.current}),()=>{var ie;return(ie=o.deck)===null||ie===void 0?void 0:ie.finalize()}},[]),lk(()=>{qw(o);const{viewStateUpdateRequested:ee,interactionStateUpdateRequested:ie}=o;ee&&E(ee),ie&&T(ie)}),Ue.useImperativeHandle(e,()=>vk(o),[]);const P=o.deck&&o.deck.isInitialized?o.deck.getViewports():void 0,{ContextProvider:R,width:U,height:j,id:G,style:Q}=n,{containerStyle:X,canvasStyle:q}=Ue.useMemo(()=>mk({width:U,height:j,style:Q}),[U,j,Q]);if(!o.viewStateUpdateRequested&&o.lastRenderedViewports===P||o.version!==t){o.lastRenderedViewports=P,o.version=t;const ee=gk({children:m.children,deck:o.deck,ContextProvider:R}),ie=Ue.createElement("canvas",{key:"canvas",id:G||"deckgl-overlay",ref:d,style:q});o.control=Ue.createElement("div",{id:"".concat(G||"deckgl","-wrapper"),ref:f,style:X},[ie,ee])}return _=!1,o.control});Kw.defaultProps=h0.defaultProps;function Op(n){const{children:e}=n;return e&&e.length>0}function cu(n){const{zoom:e}=n;return e!==void 0}function Od(n){return n&&!!n.aggregate}var LA;(function(n){n.ALL="ALL",n.INCOMING="INCOMING",n.OUTGOING="OUTGOING",n.BETWEEN="BETWEEN"})(LA||(LA={}));function wn(n){for(var e=n.length/6|0,t=new Array(e),r=0;r<e;)t[r]="#"+n.slice(r*6,++r*6);return t}function Al(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function Wu(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function Lo(){}var _a=.7,qA=1/_a,DA="\\s*([+-]?\\d+)\\s*",Cu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_k=/^#([0-9a-f]{3,8})$/,wk=new RegExp(`^rgb\\(${DA},${DA},${DA}\\)$`),bk=new RegExp(`^rgb\\(${rs},${rs},${rs}\\)$`),Ek=new RegExp(`^rgba\\(${DA},${DA},${DA},${Cu}\\)$`),Tk=new RegExp(`^rgba\\(${rs},${rs},${rs},${Cu}\\)$`),xk=new RegExp(`^hsl\\(${Cu},${rs},${rs}\\)$`),Sk=new RegExp(`^hsla\\(${Cu},${rs},${rs},${Cu}\\)$`),Mv={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Al(Lo,wa,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:Lv,formatHex:Lv,formatHex8:Ck,formatHsl:Mk,formatRgb:Pv,toString:Pv});function Lv(){return this.rgb().formatHex()}function Ck(){return this.rgb().formatHex8()}function Mk(){return Jw(this).formatHsl()}function Pv(){return this.rgb().formatRgb()}function wa(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=_k.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?kv(e):t===3?new Qn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Af(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Af(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=wk.exec(n))?new Qn(e[1],e[2],e[3],1):(e=bk.exec(n))?new Qn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ek.exec(n))?Af(e[1],e[2],e[3],e[4]):(e=Tk.exec(n))?Af(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=xk.exec(n))?Ov(e[1],e[2]/100,e[3]/100,1):(e=Sk.exec(n))?Ov(e[1],e[2]/100,e[3]/100,e[4]):Mv.hasOwnProperty(n)?kv(Mv[n]):n==="transparent"?new Qn(NaN,NaN,NaN,0):null}function kv(n){return new Qn(n>>16&255,n>>8&255,n&255,1)}function Af(n,e,t,r){return r<=0&&(n=e=t=NaN),new Qn(n,e,t,r)}function Dp(n){return n instanceof Lo||(n=wa(n)),n?(n=n.rgb(),new Qn(n.r,n.g,n.b,n.opacity)):new Qn}function Mu(n,e,t,r){return arguments.length===1?Dp(n):new Qn(n,e,t,r??1)}function Qn(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}Al(Qn,Mu,Wu(Lo,{brighter(n){return n=n==null?qA:Math.pow(qA,n),new Qn(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?_a:Math.pow(_a,n),new Qn(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Qn(pa(this.r),pa(this.g),pa(this.b),Yf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Iv,formatHex:Iv,formatHex8:Lk,formatRgb:Rv,toString:Rv}));function Iv(){return`#${ga(this.r)}${ga(this.g)}${ga(this.b)}`}function Lk(){return`#${ga(this.r)}${ga(this.g)}${ga(this.b)}${ga((isNaN(this.opacity)?1:this.opacity)*255)}`}function Rv(){const n=Yf(this.opacity);return`${n===1?"rgb(":"rgba("}${pa(this.r)}, ${pa(this.g)}, ${pa(this.b)}${n===1?")":`, ${n})`}`}function Yf(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function pa(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function ga(n){return n=pa(n),(n<16?"0":"")+n.toString(16)}function Ov(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Mi(n,e,t,r)}function Jw(n){if(n instanceof Mi)return new Mi(n.h,n.s,n.l,n.opacity);if(n instanceof Lo||(n=wa(n)),!n)return new Mi;if(n instanceof Mi)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),o=Math.max(e,t,r),f=NaN,d=o-i,m=(o+i)/2;return d?(e===o?f=(t-r)/d+(t<r)*6:t===o?f=(r-e)/d+2:f=(e-t)/d+4,d/=m<.5?o+i:2-o-i,f*=60):d=m>0&&m<1?0:f,new Mi(f,d,m,n.opacity)}function Pk(n,e,t,r){return arguments.length===1?Jw(n):new Mi(n,e,t,r??1)}function Mi(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}Al(Mi,Pk,Wu(Lo,{brighter(n){return n=n==null?qA:Math.pow(qA,n),new Mi(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?_a:Math.pow(_a,n),new Mi(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new Qn(Dd(n>=240?n-240:n+120,i,r),Dd(n,i,r),Dd(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new Mi(Dv(this.h),lf(this.s),lf(this.l),Yf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Yf(this.opacity);return`${n===1?"hsl(":"hsla("}${Dv(this.h)}, ${lf(this.s)*100}%, ${lf(this.l)*100}%${n===1?")":`, ${n})`}`}}));function Dv(n){return n=(n||0)%360,n<0?n+360:n}function lf(n){return Math.max(0,Math.min(1,n||0))}function Dd(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const eb=Math.PI/180,tb=180/Math.PI,$f=18,nb=.96422,rb=1,ib=.82521,sb=4/29,FA=6/29,ob=3*FA*FA,kk=FA*FA*FA;function ab(n){if(n instanceof is)return new is(n.l,n.a,n.b,n.opacity);if(n instanceof Ps)return Ab(n);n instanceof Qn||(n=Dp(n));var e=Ud(n.r),t=Ud(n.g),r=Ud(n.b),i=Fd((.2225045*e+.7168786*t+.0606169*r)/rb),o,f;return e===t&&t===r?o=f=i:(o=Fd((.4360747*e+.3850649*t+.1430804*r)/nb),f=Fd((.0139322*e+.0971045*t+.7141733*r)/ib)),new is(116*i-16,500*(o-i),200*(i-f),n.opacity)}function Ik(n,e,t,r){return arguments.length===1?ab(n):new is(n,e,t,r??1)}function is(n,e,t,r){this.l=+n,this.a=+e,this.b=+t,this.opacity=+r}Al(is,Ik,Wu(Lo,{brighter(n){return new is(this.l+$f*(n??1),this.a,this.b,this.opacity)},darker(n){return new is(this.l-$f*(n??1),this.a,this.b,this.opacity)},rgb(){var n=(this.l+16)/116,e=isNaN(this.a)?n:n+this.a/500,t=isNaN(this.b)?n:n-this.b/200;return e=nb*Bd(e),n=rb*Bd(n),t=ib*Bd(t),new Qn(Nd(3.1338561*e-1.6168667*n-.4906146*t),Nd(-.9787684*e+1.9161415*n+.033454*t),Nd(.0719453*e-.2289914*n+1.4052427*t),this.opacity)}}));function Fd(n){return n>kk?Math.pow(n,1/3):n/ob+sb}function Bd(n){return n>FA?n*n*n:ob*(n-sb)}function Nd(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function Ud(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function Rk(n){if(n instanceof Ps)return new Ps(n.h,n.c,n.l,n.opacity);if(n instanceof is||(n=ab(n)),n.a===0&&n.b===0)return new Ps(NaN,0<n.l&&n.l<100?0:NaN,n.l,n.opacity);var e=Math.atan2(n.b,n.a)*tb;return new Ps(e<0?e+360:e,Math.sqrt(n.a*n.a+n.b*n.b),n.l,n.opacity)}function g0(n,e,t,r){return arguments.length===1?Rk(n):new Ps(n,e,t,r??1)}function Ps(n,e,t,r){this.h=+n,this.c=+e,this.l=+t,this.opacity=+r}function Ab(n){if(isNaN(n.h))return new is(n.l,0,0,n.opacity);var e=n.h*eb;return new is(n.l,Math.cos(e)*n.c,Math.sin(e)*n.c,n.opacity)}Al(Ps,g0,Wu(Lo,{brighter(n){return new Ps(this.h,this.c,this.l+$f*(n??1),this.opacity)},darker(n){return new Ps(this.h,this.c,this.l-$f*(n??1),this.opacity)},rgb(){return Ab(this).rgb()}}));var lb=-.14861,Fp=1.78277,Bp=-.29227,p0=-.90649,Lu=1.97294,Fv=Lu*p0,Bv=Lu*Fp,Nv=Fp*Bp-p0*lb;function Ok(n){if(n instanceof ma)return new ma(n.h,n.s,n.l,n.opacity);n instanceof Qn||(n=Dp(n));var e=n.r/255,t=n.g/255,r=n.b/255,i=(Nv*r+Fv*e-Bv*t)/(Nv+Fv-Bv),o=r-i,f=(Lu*(t-i)-Bp*o)/p0,d=Math.sqrt(f*f+o*o)/(Lu*i*(1-i)),m=d?Math.atan2(f,o)*tb-120:NaN;return new ma(m<0?m+360:m,d,i,n.opacity)}function Mo(n,e,t,r){return arguments.length===1?Ok(n):new ma(n,e,t,r??1)}function ma(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}Al(ma,Mo,Wu(Lo,{brighter(n){return n=n==null?qA:Math.pow(qA,n),new ma(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?_a:Math.pow(_a,n),new ma(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=isNaN(this.h)?0:(this.h+120)*eb,e=+this.l,t=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(n),i=Math.sin(n);return new Qn(255*(e+t*(lb*r+Fp*i)),255*(e+t*(Bp*r+p0*i)),255*(e+t*(Lu*r)),this.opacity)}}));function Dk(n,e,t,r,i){var o=n*n,f=o*n;return((1-3*n+3*o-f)*e+(4-6*o+3*f)*t+(1+3*n+3*o-3*f)*r+f*i)/6}function ub(n){var e=n.length-1;return function(t){var r=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),i=n[r],o=n[r+1],f=r>0?n[r-1]:2*i-o,d=r<e-1?n[r+2]:2*o-i;return Dk((t-r/e)*e,f,i,o,d)}}const m0=n=>()=>n;function cb(n,e){return function(t){return n+t*e}}function Fk(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function Bk(n,e){var t=e-n;return t?cb(n,t>180||t<-180?t-360*Math.round(t/360):t):m0(isNaN(n)?e:n)}function Nk(n){return(n=+n)==1?BA:function(e,t){return t-e?Fk(e,t,n):m0(isNaN(e)?t:e)}}function BA(n,e){var t=e-n;return t?cb(n,t):m0(isNaN(n)?e:n)}const Uv=(function n(e){var t=Nk(e);function r(i,o){var f=t((i=Mu(i)).r,(o=Mu(o)).r),d=t(i.g,o.g),m=t(i.b,o.b),_=BA(i.opacity,o.opacity);return function(E){return i.r=f(E),i.g=d(E),i.b=m(E),i.opacity=_(E),i+""}}return r.gamma=n,r})(1);function Uk(n){return function(e){var t=e.length,r=new Array(t),i=new Array(t),o=new Array(t),f,d;for(f=0;f<t;++f)d=Mu(e[f]),r[f]=d.r||0,i[f]=d.g||0,o[f]=d.b||0;return r=n(r),i=n(i),o=n(o),d.opacity=1,function(m){return d.r=r(m),d.g=i(m),d.b=o(m),d+""}}}var fb=Uk(ub);function zk(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,r=e.slice(),i;return function(o){for(i=0;i<t;++i)r[i]=n[i]*(1-o)+e[i]*o;return r}}function Vk(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function jk(n,e){var t=e?e.length:0,r=n?Math.min(t,n.length):0,i=new Array(r),o=new Array(t),f;for(f=0;f<r;++f)i[f]=v0(n[f],e[f]);for(;f<t;++f)o[f]=e[f];return function(d){for(f=0;f<r;++f)o[f]=i[f](d);return o}}function Gk(n,e){var t=new Date;return n=+n,e=+e,function(r){return t.setTime(n*(1-r)+e*r),t}}function Xf(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function Hk(n,e){var t={},r={},i;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in n?t[i]=v0(n[i],e[i]):r[i]=e[i];return function(o){for(i in t)r[i]=t[i](o);return r}}var Dg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zd=new RegExp(Dg.source,"g");function Wk(n){return function(){return n}}function Qk(n){return function(e){return n(e)+""}}function Yk(n,e){var t=Dg.lastIndex=zd.lastIndex=0,r,i,o,f=-1,d=[],m=[];for(n=n+"",e=e+"";(r=Dg.exec(n))&&(i=zd.exec(e));)(o=i.index)>t&&(o=e.slice(t,o),d[f]?d[f]+=o:d[++f]=o),(r=r[0])===(i=i[0])?d[f]?d[f]+=i:d[++f]=i:(d[++f]=null,m.push({i:f,x:Xf(r,i)})),t=zd.lastIndex;return t<e.length&&(o=e.slice(t),d[f]?d[f]+=o:d[++f]=o),d.length<2?m[0]?Qk(m[0].x):Wk(e):(e=m.length,function(_){for(var E=0,T;E<e;++E)d[(T=m[E]).i]=T.x(_);return d.join("")})}function v0(n,e){var t=typeof e,r;return e==null||t==="boolean"?m0(e):(t==="number"?Xf:t==="string"?(r=wa(e))?(e=r,Uv):Yk:e instanceof wa?Uv:e instanceof Date?Gk:Vk(e)?zk:Array.isArray(e)?jk:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Hk:Xf)(n,e)}function hb(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function db(n){return(function e(t){t=+t;function r(i,o){var f=n((i=Mo(i)).h,(o=Mo(o)).h),d=BA(i.s,o.s),m=BA(i.l,o.l),_=BA(i.opacity,o.opacity);return function(E){return i.h=f(E),i.s=d(E),i.l=m(Math.pow(E,t)),i.opacity=_(E),i+""}}return r.gamma=e,r})(1)}db(Bk);var gb=db(BA);const Yn=n=>fb(n[n.length-1]);var pb=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(wn);Yn(pb);var mb=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(wn);Yn(mb);var vb=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(wn);Yn(vb);var yb=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(wn);Yn(yb);var _b=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(wn);Yn(_b);var wb=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(wn);Yn(wb);var bb=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(wn);Yn(bb);var Eb=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(wn);Yn(Eb);var Tb=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(wn);Yn(Tb);var xb=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(wn);Yn(xb);var Sb=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(wn);Yn(Sb);var Cb=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(wn);Yn(Cb);var Mb=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(wn);Yn(Mb);var Lb=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(wn);Yn(Lb);var Pb=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(wn);Yn(Pb);var kb=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(wn);Yn(kb);var Ib=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(wn);Yn(Ib);var Rb=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(wn);Yn(Rb);var $k=gb(Mo(-100,.75,.35),Mo(80,1.5,.8)),Xk=gb(Mo(260,.75,.35),Mo(80,1.5,.8));Mo();function y0(n){var e=n.length;return function(t){return n[Math.max(0,Math.min(e-1,Math.floor(t*e)))]}}const Zk=y0(wn("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var qk=y0(wn("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Kk=y0(wn("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Jk=y0(wn("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function NA(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function Zf(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function Ob(n){let e,t,r;n.length!==2?(e=NA,t=(d,m)=>NA(n(d),m),r=(d,m)=>n(d)-m):(e=n===NA||n===Zf?n:eI,t=n,r=n);function i(d,m,_=0,E=d.length){if(_<E){if(e(m,m)!==0)return E;do{const T=_+E>>>1;t(d[T],m)<0?_=T+1:E=T}while(_<E)}return _}function o(d,m,_=0,E=d.length){if(_<E){if(e(m,m)!==0)return E;do{const T=_+E>>>1;t(d[T],m)<=0?_=T+1:E=T}while(_<E)}return _}function f(d,m,_=0,E=d.length){const T=i(d,m,_,E-1);return T>_&&r(d[T-1],m)>-r(d[T],m)?T-1:T}return{left:i,center:f,right:o}}function eI(){return 0}function tI(n){return n===null?NaN:+n}const nI=Ob(NA),rI=nI.left;Ob(tI).center;function Fg(n,e){let t,r;if(e===void 0)for(const i of n)i!=null&&(t===void 0?i>=i&&(t=r=i):(t>i&&(t=i),r<i&&(r=i)));else{let i=-1;for(let o of n)(o=e(o,++i,n))!=null&&(t===void 0?o>=o&&(t=r=o):(t>o&&(t=o),r<o&&(r=o)))}return[t,r]}class iI extends Map{constructor(e,t=aI){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(zv(this,e))}has(e){return super.has(zv(this,e))}set(e,t){return super.set(sI(this,e),t)}delete(e){return super.delete(oI(this,e))}}function zv({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):t}function sI({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function oI({_intern:n,_key:e},t){const r=e(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function aI(n){return n!==null&&typeof n=="object"?n.valueOf():n}function AI(n){return n}function Db(n,e,...t){return lI(n,AI,e,t)}function lI(n,e,t,r){return(function i(o,f){if(f>=r.length)return t(o);const d=new iI,m=r[f++];let _=-1;for(const E of o){const T=m(E,++_,o),C=d.get(T);C?C.push(E):d.set(T,[E])}for(const[E,T]of d)d.set(E,i(T,f));return e(d)})(n,0)}function Fb(n,e){let t;if(e===void 0)for(const r of n)r!=null&&(t>r||t===void 0&&r>=r)&&(t=r);else{let r=-1;for(let i of n)(i=e(i,++r,n))!=null&&(t>i||t===void 0&&i>=i)&&(t=i)}return t}function Bb(n,e,t){n=+n,e=+e,t=(i=arguments.length)<2?(e=n,n=0,1):i<3?1:+t;for(var r=-1,i=Math.max(0,Math.ceil((e-n)/t))|0,o=new Array(i);++r<i;)o[r]=n+r*t;return o}function _f(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function uI(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function Nb(n){let e,t,r;n.length!==2?(e=_f,t=(d,m)=>_f(n(d),m),r=(d,m)=>n(d)-m):(e=n===_f||n===uI?n:cI,t=n,r=n);function i(d,m,_=0,E=d.length){if(_<E){if(e(m,m)!==0)return E;do{const T=_+E>>>1;t(d[T],m)<0?_=T+1:E=T}while(_<E)}return _}function o(d,m,_=0,E=d.length){if(_<E){if(e(m,m)!==0)return E;do{const T=_+E>>>1;t(d[T],m)<=0?_=T+1:E=T}while(_<E)}return _}function f(d,m,_=0,E=d.length){const T=i(d,m,_,E-1);return T>_&&r(d[T-1],m)>-r(d[T],m)?T-1:T}return{left:i,center:f,right:o}}function cI(){return 0}function fI(n){return n===null?NaN:+n}const hI=Nb(_f),dI=hI.right;Nb(fI).center;var Bg=Math.sqrt(50),Ng=Math.sqrt(10),Ug=Math.sqrt(2);function gI(n,e,t){var r,i=-1,o,f,d;if(e=+e,n=+n,t=+t,n===e&&t>0)return[n];if((r=e<n)&&(o=n,n=e,e=o),(d=Ub(n,e,t))===0||!isFinite(d))return[];if(d>0){let m=Math.round(n/d),_=Math.round(e/d);for(m*d<n&&++m,_*d>e&&--_,f=new Array(o=_-m+1);++i<o;)f[i]=(m+i)*d}else{d=-d;let m=Math.round(n*d),_=Math.round(e*d);for(m/d<n&&++m,_/d>e&&--_,f=new Array(o=_-m+1);++i<o;)f[i]=(m+i)/d}return r&&f.reverse(),f}function Ub(n,e,t){var r=(e-n)/Math.max(0,t),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Bg?10:o>=Ng?5:o>=Ug?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Bg?10:o>=Ng?5:o>=Ug?2:1)}function pI(n,e,t){var r=Math.abs(e-n)/Math.max(0,t),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Bg?i*=10:o>=Ng?i*=5:o>=Ug&&(i*=2),e<n?-i:i}function zb(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function Vb(n,e){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}function mI(n){return function(){return n}}function vI(n){return+n}var Vv=[0,1];function hi(n){return n}function zg(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:mI(isNaN(e)?NaN:.5)}function yI(n,e){var t;return n>e&&(t=n,n=e,e=t),function(r){return Math.max(n,Math.min(e,r))}}function _I(n,e,t){var r=n[0],i=n[1],o=e[0],f=e[1];return i<r?(r=zg(i,r),o=t(f,o)):(r=zg(r,i),o=t(o,f)),function(d){return o(r(d))}}function wI(n,e,t){var r=Math.min(n.length,e.length)-1,i=new Array(r),o=new Array(r),f=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++f<r;)i[f]=zg(n[f],n[f+1]),o[f]=t(e[f],e[f+1]);return function(d){var m=dI(n,d,1,r)-1;return o[m](i[m](d))}}function jb(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function Gb(){var n=Vv,e=Vv,t=v0,r,i,o,f=hi,d,m,_;function E(){var C=Math.min(n.length,e.length);return f!==hi&&(f=yI(n[0],n[C-1])),d=C>2?wI:_I,m=_=null,T}function T(C){return C==null||isNaN(C=+C)?o:(m||(m=d(n.map(r),e,t)))(r(f(C)))}return T.invert=function(C){return f(i((_||(_=d(e,n.map(r),Xf)))(C)))},T.domain=function(C){return arguments.length?(n=Array.from(C,vI),E()):n.slice()},T.range=function(C){return arguments.length?(e=Array.from(C),E()):e.slice()},T.rangeRound=function(C){return e=Array.from(C),t=hb,E()},T.clamp=function(C){return arguments.length?(f=C?!0:hi,E()):f!==hi},T.interpolate=function(C){return arguments.length?(t=C,E()):t},T.unknown=function(C){return arguments.length?(o=C,T):o},function(C,P){return r=C,i=P,E()}}function bI(){return Gb()(hi,hi)}function EI(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function qf(n,e){if((t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"))<0)return null;var t,r=n.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+n.slice(t+1)]}function KA(n){return n=qf(Math.abs(n)),n?n[1]:NaN}function TI(n,e){return function(t,r){for(var i=t.length,o=[],f=0,d=n[0],m=0;i>0&&d>0&&(m+d+1>r&&(d=Math.max(1,r-m)),o.push(t.substring(i-=d,i+d)),!((m+=d+1)>r));)d=n[f=(f+1)%n.length];return o.reverse().join(e)}}function xI(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var SI=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Kf(n){if(!(e=SI.exec(n)))throw new Error("invalid format: "+n);var e;return new Np({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Kf.prototype=Np.prototype;function Np(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}Np.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function CI(n){e:for(var e=n.length,t=1,r=-1,i;t<e;++t)switch(n[t]){case".":r=i=t;break;case"0":r===0&&(r=t),i=t;break;default:if(!+n[t])break e;r>0&&(r=0);break}return r>0?n.slice(0,r)+n.slice(i+1):n}var Hb;function MI(n,e){var t=qf(n,e);if(!t)return n+"";var r=t[0],i=t[1],o=i-(Hb=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,f=r.length;return o===f?r:o>f?r+new Array(o-f+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+qf(n,Math.max(0,e+o-1))[0]}function jv(n,e){var t=qf(n,e);if(!t)return n+"";var r=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Gv={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:EI,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>jv(n*100,e),r:jv,s:MI,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function Hv(n){return n}var Wv=Array.prototype.map,Qv=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function LI(n){var e=n.grouping===void 0||n.thousands===void 0?Hv:TI(Wv.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",r=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",o=n.numerals===void 0?Hv:xI(Wv.call(n.numerals,String)),f=n.percent===void 0?"%":n.percent+"",d=n.minus===void 0?"":n.minus+"",m=n.nan===void 0?"NaN":n.nan+"";function _(T){T=Kf(T);var C=T.fill,P=T.align,R=T.sign,U=T.symbol,j=T.zero,G=T.width,Q=T.comma,X=T.precision,q=T.trim,ee=T.type;ee==="n"?(Q=!0,ee="g"):Gv[ee]||(X===void 0&&(X=12),q=!0,ee="g"),(j||C==="0"&&P==="=")&&(j=!0,C="0",P="=");var ie=U==="$"?t:U==="#"&&/[boxX]/.test(ee)?"0"+ee.toLowerCase():"",pe=U==="$"?r:/[%p]/.test(ee)?f:"",ue=Gv[ee],me=/[defgprs%]/.test(ee);X=X===void 0?6:/[gprs]/.test(ee)?Math.max(1,Math.min(21,X)):Math.max(0,Math.min(20,X));function Ce(ge){var ke=ie,Me=pe,ze,We,tt;if(ee==="c")Me=ue(ge)+Me,ge="";else{ge=+ge;var _t=ge<0||1/ge<0;if(ge=isNaN(ge)?m:ue(Math.abs(ge),X),q&&(ge=CI(ge)),_t&&+ge==0&&R!=="+"&&(_t=!1),ke=(_t?R==="("?R:d:R==="-"||R==="("?"":R)+ke,Me=(ee==="s"?Qv[8+Hb/3]:"")+Me+(_t&&R==="("?")":""),me){for(ze=-1,We=ge.length;++ze<We;)if(tt=ge.charCodeAt(ze),48>tt||tt>57){Me=(tt===46?i+ge.slice(ze+1):ge.slice(ze))+Me,ge=ge.slice(0,ze);break}}}Q&&!j&&(ge=e(ge,1/0));var De=ke.length+ge.length+Me.length,Qe=De<G?new Array(G-De+1).join(C):"";switch(Q&&j&&(ge=e(Qe+ge,Qe.length?G-Me.length:1/0),Qe=""),P){case"<":ge=ke+ge+Me+Qe;break;case"=":ge=ke+Qe+ge+Me;break;case"^":ge=Qe.slice(0,De=Qe.length>>1)+ke+ge+Me+Qe.slice(De);break;default:ge=Qe+ke+ge+Me;break}return o(ge)}return Ce.toString=function(){return T+""},Ce}function E(T,C){var P=_((T=Kf(T),T.type="f",T)),R=Math.max(-8,Math.min(8,Math.floor(KA(C)/3)))*3,U=Math.pow(10,-R),j=Qv[8+R/3];return function(G){return P(U*G)+j}}return{format:_,formatPrefix:E}}var uf,Wb,Qb;PI({thousands:",",grouping:[3],currency:["$",""]});function PI(n){return uf=LI(n),Wb=uf.format,Qb=uf.formatPrefix,uf}function kI(n){return Math.max(0,-KA(Math.abs(n)))}function II(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(KA(e)/3)))*3-KA(Math.abs(n)))}function RI(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,KA(e)-KA(n))+1}function OI(n,e,t,r){var i=pI(n,e,t),o;switch(r=Kf(r??",f"),r.type){case"s":{var f=Math.max(Math.abs(n),Math.abs(e));return r.precision==null&&!isNaN(o=II(i,f))&&(r.precision=o),Qb(r,f)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=RI(i,Math.max(Math.abs(n),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=kI(i))&&(r.precision=o-(r.type==="%")*2);break}}return Wb(r)}function Up(n){var e=n.domain;return n.ticks=function(t){var r=e();return gI(r[0],r[r.length-1],t??10)},n.tickFormat=function(t,r){var i=e();return OI(i[0],i[i.length-1],t??10,r)},n.nice=function(t){t==null&&(t=10);var r=e(),i=0,o=r.length-1,f=r[i],d=r[o],m,_,E=10;for(d<f&&(_=f,f=d,d=_,_=i,i=o,o=_);E-- >0;){if(_=Ub(f,d,t),_===m)return r[i]=f,r[o]=d,e(r);if(_>0)f=Math.floor(f/_)*_,d=Math.ceil(d/_)*_;else if(_<0)f=Math.ceil(f*_)/_,d=Math.floor(d*_)/_;else break;m=_}return n},n}function Yb(){var n=bI();return n.copy=function(){return jb(n,Yb())},zb.apply(n,arguments),Up(n)}function Yv(n){return function(e){return e<0?-Math.pow(-e,n):Math.pow(e,n)}}function DI(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function FI(n){return n<0?-n*n:n*n}function $b(n){var e=n(hi,hi),t=1;function r(){return t===1?n(hi,hi):t===.5?n(DI,FI):n(Yv(t),Yv(1/t))}return e.exponent=function(i){return arguments.length?(t=+i,r()):t},Up(e)}function zp(){var n=$b(Gb());return n.copy=function(){return jb(n,zp()).exponent(n.exponent())},zb.apply(n,arguments),n}function BI(){return zp.apply(null,arguments).exponent(.5)}var Vd=new Date,jd=new Date;function Us(n,e,t,r){function i(o){return n(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=function(o){return n(o=new Date(+o)),o},i.ceil=function(o){return n(o=new Date(o-1)),e(o,1),n(o),o},i.round=function(o){var f=i(o),d=i.ceil(o);return o-f<d-o?f:d},i.offset=function(o,f){return e(o=new Date(+o),f==null?1:Math.floor(f)),o},i.range=function(o,f,d){var m=[],_;if(o=i.ceil(o),d=d==null?1:Math.floor(d),!(o<f)||!(d>0))return m;do m.push(_=new Date(+o)),e(o,d),n(o);while(_<o&&o<f);return m},i.filter=function(o){return Us(function(f){if(f>=f)for(;n(f),!o(f);)f.setTime(f-1)},function(f,d){if(f>=f)if(d<0)for(;++d<=0;)for(;e(f,-1),!o(f););else for(;--d>=0;)for(;e(f,1),!o(f););})},t&&(i.count=function(o,f){return Vd.setTime(+o),jd.setTime(+f),n(Vd),n(jd),Math.floor(t(Vd,jd))},i.every=function(o){return o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?function(f){return r(f)%o===0}:function(f){return i.count(0,f)%o===0}):i}),i}const NI=1e3,Vp=NI*60,UI=Vp*60,jp=UI*24,Xb=jp*7;var Gp=Us(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*Vp)/jp,n=>n.getDate()-1);Gp.range;function La(n){return Us(function(e){e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t*7)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Vp)/Xb})}var Zb=La(0),Jf=La(1),zI=La(2),VI=La(3),JA=La(4),jI=La(5),GI=La(6);Zb.range;Jf.range;zI.range;VI.range;JA.range;jI.range;GI.range;var ba=Us(function(n){n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,e){n.setFullYear(n.getFullYear()+e)},function(n,e){return e.getFullYear()-n.getFullYear()},function(n){return n.getFullYear()});ba.every=function(n){return!isFinite(n=Math.floor(n))||!(n>0)?null:Us(function(e){e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*n)})};ba.range;var Hp=Us(function(n){n.setUTCHours(0,0,0,0)},function(n,e){n.setUTCDate(n.getUTCDate()+e)},function(n,e){return(e-n)/jp},function(n){return n.getUTCDate()-1});Hp.range;function Pa(n){return Us(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t*7)},function(e,t){return(t-e)/Xb})}var qb=Pa(0),e0=Pa(1),HI=Pa(2),WI=Pa(3),el=Pa(4),QI=Pa(5),YI=Pa(6);qb.range;e0.range;HI.range;WI.range;el.range;QI.range;YI.range;var Ea=Us(function(n){n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e)},function(n,e){return e.getUTCFullYear()-n.getUTCFullYear()},function(n){return n.getUTCFullYear()});Ea.every=function(n){return!isFinite(n=Math.floor(n))||!(n>0)?null:Us(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*n)})};Ea.range;function Gd(n){if(0<=n.y&&n.y<100){var e=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return e.setFullYear(n.y),e}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function Hd(n){if(0<=n.y&&n.y<100){var e=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function nu(n,e,t){return{y:n,m:e,d:t,H:0,M:0,S:0,L:0}}function $I(n){var e=n.dateTime,t=n.date,r=n.time,i=n.periods,o=n.days,f=n.shortDays,d=n.months,m=n.shortMonths,_=ru(i),E=iu(i),T=ru(o),C=iu(o),P=ru(f),R=iu(f),U=ru(d),j=iu(d),G=ru(m),Q=iu(m),X={a:_t,A:De,b:Qe,B:K,c:null,d:Jv,e:Jv,f:mR,g:CR,G:LR,H:dR,I:gR,j:pR,L:Kb,m:vR,M:yR,p:ye,q:Ye,Q:ny,s:ry,S:_R,u:wR,U:bR,V:ER,w:TR,W:xR,x:null,X:null,y:SR,Y:MR,Z:PR,"%":ty},q={a:Mt,A:wt,b:zt,B:kt,c:null,d:ey,e:ey,f:OR,g:HR,G:QR,H:kR,I:IR,j:RR,L:e3,m:DR,M:FR,p:gt,q:Ct,Q:ny,s:ry,S:BR,u:NR,U:UR,V:zR,w:VR,W:jR,x:null,X:null,y:GR,Y:WR,Z:YR,"%":ty},ee={a:Ce,A:ge,b:ke,B:Me,c:ze,d:qv,e:qv,f:uR,g:Zv,G:Xv,H:Kv,I:Kv,j:oR,L:lR,m:sR,M:aR,p:me,q:iR,Q:fR,s:hR,S:AR,u:JI,U:eR,V:tR,w:KI,W:nR,x:We,X:tt,y:Zv,Y:Xv,Z:rR,"%":cR};X.x=ie(t,X),X.X=ie(r,X),X.c=ie(e,X),q.x=ie(t,q),q.X=ie(r,q),q.c=ie(e,q);function ie(Se,at){return function(xt){var Ee=[],Kt=-1,It=0,An=Se.length,$t,Jt,Er;for(xt instanceof Date||(xt=new Date(+xt));++Kt<An;)Se.charCodeAt(Kt)===37&&(Ee.push(Se.slice(It,Kt)),(Jt=$v[$t=Se.charAt(++Kt)])!=null?$t=Se.charAt(++Kt):Jt=$t==="e"?" ":"0",(Er=at[$t])&&($t=Er(xt,Jt)),Ee.push($t),It=Kt+1);return Ee.push(Se.slice(It,Kt)),Ee.join("")}}function pe(Se,at){return function(xt){var Ee=nu(1900,void 0,1),Kt=ue(Ee,Se,xt+="",0),It,An;if(Kt!=xt.length)return null;if("Q"in Ee)return new Date(Ee.Q);if("s"in Ee)return new Date(Ee.s*1e3+("L"in Ee?Ee.L:0));if(at&&!("Z"in Ee)&&(Ee.Z=0),"p"in Ee&&(Ee.H=Ee.H%12+Ee.p*12),Ee.m===void 0&&(Ee.m="q"in Ee?Ee.q:0),"V"in Ee){if(Ee.V<1||Ee.V>53)return null;"w"in Ee||(Ee.w=1),"Z"in Ee?(It=Hd(nu(Ee.y,0,1)),An=It.getUTCDay(),It=An>4||An===0?e0.ceil(It):e0(It),It=Hp.offset(It,(Ee.V-1)*7),Ee.y=It.getUTCFullYear(),Ee.m=It.getUTCMonth(),Ee.d=It.getUTCDate()+(Ee.w+6)%7):(It=Gd(nu(Ee.y,0,1)),An=It.getDay(),It=An>4||An===0?Jf.ceil(It):Jf(It),It=Gp.offset(It,(Ee.V-1)*7),Ee.y=It.getFullYear(),Ee.m=It.getMonth(),Ee.d=It.getDate()+(Ee.w+6)%7)}else("W"in Ee||"U"in Ee)&&("w"in Ee||(Ee.w="u"in Ee?Ee.u%7:"W"in Ee?1:0),An="Z"in Ee?Hd(nu(Ee.y,0,1)).getUTCDay():Gd(nu(Ee.y,0,1)).getDay(),Ee.m=0,Ee.d="W"in Ee?(Ee.w+6)%7+Ee.W*7-(An+5)%7:Ee.w+Ee.U*7-(An+6)%7);return"Z"in Ee?(Ee.H+=Ee.Z/100|0,Ee.M+=Ee.Z%100,Hd(Ee)):Gd(Ee)}}function ue(Se,at,xt,Ee){for(var Kt=0,It=at.length,An=xt.length,$t,Jt;Kt<It;){if(Ee>=An)return-1;if($t=at.charCodeAt(Kt++),$t===37){if($t=at.charAt(Kt++),Jt=ee[$t in $v?at.charAt(Kt++):$t],!Jt||(Ee=Jt(Se,xt,Ee))<0)return-1}else if($t!=xt.charCodeAt(Ee++))return-1}return Ee}function me(Se,at,xt){var Ee=_.exec(at.slice(xt));return Ee?(Se.p=E.get(Ee[0].toLowerCase()),xt+Ee[0].length):-1}function Ce(Se,at,xt){var Ee=P.exec(at.slice(xt));return Ee?(Se.w=R.get(Ee[0].toLowerCase()),xt+Ee[0].length):-1}function ge(Se,at,xt){var Ee=T.exec(at.slice(xt));return Ee?(Se.w=C.get(Ee[0].toLowerCase()),xt+Ee[0].length):-1}function ke(Se,at,xt){var Ee=G.exec(at.slice(xt));return Ee?(Se.m=Q.get(Ee[0].toLowerCase()),xt+Ee[0].length):-1}function Me(Se,at,xt){var Ee=U.exec(at.slice(xt));return Ee?(Se.m=j.get(Ee[0].toLowerCase()),xt+Ee[0].length):-1}function ze(Se,at,xt){return ue(Se,e,at,xt)}function We(Se,at,xt){return ue(Se,t,at,xt)}function tt(Se,at,xt){return ue(Se,r,at,xt)}function _t(Se){return f[Se.getDay()]}function De(Se){return o[Se.getDay()]}function Qe(Se){return m[Se.getMonth()]}function K(Se){return d[Se.getMonth()]}function ye(Se){return i[+(Se.getHours()>=12)]}function Ye(Se){return 1+~~(Se.getMonth()/3)}function Mt(Se){return f[Se.getUTCDay()]}function wt(Se){return o[Se.getUTCDay()]}function zt(Se){return m[Se.getUTCMonth()]}function kt(Se){return d[Se.getUTCMonth()]}function gt(Se){return i[+(Se.getUTCHours()>=12)]}function Ct(Se){return 1+~~(Se.getUTCMonth()/3)}return{format:function(Se){var at=ie(Se+="",X);return at.toString=function(){return Se},at},parse:function(Se){var at=pe(Se+="",!1);return at.toString=function(){return Se},at},utcFormat:function(Se){var at=ie(Se+="",q);return at.toString=function(){return Se},at},utcParse:function(Se){var at=pe(Se+="",!0);return at.toString=function(){return Se},at}}}var $v={"-":"",_:" ",0:"0"},$n=/^\s*\d+/,XI=/^%/,ZI=/[\\^$*+?|[\]().{}]/g;function Ht(n,e,t){var r=n<0?"-":"",i=(r?-n:n)+"",o=i.length;return r+(o<t?new Array(t-o+1).join(e)+i:i)}function qI(n){return n.replace(ZI,"\\$&")}function ru(n){return new RegExp("^(?:"+n.map(qI).join("|")+")","i")}function iu(n){return new Map(n.map((e,t)=>[e.toLowerCase(),t]))}function KI(n,e,t){var r=$n.exec(e.slice(t,t+1));return r?(n.w=+r[0],t+r[0].length):-1}function JI(n,e,t){var r=$n.exec(e.slice(t,t+1));return r?(n.u=+r[0],t+r[0].length):-1}function eR(n,e,t){var r=$n.exec(e.slice(t,t+2));return r?(n.U=+r[0],t+r[0].length):-1}function tR(n,e,t){var r=$n.exec(e.slice(t,t+2));return r?(n.V=+r[0],t+r[0].length):-1}function nR(n,e,t){var r=$n.exec(e.slice(t,t+2));return r?(n.W=+r[0],t+r[0].length):-1}function Xv(n,e,t){var r=$n.exec(e.slice(t,t+4));return r?(n.y=+r[0],t+r[0].length):-1}function Zv(n,e,t){var r=$n.exec(e.slice(t,t+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),t+r[0].length):-1}function rR(n,e,t){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),t+r[0].length):-1}function iR(n,e,t){var r=$n.exec(e.slice(t,t+1));return r?(n.q=r[0]*3-3,t+r[0].length):-1}function sR(n,e,t){var r=$n.exec(e.slice(t,t+2));return r?(n.m=r[0]-1,t+r[0].length):-1}function qv(n,e,t){var r=$n.exec(e.slice(t,t+2));return r?(n.d=+r[0],t+r[0].length):-1}function oR(n,e,t){var r=$n.exec(e.slice(t,t+3));return r?(n.m=0,n.d=+r[0],t+r[0].length):-1}function Kv(n,e,t){var r=$n.exec(e.slice(t,t+2));return r?(n.H=+r[0],t+r[0].length):-1}function aR(n,e,t){var r=$n.exec(e.slice(t,t+2));return r?(n.M=+r[0],t+r[0].length):-1}function AR(n,e,t){var r=$n.exec(e.slice(t,t+2));return r?(n.S=+r[0],t+r[0].length):-1}function lR(n,e,t){var r=$n.exec(e.slice(t,t+3));return r?(n.L=+r[0],t+r[0].length):-1}function uR(n,e,t){var r=$n.exec(e.slice(t,t+6));return r?(n.L=Math.floor(r[0]/1e3),t+r[0].length):-1}function cR(n,e,t){var r=XI.exec(e.slice(t,t+1));return r?t+r[0].length:-1}function fR(n,e,t){var r=$n.exec(e.slice(t));return r?(n.Q=+r[0],t+r[0].length):-1}function hR(n,e,t){var r=$n.exec(e.slice(t));return r?(n.s=+r[0],t+r[0].length):-1}function Jv(n,e){return Ht(n.getDate(),e,2)}function dR(n,e){return Ht(n.getHours(),e,2)}function gR(n,e){return Ht(n.getHours()%12||12,e,2)}function pR(n,e){return Ht(1+Gp.count(ba(n),n),e,3)}function Kb(n,e){return Ht(n.getMilliseconds(),e,3)}function mR(n,e){return Kb(n,e)+"000"}function vR(n,e){return Ht(n.getMonth()+1,e,2)}function yR(n,e){return Ht(n.getMinutes(),e,2)}function _R(n,e){return Ht(n.getSeconds(),e,2)}function wR(n){var e=n.getDay();return e===0?7:e}function bR(n,e){return Ht(Zb.count(ba(n)-1,n),e,2)}function Jb(n){var e=n.getDay();return e>=4||e===0?JA(n):JA.ceil(n)}function ER(n,e){return n=Jb(n),Ht(JA.count(ba(n),n)+(ba(n).getDay()===4),e,2)}function TR(n){return n.getDay()}function xR(n,e){return Ht(Jf.count(ba(n)-1,n),e,2)}function SR(n,e){return Ht(n.getFullYear()%100,e,2)}function CR(n,e){return n=Jb(n),Ht(n.getFullYear()%100,e,2)}function MR(n,e){return Ht(n.getFullYear()%1e4,e,4)}function LR(n,e){var t=n.getDay();return n=t>=4||t===0?JA(n):JA.ceil(n),Ht(n.getFullYear()%1e4,e,4)}function PR(n){var e=n.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ht(e/60|0,"0",2)+Ht(e%60,"0",2)}function ey(n,e){return Ht(n.getUTCDate(),e,2)}function kR(n,e){return Ht(n.getUTCHours(),e,2)}function IR(n,e){return Ht(n.getUTCHours()%12||12,e,2)}function RR(n,e){return Ht(1+Hp.count(Ea(n),n),e,3)}function e3(n,e){return Ht(n.getUTCMilliseconds(),e,3)}function OR(n,e){return e3(n,e)+"000"}function DR(n,e){return Ht(n.getUTCMonth()+1,e,2)}function FR(n,e){return Ht(n.getUTCMinutes(),e,2)}function BR(n,e){return Ht(n.getUTCSeconds(),e,2)}function NR(n){var e=n.getUTCDay();return e===0?7:e}function UR(n,e){return Ht(qb.count(Ea(n)-1,n),e,2)}function t3(n){var e=n.getUTCDay();return e>=4||e===0?el(n):el.ceil(n)}function zR(n,e){return n=t3(n),Ht(el.count(Ea(n),n)+(Ea(n).getUTCDay()===4),e,2)}function VR(n){return n.getUTCDay()}function jR(n,e){return Ht(e0.count(Ea(n)-1,n),e,2)}function GR(n,e){return Ht(n.getUTCFullYear()%100,e,2)}function HR(n,e){return n=t3(n),Ht(n.getUTCFullYear()%100,e,2)}function WR(n,e){return Ht(n.getUTCFullYear()%1e4,e,4)}function QR(n,e){var t=n.getUTCDay();return n=t>=4||t===0?el(n):el.ceil(n),Ht(n.getUTCFullYear()%1e4,e,4)}function YR(){return"+0000"}function ty(){return"%"}function ny(n){return+n}function ry(n){return Math.floor(+n/1e3)}var EA,wr,SA;$R({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function $R(n){return EA=$I(n),wr=EA.format,SA=EA.parse,EA.utcFormat,EA.utcParse,EA}function n3(){var n=0,e=1,t,r,i,o,f=hi,d=!1,m;function _(T){return T==null||isNaN(T=+T)?m:f(i===0?.5:(T=(o(T)-t)*i,d?Math.max(0,Math.min(1,T)):T))}_.domain=function(T){return arguments.length?([n,e]=T,t=o(n=+n),r=o(e=+e),i=t===r?0:1/(r-t),_):[n,e]},_.clamp=function(T){return arguments.length?(d=!!T,_):d},_.interpolator=function(T){return arguments.length?(f=T,_):f};function E(T){return function(C){var P,R;return arguments.length?([P,R]=C,f=T(P,R),_):[f(0),f(1)]}}return _.range=E(v0),_.rangeRound=E(hb),_.unknown=function(T){return arguments.length?(m=T,_):m},function(T){return o=T,t=T(n),r=T(e),i=t===r?0:1/(r-t),_}}function r3(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function i3(){var n=Up(n3()(hi));return n.copy=function(){return r3(n,i3())},Vb.apply(n,arguments)}function s3(){var n=$b(n3());return n.copy=function(){return r3(n,s3()).exponent(n.exponent())},Vb.apply(n,arguments)}const XR="#fff",ZR=.4,Wp="rgba(240,240,240,0.5)",qR=[Wp,"#137CBD"],KR="rgba(220,220,220,0.5)",JR=[Wp,"#f6654e"],eO=[Wp,"#00a9cc"],tO=[255,255,255,255];function nO(n){return Math.round(n*255)}function iy(n,e){const t=wa(n);if(!t)return console.warn("Invalid color: ",n),`rgba(255, 255, 255, ${e})`;const r=t.rgb();return`rgba(${r.r}, ${r.g}, ${r.b}, ${e})`}function ss(n){if(Array.isArray(n))return n;const e=wa(n);if(!e)return console.warn("Invalid color: ",n),tO;const t=e.rgb();return[Math.floor(t.r),Math.floor(t.g),Math.floor(t.b),nO(e.opacity)]}function Ki(n,e){return n?ss(n):typeof e=="string"?ss(e):e}const Wn=n=>n[n.length-1];var Vg;(function(n){n.primary="#162d3c"})(Vg||(Vg={}));const sy=20,TA=n=>Bb(0,sy+1).map(e=>n(e/sy)).reverse(),jg="rgba(240,240,240,0.5)",rO=[jg,Vg.primary],iO=["#f7feae","#b7e6a5","#7ccba2","#46aea0","#089099","#00718b","#045275"],sO=["#d3f2a3","#97e196","#6cc08b","#4c9b82","#217a79","#105965","#074050"],o3=["#d1eeea","#a8dbd9","#85c4c9","#68abb8","#4f90a6","#3b738f","#2a5674"],oO=o3,a3={Blues:Wn(Mb),BluGrn:["#c4e6c3","#96d2a4","#6dbc90","#4da284","#36877a","#266b6e","#1d4f60"],BluYl:iO,BrwnYl:["#ede5cf","#e0c2a2","#d39c83","#c1766f","#a65461","#813753","#541f3f"],BuGn:Wn(pb),BuPu:Wn(mb),Burg:["#ffc6c4","#f4a3a8","#e38191","#cc607d","#ad466c","#8b3058","#672044"],BurgYl:["#fbe6c5","#f5ba98","#ee8a82","#dc7176","#c8586c","#9c3f5d","#70284a"],Cool:TA(Xk),DarkMint:["#d2fbd4","#a5dbc2","#7bbcb0","#559c9e","#3a7c89","#235d72","#123f5a"],Emrld:sO,GnBu:Wn(vb),Grayish:rO,Greens:Wn(Lb),Greys:Wn(Pb),Inferno:TA(Kk),Magenta:["#f3cbd3","#eaa9bd","#dd88ac","#ca699d","#b14d8e","#91357d","#6c2167"],Magma:TA(qk),Mint:["#e4f1e1","#b4d9cc","#89c0b6","#63a6a0","#448c8a","#287274","#0d585f"],Oranges:Wn(Rb),OrRd:Wn(yb),OrYel:["#ecda9a","#efc47e","#f3ad6a","#f7945d","#f97b57","#f66356","#ee4d5a"],Peach:["#fde0c5","#facba6","#f8b58b","#f59e72","#f2855d","#ef6a4c","#eb4a40"],Plasma:TA(Jk),PinkYl:["#fef6b5","#ffdd9a","#ffc285","#ffa679","#fa8a76","#f16d7a","#e15383"],PuBu:Wn(wb),PuBuGn:Wn(_b),PuRd:Wn(bb),Purp:["#f3e0f7","#e4c7f1","#d1afe8","#b998dd","#9f82ce","#826dba","#63589f"],Purples:Wn(kb),PurpOr:["#f9ddda","#f2b9c4","#e597b9","#ce78b3","#ad5fad","#834ba0","#573b88"],RdPu:Wn(Eb),RedOr:["#f6d2a9","#f5b78e","#f19c7c","#ea8171","#dd686c","#ca5268","#b13f64"],Reds:Wn(Ib),Sunset:["#f3e79b","#fac484","#f8a07e","#eb7f86","#ce6693","#a059a0","#5c53a5"],SunsetDark:["#fcde9c","#faa476","#f0746e","#e34f6f","#dc3977","#b9257a","#7c1d6f"],Teal:o3,TealGrn:["#b0f2bc","#89e8ac","#67dba5","#4cc8a3","#38b2a3","#2c98a0","#257d98"],Viridis:TA(Zk),Warm:TA($k),YlGn:Wn(xb),YlGnBu:Wn(Tb),YlOrBr:Wn(Sb),YlOrRd:Wn(Cb)},aO="#f52020",AO="#17a5be",lO={negative:{flows:{scheme:[jg,AO]}},positive:{flows:{scheme:[jg,aO]}},locationAreas:{outline:"rgba(92,112,128,0.5)",normal:"rgba(220,220,220,0.5)"},outlineColor:"rgb(230,233,237)"};function uO(n){return A3(!1,n.colorScheme,n.darkMode,n.fadeEnabled,n.fadeOpacityEnabled,n.fadeAmount,n.animationEnabled)}function A3(n,e,t,r,i,o,f){if(n)return lO;let d;Array.isArray(e)?d=e:(d=e&&a3[e]||oO,t&&(d=d.slice().reverse()));{const m=Bb(0,Math.max(10,d.length)),_=m.length-1,E=i3(fb(d)).domain([0,_]);if(!r||o===0)d=m.map((T,C)=>E(C));else{const T=zp().exponent(1.5).domain([_,0]).range([0,2*o/100]);d=m.map((C,P)=>{const R=E(P),U=T(P);if(R==null||U==null)return"#000";const j=g0(R);return j.l=t?j.l-j.l*U:j.l+(100-j.l)*U,j.c=j.c-j.c*(U/4),i&&(j.opacity=j.opacity*(1-U)),j.toString()})}}return{darkMode:t,flows:{scheme:d},locationCircles:{outgoing:t?"#000":"#fff"},outlineColor:t?"#000":"rgba(255, 255, 255, 0.5)"}}function cO(n){const e=ub,t=n.length;let r=new Array(t),i=new Array(t),o=new Array(t),f=new Array(t),d,m;for(d=0;d<t;++d)m=Mu(n[d]),r[d]=m.r||0,i[d]=m.g||0,o[d]=m.b||0,f[d]=m.opacity||0;return r=e(r),i=e(i),o=e(o),f=e(f),function(_){return m.r=r(_),m.g=i(_),m.b=o(_),m.opacity=f(_),m+""}}function Wd(n,e,t){const r=s3(cO(e)).exponent(.3333333333333333).domain(n);return i=>ss(r(i))}function fO(n,e,t){const r=e?e[0]:0,i=e?e[1]:0;if(l3(n)){const f=Wd([0,i],n.positive.flows.scheme),d=Wd([0,r],n.negative.flows.scheme);return m=>m>=0?f(m):d(m)}const o=Wd([0,i||0],n.flows.scheme);return f=>o(f)}function hO(n){return n.positive!==void 0}function l3(n){return n.positive!==void 0}function dO(n,e){const t=n&&n.normal||KR,r=g0(t),i=ss(t);return{normal:i,connected:Ki(n&&n.connected,i),highlighted:Ki(n&&n.highlighted,iy(r[e?"brighter":"darker"](1).toString(),.5)),selected:Ki(n&&n.selected,iy(r[e?"brighter":"darker"](2).toString(),.8)),outline:Ki(n&&n.outline,ss(r[e?"brighter":"darker"](4).toString()))}}function Gg(n,e,t){const r=n&&n.flows&&n.flows.scheme||e,i=g0(r[r.length-1]),o=Ki(n&&n.flows&&n.flows.highlighted,ss(i[t?"brighter":"darker"](.7).toString())),f=Ki(n?.locationCircles?.empty,t?"#000":"#fff"),d=Ki(n&&n.locationCircles&&n.locationCircles.inner,i.toString());return{flows:{scheme:r,highlighted:o},locationCircles:{inner:d,outgoing:Ki(n&&n.locationCircles&&n.locationCircles.outgoing,t?"#000":"#fff"),incoming:Ki(n&&n.locationCircles&&n.locationCircles.incoming,i[t?"brighter":"darker"](1.25).toString()),highlighted:Ki(n&&n.locationCircles&&n.locationCircles.highlighted,o),empty:f,outlineEmptyMix:n?.locationCircles?.outlineEmptyMix??.4}}}function u3(n){const e=!!(n&&n.darkMode);return{darkMode:e,locationAreas:dO(n&&n.locationAreas,e),outlineColor:ss(n&&n.outlineColor||XR),dimmedOpacity:n&&n.dimmedOpacity!=null?n.dimmedOpacity:ZR}}function gO(n){const e=u3(n);return{...e,...Gg(n,qR,e.darkMode)}}function pO(n){const e=u3(n);return{...e,positive:Gg(n&&n.positive,JR,e.darkMode),negative:Gg(n&&n.negative,eO,e.darkMode)}}const oy=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],Qd=1,su=8;class _0{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,r]=new Uint8Array(e,0,2);if(t!==219)throw new Error("Data does not appear to be in a KDBush format.");const i=r>>4;if(i!==Qd)throw new Error(`Got v${i} data when expected v${Qd}.`);const o=oy[r&15];if(!o)throw new Error("Unrecognized array type.");const[f]=new Uint16Array(e,2,1),[d]=new Uint32Array(e,4,1);return new _0(d,f,o,e)}constructor(e,t=64,r=Float64Array,i){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const o=oy.indexOf(this.ArrayType),f=e*2*this.ArrayType.BYTES_PER_ELEMENT,d=e*this.IndexArrayType.BYTES_PER_ELEMENT,m=(8-d%8)%8;if(o<0)throw new Error(`Unexpected typed array class: ${r}.`);i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,su,e),this.coords=new this.ArrayType(this.data,su+d+m,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(su+f+d+m),this.ids=new this.IndexArrayType(this.data,su,e),this.coords=new this.ArrayType(this.data,su+d+m,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(Qd<<4)+o]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=e,this.coords[this._pos++]=t,r}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return Hg(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,r,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:o,coords:f,nodeSize:d}=this,m=[0,o.length-1,0],_=[];for(;m.length;){const E=m.pop()||0,T=m.pop()||0,C=m.pop()||0;if(T-C<=d){for(let j=C;j<=T;j++){const G=f[2*j],Q=f[2*j+1];G>=e&&G<=r&&Q>=t&&Q<=i&&_.push(o[j])}continue}const P=C+T>>1,R=f[2*P],U=f[2*P+1];R>=e&&R<=r&&U>=t&&U<=i&&_.push(o[P]),(E===0?e<=R:t<=U)&&(m.push(C),m.push(P-1),m.push(1-E)),(E===0?r>=R:i>=U)&&(m.push(P+1),m.push(T),m.push(1-E))}return _}within(e,t,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:o,nodeSize:f}=this,d=[0,i.length-1,0],m=[],_=r*r;for(;d.length;){const E=d.pop()||0,T=d.pop()||0,C=d.pop()||0;if(T-C<=f){for(let j=C;j<=T;j++)ay(o[2*j],o[2*j+1],e,t)<=_&&m.push(i[j]);continue}const P=C+T>>1,R=o[2*P],U=o[2*P+1];ay(R,U,e,t)<=_&&m.push(i[P]),(E===0?e-r<=R:t-r<=U)&&(d.push(C),d.push(P-1),d.push(1-E)),(E===0?e+r>=R:t+r>=U)&&(d.push(P+1),d.push(T),d.push(1-E))}return m}}function Hg(n,e,t,r,i,o){if(i-r<=t)return;const f=r+i>>1;c3(n,e,f,r,i,o),Hg(n,e,t,r,f-1,1-o),Hg(n,e,t,f+1,i,1-o)}function c3(n,e,t,r,i,o){for(;i>r;){if(i-r>600){const _=i-r+1,E=t-r+1,T=Math.log(_),C=.5*Math.exp(2*T/3),P=.5*Math.sqrt(T*C*(_-C)/_)*(E-_/2<0?-1:1),R=Math.max(r,Math.floor(t-E*C/_+P)),U=Math.min(i,Math.floor(t+(_-E)*C/_+P));c3(n,e,t,R,U,o)}const f=e[2*t+o];let d=r,m=i;for(ou(n,e,r,t),e[2*i+o]>f&&ou(n,e,r,i);d<m;){for(ou(n,e,d,m),d++,m--;e[2*d+o]<f;)d++;for(;e[2*m+o]>f;)m--}e[2*r+o]===f?ou(n,e,r,m):(m++,ou(n,e,m,i)),m<=t&&(r=m+1),t<=m&&(i=m-1)}}function ou(n,e,t,r){Yd(n,t,r),Yd(e,2*t,2*r),Yd(e,2*t+1,2*r+1)}function Yd(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function ay(n,e,t,r){const i=n-t,o=e-r;return i*i+o*o}var t0="NOT_FOUND";function mO(n){var e;return{get:function(r){return e&&n(e.key,r)?e.value:t0},put:function(r,i){e={key:r,value:i}},getEntries:function(){return e?[e]:[]},clear:function(){e=void 0}}}function vO(n,e){var t=[];function r(d){var m=t.findIndex(function(E){return e(d,E.key)});if(m>-1){var _=t[m];return m>0&&(t.splice(m,1),t.unshift(_)),_.value}return t0}function i(d,m){r(d)===t0&&(t.unshift({key:d,value:m}),t.length>n&&t.pop())}function o(){return t}function f(){t=[]}return{get:r,put:i,getEntries:o,clear:f}}var yO=function(e,t){return e===t};function _O(n){return function(t,r){if(t===null||r===null||t.length!==r.length)return!1;for(var i=t.length,o=0;o<i;o++)if(!n(t[o],r[o]))return!1;return!0}}function f3(n,e){var t=typeof e=="object"?e:{equalityCheck:e},r=t.equalityCheck,i=r===void 0?yO:r,o=t.maxSize,f=o===void 0?1:o,d=t.resultEqualityCheck,m=_O(i),_=f===1?mO(m):vO(f,m);function E(){var T=_.get(arguments);if(T===t0){if(T=n.apply(null,arguments),d){var C=_.getEntries(),P=C.find(function(R){return d(R.value,T)});P&&(T=P.value)}_.put(arguments,T)}return T}return E.clearCache=function(){return _.clear()},E}function wO(n){var e=Array.isArray(n[0])?n[0]:n;if(!e.every(function(r){return typeof r=="function"})){var t=e.map(function(r){return typeof r=="function"?"function "+(r.name||"unnamed")+"()":typeof r}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+t+"]")}return e}function h3(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];var i=function(){for(var f=arguments.length,d=new Array(f),m=0;m<f;m++)d[m]=arguments[m];var _=0,E,T={memoizeOptions:void 0},C=d.pop();if(typeof C=="object"&&(T=C,C=d.pop()),typeof C!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof C+"]");var P=T,R=P.memoizeOptions,U=R===void 0?t:R,j=Array.isArray(U)?U:[U],G=wO(d),Q=n.apply(void 0,[function(){return _++,C.apply(null,arguments)}].concat(j)),X=n(function(){for(var ee=[],ie=G.length,pe=0;pe<ie;pe++)ee.push(G[pe].apply(null,arguments));return E=Q.apply(null,ee),E});return Object.assign(X,{resultFunc:C,memoizedResultFunc:Q,dependencies:G,lastResult:function(){return E},recomputations:function(){return _},resetRecomputations:function(){return _=0}}),X};return i}var mt=h3(f3),wf={exports:{}},bO=wf.exports,Ay;function EO(){return Ay||(Ay=1,(function(n){(function(e,t,r){function i(m){var _=this,E=d();_.next=function(){var T=2091639*_.s0+_.c*23283064365386963e-26;return _.s0=_.s1,_.s1=_.s2,_.s2=T-(_.c=T|0)},_.c=1,_.s0=E(" "),_.s1=E(" "),_.s2=E(" "),_.s0-=E(m),_.s0<0&&(_.s0+=1),_.s1-=E(m),_.s1<0&&(_.s1+=1),_.s2-=E(m),_.s2<0&&(_.s2+=1),E=null}function o(m,_){return _.c=m.c,_.s0=m.s0,_.s1=m.s1,_.s2=m.s2,_}function f(m,_){var E=new i(m),T=_&&_.state,C=E.next;return C.int32=function(){return E.next()*4294967296|0},C.double=function(){return C()+(C()*2097152|0)*11102230246251565e-32},C.quick=C,T&&(typeof T=="object"&&o(T,E),C.state=function(){return o(E,{})}),C}function d(){var m=4022871197,_=function(E){E=String(E);for(var T=0;T<E.length;T++){m+=E.charCodeAt(T);var C=.02519603282416938*m;m=C>>>0,C-=m,C*=m,m=C>>>0,C-=m,m+=C*4294967296}return(m>>>0)*23283064365386963e-26};return _}t&&t.exports?t.exports=f:this.alea=f})(bO,n)})(wf)),wf.exports}var bf={exports:{}},TO=bf.exports,ly;function xO(){return ly||(ly=1,(function(n){(function(e,t,r){function i(d){var m=this,_="";m.x=0,m.y=0,m.z=0,m.w=0,m.next=function(){var T=m.x^m.x<<11;return m.x=m.y,m.y=m.z,m.z=m.w,m.w^=m.w>>>19^T^T>>>8},d===(d|0)?m.x=d:_+=d;for(var E=0;E<_.length+64;E++)m.x^=_.charCodeAt(E)|0,m.next()}function o(d,m){return m.x=d.x,m.y=d.y,m.z=d.z,m.w=d.w,m}function f(d,m){var _=new i(d),E=m&&m.state,T=function(){return(_.next()>>>0)/4294967296};return T.double=function(){do var C=_.next()>>>11,P=(_.next()>>>0)/4294967296,R=(C+P)/(1<<21);while(R===0);return R},T.int32=_.next,T.quick=T,E&&(typeof E=="object"&&o(E,_),T.state=function(){return o(_,{})}),T}t&&t.exports?t.exports=f:this.xor128=f})(TO,n)})(bf)),bf.exports}var Ef={exports:{}},SO=Ef.exports,uy;function CO(){return uy||(uy=1,(function(n){(function(e,t,r){function i(d){var m=this,_="";m.next=function(){var T=m.x^m.x>>>2;return m.x=m.y,m.y=m.z,m.z=m.w,m.w=m.v,(m.d=m.d+362437|0)+(m.v=m.v^m.v<<4^(T^T<<1))|0},m.x=0,m.y=0,m.z=0,m.w=0,m.v=0,d===(d|0)?m.x=d:_+=d;for(var E=0;E<_.length+64;E++)m.x^=_.charCodeAt(E)|0,E==_.length&&(m.d=m.x<<10^m.x>>>4),m.next()}function o(d,m){return m.x=d.x,m.y=d.y,m.z=d.z,m.w=d.w,m.v=d.v,m.d=d.d,m}function f(d,m){var _=new i(d),E=m&&m.state,T=function(){return(_.next()>>>0)/4294967296};return T.double=function(){do var C=_.next()>>>11,P=(_.next()>>>0)/4294967296,R=(C+P)/(1<<21);while(R===0);return R},T.int32=_.next,T.quick=T,E&&(typeof E=="object"&&o(E,_),T.state=function(){return o(_,{})}),T}t&&t.exports?t.exports=f:this.xorwow=f})(SO,n)})(Ef)),Ef.exports}var Tf={exports:{}},MO=Tf.exports,cy;function LO(){return cy||(cy=1,(function(n){(function(e,t,r){function i(d){var m=this;m.next=function(){var E=m.x,T=m.i,C,P;return C=E[T],C^=C>>>7,P=C^C<<24,C=E[T+1&7],P^=C^C>>>10,C=E[T+3&7],P^=C^C>>>3,C=E[T+4&7],P^=C^C<<7,C=E[T+7&7],C=C^C<<13,P^=C^C<<9,E[T]=P,m.i=T+1&7,P};function _(E,T){var C,P=[];if(T===(T|0))P[0]=T;else for(T=""+T,C=0;C<T.length;++C)P[C&7]=P[C&7]<<15^T.charCodeAt(C)+P[C+1&7]<<13;for(;P.length<8;)P.push(0);for(C=0;C<8&&P[C]===0;++C);for(C==8?P[7]=-1:P[C],E.x=P,E.i=0,C=256;C>0;--C)E.next()}_(m,d)}function o(d,m){return m.x=d.x.slice(),m.i=d.i,m}function f(d,m){d==null&&(d=+new Date);var _=new i(d),E=m&&m.state,T=function(){return(_.next()>>>0)/4294967296};return T.double=function(){do var C=_.next()>>>11,P=(_.next()>>>0)/4294967296,R=(C+P)/(1<<21);while(R===0);return R},T.int32=_.next,T.quick=T,E&&(E.x&&o(E,_),T.state=function(){return o(_,{})}),T}t&&t.exports?t.exports=f:this.xorshift7=f})(MO,n)})(Tf)),Tf.exports}var xf={exports:{}},PO=xf.exports,fy;function kO(){return fy||(fy=1,(function(n){(function(e,t,r){function i(d){var m=this;m.next=function(){var E=m.w,T=m.X,C=m.i,P,R;return m.w=E=E+1640531527|0,R=T[C+34&127],P=T[C=C+1&127],R^=R<<13,P^=P<<17,R^=R>>>15,P^=P>>>12,R=T[C]=R^P,m.i=C,R+(E^E>>>16)|0};function _(E,T){var C,P,R,U,j,G=[],Q=128;for(T===(T|0)?(P=T,T=null):(T=T+"\0",P=0,Q=Math.max(Q,T.length)),R=0,U=-32;U<Q;++U)T&&(P^=T.charCodeAt((U+32)%T.length)),U===0&&(j=P),P^=P<<10,P^=P>>>15,P^=P<<4,P^=P>>>13,U>=0&&(j=j+1640531527|0,C=G[U&127]^=P+j,R=C==0?R+1:0);for(R>=128&&(G[(T&&T.length||0)&127]=-1),R=127,U=512;U>0;--U)P=G[R+34&127],C=G[R=R+1&127],P^=P<<13,C^=C<<17,P^=P>>>15,C^=C>>>12,G[R]=P^C;E.w=j,E.X=G,E.i=R}_(m,d)}function o(d,m){return m.i=d.i,m.w=d.w,m.X=d.X.slice(),m}function f(d,m){d==null&&(d=+new Date);var _=new i(d),E=m&&m.state,T=function(){return(_.next()>>>0)/4294967296};return T.double=function(){do var C=_.next()>>>11,P=(_.next()>>>0)/4294967296,R=(C+P)/(1<<21);while(R===0);return R},T.int32=_.next,T.quick=T,E&&(E.X&&o(E,_),T.state=function(){return o(_,{})}),T}t&&t.exports?t.exports=f:this.xor4096=f})(PO,n)})(xf)),xf.exports}var Sf={exports:{}},IO=Sf.exports,hy;function RO(){return hy||(hy=1,(function(n){(function(e,t,r){function i(d){var m=this,_="";m.next=function(){var T=m.b,C=m.c,P=m.d,R=m.a;return T=T<<25^T>>>7^C,C=C-P|0,P=P<<24^P>>>8^R,R=R-T|0,m.b=T=T<<20^T>>>12^C,m.c=C=C-P|0,m.d=P<<16^C>>>16^R,m.a=R-T|0},m.a=0,m.b=0,m.c=-1640531527,m.d=1367130551,d===Math.floor(d)?(m.a=d/4294967296|0,m.b=d|0):_+=d;for(var E=0;E<_.length+20;E++)m.b^=_.charCodeAt(E)|0,m.next()}function o(d,m){return m.a=d.a,m.b=d.b,m.c=d.c,m.d=d.d,m}function f(d,m){var _=new i(d),E=m&&m.state,T=function(){return(_.next()>>>0)/4294967296};return T.double=function(){do var C=_.next()>>>11,P=(_.next()>>>0)/4294967296,R=(C+P)/(1<<21);while(R===0);return R},T.int32=_.next,T.quick=T,E&&(typeof E=="object"&&o(E,_),T.state=function(){return o(_,{})}),T}t&&t.exports?t.exports=f:this.tychei=f})(IO,n)})(Sf)),Sf.exports}var Cf={exports:{}};const OO=ME(JE);var DO=Cf.exports,dy;function FO(){return dy||(dy=1,(function(n){(function(e,t,r){var i=256,o=6,f=52,d="random",m=r.pow(i,o),_=r.pow(2,f),E=_*2,T=i-1,C;function P(q,ee,ie){var pe=[];ee=ee==!0?{entropy:!0}:ee||{};var ue=G(j(ee.entropy?[q,X(t)]:q??Q(),3),pe),me=new R(pe),Ce=function(){for(var ge=me.g(o),ke=m,Me=0;ge<_;)ge=(ge+Me)*i,ke*=i,Me=me.g(1);for(;ge>=E;)ge/=2,ke/=2,Me>>>=1;return(ge+Me)/ke};return Ce.int32=function(){return me.g(4)|0},Ce.quick=function(){return me.g(4)/4294967296},Ce.double=Ce,G(X(me.S),t),(ee.pass||ie||function(ge,ke,Me,ze){return ze&&(ze.S&&U(ze,me),ge.state=function(){return U(me,{})}),Me?(r[d]=ge,ke):ge})(Ce,ue,"global"in ee?ee.global:this==r,ee.state)}function R(q){var ee,ie=q.length,pe=this,ue=0,me=pe.i=pe.j=0,Ce=pe.S=[];for(ie||(q=[ie++]);ue<i;)Ce[ue]=ue++;for(ue=0;ue<i;ue++)Ce[ue]=Ce[me=T&me+q[ue%ie]+(ee=Ce[ue])],Ce[me]=ee;(pe.g=function(ge){for(var ke,Me=0,ze=pe.i,We=pe.j,tt=pe.S;ge--;)ke=tt[ze=T&ze+1],Me=Me*i+tt[T&(tt[ze]=tt[We=T&We+ke])+(tt[We]=ke)];return pe.i=ze,pe.j=We,Me})(i)}function U(q,ee){return ee.i=q.i,ee.j=q.j,ee.S=q.S.slice(),ee}function j(q,ee){var ie=[],pe=typeof q,ue;if(ee&&pe=="object")for(ue in q)try{ie.push(j(q[ue],ee-1))}catch{}return ie.length?ie:pe=="string"?q:q+"\0"}function G(q,ee){for(var ie=q+"",pe,ue=0;ue<ie.length;)ee[T&ue]=T&(pe^=ee[T&ue]*19)+ie.charCodeAt(ue++);return X(ee)}function Q(){try{var q;return C&&(q=C.randomBytes)?q=q(i):(q=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(q)),X(q)}catch{var ee=e.navigator,ie=ee&&ee.plugins;return[+new Date,e,ie,e.screen,X(t)]}}function X(q){return String.fromCharCode.apply(0,q)}if(G(r.random(),t),n.exports){n.exports=P;try{C=OO}catch{}}else r["seed"+d]=P})(typeof self<"u"?self:DO,[],Math)})(Cf)),Cf.exports}var $d,gy;function BO(){if(gy)return $d;gy=1;var n=EO(),e=xO(),t=CO(),r=LO(),i=kO(),o=RO(),f=FO();return f.alea=n,f.xor128=e,f.xorwow=t,f.xorshift7=r,f.xor4096=i,f.tychei=o,$d=f,$d}var NO=BO();class Wg{constructor(e){this.getLocationId=t=>cu(t)?t.id:this.accessors.getLocationId(t),this.getLocationName=t=>{let r;return cu(t)&&Op(t)?r=t.name:this.accessors.getLocationName&&(r=this.accessors.getLocationName(t)),r||(r=`${this.getLocationId(t)}`),r},this.getLocationLat=t=>cu(t)?t.lat:this.accessors.getLocationLat(t),this.getLocationLon=t=>cu(t)?t.lon:this.accessors.getLocationLon(t),this.getFlowOriginId=t=>Od(t)?t.origin:this.accessors.getFlowOriginId(t),this.getFlowDestId=t=>Od(t)?t.dest:this.accessors.getFlowDestId(t),this.getFlowMagnitude=t=>Od(t)?t.count:this.accessors.getFlowMagnitude(t),this.getFlowTime=t=>{const{getFlowTime:r}=this.accessors;return r?r(t):void 0},this.accessors=e}setAccessors(e){this.accessors=e}getFlowmapDataAccessors(){return this.accessors}}function UO(n){const e=new Map,t=new Map,r=new Map;for(const{zoom:T,nodes:C}of n){e.set(T,C);for(const P of C)if(Op(P))t.set(P.id,P);else{const{id:R}=P,U=r.get(R);(U==null||U>T)&&r.set(R,T)}}const[i,o]=Fg(n,T=>T.zoom);if(i==null||o==null)throw new Error("Could not determine minZoom or maxZoom");const f=new Map;for(const T of t.values()){const{zoom:C}=T;let P=f.get(C);P||(P=new Map,f.set(C,P)),d(T,R=>{P?.set(R,T)})}function d(T,C){for(const P of T.children){const R=t.get(P);R?d(R,C):C(P)}}const m=(T,C=o)=>{const P=[],R=(U,j)=>{if(C>U.zoom)for(const G of U.children){const Q=t.get(G);Q?R(Q,j):j.push(G)}else j.push(U.id)};return R(T,P),P};function _(T,C){const P=f.get(C);if(!P)return;const R=P.get(T);return R?R.id:void 0}return{availableZoomLevels:n.map(T=>+T.zoom).sort((T,C)=>NA(T,C)),getClusterNodesFor:T=>{if(T!==void 0)return e.get(T)},getClusterById:T=>t.get(T),getMinZoomForLocation:T=>r.get(T)||i,expandCluster:m,findClusterFor:_,aggregateFlows:(T,C,{getFlowOriginId:P,getFlowDestId:R,getFlowMagnitude:U},j={})=>{if(C>o)return T;const G=[],Q=new Map,X=(ee,ie)=>`${ee}:${ie}`,{flowCountsMapReduce:q={map:U,reduce:(ee,ie)=>(ee||0)+ie}}=j;for(const ee of T){const ie=P(ee),pe=R(ee),ue=_(ie,C)||ie,me=_(pe,C)||pe,Ce=X(ue,me);if(ue===ie&&me===pe)G.push(ee);else{let ge=Q.get(Ce);ge?ge.count=q.reduce(ge.count,q.map(ee)):(ge={origin:ue,dest:me,count:q.map(ee),aggregate:!0},G.push(ge),Q.set(Ce,ge))}}return G}}}function zO(n,{getFlowOriginId:e,getFlowDestId:t,getFlowMagnitude:r}){const i={incoming:new Map,outgoing:new Map};for(const o of n){const f=e(o),d=t(o),m=r(o);i.incoming.set(d,(i.incoming.get(d)||0)+m),i.outgoing.set(f,(i.outgoing.get(f)||0)+m)}return o=>Math.max(Math.abs(i.incoming.get(o)||0),Math.abs(i.outgoing.get(o)||0))}function VO(n,e){if(!n.length)throw new Error("No available zoom levels");return n[Math.min(rI(n,Math.floor(e)),n.length-1)]}const jO={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,makeClusterName:(n,e)=>{},makeClusterId:n=>`{[${n}]}`};function GO(n){const{index:e}=n;return e!=null}function d3(n){const{id:e}=n;return e!=null}function HO(n,e,t,r){const{getLocationLon:i,getLocationLat:o,getLocationId:f}=e,d={...jO,...r},{minZoom:m,maxZoom:_,nodeSize:E,makeClusterName:T,makeClusterId:C}=d,P=new Array(_+1);let R=new Array,U=0;for(const ue of n){const me=i(ue),Ce=o(ue);R.push({x:XO(me),y:ZO(Ce),weight:t(f(ue)),zoom:1/0,index:U,parentId:-1,location:ue}),U++}const j=ue=>{const me=new _0(ue.length,E,Float32Array);for(let Ce=0;Ce<ue.length;Ce++)me.add(ue[Ce].x,ue[Ce].y);return me.finish(),me.points=ue,me};P[_+1]=j(R);let G=_+1;for(let ue=_;ue>=m;ue--){const me=QO(R,ue,P[G],d);me.length===R.length?(P[ue]=P[G],P[G]=void 0,G=ue,R=me):(G=ue,R=me,P[ue]=j(R))}if(P.length===0)return[];const Q=P.map(ue=>ue?.points.length),X=Fb(Q.filter(ue=>ue>0));let q=KO(Q)??Q.length-1;const ee=qO(n,e);if(ee<U){const ue=JO(Q,me=>me<=ee);ue>=0&&(ue<q&&(P[ue+1]=P[q],P.splice(ue+2)),q=ue+1)}const ie=Math.min(q,X?Q.lastIndexOf(X):q),pe=new Array;G=NaN;for(let ue=q;ue>=ie;ue--){let me;const Ce=P[ue];if(!Ce)continue;P[G]&&ue<q&&(me=Db(P[G].points,ke=>ke.map(Me=>Me.id?C(Me.id):f(Me.location)),ke=>ke.parentId));const ge=[];for(const ke of Ce.points){const{x:Me,y:ze,numPoints:We,location:tt}=ke;if(GO(ke))ge.push({id:f(tt),zoom:ue,lat:o(tt),lon:i(tt)});else if(d3(ke)){const{id:_t}=ke,De=me&&me.get(_t);if(!De){console.warn("Omitting cluster with no children, point:",ke);continue}const Qe={id:C(_t),name:T(_t,We),zoom:ue,lat:$O(ze),lon:YO(Me),children:De??[]};ge.push(Qe)}}pe.push({zoom:ue,nodes:ge}),G=ue}return pe}function WO(n,e,t,r,i){return{x:n,y:e,zoom:1/0,id:t,parentId:-1,numPoints:r,weight:i}}function QO(n,e,t,r){const i=[],{radius:o,extent:f}=r,d=o/(f*Math.pow(2,e));for(let m=0;m<n.length;m++){const _=n[m];if(_.zoom<=e)continue;_.zoom=e;const E=t.within(_.x,_.y,d);let T=_.weight||1,C=d3(_)?_.numPoints:1,P=_.x*T,R=_.y*T;const U=(m<<5)+(e+1);for(const j of E){const G=t.points[j];if(G.zoom<=e)continue;G.zoom=e;const Q=G.weight||1,X=G.numPoints||1;P+=G.x*Q,R+=G.y*Q,T+=Q,C+=X,G.parentId=U}C===1?i.push(_):(_.parentId=U,i.push(WO(P/T,R/T,U,C,T)))}return i}function YO(n){return(n-.5)*360}function $O(n){const e=(180-n*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function XO(n){return n/360+.5}function ZO(n){const e=Math.sin(n*Math.PI/180),t=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return t<0?0:t>1?1:t}function qO(n,e){const{getLocationLon:t,getLocationLat:r}=e,i=new Map;let o=0;for(const f of n){const d=t(f),m=r(f),_=`${d},${m}`,E=i.get(_);E||o++,i.set(_,E?E+1:1)}return o}function KO(n){let e=-1/0,t;for(let r=0;r<n.length;r++){const i=n[r];typeof i=="number"&&i>e&&(e=i,t=r)}return t}function JO(n,e){for(let t=n.length-1;t>=0;t--)if(e(n[t],t,n))return t;return-1}const e7=(n,e=0)=>{const t=e,r=new nM({...n,width:n.width+t*2,height:n.height+t*2}).getBounds();return[r[0][0],r[0][1],r[1][0],r[1][1]]},t7=n=>{if(n)return Yb().range([.025,.5]).domain([0,Math.max.apply(null,n.map(e=>Math.abs(e||0)))])};function n7(n,e,t,r,i){const{getLocationId:o,getLocationName:f,getLocationClusterName:d}=r,m=_=>{const E=t.get(_);return E?f?f(E):o(E)||_:`"${_}"`};for(const _ of e)for(const E of _.nodes)if(Op(E)){const T=n.expandCluster(E);if(T.sort((C,P)=>Zf(i(C),i(P))),d)E.name=d(T);else{const C=T[0],P=T.length===2?T[1]:void 0;E.name=`"${m(C)}" and ${P?`"${m(P)}"`:`${T.length-1} others`}`}}else E.name=m(E.id)}const Xd=new Date,Zd=new Date;function br(n,e,t,r){function i(o){return n(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(n(o=new Date(+o)),o),i.ceil=o=>(n(o=new Date(o-1)),e(o,1),n(o),o),i.round=o=>{const f=i(o),d=i.ceil(o);return o-f<d-o?f:d},i.offset=(o,f)=>(e(o=new Date(+o),f==null?1:Math.floor(f)),o),i.range=(o,f,d)=>{const m=[];if(o=i.ceil(o),d=d==null?1:Math.floor(d),!(o<f)||!(d>0))return m;let _;do m.push(_=new Date(+o)),e(o,d),n(o);while(_<o&&o<f);return m},i.filter=o=>br(f=>{if(f>=f)for(;n(f),!o(f);)f.setTime(f-1)},(f,d)=>{if(f>=f)if(d<0)for(;++d<=0;)for(;e(f,-1),!o(f););else for(;--d>=0;)for(;e(f,1),!o(f););}),t&&(i.count=(o,f)=>(Xd.setTime(+o),Zd.setTime(+f),n(Xd),n(Zd),Math.floor(t(Xd,Zd))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?f=>r(f)%o===0:f=>i.count(0,f)%o===0):i)),i}const Pu=1e3,Ta=Pu*60,ku=Ta*60,n0=ku*24,g3=br(n=>{n.setTime(n-n.getMilliseconds())},(n,e)=>{n.setTime(+n+e*Pu)},(n,e)=>(e-n)/Pu,n=>n.getUTCSeconds());g3.range;const p3=br(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*Pu)},(n,e)=>{n.setTime(+n+e*Ta)},(n,e)=>(e-n)/Ta,n=>n.getMinutes());p3.range;const r7=br(n=>{n.setUTCSeconds(0,0)},(n,e)=>{n.setTime(+n+e*Ta)},(n,e)=>(e-n)/Ta,n=>n.getUTCMinutes());r7.range;const m3=br(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*Pu-n.getMinutes()*Ta)},(n,e)=>{n.setTime(+n+e*ku)},(n,e)=>(e-n)/ku,n=>n.getHours());m3.range;const i7=br(n=>{n.setUTCMinutes(0,0,0)},(n,e)=>{n.setTime(+n+e*ku)},(n,e)=>(e-n)/ku,n=>n.getUTCHours());i7.range;const v3=br(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*Ta)/n0,n=>n.getDate()-1);v3.range;const s7=br(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/n0,n=>n.getUTCDate()-1);s7.range;const o7=br(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/n0,n=>Math.floor(n/n0));o7.range;const y3=br(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,e)=>{n.setMonth(n.getMonth()+e)},(n,e)=>e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12,n=>n.getMonth());y3.range;const a7=br(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCMonth(n.getUTCMonth()+e)},(n,e)=>e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());a7.range;const Qp=br(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e)},(n,e)=>e.getFullYear()-n.getFullYear(),n=>n.getFullYear());Qp.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:br(e=>{e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*n)});Qp.range;const _3=br(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e)},(n,e)=>e.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());_3.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:br(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*n)});_3.range;SA("%Y-%m-%d"),SA("%Y-%m-%d %H:%M"),SA("%Y-%m-%d %H:%M:%S"),SA("%Y"),SA("%Y-%m");var _o;(function(n){n.SECOND="SECOND",n.MINUTE="MINUTE",n.HOUR="HOUR",n.DAY="DAY",n.MONTH="MONTH",n.YEAR="YEAR"})(_o||(_o={}));wr(".%L");const A7=wr(":%S"),l7=wr("%I:%M"),u7=wr("%I %p"),c7=wr("%a %d");wr("%b %d");const f7=wr("%b"),h7=wr("%Y"),gu=[{order:0,key:_o.SECOND,interval:g3,format:A7,formatFull:wr("%Y-%m-%d %H:%M:%S")},{order:1,key:_o.MINUTE,interval:p3,format:l7,formatFull:wr("%Y-%m-%d %H:%M")},{order:2,key:_o.HOUR,interval:m3,format:u7,formatFull:wr("%a %d %b %Y, %I %p")},{order:3,key:_o.DAY,interval:v3,format:c7,formatFull:wr("%a %d %b %Y")},{order:4,key:_o.MONTH,interval:y3,format:f7,formatFull:wr("%b %Y")},{order:5,key:_o.YEAR,interval:Qp,format:h7,formatFull:wr("%Y")}];function py(n){return gu.find(e=>e.key===n)}function d7(n){return gu.find(e=>e.order===n)}function g7(n){let e;for(const t of gu){const{interval:r}=t;if(r(n)<n)return e||t;e=t}return gu[gu.length-1]}const p7=20;class m7{constructor(e){this.getFlowsFromProps=(t,r)=>r.flows,this.getLocationsFromProps=(t,r)=>r.locations,this.getClusterLevelsFromProps=(t,r)=>r.clusterLevels,this.getMaxTopFlowsDisplayNum=(t,r)=>t.settings.maxTopFlowsDisplayNum,this.getFlowEndpointsInViewportMode=(t,r)=>t.settings.flowEndpointsInViewportMode,this.getSelectedLocations=(t,r)=>t.filter?.selectedLocations,this.getLocationFilterMode=(t,r)=>t.filter?.locationFilterMode,this.getClusteringEnabled=(t,r)=>t.settings.clusteringEnabled,this.getLocationTotalsEnabled=(t,r)=>t.settings.locationTotalsEnabled,this.getLocationLabelsEnabled=(t,r)=>t.settings.locationLabelsEnabled,this.getZoom=(t,r)=>t.viewport.zoom,this.getViewport=(t,r)=>t.viewport,this.getSelectedTimeRange=(t,r)=>t.filter?.selectedTimeRange,this.getColorScheme=(t,r)=>t.settings.colorScheme,this.getDarkMode=(t,r)=>t.settings.darkMode,this.getFadeEnabled=(t,r)=>t.settings.fadeEnabled,this.getFadeOpacityEnabled=(t,r)=>t.settings.fadeOpacityEnabled,this.getFadeAmount=(t,r)=>t.settings.fadeAmount,this.getAnimate=(t,r)=>t.settings.animationEnabled,this.getInvalidLocationIds=mt(this.getLocationsFromProps,t=>{if(!t)return;const r=[];for(const i of t){const o=this.accessors.getLocationId(i),f=this.accessors.getLocationLon(i),d=this.accessors.getLocationLat(i);(!(-90<=d&&d<=90)||!(-180<=f&&f<=180))&&r.push(o)}return r.length>0?r:void 0}),this.getLocations=mt(this.getLocationsFromProps,this.getInvalidLocationIds,(t,r)=>{if(!t)return;if(!r||r.length===0)return t;const i=new Set(r),o=[];for(const f of t){const d=this.accessors.getLocationId(f);i.has(d)||o.push(f)}return o}),this.getLocationIds=mt(this.getLocations,t=>{if(!t)return;const r=new Set;for(const i of t)r.add(this.accessors.getLocationId(i));return r}),this.getSelectedLocationsSet=mt(this.getSelectedLocations,t=>t&&t.length>0?new Set(t):void 0),this.getSortedFlowsForKnownLocations=mt(this.getFlowsFromProps,this.getLocationIds,(t,r)=>{if(!r||!t)return;const i=[];for(const o of t){const f=this.accessors.getFlowOriginId(o),d=this.accessors.getFlowDestId(o);r.has(f)&&r.has(d)&&i.push(o)}return i.sort((o,f)=>Zf(Math.abs(this.accessors.getFlowMagnitude(o)),Math.abs(this.accessors.getFlowMagnitude(f))))}),this.getActualTimeExtent=mt(this.getSortedFlowsForKnownLocations,t=>{if(!t)return;let r=null,i=null;for(const o of t){const f=this.accessors.getFlowTime(o);f&&((r==null||r>f)&&(r=f),(i==null||i<f)&&(i=f))}if(!(!r||!i))return[r,i]}),this.getTimeGranularityKey=mt(this.getSortedFlowsForKnownLocations,this.getActualTimeExtent,(t,r)=>{if(!t||!r)return;const i=Fb(t,f=>{const d=this.accessors.getFlowTime(f);return d?g7(d).order:null});if(i==null)return;const o=d7(i);return o?o.key:void 0}),this.getTimeExtent=mt(this.getActualTimeExtent,this.getTimeGranularityKey,(t,r)=>{const i=r?py(r):void 0;if(!t||!i?.interval)return;const{interval:o}=i;return[t[0],o.offset(o.floor(t[1]),1)]}),this.getSortedFlowsForKnownLocationsFilteredByTime=mt(this.getSortedFlowsForKnownLocations,this.getTimeExtent,this.getSelectedTimeRange,(t,r,i)=>{if(t)return!r||!i||r[0]===i[0]&&r[1]===i[1]?t:t.filter(o=>{const f=this.accessors.getFlowTime(o);return f&&i[0]<=f&&f<i[1]})}),this.getLocationsHavingFlows=mt(this.getSortedFlowsForKnownLocations,this.getLocations,(t,r)=>{if(!r||!t)return r;const i=new Set;for(const f of t)i.add(this.accessors.getFlowOriginId(f)),i.add(this.accessors.getFlowDestId(f));const o=[];for(const f of r)i.has(this.accessors.getLocationId(f))&&o.push(f);return o}),this.getLocationsById=mt(this.getLocationsHavingFlows,t=>{if(!t)return;const r=new Map;for(const i of t)r.set(this.accessors.getLocationId(i),i);return r}),this.getLocationWeightGetter=mt(this.getSortedFlowsForKnownLocations,t=>t?zO(t,this.accessors.getFlowmapDataAccessors()):void 0),this.getClusterLevels=mt(this.getClusterLevelsFromProps,this.getLocationsHavingFlows,this.getLocationWeightGetter,(t,r,i)=>t||(!r||!i?void 0:HO(r,this.accessors.getFlowmapDataAccessors(),i,{maxZoom:p7}))),this.getClusterIndex=mt(this.getLocationsById,this.getLocationWeightGetter,this.getClusterLevels,(t,r,i)=>{if(!t||!r||!i)return;const o=UO(i);return n7(o,i,t,this.accessors.getFlowmapDataAccessors(),r),o}),this.getAvailableClusterZoomLevels=mt(this.getClusterIndex,this.getSelectedLocations,(t,r)=>{if(!t)return;let i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;const f=d=>{const m=t.getClusterById(d);if(m)o=Math.max(o,m.zoom),i=Math.min(i,m.zoom);else{const _=t.getMinZoomForLocation(d);o=Math.max(o,_)}};if(r)for(const d of r)f(d);return t.availableZoomLevels.filter(d=>o<=d&&d<=i)}),this._getClusterZoom=mt(this.getClusterIndex,this.getZoom,this.getAvailableClusterZoomLevels,(t,r,i)=>!t||!i||r==null?void 0:VO(i,r)),this.getClusterZoom=(t,r)=>{const{settings:i}=t;if(i.clusteringEnabled)return i.clusteringAuto||i.clusteringLevel==null?this._getClusterZoom(t,r):i.clusteringLevel},this.getLocationsForSearchBox=mt(this.getClusteringEnabled,this.getLocationsHavingFlows,this.getSelectedLocations,this.getClusterZoom,this.getClusterIndex,(t,r,i,o,f)=>{if(!r)return;let d=Array.from(r);if(f&&i){const m=[];for(const _ of i){const E=f.getClusterById(_);E&&!d.find(T=>(cu(T)?T.id:this.accessors.getLocationId(T))===_)&&m.push(E)}m.length>0&&(d=d.concat(m))}return d}),this.getDiffMode=mt(this.getFlowsFromProps,t=>{if(t){for(const r of t)if(this.accessors.getFlowMagnitude(r)<0)return!0}return!1}),this._getFlowmapColors=mt(this.getDiffMode,this.getColorScheme,this.getDarkMode,this.getFadeEnabled,this.getFadeOpacityEnabled,this.getFadeAmount,this.getAnimate,A3),this.getFlowmapColorsRGBA=mt(this._getFlowmapColors,t=>hO(t)?pO(t):gO(t)),this.getUnknownLocations=mt(this.getLocationIds,this.getFlowsFromProps,this.getSortedFlowsForKnownLocations,(t,r,i)=>{if(!t||!r||i)return;const o=new Set;for(const f of r)t.has(this.accessors.getFlowOriginId(f))||o.add(this.accessors.getFlowOriginId(f)),t.has(this.accessors.getFlowDestId(f))||o.add(this.accessors.getFlowDestId(f));return o}),this.getSortedAggregatedFilteredFlows=mt(this.getClusterIndex,this.getClusteringEnabled,this.getSortedFlowsForKnownLocationsFilteredByTime,this.getClusterZoom,this.getTimeExtent,(t,r,i,o,f)=>{if(!i)return;let d;return r&&t&&o!=null?d=t.aggregateFlows(i,o,this.accessors.getFlowmapDataAccessors()):d=v7(i,this.accessors.getFlowmapDataAccessors()),d.sort((m,_)=>Zf(Math.abs(this.accessors.getFlowMagnitude(m)),Math.abs(this.accessors.getFlowMagnitude(_)))),d}),this.getExpandedSelectedLocationsSet=mt(this.getClusteringEnabled,this.getSelectedLocationsSet,this.getClusterIndex,(t,r,i)=>{if(!r||!i)return r;const o=new Set;for(const f of r){const d=i.getClusterById(f);if(d){const m=i.expandCluster(d);for(const _ of m)o.add(_)}else o.add(f)}return o}),this.getTotalCountsByTime=mt(this.getSortedFlowsForKnownLocations,this.getTimeGranularityKey,this.getTimeExtent,this.getExpandedSelectedLocationsSet,this.getLocationFilterMode,(t,r,i,o,f)=>{const d=r?py(r):void 0;if(!t||!d||!i)return;const m=t.reduce((_,E)=>{if(this.isFlowInSelection(E,o,f)){const T=d.interval(this.accessors.getFlowTime(E)).getTime();_.set(T,(_.get(T)??0)+this.accessors.getFlowMagnitude(E))}return _},new Map);return Array.from(m.entries()).map(([_,E])=>({time:new Date(_),count:E}))}),this.getMaxLocationCircleSize=mt(this.getLocationTotalsEnabled,t=>t?17:1),this.getViewportBoundingBox=mt(this.getViewport,this.getMaxLocationCircleSize,e7),this.getLocationsForZoom=mt(this.getClusteringEnabled,this.getLocationsHavingFlows,this.getClusterIndex,this.getClusterZoom,(t,r,i,o)=>t&&i?i.getClusterNodesFor(o):r),this.getLocationTotals=mt(this.getLocationsForZoom,this.getSortedAggregatedFilteredFlows,this.getSelectedLocationsSet,this.getLocationFilterMode,(t,r,i,o)=>{if(!r)return;const f=new Map,d=(m,_)=>{const E=f.get(m)??{incomingCount:0,outgoingCount:0,internalCount:0};return _.incomingCount!=null&&(E.incomingCount+=_.incomingCount),_.outgoingCount!=null&&(E.outgoingCount+=_.outgoingCount),_.internalCount!=null&&(E.internalCount+=_.internalCount),E};for(const m of r)if(this.isFlowInSelection(m,i,o)){const _=this.accessors.getFlowOriginId(m),E=this.accessors.getFlowDestId(m),T=this.accessors.getFlowMagnitude(m);_===E?f.set(_,d(_,{internalCount:T})):(f.set(_,d(_,{outgoingCount:T})),f.set(E,d(E,{incomingCount:T})))}return f}),this.getLocationsTree=mt(this.getLocationsForZoom,t=>{if(!t)return;const r=Array.isArray(t)?t:Array.from(t),i=new _0(r.length,64,Float32Array);for(let o=0;o<r.length;o++){const f=r[o];i.add(qd(this.accessors.getLocationLon(f)),Kd(this.accessors.getLocationLat(f)))}return i.finish(),i.points=r,i}),this._getLocationIdsInViewport=mt(this.getLocationsTree,this.getViewportBoundingBox,(t,r)=>{const i=this._getLocationsInBboxIndices(t,r);if(i)return new Set(i.map(o=>this.accessors.getLocationId(t.points[o])))}),this.getLocationIdsInViewport=h3(f3,(t,r,i)=>{if(t===r)return!0;if(t==null||r==null||t.size!==r.size)return!1;for(const o of t)if(!r.has(o))return!1;return!0})(this._getLocationIdsInViewport,t=>{if(t)return t}),this.getTotalUnfilteredCount=mt(this.getSortedFlowsForKnownLocations,t=>{if(t)return t.reduce((r,i)=>r+this.accessors.getFlowMagnitude(i),0)}),this.getTotalFilteredCount=mt(this.getSortedAggregatedFilteredFlows,this.getSelectedLocationsSet,this.getLocationFilterMode,(t,r,i)=>t?t.reduce((f,d)=>this.isFlowInSelection(d,r,i)?f+this.accessors.getFlowMagnitude(d):f,0):void 0),this._getLocationTotalsExtent=mt(this.getLocationTotals,t=>my(t,void 0)),this._getLocationTotalsForViewportExtent=mt(this.getLocationTotals,this.getLocationIdsInViewport,(t,r)=>my(t,r)),this.getLocationTotalsExtent=(t,r)=>t.settings.adaptiveScalesEnabled?this._getLocationTotalsForViewportExtent(t,r):this._getLocationTotalsExtent(t,r),this.getFlowsForFlowmapLayer=mt(this.getSortedAggregatedFilteredFlows,this.getLocationIdsInViewport,this.getSelectedLocationsSet,this.getLocationFilterMode,this.getMaxTopFlowsDisplayNum,this.getFlowEndpointsInViewportMode,(t,r,i,o,f,d)=>{if(!t||!r)return;const m=[];let _=0;for(const E of t){const T=this.accessors.getFlowOriginId(E),C=this.accessors.getFlowDestId(E),P=r.has(T),R=r.has(C);if((d==="both"?P&&R:P||R)&&this.isFlowInSelection(E,i,o)&&T!==C&&(m.push(E),_++),_>f)break}return m.reverse()}),this._getFlowMagnitudeExtent=mt(this.getSortedAggregatedFilteredFlows,this.getSelectedLocationsSet,this.getLocationFilterMode,(t,r,i)=>{if(!t)return;let o;for(const f of t)if(this.accessors.getFlowOriginId(f)!==this.accessors.getFlowDestId(f)&&this.isFlowInSelection(f,r,i)){const d=this.accessors.getFlowMagnitude(f);o==null?o=[d,d]:(d<o[0]&&(o[0]=d),d>o[1]&&(o[1]=d))}return o}),this._getAdaptiveFlowMagnitudeExtent=mt(this.getFlowsForFlowmapLayer,t=>{if(!t)return;const r=Fg(t,this.accessors.getFlowMagnitude);return r[0]!==void 0&&r[1]!==void 0?r:void 0}),this.getFlowMagnitudeExtent=(t,r)=>t.settings.adaptiveScalesEnabled?this._getAdaptiveFlowMagnitudeExtent(t,r):this._getFlowMagnitudeExtent(t,r),this.getLocationMaxAbsTotalGetter=mt(this.getLocationTotals,t=>r=>{const i=t?.get(r);if(i)return Math.max(Math.abs(i.incomingCount+i.internalCount),Math.abs(i.outgoingCount+i.internalCount))}),this.getFlowThicknessScale=mt(this.getFlowMagnitudeExtent,t7),this.getCircleSizeScale=mt(this.getMaxLocationCircleSize,this.getLocationTotalsEnabled,this.getLocationTotalsExtent,(t,r,i)=>{if(!r)return()=>t;if(i)return BI().range([0,t]).domain([0,Math.max.apply(null,i.map(o=>Math.abs(o||0)))])}),this.getInCircleSizeGetter=mt(this.getCircleSizeScale,this.getLocationTotals,(t,r)=>i=>{const o=r?.get(i);return o&&t&&t(Math.abs(o.incomingCount+o.internalCount))||0}),this.getOutCircleSizeGetter=mt(this.getCircleSizeScale,this.getLocationTotals,(t,r)=>i=>{const o=r?.get(i);return o&&t&&t(Math.abs(o.outgoingCount+o.internalCount))||0}),this.getSortedLocationsForZoom=mt(this.getLocationsForZoom,this.getInCircleSizeGetter,this.getOutCircleSizeGetter,(t,r,i)=>t?[...t].sort((f,d)=>{const m=this.accessors.getLocationId(f),_=this.accessors.getLocationId(d);return NA(Math.max(r(m),i(m)),Math.max(r(_),i(_)))}):void 0),this.getLocationsForFlowmapLayer=mt(this.getSortedLocationsForZoom,t=>t),this.getLocationsForFlowmapLayerById=mt(this.getLocationsForFlowmapLayer,t=>{if(t)return t.reduce((r,i)=>(r.set(this.accessors.getLocationId(i),i),r),new Map)}),this.getLocationOrClusterByIdGetter=mt(this.getClusterIndex,this.getLocationsById,(t,r)=>i=>t?.getClusterById(i)??r?.get(i)),this.getLayersData=mt(this.getLocationsForFlowmapLayer,this.getFlowsForFlowmapLayer,this.getFlowmapColorsRGBA,this.getLocationsForFlowmapLayerById,this.getLocationIdsInViewport,this.getInCircleSizeGetter,this.getOutCircleSizeGetter,this.getFlowThicknessScale,this.getAnimate,this.getLocationLabelsEnabled,(t,r,i,o,f,d,m,_,E,T)=>this._prepareLayersData(t,r,i,o,f,d,m,_,E,T)),this.accessors=new Wg(e),this.setAccessors(e)}setAccessors(e){this.accessors=new Wg(e)}getAggregateAccessors(){return this.accessors}prepareLayersData(e,t){const r=this.getLocationsForFlowmapLayer(e,t)||[],i=this.getFlowsForFlowmapLayer(e,t)||[],o=this.getFlowmapColorsRGBA(e,t),f=this.getLocationsForFlowmapLayerById(e,t),d=this.getLocationIdsInViewport(e,t),m=this.getInCircleSizeGetter(e,t),_=this.getOutCircleSizeGetter(e,t),E=this.getFlowThicknessScale(e,t),T=this.getLocationLabelsEnabled(e,t);return this._prepareLayersData(r,i,o,f,d,m,_,E,e.settings.animationEnabled,T)}_prepareLayersData(e,t,r,i,o,f,d,m,_,E){e||(e=[]),t||(t=[]);const{getFlowOriginId:T,getFlowDestId:C,getFlowMagnitude:P,getLocationId:R,getLocationLon:U,getLocationLat:j,getLocationName:G}=this.accessors,Q=Fg(t,We=>P(We)),X=fO(r,Q),q=Float32Array.from((function*(){for(const We of e)yield U(We),yield j(We)})()),ee=l3(r)?r.positive.locationCircles.inner:r.locationCircles.inner,ie=Uint8Array.from((function*(){for(const We of e)yield*ee})()),pe=Float32Array.from((function*(){for(const We of e){const tt=R(We);yield o?.has(tt)?f(tt):1}})()),ue=Float32Array.from((function*(){for(const We of e){const tt=R(We);yield o?.has(tt)?d(tt):1}})()),me=Float32Array.from((function*(){for(const We of t){const tt=i?.get(T(We));yield tt?U(tt):0,yield tt?j(tt):0}})()),Ce=Float32Array.from((function*(){for(const We of t){const tt=i?.get(C(We));yield tt?U(tt):0,yield tt?j(tt):0}})()),ge=Float32Array.from((function*(){for(const We of t)yield m&&m(P(We))||0})()),ke=Float32Array.from((function*(){for(const We of t){const tt=T(We),_t=C(We);yield Math.max(f(tt),d(tt)),yield Math.max(f(_t),d(_t))}})()),Me=Uint8Array.from((function*(){for(const We of t)yield*X(P(We))})()),ze=_?Float32Array.from((function*(){for(const We of t)yield new NO.alea(`${T(We)}-${C(We)}`)()})()):void 0;return{circleAttributes:{length:e.length,attributes:{getPosition:{value:q,size:2},getColor:{value:ie,size:4},getInRadius:{value:pe,size:1},getOutRadius:{value:ue,size:1}}},lineAttributes:{length:t.length,attributes:{getSourcePosition:{value:me,size:2},getTargetPosition:{value:Ce,size:2},getThickness:{value:ge,size:1},getColor:{value:Me,size:4},getEndpointOffsets:{value:ke,size:2},...ze?{getStaggering:{value:ze,size:1}}:{}}},...E?{locationLabels:e.map(G)}:void 0}}getLocationsInBbox(e,t){if(e)return this._getLocationsInBboxIndices(e,t).map(r=>e.points[r])}_getLocationsInBboxIndices(e,t){if(!e)return;const[r,i,o,f]=t,[d,m,_,E]=[qd(r),Kd(i),qd(o),Kd(f)];return e.range(Math.min(d,_),Math.min(m,E),Math.max(d,_),Math.max(m,E))}isFlowInSelection(e,t,r){const i=this.accessors.getFlowOriginId(e),o=this.accessors.getFlowDestId(e);if(t)switch(r){case LA.ALL:return t.has(i)||t.has(o);case LA.BETWEEN:return t.has(i)&&t.has(o);case LA.INCOMING:return t.has(o);case LA.OUTGOING:return t.has(i)}return!0}}function my(n,e){if(!n)return;let t;for(const[r,{incomingCount:i,outgoingCount:o,internalCount:f}]of n.entries())if(e==null||e.has(r)){const d=Math.min(i+f,o+f,f),m=Math.max(i+f,o+f,f);t?(d<t[0]&&(t[0]=d),m>t[1]&&(t[1]=m)):t=[d,m]}return t}function qd(n){return n/360+.5}function Kd(n){const e=Math.sin(n*Math.PI/180),t=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return t<0?0:t>1?1:t}function v7(n,e){const t=Db(n,i=>{const o=e.getFlowOriginId(i[0]),f=e.getFlowDestId(i[0]);return{aggregate:!0,origin:o,dest:f,count:i.reduce((m,_)=>{const E=e.getFlowMagnitude(_);return E&&!isNaN(E)&&isFinite(E)?m+E:m},0)}},e.getFlowOriginId,e.getFlowDestId),r=[];for(const i of t.values())for(const o of i.values())r.push(o);return r}function Jd(n,e){const{getInRadius:t,getOutRadius:r}=n.attributes;return Math.max(t.value[e],r.value[e])}function vy(n,e){const{getPosition:t}=n.attributes;return[t.value[e*2],t.value[e*2+1]]}function y7(n,e){const{getColor:t,getEndpointOffsets:r,getSourcePosition:i,getTargetPosition:o,getThickness:f,getStaggering:d}=n.attributes;return{length:1,attributes:{getColor:{value:t.value.subarray(e*4,(e+1)*4),size:4},getEndpointOffsets:{value:r.value.subarray(e*2,(e+1)*2),size:2},getSourcePosition:{value:i.value.subarray(e*2,(e+1)*2),size:2},getTargetPosition:{value:o.value.subarray(e*2,(e+1)*2),size:2},getThickness:{value:f.value.subarray(e,e+1),size:1},...d?{getStaggering:{value:d.value.subarray(e,e+1),size:1}}:void 0}}}class w0{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=t[i],f=e+o,d=Math.abs(e)<Math.abs(o)?e-(f-o):o-(f-e);d&&(t[r++]=d),e=f}return t[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let t=this._n,r,i,o,f=0;if(t>0){for(f=e[--t];t>0&&(r=f,i=e[--t],f=r+i,o=i-(f-r),!o););t>0&&(o<0&&e[t-1]<0||o>0&&e[t-1]>0)&&(i=o*2,r=f+i,i==r-f&&(f=r))}return f}}var Qg=1e-6,Qu=Math.PI,yy=Qu/2,w3=Qu/4,_y=Qu*2,eg=180/Qu,tl=Qu/180,Yp=Math.abs,b3=Math.atan2,Iu=Math.cos,Ru=Math.sin,_7=Math.sqrt;function w7(n){return n>1?yy:n<-1?-yy:Math.asin(n)}function cf(){}function r0(n,e){n&&by.hasOwnProperty(n.type)&&by[n.type](n,e)}var wy={Feature:function(n,e){r0(n.geometry,e)},FeatureCollection:function(n,e){for(var t=n.features,r=-1,i=t.length;++r<i;)r0(t[r].geometry,e)}},by={Sphere:function(n,e){e.sphere()},Point:function(n,e){n=n.coordinates,e.point(n[0],n[1],n[2])},MultiPoint:function(n,e){for(var t=n.coordinates,r=-1,i=t.length;++r<i;)n=t[r],e.point(n[0],n[1],n[2])},LineString:function(n,e){Yg(n.coordinates,e,0)},MultiLineString:function(n,e){for(var t=n.coordinates,r=-1,i=t.length;++r<i;)Yg(t[r],e,0)},Polygon:function(n,e){Ey(n.coordinates,e)},MultiPolygon:function(n,e){for(var t=n.coordinates,r=-1,i=t.length;++r<i;)Ey(t[r],e)},GeometryCollection:function(n,e){for(var t=n.geometries,r=-1,i=t.length;++r<i;)r0(t[r],e)}};function Yg(n,e,t){var r=-1,i=n.length-t,o;for(e.lineStart();++r<i;)o=n[r],e.point(o[0],o[1],o[2]);e.lineEnd()}function Ey(n,e){var t=-1,r=n.length;for(e.polygonStart();++t<r;)Yg(n[t],e,1);e.polygonEnd()}function b7(n,e){n&&wy.hasOwnProperty(n.type)?wy[n.type](n,e):r0(n,e)}var i0=new w0,Ty=new w0,E3,T3,$g,Xg,Zg,Ds={point:cf,lineStart:cf,lineEnd:cf,polygonStart:function(){i0=new w0,Ds.lineStart=E7,Ds.lineEnd=T7},polygonEnd:function(){var n=+i0;Ty.add(n<0?_y+n:n),this.lineStart=this.lineEnd=this.point=cf},sphere:function(){Ty.add(_y)}};function E7(){Ds.point=x7}function T7(){x3(E3,T3)}function x7(n,e){Ds.point=x3,E3=n,T3=e,n*=tl,e*=tl,$g=n,Xg=Iu(e=e/2+w3),Zg=Ru(e)}function x3(n,e){n*=tl,e*=tl,e=e/2+w3;var t=n-$g,r=t>=0?1:-1,i=r*t,o=Iu(e),f=Ru(e),d=Zg*f,m=Xg*o+d*Iu(i),_=d*r*Ru(i);i0.add(b3(_,m)),$g=n,Xg=o,Zg=f}function S7(n){return[b3(n[1],n[0]),w7(n[2])]}function C7(n){var e=n[0],t=n[1],r=Iu(t);return[r*Iu(e),r*Ru(e),Ru(t)]}function xy(n,e){return[n[1]*e[2]-n[2]*e[1],n[2]*e[0]-n[0]*e[2],n[0]*e[1]-n[1]*e[0]]}function M7(n){var e=_7(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=e,n[1]/=e,n[2]/=e}var pn,Ir,_n,$r,ha,S3,C3,UA,pu,wo,Fs,Cs={point:qg,lineStart:Sy,lineEnd:Cy,polygonStart:function(){Cs.point=L3,Cs.lineStart=L7,Cs.lineEnd=P7,pu=new w0,Ds.polygonStart()},polygonEnd:function(){Ds.polygonEnd(),Cs.point=qg,Cs.lineStart=Sy,Cs.lineEnd=Cy,i0<0?(pn=-(_n=180),Ir=-($r=90)):pu>Qg?$r=90:pu<-Qg&&(Ir=-90),Fs[0]=pn,Fs[1]=_n},sphere:function(){pn=-(_n=180),Ir=-($r=90)}};function qg(n,e){wo.push(Fs=[pn=n,_n=n]),e<Ir&&(Ir=e),e>$r&&($r=e)}function M3(n,e){var t=C7([n*tl,e*tl]);if(UA){var r=xy(UA,t),i=[r[1],-r[0],0],o=xy(i,r);M7(o),o=S7(o);var f=n-ha,d=f>0?1:-1,m=o[0]*eg*d,_,E=Yp(f)>180;E^(d*ha<m&&m<d*n)?(_=o[1]*eg,_>$r&&($r=_)):(m=(m+360)%360-180,E^(d*ha<m&&m<d*n)?(_=-o[1]*eg,_<Ir&&(Ir=_)):(e<Ir&&(Ir=e),e>$r&&($r=e))),E?n<ha?Wr(pn,n)>Wr(pn,_n)&&(_n=n):Wr(n,_n)>Wr(pn,_n)&&(pn=n):_n>=pn?(n<pn&&(pn=n),n>_n&&(_n=n)):n>ha?Wr(pn,n)>Wr(pn,_n)&&(_n=n):Wr(n,_n)>Wr(pn,_n)&&(pn=n)}else wo.push(Fs=[pn=n,_n=n]);e<Ir&&(Ir=e),e>$r&&($r=e),UA=t,ha=n}function Sy(){Cs.point=M3}function Cy(){Fs[0]=pn,Fs[1]=_n,Cs.point=qg,UA=null}function L3(n,e){if(UA){var t=n-ha;pu.add(Yp(t)>180?t+(t>0?360:-360):t)}else S3=n,C3=e;Ds.point(n,e),M3(n,e)}function L7(){Ds.lineStart()}function P7(){L3(S3,C3),Ds.lineEnd(),Yp(pu)>Qg&&(pn=-(_n=180)),Fs[0]=pn,Fs[1]=_n,UA=null}function Wr(n,e){return(e-=n)<0?e+360:e}function k7(n,e){return n[0]-e[0]}function My(n,e){return n[0]<=n[1]?n[0]<=e&&e<=n[1]:e<n[0]||n[1]<e}function I7(n){var e,t,r,i,o,f,d;if($r=_n=-(pn=Ir=1/0),wo=[],b7(n,Cs),t=wo.length){for(wo.sort(k7),e=1,r=wo[0],o=[r];e<t;++e)i=wo[e],My(r,i[0])||My(r,i[1])?(Wr(r[0],i[1])>Wr(r[0],r[1])&&(r[1]=i[1]),Wr(i[0],r[1])>Wr(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(f=-1/0,t=o.length-1,e=0,r=o[t];e<=t;r=i,++e)i=o[e],(d=Wr(r[1],i[0]))>f&&(f=d,pn=i[0],_n=r[1])}return wo=Fs=null,pn===1/0||Ir===1/0?[[NaN,NaN],[NaN,NaN]]:[[pn,Ir],[_n,$r]]}function R7(n,e,t){const{pad:r=.05,maxZoom:i=100}=t||{},o=I7(n),[[f,d],[m,_]]=o,E=r?[[f-r*(m-f),d-r*(_-d)],[m+r*(m-f),_+r*(_-d)]]:o,[T,C]=e;return{...xp({width:T,height:C,bounds:E,padding:t?.padding,maxZoom:i}),width:T,height:C,bearing:0,pitch:0}}function P3(n,e,t,r){const i=f=>({type:"Point",coordinates:e(f)});let o;if(Array.isArray(n))o=n.map(i);else{o=[];for(const f of n)o.push(i(f))}return R7({type:"GeometryCollection",geometries:o},t,r)}function O7(n){return n&&n.locations&&n.flows}function D7(n){return n&&typeof n.setFlowmapState=="function"&&typeof n.getViewportForLocations=="function"&&typeof n.getFlowByIndex=="function"&&typeof n.getLocationById=="function"&&typeof n.getLocationByIndex=="function"&&typeof n.getLayersData=="function"}class F7{constructor(e){this.selectors=new m7(e),this.flowmapData=void 0,this.flowmapState=void 0}setAccessors(e){this.selectors.setAccessors(e)}setFlowmapData(e){this.flowmapData=e}getSelectors(){return this.selectors}getFlowmapData(){return this.flowmapData}async setFlowmapState(e){this.flowmapState=e}getFlowmapState(){return this.flowmapState}async getFlowByIndex(e){return!this.flowmapState||!this.flowmapData?void 0:this.selectors.getFlowsForFlowmapLayer(this.flowmapState,this.flowmapData)?.[e]}async getLocationByIndex(e){return!this.flowmapState||!this.flowmapData?void 0:this.selectors.getLocationsForFlowmapLayer(this.flowmapState,this.flowmapData)?.[e]}async getLayersData(){if(!(!this.flowmapState||!this.flowmapData))return this.selectors.getLayersData(this.flowmapState,this.flowmapData)}async getLocationById(e){if(!this.flowmapState||!this.flowmapData)return;const t=this.selectors.getClusterIndex(this.flowmapState,this.flowmapData);if(t){const i=t.getClusterById(e);if(i)return i}return this.selectors.getLocationsById(this.flowmapState,this.flowmapData)?.get(e)}async getTotalsForLocation(e){if(!(!this.flowmapState||!this.flowmapData))return this.selectors.getLocationTotals(this.flowmapState,this.flowmapData)?.get(e)}async getViewportForLocations(e,t){if(this.flowmapData?.locations)return P3(this.flowmapData.locations,r=>[this.selectors.accessors.getLocationLon(r),this.selectors.accessors.getLocationLat(r)],e,t)}async updateLayersData(e){e(await this.getLayersData())}getClusterZoom(){return this.flowmapState&&this.flowmapData?this.selectors.getClusterZoom(this.flowmapState,this.flowmapData):void 0}getClusterIndex(){return this.flowmapState&&this.flowmapData?this.selectors.getClusterIndex(this.flowmapState,this.flowmapData):void 0}getLocationsById(){return this.flowmapState&&this.flowmapData?this.selectors.getLocationsById(this.flowmapState,this.flowmapData):void 0}getLocationTotals(){return this.flowmapState&&this.flowmapData?this.selectors.getLocationTotals(this.flowmapState,this.flowmapData):void 0}getFlowsForFlowmapLayer(){return this.flowmapState&&this.flowmapData?this.selectors.getFlowsForFlowmapLayer(this.flowmapState,this.flowmapData):void 0}}var Ly={},tg={},ng=34,au=10,rg=13;function k3(n){return new Function("d","return {"+n.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function B7(n,e){var t=k3(n);return function(r,i){return e(t(r),i,n)}}function Py(n){var e=Object.create(null),t=[];return n.forEach(function(r){for(var i in r)i in e||t.push(e[i]=i)}),t}function kr(n,e){var t=n+"",r=t.length;return r<e?new Array(e-r+1).join(0)+t:t}function N7(n){return n<0?"-"+kr(-n,6):n>9999?"+"+kr(n,6):kr(n,4)}function U7(n){var e=n.getUTCHours(),t=n.getUTCMinutes(),r=n.getUTCSeconds(),i=n.getUTCMilliseconds();return isNaN(n)?"Invalid Date":N7(n.getUTCFullYear())+"-"+kr(n.getUTCMonth()+1,2)+"-"+kr(n.getUTCDate(),2)+(i?"T"+kr(e,2)+":"+kr(t,2)+":"+kr(r,2)+"."+kr(i,3)+"Z":r?"T"+kr(e,2)+":"+kr(t,2)+":"+kr(r,2)+"Z":t||e?"T"+kr(e,2)+":"+kr(t,2)+"Z":"")}function z7(n){var e=new RegExp('["'+n+`
\r]`),t=n.charCodeAt(0);function r(T,C){var P,R,U=i(T,function(j,G){if(P)return P(j,G-1);R=j,P=C?B7(j,C):k3(j)});return U.columns=R||[],U}function i(T,C){var P=[],R=T.length,U=0,j=0,G,Q=R<=0,X=!1;T.charCodeAt(R-1)===au&&--R,T.charCodeAt(R-1)===rg&&--R;function q(){if(Q)return tg;if(X)return X=!1,Ly;var ie,pe=U,ue;if(T.charCodeAt(pe)===ng){for(;U++<R&&T.charCodeAt(U)!==ng||T.charCodeAt(++U)===ng;);return(ie=U)>=R?Q=!0:(ue=T.charCodeAt(U++))===au?X=!0:ue===rg&&(X=!0,T.charCodeAt(U)===au&&++U),T.slice(pe+1,ie-1).replace(/""/g,'"')}for(;U<R;){if((ue=T.charCodeAt(ie=U++))===au)X=!0;else if(ue===rg)X=!0,T.charCodeAt(U)===au&&++U;else if(ue!==t)continue;return T.slice(pe,ie)}return Q=!0,T.slice(pe,R)}for(;(G=q())!==tg;){for(var ee=[];G!==Ly&&G!==tg;)ee.push(G),G=q();C&&(ee=C(ee,j++))==null||P.push(ee)}return P}function o(T,C){return T.map(function(P){return C.map(function(R){return E(P[R])}).join(n)})}function f(T,C){return C==null&&(C=Py(T)),[C.map(E).join(n)].concat(o(T,C)).join(`
`)}function d(T,C){return C==null&&(C=Py(T)),o(T,C).join(`
`)}function m(T){return T.map(_).join(`
`)}function _(T){return T.map(E).join(n)}function E(T){return T==null?"":T instanceof Date?U7(T):e.test(T+="")?'"'+T.replace(/"/g,'""')+'"':T}return{parse:r,parseRows:i,format:f,formatBody:d,formatRows:m,formatRow:_,formatValue:E}}var V7=z7(","),j7=V7.parse;function G7(n){if(!n.ok)throw new Error(n.status+" "+n.statusText);return n.text()}function H7(n,e){return fetch(n,e).then(G7)}function W7(n){return function(e,t,r){return arguments.length===2&&typeof t=="function"&&(r=t,t=void 0),H7(e,t).then(function(i){return n(i,r)})}}var ky=W7(j7),Rr=(function(n){n=n||{};var e=typeof n<"u"?n:{},t={},r;for(r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);var i="";function o(le){return e.locateFile?e.locateFile(le,i):i+le}var f;typeof document<"u"&&document.currentScript&&(i=document.currentScript.src),i.indexOf("blob:")!==0?i=i.substr(0,i.lastIndexOf("/")+1):i="",f=function(ve,Be,rt){var u=new XMLHttpRequest;u.open("GET",ve,!0),u.responseType="arraybuffer",u.onload=function(){if(u.status==200||u.status==0&&u.response){Be(u.response);return}var Lt=fs(ve);if(Lt){Be(Lt.buffer);return}rt()},u.onerror=rt,u.send(null)};var d=e.print||console.log.bind(console),m=e.printErr||console.warn.bind(console);for(r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);t=null,e.arguments&&e.arguments;var _=0,E=function(le){_=le},T=function(){return _},C=8;function P(le,ve,Be,rt){switch(Be=Be||"i8",Be.charAt(Be.length-1)==="*"&&(Be="i32"),Be){case"i1":ke[le>>0]=ve;break;case"i8":ke[le>>0]=ve;break;case"i16":ze[le>>1]=ve;break;case"i32":We[le>>2]=ve;break;case"i64":Vs=[ve>>>0,(pi=ve,+Kt(pi)>=1?pi>0?($t(+An(pi/4294967296),4294967295)|0)>>>0:~~+It((pi-+(~~pi>>>0))/4294967296)>>>0:0)],We[le>>2]=Vs[0],We[le+4>>2]=Vs[1];break;case"float":tt[le>>2]=ve;break;case"double":_t[le>>3]=ve;break;default:Tr("invalid type for setValue: "+Be)}}function R(le,ve,Be){switch(ve=ve||"i8",ve.charAt(ve.length-1)==="*"&&(ve="i32"),ve){case"i1":return ke[le>>0];case"i8":return ke[le>>0];case"i16":return ze[le>>1];case"i32":return We[le>>2];case"i64":return We[le>>2];case"float":return tt[le>>2];case"double":return _t[le>>3];default:Tr("invalid type for getValue: "+ve)}return null}var U=!1;function j(le,ve){le||Tr("Assertion failed: "+ve)}function G(le){var ve=e["_"+le];return j(ve,"Cannot call unknown function "+le+", make sure it is exported"),ve}function Q(le,ve,Be,rt,u){var N={string:function(lt){var bn=0;if(lt!=null&&lt!==0){var Or=(lt.length<<2)+1;bn=Jr(Or),ue(lt,bn,Or)}return bn},array:function(lt){var bn=Jr(lt.length);return me(lt,bn),bn}};function Lt(lt){return ve==="string"?ie(lt):ve==="boolean"?!!lt:lt}var Nt=G(le),fn=[],Et=0;if(rt)for(var Tt=0;Tt<rt.length;Tt++){var xr=N[Be[Tt]];xr?(Et===0&&(Et=Gs()),fn[Tt]=xr(rt[Tt])):fn[Tt]=rt[Tt]}var Rt=Nt.apply(null,fn);return Rt=Lt(Rt),Et!==0&&mi(Et),Rt}function X(le,ve,Be,rt){Be=Be||[];var u=Be.every(function(Lt){return Lt==="number"}),N=ve!=="string";return N&&u&&!rt?G(le):function(){return Q(le,ve,Be,arguments)}}var q=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ee(le,ve,Be){for(var rt=ve+Be,u=ve;le[u]&&!(u>=rt);)++u;if(u-ve>16&&le.subarray&&q)return q.decode(le.subarray(ve,u));for(var N="";ve<u;){var Lt=le[ve++];if(!(Lt&128)){N+=String.fromCharCode(Lt);continue}var Nt=le[ve++]&63;if((Lt&224)==192){N+=String.fromCharCode((Lt&31)<<6|Nt);continue}var fn=le[ve++]&63;if((Lt&240)==224?Lt=(Lt&15)<<12|Nt<<6|fn:Lt=(Lt&7)<<18|Nt<<12|fn<<6|le[ve++]&63,Lt<65536)N+=String.fromCharCode(Lt);else{var Et=Lt-65536;N+=String.fromCharCode(55296|Et>>10,56320|Et&1023)}}return N}function ie(le,ve){return le?ee(Me,le,ve):""}function pe(le,ve,Be,rt){if(!(rt>0))return 0;for(var u=Be,N=Be+rt-1,Lt=0;Lt<le.length;++Lt){var Nt=le.charCodeAt(Lt);if(Nt>=55296&&Nt<=57343){var fn=le.charCodeAt(++Lt);Nt=65536+((Nt&1023)<<10)|fn&1023}if(Nt<=127){if(Be>=N)break;ve[Be++]=Nt}else if(Nt<=2047){if(Be+1>=N)break;ve[Be++]=192|Nt>>6,ve[Be++]=128|Nt&63}else if(Nt<=65535){if(Be+2>=N)break;ve[Be++]=224|Nt>>12,ve[Be++]=128|Nt>>6&63,ve[Be++]=128|Nt&63}else{if(Be+3>=N)break;ve[Be++]=240|Nt>>18,ve[Be++]=128|Nt>>12&63,ve[Be++]=128|Nt>>6&63,ve[Be++]=128|Nt&63}}return ve[Be]=0,Be-u}function ue(le,ve,Be){return pe(le,Me,ve,Be)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function me(le,ve){ke.set(le,ve)}function Ce(le,ve){return le%ve>0&&(le+=ve-le%ve),le}var ge,ke,Me,ze,We,tt,_t;function De(le){ge=le,e.HEAP8=ke=new Int8Array(le),e.HEAP16=ze=new Int16Array(le),e.HEAP32=We=new Int32Array(le),e.HEAPU8=Me=new Uint8Array(le),e.HEAPU16=new Uint16Array(le),e.HEAPU32=new Uint32Array(le),e.HEAPF32=tt=new Float32Array(le),e.HEAPF64=_t=new Float64Array(le)}var Qe=5267040,K=24128,ye=e.TOTAL_MEMORY||33554432;e.buffer?ge=e.buffer:ge=new ArrayBuffer(ye),ye=ge.byteLength,De(ge),We[K>>2]=Qe;function Ye(le){for(;le.length>0;){var ve=le.shift();if(typeof ve=="function"){ve();continue}var Be=ve.func;typeof Be=="number"?ve.arg===void 0?e.dynCall_v(Be):e.dynCall_vi(Be,ve.arg):Be(ve.arg===void 0?null:ve.arg)}}var Mt=[],wt=[],zt=[],kt=[];function gt(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)xt(e.preRun.shift());Ye(Mt)}function Ct(){Ye(wt)}function Se(){Ye(zt)}function at(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)Ee(e.postRun.shift());Ye(kt)}function xt(le){Mt.unshift(le)}function Ee(le){kt.unshift(le)}var Kt=Math.abs,It=Math.ceil,An=Math.floor,$t=Math.min,Jt=0,Er=null;function zs(le){Jt++,e.monitorRunDependencies&&e.monitorRunDependencies(Jt)}function qr(le){if(Jt--,e.monitorRunDependencies&&e.monitorRunDependencies(Jt),Jt==0&&Er){var ve=Er;Er=null,ve()}}e.preloadedImages={},e.preloadedAudios={};var Xt=null,cs="data:application/octet-stream;base64,";function Po(le){return String.prototype.startsWith?le.startsWith(cs):le.indexOf(cs)===0}var pi,Vs;Xt="data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAOgehWlKfUEEz1zLi+JsiQa2og3wcMfVAWCbHorc0yEDi+Yn/Y6mbQJ11/mfsnG9At6bnG4UQQkBvMCQWKqUUQJVmwwswmOc/3hVgVBL3uj//qqOEOdGOPw/WDN4gnGE/H3ANkCUgND+AA8btKgAHPwTXBqJVSdo+XfRQAqsKrj4fc+zLYbSPQklEmCZHv2FCUP+uDso1NEKYtPhwphUHQptxnyFXYdpB7CddZAMmrkGAt1AxSTqBQUibBVdTsFNBSuX3MV+AJkFocv82SLf5QAqmgj7AY81A23VDSEnLoEDGEJVSeDFzQDYrqvBk70VA8U157pcRGUBWfEF+ZKbsP7KBdLHZTpFAqKYk69AqekDbeGY41MdjQD8AZzHK501A1vcrrjubNkD5LnquvBYhQCbiRRD71QlAqt72EbOH8z8Eu+jL1YbdP4uaox/xUcY/abedg1XfsD+BsUdzJ4KZP5wE9YFySIM/rW1kAKMpbT+rZFthVRhWPy4PKlXIs0A/qMZLlwDnMEHByqEF0I0ZQQYSFD8lUQNBPpY+dFs07UAH8BZImBPWQN9RY0I0sMBA2T7kLfc6qUByFYvfhBKTQMq+0Mis1XxA0XQbeQXMZUBJJ5aEGXpQQP7/SY0a6ThAaMD92b/UIkAs8s8yqXoMQNIegOvCk/U/aOi7NZJP4D8AAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAD/////AAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAA/////wAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAP////8AAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////BQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAEAAQAAAQEAAAAAAAEAAAABAAAAAQABAAAAAAAAAAAAAAAAAAAAAAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAGFsZ29zLmMAaDNOZWlnaGJvclJvdGF0aW9ucwBjb29yZGlqay5jAF91cEFwN0NoZWNrZWQAX3VwQXA3ckNoZWNrZWQAZGlyZWN0ZWRFZGdlLmMAZGlyZWN0ZWRFZGdlVG9Cb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0NlbGxCb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbY2VudGVySUpLLmZhY2VdW2ZhY2UyXSA9PSBLSQBfZmFjZUlqa1RvQ2VsbEJvdW5kYXJ5AGgzSW5kZXguYwBjb21wYWN0Q2VsbHMAbGF0TG5nVG9DZWxsAGNlbGxUb0NoaWxkUG9zAHZhbGlkYXRlQ2hpbGRQb3MAbGF0TG5nLmMAY2VsbEFyZWFSYWRzMgBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGNlbGxUb0xvY2FsSWprAGJhc2VDZWxsICE9IG9yaWdpbkJhc2VDZWxsACEob3JpZ2luT25QZW50ICYmIGluZGV4T25QZW50KQBiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvQ2VsbAAhX2lzQmFzZUNlbGxQZW50YWdvbihiYXNlQ2VsbCkAYmFzZUNlbGxSb3RhdGlvbnMgPj0gMABncmlkUGF0aENlbGxzADAAdmVydGV4LmMAY2VsbFRvVmVydGV4AGdyYXBoLT5idWNrZXRzICE9IE5VTEwAdmVydGV4R3JhcGguYwBpbml0VmVydGV4R3JhcGgAbm9kZSAhPSBOVUxMAGFkZFZlcnRleE5vZGU=";var Ia=24144;function js(le,ve,Be,rt){Tr("Assertion failed: "+ie(le)+", at: "+[ve?ie(ve):"unknown filename",Be,rt?ie(rt):"unknown function"])}function Ii(){return ke.length}function ko(le,ve,Be){Me.set(Me.subarray(ve,ve+Be),le)}function Ri(le){return e.___errno_location&&(We[e.___errno_location()>>2]=le),le}function Kr(le){Tr("OOM")}function Io(le){try{var ve=new ArrayBuffer(le);return ve.byteLength!=le?void 0:(new Int8Array(ve).set(ke),Oo(ve),De(ve),1)}catch{}}function Ra(le){var ve=Ii(),Be=16777216,rt=2147483648-Be;if(le>rt)return!1;for(var u=16777216,N=Math.max(ve,u);N<le;)N<=536870912?N=Ce(2*N,Be):N=Math.min(Ce((3*N+2147483648)/4,Be),rt);var Lt=Io(N);return!!Lt}var Oa=typeof atob=="function"?atob:function(le){var ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Be="",rt,u,N,Lt,Nt,fn,Et,Tt=0;le=le.replace(/[^A-Za-z0-9\+\/\=]/g,"");do Lt=ve.indexOf(le.charAt(Tt++)),Nt=ve.indexOf(le.charAt(Tt++)),fn=ve.indexOf(le.charAt(Tt++)),Et=ve.indexOf(le.charAt(Tt++)),rt=Lt<<2|Nt>>4,u=(Nt&15)<<4|fn>>2,N=(fn&3)<<6|Et,Be=Be+String.fromCharCode(rt),fn!==64&&(Be=Be+String.fromCharCode(u)),Et!==64&&(Be=Be+String.fromCharCode(N));while(Tt<le.length);return Be};function ll(le){try{for(var ve=Oa(le),Be=new Uint8Array(ve.length),rt=0;rt<ve.length;++rt)Be[rt]=ve.charCodeAt(rt);return Be}catch{throw new Error("Converting base64 string to bytes failed.")}}function fs(le){if(Po(le))return ll(le.slice(cs.length))}var Ro={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},Oi={b:E,c:T,d:js,e:Ri,f:Ii,g:ko,h:Ra,i:Kr,o:Ia,p:K},Te=(function(le,ve,Be){"almost asm";var rt=new le.Int8Array(Be),u=new le.Int32Array(Be);new le.Uint8Array(Be),new le.Float32Array(Be);var N=new le.Float64Array(Be),Lt=ve.o|0,Nt=ve.p|0,fn=le.Math.floor,Et=le.Math.abs,Tt=le.Math.sqrt,xr=le.Math.pow,Rt=le.Math.cos,lt=le.Math.sin,bn=le.Math.tan,Or=le.Math.acos,hs=le.Math.asin,Fi=le.Math.atan,tr=le.Math.atan2,Bi=le.Math.ceil,Ot=le.Math.imul,Nn=le.Math.min,ei=le.Math.max,Mn=le.Math.clz32,it=ve.b,V=ve.c,Ze=ve.d,Xn=ve.e,gr=ve.f,Da=ve.g,Un=ve.h,pr=ve.i,F=24160;function Bo(A){return rt=new Int8Array(A),u=new Int32Array(A),N=new Float64Array(A),Be=A,!0}function Ni(A){A=A|0;var a=0;return a=F,F=F+A|0,F=F+15&-16,a|0}function Ui(){return F|0}function vi(A){A=A|0,F=A}function yi(A,a){A=A|0,F=A}function ti(A,a){A=A|0,a=a|0;var c=0,h=0,g=0;return(A|0)<0?(a=2,a|0):(A|0)>13780509?(a=qa(15,a)|0,a|0):(c=((A|0)<0)<<31>>31,g=Vn(A|0,c|0,3,0)|0,h=V()|0,c=bt(A|0,c|0,1,0)|0,c=Vn(g|0,h|0,c|0,V()|0)|0,c=bt(c|0,V()|0,1,0)|0,A=V()|0,u[a>>2]=c,u[a+4>>2]=A,a=0,a|0)}function Fa(A,a,c,h){return A=A|0,a=a|0,c=c|0,h=h|0,ds(A,a,c,h,0)|0}function ds(A,a,c,h,g){A=A|0,a=a|0,c=c|0,h=h|0,g=g|0;var v=0,y=0,b=0,S=0,L=0;if(S=F,F=F+16|0,y=S,!(gs(A,a,c,h,g)|0))return h=0,F=S,h|0;do if((c|0)>=0){if((c|0)>13780509){if(v=qa(15,y)|0,v|0)break;b=y,y=u[b>>2]|0,b=u[b+4>>2]|0}else v=((c|0)<0)<<31>>31,L=Vn(c|0,v|0,3,0)|0,b=V()|0,v=bt(c|0,v|0,1,0)|0,v=Vn(L|0,b|0,v|0,V()|0)|0,v=bt(v|0,V()|0,1,0)|0,b=V()|0,u[y>>2]=v,u[y+4>>2]=b,y=v;if(or(h|0,0,y<<3|0)|0,g|0){or(g|0,0,y<<2|0)|0,v=nr(A,a,c,h,g,y,b,0)|0;break}v=Ur(y,4)|0,v?(L=nr(A,a,c,h,v,y,b,0)|0,ot(v),v=L):v=13}else v=2;while(!1);return L=v,F=S,L|0}function gs(A,a,c,h,g){A=A|0,a=a|0,c=c|0,h=h|0,g=g|0;var v=0,y=0,b=0,S=0,L=0,k=0,z=0,Y=0,Z=0,H=0,re=0;if(re=F,F=F+16|0,Z=re,H=re+8|0,Y=Z,u[Y>>2]=A,u[Y+4>>2]=a,(c|0)<0)return H=2,F=re,H|0;if(v=h,u[v>>2]=A,u[v+4>>2]=a,v=(g|0)!=0,v&&(u[g>>2]=0),qt(A,a)|0)return H=9,F=re,H|0;u[H>>2]=0;e:do if((c|0)>=1)if(v)for(k=1,L=0,z=0,Y=1,v=A;;){if(!(L|z)){if(v=rn(v,a,4,H,Z)|0,v|0)break e;if(a=Z,v=u[a>>2]|0,a=u[a+4>>2]|0,qt(v,a)|0){v=9;break e}}if(v=rn(v,a,u[22384+(z<<2)>>2]|0,H,Z)|0,v|0)break e;if(a=Z,v=u[a>>2]|0,a=u[a+4>>2]|0,A=h+(k<<3)|0,u[A>>2]=v,u[A+4>>2]=a,u[g+(k<<2)>>2]=Y,A=L+1|0,y=(A|0)==(Y|0),b=z+1|0,S=(b|0)==6,qt(v,a)|0){v=9;break e}if(Y=Y+(S&y&1)|0,(Y|0)>(c|0)){v=0;break}else k=k+1|0,L=y?0:A,z=y?S?0:b:z}else for(k=1,L=0,z=0,Y=1,v=A;;){if(!(L|z)){if(v=rn(v,a,4,H,Z)|0,v|0)break e;if(a=Z,v=u[a>>2]|0,a=u[a+4>>2]|0,qt(v,a)|0){v=9;break e}}if(v=rn(v,a,u[22384+(z<<2)>>2]|0,H,Z)|0,v|0)break e;if(a=Z,v=u[a>>2]|0,a=u[a+4>>2]|0,A=h+(k<<3)|0,u[A>>2]=v,u[A+4>>2]=a,A=L+1|0,y=(A|0)==(Y|0),b=z+1|0,S=(b|0)==6,qt(v,a)|0){v=9;break e}if(Y=Y+(S&y&1)|0,(Y|0)>(c|0)){v=0;break}else k=k+1|0,L=y?0:A,z=y?S?0:b:z}else v=0;while(!1);return H=v,F=re,H|0}function nr(A,a,c,h,g,v,y,b){A=A|0,a=a|0,c=c|0,h=h|0,g=g|0,v=v|0,y=y|0,b=b|0;var S=0,L=0,k=0,z=0,Y=0,Z=0,H=0,re=0,de=0,he=0;if(re=F,F=F+16|0,Z=re+8|0,H=re,S=si(A|0,a|0,v|0,y|0)|0,k=V()|0,z=h+(S<<3)|0,de=z,he=u[de>>2]|0,de=u[de+4>>2]|0,L=(he|0)==(A|0)&(de|0)==(a|0),!((he|0)==0&(de|0)==0|L))do S=bt(S|0,k|0,1,0)|0,S=ii(S|0,V()|0,v|0,y|0)|0,k=V()|0,z=h+(S<<3)|0,he=z,de=u[he>>2]|0,he=u[he+4>>2]|0,L=(de|0)==(A|0)&(he|0)==(a|0);while(!((de|0)==0&(he|0)==0|L));if(S=g+(S<<2)|0,L&&(u[S>>2]|0)<=(b|0)||(he=z,u[he>>2]=A,u[he+4>>2]=a,u[S>>2]=b,(b|0)>=(c|0)))return he=0,F=re,he|0;switch(L=b+1|0,u[Z>>2]=0,S=rn(A,a,2,Z,H)|0,S|0){case 9:{Y=9;break}case 0:{S=H,S=nr(u[S>>2]|0,u[S+4>>2]|0,c,h,g,v,y,L)|0,S||(Y=9);break}}e:do if((Y|0)==9){switch(u[Z>>2]=0,S=rn(A,a,3,Z,H)|0,S|0){case 9:break;case 0:{if(S=H,S=nr(u[S>>2]|0,u[S+4>>2]|0,c,h,g,v,y,L)|0,S|0)break e;break}default:break e}switch(u[Z>>2]=0,S=rn(A,a,1,Z,H)|0,S|0){case 9:break;case 0:{if(S=H,S=nr(u[S>>2]|0,u[S+4>>2]|0,c,h,g,v,y,L)|0,S|0)break e;break}default:break e}switch(u[Z>>2]=0,S=rn(A,a,5,Z,H)|0,S|0){case 9:break;case 0:{if(S=H,S=nr(u[S>>2]|0,u[S+4>>2]|0,c,h,g,v,y,L)|0,S|0)break e;break}default:break e}switch(u[Z>>2]=0,S=rn(A,a,4,Z,H)|0,S|0){case 9:break;case 0:{if(S=H,S=nr(u[S>>2]|0,u[S+4>>2]|0,c,h,g,v,y,L)|0,S|0)break e;break}default:break e}switch(u[Z>>2]=0,S=rn(A,a,6,Z,H)|0,S|0){case 9:break;case 0:{if(S=H,S=nr(u[S>>2]|0,u[S+4>>2]|0,c,h,g,v,y,L)|0,S|0)break e;break}default:break e}return he=0,F=re,he|0}while(!1);return he=S,F=re,he|0}function rn(A,a,c,h,g){A=A|0,a=a|0,c=c|0,h=h|0,g=g|0;var v=0,y=0,b=0,S=0,L=0,k=0,z=0,Y=0,Z=0,H=0;if(c>>>0>6)return g=1,g|0;if(z=(u[h>>2]|0)%6|0,u[h>>2]=z,(z|0)>0){v=0;do c=ni(c)|0,v=v+1|0;while((v|0)<(u[h>>2]|0))}if(z=_e(A|0,a|0,45)|0,V()|0,k=z&127,k>>>0>121)return g=5,g|0;S=sr(A,a)|0,v=_e(A|0,a|0,52)|0,V()|0,v=v&15;e:do if(!v)L=8;else{for(;;){if(y=(15-v|0)*3|0,b=_e(A|0,a|0,y|0)|0,V()|0,b=b&7,(b|0)==7){a=5;break}if(H=(Ln(v)|0)==0,v=v+-1|0,Y=Oe(7,0,y|0)|0,a=a&~(V()|0),Z=Oe(u[(H?432:16)+(b*28|0)+(c<<2)>>2]|0,0,y|0)|0,y=V()|0,c=u[(H?640:224)+(b*28|0)+(c<<2)>>2]|0,A=Z|A&~Y,a=y|a,!c){c=0;break e}if(!v){L=8;break e}}return a|0}while(!1);(L|0)==8&&(H=u[848+(k*28|0)+(c<<2)>>2]|0,Z=Oe(H|0,0,45)|0,A=Z|A,a=V()|0|a&-1040385,c=u[4272+(k*28|0)+(c<<2)>>2]|0,(H&127|0)==127&&(H=Oe(u[848+(k*28|0)+20>>2]|0,0,45)|0,a=V()|0|a&-1040385,c=u[4272+(k*28|0)+20>>2]|0,A=Hi(H|A,a)|0,a=V()|0,u[h>>2]=(u[h>>2]|0)+1)),b=_e(A|0,a|0,45)|0,V()|0,b=b&127;e:do if($e(b)|0){t:do if((sr(A,a)|0)==1){if((k|0)!=(b|0))if(_i(b,u[7696+(k*28|0)>>2]|0)|0){A=$a(A,a)|0,y=1,a=V()|0;break}else Ze(23313,22416,436,22424);switch(S|0){case 3:{A=Hi(A,a)|0,a=V()|0,u[h>>2]=(u[h>>2]|0)+1,y=0;break t}case 5:{A=$a(A,a)|0,a=V()|0,u[h>>2]=(u[h>>2]|0)+5,y=0;break t}case 0:return H=9,H|0;default:return H=1,H|0}}else y=0;while(!1);if((c|0)>0){v=0;do A=Ya(A,a)|0,a=V()|0,v=v+1|0;while((v|0)!=(c|0))}if((k|0)!=(b|0)){if(!(on(b)|0)){if((y|0)!=0|(sr(A,a)|0)!=5)break;u[h>>2]=(u[h>>2]|0)+1;break}switch(z&127){case 8:case 118:break e}(sr(A,a)|0)!=3&&(u[h>>2]=(u[h>>2]|0)+1)}}else if((c|0)>0){v=0;do A=Hi(A,a)|0,a=V()|0,v=v+1|0;while((v|0)!=(c|0))}while(!1);return u[h>>2]=((u[h>>2]|0)+c|0)%6|0,H=g,u[H>>2]=A,u[H+4>>2]=a,H=0,H|0}function No(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var g=0,v=0,y=0,b=0,S=0,L=0;for(b=F,F=F+16|0,v=b,y=b+8|0,g=(qt(A,a)|0)==0,g=g?1:2;;){if(u[y>>2]=0,L=(rn(A,a,g,y,v)|0)==0,S=v,L&((u[S>>2]|0)==(c|0)?(u[S+4>>2]|0)==(h|0):0)){A=4;break}if(g=g+1|0,g>>>0>=7){g=7,A=4;break}}return(A|0)==4?(F=b,g|0):0}function D(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var g=0,v=0,y=0,b=0,S=0,L=0,k=0,z=0,Y=0,Z=0,H=0;if(H=F,F=F+16|0,Y=H,Z=H+8|0,z=Y,u[z>>2]=A,u[z+4>>2]=a,!c)return Z=h,u[Z>>2]=A,u[Z+4>>2]=a,Z=0,F=H,Z|0;u[Z>>2]=0;e:do if(qt(A,a)|0)A=9;else{if(v=(c|0)>0,v){g=0,z=A;do{if(A=rn(z,a,4,Z,Y)|0,A|0)break e;if(a=Y,z=u[a>>2]|0,a=u[a+4>>2]|0,g=g+1|0,qt(z,a)|0){A=9;break e}}while((g|0)<(c|0));if(k=h,u[k>>2]=z,u[k+4>>2]=a,k=c+-1|0,v){L=0,A=1;do{if(g=22384+(L<<2)|0,(L|0)==5)for(y=u[g>>2]|0,v=0,g=A;;){if(A=Y,A=rn(u[A>>2]|0,u[A+4>>2]|0,y,Z,Y)|0,A|0)break e;if((v|0)!=(k|0))if(S=Y,b=u[S>>2]|0,S=u[S+4>>2]|0,A=h+(g<<3)|0,u[A>>2]=b,u[A+4>>2]=S,!(qt(b,S)|0))A=g+1|0;else{A=9;break e}else A=g;if(v=v+1|0,(v|0)>=(c|0))break;g=A}else for(y=Y,S=u[g>>2]|0,b=0,g=A,v=u[y>>2]|0,y=u[y+4>>2]|0;;){if(A=rn(v,y,S,Z,Y)|0,A|0)break e;if(y=Y,v=u[y>>2]|0,y=u[y+4>>2]|0,A=h+(g<<3)|0,u[A>>2]=v,u[A+4>>2]=y,A=g+1|0,qt(v,y)|0){A=9;break e}if(b=b+1|0,(b|0)>=(c|0))break;g=A}L=L+1|0}while(L>>>0<6);A=Y,y=z,g=u[A>>2]|0,v=a,A=u[A+4>>2]|0}else y=z,g=z,v=a,A=a}else y=h,u[y>>2]=A,u[y+4>>2]=a,y=A,g=A,v=a,A=a;A=(y|0)==(g|0)&(v|0)==(A|0)?0:9}while(!1);return Z=A,F=H,Z|0}function B(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var g=0,v=0,y=0,b=0,S=0,L=0;if(b=F,F=F+48|0,g=b+16|0,v=b+8|0,y=b,c|0)return y=15,F=b,y|0;if(L=A,S=u[L+4>>2]|0,c=v,u[c>>2]=u[L>>2],u[c+4>>2]=S,bi(v,g),a=$u(g,a,y)|0,!a){if(c=u[v>>2]|0,v=u[A+8>>2]|0,(v|0)>0){g=u[A+12>>2]|0,a=0;do c=(u[g+(a<<3)>>2]|0)+c|0,a=a+1|0;while((a|0)<(v|0))}a=y,g=u[a>>2]|0,a=u[a+4>>2]|0,v=((c|0)<0)<<31>>31,(a|0)<(v|0)|(a|0)==(v|0)&g>>>0<c>>>0?(a=y,u[a>>2]=c,u[a+4>>2]=v,a=v):c=g,S=bt(c|0,a|0,12,0)|0,L=V()|0,a=y,u[a>>2]=S,u[a+4>>2]=L,a=h,u[a>>2]=S,u[a+4>>2]=L,a=0}return L=a,F=b,L|0}function $(A,a,c,h,g,v,y){A=A|0,a=a|0,c=c|0,h=h|0,g=g|0,v=v|0,y=y|0;var b=0,S=0,L=0,k=0,z=0,Y=0,Z=0,H=0,re=0,de=0,he=0,se=0,oe=0,ne=0,Ie=0,Ne=0,Pe=0,Fe=0,Bt=0,Pt=0,dt=0,st=0,Ge=0,At=0,Vt=0,ft=0,Qt=0,kn=0,Rl=0;if(Vt=F,F=F+64|0,dt=Vt+48|0,st=Vt+32|0,Ge=Vt+24|0,Ie=Vt+8|0,Ne=Vt,S=u[A>>2]|0,(S|0)<=0)return At=0,F=Vt,At|0;for(Pe=A+4|0,Fe=dt+8|0,Bt=st+8|0,Pt=Ie+8|0,b=0,oe=0;;){L=u[Pe>>2]|0,se=L+(oe<<4)|0,u[dt>>2]=u[se>>2],u[dt+4>>2]=u[se+4>>2],u[dt+8>>2]=u[se+8>>2],u[dt+12>>2]=u[se+12>>2],(oe|0)==(S+-1|0)?(u[st>>2]=u[L>>2],u[st+4>>2]=u[L+4>>2],u[st+8>>2]=u[L+8>>2],u[st+12>>2]=u[L+12>>2]):(se=L+(oe+1<<4)|0,u[st>>2]=u[se>>2],u[st+4>>2]=u[se+4>>2],u[st+8>>2]=u[se+8>>2],u[st+12>>2]=u[se+12>>2]),S=Xu(dt,st,h,Ge)|0;e:do if(S)L=0,b=S;else if(L=Ge,S=u[L>>2]|0,L=u[L+4>>2]|0,(L|0)>0|(L|0)==0&S>>>0>0){he=0,se=0;t:for(;;){if(Rl=+N[dt>>3],de=tn(S|0,L|0,he|0,se|0)|0,kn=+(de>>>0)+4294967296*+(V()|0),ft=+(S>>>0)+4294967296*+(L|0),Qt=+(he>>>0)+4294967296*+(se|0),N[Ie>>3]=Rl*kn/ft+ +N[st>>3]*Qt/ft,N[Pt>>3]=+N[Fe>>3]*kn/ft+ +N[Bt>>3]*Qt/ft,S=rc(Ie,h,Ne)|0,S|0){b=S;break}de=Ne,re=u[de>>2]|0,de=u[de+4>>2]|0,Y=si(re|0,de|0,a|0,c|0)|0,k=V()|0,S=y+(Y<<3)|0,z=S,L=u[z>>2]|0,z=u[z+4>>2]|0;n:do if((L|0)==0&(z|0)==0)ne=S,At=16;else for(Z=0,H=0;;){if((Z|0)>(c|0)|(Z|0)==(c|0)&H>>>0>a>>>0){b=1;break t}if((L|0)==(re|0)&(z|0)==(de|0))break n;if(S=bt(Y|0,k|0,1,0)|0,Y=ii(S|0,V()|0,a|0,c|0)|0,k=V()|0,H=bt(H|0,Z|0,1,0)|0,Z=V()|0,S=y+(Y<<3)|0,z=S,L=u[z>>2]|0,z=u[z+4>>2]|0,(L|0)==0&(z|0)==0){ne=S,At=16;break}}while(!1);if((At|0)==16&&(At=0,!((re|0)==0&(de|0)==0))&&(H=ne,u[H>>2]=re,u[H+4>>2]=de,H=v+(u[g>>2]<<3)|0,u[H>>2]=re,u[H+4>>2]=de,H=g,H=bt(u[H>>2]|0,u[H+4>>2]|0,1,0)|0,re=V()|0,de=g,u[de>>2]=H,u[de+4>>2]=re),he=bt(he|0,se|0,1,0)|0,se=V()|0,L=Ge,S=u[L>>2]|0,L=u[L+4>>2]|0,!((L|0)>(se|0)|(L|0)==(se|0)&S>>>0>he>>>0)){L=1;break e}}L=0}else L=1;while(!1);if(oe=oe+1|0,!L){At=21;break}if(S=u[A>>2]|0,(oe|0)>=(S|0)){b=0,At=21;break}}return(At|0)==21?(F=Vt,b|0):0}function ce(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var g=0,v=0,y=0,b=0,S=0,L=0,k=0,z=0,Y=0,Z=0,H=0,re=0,de=0,he=0,se=0,oe=0,ne=0,Ie=0,Ne=0,Pe=0,Fe=0,Bt=0,Pt=0,dt=0,st=0,Ge=0,At=0,Vt=0,ft=0,Qt=0,kn=0;if(kn=F,F=F+112|0,At=kn+80|0,S=kn+72|0,Vt=kn,ft=kn+56|0,c|0)return Qt=15,F=kn,Qt|0;if(L=A+8|0,Qt=Sr((u[L>>2]<<5)+32|0)|0,!Qt)return Qt=13,F=kn,Qt|0;if(Cl(A,Qt),st=A,Ge=u[st+4>>2]|0,c=S,u[c>>2]=u[st>>2],u[c+4>>2]=Ge,bi(S,At),c=$u(At,a,Vt)|0,c)st=0,Ge=0;else{if(c=u[S>>2]|0,v=u[L>>2]|0,(v|0)>0){y=u[A+12>>2]|0,g=0;do c=(u[y+(g<<3)>>2]|0)+c|0,g=g+1|0;while((g|0)!=(v|0));g=c}else g=c;c=Vt,v=u[c>>2]|0,c=u[c+4>>2]|0,y=((g|0)<0)<<31>>31,(c|0)<(y|0)|(c|0)==(y|0)&v>>>0<g>>>0?(c=Vt,u[c>>2]=g,u[c+4>>2]=y,c=y):g=v,st=bt(g|0,c|0,12,0)|0,Ge=V()|0,c=Vt,u[c>>2]=st,u[c+4>>2]=Ge,c=0}if(c|0)return ot(Qt),Qt=c,F=kn,Qt|0;if(g=Ur(st,8)|0,!g)return ot(Qt),Qt=13,F=kn,Qt|0;if(b=Ur(st,8)|0,!b)return ot(Qt),ot(g),Qt=13,F=kn,Qt|0;Pt=At,u[Pt>>2]=0,u[Pt+4>>2]=0,Pt=A,dt=u[Pt+4>>2]|0,c=S,u[c>>2]=u[Pt>>2],u[c+4>>2]=dt,c=$(S,st,Ge,a,At,g,b)|0;e:do if(c)ot(g),ot(b),ot(Qt);else{t:do if((u[L>>2]|0)>0){for(y=A+12|0,v=0;c=$((u[y>>2]|0)+(v<<3)|0,st,Ge,a,At,g,b)|0,v=v+1|0,!(c|0);)if((v|0)>=(u[L>>2]|0))break t;ot(g),ot(b),ot(Qt);break e}while(!1);(Ge|0)>0|(Ge|0)==0&st>>>0>0&&or(b|0,0,st<<3|0)|0,dt=At,Pt=u[dt+4>>2]|0;t:do if((Pt|0)>0|(Pt|0)==0&(u[dt>>2]|0)>>>0>0){Pe=g,Fe=b,Bt=g,Pt=b,dt=g,c=g,ne=g,Ie=b,Ne=b,g=b;n:for(;;){for(de=0,he=0,se=0,oe=0,v=0,y=0;;){b=Vt,S=b+56|0;do u[b>>2]=0,b=b+4|0;while((b|0)<(S|0));if(a=Pe+(de<<3)|0,L=u[a>>2]|0,a=u[a+4>>2]|0,gs(L,a,1,Vt,0)|0){b=Vt,S=b+56|0;do u[b>>2]=0,b=b+4|0;while((b|0)<(S|0));b=Ur(7,4)|0,b|0&&(nr(L,a,1,Vt,b,7,0,0)|0,ot(b))}for(re=0;;){H=Vt+(re<<3)|0,Z=u[H>>2]|0,H=u[H+4>>2]|0;r:do if((Z|0)==0&(H|0)==0)b=v,S=y;else{if(k=si(Z|0,H|0,st|0,Ge|0)|0,L=V()|0,b=h+(k<<3)|0,a=b,S=u[a>>2]|0,a=u[a+4>>2]|0,!((S|0)==0&(a|0)==0)){z=0,Y=0;do{if((z|0)>(Ge|0)|(z|0)==(Ge|0)&Y>>>0>st>>>0)break n;if((S|0)==(Z|0)&(a|0)==(H|0)){b=v,S=y;break r}b=bt(k|0,L|0,1,0)|0,k=ii(b|0,V()|0,st|0,Ge|0)|0,L=V()|0,Y=bt(Y|0,z|0,1,0)|0,z=V()|0,b=h+(k<<3)|0,a=b,S=u[a>>2]|0,a=u[a+4>>2]|0}while(!((S|0)==0&(a|0)==0))}(Z|0)==0&(H|0)==0?(b=v,S=y):(qs(Z,H,ft)|0,Ml(A,Qt,ft)|0&&(Y=bt(v|0,y|0,1,0)|0,y=V()|0,z=b,u[z>>2]=Z,u[z+4>>2]=H,v=Fe+(v<<3)|0,u[v>>2]=Z,u[v+4>>2]=H,v=Y),b=v,S=y)}while(!1);if(re=re+1|0,re>>>0>=7)break;v=b,y=S}if(de=bt(de|0,he|0,1,0)|0,he=V()|0,se=bt(se|0,oe|0,1,0)|0,oe=V()|0,y=At,v=u[y>>2]|0,y=u[y+4>>2]|0,(oe|0)<(y|0)|(oe|0)==(y|0)&se>>>0<v>>>0)v=b,y=S;else break}if((y|0)>0|(y|0)==0&v>>>0>0){v=0,y=0;do oe=Pe+(v<<3)|0,u[oe>>2]=0,u[oe+4>>2]=0,v=bt(v|0,y|0,1,0)|0,y=V()|0,oe=At,se=u[oe+4>>2]|0;while((y|0)<(se|0)|((y|0)==(se|0)?v>>>0<(u[oe>>2]|0)>>>0:0))}if(oe=At,u[oe>>2]=b,u[oe+4>>2]=S,(S|0)>0|(S|0)==0&b>>>0>0)re=g,de=Ne,he=dt,se=Ie,oe=Fe,g=ne,Ne=c,Ie=Bt,ne=re,c=de,dt=Pt,Pt=he,Bt=se,Fe=Pe,Pe=oe;else break t}ot(Bt),ot(Pt),ot(Qt),c=1;break e}else c=b;while(!1);ot(Qt),ot(g),ot(c),c=0}while(!1);return Qt=c,F=kn,Qt|0}function we(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0,y=0,b=0,S=0,L=0,k=0;if(k=F,F=F+176|0,S=k,(a|0)<1)return Jo(c,0,0),L=0,F=k,L|0;for(b=A,b=_e(u[b>>2]|0,u[b+4>>2]|0,52)|0,V()|0,Jo(c,(a|0)>6?a:6,b&15),b=0;h=A+(b<<3)|0,h=Ks(u[h>>2]|0,u[h+4>>2]|0,S)|0,!(h|0);){if(h=u[S>>2]|0,(h|0)>0){y=0;do v=S+8+(y<<4)|0,y=y+1|0,h=S+8+(((y|0)%(h|0)|0)<<4)|0,g=Il(c,h,v)|0,g?iA(c,g)|0:kl(c,v,h)|0,h=u[S>>2]|0;while((y|0)<(h|0))}if(b=b+1|0,(b|0)>=(a|0)){h=0,L=13;break}}return(L|0)==13?(F=k,h|0):(ea(c),L=h,F=k,L|0)}function Ve(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0,y=0;if(v=F,F=F+32|0,h=v,g=v+16|0,A=we(A,a,g)|0,A|0)return c=A,F=v,c|0;if(u[c>>2]=0,u[c+4>>2]=0,u[c+8>>2]=0,A=rA(g)|0,A|0)do{a=Zo(c)|0;do El(a,A)|0,y=A+16|0,u[h>>2]=u[y>>2],u[h+4>>2]=u[y+4>>2],u[h+8>>2]=u[y+8>>2],u[h+12>>2]=u[y+12>>2],iA(g,A)|0,A=J0(g,h)|0;while((A|0)!=0);A=rA(g)|0}while((A|0)!=0);return ea(g),A=Ja(c)|0,A?(Tl(c),y=A,F=v,y|0):(y=0,F=v,y|0)}function $e(A){return A=A|0,A>>>0>121?(A=0,A|0):(A=u[7696+(A*28|0)+16>>2]|0,A|0)}function on(A){return A=A|0,(A|0)==4|(A|0)==117|0}function ln(A){return A=A|0,u[11120+((u[A>>2]|0)*216|0)+((u[A+4>>2]|0)*72|0)+((u[A+8>>2]|0)*24|0)+(u[A+12>>2]<<3)>>2]|0}function mn(A){return A=A|0,u[11120+((u[A>>2]|0)*216|0)+((u[A+4>>2]|0)*72|0)+((u[A+8>>2]|0)*24|0)+(u[A+12>>2]<<3)+4>>2]|0}function En(A,a){A=A|0,a=a|0,A=7696+(A*28|0)|0,u[a>>2]=u[A>>2],u[a+4>>2]=u[A+4>>2],u[a+8>>2]=u[A+8>>2],u[a+12>>2]=u[A+12>>2]}function zi(A,a){A=A|0,a=a|0;var c=0,h=0;if(a>>>0>20)return a=-1,a|0;do if((u[11120+(a*216|0)>>2]|0)!=(A|0))if((u[11120+(a*216|0)+8>>2]|0)!=(A|0))if((u[11120+(a*216|0)+16>>2]|0)!=(A|0))if((u[11120+(a*216|0)+24>>2]|0)!=(A|0))if((u[11120+(a*216|0)+32>>2]|0)!=(A|0))if((u[11120+(a*216|0)+40>>2]|0)!=(A|0))if((u[11120+(a*216|0)+48>>2]|0)!=(A|0))if((u[11120+(a*216|0)+56>>2]|0)!=(A|0))if((u[11120+(a*216|0)+64>>2]|0)!=(A|0))if((u[11120+(a*216|0)+72>>2]|0)!=(A|0))if((u[11120+(a*216|0)+80>>2]|0)!=(A|0))if((u[11120+(a*216|0)+88>>2]|0)!=(A|0))if((u[11120+(a*216|0)+96>>2]|0)!=(A|0))if((u[11120+(a*216|0)+104>>2]|0)!=(A|0))if((u[11120+(a*216|0)+112>>2]|0)!=(A|0))if((u[11120+(a*216|0)+120>>2]|0)!=(A|0))if((u[11120+(a*216|0)+128>>2]|0)!=(A|0))if((u[11120+(a*216|0)+136>>2]|0)==(A|0))A=2,c=1,h=2;else{if((u[11120+(a*216|0)+144>>2]|0)==(A|0)){A=0,c=2,h=0;break}if((u[11120+(a*216|0)+152>>2]|0)==(A|0)){A=0,c=2,h=1;break}if((u[11120+(a*216|0)+160>>2]|0)==(A|0)){A=0,c=2,h=2;break}if((u[11120+(a*216|0)+168>>2]|0)==(A|0)){A=1,c=2,h=0;break}if((u[11120+(a*216|0)+176>>2]|0)==(A|0)){A=1,c=2,h=1;break}if((u[11120+(a*216|0)+184>>2]|0)==(A|0)){A=1,c=2,h=2;break}if((u[11120+(a*216|0)+192>>2]|0)==(A|0)){A=2,c=2,h=0;break}if((u[11120+(a*216|0)+200>>2]|0)==(A|0)){A=2,c=2,h=1;break}if((u[11120+(a*216|0)+208>>2]|0)==(A|0)){A=2,c=2,h=2;break}else A=-1;return A|0}else A=2,c=1,h=1;else A=2,c=1,h=0;else A=1,c=1,h=2;else A=1,c=1,h=1;else A=1,c=1,h=0;else A=0,c=1,h=2;else A=0,c=1,h=1;else A=0,c=1,h=0;else A=2,c=0,h=2;else A=2,c=0,h=1;else A=2,c=0,h=0;else A=1,c=0,h=2;else A=1,c=0,h=1;else A=1,c=0,h=0;else A=0,c=0,h=2;else A=0,c=0,h=1;else A=0,c=0,h=0;while(!1);return a=u[11120+(a*216|0)+(c*72|0)+(A*24|0)+(h<<3)+4>>2]|0,a|0}function _i(A,a){return A=A|0,a=a|0,(u[7696+(A*28|0)+20>>2]|0)==(a|0)?(a=1,a|0):(a=(u[7696+(A*28|0)+24>>2]|0)==(a|0),a|0)}function ps(A,a){return A=A|0,a=a|0,u[848+(A*28|0)+(a<<2)>>2]|0}function ms(A,a){return A=A|0,a=a|0,(u[848+(A*28|0)>>2]|0)==(a|0)?(a=0,a|0):(u[848+(A*28|0)+4>>2]|0)==(a|0)?(a=1,a|0):(u[848+(A*28|0)+8>>2]|0)==(a|0)?(a=2,a|0):(u[848+(A*28|0)+12>>2]|0)==(a|0)?(a=3,a|0):(u[848+(A*28|0)+16>>2]|0)==(a|0)?(a=4,a|0):(u[848+(A*28|0)+20>>2]|0)==(a|0)?(a=5,a|0):((u[848+(A*28|0)+24>>2]|0)==(a|0)?6:7)|0}function Vi(){return 122}function T0(A){A=A|0;var a=0,c=0,h=0;a=0;do Oe(a|0,0,45)|0,h=V()|0|134225919,c=A+(a<<3)|0,u[c>>2]=-1,u[c+4>>2]=h,a=a+1|0;while((a|0)!=122);return 0}function ul(A){return A=A|0,+N[A+16>>3]<+N[A+24>>3]|0}function Ys(A,a){A=A|0,a=a|0;var c=0,h=0,g=0;return c=+N[a>>3],!(c>=+N[A+8>>3])||!(c<=+N[A>>3])?(a=0,a|0):(h=+N[A+16>>3],c=+N[A+24>>3],g=+N[a+8>>3],a=g>=c,A=g<=h&1,h<c?a&&(A=1):a||(A=0),a=(A|0)!=0,a|0)}function $u(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0,y=0,b=0,S=0,L=0,k=0,z=0,Y=0,Z=0,H=0,re=0,de=0;H=F,F=F+288|0,k=H+264|0,z=H+96|0,L=H,b=L,S=b+96|0;do u[b>>2]=0,b=b+4|0;while((b|0)<(S|0));return a=eo(a,L)|0,a|0?(Z=a,F=H,Z|0):(S=L,L=u[S>>2]|0,S=u[S+4>>2]|0,qs(L,S,k)|0,Ks(L,S,z)|0,y=+$o(k,z+8|0),N[k>>3]=+N[A>>3],S=k+8|0,N[S>>3]=+N[A+16>>3],N[z>>3]=+N[A+8>>3],L=z+8|0,N[L>>3]=+N[A+24>>3],g=+$o(k,z),de=+N[S>>3]-+N[L>>3],v=+Et(+de),re=+N[k>>3]-+N[z>>3],h=+Et(+re),!(de==0|re==0)&&(de=+ws(+v,+h),de=+Bi(+(g*g/+oi(+(de/+oi(+v,+h)),3)/(y*(y*2.59807621135)*.8))),N[Lt>>3]=de,Y=~~de>>>0,Z=+Et(de)>=1?de>0?~~+Nn(+fn(de/4294967296),4294967295)>>>0:~~+Bi((de-+(~~de>>>0))/4294967296)>>>0:0,(u[Lt+4>>2]&2146435072|0)!=2146435072)?(z=(Y|0)==0&(Z|0)==0,a=c,u[a>>2]=z?1:Y,u[a+4>>2]=z?0:Z,a=0):a=1,Z=a,F=H,Z|0)}function Xu(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var g=0,v=0,y=0,b=0,S=0,L=0,k=0;L=F,F=F+288|0,y=L+264|0,b=L+96|0,S=L,g=S,v=g+96|0;do u[g>>2]=0,g=g+4|0;while((g|0)<(v|0));return c=eo(c,S)|0,c|0?(h=c,F=L,h|0):(c=S,g=u[c>>2]|0,c=u[c+4>>2]|0,qs(g,c,y)|0,Ks(g,c,b)|0,k=+$o(y,b+8|0),k=+Bi(+(+$o(A,a)/(k*2))),N[Lt>>3]=k,c=~~k>>>0,g=+Et(k)>=1?k>0?~~+Nn(+fn(k/4294967296),4294967295)>>>0:~~+Bi((k-+(~~k>>>0))/4294967296)>>>0:0,(u[Lt+4>>2]&2146435072|0)==2146435072?(h=1,F=L,h|0):(S=(c|0)==0&(g|0)==0,u[h>>2]=S?1:c,u[h+4>>2]=S?0:g,h=0,F=L,h|0))}function Ba(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0,u[A>>2]=a,u[A+4>>2]=c,u[A+8>>2]=h}function Zu(A,a){A=A|0,a=a|0;var c=0,h=0,g=0,v=0,y=0,b=0,S=0,L=0,k=0,z=0,Y=0;z=a+8|0,u[z>>2]=0,S=+N[A>>3],y=+Et(+S),L=+N[A+8>>3],b=+Et(+L)/.8660254037844386,y=y+b*.5,c=~~y,A=~~b,y=y-+(c|0),b=b-+(A|0);do if(y<.5)if(y<.3333333333333333)if(u[a>>2]=c,b<(y+1)*.5){u[a+4>>2]=A;break}else{A=A+1|0,u[a+4>>2]=A;break}else if(Y=1-y,A=(!(b<Y)&1)+A|0,u[a+4>>2]=A,Y<=b&b<y*2){c=c+1|0,u[a>>2]=c;break}else{u[a>>2]=c;break}else{if(!(y<.6666666666666666))if(c=c+1|0,u[a>>2]=c,b<y*.5){u[a+4>>2]=A;break}else{A=A+1|0,u[a+4>>2]=A;break}if(b<1-y){if(u[a+4>>2]=A,y*2+-1<b){u[a>>2]=c;break}}else A=A+1|0,u[a+4>>2]=A;c=c+1|0,u[a>>2]=c}while(!1);do if(S<0)if(A&1){k=(A+1|0)/2|0,k=tn(c|0,((c|0)<0)<<31>>31|0,k|0,((k|0)<0)<<31>>31|0)|0,c=~~(+(c|0)-((+(k>>>0)+4294967296*+(V()|0))*2+1)),u[a>>2]=c;break}else{k=(A|0)/2|0,k=tn(c|0,((c|0)<0)<<31>>31|0,k|0,((k|0)<0)<<31>>31|0)|0,c=~~(+(c|0)-(+(k>>>0)+4294967296*+(V()|0))*2),u[a>>2]=c;break}while(!1);k=a+4|0,L<0&&(c=c-((A<<1|1|0)/2|0)|0,u[a>>2]=c,A=0-A|0,u[k>>2]=A),h=A-c|0,(c|0)<0?(g=0-c|0,u[k>>2]=h,u[z>>2]=g,u[a>>2]=0,A=h,c=0):g=0,(A|0)<0&&(c=c-A|0,u[a>>2]=c,g=g-A|0,u[z>>2]=g,u[k>>2]=0,A=0),v=c-g|0,h=A-g|0,(g|0)<0&&(u[a>>2]=v,u[k>>2]=h,u[z>>2]=0,A=h,c=v,g=0),h=(A|0)<(c|0)?A:c,h=(g|0)<(h|0)?g:h,!((h|0)<=0)&&(u[a>>2]=c-h,u[k>>2]=A-h,u[z>>2]=g-h)}function zn(A){A=A|0;var a=0,c=0,h=0,g=0,v=0,y=0;a=u[A>>2]|0,y=A+4|0,c=u[y>>2]|0,(a|0)<0&&(c=c-a|0,u[y>>2]=c,v=A+8|0,u[v>>2]=(u[v>>2]|0)-a,u[A>>2]=0,a=0),(c|0)<0?(a=a-c|0,u[A>>2]=a,v=A+8|0,g=(u[v>>2]|0)-c|0,u[v>>2]=g,u[y>>2]=0,c=0):(g=A+8|0,v=g,g=u[g>>2]|0),(g|0)<0&&(a=a-g|0,u[A>>2]=a,c=c-g|0,u[y>>2]=c,u[v>>2]=0,g=0),h=(c|0)<(a|0)?c:a,h=(g|0)<(h|0)?g:h,!((h|0)<=0)&&(u[A>>2]=a-h,u[y>>2]=c-h,u[v>>2]=g-h)}function Dr(A,a){A=A|0,a=a|0;var c=0,h=0;h=u[A+8>>2]|0,c=+((u[A+4>>2]|0)-h|0),N[a>>3]=+((u[A>>2]|0)-h|0)-c*.5,N[a+8>>3]=c*.8660254037844386}function Tn(A,a,c){A=A|0,a=a|0,c=c|0,u[c>>2]=(u[a>>2]|0)+(u[A>>2]|0),u[c+4>>2]=(u[a+4>>2]|0)+(u[A+4>>2]|0),u[c+8>>2]=(u[a+8>>2]|0)+(u[A+8>>2]|0)}function ji(A,a,c){A=A|0,a=a|0,c=c|0,u[c>>2]=(u[A>>2]|0)-(u[a>>2]|0),u[c+4>>2]=(u[A+4>>2]|0)-(u[a+4>>2]|0),u[c+8>>2]=(u[A+8>>2]|0)-(u[a+8>>2]|0)}function Uo(A,a){A=A|0,a=a|0;var c=0,h=0;c=Ot(u[A>>2]|0,a)|0,u[A>>2]=c,c=A+4|0,h=Ot(u[c>>2]|0,a)|0,u[c>>2]=h,A=A+8|0,a=Ot(u[A>>2]|0,a)|0,u[A>>2]=a}function Na(A){A=A|0;var a=0,c=0,h=0,g=0,v=0,y=0,b=0;y=u[A>>2]|0,b=(y|0)<0,h=(u[A+4>>2]|0)-(b?y:0)|0,v=(h|0)<0,g=(v?0-h|0:0)+((u[A+8>>2]|0)-(b?y:0))|0,c=(g|0)<0,A=c?0:g,a=(v?0:h)-(c?g:0)|0,g=(b?0:y)-(v?h:0)-(c?g:0)|0,c=(a|0)<(g|0)?a:g,c=(A|0)<(c|0)?A:c,h=(c|0)>0,A=A-(h?c:0)|0,a=a-(h?c:0)|0;e:do switch(g-(h?c:0)|0){case 0:switch(a|0){case 0:return b=(A|0)==0?0:(A|0)==1?1:7,b|0;case 1:return b=(A|0)==0?2:(A|0)==1?3:7,b|0;default:break e}case 1:switch(a|0){case 0:return b=(A|0)==0?4:(A|0)==1?5:7,b|0;case 1:{if(!A)A=6;else break e;return A|0}default:break e}}while(!1);return b=7,b|0}function x0(A){A=A|0;var a=0,c=0,h=0,g=0,v=0,y=0,b=0;y=A+8|0,g=u[y>>2]|0,v=(u[A>>2]|0)-g|0,b=A+4|0,g=(u[b>>2]|0)-g|0;do if(v>>>0>715827881|g>>>0>715827881){if(c=(v|0)>0,c){if((2147483647-v|0)<(v|0)||(2147483647-(v<<1)|0)<(v|0))return b=1,b|0}else if((-2147483648-v|0)>(v|0)||(-2147483648-(v<<1)|0)>(v|0))return b=1,b|0;if(a=v*3|0,(g|0)>0){if((2147483647-g|0)<(g|0))return b=1,b|0}else if((-2147483648-g|0)>(g|0))return b=1,b|0;if(h=g<<1,(v|0)>-1){if((a|-2147483648|0)>=(g|0))return b=1,b|0}else if((a^-2147483648|0)<(g|0))return b=1,b|0;if(c){if((2147483647-v|0)<(h|0))a=1;else{c=h;break}return a|0}else{if((-2147483648-v|0)>(h|0))a=1;else{c=h;break}return a|0}}else c=g<<1,a=v*3|0;while(!1);h=Wi(+(a-g|0)/7)|0,u[A>>2]=h,g=Wi(+(c+v|0)/7)|0,u[b>>2]=g,u[y>>2]=0,c=(g|0)<(h|0),a=c?h:g,c=c?g:h;do if((c|0)<0){if((a|0)>0){if((a|-2147483648|0)<(c|0)&((c|0)!=-2147483648&(2147483647-a|0)>=(c|0)))break;Ze(23313,22444,355,22455)}if((c|0)==-2147483648|(-2147483648-a|0)>(c|0)&&Ze(23313,22444,355,22455),(a|0)>-1){if((a|-2147483648|0)<(c|0))break;Ze(23313,22444,355,22455)}else{if((a^-2147483648|0)>=(c|0))break;Ze(23313,22444,355,22455)}}while(!1);return a=g-h|0,(h|0)<0?(c=0-h|0,u[b>>2]=a,u[y>>2]=c,u[A>>2]=0,h=0):(a=g,c=0),(a|0)<0&&(h=h-a|0,u[A>>2]=h,c=c-a|0,u[y>>2]=c,u[b>>2]=0,a=0),v=h-c|0,g=a-c|0,(c|0)<0?(u[A>>2]=v,u[b>>2]=g,u[y>>2]=0,a=g,g=v,c=0):g=h,h=(a|0)<(g|0)?a:g,h=(c|0)<(h|0)?c:h,(h|0)<=0?(b=0,b|0):(u[A>>2]=g-h,u[b>>2]=a-h,u[y>>2]=c-h,b=0,b|0)}function cl(A){A=A|0;var a=0,c=0,h=0,g=0,v=0,y=0,b=0;y=A+8|0,g=u[y>>2]|0,v=(u[A>>2]|0)-g|0,b=A+4|0,g=(u[b>>2]|0)-g|0;do if(v>>>0>715827881|g>>>0>715827881){if(c=(v|0)>0,c){if((2147483647-v|0)<(v|0))return b=1,b|0}else if((-2147483648-v|0)>(v|0))return b=1,b|0;if(a=v<<1,(g|0)>0){if((2147483647-g|0)<(g|0)||(2147483647-(g<<1)|0)<(g|0))return b=1,b|0}else if((-2147483648-g|0)>(g|0)||(-2147483648-(g<<1)|0)>(g|0))return b=1,b|0;if(h=g*3|0,c){if((2147483647-a|0)<(g|0))return b=1,b|0}else if((-2147483648-a|0)>(g|0))return b=1,b|0;if((g|0)>-1){if((h|-2147483648|0)<(v|0)){c=h;break}else a=1;return a|0}else{if((h^-2147483648|0)<(v|0))a=1;else{c=h;break}return a|0}}else c=g*3|0,a=v<<1;while(!1);h=Wi(+(a+g|0)/7)|0,u[A>>2]=h,g=Wi(+(c-v|0)/7)|0,u[b>>2]=g,u[y>>2]=0,c=(g|0)<(h|0),a=c?h:g,c=c?g:h;do if((c|0)<0){if((a|0)>0){if((a|-2147483648|0)<(c|0)&((c|0)!=-2147483648&(2147483647-a|0)>=(c|0)))break;Ze(23313,22444,404,22469)}if((c|0)==-2147483648|(-2147483648-a|0)>(c|0)&&Ze(23313,22444,404,22469),(a|0)>-1){if((a|-2147483648|0)<(c|0))break;Ze(23313,22444,404,22469)}else{if((a^-2147483648|0)>=(c|0))break;Ze(23313,22444,404,22469)}}while(!1);return a=g-h|0,(h|0)<0?(c=0-h|0,u[b>>2]=a,u[y>>2]=c,u[A>>2]=0,h=0):(a=g,c=0),(a|0)<0&&(h=h-a|0,u[A>>2]=h,c=c-a|0,u[y>>2]=c,u[b>>2]=0,a=0),v=h-c|0,g=a-c|0,(c|0)<0?(u[A>>2]=v,u[b>>2]=g,u[y>>2]=0,a=g,g=v,c=0):g=h,h=(a|0)<(g|0)?a:g,h=(c|0)<(h|0)?c:h,(h|0)<=0?(b=0,b|0):(u[A>>2]=g-h,u[b>>2]=a-h,u[y>>2]=c-h,b=0,b|0)}function Ua(A){A=A|0;var a=0,c=0,h=0,g=0,v=0,y=0,b=0;y=A+8|0,c=u[y>>2]|0,a=(u[A>>2]|0)-c|0,b=A+4|0,c=(u[b>>2]|0)-c|0,h=Wi(+((a*3|0)-c|0)/7)|0,u[A>>2]=h,a=Wi(+((c<<1)+a|0)/7)|0,u[b>>2]=a,u[y>>2]=0,c=a-h|0,(h|0)<0?(v=0-h|0,u[b>>2]=c,u[y>>2]=v,u[A>>2]=0,a=c,h=0,c=v):c=0,(a|0)<0&&(h=h-a|0,u[A>>2]=h,c=c-a|0,u[y>>2]=c,u[b>>2]=0,a=0),v=h-c|0,g=a-c|0,(c|0)<0?(u[A>>2]=v,u[b>>2]=g,u[y>>2]=0,a=g,g=v,c=0):g=h,h=(a|0)<(g|0)?a:g,h=(c|0)<(h|0)?c:h,!((h|0)<=0)&&(u[A>>2]=g-h,u[b>>2]=a-h,u[y>>2]=c-h)}function za(A){A=A|0;var a=0,c=0,h=0,g=0,v=0,y=0,b=0;y=A+8|0,c=u[y>>2]|0,a=(u[A>>2]|0)-c|0,b=A+4|0,c=(u[b>>2]|0)-c|0,h=Wi(+((a<<1)+c|0)/7)|0,u[A>>2]=h,a=Wi(+((c*3|0)-a|0)/7)|0,u[b>>2]=a,u[y>>2]=0,c=a-h|0,(h|0)<0?(v=0-h|0,u[b>>2]=c,u[y>>2]=v,u[A>>2]=0,a=c,h=0,c=v):c=0,(a|0)<0&&(h=h-a|0,u[A>>2]=h,c=c-a|0,u[y>>2]=c,u[b>>2]=0,a=0),v=h-c|0,g=a-c|0,(c|0)<0?(u[A>>2]=v,u[b>>2]=g,u[y>>2]=0,a=g,g=v,c=0):g=h,h=(a|0)<(g|0)?a:g,h=(c|0)<(h|0)?c:h,!((h|0)<=0)&&(u[A>>2]=g-h,u[b>>2]=a-h,u[y>>2]=c-h)}function zo(A){A=A|0;var a=0,c=0,h=0,g=0,v=0,y=0,b=0;a=u[A>>2]|0,y=A+4|0,c=u[y>>2]|0,b=A+8|0,h=u[b>>2]|0,g=c+(a*3|0)|0,u[A>>2]=g,c=h+(c*3|0)|0,u[y>>2]=c,a=(h*3|0)+a|0,u[b>>2]=a,h=c-g|0,(g|0)<0?(a=a-g|0,u[y>>2]=h,u[b>>2]=a,u[A>>2]=0,c=h,h=0):h=g,(c|0)<0&&(h=h-c|0,u[A>>2]=h,a=a-c|0,u[b>>2]=a,u[y>>2]=0,c=0),v=h-a|0,g=c-a|0,(a|0)<0?(u[A>>2]=v,u[y>>2]=g,u[b>>2]=0,h=v,a=0):g=c,c=(g|0)<(h|0)?g:h,c=(a|0)<(c|0)?a:c,!((c|0)<=0)&&(u[A>>2]=h-c,u[y>>2]=g-c,u[b>>2]=a-c)}function rr(A){A=A|0;var a=0,c=0,h=0,g=0,v=0,y=0,b=0;g=u[A>>2]|0,y=A+4|0,a=u[y>>2]|0,b=A+8|0,c=u[b>>2]|0,h=(a*3|0)+g|0,g=c+(g*3|0)|0,u[A>>2]=g,u[y>>2]=h,a=(c*3|0)+a|0,u[b>>2]=a,c=h-g|0,(g|0)<0?(a=a-g|0,u[y>>2]=c,u[b>>2]=a,u[A>>2]=0,g=0):c=h,(c|0)<0&&(g=g-c|0,u[A>>2]=g,a=a-c|0,u[b>>2]=a,u[y>>2]=0,c=0),v=g-a|0,h=c-a|0,(a|0)<0?(u[A>>2]=v,u[y>>2]=h,u[b>>2]=0,g=v,a=0):h=c,c=(h|0)<(g|0)?h:g,c=(a|0)<(c|0)?a:c,!((c|0)<=0)&&(u[A>>2]=g-c,u[y>>2]=h-c,u[b>>2]=a-c)}function Va(A,a){A=A|0,a=a|0;var c=0,h=0,g=0,v=0,y=0,b=0;(a+-1|0)>>>0>=6||(g=(u[15440+(a*12|0)>>2]|0)+(u[A>>2]|0)|0,u[A>>2]=g,b=A+4|0,h=(u[15440+(a*12|0)+4>>2]|0)+(u[b>>2]|0)|0,u[b>>2]=h,y=A+8|0,a=(u[15440+(a*12|0)+8>>2]|0)+(u[y>>2]|0)|0,u[y>>2]=a,c=h-g|0,(g|0)<0?(a=a-g|0,u[b>>2]=c,u[y>>2]=a,u[A>>2]=0,h=0):(c=h,h=g),(c|0)<0&&(h=h-c|0,u[A>>2]=h,a=a-c|0,u[y>>2]=a,u[b>>2]=0,c=0),v=h-a|0,g=c-a|0,(a|0)<0?(u[A>>2]=v,u[b>>2]=g,u[y>>2]=0,h=v,a=0):g=c,c=(g|0)<(h|0)?g:h,c=(a|0)<(c|0)?a:c,!((c|0)<=0)&&(u[A>>2]=h-c,u[b>>2]=g-c,u[y>>2]=a-c))}function Vo(A){A=A|0;var a=0,c=0,h=0,g=0,v=0,y=0,b=0;g=u[A>>2]|0,y=A+4|0,a=u[y>>2]|0,b=A+8|0,c=u[b>>2]|0,h=a+g|0,g=c+g|0,u[A>>2]=g,u[y>>2]=h,a=c+a|0,u[b>>2]=a,c=h-g|0,(g|0)<0?(a=a-g|0,u[y>>2]=c,u[b>>2]=a,u[A>>2]=0,h=0):(c=h,h=g),(c|0)<0&&(h=h-c|0,u[A>>2]=h,a=a-c|0,u[b>>2]=a,u[y>>2]=0,c=0),v=h-a|0,g=c-a|0,(a|0)<0?(u[A>>2]=v,u[y>>2]=g,u[b>>2]=0,h=v,a=0):g=c,c=(g|0)<(h|0)?g:h,c=(a|0)<(c|0)?a:c,!((c|0)<=0)&&(u[A>>2]=h-c,u[y>>2]=g-c,u[b>>2]=a-c)}function jo(A){A=A|0;var a=0,c=0,h=0,g=0,v=0,y=0,b=0;a=u[A>>2]|0,y=A+4|0,h=u[y>>2]|0,b=A+8|0,c=u[b>>2]|0,g=h+a|0,u[A>>2]=g,h=c+h|0,u[y>>2]=h,a=c+a|0,u[b>>2]=a,c=h-g|0,(g|0)<0?(a=a-g|0,u[y>>2]=c,u[b>>2]=a,u[A>>2]=0,h=0):(c=h,h=g),(c|0)<0&&(h=h-c|0,u[A>>2]=h,a=a-c|0,u[b>>2]=a,u[y>>2]=0,c=0),v=h-a|0,g=c-a|0,(a|0)<0?(u[A>>2]=v,u[y>>2]=g,u[b>>2]=0,h=v,a=0):g=c,c=(g|0)<(h|0)?g:h,c=(a|0)<(c|0)?a:c,!((c|0)<=0)&&(u[A>>2]=h-c,u[y>>2]=g-c,u[b>>2]=a-c)}function ni(A){switch(A=A|0,A|0){case 1:{A=5;break}case 5:{A=4;break}case 4:{A=6;break}case 6:{A=2;break}case 2:{A=3;break}case 3:{A=1;break}}return A|0}function Fr(A){switch(A=A|0,A|0){case 1:{A=3;break}case 3:{A=2;break}case 2:{A=6;break}case 6:{A=4;break}case 4:{A=5;break}case 5:{A=1;break}}return A|0}function fl(A){A=A|0;var a=0,c=0,h=0,g=0,v=0,y=0,b=0;a=u[A>>2]|0,y=A+4|0,c=u[y>>2]|0,b=A+8|0,h=u[b>>2]|0,g=c+(a<<1)|0,u[A>>2]=g,c=h+(c<<1)|0,u[y>>2]=c,a=(h<<1)+a|0,u[b>>2]=a,h=c-g|0,(g|0)<0?(a=a-g|0,u[y>>2]=h,u[b>>2]=a,u[A>>2]=0,c=h,h=0):h=g,(c|0)<0&&(h=h-c|0,u[A>>2]=h,a=a-c|0,u[b>>2]=a,u[y>>2]=0,c=0),v=h-a|0,g=c-a|0,(a|0)<0?(u[A>>2]=v,u[y>>2]=g,u[b>>2]=0,h=v,a=0):g=c,c=(g|0)<(h|0)?g:h,c=(a|0)<(c|0)?a:c,!((c|0)<=0)&&(u[A>>2]=h-c,u[y>>2]=g-c,u[b>>2]=a-c)}function ir(A){A=A|0;var a=0,c=0,h=0,g=0,v=0,y=0,b=0;g=u[A>>2]|0,y=A+4|0,a=u[y>>2]|0,b=A+8|0,c=u[b>>2]|0,h=(a<<1)+g|0,g=c+(g<<1)|0,u[A>>2]=g,u[y>>2]=h,a=(c<<1)+a|0,u[b>>2]=a,c=h-g|0,(g|0)<0?(a=a-g|0,u[y>>2]=c,u[b>>2]=a,u[A>>2]=0,g=0):c=h,(c|0)<0&&(g=g-c|0,u[A>>2]=g,a=a-c|0,u[b>>2]=a,u[y>>2]=0,c=0),v=g-a|0,h=c-a|0,(a|0)<0?(u[A>>2]=v,u[y>>2]=h,u[b>>2]=0,g=v,a=0):h=c,c=(h|0)<(g|0)?h:g,c=(a|0)<(c|0)?a:c,!((c|0)<=0)&&(u[A>>2]=g-c,u[y>>2]=h-c,u[b>>2]=a-c)}function Gi(A,a){A=A|0,a=a|0;var c=0,h=0,g=0,v=0,y=0,b=0;return y=(u[A>>2]|0)-(u[a>>2]|0)|0,b=(y|0)<0,h=(u[A+4>>2]|0)-(u[a+4>>2]|0)-(b?y:0)|0,v=(h|0)<0,g=(b?0-y|0:0)+(u[A+8>>2]|0)-(u[a+8>>2]|0)+(v?0-h|0:0)|0,A=(g|0)<0,a=A?0:g,c=(v?0:h)-(A?g:0)|0,g=(b?0:y)-(v?h:0)-(A?g:0)|0,A=(c|0)<(g|0)?c:g,A=(a|0)<(A|0)?a:A,h=(A|0)>0,a=a-(h?A:0)|0,c=c-(h?A:0)|0,A=g-(h?A:0)|0,A=(A|0)>-1?A:0-A|0,c=(c|0)>-1?c:0-c|0,a=(a|0)>-1?a:0-a|0,a=(c|0)>(a|0)?c:a,((A|0)>(a|0)?A:a)|0}function hl(A,a){A=A|0,a=a|0;var c=0;c=u[A+8>>2]|0,u[a>>2]=(u[A>>2]|0)-c,u[a+4>>2]=(u[A+4>>2]|0)-c}function Go(A,a){A=A|0,a=a|0;var c=0,h=0,g=0,v=0,y=0,b=0;h=u[A>>2]|0,u[a>>2]=h,g=u[A+4>>2]|0,y=a+4|0,u[y>>2]=g,b=a+8|0,u[b>>2]=0,c=(g|0)<(h|0),A=c?h:g,c=c?g:h;do if((c|0)<0){if((A|0)>0){if((A|-2147483648|0)<(c|0)&((c|0)!=-2147483648&(2147483647-A|0)>=(c|0)))break;return A=1,A|0}if((c|0)==-2147483648|(-2147483648-A|0)>(c|0))return a=1,a|0;if((A|0)>-1){if((A|-2147483648|0)<(c|0))break;return A=1,A|0}else{if((A^-2147483648|0)<(c|0))A=1;else break;return A|0}}while(!1);return A=g-h|0,(h|0)<0?(c=0-h|0,u[y>>2]=A,u[b>>2]=c,u[a>>2]=0,h=0):(A=g,c=0),(A|0)<0&&(h=h-A|0,u[a>>2]=h,c=c-A|0,u[b>>2]=c,u[y>>2]=0,A=0),v=h-c|0,g=A-c|0,(c|0)<0?(u[a>>2]=v,u[y>>2]=g,u[b>>2]=0,A=g,g=v,c=0):g=h,h=(A|0)<(g|0)?A:g,h=(c|0)<(h|0)?c:h,(h|0)<=0?(a=0,a|0):(u[a>>2]=g-h,u[y>>2]=A-h,u[b>>2]=c-h,a=0,a|0)}function qu(A){A=A|0;var a=0,c=0,h=0,g=0;a=A+8|0,g=u[a>>2]|0,c=g-(u[A>>2]|0)|0,u[A>>2]=c,h=A+4|0,A=(u[h>>2]|0)-g|0,u[h>>2]=A,u[a>>2]=0-(A+c)}function dl(A){A=A|0;var a=0,c=0,h=0,g=0,v=0,y=0,b=0;c=u[A>>2]|0,a=0-c|0,u[A>>2]=a,y=A+8|0,u[y>>2]=0,b=A+4|0,h=u[b>>2]|0,g=h+c|0,(c|0)>0?(u[b>>2]=g,u[y>>2]=c,u[A>>2]=0,a=0,h=g):c=0,(h|0)<0?(v=a-h|0,u[A>>2]=v,c=c-h|0,u[y>>2]=c,u[b>>2]=0,g=v-c|0,a=0-c|0,(c|0)<0?(u[A>>2]=g,u[b>>2]=a,u[y>>2]=0,h=a,c=0):(h=0,g=v)):g=a,a=(h|0)<(g|0)?h:g,a=(c|0)<(a|0)?c:a,!((a|0)<=0)&&(u[A>>2]=g-a,u[b>>2]=h-a,u[y>>2]=c-a)}function gl(A,a,c,h,g){A=A|0,a=a|0,c=c|0,h=h|0,g=g|0;var v=0,y=0,b=0,S=0,L=0,k=0,z=0;if(z=F,F=F+64|0,k=z,b=z+56|0,!(!0&(a&2013265920|0)==134217728&(!0&(h&2013265920|0)==134217728)))return g=5,F=z,g|0;if((A|0)==(c|0)&(a|0)==(h|0))return u[g>>2]=0,g=0,F=z,g|0;if(y=_e(A|0,a|0,52)|0,V()|0,y=y&15,L=_e(c|0,h|0,52)|0,V()|0,(y|0)!=(L&15|0))return g=12,F=z,g|0;if(v=y+-1|0,y>>>0>1){Wa(A,a,v,k)|0,Wa(c,h,v,b)|0,L=k,S=u[L>>2]|0,L=u[L+4>>2]|0;e:do if((S|0)==(u[b>>2]|0)&&(L|0)==(u[b+4>>2]|0)){y=(y^15)*3|0,v=_e(A|0,a|0,y|0)|0,V()|0,v=v&7,y=_e(c|0,h|0,y|0)|0,V()|0,y=y&7;do if((v|0)==0|(y|0)==0)u[g>>2]=1,v=0;else if((v|0)==7)v=5;else{if((v|0)==1|(y|0)==1&&qt(S,L)|0){v=5;break}if((u[15536+(v<<2)>>2]|0)!=(y|0)&&(u[15568+(v<<2)>>2]|0)!=(y|0))break e;u[g>>2]=1,v=0}while(!1);return g=v,F=z,g|0}while(!1)}v=k,y=v+56|0;do u[v>>2]=0,v=v+4|0;while((v|0)<(y|0));return Fa(A,a,1,k)|0,a=k,!((u[a>>2]|0)==(c|0)&&(u[a+4>>2]|0)==(h|0))&&(a=k+8|0,!((u[a>>2]|0)==(c|0)&&(u[a+4>>2]|0)==(h|0)))&&(a=k+16|0,!((u[a>>2]|0)==(c|0)&&(u[a+4>>2]|0)==(h|0)))&&(a=k+24|0,!((u[a>>2]|0)==(c|0)&&(u[a+4>>2]|0)==(h|0)))&&(a=k+32|0,!((u[a>>2]|0)==(c|0)&&(u[a+4>>2]|0)==(h|0)))&&(a=k+40|0,!((u[a>>2]|0)==(c|0)&&(u[a+4>>2]|0)==(h|0)))?(v=k+48|0,v=((u[v>>2]|0)==(c|0)?(u[v+4>>2]|0)==(h|0):0)&1):v=1,u[g>>2]=v,g=0,F=z,g|0}function Ho(A,a,c,h,g){return A=A|0,a=a|0,c=c|0,h=h|0,g=g|0,c=No(A,a,c,h)|0,(c|0)==7?(g=11,g|0):(h=Oe(c|0,0,56)|0,a=a&-2130706433|(V()|0)|268435456,u[g>>2]=A|h,u[g+4>>2]=a,g=0,g|0)}function ja(A,a,c){return A=A|0,a=a|0,c=c|0,!0&(a&2013265920|0)==268435456?(u[c>>2]=A,u[c+4>>2]=a&-2130706433|134217728,c=0,c|0):(c=6,c|0)}function Ku(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0;return g=F,F=F+16|0,h=g,u[h>>2]=0,!0&(a&2013265920|0)==268435456?(v=_e(A|0,a|0,56)|0,V()|0,h=rn(A,a&-2130706433|134217728,v&7,h,c)|0,F=g,h|0):(h=6,F=g,h|0)}function S0(A,a){A=A|0,a=a|0;var c=0;switch(c=_e(A|0,a|0,56)|0,V()|0,c&7){case 0:case 7:return c=0,c|0}return c=a&-2130706433|134217728,!(!0&(a&2013265920|0)==268435456)||!0&(a&117440512|0)==16777216&(qt(A,c)|0)!=0?(c=0,c|0):(c=ml(A,c)|0,c|0)}function C0(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0,y=0;return g=F,F=F+16|0,h=g,!0&(a&2013265920|0)==268435456?(v=a&-2130706433|134217728,y=c,u[y>>2]=A,u[y+4>>2]=v,u[h>>2]=0,a=_e(A|0,a|0,56)|0,V()|0,h=rn(A,v,a&7,h,c+8|0)|0,F=g,h|0):(h=6,F=g,h|0)}function M0(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0;return g=(qt(A,a)|0)==0,a=a&-2130706433,h=c,u[h>>2]=g?A:0,u[h+4>>2]=g?a|285212672:0,h=c+8|0,u[h>>2]=A,u[h+4>>2]=a|301989888,h=c+16|0,u[h>>2]=A,u[h+4>>2]=a|318767104,h=c+24|0,u[h>>2]=A,u[h+4>>2]=a|335544320,h=c+32|0,u[h>>2]=A,u[h+4>>2]=a|352321536,c=c+40|0,u[c>>2]=A,u[c+4>>2]=a|369098752,0}function $s(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0,y=0;return y=F,F=F+16|0,g=y,v=a&-2130706433|134217728,!0&(a&2013265920|0)==268435456?(h=_e(A|0,a|0,56)|0,V()|0,h=nA(A,v,h&7)|0,(h|0)==-1?(u[c>>2]=0,v=6,F=y,v|0):(Zs(A,v,g)|0&&Ze(23313,22484,282,22499),a=_e(A|0,a|0,52)|0,V()|0,a=a&15,qt(A,v)|0?Ga(g,a,h,2,c):pl(g,a,h,2,c),v=0,F=y,v|0)):(v=6,F=y,v|0)}function L0(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0;h=F,F=F+16|0,g=h,P0(A,a,c,g),Zu(g,c+4|0),F=h}function P0(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var g=0,v=0,y=0,b=0,S=0;if(b=F,F=F+16|0,S=b,k0(A,c,S),v=+Or(+(1-+N[S>>3]*.5)),v<1e-16){u[h>>2]=0,u[h+4>>2]=0,u[h+8>>2]=0,u[h+12>>2]=0,F=b;return}if(S=u[c>>2]|0,g=+N[15920+(S*24|0)>>3],g=+to(g-+to(+G0(15600+(S<<4)|0,A))),Ln(a)|0?y=+to(g+-.3334731722518321):y=g,g=+bn(+v)/.381966011250105,(a|0)>0){A=0;do g=g*2.6457513110645907,A=A+1|0;while((A|0)!=(a|0))}v=+Rt(+y)*g,N[h>>3]=v,y=+lt(+y)*g,N[h+8>>3]=y,F=b}function k0(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0;if(v=F,F=F+32|0,g=v,Ko(A,g),u[a>>2]=0,N[c>>3]=5,h=+un(16400,g),h<+N[c>>3]&&(u[a>>2]=0,N[c>>3]=h),h=+un(16424,g),h<+N[c>>3]&&(u[a>>2]=1,N[c>>3]=h),h=+un(16448,g),h<+N[c>>3]&&(u[a>>2]=2,N[c>>3]=h),h=+un(16472,g),h<+N[c>>3]&&(u[a>>2]=3,N[c>>3]=h),h=+un(16496,g),h<+N[c>>3]&&(u[a>>2]=4,N[c>>3]=h),h=+un(16520,g),h<+N[c>>3]&&(u[a>>2]=5,N[c>>3]=h),h=+un(16544,g),h<+N[c>>3]&&(u[a>>2]=6,N[c>>3]=h),h=+un(16568,g),h<+N[c>>3]&&(u[a>>2]=7,N[c>>3]=h),h=+un(16592,g),h<+N[c>>3]&&(u[a>>2]=8,N[c>>3]=h),h=+un(16616,g),h<+N[c>>3]&&(u[a>>2]=9,N[c>>3]=h),h=+un(16640,g),h<+N[c>>3]&&(u[a>>2]=10,N[c>>3]=h),h=+un(16664,g),h<+N[c>>3]&&(u[a>>2]=11,N[c>>3]=h),h=+un(16688,g),h<+N[c>>3]&&(u[a>>2]=12,N[c>>3]=h),h=+un(16712,g),h<+N[c>>3]&&(u[a>>2]=13,N[c>>3]=h),h=+un(16736,g),h<+N[c>>3]&&(u[a>>2]=14,N[c>>3]=h),h=+un(16760,g),h<+N[c>>3]&&(u[a>>2]=15,N[c>>3]=h),h=+un(16784,g),h<+N[c>>3]&&(u[a>>2]=16,N[c>>3]=h),h=+un(16808,g),h<+N[c>>3]&&(u[a>>2]=17,N[c>>3]=h),h=+un(16832,g),h<+N[c>>3]&&(u[a>>2]=18,N[c>>3]=h),h=+un(16856,g),!(h<+N[c>>3])){F=v;return}u[a>>2]=19,N[c>>3]=h,F=v}function Wo(A,a,c,h,g){A=A|0,a=a|0,c=c|0,h=h|0,g=g|0;var v=0,y=0;if(v=+tA(A),v<1e-16){a=15600+(a<<4)|0,u[g>>2]=u[a>>2],u[g+4>>2]=u[a+4>>2],u[g+8>>2]=u[a+8>>2],u[g+12>>2]=u[a+12>>2];return}if(y=+tr(+ +N[A+8>>3],+ +N[A>>3]),(c|0)>0){A=0;do v=v/2.6457513110645907,A=A+1|0;while((A|0)!=(c|0))}h?(v=v/3,c=(Ln(c)|0)==0,v=+Fi(+((c?v:v/2.6457513110645907)*.381966011250105))):(v=+Fi(+(v*.381966011250105)),Ln(c)|0&&(y=+to(y+.3334731722518321))),H0(15600+(a<<4)|0,+to(+N[15920+(a*24|0)>>3]-y),v,g)}function I0(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0;h=F,F=F+16|0,g=h,Dr(A+4|0,g),Wo(g,u[A>>2]|0,a,0,c),F=h}function Ga(A,a,c,h,g){A=A|0,a=a|0,c=c|0,h=h|0,g=g|0;var v=0,y=0,b=0,S=0,L=0,k=0,z=0,Y=0,Z=0,H=0,re=0,de=0,he=0,se=0,oe=0,ne=0,Ie=0,Ne=0,Pe=0,Fe=0,Bt=0,Pt=0,dt=0,st=0,Ge=0,At=0,Vt=0,ft=0;if(At=F,F=F+272|0,v=At+256|0,se=At+240|0,dt=At,st=At+224|0,Ge=At+208|0,oe=At+176|0,ne=At+160|0,Ie=At+192|0,Ne=At+144|0,Pe=At+128|0,Fe=At+112|0,Bt=At+96|0,Pt=At+80|0,u[v>>2]=a,u[se>>2]=u[A>>2],u[se+4>>2]=u[A+4>>2],u[se+8>>2]=u[A+8>>2],u[se+12>>2]=u[A+12>>2],Ju(se,v,dt),u[g>>2]=0,se=h+c+((h|0)==5&1)|0,(se|0)<=(c|0)){F=At;return}S=u[v>>2]|0,L=st+4|0,k=oe+4|0,z=c+5|0,Y=16880+(S<<2)|0,Z=16960+(S<<2)|0,H=Pe+8|0,re=Fe+8|0,de=Bt+8|0,he=Ge+4|0,b=c;e:for(;;){y=dt+(((b|0)%5|0)<<4)|0,u[Ge>>2]=u[y>>2],u[Ge+4>>2]=u[y+4>>2],u[Ge+8>>2]=u[y+8>>2],u[Ge+12>>2]=u[y+12>>2];do;while((Xs(Ge,S,0,1)|0)==2);if((b|0)>(c|0)&(Ln(a)|0)!=0){if(u[oe>>2]=u[Ge>>2],u[oe+4>>2]=u[Ge+4>>2],u[oe+8>>2]=u[Ge+8>>2],u[oe+12>>2]=u[Ge+12>>2],Dr(L,ne),h=u[oe>>2]|0,v=u[17040+(h*80|0)+(u[st>>2]<<2)>>2]|0,u[oe>>2]=u[18640+(h*80|0)+(v*20|0)>>2],y=u[18640+(h*80|0)+(v*20|0)+16>>2]|0,(y|0)>0){A=0;do Vo(k),A=A+1|0;while((A|0)<(y|0))}switch(y=18640+(h*80|0)+(v*20|0)+4|0,u[Ie>>2]=u[y>>2],u[Ie+4>>2]=u[y+4>>2],u[Ie+8>>2]=u[y+8>>2],Uo(Ie,(u[Y>>2]|0)*3|0),Tn(k,Ie,k),zn(k),Dr(k,Ne),Vt=+(u[Z>>2]|0),N[Pe>>3]=Vt*3,N[H>>3]=0,ft=Vt*-1.5,N[Fe>>3]=ft,N[re>>3]=Vt*2.598076211353316,N[Bt>>3]=ft,N[de>>3]=Vt*-2.598076211353316,u[17040+((u[oe>>2]|0)*80|0)+(u[Ge>>2]<<2)>>2]|0){case 1:{A=Fe,h=Pe;break}case 3:{A=Bt,h=Fe;break}case 2:{A=Pe,h=Bt;break}default:{A=12;break e}}ro(ne,Ne,h,A,Pt),Wo(Pt,u[oe>>2]|0,S,1,g+8+(u[g>>2]<<4)|0),u[g>>2]=(u[g>>2]|0)+1}if((b|0)<(z|0)&&(Dr(he,oe),Wo(oe,u[Ge>>2]|0,S,1,g+8+(u[g>>2]<<4)|0),u[g>>2]=(u[g>>2]|0)+1),u[st>>2]=u[Ge>>2],u[st+4>>2]=u[Ge+4>>2],u[st+8>>2]=u[Ge+8>>2],u[st+12>>2]=u[Ge+12>>2],b=b+1|0,(b|0)>=(se|0)){A=3;break}}if((A|0)==3){F=At;return}else(A|0)==12&&Ze(22522,22569,571,22579)}function Ju(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0,y=0,b=0,S=0;S=F,F=F+128|0,h=S+64|0,g=S,v=h,y=20240,b=v+60|0;do u[v>>2]=u[y>>2],v=v+4|0,y=y+4|0;while((v|0)<(b|0));v=g,y=20304,b=v+60|0;do u[v>>2]=u[y>>2],v=v+4|0,y=y+4|0;while((v|0)<(b|0));b=(Ln(u[a>>2]|0)|0)==0,h=b?h:g,g=A+4|0,fl(g),ir(g),Ln(u[a>>2]|0)|0&&(rr(g),u[a>>2]=(u[a>>2]|0)+1),u[c>>2]=u[A>>2],a=c+4|0,Tn(g,h,a),zn(a),u[c+16>>2]=u[A>>2],a=c+20|0,Tn(g,h+12|0,a),zn(a),u[c+32>>2]=u[A>>2],a=c+36|0,Tn(g,h+24|0,a),zn(a),u[c+48>>2]=u[A>>2],a=c+52|0,Tn(g,h+36|0,a),zn(a),u[c+64>>2]=u[A>>2],c=c+68|0,Tn(g,h+48|0,c),zn(c),F=S}function Xs(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var g=0,v=0,y=0,b=0,S=0,L=0,k=0,z=0,Y=0,Z=0,H=0;if(H=F,F=F+32|0,Y=H+12|0,b=H,Z=A+4|0,z=u[16960+(a<<2)>>2]|0,k=(h|0)!=0,z=k?z*3|0:z,g=u[Z>>2]|0,L=A+8|0,y=u[L>>2]|0,k){if(v=A+12|0,h=u[v>>2]|0,g=y+g+h|0,(g|0)==(z|0))return Z=1,F=H,Z|0;S=v}else S=A+12|0,h=u[S>>2]|0,g=y+g+h|0;if((g|0)<=(z|0))return Z=0,F=H,Z|0;do if((h|0)>0){if(h=u[A>>2]|0,(y|0)>0){v=18640+(h*80|0)+60|0,h=A;break}h=18640+(h*80|0)+40|0,c?(Ba(Y,z,0,0),ji(Z,Y,b),jo(b),Tn(b,Y,Z),v=h,h=A):(v=h,h=A)}else v=18640+((u[A>>2]|0)*80|0)+20|0,h=A;while(!1);if(u[h>>2]=u[v>>2],g=v+16|0,(u[g>>2]|0)>0){h=0;do Vo(Z),h=h+1|0;while((h|0)<(u[g>>2]|0))}return A=v+4|0,u[Y>>2]=u[A>>2],u[Y+4>>2]=u[A+4>>2],u[Y+8>>2]=u[A+8>>2],a=u[16880+(a<<2)>>2]|0,Uo(Y,k?a*3|0:a),Tn(Z,Y,Z),zn(Z),k?h=((u[L>>2]|0)+(u[Z>>2]|0)+(u[S>>2]|0)|0)==(z|0)?1:2:h=2,Z=h,F=H,Z|0}function R0(A,a){A=A|0,a=a|0;var c=0;do c=Xs(A,a,0,1)|0;while((c|0)==2);return c|0}function pl(A,a,c,h,g){A=A|0,a=a|0,c=c|0,h=h|0,g=g|0;var v=0,y=0,b=0,S=0,L=0,k=0,z=0,Y=0,Z=0,H=0,re=0,de=0,he=0,se=0,oe=0,ne=0,Ie=0,Ne=0,Pe=0,Fe=0,Bt=0,Pt=0,dt=0;if(Bt=F,F=F+240|0,v=Bt+224|0,Ie=Bt+208|0,Ne=Bt,Pe=Bt+192|0,Fe=Bt+176|0,de=Bt+160|0,he=Bt+144|0,se=Bt+128|0,oe=Bt+112|0,ne=Bt+96|0,u[v>>2]=a,u[Ie>>2]=u[A>>2],u[Ie+4>>2]=u[A+4>>2],u[Ie+8>>2]=u[A+8>>2],u[Ie+12>>2]=u[A+12>>2],Ha(Ie,v,Ne),u[g>>2]=0,re=h+c+((h|0)==6&1)|0,(re|0)<=(c|0)){F=Bt;return}S=u[v>>2]|0,L=c+6|0,k=16960+(S<<2)|0,z=he+8|0,Y=se+8|0,Z=oe+8|0,H=Pe+4|0,y=0,b=c,h=-1;e:for(;;){if(v=(b|0)%6|0,A=Ne+(v<<4)|0,u[Pe>>2]=u[A>>2],u[Pe+4>>2]=u[A+4>>2],u[Pe+8>>2]=u[A+8>>2],u[Pe+12>>2]=u[A+12>>2],A=y,y=Xs(Pe,S,0,1)|0,(b|0)>(c|0)&(Ln(a)|0)!=0&&(A|0)!=1&&(u[Pe>>2]|0)!=(h|0)){switch(Dr(Ne+(((v+5|0)%6|0)<<4)+4|0,Fe),Dr(Ne+(v<<4)+4|0,de),Pt=+(u[k>>2]|0),N[he>>3]=Pt*3,N[z>>3]=0,dt=Pt*-1.5,N[se>>3]=dt,N[Y>>3]=Pt*2.598076211353316,N[oe>>3]=dt,N[Z>>3]=Pt*-2.598076211353316,v=u[Ie>>2]|0,u[17040+(v*80|0)+(((h|0)==(v|0)?u[Pe>>2]|0:h)<<2)>>2]|0){case 1:{A=se,h=he;break}case 3:{A=oe,h=se;break}case 2:{A=he,h=oe;break}default:{A=8;break e}}ro(Fe,de,h,A,ne),!(Pl(Fe,ne)|0)&&!(Pl(de,ne)|0)&&(Wo(ne,u[Ie>>2]|0,S,1,g+8+(u[g>>2]<<4)|0),u[g>>2]=(u[g>>2]|0)+1)}if((b|0)<(L|0)&&(Dr(H,Fe),Wo(Fe,u[Pe>>2]|0,S,1,g+8+(u[g>>2]<<4)|0),u[g>>2]=(u[g>>2]|0)+1),b=b+1|0,(b|0)>=(re|0)){A=3;break}else h=u[Pe>>2]|0}if((A|0)==3){F=Bt;return}else(A|0)==8&&Ze(22606,22569,736,22651)}function Ha(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0,y=0,b=0,S=0;S=F,F=F+160|0,h=S+80|0,g=S,v=h,y=20368,b=v+72|0;do u[v>>2]=u[y>>2],v=v+4|0,y=y+4|0;while((v|0)<(b|0));v=g,y=20448,b=v+72|0;do u[v>>2]=u[y>>2],v=v+4|0,y=y+4|0;while((v|0)<(b|0));b=(Ln(u[a>>2]|0)|0)==0,h=b?h:g,g=A+4|0,fl(g),ir(g),Ln(u[a>>2]|0)|0&&(rr(g),u[a>>2]=(u[a>>2]|0)+1),u[c>>2]=u[A>>2],a=c+4|0,Tn(g,h,a),zn(a),u[c+16>>2]=u[A>>2],a=c+20|0,Tn(g,h+12|0,a),zn(a),u[c+32>>2]=u[A>>2],a=c+36|0,Tn(g,h+24|0,a),zn(a),u[c+48>>2]=u[A>>2],a=c+52|0,Tn(g,h+36|0,a),zn(a),u[c+64>>2]=u[A>>2],a=c+68|0,Tn(g,h+48|0,a),zn(a),u[c+80>>2]=u[A>>2],c=c+84|0,Tn(g,h+60|0,c),zn(c),F=S}function O0(A,a){return A=A|0,a=a|0,a=_e(A|0,a|0,52)|0,V()|0,a&15|0}function ec(A,a){return A=A|0,a=a|0,a=_e(A|0,a|0,45)|0,V()|0,a&127|0}function ml(A,a){A=A|0,a=a|0;var c=0,h=0,g=0,v=0,y=0,b=0;if(!(!0&(a&-16777216|0)==134217728)||(y=_e(A|0,a|0,45)|0,V()|0,y=y&127,y>>>0>121))return a=0,a|0;c=_e(A|0,a|0,52)|0,V()|0,c=c&15;do if(c|0){for(g=1,h=0;;){if(v=_e(A|0,a|0,(15-g|0)*3|0)|0,V()|0,v=v&7,(v|0)!=0&(h^1))if((v|0)==1&($e(y)|0)!=0){b=0,h=13;break}else h=1;if((v|0)==7){b=0,h=13;break}if(g>>>0<c>>>0)g=g+1|0;else{h=9;break}}if((h|0)==9){if((c|0)==15)b=1;else break;return b|0}else if((h|0)==13)return b|0}while(!1);for(;;){if(b=_e(A|0,a|0,(14-c|0)*3|0)|0,V()|0,!((b&7|0)==7&!0)){b=0,h=13;break}if(c>>>0<14)c=c+1|0;else{b=1,h=13;break}}return(h|0)==13?b|0:0}function Wa(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var g=0,v=0;if(v=_e(A|0,a|0,52)|0,V()|0,v=v&15,c>>>0>15)return h=4,h|0;if((v|0)<(c|0))return h=12,h|0;if((v|0)==(c|0))return u[h>>2]=A,u[h+4>>2]=a,h=0,h|0;if(g=Oe(c|0,0,52)|0,g=g|A,A=V()|0|a&-15728641,(v|0)>(c|0))do a=Oe(7,0,(14-c|0)*3|0)|0,c=c+1|0,g=a|g,A=V()|0|A;while((c|0)<(v|0));return u[h>>2]=g,u[h+4>>2]=A,h=0,h|0}function Qa(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var g=0,v=0,y=0;if(v=_e(A|0,a|0,52)|0,V()|0,v=v&15,!((c|0)<16&(v|0)<=(c|0)))return h=4,h|0;g=c-v|0,c=_e(A|0,a|0,45)|0,V()|0;e:do if(!($e(c&127)|0))c=wi(7,0,g,((g|0)<0)<<31>>31)|0,g=V()|0;else{t:do if(v|0){for(c=1;y=Oe(7,0,(15-c|0)*3|0)|0,!!((y&A|0)==0&((V()|0)&a|0)==0);)if(c>>>0<v>>>0)c=c+1|0;else break t;c=wi(7,0,g,((g|0)<0)<<31>>31)|0,g=V()|0;break e}while(!1);c=wi(7,0,g,((g|0)<0)<<31>>31)|0,c=Vn(c|0,V()|0,5,0)|0,c=bt(c|0,V()|0,-5,-1)|0,c=Ei(c|0,V()|0,6,0)|0,c=bt(c|0,V()|0,1,0)|0,g=V()|0}while(!1);return y=h,u[y>>2]=c,u[y+4>>2]=g,y=0,y|0}function qt(A,a){A=A|0,a=a|0;var c=0,h=0,g=0;if(g=_e(A|0,a|0,45)|0,V()|0,!($e(g&127)|0))return g=0,g|0;g=_e(A|0,a|0,52)|0,V()|0,g=g&15;e:do if(!g)c=0;else for(h=1;;){if(c=_e(A|0,a|0,(15-h|0)*3|0)|0,V()|0,c=c&7,c|0)break e;if(h>>>0<g>>>0)h=h+1|0;else{c=0;break}}while(!1);return g=(c|0)==0&1,g|0}function D0(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var g=0,v=0,y=0,b=0;if(y=F,F=F+16|0,v=y,Xa(v,A,a,c),a=v,A=u[a>>2]|0,a=u[a+4>>2]|0,(A|0)==0&(a|0)==0)return F=y,0;g=0,c=0;do b=h+(g<<3)|0,u[b>>2]=A,u[b+4>>2]=a,g=bt(g|0,c|0,1,0)|0,c=V()|0,Za(v),b=v,A=u[b>>2]|0,a=u[b+4>>2]|0;while(!((A|0)==0&(a|0)==0));return F=y,0}function F0(A,a,c,h){return A=A|0,a=a|0,c=c|0,h=h|0,(h|0)<(c|0)?(c=a,h=A,it(c|0),h|0):(c=Oe(-1,-1,((h-c|0)*3|0)+3|0)|0,h=Oe(~c|0,~(V()|0)|0,(15-h|0)*3|0)|0,c=~(V()|0)&a,h=~h&A,it(c|0),h|0)}function B0(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var g=0;return g=_e(A|0,a|0,52)|0,V()|0,g=g&15,(c|0)<16&(g|0)<=(c|0)?((g|0)<(c|0)&&(g=Oe(-1,-1,((c+-1-g|0)*3|0)+3|0)|0,g=Oe(~g|0,~(V()|0)|0,(15-c|0)*3|0)|0,a=~(V()|0)&a,A=~g&A),g=Oe(c|0,0,52)|0,c=a&-15728641|(V()|0),u[h>>2]=A|g,u[h+4>>2]=c,h=0,h|0):(h=4,h|0)}function N0(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var g=0,v=0,y=0,b=0,S=0,L=0,k=0,z=0,Y=0,Z=0,H=0,re=0,de=0,he=0,se=0,oe=0,ne=0,Ie=0,Ne=0,Pe=0,Fe=0;if((c|0)==0&(h|0)==0)return Pe=0,Pe|0;if(g=A,v=u[g>>2]|0,g=u[g+4>>2]|0,!0&(g&15728640|0)==0){if(!((h|0)>0|(h|0)==0&c>>>0>0)||(Pe=a,u[Pe>>2]=v,u[Pe+4>>2]=g,(c|0)==1&(h|0)==0))return Pe=0,Pe|0;g=1;do Ie=A+(g<<3)|0,Ne=u[Ie+4>>2]|0,Pe=a+(g<<3)|0,u[Pe>>2]=u[Ie>>2],u[Pe+4>>2]=Ne,g=g+1|0;while(0<(h|0)|(h|0)==0&g>>>0<c>>>0);return g=0,g|0}if(ne=c<<3,Ne=Sr(ne)|0,!Ne)return Pe=13,Pe|0;if(Wt(Ne|0,A|0,ne|0)|0,Ie=Ur(c,8)|0,!Ie)return ot(Ne),Pe=13,Pe|0;e:do if(c|0){t:for(;;){g=Ne,he=u[g>>2]|0,g=u[g+4>>2]|0,se=_e(he|0,g|0,52)|0,V()|0,se=se&15,oe=se+-1|0,de=(c|0)>0;n:do if((se|0)!=0&de){if(Z=((c|0)<0)<<31>>31,H=Oe(oe|0,0,52)|0,re=V()|0,oe>>>0>15){if(!((he|0)==0&(g|0)==0)){Pe=17;break t}for(v=0;;){if(v=v+1|0,(v|0)>=(c|0))break n;if(h=Ne+(v<<3)|0,re=u[h>>2]|0,h=u[h+4>>2]|0,!((re|0)==0&(h|0)==0)){g=h,Pe=17;break t}}}for(v=0,A=he,h=g;;){if(!((A|0)==0&(h|0)==0)){if(!(!0&(h&117440512|0)==0)){Pe=22;break t}if(b=_e(A|0,h|0,52)|0,V()|0,b=b&15,(b|0)<(oe|0)){g=12,Pe=28;break t}if((b|0)!=(oe|0)&&(A=A|H,h=h&-15728641|re,b>>>0>=se>>>0)){y=oe;do Y=Oe(7,0,(14-y|0)*3|0)|0,y=y+1|0,A=Y|A,h=V()|0|h;while(y>>>0<b>>>0)}if(y=si(A|0,h|0,c|0,Z|0)|0,V()|0,L=Ie+(y<<3)|0,b=L,S=u[b>>2]|0,b=u[b+4>>2]|0,(S|0)==0&(b|0)==0)y=L;else for(Y=0;;){if((Y|0)>(c|0)){Pe=32;break t}if((S|0)==(A|0)&(b&-117440513|0)==(h|0)){k=_e(S|0,b|0,56)|0,V()|0,k=k&7,z=k+1|0,Fe=_e(S|0,b|0,45)|0,V()|0;r:do if(!($e(Fe&127)|0))b=7;else{if(S=_e(S|0,b|0,52)|0,V()|0,S=S&15,!S){b=6;break}for(b=1;;){if(Fe=Oe(7,0,(15-b|0)*3|0)|0,!((Fe&A|0)==0&((V()|0)&h|0)==0)){b=7;break r}if(b>>>0<S>>>0)b=b+1|0;else{b=6;break}}}while(!1);if((k+2|0)>>>0>b>>>0){Pe=42;break t}Fe=Oe(z|0,0,56)|0,h=V()|0|h&-117440513,z=L,u[z>>2]=0,u[z+4>>2]=0,A=Fe|A}else y=(y+1|0)%(c|0)|0;if(L=Ie+(y<<3)|0,b=L,S=u[b>>2]|0,b=u[b+4>>2]|0,(S|0)==0&(b|0)==0){y=L;break}else Y=Y+1|0}Fe=y,u[Fe>>2]=A,u[Fe+4>>2]=h}if(v=v+1|0,(v|0)>=(c|0))break n;h=Ne+(v<<3)|0,A=u[h>>2]|0,h=u[h+4>>2]|0}}while(!1);if((c+5|0)>>>0<11){Pe=85;break}if(re=Ur((c|0)/6|0,8)|0,!re){Pe=49;break}n:do if(de){Y=0,z=0;do{if(b=Ie+(Y<<3)|0,h=b,v=u[h>>2]|0,h=u[h+4>>2]|0,!((v|0)==0&(h|0)==0)){S=_e(v|0,h|0,56)|0,V()|0,S=S&7,A=S+1|0,L=h&-117440513,Fe=_e(v|0,h|0,45)|0,V()|0;r:do if($e(Fe&127)|0){if(k=_e(v|0,h|0,52)|0,V()|0,k=k&15,k|0)for(y=1;;){if(Fe=Oe(7,0,(15-y|0)*3|0)|0,!((v&Fe|0)==0&(L&(V()|0)|0)==0))break r;if(y>>>0<k>>>0)y=y+1|0;else break}h=Oe(A|0,0,56)|0,v=h|v,h=V()|0|L,A=b,u[A>>2]=v,u[A+4>>2]=h,A=S+2|0}while(!1);(A|0)==7&&(Fe=re+(z<<3)|0,u[Fe>>2]=v,u[Fe+4>>2]=h&-117440513,z=z+1|0)}Y=Y+1|0}while((Y|0)!=(c|0));if(de){if(Y=((c|0)<0)<<31>>31,Z=Oe(oe|0,0,52)|0,H=V()|0,oe>>>0>15){if(!((he|0)==0&(g|0)==0)){g=4,Pe=84;break t}for(g=0;;){if(g=g+1|0,(g|0)>=(c|0)){v=0,g=z;break n}if(Fe=Ne+(g<<3)|0,!((u[Fe>>2]|0)==0&(u[Fe+4>>2]|0)==0)){g=4,Pe=84;break t}}}for(k=0,v=0,L=he;;){do if(!((L|0)==0&(g|0)==0)){if(b=_e(L|0,g|0,52)|0,V()|0,b=b&15,(b|0)<(oe|0)){g=12,Pe=84;break t}do if((b|0)==(oe|0))h=L,b=g;else{if(h=L|Z,A=g&-15728641|H,b>>>0<se>>>0){b=A;break}y=oe;do Fe=Oe(7,0,(14-y|0)*3|0)|0,y=y+1|0,h=Fe|h,A=V()|0|A;while(y>>>0<b>>>0);b=A}while(!1);for(y=si(h|0,b|0,c|0,Y|0)|0,V()|0,A=0;;){if((A|0)>(c|0)){Pe=77;break t}if(Fe=Ie+(y<<3)|0,S=u[Fe+4>>2]|0,(S&-117440513|0)==(b|0)&&(u[Fe>>2]|0)==(h|0)){Pe=79;break}if(y=(y+1|0)%(c|0)|0,Fe=Ie+(y<<3)|0,(u[Fe>>2]|0)==(h|0)&&(u[Fe+4>>2]|0)==(b|0))break;A=A+1|0}if((Pe|0)==79&&(Pe=0,!0&(S&117440512|0)==100663296))break;Fe=a+(v<<3)|0,u[Fe>>2]=L,u[Fe+4>>2]=g,v=v+1|0}while(!1);if(g=k+1|0,(g|0)>=(c|0)){g=z;break n}Fe=Ne+(g<<3)|0,k=g,L=u[Fe>>2]|0,g=u[Fe+4>>2]|0}}else v=0,g=z}else v=0,g=0;while(!1);if(or(Ie|0,0,ne|0)|0,Wt(Ne|0,re|0,g<<3|0)|0,ot(re),g)a=a+(v<<3)|0,c=g;else break e}if((Pe|0)==17)!0&(g&117440512|0)==0?(g=4,Pe=28):Pe=22;else if((Pe|0)==32)Ze(23313,22674,362,22684);else{if((Pe|0)==42)return ot(Ne),ot(Ie),Fe=10,Fe|0;if((Pe|0)==49)return ot(Ne),ot(Ie),Fe=13,Fe|0;if((Pe|0)==77)Ze(23313,22674,462,22684);else{if((Pe|0)==84)return ot(re),ot(Ne),ot(Ie),Fe=g,Fe|0;if((Pe|0)==85){Wt(a|0,Ne|0,c<<3|0)|0;break}}}if((Pe|0)==22)return ot(Ne),ot(Ie),Fe=5,Fe|0;if((Pe|0)==28)return ot(Ne),ot(Ie),Fe=g,Fe|0}while(!1);return ot(Ne),ot(Ie),Fe=0,Fe|0}function U0(A,a,c,h,g,v,y){A=A|0,a=a|0,c=c|0,h=h|0,g=g|0,v=v|0,y=y|0;var b=0,S=0,L=0,k=0,z=0,Y=0,Z=0,H=0,re=0;if(re=F,F=F+16|0,H=re,!((c|0)>0|(c|0)==0&a>>>0>0))return H=0,F=re,H|0;if((y|0)>=16)return H=12,F=re,H|0;Y=0,Z=0,z=0,b=0;e:for(;;){if(L=A+(Y<<3)|0,S=u[L>>2]|0,L=u[L+4>>2]|0,k=_e(S|0,L|0,52)|0,V()|0,(k&15|0)>(y|0)){b=12,S=11;break}if(Xa(H,S,L,y),k=H,L=u[k>>2]|0,k=u[k+4>>2]|0,(L|0)==0&(k|0)==0)S=z;else{S=z;do{if(!((b|0)<(v|0)|(b|0)==(v|0)&S>>>0<g>>>0)){S=10;break e}z=h+(S<<3)|0,u[z>>2]=L,u[z+4>>2]=k,S=bt(S|0,b|0,1,0)|0,b=V()|0,Za(H),z=H,L=u[z>>2]|0,k=u[z+4>>2]|0}while(!((L|0)==0&(k|0)==0))}if(Y=bt(Y|0,Z|0,1,0)|0,Z=V()|0,(Z|0)<(c|0)|(Z|0)==(c|0)&Y>>>0<a>>>0)z=S;else{b=0,S=11;break}}return(S|0)==10?(H=14,F=re,H|0):(S|0)==11?(F=re,b|0):0}function vl(A,a,c,h,g){A=A|0,a=a|0,c=c|0,h=h|0,g=g|0;var v=0,y=0,b=0,S=0,L=0,k=0,z=0,Y=0;Y=F,F=F+16|0,z=Y;e:do if((c|0)>0|(c|0)==0&a>>>0>0){for(L=0,y=0,v=0,k=0;;){if(S=A+(L<<3)|0,b=u[S>>2]|0,S=u[S+4>>2]|0,!((b|0)==0&(S|0)==0)&&(S=(Qa(b,S,h,z)|0)==0,b=z,y=bt(u[b>>2]|0,u[b+4>>2]|0,y|0,v|0)|0,v=V()|0,!S)){v=12;break}if(L=bt(L|0,k|0,1,0)|0,k=V()|0,!((k|0)<(c|0)|(k|0)==(c|0)&L>>>0<a>>>0))break e}return F=Y,v|0}else y=0,v=0;while(!1);return u[g>>2]=y,u[g+4>>2]=v,g=0,F=Y,g|0}function Qo(A,a){return A=A|0,a=a|0,a=_e(A|0,a|0,52)|0,V()|0,a&1|0}function sr(A,a){A=A|0,a=a|0;var c=0,h=0,g=0;if(g=_e(A|0,a|0,52)|0,V()|0,g=g&15,!g)return g=0,g|0;for(h=1;;){if(c=_e(A|0,a|0,(15-h|0)*3|0)|0,V()|0,c=c&7,c|0){h=5;break}if(h>>>0<g>>>0)h=h+1|0;else{c=0,h=5;break}}return(h|0)==5?c|0:0}function Ya(A,a){A=A|0,a=a|0;var c=0,h=0,g=0,v=0,y=0,b=0,S=0;if(S=_e(A|0,a|0,52)|0,V()|0,S=S&15,!S)return b=a,S=A,it(b|0),S|0;for(b=1,c=0;;){v=(15-b|0)*3|0,h=Oe(7,0,v|0)|0,g=V()|0,y=_e(A|0,a|0,v|0)|0,V()|0,v=Oe(ni(y&7)|0,0,v|0)|0,y=V()|0,A=v|A&~h,a=y|a&~g;e:do if(!c)if((v&h|0)==0&(y&g|0)==0)c=0;else if(h=_e(A|0,a|0,52)|0,V()|0,h=h&15,!h)c=1;else{c=1;t:for(;;){switch(y=_e(A|0,a|0,(15-c|0)*3|0)|0,V()|0,y&7){case 1:break t;case 0:break;default:{c=1;break e}}if(c>>>0<h>>>0)c=c+1|0;else{c=1;break e}}for(c=1;;)if(y=(15-c|0)*3|0,g=_e(A|0,a|0,y|0)|0,V()|0,v=Oe(7,0,y|0)|0,a=a&~(V()|0),y=Oe(ni(g&7)|0,0,y|0)|0,A=A&~v|y,a=a|(V()|0),c>>>0<h>>>0)c=c+1|0;else{c=1;break}}while(!1);if(b>>>0<S>>>0)b=b+1|0;else break}return it(a|0),A|0}function Hi(A,a){A=A|0,a=a|0;var c=0,h=0,g=0,v=0,y=0;if(h=_e(A|0,a|0,52)|0,V()|0,h=h&15,!h)return c=a,h=A,it(c|0),h|0;for(c=1;v=(15-c|0)*3|0,y=_e(A|0,a|0,v|0)|0,V()|0,g=Oe(7,0,v|0)|0,a=a&~(V()|0),v=Oe(ni(y&7)|0,0,v|0)|0,A=v|A&~g,a=V()|0|a,c>>>0<h>>>0;)c=c+1|0;return it(a|0),A|0}function tc(A,a){A=A|0,a=a|0;var c=0,h=0,g=0,v=0,y=0,b=0,S=0;if(S=_e(A|0,a|0,52)|0,V()|0,S=S&15,!S)return b=a,S=A,it(b|0),S|0;for(b=1,c=0;;){v=(15-b|0)*3|0,h=Oe(7,0,v|0)|0,g=V()|0,y=_e(A|0,a|0,v|0)|0,V()|0,v=Oe(Fr(y&7)|0,0,v|0)|0,y=V()|0,A=v|A&~h,a=y|a&~g;e:do if(!c)if((v&h|0)==0&(y&g|0)==0)c=0;else if(h=_e(A|0,a|0,52)|0,V()|0,h=h&15,!h)c=1;else{c=1;t:for(;;){switch(y=_e(A|0,a|0,(15-c|0)*3|0)|0,V()|0,y&7){case 1:break t;case 0:break;default:{c=1;break e}}if(c>>>0<h>>>0)c=c+1|0;else{c=1;break e}}for(c=1;;)if(g=(15-c|0)*3|0,v=Oe(7,0,g|0)|0,y=a&~(V()|0),a=_e(A|0,a|0,g|0)|0,V()|0,a=Oe(Fr(a&7)|0,0,g|0)|0,A=A&~v|a,a=y|(V()|0),c>>>0<h>>>0)c=c+1|0;else{c=1;break}}while(!1);if(b>>>0<S>>>0)b=b+1|0;else break}return it(a|0),A|0}function $a(A,a){A=A|0,a=a|0;var c=0,h=0,g=0,v=0,y=0;if(h=_e(A|0,a|0,52)|0,V()|0,h=h&15,!h)return c=a,h=A,it(c|0),h|0;for(c=1;y=(15-c|0)*3|0,v=Oe(7,0,y|0)|0,g=a&~(V()|0),a=_e(A|0,a|0,y|0)|0,V()|0,a=Oe(Fr(a&7)|0,0,y|0)|0,A=a|A&~v,a=V()|0|g,c>>>0<h>>>0;)c=c+1|0;return it(a|0),A|0}function nc(A,a){A=A|0,a=a|0;var c=0,h=0,g=0,v=0,y=0,b=0,S=0,L=0,k=0;if(S=F,F=F+64|0,b=S+40|0,h=S+24|0,g=S+12|0,v=S,Oe(a|0,0,52)|0,c=V()|0|134225919,!a)return(u[A+4>>2]|0)>2||(u[A+8>>2]|0)>2||(u[A+12>>2]|0)>2?(y=0,b=0,it(y|0),F=S,b|0):(Oe(ln(A)|0,0,45)|0,y=V()|0|c,b=-1,it(y|0),F=S,b|0);if(u[b>>2]=u[A>>2],u[b+4>>2]=u[A+4>>2],u[b+8>>2]=u[A+8>>2],u[b+12>>2]=u[A+12>>2],y=b+4|0,(a|0)>0)for(A=-1;u[h>>2]=u[y>>2],u[h+4>>2]=u[y+4>>2],u[h+8>>2]=u[y+8>>2],a&1?(Ua(y),u[g>>2]=u[y>>2],u[g+4>>2]=u[y+4>>2],u[g+8>>2]=u[y+8>>2],zo(g)):(za(y),u[g>>2]=u[y>>2],u[g+4>>2]=u[y+4>>2],u[g+8>>2]=u[y+8>>2],rr(g)),ji(h,g,v),zn(v),k=(15-a|0)*3|0,L=Oe(7,0,k|0)|0,c=c&~(V()|0),k=Oe(Na(v)|0,0,k|0)|0,A=k|A&~L,c=V()|0|c,(a|0)>1;)a=a+-1|0;else A=-1;e:do if((u[y>>2]|0)<=2&&(u[b+8>>2]|0)<=2&&(u[b+12>>2]|0)<=2){if(h=ln(b)|0,a=Oe(h|0,0,45)|0,a=a|A,A=V()|0|c&-1040385,v=mn(b)|0,!($e(h)|0)){if((v|0)<=0)break;for(g=0;;){if(h=_e(a|0,A|0,52)|0,V()|0,h=h&15,h)for(c=1;k=(15-c|0)*3|0,b=_e(a|0,A|0,k|0)|0,V()|0,L=Oe(7,0,k|0)|0,A=A&~(V()|0),k=Oe(ni(b&7)|0,0,k|0)|0,a=a&~L|k,A=A|(V()|0),c>>>0<h>>>0;)c=c+1|0;if(g=g+1|0,(g|0)==(v|0))break e}}g=_e(a|0,A|0,52)|0,V()|0,g=g&15;t:do if(g){c=1;n:for(;;){switch(k=_e(a|0,A|0,(15-c|0)*3|0)|0,V()|0,k&7){case 1:break n;case 0:break;default:break t}if(c>>>0<g>>>0)c=c+1|0;else break t}if(_i(h,u[b>>2]|0)|0)for(c=1;b=(15-c|0)*3|0,L=Oe(7,0,b|0)|0,k=A&~(V()|0),A=_e(a|0,A|0,b|0)|0,V()|0,A=Oe(Fr(A&7)|0,0,b|0)|0,a=a&~L|A,A=k|(V()|0),c>>>0<g>>>0;)c=c+1|0;else for(c=1;k=(15-c|0)*3|0,b=_e(a|0,A|0,k|0)|0,V()|0,L=Oe(7,0,k|0)|0,A=A&~(V()|0),k=Oe(ni(b&7)|0,0,k|0)|0,a=a&~L|k,A=A|(V()|0),c>>>0<g>>>0;)c=c+1|0}while(!1);if((v|0)>0){c=0;do a=Ya(a,A)|0,A=V()|0,c=c+1|0;while((c|0)!=(v|0))}}else a=0,A=0;while(!1);return L=A,k=a,it(L|0),F=S,k|0}function Ln(A){return A=A|0,(A|0)%2|0|0}function rc(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0;return g=F,F=F+16|0,h=g,a>>>0>15?(h=4,F=g,h|0):(u[A+4>>2]&2146435072|0)==2146435072||(u[A+8+4>>2]&2146435072|0)==2146435072?(h=3,F=g,h|0):(L0(A,a,h),a=nc(h,a)|0,h=V()|0,u[c>>2]=a,u[c+4>>2]=h,(a|0)==0&(h|0)==0&&Ze(23313,22674,786,22697),h=0,F=g,h|0)}function yl(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0,y=0;if(g=c+4|0,v=_e(A|0,a|0,52)|0,V()|0,v=v&15,y=_e(A|0,a|0,45)|0,V()|0,h=(v|0)==0,$e(y&127)|0){if(h)return y=1,y|0;h=1}else{if(h)return y=0,y|0;(u[g>>2]|0)==0&&(u[c+8>>2]|0)==0?h=(u[c+12>>2]|0)!=0&1:h=1}for(c=1;c&1?zo(g):rr(g),y=_e(A|0,a|0,(15-c|0)*3|0)|0,V()|0,Va(g,y&7),c>>>0<v>>>0;)c=c+1|0;return h|0}function Zs(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0,y=0,b=0,S=0,L=0,k=0;if(k=F,F=F+16|0,S=k,L=_e(A|0,a|0,45)|0,V()|0,L=L&127,L>>>0>121)return u[c>>2]=0,u[c+4>>2]=0,u[c+8>>2]=0,u[c+12>>2]=0,L=5,F=k,L|0;e:do if(($e(L)|0)!=0&&(v=_e(A|0,a|0,52)|0,V()|0,v=v&15,(v|0)!=0)){h=1;t:for(;;){switch(b=_e(A|0,a|0,(15-h|0)*3|0)|0,V()|0,b&7){case 5:break t;case 0:break;default:{h=a;break e}}if(h>>>0<v>>>0)h=h+1|0;else{h=a;break e}}for(g=1,h=a;a=(15-g|0)*3|0,y=Oe(7,0,a|0)|0,b=h&~(V()|0),h=_e(A|0,h|0,a|0)|0,V()|0,h=Oe(Fr(h&7)|0,0,a|0)|0,A=A&~y|h,h=b|(V()|0),g>>>0<v>>>0;)g=g+1|0}else h=a;while(!1);if(b=7696+(L*28|0)|0,u[c>>2]=u[b>>2],u[c+4>>2]=u[b+4>>2],u[c+8>>2]=u[b+8>>2],u[c+12>>2]=u[b+12>>2],!(yl(A,h,c)|0))return L=0,F=k,L|0;if(y=c+4|0,u[S>>2]=u[y>>2],u[S+4>>2]=u[y+4>>2],u[S+8>>2]=u[y+8>>2],v=_e(A|0,h|0,52)|0,V()|0,b=v&15,v&1?(rr(y),v=b+1|0):v=b,!($e(L)|0))h=0;else{e:do if(!b)h=0;else for(a=1;;){if(g=_e(A|0,h|0,(15-a|0)*3|0)|0,V()|0,g=g&7,g|0){h=g;break e}if(a>>>0<b>>>0)a=a+1|0;else{h=0;break}}while(!1);h=(h|0)==4&1}if(!(Xs(c,v,h,0)|0))(v|0)!=(b|0)&&(u[y>>2]=u[S>>2],u[y+4>>2]=u[S+4>>2],u[y+8>>2]=u[S+8>>2]);else{if($e(L)|0)do;while((Xs(c,v,0,0)|0)!=0);(v|0)!=(b|0)&&za(y)}return L=0,F=k,L|0}function qs(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0;return v=F,F=F+16|0,h=v,g=Zs(A,a,h)|0,g|0?(F=v,g|0):(g=_e(A|0,a|0,52)|0,V()|0,I0(h,g&15,c),g=0,F=v,g|0)}function Ks(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0,y=0,b=0;if(y=F,F=F+16|0,v=y,h=Zs(A,a,v)|0,h|0)return v=h,F=y,v|0;h=_e(A|0,a|0,45)|0,V()|0,h=($e(h&127)|0)==0,g=_e(A|0,a|0,52)|0,V()|0,g=g&15;e:do if(!h){if(g|0)for(h=1;;){if(b=Oe(7,0,(15-h|0)*3|0)|0,!((b&A|0)==0&((V()|0)&a|0)==0))break e;if(h>>>0<g>>>0)h=h+1|0;else break}return Ga(v,g,0,5,c),b=0,F=y,b|0}while(!1);return pl(v,g,0,6,c),b=0,F=y,b|0}function Yo(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0;if(g=_e(A|0,a|0,45)|0,V()|0,!($e(g&127)|0))return g=2,u[c>>2]=g,0;if(g=_e(A|0,a|0,52)|0,V()|0,g=g&15,!g)return g=5,u[c>>2]=g,0;for(h=1;;){if(v=Oe(7,0,(15-h|0)*3|0)|0,!((v&A|0)==0&((V()|0)&a|0)==0)){h=2,A=6;break}if(h>>>0<g>>>0)h=h+1|0;else{h=5,A=6;break}}return(A|0)==6&&(u[c>>2]=h),0}function Js(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0,y=0,b=0,S=0,L=0,k=0,z=0;z=F,F=F+128|0,L=z+112|0,v=z+96|0,k=z,g=_e(A|0,a|0,52)|0,V()|0,b=g&15,u[L>>2]=b,y=_e(A|0,a|0,45)|0,V()|0,y=y&127;e:do if($e(y)|0){if(b|0)for(h=1;;){if(S=Oe(7,0,(15-h|0)*3|0)|0,!((S&A|0)==0&((V()|0)&a|0)==0)){g=0;break e}if(h>>>0<b>>>0)h=h+1|0;else break}if(g&1)g=1;else return S=Oe(b+1|0,0,52)|0,k=V()|0|a&-15728641,L=Oe(7,0,(14-b|0)*3|0)|0,k=Js((S|A)&~L,k&~(V()|0),c)|0,F=z,k|0}else g=0;while(!1);if(h=Zs(A,a,v)|0,!h){g?(Ju(v,L,k),S=5):(Ha(v,L,k),S=6);e:do if($e(y)|0)if(!b)A=5;else for(h=1;;){if(y=Oe(7,0,(15-h|0)*3|0)|0,!((y&A|0)==0&((V()|0)&a|0)==0)){A=2;break e}if(h>>>0<b>>>0)h=h+1|0;else{A=5;break}}else A=2;while(!1);or(c|0,-1,A<<2|0)|0;e:do if(g)for(v=0;;){if(y=k+(v<<4)|0,R0(y,u[L>>2]|0)|0,y=u[y>>2]|0,b=u[c>>2]|0,(b|0)==-1|(b|0)==(y|0))h=c;else{g=0;do{if(g=g+1|0,g>>>0>=A>>>0){h=1;break e}h=c+(g<<2)|0,b=u[h>>2]|0}while(!((b|0)==-1|(b|0)==(y|0)))}if(u[h>>2]=y,v=v+1|0,v>>>0>=S>>>0){h=0;break}}else for(v=0;;){if(y=k+(v<<4)|0,Xs(y,u[L>>2]|0,0,1)|0,y=u[y>>2]|0,b=u[c>>2]|0,(b|0)==-1|(b|0)==(y|0))h=c;else{g=0;do{if(g=g+1|0,g>>>0>=A>>>0){h=1;break e}h=c+(g<<2)|0,b=u[h>>2]|0}while(!((b|0)==-1|(b|0)==(y|0)))}if(u[h>>2]=y,v=v+1|0,v>>>0>=S>>>0){h=0;break}}while(!1)}return k=h,F=z,k|0}function z0(){return 12}function eo(A,a){A=A|0,a=a|0;var c=0,h=0,g=0,v=0,y=0,b=0,S=0;if(A>>>0>15)return b=4,b|0;if(Oe(A|0,0,52)|0,b=V()|0|134225919,!A){c=0,h=0;do $e(h)|0&&(Oe(h|0,0,45)|0,y=b|(V()|0),A=a+(c<<3)|0,u[A>>2]=-1,u[A+4>>2]=y,c=c+1|0),h=h+1|0;while((h|0)!=122);return c=0,c|0}c=0,y=0;do{if($e(y)|0){for(Oe(y|0,0,45)|0,h=1,g=-1,v=b|(V()|0);S=Oe(7,0,(15-h|0)*3|0)|0,g=g&~S,v=v&~(V()|0),(h|0)!=(A|0);)h=h+1|0;S=a+(c<<3)|0,u[S>>2]=g,u[S+4>>2]=v,c=c+1|0}y=y+1|0}while((y|0)!=122);return c=0,c|0}function V0(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var g=0,v=0,y=0,b=0,S=0,L=0,k=0,z=0,Y=0,Z=0,H=0,re=0,de=0,he=0,se=0;if(se=F,F=F+16|0,de=se,he=_e(A|0,a|0,52)|0,V()|0,he=he&15,c>>>0>15)return he=4,F=se,he|0;if((he|0)<(c|0))return he=12,F=se,he|0;if((he|0)!=(c|0))if(v=Oe(c|0,0,52)|0,v=v|A,b=V()|0|a&-15728641,(he|0)>(c|0)){S=c;do re=Oe(7,0,(14-S|0)*3|0)|0,S=S+1|0,v=re|v,b=V()|0|b;while((S|0)<(he|0));re=v}else re=v;else re=A,b=a;H=_e(re|0,b|0,45)|0,V()|0;e:do if($e(H&127)|0){if(S=_e(re|0,b|0,52)|0,V()|0,S=S&15,S|0)for(v=1;;){if(H=Oe(7,0,(15-v|0)*3|0)|0,!((H&re|0)==0&((V()|0)&b|0)==0)){L=33;break e}if(v>>>0<S>>>0)v=v+1|0;else break}if(H=h,u[H>>2]=0,u[H+4>>2]=0,(he|0)>(c|0)){for(H=a&-15728641,Z=he;;){if(Y=Z,Z=Z+-1|0,Z>>>0>15|(he|0)<(Z|0)){L=19;break}if((he|0)!=(Z|0))if(v=Oe(Z|0,0,52)|0,v=v|A,S=V()|0|H,(he|0)<(Y|0))z=v;else{L=Z;do z=Oe(7,0,(14-L|0)*3|0)|0,L=L+1|0,v=z|v,S=V()|0|S;while((L|0)<(he|0));z=v}else z=A,S=a;if(k=_e(z|0,S|0,45)|0,V()|0,!($e(k&127)|0))v=0;else{k=_e(z|0,S|0,52)|0,V()|0,k=k&15;t:do if(!k)v=0;else for(L=1;;){if(v=_e(z|0,S|0,(15-L|0)*3|0)|0,V()|0,v=v&7,v|0)break t;if(L>>>0<k>>>0)L=L+1|0;else{v=0;break}}while(!1);v=(v|0)==0&1}if(S=_e(A|0,a|0,(15-Y|0)*3|0)|0,V()|0,S=S&7,(S|0)==7){g=5,L=42;break}if(v=(v|0)!=0,(S|0)==1&v){g=5,L=42;break}if(z=S+(((S|0)!=0&v)<<31>>31)|0,z|0&&(L=he-Y|0,L=wi(7,0,L,((L|0)<0)<<31>>31)|0,k=V()|0,v?(v=Vn(L|0,k|0,5,0)|0,v=bt(v|0,V()|0,-5,-1)|0,v=Ei(v|0,V()|0,6,0)|0,v=bt(v|0,V()|0,1,0)|0,S=V()|0):(v=L,S=k),Y=z+-1|0,Y=Vn(L|0,k|0,Y|0,((Y|0)<0)<<31>>31|0)|0,Y=bt(v|0,S|0,Y|0,V()|0)|0,z=V()|0,k=h,k=bt(Y|0,z|0,u[k>>2]|0,u[k+4>>2]|0)|0,z=V()|0,Y=h,u[Y>>2]=k,u[Y+4>>2]=z),(Z|0)<=(c|0)){L=37;break}}if((L|0)==19)Ze(23313,22674,1099,22710);else if((L|0)==37){y=h,g=u[y+4>>2]|0,y=u[y>>2]|0;break}else if((L|0)==42)return F=se,g|0}else g=0,y=0}else L=33;while(!1);e:do if((L|0)==33)if(H=h,u[H>>2]=0,u[H+4>>2]=0,(he|0)>(c|0)){for(v=he;;){if(g=_e(A|0,a|0,(15-v|0)*3|0)|0,V()|0,g=g&7,(g|0)==7){g=5;break}if(y=he-v|0,y=wi(7,0,y,((y|0)<0)<<31>>31)|0,g=Vn(y|0,V()|0,g|0,0)|0,y=V()|0,H=h,y=bt(u[H>>2]|0,u[H+4>>2]|0,g|0,y|0)|0,g=V()|0,H=h,u[H>>2]=y,u[H+4>>2]=g,v=v+-1|0,(v|0)<=(c|0))break e}return F=se,g|0}else g=0,y=0;while(!1);return Qa(re,b,he,de)|0&&Ze(23313,22674,1063,22725),he=de,de=u[he+4>>2]|0,((g|0)>-1|(g|0)==-1&y>>>0>4294967295)&((de|0)>(g|0)|((de|0)==(g|0)?(u[he>>2]|0)>>>0>y>>>0:0))?(he=0,F=se,he|0):(Ze(23313,22674,1139,22710),0)}function ic(A,a,c,h,g,v){A=A|0,a=a|0,c=c|0,h=h|0,g=g|0,v=v|0;var y=0,b=0,S=0,L=0,k=0,z=0,Y=0,Z=0,H=0,re=0;if(z=F,F=F+16|0,y=z,g>>>0>15)return v=4,F=z,v|0;if(b=_e(c|0,h|0,52)|0,V()|0,b=b&15,(b|0)>(g|0))return v=12,F=z,v|0;if(Qa(c,h,g,y)|0&&Ze(23313,22674,1063,22725),k=y,L=u[k+4>>2]|0,!(((a|0)>-1|(a|0)==-1&A>>>0>4294967295)&((L|0)>(a|0)|((L|0)==(a|0)?(u[k>>2]|0)>>>0>A>>>0:0))))return v=2,F=z,v|0;k=g-b|0,g=Oe(g|0,0,52)|0,S=V()|0|h&-15728641,L=v,u[L>>2]=g|c,u[L+4>>2]=S,L=_e(c|0,h|0,45)|0,V()|0;e:do if($e(L&127)|0){if(b|0)for(y=1;;){if(L=Oe(7,0,(15-y|0)*3|0)|0,!((L&c|0)==0&((V()|0)&h|0)==0))break e;if(y>>>0<b>>>0)y=y+1|0;else break}if((k|0)<1)return v=0,F=z,v|0;for(L=b^15,h=-1,S=1,y=1;;){b=k-S|0,b=wi(7,0,b,((b|0)<0)<<31>>31)|0,c=V()|0;do if(y)if(y=Vn(b|0,c|0,5,0)|0,y=bt(y|0,V()|0,-5,-1)|0,y=Ei(y|0,V()|0,6,0)|0,g=V()|0,(a|0)>(g|0)|(a|0)==(g|0)&A>>>0>y>>>0){a=bt(A|0,a|0,-1,-1)|0,a=tn(a|0,V()|0,y|0,g|0)|0,y=V()|0,Y=v,H=u[Y>>2]|0,Y=u[Y+4>>2]|0,re=(L+h|0)*3|0,Z=Oe(7,0,re|0)|0,Y=Y&~(V()|0),h=Ei(a|0,y|0,b|0,c|0)|0,A=V()|0,g=bt(h|0,A|0,2,0)|0,re=Oe(g|0,V()|0,re|0)|0,Y=V()|0|Y,g=v,u[g>>2]=re|H&~Z,u[g+4>>2]=Y,A=Vn(h|0,A|0,b|0,c|0)|0,A=tn(a|0,y|0,A|0,V()|0)|0,y=0,a=V()|0;break}else{re=v,Z=u[re>>2]|0,re=u[re+4>>2]|0,H=Oe(7,0,(L+h|0)*3|0)|0,re=re&~(V()|0),y=v,u[y>>2]=Z&~H,u[y+4>>2]=re,y=1;break}else Z=v,g=u[Z>>2]|0,Z=u[Z+4>>2]|0,h=(L+h|0)*3|0,Y=Oe(7,0,h|0)|0,Z=Z&~(V()|0),re=Ei(A|0,a|0,b|0,c|0)|0,y=V()|0,h=Oe(re|0,y|0,h|0)|0,Z=V()|0|Z,H=v,u[H>>2]=h|g&~Y,u[H+4>>2]=Z,y=Vn(re|0,y|0,b|0,c|0)|0,A=tn(A|0,a|0,y|0,V()|0)|0,y=0,a=V()|0;while(!1);if((k|0)>(S|0))h=~S,S=S+1|0;else{a=0;break}}return F=z,a|0}while(!1);if((k|0)<1)return re=0,F=z,re|0;for(g=b^15,y=1;;)if(H=k-y|0,H=wi(7,0,H,((H|0)<0)<<31>>31)|0,re=V()|0,S=v,c=u[S>>2]|0,S=u[S+4>>2]|0,b=(g-y|0)*3|0,h=Oe(7,0,b|0)|0,S=S&~(V()|0),Y=Ei(A|0,a|0,H|0,re|0)|0,Z=V()|0,b=Oe(Y|0,Z|0,b|0)|0,S=V()|0|S,L=v,u[L>>2]=b|c&~h,u[L+4>>2]=S,re=Vn(Y|0,Z|0,H|0,re|0)|0,A=tn(A|0,a|0,re|0,V()|0)|0,a=V()|0,(k|0)<=(y|0)){a=0;break}else y=y+1|0;return F=z,a|0}function Xa(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var g=0,v=0;g=_e(a|0,c|0,52)|0,V()|0,g=g&15,(a|0)==0&(c|0)==0|((h|0)>15|(g|0)>(h|0))?(h=-1,g=-1,a=0,c=0):(v=F0(a,c,g+1|0,h)|0,c=(V()|0)&-15728641,a=Oe(h|0,0,52)|0,a=v|a,c=c|(V()|0),v=(qt(a,c)|0)==0,h=v?-1:h),v=A,u[v>>2]=a,u[v+4>>2]=c,u[A+8>>2]=g,u[A+12>>2]=h}function Za(A){A=A|0;var a=0,c=0,h=0,g=0,v=0,y=0,b=0,S=0,L=0;if(c=A,a=u[c>>2]|0,c=u[c+4>>2]|0,!((a|0)==0&(c|0)==0)&&(h=_e(a|0,c|0,52)|0,V()|0,h=h&15,b=Oe(1,0,(h^15)*3|0)|0,a=bt(b|0,V()|0,a|0,c|0)|0,c=V()|0,b=A,u[b>>2]=a,u[b+4>>2]=c,b=A+8|0,y=u[b>>2]|0,!((h|0)<(y|0)))){for(S=A+12|0,v=h;;){if((v|0)==(y|0)){h=5;break}if(L=(v|0)==(u[S>>2]|0),g=(15-v|0)*3|0,h=_e(a|0,c|0,g|0)|0,V()|0,h=h&7,L&((h|0)==1&!0)){h=7;break}if(!((h|0)==7&!0)){h=10;break}if(L=Oe(1,0,g|0)|0,a=bt(a|0,c|0,L|0,V()|0)|0,c=V()|0,L=A,u[L>>2]=a,u[L+4>>2]=c,(v|0)>(y|0))v=v+-1|0;else{h=10;break}}if((h|0)==5){L=A,u[L>>2]=0,u[L+4>>2]=0,u[b>>2]=-1,u[S>>2]=-1;return}else if((h|0)==7){y=Oe(1,0,g|0)|0,y=bt(a|0,c|0,y|0,V()|0)|0,b=V()|0,L=A,u[L>>2]=y,u[L+4>>2]=b,u[S>>2]=v+-1;return}else if((h|0)==10)return}}function to(A){A=+A;var a=0;return a=A<0?A+6.283185307179586:A,+(A>=6.283185307179586?a+-6.283185307179586:a)}function vs(A,a){return A=A|0,a=a|0,+Et(+(+N[A>>3]-+N[a>>3]))<17453292519943298e-27?(a=+Et(+(+N[A+8>>3]-+N[a+8>>3]))<17453292519943298e-27,a|0):(a=0,a|0)}function sc(A,a){A=A|0,a=a|0;var c=0,h=0,g=0,v=0;return g=+N[a>>3],h=+N[A>>3],v=+lt(+((g-h)*.5)),c=+lt(+((+N[a+8>>3]-+N[A+8>>3])*.5)),c=v*v+c*(+Rt(+g)*+Rt(+h)*c),+(+tr(+ +Tt(+c),+ +Tt(+(1-c)))*2)}function $o(A,a){A=A|0,a=a|0;var c=0,h=0,g=0,v=0;return g=+N[a>>3],h=+N[A>>3],v=+lt(+((g-h)*.5)),c=+lt(+((+N[a+8>>3]-+N[A+8>>3])*.5)),c=v*v+c*(+Rt(+g)*+Rt(+h)*c),+(+tr(+ +Tt(+c),+ +Tt(+(1-c)))*2*6371.007180918475)}function j0(A,a){A=A|0,a=a|0;var c=0,h=0,g=0,v=0;return g=+N[a>>3],h=+N[A>>3],v=+lt(+((g-h)*.5)),c=+lt(+((+N[a+8>>3]-+N[A+8>>3])*.5)),c=v*v+c*(+Rt(+g)*+Rt(+h)*c),+(+tr(+ +Tt(+c),+ +Tt(+(1-c)))*2*6371.007180918475*1e3)}function G0(A,a){A=A|0,a=a|0;var c=0,h=0,g=0,v=0,y=0;return v=+N[a>>3],h=+Rt(+v),g=+N[a+8>>3]-+N[A+8>>3],y=h*+lt(+g),c=+N[A>>3],+ +tr(+y,+(+lt(+v)*+Rt(+c)-+Rt(+g)*(h*+lt(+c))))}function H0(A,a,c,h){A=A|0,a=+a,c=+c,h=h|0;var g=0,v=0,y=0,b=0;if(c<1e-16){u[h>>2]=u[A>>2],u[h+4>>2]=u[A+4>>2],u[h+8>>2]=u[A+8>>2],u[h+12>>2]=u[A+12>>2];return}v=a<0?a+6.283185307179586:a,v=a>=6.283185307179586?v+-6.283185307179586:v;do if(v<1e-16)a=+N[A>>3]+c,N[h>>3]=a,g=h;else{if(g=+Et(+(v+-3.141592653589793))<1e-16,a=+N[A>>3],g){a=a-c,N[h>>3]=a,g=h;break}if(y=+Rt(+c),c=+lt(+c),a=y*+lt(+a)+ +Rt(+v)*(c*+Rt(+a)),a=a>1?1:a,a=+hs(+(a<-1?-1:a)),N[h>>3]=a,+Et(+(a+-1.5707963267948966))<1e-16){N[h>>3]=1.5707963267948966,N[h+8>>3]=0;return}if(+Et(+(a+1.5707963267948966))<1e-16){N[h>>3]=-1.5707963267948966,N[h+8>>3]=0;return}if(b=+Rt(+a),v=c*+lt(+v)/b,c=+N[A>>3],a=(y-+lt(+a)*+lt(+c))/+Rt(+c)/b,y=v>1?1:v,a=a>1?1:a,a=+N[A+8>>3]+ +tr(+(y<-1?-1:y),+(a<-1?-1:a)),a>3.141592653589793)do a=a+-6.283185307179586;while(a>3.141592653589793);if(a<-3.141592653589793)do a=a+6.283185307179586;while(a<-3.141592653589793);N[h+8>>3]=a;return}while(!1);if(+Et(+(a+-1.5707963267948966))<1e-16){N[g>>3]=1.5707963267948966,N[h+8>>3]=0;return}if(+Et(+(a+1.5707963267948966))<1e-16){N[g>>3]=-1.5707963267948966,N[h+8>>3]=0;return}if(a=+N[A+8>>3],a>3.141592653589793)do a=a+-6.283185307179586;while(a>3.141592653589793);if(a<-3.141592653589793)do a=a+6.283185307179586;while(a<-3.141592653589793);N[h+8>>3]=a}function W0(A,a){return A=A|0,a=a|0,A>>>0>15?(a=4,a|0):(N[a>>3]=+N[20528+(A<<3)>>3],a=0,a|0)}function Br(A,a){return A=A|0,a=a|0,A>>>0>15?(a=4,a|0):(N[a>>3]=+N[20656+(A<<3)>>3],a=0,a|0)}function Xo(A,a){return A=A|0,a=a|0,A>>>0>15?(a=4,a|0):(N[a>>3]=+N[20784+(A<<3)>>3],a=0,a|0)}function oc(A,a){return A=A|0,a=a|0,A>>>0>15?(a=4,a|0):(N[a>>3]=+N[20912+(A<<3)>>3],a=0,a|0)}function qa(A,a){A=A|0,a=a|0;var c=0;return A>>>0>15?(a=4,a|0):(c=wi(7,0,A,((A|0)<0)<<31>>31)|0,c=Vn(c|0,V()|0,120,0)|0,A=V()|0,u[a>>2]=c|2,u[a+4>>2]=A,a=0,a|0)}function _l(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0,y=0,b=0,S=0,L=0,k=0,z=0,Y=0;return Y=+N[a>>3],k=+N[A>>3],S=+lt(+((Y-k)*.5)),v=+N[a+8>>3],L=+N[A+8>>3],y=+lt(+((v-L)*.5)),b=+Rt(+k),z=+Rt(+Y),y=S*S+y*(z*b*y),y=+tr(+ +Tt(+y),+ +Tt(+(1-y)))*2,S=+N[c>>3],Y=+lt(+((S-Y)*.5)),h=+N[c+8>>3],v=+lt(+((h-v)*.5)),g=+Rt(+S),v=Y*Y+v*(z*g*v),v=+tr(+ +Tt(+v),+ +Tt(+(1-v)))*2,S=+lt(+((k-S)*.5)),h=+lt(+((L-h)*.5)),h=S*S+h*(b*g*h),h=+tr(+ +Tt(+h),+ +Tt(+(1-h)))*2,g=(y+v+h)*.5,+(+Fi(+ +Tt(+(+bn(+(g*.5))*+bn(+((g-y)*.5))*+bn(+((g-v)*.5))*+bn(+((g-h)*.5)))))*4)}function Ka(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0,y=0,b=0;if(b=F,F=F+192|0,v=b+168|0,y=b,g=qs(A,a,v)|0,g|0)return c=g,F=b,c|0;if(Ks(A,a,y)|0&&Ze(23313,22742,386,22751),a=u[y>>2]|0,(a|0)>0){if(h=+_l(y+8|0,y+8+(((a|0)!=1&1)<<4)|0,v)+0,(a|0)!=1){A=1;do g=A,A=A+1|0,h=h+ +_l(y+8+(g<<4)|0,y+8+(((A|0)%(a|0)|0)<<4)|0,v);while((A|0)<(a|0))}}else h=0;return N[c>>3]=h,c=0,F=b,c|0}function wl(A,a,c){return A=A|0,a=a|0,c=c|0,A=Ka(A,a,c)|0,A|0||(N[c>>3]=+N[c>>3]*6371.007180918475*6371.007180918475),A|0}function Q0(A,a,c){return A=A|0,a=a|0,c=c|0,A=Ka(A,a,c)|0,A|0||(N[c>>3]=+N[c>>3]*6371.007180918475*6371.007180918475*1e3*1e3),A|0}function Y0(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0,y=0,b=0,S=0,L=0,k=0;if(b=F,F=F+176|0,y=b,A=$s(A,a,y)|0,A|0)return y=A,F=b,y|0;if(N[c>>3]=0,A=u[y>>2]|0,(A|0)<=1)return y=0,F=b,y|0;a=A+-1|0,A=0,h=+N[y+8>>3],g=+N[y+16>>3],v=0;do A=A+1|0,L=h,h=+N[y+8+(A<<4)>>3],k=+lt(+((h-L)*.5)),S=g,g=+N[y+8+(A<<4)+8>>3],S=+lt(+((g-S)*.5)),S=k*k+S*(+Rt(+h)*+Rt(+L)*S),v=v+ +tr(+ +Tt(+S),+ +Tt(+(1-S)))*2;while((A|0)<(a|0));return N[c>>3]=v,y=0,F=b,y|0}function no(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0,y=0,b=0,S=0,L=0,k=0;if(b=F,F=F+176|0,y=b,A=$s(A,a,y)|0,A|0)return y=A,v=+N[c>>3],v=v*6371.007180918475,N[c>>3]=v,F=b,y|0;if(N[c>>3]=0,A=u[y>>2]|0,(A|0)<=1)return y=0,v=0,v=v*6371.007180918475,N[c>>3]=v,F=b,y|0;a=A+-1|0,A=0,h=+N[y+8>>3],g=+N[y+16>>3],v=0;do A=A+1|0,L=h,h=+N[y+8+(A<<4)>>3],k=+lt(+((h-L)*.5)),S=g,g=+N[y+8+(A<<4)+8>>3],S=+lt(+((g-S)*.5)),S=k*k+S*(+Rt(+L)*+Rt(+h)*S),v=v+ +tr(+ +Tt(+S),+ +Tt(+(1-S)))*2;while((A|0)!=(a|0));return N[c>>3]=v,y=0,k=v,k=k*6371.007180918475,N[c>>3]=k,F=b,y|0}function bl(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0,y=0,b=0,S=0,L=0,k=0;if(b=F,F=F+176|0,y=b,A=$s(A,a,y)|0,A|0)return y=A,v=+N[c>>3],v=v*6371.007180918475,v=v*1e3,N[c>>3]=v,F=b,y|0;if(N[c>>3]=0,A=u[y>>2]|0,(A|0)<=1)return y=0,v=0,v=v*6371.007180918475,v=v*1e3,N[c>>3]=v,F=b,y|0;a=A+-1|0,A=0,h=+N[y+8>>3],g=+N[y+16>>3],v=0;do A=A+1|0,L=h,h=+N[y+8+(A<<4)>>3],k=+lt(+((h-L)*.5)),S=g,g=+N[y+8+(A<<4)+8>>3],S=+lt(+((g-S)*.5)),S=k*k+S*(+Rt(+L)*+Rt(+h)*S),v=v+ +tr(+ +Tt(+S),+ +Tt(+(1-S)))*2;while((A|0)!=(a|0));return N[c>>3]=v,y=0,k=v,k=k*6371.007180918475,k=k*1e3,N[c>>3]=k,F=b,y|0}function Zo(A){A=A|0;var a=0,c=0,h=0;return a=Ur(1,12)|0,a||Ze(22832,22787,49,22845),c=A+4|0,h=u[c>>2]|0,h|0?(h=h+8|0,u[h>>2]=a,u[c>>2]=a,a|0):(u[A>>2]|0&&Ze(22862,22787,61,22885),h=A,u[h>>2]=a,u[c>>2]=a,a|0)}function El(A,a){A=A|0,a=a|0;var c=0,h=0;return h=Sr(24)|0,h||Ze(22899,22787,78,22913),u[h>>2]=u[a>>2],u[h+4>>2]=u[a+4>>2],u[h+8>>2]=u[a+8>>2],u[h+12>>2]=u[a+12>>2],u[h+16>>2]=0,a=A+4|0,c=u[a>>2]|0,c|0?(u[c+16>>2]=h,u[a>>2]=h,h|0):(u[A>>2]|0&&Ze(22928,22787,82,22913),u[A>>2]=h,u[a>>2]=h,h|0)}function Tl(A){A=A|0;var a=0,c=0,h=0,g=0;if(A)for(h=1;;){if(a=u[A>>2]|0,a|0)do{if(c=u[a>>2]|0,c|0)do g=c,c=u[c+16>>2]|0,ot(g);while((c|0)!=0);g=a,a=u[a+8>>2]|0,ot(g)}while((a|0)!=0);if(a=A,A=u[A+8>>2]|0,h||ot(a),A)h=0;else break}}function Ja(A){A=A|0;var a=0,c=0,h=0,g=0,v=0,y=0,b=0,S=0,L=0,k=0,z=0,Y=0,Z=0,H=0,re=0,de=0,he=0,se=0,oe=0,ne=0,Ie=0,Ne=0,Pe=0,Fe=0,Bt=0,Pt=0,dt=0,st=0,Ge=0,At=0,Vt=0,ft=0;if(g=A+8|0,u[g>>2]|0)return ft=1,ft|0;if(h=u[A>>2]|0,!h)return ft=0,ft|0;a=h,c=0;do c=c+1|0,a=u[a+8>>2]|0;while((a|0)!=0);if(c>>>0<2)return ft=0,ft|0;At=Sr(c<<2)|0,At||Ze(22948,22787,317,22967),Ge=Sr(c<<5)|0,Ge||Ze(22989,22787,321,22967),u[A>>2]=0,Ne=A+4|0,u[Ne>>2]=0,u[g>>2]=0,c=0,st=0,Ie=0,z=0;e:for(;;){if(k=u[h>>2]|0,k){v=0,y=k;do{if(S=+N[y+8>>3],a=y,y=u[y+16>>2]|0,L=(y|0)==0,g=L?k:y,b=+N[g+8>>3],+Et(+(S-b))>3.141592653589793){ft=14;break}v=v+(b-S)*(+N[a>>3]+ +N[g>>3])}while(!L);if((ft|0)==14){ft=0,v=0,a=k;do ne=+N[a+8>>3],dt=a+16|0,Pt=u[dt>>2]|0,Pt=(Pt|0)==0?k:Pt,oe=+N[Pt+8>>3],v=v+(+N[a>>3]+ +N[Pt>>3])*((oe<0?oe+6.283185307179586:oe)-(ne<0?ne+6.283185307179586:ne)),a=u[((a|0)==0?h:dt)>>2]|0;while((a|0)!=0)}v>0?(u[At+(st<<2)>>2]=h,st=st+1|0,g=Ie,a=z):ft=19}else ft=19;if((ft|0)==19){ft=0;do if(c){if(a=c+8|0,u[a>>2]|0){ft=21;break e}if(c=Ur(1,12)|0,!c){ft=23;break e}u[a>>2]=c,g=c+4|0,y=c,a=z}else if(z){g=Ne,y=z+8|0,a=h,c=A;break}else if(u[A>>2]|0){ft=27;break e}else{g=Ne,y=A,a=h,c=A;break}while(!1);if(u[y>>2]=h,u[g>>2]=h,y=Ge+(Ie<<5)|0,L=u[h>>2]|0,L){for(k=Ge+(Ie<<5)+8|0,N[k>>3]=17976931348623157e292,z=Ge+(Ie<<5)+24|0,N[z>>3]=17976931348623157e292,N[y>>3]=-17976931348623157e292,Y=Ge+(Ie<<5)+16|0,N[Y>>3]=-17976931348623157e292,he=17976931348623157e292,se=-17976931348623157e292,g=0,Z=L,S=17976931348623157e292,re=17976931348623157e292,de=-17976931348623157e292,b=-17976931348623157e292;v=+N[Z>>3],ne=+N[Z+8>>3],Z=u[Z+16>>2]|0,H=(Z|0)==0,oe=+N[(H?L:Z)+8>>3],v<S&&(N[k>>3]=v,S=v),ne<re&&(N[z>>3]=ne,re=ne),v>de?N[y>>3]=v:v=de,ne>b&&(N[Y>>3]=ne,b=ne),he=ne>0&ne<he?ne:he,se=ne<0&ne>se?ne:se,g=g|+Et(+(ne-oe))>3.141592653589793,!H;)de=v;g&&(N[Y>>3]=se,N[z>>3]=he)}else u[y>>2]=0,u[y+4>>2]=0,u[y+8>>2]=0,u[y+12>>2]=0,u[y+16>>2]=0,u[y+20>>2]=0,u[y+24>>2]=0,u[y+28>>2]=0;g=Ie+1|0}if(dt=h+8|0,h=u[dt>>2]|0,u[dt>>2]=0,h)Ie=g,z=a;else{ft=45;break}}if((ft|0)==21)Ze(22765,22787,35,22799);else if((ft|0)==23)Ze(22819,22787,37,22799);else if((ft|0)==27)Ze(22862,22787,61,22885);else if((ft|0)==45){e:do if((st|0)>0){for(dt=(g|0)==0,Bt=g<<2,Pt=(A|0)==0,Fe=0,a=0;;){if(Pe=u[At+(Fe<<2)>>2]|0,dt)ft=73;else{if(Ie=Sr(Bt)|0,!Ie){ft=50;break}if(Ne=Sr(Bt)|0,!Ne){ft=52;break}t:do if(Pt)c=0;else{for(g=0,c=0,y=A;h=Ge+(g<<5)|0,ys(u[y>>2]|0,h,u[Pe>>2]|0)|0?(u[Ie+(c<<2)>>2]=y,u[Ne+(c<<2)>>2]=h,H=c+1|0):H=c,y=u[y+8>>2]|0,y;)g=g+1|0,c=H;if((H|0)>0)if(h=u[Ie>>2]|0,(H|0)==1)c=h;else for(Y=0,Z=-1,c=h,z=h;;){for(L=u[z>>2]|0,h=0,y=0;g=u[u[Ie+(y<<2)>>2]>>2]|0,(g|0)==(L|0)?k=h:k=h+((ys(g,u[Ne+(y<<2)>>2]|0,u[L>>2]|0)|0)&1)|0,y=y+1|0,(y|0)!=(H|0);)h=k;if(g=(k|0)>(Z|0),c=g?z:c,h=Y+1|0,(h|0)==(H|0))break t;Y=h,Z=g?k:Z,z=u[Ie+(h<<2)>>2]|0}else c=0}while(!1);if(ot(Ie),ot(Ne),c){if(g=c+4|0,h=u[g>>2]|0,h)c=h+8|0;else if(u[c>>2]|0){ft=70;break}u[c>>2]=Pe,u[g>>2]=Pe}else ft=73}if((ft|0)==73){if(ft=0,a=u[Pe>>2]|0,a|0)do Ne=a,a=u[a+16>>2]|0,ot(Ne);while((a|0)!=0);ot(Pe),a=1}if(Fe=Fe+1|0,(Fe|0)>=(st|0)){Vt=a;break e}}(ft|0)==50?Ze(23004,22787,249,23023):(ft|0)==52?Ze(23042,22787,252,23023):(ft|0)==70&&Ze(22862,22787,61,22885)}else Vt=0;while(!1);return ot(At),ot(Ge),ft=Vt,ft|0}return 0}function ys(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0,y=0,b=0,S=0,L=0,k=0;if(!(Ys(a,c)|0)||(a=ul(a)|0,h=+N[c>>3],g=+N[c+8>>3],g=a&g<0?g+6.283185307179586:g,A=u[A>>2]|0,!A))return A=0,A|0;if(a){a=0,L=g,c=A;e:for(;;){for(;y=+N[c>>3],g=+N[c+8>>3],c=c+16|0,k=u[c>>2]|0,k=(k|0)==0?A:k,v=+N[k>>3],b=+N[k+8>>3],y>v?(S=y,y=b):(S=v,v=y,y=g,g=b),h=h==v|h==S?h+2220446049250313e-31:h,!!(h<v|h>S);)if(c=u[c>>2]|0,!c){c=22;break e}if(b=y<0?y+6.283185307179586:y,y=g<0?g+6.283185307179586:g,L=b==L|y==L?L+-2220446049250313e-31:L,S=b+(y-b)*((h-v)/(S-v)),(S<0?S+6.283185307179586:S)>L&&(a=a^1),c=u[c>>2]|0,!c){c=22;break}}if((c|0)==22)return a|0}else{a=0,L=g,c=A;e:for(;;){for(;y=+N[c>>3],g=+N[c+8>>3],c=c+16|0,k=u[c>>2]|0,k=(k|0)==0?A:k,v=+N[k>>3],b=+N[k+8>>3],y>v?(S=y,y=b):(S=v,v=y,y=g,g=b),h=h==v|h==S?h+2220446049250313e-31:h,!!(h<v|h>S);)if(c=u[c>>2]|0,!c){c=22;break e}if(L=y==L|g==L?L+-2220446049250313e-31:L,y+(g-y)*((h-v)/(S-v))>L&&(a=a^1),c=u[c>>2]|0,!c){c=22;break}}if((c|0)==22)return a|0}return 0}function Nr(A,a,c,h,g){A=A|0,a=a|0,c=c|0,h=h|0,g=g|0;var v=0,y=0,b=0,S=0,L=0,k=0,z=0,Y=0,Z=0,H=0,re=0,de=0,he=0,se=0;if(se=F,F=F+32|0,he=se+16|0,de=se,v=_e(A|0,a|0,52)|0,V()|0,v=v&15,Z=_e(c|0,h|0,52)|0,V()|0,(v|0)!=(Z&15|0))return he=12,F=se,he|0;if(L=_e(A|0,a|0,45)|0,V()|0,L=L&127,k=_e(c|0,h|0,45)|0,V()|0,k=k&127,L>>>0>121|k>>>0>121)return he=5,F=se,he|0;if(Z=(L|0)!=(k|0),Z){if(b=ms(L,k)|0,(b|0)==7)return he=1,F=se,he|0;S=ms(k,L)|0,(S|0)==7?Ze(23066,23090,161,23100):(H=b,y=S)}else H=0,y=0;z=$e(L)|0,Y=$e(k)|0,u[he>>2]=0,u[he+4>>2]=0,u[he+8>>2]=0,u[he+12>>2]=0;do if(H){if(k=u[4272+(L*28|0)+(H<<2)>>2]|0,b=(k|0)>0,Y)if(b){L=0,S=c,b=h;do S=tc(S,b)|0,b=V()|0,y=Fr(y)|0,(y|0)==1&&(y=Fr(1)|0),L=L+1|0;while((L|0)!=(k|0));k=y,L=S,S=b}else k=y,L=c,S=h;else if(b){L=0,S=c,b=h;do S=$a(S,b)|0,b=V()|0,y=Fr(y)|0,L=L+1|0;while((L|0)!=(k|0));k=y,L=S,S=b}else k=y,L=c,S=h;if(yl(L,S,he)|0,Z||Ze(23115,23090,191,23100),b=(z|0)!=0,y=(Y|0)!=0,b&y&&Ze(23142,23090,192,23100),b){if(y=sr(A,a)|0,(y|0)==7){v=5;break}if(rt[21872+(y*7|0)+H>>0]|0){v=1;break}S=u[21040+(y*28|0)+(H<<2)>>2]|0,L=S}else if(y){if(y=sr(L,S)|0,(y|0)==7){v=5;break}if(rt[21872+(y*7|0)+k>>0]|0){v=1;break}L=0,S=u[21040+(k*28|0)+(y<<2)>>2]|0}else L=0,S=0;if((L|S|0)<0)v=5;else{if((S|0)>0){b=he+4|0,y=0;do jo(b),y=y+1|0;while((y|0)!=(S|0))}if(u[de>>2]=0,u[de+4>>2]=0,u[de+8>>2]=0,Va(de,H),v|0)for(;Ln(v)|0?zo(de):rr(de),(v|0)>1;)v=v+-1|0;if((L|0)>0){v=0;do jo(de),v=v+1|0;while((v|0)!=(L|0))}re=he+4|0,Tn(re,de,re),zn(re),re=51}}else if(yl(c,h,he)|0,(z|0)!=0&(Y|0)!=0)if((k|0)!=(L|0)&&Ze(23173,23090,261,23100),y=sr(A,a)|0,v=sr(c,h)|0,(y|0)==7|(v|0)==7)v=5;else if(rt[21872+(y*7|0)+v>>0]|0)v=1;else if(y=u[21040+(y*28|0)+(v<<2)>>2]|0,(y|0)>0){b=he+4|0,v=0;do jo(b),v=v+1|0;while((v|0)!=(y|0));re=51}else re=51;else re=51;while(!1);return(re|0)==51&&(v=he+4|0,u[g>>2]=u[v>>2],u[g+4>>2]=u[v+4>>2],u[g+8>>2]=u[v+8>>2],v=0),he=v,F=se,he|0}function xl(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var g=0,v=0,y=0,b=0,S=0,L=0,k=0,z=0,Y=0,Z=0,H=0,re=0,de=0,he=0,se=0,oe=0;if(re=F,F=F+48|0,L=re+36|0,y=re+24|0,b=re+12|0,S=re,g=_e(A|0,a|0,52)|0,V()|0,g=g&15,Y=_e(A|0,a|0,45)|0,V()|0,Y=Y&127,Y>>>0>121)return h=5,F=re,h|0;if(k=$e(Y)|0,Oe(g|0,0,52)|0,de=V()|0|134225919,v=h,u[v>>2]=-1,u[v+4>>2]=de,!g)return g=Na(c)|0,(g|0)==7||(g=ps(Y,g)|0,(g|0)==127)?(de=1,F=re,de|0):(Z=Oe(g|0,0,45)|0,H=V()|0,Y=h,H=u[Y+4>>2]&-1040385|H,de=h,u[de>>2]=u[Y>>2]|Z,u[de+4>>2]=H,de=0,F=re,de|0);for(u[L>>2]=u[c>>2],u[L+4>>2]=u[c+4>>2],u[L+8>>2]=u[c+8>>2],c=g;;){if(v=c,c=c+-1|0,u[y>>2]=u[L>>2],u[y+4>>2]=u[L+4>>2],u[y+8>>2]=u[L+8>>2],Ln(v)|0){if(g=x0(L)|0,g|0){c=13;break}u[b>>2]=u[L>>2],u[b+4>>2]=u[L+4>>2],u[b+8>>2]=u[L+8>>2],zo(b)}else{if(g=cl(L)|0,g|0){c=13;break}u[b>>2]=u[L>>2],u[b+4>>2]=u[L+4>>2],u[b+8>>2]=u[L+8>>2],rr(b)}if(ji(y,b,S),zn(S),g=h,se=u[g>>2]|0,g=u[g+4>>2]|0,oe=(15-v|0)*3|0,he=Oe(7,0,oe|0)|0,g=g&~(V()|0),oe=Oe(Na(S)|0,0,oe|0)|0,g=V()|0|g,de=h,u[de>>2]=oe|se&~he,u[de+4>>2]=g,(v|0)<=1){c=14;break}}e:do if((c|0)!=13&&(c|0)==14)if((u[L>>2]|0)<=1&&(u[L+4>>2]|0)<=1&&(u[L+8>>2]|0)<=1){c=Na(L)|0,g=ps(Y,c)|0,(g|0)==127?S=0:S=$e(g)|0;t:do if(c){if(k){if(g=sr(A,a)|0,(g|0)==7){g=5;break e}if(v=u[21248+(g*28|0)+(c<<2)>>2]|0,(v|0)>0){g=c,c=0;do g=ni(g)|0,c=c+1|0;while((c|0)!=(v|0))}else g=c;if((g|0)==1){g=9;break e}c=ps(Y,g)|0,(c|0)==127&&Ze(23200,23090,411,23230),$e(c)|0?Ze(23245,23090,412,23230):(H=c,Z=v,z=g)}else H=g,Z=0,z=c;if(b=u[4272+(Y*28|0)+(z<<2)>>2]|0,(b|0)<=-1&&Ze(23276,23090,419,23230),!S){if((Z|0)<0){g=5;break e}if(Z|0){v=h,g=0,c=u[v>>2]|0,v=u[v+4>>2]|0;do c=Hi(c,v)|0,v=V()|0,oe=h,u[oe>>2]=c,u[oe+4>>2]=v,g=g+1|0;while((g|0)<(Z|0))}if((b|0)<=0){g=H,c=58;break}for(v=h,g=0,c=u[v>>2]|0,v=u[v+4>>2]|0;;)if(c=Hi(c,v)|0,v=V()|0,oe=h,u[oe>>2]=c,u[oe+4>>2]=v,g=g+1|0,(g|0)==(b|0)){g=H,c=58;break t}}if(y=ms(H,Y)|0,(y|0)==7&&Ze(23066,23090,428,23230),g=h,c=u[g>>2]|0,g=u[g+4>>2]|0,(b|0)>0){v=0;do c=Hi(c,g)|0,g=V()|0,oe=h,u[oe>>2]=c,u[oe+4>>2]=g,v=v+1|0;while((v|0)!=(b|0))}if(g=sr(c,g)|0,(g|0)==7&&Ze(23313,23090,440,23230),c=on(H)|0,c=u[(c?21664:21456)+(y*28|0)+(g<<2)>>2]|0,(c|0)<0&&Ze(23313,23090,454,23230),!c)g=H,c=58;else{y=h,g=0,v=u[y>>2]|0,y=u[y+4>>2]|0;do v=Ya(v,y)|0,y=V()|0,oe=h,u[oe>>2]=v,u[oe+4>>2]=y,g=g+1|0;while((g|0)<(c|0));g=H,c=58}}else if((k|0)!=0&(S|0)!=0){if(c=sr(A,a)|0,v=h,v=sr(u[v>>2]|0,u[v+4>>2]|0)|0,(c|0)==7|(v|0)==7){g=5;break e}if(v=u[21248+(c*28|0)+(v<<2)>>2]|0,(v|0)<0){g=5;break e}if(!v)c=59;else{b=h,c=0,y=u[b>>2]|0,b=u[b+4>>2]|0;do y=Hi(y,b)|0,b=V()|0,oe=h,u[oe>>2]=y,u[oe+4>>2]=b,c=c+1|0;while((c|0)<(v|0));c=58}}else c=58;while(!1);if((c|0)==58&&S&&(c=59),(c|0)==59&&(oe=h,(sr(u[oe>>2]|0,u[oe+4>>2]|0)|0)==1)){g=9;break}oe=h,he=u[oe>>2]|0,oe=u[oe+4>>2]&-1040385,se=Oe(g|0,0,45)|0,oe=oe|(V()|0),g=h,u[g>>2]=he|se,u[g+4>>2]=oe,g=0}else g=1;while(!1);return oe=g,F=re,oe|0}function eA(A,a,c,h,g,v){A=A|0,a=a|0,c=c|0,h=h|0,g=g|0,v=v|0;var y=0,b=0;return b=F,F=F+16|0,y=b,g?A=15:(A=Nr(A,a,c,h,y)|0,A||(hl(y,v),A=0)),F=b,A|0}function ac(A,a,c,h,g){A=A|0,a=a|0,c=c|0,h=h|0,g=g|0;var v=0,y=0;return y=F,F=F+16|0,v=y,h?c=15:(c=Go(c,v)|0,c||(c=xl(A,a,v,g)|0)),F=y,c|0}function Ac(A,a,c,h,g){A=A|0,a=a|0,c=c|0,h=h|0,g=g|0;var v=0,y=0,b=0,S=0;return S=F,F=F+32|0,y=S+12|0,b=S,v=Nr(A,a,A,a,y)|0,v|0?(b=v,F=S,b|0):(A=Nr(A,a,c,h,b)|0,A|0?(b=A,F=S,b|0):(y=Gi(y,b)|0,b=g,u[b>>2]=y,u[b+4>>2]=((y|0)<0)<<31>>31,b=0,F=S,b|0))}function lc(A,a,c,h,g){A=A|0,a=a|0,c=c|0,h=h|0,g=g|0;var v=0,y=0,b=0,S=0;return S=F,F=F+32|0,y=S+12|0,b=S,v=Nr(A,a,A,a,y)|0,!v&&(v=Nr(A,a,c,h,b)|0,!v)?(h=Gi(y,b)|0,h=bt(h|0,((h|0)<0)<<31>>31|0,1,0)|0,y=V()|0,b=g,u[b>>2]=h,u[b+4>>2]=y,b=0,F=S,b|0):(b=v,F=S,b|0)}function uc(A,a,c,h,g){A=A|0,a=a|0,c=c|0,h=h|0,g=g|0;var v=0,y=0,b=0,S=0,L=0,k=0,z=0,Y=0,Z=0,H=0,re=0,de=0,he=0,se=0,oe=0,ne=0,Ie=0,Ne=0,Pe=0,Fe=0;if(Pe=F,F=F+48|0,y=Pe+24|0,b=Pe+12|0,Ne=Pe,v=Nr(A,a,A,a,y)|0,!v&&(v=Nr(A,a,c,h,b)|0,!v)){ne=Gi(y,b)|0,Ie=((ne|0)<0)<<31>>31,u[y>>2]=0,u[y+4>>2]=0,u[y+8>>2]=0,u[b>>2]=0,u[b+4>>2]=0,u[b+8>>2]=0,Nr(A,a,A,a,y)|0&&Ze(23313,23090,691,23299),Nr(A,a,c,h,b)|0&&Ze(23313,23090,696,23299),qu(y),qu(b),ne?(z=u[y>>2]|0,H=+(ne|0),he=y+4|0,Y=u[he>>2]|0,se=y+8|0,Z=u[se>>2]|0,oe=y,h=z,v=Y,c=Z,re=+((u[b>>2]|0)-z|0)/H,de=+((u[b+4>>2]|0)-Y|0)/H,H=+((u[b+8>>2]|0)-Z|0)/H):(v=y+4|0,c=y+8|0,he=v,se=c,oe=y,h=u[y>>2]|0,v=u[v>>2]|0,c=u[c>>2]|0,re=0,de=0,H=0),u[Ne>>2]=h,Z=Ne+4|0,u[Z>>2]=v,Y=Ne+8|0,u[Y>>2]=c;e:do if((ne|0)<0)v=0;else for(k=0,z=0,v=h;;){L=+(z>>>0)+4294967296*+(k|0),Fe=re*L+ +(v|0),S=de*L+ +(u[he>>2]|0),L=H*L+ +(u[se>>2]|0),c=~~+Yt(+Fe),y=~~+Yt(+S),v=~~+Yt(+L),Fe=+Et(+(+(c|0)-Fe)),S=+Et(+(+(y|0)-S)),L=+Et(+(+(v|0)-L));do if(Fe>S&Fe>L)c=0-(y+v)|0,h=y;else if(b=0-c|0,S>L){h=b-v|0;break}else{h=y,v=b-y|0;break}while(!1);if(u[Ne>>2]=c,u[Z>>2]=h,u[Y>>2]=v,dl(Ne),v=xl(A,a,Ne,g+(z<<3)|0)|0,v|0)break e;if(!((k|0)<(Ie|0)|(k|0)==(Ie|0)&z>>>0<ne>>>0)){v=0;break e}v=bt(z|0,k|0,1,0)|0,b=V()|0,k=b,z=v,v=u[oe>>2]|0}while(!1);return Ne=v,F=Pe,Ne|0}return Ne=v,F=Pe,Ne|0}function wi(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var g=0,v=0,y=0;if((c|0)==0&(h|0)==0)return g=0,v=1,it(g|0),v|0;v=A,g=a,A=1,a=0;do y=(c&1|0)==0&!0,A=Vn((y?1:v)|0,(y?0:g)|0,A|0,a|0)|0,a=V()|0,c=_s(c|0,h|0,1)|0,h=V()|0,v=Vn(v|0,g|0,v|0,g|0)|0,g=V()|0;while(!((c|0)==0&(h|0)==0));return it(a|0),A|0}function Sl(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0,y=0,b=0,S=0,L=0,k=0,z=0,Y=0;if(!(Ys(a,c)|0)||(a=ul(a)|0,h=+N[c>>3],g=+N[c+8>>3],g=a&g<0?g+6.283185307179586:g,Y=u[A>>2]|0,(Y|0)<=0))return Y=0,Y|0;if(z=u[A+4>>2]|0,a){a=0,k=g,c=-1,A=0;e:for(;;){for(L=A;y=+N[z+(L<<4)>>3],g=+N[z+(L<<4)+8>>3],A=(c+2|0)%(Y|0)|0,v=+N[z+(A<<4)>>3],b=+N[z+(A<<4)+8>>3],y>v?(S=y,y=b):(S=v,v=y,y=g,g=b),h=h==v|h==S?h+2220446049250313e-31:h,!!(h<v|h>S);)if(c=L+1|0,(c|0)>=(Y|0)){c=22;break e}else A=L,L=c,c=A;if(b=y<0?y+6.283185307179586:y,y=g<0?g+6.283185307179586:g,k=b==k|y==k?k+-2220446049250313e-31:k,S=b+(y-b)*((h-v)/(S-v)),(S<0?S+6.283185307179586:S)>k&&(a=a^1),A=L+1|0,(A|0)>=(Y|0)){c=22;break}else c=L}if((c|0)==22)return a|0}else{a=0,k=g,c=-1,A=0;e:for(;;){for(L=A;y=+N[z+(L<<4)>>3],g=+N[z+(L<<4)+8>>3],A=(c+2|0)%(Y|0)|0,v=+N[z+(A<<4)>>3],b=+N[z+(A<<4)+8>>3],y>v?(S=y,y=b):(S=v,v=y,y=g,g=b),h=h==v|h==S?h+2220446049250313e-31:h,!!(h<v|h>S);)if(c=L+1|0,(c|0)>=(Y|0)){c=22;break e}else A=L,L=c,c=A;if(k=y==k|g==k?k+-2220446049250313e-31:k,y+(g-y)*((h-v)/(S-v))>k&&(a=a^1),A=L+1|0,(A|0)>=(Y|0)){c=22;break}else c=L}if((c|0)==22)return a|0}return 0}function bi(A,a){A=A|0,a=a|0;var c=0,h=0,g=0,v=0,y=0,b=0,S=0,L=0,k=0,z=0,Y=0,Z=0,H=0,re=0,de=0,he=0,se=0;if(H=u[A>>2]|0,!H){u[a>>2]=0,u[a+4>>2]=0,u[a+8>>2]=0,u[a+12>>2]=0,u[a+16>>2]=0,u[a+20>>2]=0,u[a+24>>2]=0,u[a+28>>2]=0;return}if(re=a+8|0,N[re>>3]=17976931348623157e292,de=a+24|0,N[de>>3]=17976931348623157e292,N[a>>3]=-17976931348623157e292,he=a+16|0,N[he>>3]=-17976931348623157e292,!((H|0)<=0)){for(Y=u[A+4>>2]|0,L=17976931348623157e292,k=-17976931348623157e292,z=0,A=-1,v=17976931348623157e292,y=17976931348623157e292,S=-17976931348623157e292,h=-17976931348623157e292,Z=0;c=+N[Y+(Z<<4)>>3],b=+N[Y+(Z<<4)+8>>3],A=A+2|0,g=+N[Y+(((A|0)==(H|0)?0:A)<<4)+8>>3],c<v&&(N[re>>3]=c,v=c),b<y&&(N[de>>3]=b,y=b),c>S?N[a>>3]=c:c=S,b>h&&(N[he>>3]=b,h=b),L=b>0&b<L?b:L,k=b<0&b>k?b:k,z=z|+Et(+(b-g))>3.141592653589793,A=Z+1|0,(A|0)!=(H|0);)se=Z,S=c,Z=A,A=se;z&&(N[he>>3]=k,N[de>>3]=L)}}function Cl(A,a){A=A|0,a=a|0;var c=0,h=0,g=0,v=0,y=0,b=0,S=0,L=0,k=0,z=0,Y=0,Z=0,H=0,re=0,de=0,he=0,se=0,oe=0,ne=0,Ie=0,Ne=0,Pe=0;if(H=u[A>>2]|0,H){if(re=a+8|0,N[re>>3]=17976931348623157e292,de=a+24|0,N[de>>3]=17976931348623157e292,N[a>>3]=-17976931348623157e292,he=a+16|0,N[he>>3]=-17976931348623157e292,(H|0)>0){for(g=u[A+4>>2]|0,Y=17976931348623157e292,Z=-17976931348623157e292,h=0,c=-1,S=17976931348623157e292,L=17976931348623157e292,z=-17976931348623157e292,y=-17976931348623157e292,se=0;v=+N[g+(se<<4)>>3],k=+N[g+(se<<4)+8>>3],Ne=c+2|0,b=+N[g+(((Ne|0)==(H|0)?0:Ne)<<4)+8>>3],v<S&&(N[re>>3]=v,S=v),k<L&&(N[de>>3]=k,L=k),v>z?N[a>>3]=v:v=z,k>y&&(N[he>>3]=k,y=k),Y=k>0&k<Y?k:Y,Z=k<0&k>Z?k:Z,h=h|+Et(+(k-b))>3.141592653589793,c=se+1|0,(c|0)!=(H|0);)Ne=se,z=v,se=c,c=Ne;h&&(N[he>>3]=Z,N[de>>3]=Y)}}else u[a>>2]=0,u[a+4>>2]=0,u[a+8>>2]=0,u[a+12>>2]=0,u[a+16>>2]=0,u[a+20>>2]=0,u[a+24>>2]=0,u[a+28>>2]=0;if(Ne=A+8|0,c=u[Ne>>2]|0,!((c|0)<=0)){Ie=A+12|0,ne=0;do if(g=u[Ie>>2]|0,h=ne,ne=ne+1|0,de=a+(ne<<5)|0,he=u[g+(h<<3)>>2]|0,he){if(se=a+(ne<<5)+8|0,N[se>>3]=17976931348623157e292,A=a+(ne<<5)+24|0,N[A>>3]=17976931348623157e292,N[de>>3]=-17976931348623157e292,oe=a+(ne<<5)+16|0,N[oe>>3]=-17976931348623157e292,(he|0)>0){for(H=u[g+(h<<3)+4>>2]|0,Y=17976931348623157e292,Z=-17976931348623157e292,g=0,h=-1,re=0,S=17976931348623157e292,L=17976931348623157e292,k=-17976931348623157e292,y=-17976931348623157e292;v=+N[H+(re<<4)>>3],z=+N[H+(re<<4)+8>>3],h=h+2|0,b=+N[H+(((h|0)==(he|0)?0:h)<<4)+8>>3],v<S&&(N[se>>3]=v,S=v),z<L&&(N[A>>3]=z,L=z),v>k?N[de>>3]=v:v=k,z>y&&(N[oe>>3]=z,y=z),Y=z>0&z<Y?z:Y,Z=z<0&z>Z?z:Z,g=g|+Et(+(z-b))>3.141592653589793,h=re+1|0,(h|0)!=(he|0);)Pe=re,re=h,k=v,h=Pe;g&&(N[oe>>3]=Z,N[A>>3]=Y)}}else u[de>>2]=0,u[de+4>>2]=0,u[de+8>>2]=0,u[de+12>>2]=0,u[de+16>>2]=0,u[de+20>>2]=0,u[de+24>>2]=0,u[de+28>>2]=0,c=u[Ne>>2]|0;while((ne|0)<(c|0))}}function Ml(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0;if(!(Sl(A,a,c)|0))return g=0,g|0;if(g=A+8|0,(u[g>>2]|0)<=0)return g=1,g|0;for(h=A+12|0,A=0;;){if(v=A,A=A+1|0,Sl((u[h>>2]|0)+(v<<3)|0,a+(A<<5)|0,c)|0){A=0,h=6;break}if((A|0)>=(u[g>>2]|0)){A=1,h=6;break}}return(h|0)==6?A|0:0}function $0(){return 8}function X0(){return 16}function qo(){return 168}function Z0(){return 8}function cc(){return 16}function fc(){return 12}function en(){return 8}function Ll(A){return A=A|0,+(+((u[A>>2]|0)>>>0)+4294967296*+(u[A+4>>2]|0))}function tA(A){A=A|0;var a=0,c=0;return c=+N[A>>3],a=+N[A+8>>3],+ +Tt(+(c*c+a*a))}function ro(A,a,c,h,g){A=A|0,a=a|0,c=c|0,h=h|0,g=g|0;var v=0,y=0,b=0,S=0,L=0,k=0,z=0,Y=0;L=+N[A>>3],S=+N[a>>3]-L,b=+N[A+8>>3],y=+N[a+8>>3]-b,z=+N[c>>3],v=+N[h>>3]-z,Y=+N[c+8>>3],k=+N[h+8>>3]-Y,v=(v*(b-Y)-(L-z)*k)/(S*k-y*v),N[g>>3]=L+S*v,N[g+8>>3]=b+y*v}function Pl(A,a){return A=A|0,a=a|0,+Et(+(+N[A>>3]-+N[a>>3]))<11920928955078125e-23?(a=+Et(+(+N[A+8>>3]-+N[a+8>>3]))<11920928955078125e-23,a|0):(a=0,a|0)}function un(A,a){A=A|0,a=a|0;var c=0,h=0,g=0;return g=+N[A>>3]-+N[a>>3],h=+N[A+8>>3]-+N[a+8>>3],c=+N[A+16>>3]-+N[a+16>>3],+(g*g+h*h+c*c)}function Ko(A,a){A=A|0,a=a|0;var c=0,h=0,g=0;c=+N[A>>3],h=+Rt(+c),c=+lt(+c),N[a+16>>3]=c,c=+N[A+8>>3],g=h*+Rt(+c),N[a>>3]=g,c=h*+lt(+c),N[a+8>>3]=c}function nA(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0;if(v=F,F=F+16|0,g=v,h=qt(A,a)|0,(c+-1|0)>>>0>5||(h=(h|0)!=0,(c|0)==1&h))return g=-1,F=v,g|0;do if(ri(A,a,g)|0)h=-1;else if(h){h=((u[21936+(c<<2)>>2]|0)+5-(u[g>>2]|0)|0)%5|0;break}else{h=((u[21968+(c<<2)>>2]|0)+6-(u[g>>2]|0)|0)%6|0;break}while(!1);return g=h,F=v,g|0}function ri(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0,y=0,b=0,S=0,L=0;if(L=F,F=F+32|0,y=L+16|0,b=L,h=Zs(A,a,y)|0,h|0)return c=h,F=L,c|0;v=ec(A,a)|0,S=sr(A,a)|0,En(v,b),h=zi(v,u[y>>2]|0)|0;e:do if($e(v)|0){do switch(v|0){case 4:{A=0;break}case 14:{A=1;break}case 24:{A=2;break}case 38:{A=3;break}case 49:{A=4;break}case 58:{A=5;break}case 63:{A=6;break}case 72:{A=7;break}case 83:{A=8;break}case 97:{A=9;break}case 107:{A=10;break}case 117:{A=11;break}default:{h=1;break e}}while(!1);if(g=u[22e3+(A*24|0)+8>>2]|0,a=u[22e3+(A*24|0)+16>>2]|0,A=u[y>>2]|0,(A|0)!=(u[b>>2]|0)&&(b=on(v)|0,A=u[y>>2]|0,b|(A|0)==(a|0)&&(h=(h+1|0)%6|0)),(S|0)==3&(A|0)==(a|0)){h=(h+5|0)%6|0,g=22;break}(S|0)==5&(A|0)==(g|0)&&(h=(h+1|0)%6|0),g=22}else g=22;while(!1);return(g|0)==22&&(u[c>>2]=h,h=0),c=h,F=L,c|0}function mr(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var g=0,v=0,y=0,b=0,S=0,L=0,k=0,z=0,Y=0,Z=0,H=0,re=0,de=0,he=0,se=0,oe=0;if(oe=F,F=F+32|0,se=oe+24|0,de=oe+20|0,H=oe+8|0,Z=oe+16|0,Y=oe,S=(qt(A,a)|0)==0,S=S?6:5,k=_e(A|0,a|0,52)|0,V()|0,k=k&15,S>>>0<=c>>>0)return h=2,F=oe,h|0;z=(k|0)==0,!z&&(re=Oe(7,0,(k^15)*3|0)|0,(re&A|0)==0&((V()|0)&a|0)==0)?g=c:v=4;e:do if((v|0)==4){if(g=(qt(A,a)|0)!=0,((g?4:5)|0)<(c|0)||ri(A,a,se)|0||(v=(u[se>>2]|0)+c|0,g?g=22288+(((v|0)%5|0)<<2)|0:g=22320+(((v|0)%6|0)<<2)|0,re=u[g>>2]|0,(re|0)==7))return h=1,F=oe,h|0;u[de>>2]=0,g=rn(A,a,re,de,H)|0;do if(!g){if(b=H,L=u[b>>2]|0,b=u[b+4>>2]|0,y=b>>>0<a>>>0|(b|0)==(a|0)&L>>>0<A>>>0,v=y?L:A,y=y?b:a,!z&&(z=Oe(7,0,(k^15)*3|0)|0,(L&z|0)==0&(b&(V()|0)|0)==0))g=c;else{if(b=(c+-1+S|0)%(S|0)|0,g=qt(A,a)|0,(b|0)<0&&Ze(23313,23315,245,23324),S=(g|0)!=0,((S?4:5)|0)<(b|0)&&Ze(23313,23315,245,23324),ri(A,a,se)|0&&Ze(23313,23315,245,23324),g=(u[se>>2]|0)+b|0,S?g=22288+(((g|0)%5|0)<<2)|0:g=22320+(((g|0)%6|0)<<2)|0,b=u[g>>2]|0,(b|0)==7&&Ze(23313,23315,245,23324),u[Z>>2]=0,g=rn(A,a,b,Z,Y)|0,g|0)break;L=Y,S=u[L>>2]|0,L=u[L+4>>2]|0;do if(L>>>0<y>>>0|(L|0)==(y|0)&S>>>0<v>>>0){if(qt(S,L)|0?v=No(S,L,A,a)|0:v=u[22384+((((u[Z>>2]|0)+(u[22352+(b<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,g=qt(S,L)|0,(v+-1|0)>>>0>5){g=-1,v=S,y=L;break}if(g=(g|0)!=0,(v|0)==1&g){g=-1,v=S,y=L;break}do if(ri(S,L,se)|0)g=-1;else if(g){g=((u[21936+(v<<2)>>2]|0)+5-(u[se>>2]|0)|0)%5|0;break}else{g=((u[21968+(v<<2)>>2]|0)+6-(u[se>>2]|0)|0)%6|0;break}while(!1);v=S,y=L}else g=c;while(!1);b=H,L=u[b>>2]|0,b=u[b+4>>2]|0}if((v|0)==(L|0)&(y|0)==(b|0)){if(S=(qt(L,b)|0)!=0,S?A=No(L,b,A,a)|0:A=u[22384+((((u[de>>2]|0)+(u[22352+(re<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,g=qt(L,b)|0,(A+-1|0)>>>0<=5&&(he=(g|0)!=0,!((A|0)==1&he)))do if(ri(L,b,se)|0)g=-1;else if(he){g=((u[21936+(A<<2)>>2]|0)+5-(u[se>>2]|0)|0)%5|0;break}else{g=((u[21968+(A<<2)>>2]|0)+6-(u[se>>2]|0)|0)%6|0;break}while(!1);else g=-1;g=g+1|0,g=(g|0)==6|S&(g|0)==5?0:g}a=y,A=v;break e}while(!1);return h=g,F=oe,h|0}while(!1);return he=Oe(g|0,0,56)|0,se=V()|0|a&-2130706433|536870912,u[h>>2]=he|A,u[h+4>>2]=se,h=0,F=oe,h|0}function q0(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0;return v=(qt(A,a)|0)==0,h=mr(A,a,0,c)|0,g=(h|0)==0,v?!g||(h=mr(A,a,1,c+8|0)|0,h|0)||(h=mr(A,a,2,c+16|0)|0,h|0)||(h=mr(A,a,3,c+24|0)|0,h|0)||(h=mr(A,a,4,c+32|0)|0,h)?(v=h,v|0):mr(A,a,5,c+40|0)|0:!g||(h=mr(A,a,1,c+8|0)|0,h|0)||(h=mr(A,a,2,c+16|0)|0,h|0)||(h=mr(A,a,3,c+24|0)|0,h|0)||(h=mr(A,a,4,c+32|0)|0,h|0)?(v=h,v|0):(v=c+40|0,u[v>>2]=0,u[v+4>>2]=0,v=0,v|0)}function K0(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0,y=0,b=0,S=0;return S=F,F=F+192|0,g=S,v=S+168|0,y=_e(A|0,a|0,56)|0,V()|0,y=y&7,b=a&-2130706433|134217728,h=Zs(A,b,v)|0,h|0?(b=h,F=S,b|0):(a=_e(A|0,a|0,52)|0,V()|0,a=a&15,qt(A,b)|0?Ga(v,a,y,1,g):pl(v,a,y,1,g),b=g+8|0,u[c>>2]=u[b>>2],u[c+4>>2]=u[b+4>>2],u[c+8>>2]=u[b+8>>2],u[c+12>>2]=u[b+12>>2],b=0,F=S,b|0)}function hc(A,a){A=A|0,a=a|0;var c=0,h=0,g=0,v=0;return g=F,F=F+16|0,c=g,!(!0&(a&2013265920|0)==536870912)||(h=a&-2130706433|134217728,!(ml(A,h)|0))?(h=0,F=g,h|0):(v=_e(A|0,a|0,56)|0,V()|0,v=(mr(A,h,v&7,c)|0)==0,h=c,h=v&((u[h>>2]|0)==(A|0)?(u[h+4>>2]|0)==(a|0):0)&1,F=g,h|0)}function Jo(A,a,c){A=A|0,a=a|0,c=c|0;var h=0;(a|0)>0?(h=Ur(a,4)|0,u[A>>2]=h,h||Ze(23337,23360,40,23374)):u[A>>2]=0,u[A+4>>2]=a,u[A+8>>2]=0,u[A+12>>2]=c}function ea(A){A=A|0;var a=0,c=0,h=0,g=0,v=0,y=0,b=0;g=A+4|0,v=A+12|0,y=A+8|0;e:for(;;){for(c=u[g>>2]|0,a=0;;){if((a|0)>=(c|0))break e;if(h=u[A>>2]|0,b=u[h+(a<<2)>>2]|0,!b)a=a+1|0;else break}a=h+(~~(+Et(+(+xr(10,+ +(15-(u[v>>2]|0)|0))*(+N[b>>3]+ +N[b+8>>3])))%+(c|0))>>>0<<2)|0,c=u[a>>2]|0;t:do if(c|0){if(h=b+32|0,(c|0)==(b|0))u[a>>2]=u[h>>2];else{if(c=c+32|0,a=u[c>>2]|0,!a)break;for(;(a|0)!=(b|0);)if(c=a+32|0,a=u[c>>2]|0,!a)break t;u[c>>2]=u[h>>2]}ot(b),u[y>>2]=(u[y>>2]|0)+-1}while(!1)}ot(u[A>>2]|0)}function rA(A){A=A|0;var a=0,c=0,h=0;for(h=u[A+4>>2]|0,c=0;;){if((c|0)>=(h|0)){a=0,c=4;break}if(a=u[(u[A>>2]|0)+(c<<2)>>2]|0,!a)c=c+1|0;else{c=4;break}}return(c|0)==4?a|0:0}function iA(A,a){A=A|0,a=a|0;var c=0,h=0,g=0,v=0;if(c=~~(+Et(+(+xr(10,+ +(15-(u[A+12>>2]|0)|0))*(+N[a>>3]+ +N[a+8>>3])))%+(u[A+4>>2]|0))>>>0,c=(u[A>>2]|0)+(c<<2)|0,h=u[c>>2]|0,!h)return v=1,v|0;v=a+32|0;do if((h|0)!=(a|0)){if(c=u[h+32>>2]|0,!c)return v=1,v|0;for(g=c;;){if((g|0)==(a|0)){g=8;break}if(c=u[g+32>>2]|0,c)h=g,g=c;else{c=1,g=10;break}}if((g|0)==8){u[h+32>>2]=u[v>>2];break}else if((g|0)==10)return c|0}else u[c>>2]=u[v>>2];while(!1);return ot(a),v=A+8|0,u[v>>2]=(u[v>>2]|0)+-1,v=0,v|0}function kl(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0,y=0;v=Sr(40)|0,v||Ze(23390,23360,98,23403),u[v>>2]=u[a>>2],u[v+4>>2]=u[a+4>>2],u[v+8>>2]=u[a+8>>2],u[v+12>>2]=u[a+12>>2],g=v+16|0,u[g>>2]=u[c>>2],u[g+4>>2]=u[c+4>>2],u[g+8>>2]=u[c+8>>2],u[g+12>>2]=u[c+12>>2],u[v+32>>2]=0,g=~~(+Et(+(+xr(10,+ +(15-(u[A+12>>2]|0)|0))*(+N[a>>3]+ +N[a+8>>3])))%+(u[A+4>>2]|0))>>>0,g=(u[A>>2]|0)+(g<<2)|0,h=u[g>>2]|0;do if(!h)u[g>>2]=v;else{for(;!(vs(h,a)|0&&vs(h+16|0,c)|0);)if(g=u[h+32>>2]|0,h=(g|0)==0?h:g,!(u[h+32>>2]|0)){y=10;break}if((y|0)==10){u[h+32>>2]=v;break}return ot(v),y=h,y|0}while(!1);return y=A+8|0,u[y>>2]=(u[y>>2]|0)+1,y=v,y|0}function Il(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0;if(g=~~(+Et(+(+xr(10,+ +(15-(u[A+12>>2]|0)|0))*(+N[a>>3]+ +N[a+8>>3])))%+(u[A+4>>2]|0))>>>0,g=u[(u[A>>2]|0)+(g<<2)>>2]|0,!g)return c=0,c|0;if(!c){for(A=g;;){if(vs(A,a)|0){h=10;break}if(A=u[A+32>>2]|0,!A){A=0,h=10;break}}if((h|0)==10)return A|0}for(A=g;;){if(vs(A,a)|0&&vs(A+16|0,c)|0){h=10;break}if(A=u[A+32>>2]|0,!A){A=0,h=10;break}}return(h|0)==10?A|0:0}function J0(A,a){A=A|0,a=a|0;var c=0;if(c=~~(+Et(+(+xr(10,+ +(15-(u[A+12>>2]|0)|0))*(+N[a>>3]+ +N[a+8>>3])))%+(u[A+4>>2]|0))>>>0,A=u[(u[A>>2]|0)+(c<<2)>>2]|0,!A)return c=0,c|0;for(;;){if(vs(A,a)|0){a=5;break}if(A=u[A+32>>2]|0,!A){A=0,a=5;break}}return(a|0)==5?A|0:0}function dc(){return 23424}function eh(A){return A=+A,+ +Pn(+A)}function Wi(A){return A=+A,~~+eh(A)|0}function Sr(A){A=A|0;var a=0,c=0,h=0,g=0,v=0,y=0,b=0,S=0,L=0,k=0,z=0,Y=0,Z=0,H=0,re=0,de=0,he=0,se=0,oe=0,ne=0,Ie=0;Ie=F,F=F+16|0,Y=Ie;do if(A>>>0<245){if(L=A>>>0<11?16:A+11&-8,A=L>>>3,z=u[5857]|0,c=z>>>A,c&3|0)return a=(c&1^1)+A|0,A=23468+(a<<1<<2)|0,c=A+8|0,h=u[c>>2]|0,g=h+8|0,v=u[g>>2]|0,(v|0)==(A|0)?u[5857]=z&~(1<<a):(u[v+12>>2]=A,u[c>>2]=v),ne=a<<3,u[h+4>>2]=ne|3,ne=h+ne+4|0,u[ne>>2]=u[ne>>2]|1,ne=g,F=Ie,ne|0;if(k=u[5859]|0,L>>>0>k>>>0){if(c|0)return a=2<<A,a=c<<A&(a|0-a),a=(a&0-a)+-1|0,b=a>>>12&16,a=a>>>b,c=a>>>5&8,a=a>>>c,v=a>>>2&4,a=a>>>v,A=a>>>1&2,a=a>>>A,h=a>>>1&1,h=(c|b|v|A|h)+(a>>>h)|0,a=23468+(h<<1<<2)|0,A=a+8|0,v=u[A>>2]|0,b=v+8|0,c=u[b>>2]|0,(c|0)==(a|0)?(A=z&~(1<<h),u[5857]=A):(u[c+12>>2]=a,u[A>>2]=c,A=z),ne=h<<3,y=ne-L|0,u[v+4>>2]=L|3,g=v+L|0,u[g+4>>2]=y|1,u[v+ne>>2]=y,k|0&&(h=u[5862]|0,a=k>>>3,c=23468+(a<<1<<2)|0,a=1<<a,A&a?(A=c+8|0,a=u[A>>2]|0):(u[5857]=A|a,a=c,A=c+8|0),u[A>>2]=h,u[a+12>>2]=h,u[h+8>>2]=a,u[h+12>>2]=c),u[5859]=y,u[5862]=g,ne=b,F=Ie,ne|0;if(v=u[5858]|0,v){for(c=(v&0-v)+-1|0,g=c>>>12&16,c=c>>>g,h=c>>>5&8,c=c>>>h,y=c>>>2&4,c=c>>>y,b=c>>>1&2,c=c>>>b,S=c>>>1&1,S=u[23732+((h|g|y|b|S)+(c>>>S)<<2)>>2]|0,c=S,b=S,S=(u[S+4>>2]&-8)-L|0;A=u[c+16>>2]|0,!(!A&&(A=u[c+20>>2]|0,!A));)y=(u[A+4>>2]&-8)-L|0,g=y>>>0<S>>>0,c=A,b=g?A:b,S=g?y:S;if(y=b+L|0,y>>>0>b>>>0){g=u[b+24>>2]|0,a=u[b+12>>2]|0;do if((a|0)==(b|0)){if(A=b+20|0,a=u[A>>2]|0,!a&&(A=b+16|0,a=u[A>>2]|0,!a)){c=0;break}for(;;)if(h=a+20|0,c=u[h>>2]|0,c)a=c,A=h;else if(h=a+16|0,c=u[h>>2]|0,c)a=c,A=h;else break;u[A>>2]=0,c=a}else c=u[b+8>>2]|0,u[c+12>>2]=a,u[a+8>>2]=c,c=a;while(!1);do if(g|0){if(a=u[b+28>>2]|0,A=23732+(a<<2)|0,(b|0)==(u[A>>2]|0)){if(u[A>>2]=c,!c){u[5858]=v&~(1<<a);break}}else if(ne=g+16|0,u[((u[ne>>2]|0)==(b|0)?ne:g+20|0)>>2]=c,!c)break;u[c+24>>2]=g,a=u[b+16>>2]|0,a|0&&(u[c+16>>2]=a,u[a+24>>2]=c),a=u[b+20>>2]|0,a|0&&(u[c+20>>2]=a,u[a+24>>2]=c)}while(!1);return S>>>0<16?(ne=S+L|0,u[b+4>>2]=ne|3,ne=b+ne+4|0,u[ne>>2]=u[ne>>2]|1):(u[b+4>>2]=L|3,u[y+4>>2]=S|1,u[y+S>>2]=S,k|0&&(h=u[5862]|0,a=k>>>3,c=23468+(a<<1<<2)|0,a=1<<a,a&z?(A=c+8|0,a=u[A>>2]|0):(u[5857]=a|z,a=c,A=c+8|0),u[A>>2]=h,u[a+12>>2]=h,u[h+8>>2]=a,u[h+12>>2]=c),u[5859]=S,u[5862]=y),ne=b+8|0,F=Ie,ne|0}else z=L}else z=L}else z=L}else if(A>>>0<=4294967231)if(A=A+11|0,L=A&-8,h=u[5858]|0,h){g=0-L|0,A=A>>>8,A?L>>>0>16777215?S=31:(z=(A+1048320|0)>>>16&8,re=A<<z,b=(re+520192|0)>>>16&4,re=re<<b,S=(re+245760|0)>>>16&2,S=14-(b|z|S)+(re<<S>>>15)|0,S=L>>>(S+7|0)&1|S<<1):S=0,c=u[23732+(S<<2)>>2]|0;e:do if(!c)c=0,A=0,re=61;else for(A=0,b=L<<((S|0)==31?0:25-(S>>>1)|0),v=0;;){if(y=(u[c+4>>2]&-8)-L|0,y>>>0<g>>>0)if(y)A=c,g=y;else{A=c,g=0,re=65;break e}if(re=u[c+20>>2]|0,c=u[c+16+(b>>>31<<2)>>2]|0,v=(re|0)==0|(re|0)==(c|0)?v:re,c)b=b<<1;else{c=v,re=61;break}}while(!1);if((re|0)==61){if((c|0)==0&(A|0)==0){if(A=2<<S,A=(A|0-A)&h,!A){z=L;break}z=(A&0-A)+-1|0,y=z>>>12&16,z=z>>>y,v=z>>>5&8,z=z>>>v,b=z>>>2&4,z=z>>>b,S=z>>>1&2,z=z>>>S,c=z>>>1&1,A=0,c=u[23732+((v|y|b|S|c)+(z>>>c)<<2)>>2]|0}c?re=65:(b=A,y=g)}if((re|0)==65)for(v=c;;)if(z=(u[v+4>>2]&-8)-L|0,c=z>>>0<g>>>0,g=c?z:g,A=c?v:A,c=u[v+16>>2]|0,c||(c=u[v+20>>2]|0),c)v=c;else{b=A,y=g;break}if((b|0)!=0&&y>>>0<((u[5859]|0)-L|0)>>>0&&(k=b+L|0,k>>>0>b>>>0)){v=u[b+24>>2]|0,a=u[b+12>>2]|0;do if((a|0)==(b|0)){if(A=b+20|0,a=u[A>>2]|0,!a&&(A=b+16|0,a=u[A>>2]|0,!a)){a=0;break}for(;;)if(g=a+20|0,c=u[g>>2]|0,c)a=c,A=g;else if(g=a+16|0,c=u[g>>2]|0,c)a=c,A=g;else break;u[A>>2]=0}else ne=u[b+8>>2]|0,u[ne+12>>2]=a,u[a+8>>2]=ne;while(!1);do if(v){if(A=u[b+28>>2]|0,c=23732+(A<<2)|0,(b|0)==(u[c>>2]|0)){if(u[c>>2]=a,!a){h=h&~(1<<A),u[5858]=h;break}}else if(ne=v+16|0,u[((u[ne>>2]|0)==(b|0)?ne:v+20|0)>>2]=a,!a)break;u[a+24>>2]=v,A=u[b+16>>2]|0,A|0&&(u[a+16>>2]=A,u[A+24>>2]=a),A=u[b+20>>2]|0,A&&(u[a+20>>2]=A,u[A+24>>2]=a)}while(!1);e:do if(y>>>0<16)ne=y+L|0,u[b+4>>2]=ne|3,ne=b+ne+4|0,u[ne>>2]=u[ne>>2]|1;else{if(u[b+4>>2]=L|3,u[k+4>>2]=y|1,u[k+y>>2]=y,a=y>>>3,y>>>0<256){c=23468+(a<<1<<2)|0,A=u[5857]|0,a=1<<a,A&a?(A=c+8|0,a=u[A>>2]|0):(u[5857]=A|a,a=c,A=c+8|0),u[A>>2]=k,u[a+12>>2]=k,u[k+8>>2]=a,u[k+12>>2]=c;break}if(a=y>>>8,a?y>>>0>16777215?c=31:(oe=(a+1048320|0)>>>16&8,ne=a<<oe,se=(ne+520192|0)>>>16&4,ne=ne<<se,c=(ne+245760|0)>>>16&2,c=14-(se|oe|c)+(ne<<c>>>15)|0,c=y>>>(c+7|0)&1|c<<1):c=0,a=23732+(c<<2)|0,u[k+28>>2]=c,A=k+16|0,u[A+4>>2]=0,u[A>>2]=0,A=1<<c,!(h&A)){u[5858]=h|A,u[a>>2]=k,u[k+24>>2]=a,u[k+12>>2]=k,u[k+8>>2]=k;break}a=u[a>>2]|0;t:do if((u[a+4>>2]&-8|0)!=(y|0)){for(h=y<<((c|0)==31?0:25-(c>>>1)|0);c=a+16+(h>>>31<<2)|0,A=u[c>>2]|0,!!A;)if((u[A+4>>2]&-8|0)==(y|0)){a=A;break t}else h=h<<1,a=A;u[c>>2]=k,u[k+24>>2]=a,u[k+12>>2]=k,u[k+8>>2]=k;break e}while(!1);oe=a+8|0,ne=u[oe>>2]|0,u[ne+12>>2]=k,u[oe>>2]=k,u[k+8>>2]=ne,u[k+12>>2]=a,u[k+24>>2]=0}while(!1);return ne=b+8|0,F=Ie,ne|0}else z=L}else z=L;else z=-1;while(!1);if(c=u[5859]|0,c>>>0>=z>>>0)return a=c-z|0,A=u[5862]|0,a>>>0>15?(ne=A+z|0,u[5862]=ne,u[5859]=a,u[ne+4>>2]=a|1,u[A+c>>2]=a,u[A+4>>2]=z|3):(u[5859]=0,u[5862]=0,u[A+4>>2]=c|3,ne=A+c+4|0,u[ne>>2]=u[ne>>2]|1),ne=A+8|0,F=Ie,ne|0;if(y=u[5860]|0,y>>>0>z>>>0)return se=y-z|0,u[5860]=se,ne=u[5863]|0,oe=ne+z|0,u[5863]=oe,u[oe+4>>2]=se|1,u[ne+4>>2]=z|3,ne=ne+8|0,F=Ie,ne|0;if(u[5975]|0?A=u[5977]|0:(u[5977]=4096,u[5976]=4096,u[5978]=-1,u[5979]=-1,u[5980]=0,u[5968]=0,u[5975]=Y&-16^1431655768,A=4096),b=z+48|0,S=z+47|0,v=A+S|0,g=0-A|0,L=v&g,L>>>0<=z>>>0||(A=u[5967]|0,A|0&&(k=u[5965]|0,Y=k+L|0,Y>>>0<=k>>>0|Y>>>0>A>>>0)))return ne=0,F=Ie,ne|0;e:do if(u[5968]&4)a=0,re=143;else{c=u[5863]|0;t:do if(c){for(h=23876;Y=u[h>>2]|0,!(Y>>>0<=c>>>0&&(Y+(u[h+4>>2]|0)|0)>>>0>c>>>0);)if(A=u[h+8>>2]|0,A)h=A;else{re=128;break t}if(a=v-y&g,a>>>0<2147483647)if(A=hn(a|0)|0,(A|0)==((u[h>>2]|0)+(u[h+4>>2]|0)|0)){if((A|0)!=-1){y=a,v=A,re=145;break e}}else h=A,re=136;else a=0}else re=128;while(!1);do if((re|0)==128)if(c=hn(0)|0,(c|0)!=-1&&(a=c,Z=u[5976]|0,H=Z+-1|0,a=((H&a|0)==0?0:(H+a&0-Z)-a|0)+L|0,Z=u[5965]|0,H=a+Z|0,a>>>0>z>>>0&a>>>0<2147483647)){if(Y=u[5967]|0,Y|0&&H>>>0<=Z>>>0|H>>>0>Y>>>0){a=0;break}if(A=hn(a|0)|0,(A|0)==(c|0)){y=a,v=c,re=145;break e}else h=A,re=136}else a=0;while(!1);do if((re|0)==136){if(c=0-a|0,!(b>>>0>a>>>0&(a>>>0<2147483647&(h|0)!=-1)))if((h|0)==-1){a=0;break}else{y=a,v=h,re=145;break e}if(A=u[5977]|0,A=S-a+A&0-A,A>>>0>=2147483647){y=a,v=h,re=145;break e}if((hn(A|0)|0)==-1){hn(c|0)|0,a=0;break}else{y=A+a|0,v=h,re=145;break e}}while(!1);u[5968]=u[5968]|4,re=143}while(!1);if((re|0)==143&&L>>>0<2147483647&&(se=hn(L|0)|0,H=hn(0)|0,de=H-se|0,he=de>>>0>(z+40|0)>>>0,!((se|0)==-1|he^1|se>>>0<H>>>0&((se|0)!=-1&(H|0)!=-1)^1))&&(y=he?de:a,v=se,re=145),(re|0)==145){a=(u[5965]|0)+y|0,u[5965]=a,a>>>0>(u[5966]|0)>>>0&&(u[5966]=a),S=u[5863]|0;e:do if(S){for(a=23876;;){if(A=u[a>>2]|0,c=u[a+4>>2]|0,(v|0)==(A+c|0)){re=154;break}if(h=u[a+8>>2]|0,h)a=h;else break}if((re|0)==154&&(oe=a+4|0,(u[a+12>>2]&8|0)==0)&&v>>>0>S>>>0&A>>>0<=S>>>0){u[oe>>2]=c+y,ne=(u[5860]|0)+y|0,se=S+8|0,se=(se&7|0)==0?0:0-se&7,oe=S+se|0,se=ne-se|0,u[5863]=oe,u[5860]=se,u[oe+4>>2]=se|1,u[S+ne+4>>2]=40,u[5864]=u[5979];break}for(v>>>0<(u[5861]|0)>>>0&&(u[5861]=v),c=v+y|0,a=23876;;){if((u[a>>2]|0)==(c|0)){re=162;break}if(A=u[a+8>>2]|0,A)a=A;else break}if((re|0)==162&&(u[a+12>>2]&8|0)==0){u[a>>2]=v,k=a+4|0,u[k>>2]=(u[k>>2]|0)+y,k=v+8|0,k=v+((k&7|0)==0?0:0-k&7)|0,a=c+8|0,a=c+((a&7|0)==0?0:0-a&7)|0,L=k+z|0,b=a-k-z|0,u[k+4>>2]=z|3;t:do if((S|0)==(a|0))ne=(u[5860]|0)+b|0,u[5860]=ne,u[5863]=L,u[L+4>>2]=ne|1;else{if((u[5862]|0)==(a|0)){ne=(u[5859]|0)+b|0,u[5859]=ne,u[5862]=L,u[L+4>>2]=ne|1,u[L+ne>>2]=ne;break}if(A=u[a+4>>2]|0,(A&3|0)==1){y=A&-8,h=A>>>3;n:do if(A>>>0<256)if(A=u[a+8>>2]|0,c=u[a+12>>2]|0,(c|0)==(A|0)){u[5857]=u[5857]&~(1<<h);break}else{u[A+12>>2]=c,u[c+8>>2]=A;break}else{v=u[a+24>>2]|0,A=u[a+12>>2]|0;do if((A|0)==(a|0)){if(c=a+16|0,h=c+4|0,A=u[h>>2]|0,A)c=h;else if(A=u[c>>2]|0,!A){A=0;break}for(;;)if(g=A+20|0,h=u[g>>2]|0,h)A=h,c=g;else if(g=A+16|0,h=u[g>>2]|0,h)A=h,c=g;else break;u[c>>2]=0}else ne=u[a+8>>2]|0,u[ne+12>>2]=A,u[A+8>>2]=ne;while(!1);if(!v)break;c=u[a+28>>2]|0,h=23732+(c<<2)|0;do if((u[h>>2]|0)!=(a|0)){if(ne=v+16|0,u[((u[ne>>2]|0)==(a|0)?ne:v+20|0)>>2]=A,!A)break n}else{if(u[h>>2]=A,A|0)break;u[5858]=u[5858]&~(1<<c);break n}while(!1);if(u[A+24>>2]=v,c=a+16|0,h=u[c>>2]|0,h|0&&(u[A+16>>2]=h,u[h+24>>2]=A),c=u[c+4>>2]|0,!c)break;u[A+20>>2]=c,u[c+24>>2]=A}while(!1);a=a+y|0,g=y+b|0}else g=b;if(a=a+4|0,u[a>>2]=u[a>>2]&-2,u[L+4>>2]=g|1,u[L+g>>2]=g,a=g>>>3,g>>>0<256){c=23468+(a<<1<<2)|0,A=u[5857]|0,a=1<<a,A&a?(A=c+8|0,a=u[A>>2]|0):(u[5857]=A|a,a=c,A=c+8|0),u[A>>2]=L,u[a+12>>2]=L,u[L+8>>2]=a,u[L+12>>2]=c;break}a=g>>>8;do if(!a)h=0;else{if(g>>>0>16777215){h=31;break}oe=(a+1048320|0)>>>16&8,ne=a<<oe,se=(ne+520192|0)>>>16&4,ne=ne<<se,h=(ne+245760|0)>>>16&2,h=14-(se|oe|h)+(ne<<h>>>15)|0,h=g>>>(h+7|0)&1|h<<1}while(!1);if(a=23732+(h<<2)|0,u[L+28>>2]=h,A=L+16|0,u[A+4>>2]=0,u[A>>2]=0,A=u[5858]|0,c=1<<h,!(A&c)){u[5858]=A|c,u[a>>2]=L,u[L+24>>2]=a,u[L+12>>2]=L,u[L+8>>2]=L;break}a=u[a>>2]|0;n:do if((u[a+4>>2]&-8|0)!=(g|0)){for(h=g<<((h|0)==31?0:25-(h>>>1)|0);c=a+16+(h>>>31<<2)|0,A=u[c>>2]|0,!!A;)if((u[A+4>>2]&-8|0)==(g|0)){a=A;break n}else h=h<<1,a=A;u[c>>2]=L,u[L+24>>2]=a,u[L+12>>2]=L,u[L+8>>2]=L;break t}while(!1);oe=a+8|0,ne=u[oe>>2]|0,u[ne+12>>2]=L,u[oe>>2]=L,u[L+8>>2]=ne,u[L+12>>2]=a,u[L+24>>2]=0}while(!1);return ne=k+8|0,F=Ie,ne|0}for(a=23876;A=u[a>>2]|0,!(A>>>0<=S>>>0&&(ne=A+(u[a+4>>2]|0)|0,ne>>>0>S>>>0));)a=u[a+8>>2]|0;g=ne+-47|0,A=g+8|0,A=g+((A&7|0)==0?0:0-A&7)|0,g=S+16|0,A=A>>>0<g>>>0?S:A,a=A+8|0,c=y+-40|0,se=v+8|0,se=(se&7|0)==0?0:0-se&7,oe=v+se|0,se=c-se|0,u[5863]=oe,u[5860]=se,u[oe+4>>2]=se|1,u[v+c+4>>2]=40,u[5864]=u[5979],c=A+4|0,u[c>>2]=27,u[a>>2]=u[5969],u[a+4>>2]=u[5970],u[a+8>>2]=u[5971],u[a+12>>2]=u[5972],u[5969]=v,u[5970]=y,u[5972]=0,u[5971]=a,a=A+24|0;do oe=a,a=a+4|0,u[a>>2]=7;while((oe+8|0)>>>0<ne>>>0);if((A|0)!=(S|0)){if(v=A-S|0,u[c>>2]=u[c>>2]&-2,u[S+4>>2]=v|1,u[A>>2]=v,a=v>>>3,v>>>0<256){c=23468+(a<<1<<2)|0,A=u[5857]|0,a=1<<a,A&a?(A=c+8|0,a=u[A>>2]|0):(u[5857]=A|a,a=c,A=c+8|0),u[A>>2]=S,u[a+12>>2]=S,u[S+8>>2]=a,u[S+12>>2]=c;break}if(a=v>>>8,a?v>>>0>16777215?h=31:(oe=(a+1048320|0)>>>16&8,ne=a<<oe,se=(ne+520192|0)>>>16&4,ne=ne<<se,h=(ne+245760|0)>>>16&2,h=14-(se|oe|h)+(ne<<h>>>15)|0,h=v>>>(h+7|0)&1|h<<1):h=0,c=23732+(h<<2)|0,u[S+28>>2]=h,u[S+20>>2]=0,u[g>>2]=0,a=u[5858]|0,A=1<<h,!(a&A)){u[5858]=a|A,u[c>>2]=S,u[S+24>>2]=c,u[S+12>>2]=S,u[S+8>>2]=S;break}a=u[c>>2]|0;t:do if((u[a+4>>2]&-8|0)!=(v|0)){for(h=v<<((h|0)==31?0:25-(h>>>1)|0);c=a+16+(h>>>31<<2)|0,A=u[c>>2]|0,!!A;)if((u[A+4>>2]&-8|0)==(v|0)){a=A;break t}else h=h<<1,a=A;u[c>>2]=S,u[S+24>>2]=a,u[S+12>>2]=S,u[S+8>>2]=S;break e}while(!1);oe=a+8|0,ne=u[oe>>2]|0,u[ne+12>>2]=S,u[oe>>2]=S,u[S+8>>2]=ne,u[S+12>>2]=a,u[S+24>>2]=0}}else ne=u[5861]|0,(ne|0)==0|v>>>0<ne>>>0&&(u[5861]=v),u[5969]=v,u[5970]=y,u[5972]=0,u[5866]=u[5975],u[5865]=-1,u[5870]=23468,u[5869]=23468,u[5872]=23476,u[5871]=23476,u[5874]=23484,u[5873]=23484,u[5876]=23492,u[5875]=23492,u[5878]=23500,u[5877]=23500,u[5880]=23508,u[5879]=23508,u[5882]=23516,u[5881]=23516,u[5884]=23524,u[5883]=23524,u[5886]=23532,u[5885]=23532,u[5888]=23540,u[5887]=23540,u[5890]=23548,u[5889]=23548,u[5892]=23556,u[5891]=23556,u[5894]=23564,u[5893]=23564,u[5896]=23572,u[5895]=23572,u[5898]=23580,u[5897]=23580,u[5900]=23588,u[5899]=23588,u[5902]=23596,u[5901]=23596,u[5904]=23604,u[5903]=23604,u[5906]=23612,u[5905]=23612,u[5908]=23620,u[5907]=23620,u[5910]=23628,u[5909]=23628,u[5912]=23636,u[5911]=23636,u[5914]=23644,u[5913]=23644,u[5916]=23652,u[5915]=23652,u[5918]=23660,u[5917]=23660,u[5920]=23668,u[5919]=23668,u[5922]=23676,u[5921]=23676,u[5924]=23684,u[5923]=23684,u[5926]=23692,u[5925]=23692,u[5928]=23700,u[5927]=23700,u[5930]=23708,u[5929]=23708,u[5932]=23716,u[5931]=23716,ne=y+-40|0,se=v+8|0,se=(se&7|0)==0?0:0-se&7,oe=v+se|0,se=ne-se|0,u[5863]=oe,u[5860]=se,u[oe+4>>2]=se|1,u[v+ne+4>>2]=40,u[5864]=u[5979];while(!1);if(a=u[5860]|0,a>>>0>z>>>0)return se=a-z|0,u[5860]=se,ne=u[5863]|0,oe=ne+z|0,u[5863]=oe,u[oe+4>>2]=se|1,u[ne+4>>2]=z|3,ne=ne+8|0,F=Ie,ne|0}return ne=dc()|0,u[ne>>2]=12,ne=0,F=Ie,ne|0}function ot(A){A=A|0;var a=0,c=0,h=0,g=0,v=0,y=0,b=0,S=0;if(A){c=A+-8|0,g=u[5861]|0,A=u[A+-4>>2]|0,a=A&-8,S=c+a|0;do if(A&1)b=c,y=c;else{if(h=u[c>>2]|0,!(A&3)||(y=c+(0-h)|0,v=h+a|0,y>>>0<g>>>0))return;if((u[5862]|0)==(y|0)){if(A=S+4|0,a=u[A>>2]|0,(a&3|0)!=3){b=y,a=v;break}u[5859]=v,u[A>>2]=a&-2,u[y+4>>2]=v|1,u[y+v>>2]=v;return}if(c=h>>>3,h>>>0<256)if(A=u[y+8>>2]|0,a=u[y+12>>2]|0,(a|0)==(A|0)){u[5857]=u[5857]&~(1<<c),b=y,a=v;break}else{u[A+12>>2]=a,u[a+8>>2]=A,b=y,a=v;break}g=u[y+24>>2]|0,A=u[y+12>>2]|0;do if((A|0)==(y|0)){if(a=y+16|0,c=a+4|0,A=u[c>>2]|0,A)a=c;else if(A=u[a>>2]|0,!A){A=0;break}for(;;)if(h=A+20|0,c=u[h>>2]|0,c)A=c,a=h;else if(h=A+16|0,c=u[h>>2]|0,c)A=c,a=h;else break;u[a>>2]=0}else b=u[y+8>>2]|0,u[b+12>>2]=A,u[A+8>>2]=b;while(!1);if(g){if(a=u[y+28>>2]|0,c=23732+(a<<2)|0,(u[c>>2]|0)==(y|0)){if(u[c>>2]=A,!A){u[5858]=u[5858]&~(1<<a),b=y,a=v;break}}else if(b=g+16|0,u[((u[b>>2]|0)==(y|0)?b:g+20|0)>>2]=A,!A){b=y,a=v;break}u[A+24>>2]=g,a=y+16|0,c=u[a>>2]|0,c|0&&(u[A+16>>2]=c,u[c+24>>2]=A),a=u[a+4>>2]|0,a?(u[A+20>>2]=a,u[a+24>>2]=A,b=y,a=v):(b=y,a=v)}else b=y,a=v}while(!1);if(!(y>>>0>=S>>>0)&&(A=S+4|0,h=u[A>>2]|0,!!(h&1))){if(h&2)u[A>>2]=h&-2,u[b+4>>2]=a|1,u[y+a>>2]=a,g=a;else{if((u[5863]|0)==(S|0)){if(S=(u[5860]|0)+a|0,u[5860]=S,u[5863]=b,u[b+4>>2]=S|1,(b|0)!=(u[5862]|0))return;u[5862]=0,u[5859]=0;return}if((u[5862]|0)==(S|0)){S=(u[5859]|0)+a|0,u[5859]=S,u[5862]=y,u[b+4>>2]=S|1,u[y+S>>2]=S;return}g=(h&-8)+a|0,c=h>>>3;do if(h>>>0<256)if(a=u[S+8>>2]|0,A=u[S+12>>2]|0,(A|0)==(a|0)){u[5857]=u[5857]&~(1<<c);break}else{u[a+12>>2]=A,u[A+8>>2]=a;break}else{v=u[S+24>>2]|0,A=u[S+12>>2]|0;do if((A|0)==(S|0)){if(a=S+16|0,c=a+4|0,A=u[c>>2]|0,A)a=c;else if(A=u[a>>2]|0,!A){c=0;break}for(;;)if(h=A+20|0,c=u[h>>2]|0,c)A=c,a=h;else if(h=A+16|0,c=u[h>>2]|0,c)A=c,a=h;else break;u[a>>2]=0,c=A}else c=u[S+8>>2]|0,u[c+12>>2]=A,u[A+8>>2]=c,c=A;while(!1);if(v|0){if(A=u[S+28>>2]|0,a=23732+(A<<2)|0,(u[a>>2]|0)==(S|0)){if(u[a>>2]=c,!c){u[5858]=u[5858]&~(1<<A);break}}else if(h=v+16|0,u[((u[h>>2]|0)==(S|0)?h:v+20|0)>>2]=c,!c)break;u[c+24>>2]=v,A=S+16|0,a=u[A>>2]|0,a|0&&(u[c+16>>2]=a,u[a+24>>2]=c),A=u[A+4>>2]|0,A|0&&(u[c+20>>2]=A,u[A+24>>2]=c)}}while(!1);if(u[b+4>>2]=g|1,u[y+g>>2]=g,(b|0)==(u[5862]|0)){u[5859]=g;return}}if(A=g>>>3,g>>>0<256){c=23468+(A<<1<<2)|0,a=u[5857]|0,A=1<<A,a&A?(a=c+8|0,A=u[a>>2]|0):(u[5857]=a|A,A=c,a=c+8|0),u[a>>2]=b,u[A+12>>2]=b,u[b+8>>2]=A,u[b+12>>2]=c;return}A=g>>>8,A?g>>>0>16777215?h=31:(y=(A+1048320|0)>>>16&8,S=A<<y,v=(S+520192|0)>>>16&4,S=S<<v,h=(S+245760|0)>>>16&2,h=14-(v|y|h)+(S<<h>>>15)|0,h=g>>>(h+7|0)&1|h<<1):h=0,A=23732+(h<<2)|0,u[b+28>>2]=h,u[b+20>>2]=0,u[b+16>>2]=0,a=u[5858]|0,c=1<<h;e:do if(!(a&c))u[5858]=a|c,u[A>>2]=b,u[b+24>>2]=A,u[b+12>>2]=b,u[b+8>>2]=b;else{A=u[A>>2]|0;t:do if((u[A+4>>2]&-8|0)!=(g|0)){for(h=g<<((h|0)==31?0:25-(h>>>1)|0);c=A+16+(h>>>31<<2)|0,a=u[c>>2]|0,!!a;)if((u[a+4>>2]&-8|0)==(g|0)){A=a;break t}else h=h<<1,A=a;u[c>>2]=b,u[b+24>>2]=A,u[b+12>>2]=b,u[b+8>>2]=b;break e}while(!1);y=A+8|0,S=u[y>>2]|0,u[S+12>>2]=b,u[y>>2]=b,u[b+8>>2]=S,u[b+12>>2]=A,u[b+24>>2]=0}while(!1);if(S=(u[5865]|0)+-1|0,u[5865]=S,!(S|0)){for(A=23884;A=u[A>>2]|0,A;)A=A+8|0;u[5865]=-1}}}}function Ur(A,a){A=A|0,a=a|0;var c=0;return A?(c=Ot(a,A)|0,(a|A)>>>0>65535&&(c=((c>>>0)/(A>>>0)|0|0)==(a|0)?c:-1)):c=0,A=Sr(c)|0,!A||!(u[A+-4>>2]&3)||or(A|0,0,c|0)|0,A|0}function bt(A,a,c,h){return A=A|0,a=a|0,c=c|0,h=h|0,c=A+c>>>0,it(a+h+(c>>>0<A>>>0|0)>>>0|0),c|0|0}function tn(A,a,c,h){return A=A|0,a=a|0,c=c|0,h=h|0,h=a-h-(c>>>0>A>>>0|0)>>>0,it(h|0),A-c>>>0|0|0}function io(A){return A=A|0,(A?31-(Mn(A^A-1)|0)|0:32)|0}function zr(A,a,c,h,g){A=A|0,a=a|0,c=c|0,h=h|0,g=g|0;var v=0,y=0,b=0,S=0,L=0,k=0,z=0,Y=0,Z=0,H=0;if(k=A,S=a,L=S,y=c,Y=h,b=Y,!L)return v=(g|0)!=0,b?v?(u[g>>2]=A|0,u[g+4>>2]=a&0,Y=0,g=0,it(Y|0),g|0):(Y=0,g=0,it(Y|0),g|0):(v&&(u[g>>2]=(k>>>0)%(y>>>0),u[g+4>>2]=0),Y=0,g=(k>>>0)/(y>>>0)>>>0,it(Y|0),g|0);v=(b|0)==0;do if(y){if(!v){if(v=(Mn(b|0)|0)-(Mn(L|0)|0)|0,v>>>0<=31){z=v+1|0,b=31-v|0,a=v-31>>31,y=z,A=k>>>(z>>>0)&a|L<<b,a=L>>>(z>>>0)&a,v=0,b=k<<b;break}return g?(u[g>>2]=A|0,u[g+4>>2]=S|a&0,Y=0,g=0,it(Y|0),g|0):(Y=0,g=0,it(Y|0),g|0)}if(v=y-1|0,v&y|0){b=(Mn(y|0)|0)+33-(Mn(L|0)|0)|0,H=64-b|0,z=32-b|0,S=z>>31,Z=b-32|0,a=Z>>31,y=b,A=z-1>>31&L>>>(Z>>>0)|(L<<z|k>>>(b>>>0))&a,a=a&L>>>(b>>>0),v=k<<H&S,b=(L<<H|k>>>(Z>>>0))&S|k<<z&b-33>>31;break}return g|0&&(u[g>>2]=v&k,u[g+4>>2]=0),(y|0)==1?(Z=S|a&0,H=A|0|0,it(Z|0),H|0):(H=io(y|0)|0,Z=L>>>(H>>>0)|0,H=L<<32-H|k>>>(H>>>0)|0,it(Z|0),H|0)}else{if(v)return g|0&&(u[g>>2]=(L>>>0)%(y>>>0),u[g+4>>2]=0),Z=0,H=(L>>>0)/(y>>>0)>>>0,it(Z|0),H|0;if(!k)return g|0&&(u[g>>2]=0,u[g+4>>2]=(L>>>0)%(b>>>0)),Z=0,H=(L>>>0)/(b>>>0)>>>0,it(Z|0),H|0;if(v=b-1|0,!(v&b))return g|0&&(u[g>>2]=A|0,u[g+4>>2]=v&L|a&0),Z=0,H=L>>>((io(b|0)|0)>>>0),it(Z|0),H|0;if(v=(Mn(b|0)|0)-(Mn(L|0)|0)|0,v>>>0<=30){a=v+1|0,b=31-v|0,y=a,A=L<<b|k>>>(a>>>0),a=L>>>(a>>>0),v=0,b=k<<b;break}return g?(u[g>>2]=A|0,u[g+4>>2]=S|a&0,Z=0,H=0,it(Z|0),H|0):(Z=0,H=0,it(Z|0),H|0)}while(!1);if(!y)L=b,S=0,b=0;else{z=c|0|0,k=Y|h&0,L=bt(z|0,k|0,-1,-1)|0,c=V()|0,S=b,b=0;do h=S,S=v>>>31|S<<1,v=b|v<<1,h=A<<1|h>>>31|0,Y=A>>>31|a<<1|0,tn(L|0,c|0,h|0,Y|0)|0,H=V()|0,Z=H>>31|((H|0)<0?-1:0)<<1,b=Z&1,A=tn(h|0,Y|0,Z&z|0,(((H|0)<0?-1:0)>>31|((H|0)<0?-1:0)<<1)&k|0)|0,a=V()|0,y=y-1|0;while((y|0)!=0);L=S,S=0}return y=0,g|0&&(u[g>>2]=A,u[g+4>>2]=a),Z=(v|0)>>>31|(L|y)<<1|(y<<1|v>>>31)&0|S,H=(v<<1|0)&-2|b,it(Z|0),H|0}function Ei(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var g=0,v=0,y=0,b=0,S=0,L=0;return L=a>>31|((a|0)<0?-1:0)<<1,S=((a|0)<0?-1:0)>>31|((a|0)<0?-1:0)<<1,v=h>>31|((h|0)<0?-1:0)<<1,g=((h|0)<0?-1:0)>>31|((h|0)<0?-1:0)<<1,b=tn(L^A|0,S^a|0,L|0,S|0)|0,y=V()|0,A=v^L,a=g^S,tn((zr(b,y,tn(v^c|0,g^h|0,v|0,g|0)|0,V()|0,0)|0)^A|0,(V()|0)^a|0,A|0,a|0)|0}function th(A,a){A=A|0,a=a|0;var c=0,h=0,g=0,v=0;return v=A&65535,g=a&65535,c=Ot(g,v)|0,h=A>>>16,A=(c>>>16)+(Ot(g,h)|0)|0,g=a>>>16,a=Ot(g,v)|0,it((A>>>16)+(Ot(g,h)|0)+(((A&65535)+a|0)>>>16)|0),A+a<<16|c&65535|0|0}function Vn(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var g=0,v=0;return g=A,v=c,c=th(g,v)|0,A=V()|0,it((Ot(a,v)|0)+(Ot(h,g)|0)+A|A&0|0),c|0|0|0}function ii(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var g=0,v=0,y=0,b=0,S=0,L=0;return g=F,F=F+16|0,b=g|0,y=a>>31|((a|0)<0?-1:0)<<1,v=((a|0)<0?-1:0)>>31|((a|0)<0?-1:0)<<1,L=h>>31|((h|0)<0?-1:0)<<1,S=((h|0)<0?-1:0)>>31|((h|0)<0?-1:0)<<1,A=tn(y^A|0,v^a|0,y|0,v|0)|0,a=V()|0,zr(A,a,tn(L^c|0,S^h|0,L|0,S|0)|0,V()|0,b)|0,h=tn(u[b>>2]^y|0,u[b+4>>2]^v|0,y|0,v|0)|0,c=V()|0,F=g,it(c|0),h|0}function si(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var g=0,v=0;return v=F,F=F+16|0,g=v|0,zr(A,a,c,h,g)|0,F=v,it(u[g+4>>2]|0),u[g>>2]|0|0}function _s(A,a,c){return A=A|0,a=a|0,c=c|0,(c|0)<32?(it(a>>c|0),A>>>c|(a&(1<<c)-1)<<32-c):(it(((a|0)<0?-1:0)|0),a>>c-32|0)}function _e(A,a,c){return A=A|0,a=a|0,c=c|0,(c|0)<32?(it(a>>>c|0),A>>>c|(a&(1<<c)-1)<<32-c):(it(0),a>>>c-32|0)}function Oe(A,a,c){return A=A|0,a=a|0,c=c|0,(c|0)<32?(it(a<<c|(A&(1<<c)-1<<32-c)>>>32-c|0),A<<c):(it(A<<c-32|0),0)}function ws(A,a){return A=+A,a=+a,A!=A?+a:a!=a?+A:+ei(+A,+a)}function oi(A,a){return A=+A,a=+a,A!=A?+a:a!=a?+A:+Nn(+A,+a)}function Yt(A){return A=+A,A>=0?+fn(A+.5):+Bi(A-.5)}function Wt(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0;if((c|0)>=8192)return Da(A|0,a|0,c|0)|0,A|0;if(v=A|0,g=A+c|0,(A&3)==(a&3)){for(;A&3;){if(!c)return v|0;rt[A>>0]=rt[a>>0]|0,A=A+1|0,a=a+1|0,c=c-1|0}for(c=g&-4|0,h=c-64|0;(A|0)<=(h|0);)u[A>>2]=u[a>>2],u[A+4>>2]=u[a+4>>2],u[A+8>>2]=u[a+8>>2],u[A+12>>2]=u[a+12>>2],u[A+16>>2]=u[a+16>>2],u[A+20>>2]=u[a+20>>2],u[A+24>>2]=u[a+24>>2],u[A+28>>2]=u[a+28>>2],u[A+32>>2]=u[a+32>>2],u[A+36>>2]=u[a+36>>2],u[A+40>>2]=u[a+40>>2],u[A+44>>2]=u[a+44>>2],u[A+48>>2]=u[a+48>>2],u[A+52>>2]=u[a+52>>2],u[A+56>>2]=u[a+56>>2],u[A+60>>2]=u[a+60>>2],A=A+64|0,a=a+64|0;for(;(A|0)<(c|0);)u[A>>2]=u[a>>2],A=A+4|0,a=a+4|0}else for(c=g-4|0;(A|0)<(c|0);)rt[A>>0]=rt[a>>0]|0,rt[A+1>>0]=rt[a+1>>0]|0,rt[A+2>>0]=rt[a+2>>0]|0,rt[A+3>>0]=rt[a+3>>0]|0,A=A+4|0,a=a+4|0;for(;(A|0)<(g|0);)rt[A>>0]=rt[a>>0]|0,A=A+1|0,a=a+1|0;return v|0}function or(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,g=0,v=0,y=0;if(v=A+c|0,a=a&255,(c|0)>=67){for(;A&3;)rt[A>>0]=a,A=A+1|0;for(h=v&-4|0,y=a|a<<8|a<<16|a<<24,g=h-64|0;(A|0)<=(g|0);)u[A>>2]=y,u[A+4>>2]=y,u[A+8>>2]=y,u[A+12>>2]=y,u[A+16>>2]=y,u[A+20>>2]=y,u[A+24>>2]=y,u[A+28>>2]=y,u[A+32>>2]=y,u[A+36>>2]=y,u[A+40>>2]=y,u[A+44>>2]=y,u[A+48>>2]=y,u[A+52>>2]=y,u[A+56>>2]=y,u[A+60>>2]=y,A=A+64|0;for(;(A|0)<(h|0);)u[A>>2]=y,A=A+4|0}for(;(A|0)<(v|0);)rt[A>>0]=a,A=A+1|0;return v-c|0}function Pn(A){return A=+A,A>=0?+fn(A+.5):+Bi(A-.5)}function hn(A){A=A|0;var a=0,c=0,h=0;return h=gr()|0,c=u[Nt>>2]|0,a=c+A|0,(A|0)>0&(a|0)<(c|0)|(a|0)<0?(pr(a|0)|0,Xn(12),-1):(a|0)>(h|0)&&!(Un(a|0)|0)?(Xn(12),-1):(u[Nt>>2]=a,c|0)}return{___divdi3:Ei,___muldi3:Vn,___remdi3:ii,___uremdi3:si,_areNeighborCells:gl,_bitshift64Ashr:_s,_bitshift64Lshr:_e,_bitshift64Shl:Oe,_calloc:Ur,_cellAreaKm2:wl,_cellAreaM2:Q0,_cellAreaRads2:Ka,_cellToBoundary:Ks,_cellToCenterChild:B0,_cellToChildPos:V0,_cellToChildren:D0,_cellToChildrenSize:Qa,_cellToLatLng:qs,_cellToLocalIj:eA,_cellToParent:Wa,_cellToVertex:mr,_cellToVertexes:q0,_cellsToDirectedEdge:Ho,_cellsToLinkedMultiPolygon:Ve,_childPosToCell:ic,_compactCells:N0,_destroyLinkedMultiPolygon:Tl,_directedEdgeToBoundary:$s,_directedEdgeToCells:C0,_edgeLengthKm:no,_edgeLengthM:bl,_edgeLengthRads:Y0,_emscripten_replace_memory:Bo,_free:ot,_getBaseCellNumber:ec,_getDirectedEdgeDestination:Ku,_getDirectedEdgeOrigin:ja,_getHexagonAreaAvgKm2:W0,_getHexagonAreaAvgM2:Br,_getHexagonEdgeLengthAvgKm:Xo,_getHexagonEdgeLengthAvgM:oc,_getIcosahedronFaces:Js,_getNumCells:qa,_getPentagons:eo,_getRes0Cells:T0,_getResolution:O0,_greatCircleDistanceKm:$o,_greatCircleDistanceM:j0,_greatCircleDistanceRads:sc,_gridDisk:Fa,_gridDiskDistances:ds,_gridDistance:Ac,_gridPathCells:uc,_gridPathCellsSize:lc,_gridRingUnsafe:D,_i64Add:bt,_i64Subtract:tn,_isPentagon:qt,_isResClassIII:Qo,_isValidCell:ml,_isValidDirectedEdge:S0,_isValidVertex:hc,_latLngToCell:rc,_llvm_maxnum_f64:ws,_llvm_minnum_f64:oi,_llvm_round_f64:Yt,_localIjToCell:ac,_malloc:Sr,_maxFaceCount:Yo,_maxGridDiskSize:ti,_maxPolygonToCellsSize:B,_memcpy:Wt,_memset:or,_originToDirectedEdges:M0,_pentagonCount:z0,_polygonToCells:ce,_readInt64AsDoubleFromPointer:Ll,_res0CellCount:Vi,_round:Pn,_sbrk:hn,_sizeOfCellBoundary:qo,_sizeOfCoordIJ:en,_sizeOfGeoLoop:Z0,_sizeOfGeoPolygon:cc,_sizeOfH3Index:$0,_sizeOfLatLng:X0,_sizeOfLinkedGeoPolygon:fc,_uncompactCells:U0,_uncompactCellsSize:vl,_vertexToLatLng:K0,establishStackSpace:yi,stackAlloc:Ni,stackRestore:vi,stackSave:Ui}})(Ro,Oi,ge);e.___divdi3=Te.___divdi3,e.___muldi3=Te.___muldi3,e.___remdi3=Te.___remdi3,e.___uremdi3=Te.___uremdi3,e._areNeighborCells=Te._areNeighborCells,e._bitshift64Ashr=Te._bitshift64Ashr,e._bitshift64Lshr=Te._bitshift64Lshr,e._bitshift64Shl=Te._bitshift64Shl,e._calloc=Te._calloc,e._cellAreaKm2=Te._cellAreaKm2,e._cellAreaM2=Te._cellAreaM2,e._cellAreaRads2=Te._cellAreaRads2,e._cellToBoundary=Te._cellToBoundary,e._cellToCenterChild=Te._cellToCenterChild,e._cellToChildPos=Te._cellToChildPos,e._cellToChildren=Te._cellToChildren,e._cellToChildrenSize=Te._cellToChildrenSize,e._cellToLatLng=Te._cellToLatLng,e._cellToLocalIj=Te._cellToLocalIj,e._cellToParent=Te._cellToParent,e._cellToVertex=Te._cellToVertex,e._cellToVertexes=Te._cellToVertexes,e._cellsToDirectedEdge=Te._cellsToDirectedEdge,e._cellsToLinkedMultiPolygon=Te._cellsToLinkedMultiPolygon,e._childPosToCell=Te._childPosToCell,e._compactCells=Te._compactCells,e._destroyLinkedMultiPolygon=Te._destroyLinkedMultiPolygon,e._directedEdgeToBoundary=Te._directedEdgeToBoundary,e._directedEdgeToCells=Te._directedEdgeToCells,e._edgeLengthKm=Te._edgeLengthKm,e._edgeLengthM=Te._edgeLengthM,e._edgeLengthRads=Te._edgeLengthRads;var Oo=e._emscripten_replace_memory=Te._emscripten_replace_memory;e._free=Te._free,e._getBaseCellNumber=Te._getBaseCellNumber,e._getDirectedEdgeDestination=Te._getDirectedEdgeDestination,e._getDirectedEdgeOrigin=Te._getDirectedEdgeOrigin,e._getHexagonAreaAvgKm2=Te._getHexagonAreaAvgKm2,e._getHexagonAreaAvgM2=Te._getHexagonAreaAvgM2,e._getHexagonEdgeLengthAvgKm=Te._getHexagonEdgeLengthAvgKm,e._getHexagonEdgeLengthAvgM=Te._getHexagonEdgeLengthAvgM,e._getIcosahedronFaces=Te._getIcosahedronFaces,e._getNumCells=Te._getNumCells,e._getPentagons=Te._getPentagons,e._getRes0Cells=Te._getRes0Cells,e._getResolution=Te._getResolution,e._greatCircleDistanceKm=Te._greatCircleDistanceKm,e._greatCircleDistanceM=Te._greatCircleDistanceM,e._greatCircleDistanceRads=Te._greatCircleDistanceRads,e._gridDisk=Te._gridDisk,e._gridDiskDistances=Te._gridDiskDistances,e._gridDistance=Te._gridDistance,e._gridPathCells=Te._gridPathCells,e._gridPathCellsSize=Te._gridPathCellsSize,e._gridRingUnsafe=Te._gridRingUnsafe,e._i64Add=Te._i64Add,e._i64Subtract=Te._i64Subtract,e._isPentagon=Te._isPentagon,e._isResClassIII=Te._isResClassIII,e._isValidCell=Te._isValidCell,e._isValidDirectedEdge=Te._isValidDirectedEdge,e._isValidVertex=Te._isValidVertex,e._latLngToCell=Te._latLngToCell,e._llvm_maxnum_f64=Te._llvm_maxnum_f64,e._llvm_minnum_f64=Te._llvm_minnum_f64,e._llvm_round_f64=Te._llvm_round_f64,e._localIjToCell=Te._localIjToCell,e._malloc=Te._malloc,e._maxFaceCount=Te._maxFaceCount,e._maxGridDiskSize=Te._maxGridDiskSize,e._maxPolygonToCellsSize=Te._maxPolygonToCellsSize,e._memcpy=Te._memcpy,e._memset=Te._memset,e._originToDirectedEdges=Te._originToDirectedEdges,e._pentagonCount=Te._pentagonCount,e._polygonToCells=Te._polygonToCells,e._readInt64AsDoubleFromPointer=Te._readInt64AsDoubleFromPointer,e._res0CellCount=Te._res0CellCount,e._round=Te._round,e._sbrk=Te._sbrk,e._sizeOfCellBoundary=Te._sizeOfCellBoundary,e._sizeOfCoordIJ=Te._sizeOfCoordIJ,e._sizeOfGeoLoop=Te._sizeOfGeoLoop,e._sizeOfGeoPolygon=Te._sizeOfGeoPolygon,e._sizeOfH3Index=Te._sizeOfH3Index,e._sizeOfLatLng=Te._sizeOfLatLng,e._sizeOfLinkedGeoPolygon=Te._sizeOfLinkedGeoPolygon,e._uncompactCells=Te._uncompactCells,e._uncompactCellsSize=Te._uncompactCellsSize,e._vertexToLatLng=Te._vertexToLatLng,e.establishStackSpace=Te.establishStackSpace;var Jr=e.stackAlloc=Te.stackAlloc,mi=e.stackRestore=Te.stackRestore,Gs=e.stackSave=Te.stackSave;if(e.asm=Te,e.cwrap=X,e.setValue=P,e.getValue=R,Xt){Po(Xt)||(Xt=o(Xt));{zs();var Hs=function(le){le.byteLength&&(le=new Uint8Array(le)),Me.set(le,C),e.memoryInitializerRequest&&delete e.memoryInitializerRequest.response,qr()},Do=function(){f(Xt,Hs,function(){throw"could not load memory initializer "+Xt})},Fo=fs(Xt);if(Fo)Hs(Fo.buffer);else if(e.memoryInitializerRequest){var Ws=function(){var le=e.memoryInitializerRequest,ve=le.response;if(le.status!==200&&le.status!==0){var Be=fs(e.memoryInitializerRequestURL);if(Be)ve=Be.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+le.status+", retrying "+Xt),Do();return}}Hs(ve)};e.memoryInitializerRequest.response?setTimeout(Ws,0):e.memoryInitializerRequest.addEventListener("load",Ws)}else Do()}}var Di;Er=function le(){Di||Qs(),Di||(Er=le)};function Qs(le){if(Jt>0||(gt(),Jt>0))return;function ve(){Di||(Di=!0,!U&&(Ct(),Se(),e.onRuntimeInitialized&&e.onRuntimeInitialized(),at()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),ve()},1)):ve()}e.run=Qs;function Tr(le){throw e.onAbort&&e.onAbort(le),le+="",d(le),m(le),U=!0,"abort("+le+"). Build with -s ASSERTIONS=1 for more info."}if(e.abort=Tr,e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return Qs(),n})(typeof Rr=="object"?Rr:{}),St="number",ht=St,Au=St,vt=St,yt=St,cr=St,Ke=St,Q7=[["sizeOfH3Index",St],["sizeOfLatLng",St],["sizeOfCellBoundary",St],["sizeOfGeoLoop",St],["sizeOfGeoPolygon",St],["sizeOfLinkedGeoPolygon",St],["sizeOfCoordIJ",St],["readInt64AsDoubleFromPointer",St],["isValidCell",Au,[vt,yt]],["latLngToCell",ht,[St,St,cr,Ke]],["cellToLatLng",ht,[vt,yt,Ke]],["cellToBoundary",ht,[vt,yt,Ke]],["maxGridDiskSize",ht,[St,Ke]],["gridDisk",ht,[vt,yt,St,Ke]],["gridDiskDistances",ht,[vt,yt,St,Ke,Ke]],["gridRingUnsafe",ht,[vt,yt,St,Ke]],["maxPolygonToCellsSize",ht,[Ke,cr,St,Ke]],["polygonToCells",ht,[Ke,cr,St,Ke]],["cellsToLinkedMultiPolygon",ht,[Ke,St,Ke]],["destroyLinkedMultiPolygon",null,[Ke]],["compactCells",ht,[Ke,Ke,St,St]],["uncompactCells",ht,[Ke,St,St,Ke,St,cr]],["uncompactCellsSize",ht,[Ke,St,St,cr,Ke]],["isPentagon",Au,[vt,yt]],["isResClassIII",Au,[vt,yt]],["getBaseCellNumber",St,[vt,yt]],["getResolution",St,[vt,yt]],["maxFaceCount",ht,[vt,yt,Ke]],["getIcosahedronFaces",ht,[vt,yt,Ke]],["cellToParent",ht,[vt,yt,cr,Ke]],["cellToChildren",ht,[vt,yt,cr,Ke]],["cellToCenterChild",ht,[vt,yt,cr,Ke]],["cellToChildrenSize",ht,[vt,yt,cr,Ke]],["cellToChildPos",ht,[vt,yt,cr,Ke]],["childPosToCell",ht,[St,St,vt,yt,cr,Ke]],["areNeighborCells",ht,[vt,yt,vt,yt,Ke]],["cellsToDirectedEdge",ht,[vt,yt,vt,yt,Ke]],["getDirectedEdgeOrigin",ht,[vt,yt,Ke]],["getDirectedEdgeDestination",ht,[vt,yt,Ke]],["isValidDirectedEdge",Au,[vt,yt]],["directedEdgeToCells",ht,[vt,yt,Ke]],["originToDirectedEdges",ht,[vt,yt,Ke]],["directedEdgeToBoundary",ht,[vt,yt,Ke]],["gridDistance",ht,[vt,yt,vt,yt,Ke]],["gridPathCells",ht,[vt,yt,vt,yt,Ke]],["gridPathCellsSize",ht,[vt,yt,vt,yt,Ke]],["cellToLocalIj",ht,[vt,yt,vt,yt,St,Ke]],["localIjToCell",ht,[vt,yt,Ke,St,Ke]],["getHexagonAreaAvgM2",ht,[cr,Ke]],["getHexagonAreaAvgKm2",ht,[cr,Ke]],["getHexagonEdgeLengthAvgM",ht,[cr,Ke]],["getHexagonEdgeLengthAvgKm",ht,[cr,Ke]],["greatCircleDistanceM",St,[Ke,Ke]],["greatCircleDistanceKm",St,[Ke,Ke]],["greatCircleDistanceRads",St,[Ke,Ke]],["cellAreaM2",ht,[vt,yt,Ke]],["cellAreaKm2",ht,[vt,yt,Ke]],["cellAreaRads2",ht,[vt,yt,Ke]],["edgeLengthM",ht,[vt,yt,Ke]],["edgeLengthKm",ht,[vt,yt,Ke]],["edgeLengthRads",ht,[vt,yt,Ke]],["getNumCells",ht,[cr,Ke]],["getRes0Cells",ht,[Ke]],["res0CellCount",St],["getPentagons",ht,[St,Ke]],["pentagonCount",St],["cellToVertex",ht,[vt,yt,St,Ke]],["cellToVertexes",ht,[vt,yt,Ke]],["vertexToLatLng",ht,[vt,yt,Ke]],["isValidVertex",Au,[vt,yt]]],Y7=0,$7=1,X7=2,Z7=3,q7=4,K7=5,J7=6,eD=7,tD=8,nD=9,rD=10,iD=11,sD=12,oD=13,aD=14,AD=15,er={};er[Y7]="Success";er[$7]="The operation failed but a more specific error is not available";er[X7]="Argument was outside of acceptable range";er[Z7]="Latitude or longitude arguments were outside of acceptable range";er[q7]="Resolution argument was outside of acceptable range";er[K7]="Cell argument was not valid";er[J7]="Directed edge argument was not valid";er[eD]="Undirected edge argument was not valid";er[tD]="Vertex argument was not valid";er[nD]="Pentagon distortion was encountered";er[rD]="Duplicate input";er[iD]="Cell arguments were not neighbors";er[sD]="Cell arguments had incompatible resolutions";er[oD]="Memory allocation failed";er[aD]="Bounds of provided memory were insufficient";er[AD]="Mode or flags argument was not valid";var lD=1e3,uD=1001,I3=1002,b0={};b0[lD]="Unknown unit";b0[uD]="Array length out of bounds";b0[I3]="Got unexpected null value for H3 index";var cD="Unknown error";function R3(n,e,t){var r=t&&"value"in t,i=new Error((n[e]||cD)+" (code: "+e+(r?", value: "+t.value:"")+")");return i.code=e,i}function fD(n,e){var t=arguments.length===2?{value:e}:{};return R3(er,n,t)}function hD(n,e){var t=arguments.length===2?{value:e}:{};return R3(b0,n,t)}function O3(n){if(n!==0)throw fD(n)}var us={};Q7.forEach(function(e){us[e[0]]=Rr.cwrap.apply(Rr,e)});var PA=16,dD=4,D3=8,Kg=us.sizeOfH3Index(),F3=us.sizeOfLatLng();us.sizeOfCellBoundary();us.sizeOfGeoPolygon();us.sizeOfGeoLoop();us.sizeOfLinkedGeoPolygon();us.sizeOfCoordIJ();function gD(n){if(!n)throw hD(I3);return n}var pD=/[^0-9a-fA-F]/;function mD(n){if(Array.isArray(n)&&n.length===2&&Number.isInteger(n[0])&&Number.isInteger(n[1]))return n;if(typeof n!="string"||pD.test(n))return[0,0];var e=parseInt(n.substring(0,n.length-8),PA),t=parseInt(n.substring(n.length-8),PA);return[t,e]}function Iy(n){if(n>=0)return n.toString(PA);n=n&2147483647;var e=B3(8,n.toString(PA)),t=(parseInt(e[0],PA)+8).toString(PA);return e=t+e.substring(1),e}function vD(n,e){return Iy(e)+B3(8,Iy(n))}function B3(n,e){for(var t=n-e.length,r="",i=0;i<t;i++)r+="0";return r=r+e,r}function yD(n,e){e===void 0&&(e=0);var t=Rr.getValue(n+Kg*e,"i32"),r=Rr.getValue(n+Kg*e+dD,"i32");return r?vD(t,r):null}function Ry(n){return ED(Rr.getValue(n,"double"))}function _D(n){return[Ry(n),Ry(n+D3)]}function wD(n,e,t){var r=Rr._malloc(F3);Rr.HEAPF64.set([n,e].map(bD),r/D3);var i=Rr._malloc(Kg);try{return O3(us.latLngToCell(r,t,i)),gD(yD(i))}finally{Rr._free(i),Rr._free(r)}}function Oy(n){var e=Rr._malloc(F3),t=mD(n),r=t[0],i=t[1];try{return O3(us.cellToLatLng(r,i,e)),_D(e)}finally{Rr._free(e)}}function bD(n){return n*Math.PI/180}function ED(n){return n*180/Math.PI}function TD(n,e=1,t=20){let r=n.map(f=>({id:f.id,zoom:t,lat:+f.lat,lon:+f.lon}));const i=[];let o=null;for(let f=t-1;f>=e;f--){const d=f-4,m=r.reduce((E,T)=>{const C=wD(+T.lat,+T.lon,d);return E[C]||(E[C]=[]),E[C].push(T),E},{}),_=Object.keys(m);if(_.length<n.length&&(o===null&&(o=f+1),r=_.map(E=>{if(m[E].length===1){const T=m[E][0];return{id:`{[${T.id}:${f}]}`,zoom:f,lat:T.lat,lon:T.lon,children:[T.id]}}return{id:`{[${E}:${f}]}`,zoom:f,lat:Oy(E)[0],lon:Oy(E)[1],children:m[E].map(T=>T.id)}}),i.unshift({zoom:f,nodes:r})),_.length<=1)break}return i.push({zoom:o??t,nodes:n}),i}const xD="https://gist.githubusercontent.com/ilyabo/",Dy=`${xD}/68d3dba61d86164b940ffe60e9d36931/raw/a72938b5d51b6df9fa7bba9aa1fb7df00cd0f06a`;let ff;async function SD(n="HCA"){return ff||(ff=await Promise.all([ky(`${Dy}/locations.csv`,(e,t)=>({id:e.id,name:e.name,lat:Number(e.lat),lon:Number(e.lon)})),ky(`${Dy}/flows.csv`,e=>({origin:e.origin,dest:e.dest,count:Number(e.count)}))]).then(([e,t])=>({locations:e,flows:t}))),{...ff,...n==="H3"?{clusterLevels:TD(ff.locations)}:null}}class os{constructor(e,t,r,i,o="div"){this.parent=e,this.object=t,this.property=r,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(i),this.$name=document.createElement("div"),this.$name.classList.add("name"),os.nextNameID=os.nextNameID||0,this.$name.id=`lil-gui-name-${++os.nextNameID}`,this.$widget=document.createElement(o),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.domElement.addEventListener("keydown",f=>f.stopPropagation()),this.domElement.addEventListener("keyup",f=>f.stopPropagation()),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(r)}name(e){return this._name=e,this.$name.innerHTML=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled?this:(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e),this)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(e){const t=this.parent.add(this.object,this.property,e);return t.name(this._name),this.destroy(),t}min(e){return this}max(e){return this}step(e){return this}decimals(e){return this}listen(e=!0){return this._listening=e,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const e=this.save();e!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=e}getValue(){return this.object[this.property]}setValue(e){return this.object[this.property]=e,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class CD extends os{constructor(e,t,r){super(e,t,r,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function Jg(n){let e,t;return(e=n.match(/(#|0x)?([a-f0-9]{6})/i))?t=e[2]:(e=n.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?t=parseInt(e[1]).toString(16).padStart(2,0)+parseInt(e[2]).toString(16).padStart(2,0)+parseInt(e[3]).toString(16).padStart(2,0):(e=n.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(t=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),t?"#"+t:!1}const MD={isPrimitive:!0,match:n=>typeof n=="string",fromHexString:Jg,toHexString:Jg},Ou={isPrimitive:!0,match:n=>typeof n=="number",fromHexString:n=>parseInt(n.substring(1),16),toHexString:n=>"#"+n.toString(16).padStart(6,0)},LD={isPrimitive:!1,match:n=>Array.isArray(n),fromHexString(n,e,t=1){const r=Ou.fromHexString(n);e[0]=(r>>16&255)/255*t,e[1]=(r>>8&255)/255*t,e[2]=(r&255)/255*t},toHexString([n,e,t],r=1){r=255/r;const i=n*r<<16^e*r<<8^t*r<<0;return Ou.toHexString(i)}},PD={isPrimitive:!1,match:n=>Object(n)===n,fromHexString(n,e,t=1){const r=Ou.fromHexString(n);e.r=(r>>16&255)/255*t,e.g=(r>>8&255)/255*t,e.b=(r&255)/255*t},toHexString({r:n,g:e,b:t},r=1){r=255/r;const i=n*r<<16^e*r<<8^t*r<<0;return Ou.toHexString(i)}},kD=[MD,Ou,LD,PD];function ID(n){return kD.find(e=>e.match(n))}class RD extends os{constructor(e,t,r,i){super(e,t,r,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=ID(this.initialValue),this._rgbScale=i,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const o=Jg(this.$text.value);o&&this._setValueFromHexString(o)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){const t=this._format.fromHexString(e);this.setValue(t)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class ig extends os{constructor(e,t,r){super(e,t,r,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",i=>{i.preventDefault(),this.getValue().call(this.object),this._callOnChange()}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class OD extends os{constructor(e,t,r,i,o,f){super(e,t,r,"number"),this._initInput(),this.min(i),this.max(o);const d=f!==void 0;this.step(d?f:this._getImplicitStep(),d),this.updateDisplay()}decimals(e){return this._decimals=e,this.updateDisplay(),this}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,t=!0){return this._step=e,this._stepExplicit=t,this}updateDisplay(){const e=this.getValue();if(this._hasSlider){let t=(e-this._min)/(this._max-this._min);t=Math.max(0,Math.min(t,1)),this.$fill.style.width=t*100+"%"}return this._inputFocused||(this.$input.value=this._decimals===void 0?e:e.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),window.matchMedia("(pointer: coarse)").matches&&(this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any")),this.$widget.appendChild(this.$input),this.$disable=this.$input;const t=()=>{let Q=parseFloat(this.$input.value);isNaN(Q)||(this._stepExplicit&&(Q=this._snap(Q)),this.setValue(this._clamp(Q)))},r=Q=>{const X=parseFloat(this.$input.value);isNaN(X)||(this._snapClampSetValue(X+Q),this.$input.value=this.getValue())},i=Q=>{Q.key==="Enter"&&this.$input.blur(),Q.code==="ArrowUp"&&(Q.preventDefault(),r(this._step*this._arrowKeyMultiplier(Q))),Q.code==="ArrowDown"&&(Q.preventDefault(),r(this._step*this._arrowKeyMultiplier(Q)*-1))},o=Q=>{this._inputFocused&&(Q.preventDefault(),r(this._step*this._normalizeMouseWheel(Q)))};let f=!1,d,m,_,E,T;const C=5,P=Q=>{d=Q.clientX,m=_=Q.clientY,f=!0,E=this.getValue(),T=0,window.addEventListener("mousemove",R),window.addEventListener("mouseup",U)},R=Q=>{if(f){const X=Q.clientX-d,q=Q.clientY-m;Math.abs(q)>C?(Q.preventDefault(),this.$input.blur(),f=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(X)>C&&U()}if(!f){const X=Q.clientY-_;T-=X*this._step*this._arrowKeyMultiplier(Q),E+T>this._max?T=this._max-E:E+T<this._min&&(T=this._min-E),this._snapClampSetValue(E+T)}_=Q.clientY},U=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",U)},j=()=>{this._inputFocused=!0},G=()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()};this.$input.addEventListener("input",t),this.$input.addEventListener("keydown",i),this.$input.addEventListener("wheel",o,{passive:!1}),this.$input.addEventListener("mousedown",P),this.$input.addEventListener("focus",j),this.$input.addEventListener("blur",G)}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const e=(G,Q,X,q,ee)=>(G-Q)/(X-Q)*(ee-q)+q,t=G=>{const Q=this.$slider.getBoundingClientRect();let X=e(G,Q.left,Q.right,this._min,this._max);this._snapClampSetValue(X)},r=G=>{this._setDraggingStyle(!0),t(G.clientX),window.addEventListener("mousemove",i),window.addEventListener("mouseup",o)},i=G=>{t(G.clientX)},o=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",o)};let f=!1,d,m;const _=G=>{G.preventDefault(),this._setDraggingStyle(!0),t(G.touches[0].clientX),f=!1},E=G=>{G.touches.length>1||(this._hasScrollBar?(d=G.touches[0].clientX,m=G.touches[0].clientY,f=!0):_(G),window.addEventListener("touchmove",T,{passive:!1}),window.addEventListener("touchend",C))},T=G=>{if(f){const Q=G.touches[0].clientX-d,X=G.touches[0].clientY-m;Math.abs(Q)>Math.abs(X)?_(G):(window.removeEventListener("touchmove",T),window.removeEventListener("touchend",C))}else G.preventDefault(),t(G.touches[0].clientX)},C=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",T),window.removeEventListener("touchend",C)},P=this._callOnFinishChange.bind(this),R=400;let U;const j=G=>{if(Math.abs(G.deltaX)<Math.abs(G.deltaY)&&this._hasScrollBar)return;G.preventDefault();const X=this._normalizeMouseWheel(G)*this._step;this._snapClampSetValue(this.getValue()+X),this.$input.value=this.getValue(),clearTimeout(U),U=setTimeout(P,R)};this.$slider.addEventListener("mousedown",r),this.$slider.addEventListener("touchstart",E,{passive:!1}),this.$slider.addEventListener("wheel",j,{passive:!1})}_setDraggingStyle(e,t="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle(`lil-gui-${t}`,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:t,deltaY:r}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(t=0,r=-e.wheelDelta/120,r*=this._stepExplicit?1:10),t+-r}_arrowKeyMultiplier(e){let t=this._stepExplicit?1:10;return e.shiftKey?t*=10:e.altKey&&(t/=10),t}_snap(e){const t=Math.round(e/this._step)*this._step;return parseFloat(t.toPrecision(15))}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){const e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}}class DD extends os{constructor(e,t,r,i){super(e,t,r,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(i)?i:Object.values(i),this._names=Array.isArray(i)?i:Object.keys(i),this._names.forEach(o=>{const f=document.createElement("option");f.innerHTML=o,this.$select.appendChild(f)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const e=this.getValue(),t=this._values.indexOf(e);return this.$select.selectedIndex=t,this.$display.innerHTML=t===-1?e:this._names[t],this}}class FD extends os{constructor(e,t,r){super(e,t,r,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",i=>{i.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}const BD=`.lil-gui {
  font-family: var(--font-family);
  font-size: var(--font-size);
  line-height: 1;
  font-weight: normal;
  font-style: normal;
  text-align: left;
  background-color: var(--background-color);
  color: var(--text-color);
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  --background-color: #1f1f1f;
  --text-color: #ebebeb;
  --title-background-color: #111111;
  --title-text-color: #ebebeb;
  --widget-color: #424242;
  --hover-color: #4f4f4f;
  --focus-color: #595959;
  --number-color: #2cc9ff;
  --string-color: #a2db3c;
  --font-size: 11px;
  --input-font-size: 11px;
  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;
  --padding: 4px;
  --spacing: 4px;
  --widget-height: 20px;
  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);
  --name-width: 45%;
  --slider-knob-width: 2px;
  --slider-input-width: 27%;
  --color-input-width: 27%;
  --slider-input-min-width: 45px;
  --color-input-min-width: 45px;
  --folder-indent: 7px;
  --widget-padding: 0 0 0 3px;
  --widget-border-radius: 2px;
  --checkbox-size: calc(0.75 * var(--widget-height));
  --scrollbar-width: 5px;
}
.lil-gui, .lil-gui * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
.lil-gui.root {
  width: var(--width, 245px);
  display: flex;
  flex-direction: column;
}
.lil-gui.root > .title {
  background: var(--title-background-color);
  color: var(--title-text-color);
}
.lil-gui.root > .children {
  overflow-x: hidden;
  overflow-y: auto;
}
.lil-gui.root > .children::-webkit-scrollbar {
  width: var(--scrollbar-width);
  height: var(--scrollbar-width);
  background: var(--background-color);
}
.lil-gui.root > .children::-webkit-scrollbar-thumb {
  border-radius: var(--scrollbar-width);
  background: var(--focus-color);
}
@media (pointer: coarse) {
  .lil-gui.allow-touch-styles, .lil-gui.allow-touch-styles .lil-gui {
    --widget-height: 28px;
    --padding: 6px;
    --spacing: 6px;
    --font-size: 13px;
    --input-font-size: 16px;
    --folder-indent: 10px;
    --scrollbar-width: 7px;
    --slider-input-min-width: 50px;
    --color-input-min-width: 65px;
  }
}
.lil-gui.force-touch-styles, .lil-gui.force-touch-styles .lil-gui {
  --widget-height: 28px;
  --padding: 6px;
  --spacing: 6px;
  --font-size: 13px;
  --input-font-size: 16px;
  --folder-indent: 10px;
  --scrollbar-width: 7px;
  --slider-input-min-width: 50px;
  --color-input-min-width: 65px;
}
.lil-gui.autoPlace {
  max-height: 100%;
  position: fixed;
  top: 0;
  right: 15px;
  z-index: 1001;
}

.lil-gui .controller {
  display: flex;
  align-items: center;
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
}
.lil-gui .controller.disabled {
  opacity: 0.5;
}
.lil-gui .controller.disabled, .lil-gui .controller.disabled * {
  pointer-events: none !important;
}
.lil-gui .controller > .name {
  min-width: var(--name-width);
  flex-shrink: 0;
  white-space: pre;
  padding-right: var(--spacing);
  line-height: var(--widget-height);
}
.lil-gui .controller .widget {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  min-height: var(--widget-height);
}
.lil-gui .controller.string input {
  color: var(--string-color);
}
.lil-gui .controller.boolean .widget {
  cursor: pointer;
}
.lil-gui .controller.color .display {
  width: 100%;
  height: var(--widget-height);
  border-radius: var(--widget-border-radius);
  position: relative;
}
@media (hover: hover) {
  .lil-gui .controller.color .display:hover:before {
    content: " ";
    display: block;
    position: absolute;
    border-radius: var(--widget-border-radius);
    border: 1px solid #fff9;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}
.lil-gui .controller.color input[type=color] {
  opacity: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
}
.lil-gui .controller.color input[type=text] {
  margin-left: var(--spacing);
  font-family: var(--font-family-mono);
  min-width: var(--color-input-min-width);
  width: var(--color-input-width);
  flex-shrink: 0;
}
.lil-gui .controller.option select {
  opacity: 0;
  position: absolute;
  width: 100%;
  max-width: 100%;
}
.lil-gui .controller.option .display {
  position: relative;
  pointer-events: none;
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  line-height: var(--widget-height);
  max-width: 100%;
  overflow: hidden;
  word-break: break-all;
  padding-left: 0.55em;
  padding-right: 1.75em;
  background: var(--widget-color);
}
@media (hover: hover) {
  .lil-gui .controller.option .display.focus {
    background: var(--focus-color);
  }
}
.lil-gui .controller.option .display.active {
  background: var(--focus-color);
}
.lil-gui .controller.option .display:after {
  font-family: "lil-gui";
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  padding-right: 0.375em;
}
.lil-gui .controller.option .widget,
.lil-gui .controller.option select {
  cursor: pointer;
}
@media (hover: hover) {
  .lil-gui .controller.option .widget:hover .display {
    background: var(--hover-color);
  }
}
.lil-gui .controller.number input {
  color: var(--number-color);
}
.lil-gui .controller.number.hasSlider input {
  margin-left: var(--spacing);
  width: var(--slider-input-width);
  min-width: var(--slider-input-min-width);
  flex-shrink: 0;
}
.lil-gui .controller.number .slider {
  width: 100%;
  height: var(--widget-height);
  background-color: var(--widget-color);
  border-radius: var(--widget-border-radius);
  padding-right: var(--slider-knob-width);
  overflow: hidden;
  cursor: ew-resize;
  touch-action: pan-y;
}
@media (hover: hover) {
  .lil-gui .controller.number .slider:hover {
    background-color: var(--hover-color);
  }
}
.lil-gui .controller.number .slider.active {
  background-color: var(--focus-color);
}
.lil-gui .controller.number .slider.active .fill {
  opacity: 0.95;
}
.lil-gui .controller.number .fill {
  height: 100%;
  border-right: var(--slider-knob-width) solid var(--number-color);
  box-sizing: content-box;
}

.lil-gui-dragging .lil-gui {
  --hover-color: var(--widget-color);
}
.lil-gui-dragging * {
  cursor: ew-resize !important;
}

.lil-gui-dragging.lil-gui-vertical * {
  cursor: ns-resize !important;
}

.lil-gui .title {
  height: var(--title-height);
  line-height: calc(var(--title-height) - 4px);
  font-weight: 600;
  padding: 0 var(--padding);
  -webkit-tap-highlight-color: transparent;
  cursor: pointer;
  outline: none;
  text-decoration-skip: objects;
}
.lil-gui .title:before {
  font-family: "lil-gui";
  content: "";
  padding-right: 2px;
  display: inline-block;
}
.lil-gui .title:active {
  background: var(--title-background-color);
  opacity: 0.75;
}
@media (hover: hover) {
  body:not(.lil-gui-dragging) .lil-gui .title:hover {
    background: var(--title-background-color);
    opacity: 0.85;
  }
  .lil-gui .title:focus {
    text-decoration: underline var(--focus-color);
  }
}
.lil-gui.root > .title:focus {
  text-decoration: none !important;
}
.lil-gui.closed > .title:before {
  content: "";
}
.lil-gui.closed > .children {
  transform: translateY(-7px);
  opacity: 0;
}
.lil-gui.closed:not(.transition) > .children {
  display: none;
}
.lil-gui.transition > .children {
  transition-duration: 300ms;
  transition-property: height, opacity, transform;
  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);
  overflow: hidden;
  pointer-events: none;
}
.lil-gui .children:empty:before {
  content: "Empty";
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
  display: block;
  height: var(--widget-height);
  font-style: italic;
  line-height: var(--widget-height);
  opacity: 0.5;
}
.lil-gui.root > .children > .lil-gui > .title {
  border: 0 solid var(--widget-color);
  border-width: 1px 0;
  transition: border-color 300ms;
}
.lil-gui.root > .children > .lil-gui.closed > .title {
  border-bottom-color: transparent;
}
.lil-gui + .controller {
  border-top: 1px solid var(--widget-color);
  margin-top: 0;
  padding-top: var(--spacing);
}
.lil-gui .lil-gui .lil-gui > .title {
  border: none;
}
.lil-gui .lil-gui .lil-gui > .children {
  border: none;
  margin-left: var(--folder-indent);
  border-left: 2px solid var(--widget-color);
}
.lil-gui .lil-gui .controller {
  border: none;
}

.lil-gui input {
  -webkit-tap-highlight-color: transparent;
  border: 0;
  outline: none;
  font-family: var(--font-family);
  font-size: var(--input-font-size);
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  background: var(--widget-color);
  color: var(--text-color);
  width: 100%;
}
@media (hover: hover) {
  .lil-gui input:hover {
    background: var(--hover-color);
  }
  .lil-gui input:active {
    background: var(--focus-color);
  }
}
.lil-gui input:disabled {
  opacity: 1;
}
.lil-gui input[type=text],
.lil-gui input[type=number] {
  padding: var(--widget-padding);
}
.lil-gui input[type=text]:focus,
.lil-gui input[type=number]:focus {
  background: var(--focus-color);
}
.lil-gui input::-webkit-outer-spin-button,
.lil-gui input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
.lil-gui input[type=number] {
  -moz-appearance: textfield;
}
.lil-gui input[type=checkbox] {
  appearance: none;
  -webkit-appearance: none;
  height: var(--checkbox-size);
  width: var(--checkbox-size);
  border-radius: var(--widget-border-radius);
  text-align: center;
  cursor: pointer;
}
.lil-gui input[type=checkbox]:checked:before {
  font-family: "lil-gui";
  content: "";
  font-size: var(--checkbox-size);
  line-height: var(--checkbox-size);
}
@media (hover: hover) {
  .lil-gui input[type=checkbox]:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui button {
  -webkit-tap-highlight-color: transparent;
  outline: none;
  cursor: pointer;
  font-family: var(--font-family);
  font-size: var(--font-size);
  color: var(--text-color);
  width: 100%;
  height: var(--widget-height);
  text-transform: none;
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
  border: 1px solid var(--widget-color);
  text-align: center;
  line-height: calc(var(--widget-height) - 4px);
}
@media (hover: hover) {
  .lil-gui button:hover {
    background: var(--hover-color);
    border-color: var(--hover-color);
  }
  .lil-gui button:focus {
    border-color: var(--focus-color);
  }
}
.lil-gui button:active {
  background: var(--focus-color);
}

@font-face {
  font-family: "lil-gui";
  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");
}`;function ND(n){const e=document.createElement("style");e.innerHTML=n;const t=document.querySelector("head link[rel=stylesheet], head style");t?document.head.insertBefore(e,t):document.head.appendChild(e)}let Fy=!1;class $p{constructor({parent:e,autoPlace:t=e===void 0,container:r,width:i,title:o="Controls",closeFolders:f=!1,injectStyles:d=!0,touchStyles:m=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",_=>{(_.code==="Enter"||_.code==="Space")&&(_.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(o),this.parent){this.parent.children.push(this),this.parent.folders.push(this),this.parent.$children.appendChild(this.domElement);return}this.domElement.classList.add("root"),m&&this.domElement.classList.add("allow-touch-styles"),!Fy&&d&&(ND(BD),Fy=!0),r?r.appendChild(this.domElement):t&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),i&&this.domElement.style.setProperty("--width",i+"px"),this._closeFolders=f}add(e,t,r,i,o){if(Object(r)===r)return new DD(this,e,t,r);const f=e[t];switch(typeof f){case"number":return new OD(this,e,t,r,i,o);case"boolean":return new CD(this,e,t);case"string":return new FD(this,e,t);case"function":return new ig(this,e,t)}console.error(`gui.add failed
	property:`,t,`
	object:`,e,`
	value:`,f)}addColor(e,t,r=1){return new RD(this,e,t,r)}addFolder(e){const t=new $p({parent:this,title:e});return this.root._closeFolders&&t.close(),t}load(e,t=!0){return e.controllers&&this.controllers.forEach(r=>{r instanceof ig||r._name in e.controllers&&r.load(e.controllers[r._name])}),t&&e.folders&&this.folders.forEach(r=>{r._title in e.folders&&r.load(e.folders[r._title])}),this}save(e=!0){const t={controllers:{},folders:{}};return this.controllers.forEach(r=>{if(!(r instanceof ig)){if(r._name in t.controllers)throw new Error(`Cannot save GUI with duplicate property "${r._name}"`);t.controllers[r._name]=r.save()}}),e&&this.folders.forEach(r=>{if(r._title in t.folders)throw new Error(`Cannot save GUI with duplicate folder "${r._title}"`);t.folders[r._title]=r.save()}),t}open(e=!0){return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}_setClosed(e){this._closed!==e&&(this._closed=e,this._callOnOpenClose(this))}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{const t=this.$children.clientHeight;this.$children.style.height=t+"px",this.domElement.classList.add("transition");const r=o=>{o.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",r))};this.$children.addEventListener("transitionend",r);const i=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame(()=>{this.$children.style.height=i+"px"})}),this}title(e){return this._title=e,this.$title.innerHTML=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach(r=>r.reset()),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),this._onChange!==void 0&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onOpenClose(e){return this._onOpenClose=e,this}_callOnOpenClose(e){this.parent&&this.parent._callOnOpenClose(e),this._onOpenClose!==void 0&&this._onOpenClose.call(this,e)}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(e=>e.destroy())}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach(t=>{e=e.concat(t.controllersRecursive())}),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach(t=>{e=e.concat(t.foldersRecursive())}),e}}function UD(n,e){const[t,r]=Ue.useState(n),i=Ue.useRef();return Ue.useEffect(()=>{const o=new $p;e(o);const f=o.controllersRecursive();for(const d in n)if(n[d]){if(f.find(_=>_._name===d))continue;const m=[n,d];o.add.apply(o,m)}return o.onChange(d=>{r(m=>({...m,[d.property]:d.value}))}),i.current=o,()=>{o.destroy()}},[n,e]),t}const Pi={TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,DOUBLE:5130},zD=`#define SHADER_NAME animated-flow-lines-layer-fragment-shader

precision highp float;

uniform float animationTailLength;

varying vec4 vColor;
varying float sourceToTarget;
varying vec2 uv;
                                   
void main(void) {
  geometry.uv = uv;

  gl_FragColor = vec4(vColor.xyz, vColor.w * smoothstep(1.0 - animationTailLength, 1.0, fract(sourceToTarget)));

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,VD=`#define SHADER_NAME animated-flow-lines-layer-vertex-shader
#define SPEED 0.015
#define NUM_PARTS 5.0

attribute vec3 positions;
attribute vec3 instanceSourcePositions;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions64Low;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute float instanceWidths;
attribute float instancePickable;
attribute float instanceStaggering;

uniform float opacity;
uniform float currentTime;
uniform float thicknessUnit;
    
varying vec4 vColor;
varying float sourceToTarget;
varying vec2 uv;

// offset vector by strokeWidth pixels
// offset_direction is -1 (left) or 1 (right)
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  return dir_screenspace * offset_direction * width / 2.0;
}

void main(void) {
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;

  // Position
  vec4 source_commonspace;
  vec4 target_commonspace;
  vec4 source = project_position_to_clipspace(instanceSourcePositions, instanceSourcePositions64Low, vec3(0.), source_commonspace);
  vec4 target = project_position_to_clipspace(instanceTargetPositions, instanceTargetPositions64Low, vec3(0.), target_commonspace);

  float widthPixels = instanceWidths * thicknessUnit;
  
  
  // linear interpolation of source & target to pick right coord
  float segmentIndex = positions.x;
  vec4 p = mix(source, target, segmentIndex);
  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);
  uv = positions.xy;
  geometry.uv = uv;
  if (instancePickable > 0.5) {
    geometry.pickingColor = instancePickingColors;
  }
  
  // extrude
  vec3 offset = vec3(
    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),
    0.0);
  DECKGL_FILTER_SIZE(offset, geometry);
  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Color
  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;
  DECKGL_FILTER_COLOR(vColor, geometry);

  sourceToTarget = positions.x * length(source - target) * NUM_PARTS - currentTime * SPEED + instanceStaggering; 
}
`,jD=[0,132,193,255],N3=1800,GD=20,By=N3/GD;class Mf extends ls{constructor(e){super(e)}getShaders(){return super.getShaders({vs:VD,fs:zD,modules:[ol,al],shaderCache:this.context.shaderCache})}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:Pi.DOUBLE,transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:Pi.DOUBLE,transition:!0,accessor:"getTargetPosition"},instanceColors:{size:4,type:Pi.UNSIGNED_BYTE,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getThickness",defaultValue:1},instanceStaggering:{accessor:"getStaggering",size:1,transition:!1},instancePickable:{accessor:"getPickable",size:1,transition:!1}})}getNeedsRedraw(){return!0}updateState({props:e,oldProps:t,changeFlags:r}){if(super.updateState({props:e,oldProps:t,changeFlags:r}),r.extensionsChanged){const{gl:i}=this.context;this.state.model?.delete(),this.state.model=this._getModel(i),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{thicknessUnit:t,animationTailLength:r}=this.props,o=Date.now()/1e3%By/By*N3;this.state.model.setUniforms({...e,thicknessUnit:t*4,animationTailLength:r,currentTime:o}).draw()}_getModel(e){const t=[0,-1,0,0,1,0,1,-1,0,1,1,0];return new Ma(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new il({drawMode:Pi.TRIANGLE_STRIP,attributes:{positions:new Float32Array(t)}}),isInstanced:!0}))}}Mf.defaultProps={currentTime:0,animationTailLength:.7,getSourcePosition:{type:"accessor",value:n=>[0,0]},getTargetPosition:{type:"accessor",value:n=>[0,0]},getPickable:{type:"accessor",value:n=>1},getStaggering:{type:"accessor",value:(n,{index:e})=>Math.random()},getColor:{type:"accessor",value:jD},getThickness:{type:"accessor",value:1},thicknessUnit:30,parameters:{depthTest:!1}};const HD=`#define SHADER_NAME flow-line-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 uv;

void main(void) {
  if (vColor.a == 0.0) {
    discard;
  }

  geometry.uv = uv;
  gl_FragColor = vColor;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,WD=`#define SHADER_NAME flow-line-layer-vertex-shader

attribute vec3 positions;
attribute vec3 normals;
attribute vec4 instanceColors;
attribute float instanceThickness;    // 0..0.5
attribute vec3 instanceSourcePositions;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions64Low;
attribute vec3 instancePickingColors;
attribute vec2 instanceEndpointOffsets;
attribute float instancePickable;

uniform vec4 outlineColor;
uniform float thicknessUnit;
uniform float gap;
uniform float opacity;

varying vec4 vColor;
varying vec2 uv;

void main(void) {
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;
  
  // Position
  vec4 source_commonspace;    
  vec4 target_commonspace;
  vec4 source = project_position_to_clipspace(instanceSourcePositions, instanceSourcePositions64Low, vec3(0.), source_commonspace);
  vec4 target = project_position_to_clipspace(instanceTargetPositions, instanceTargetPositions64Low, vec3(0.), target_commonspace);

  // linear interpolation of source & target to pick right coord
  float sourceOrTarget = positions.x;
  geometry.position = mix(source_commonspace, target_commonspace, sourceOrTarget);
  uv = positions.xy;
  geometry.uv = uv;
  if (instancePickable > 0.5) {
    geometry.pickingColor = instancePickingColors;
  }
  
  // set the clamp limits in pixel size 
  float lengthCommon = length(target_commonspace - source_commonspace);    
  vec2 offsetDistances = project_pixel_size(positions.yz) * thicknessUnit;
  
  vec2 limitedOffsetDistances = clamp(   
    project_pixel_size(positions.yz) * thicknessUnit,
    -lengthCommon*.8, lengthCommon*.8
  );
  float startOffsetCommon = project_pixel_size(instanceEndpointOffsets[0]);
  float endOffsetCommon = project_pixel_size(instanceEndpointOffsets[1]);
  float endpointOffset = mix(
    clamp(startOffsetCommon, 0.0, lengthCommon*.2),
    -clamp(endOffsetCommon, 0.0, lengthCommon*.2),
    positions.x
  );

  vec2 flowlineDir = normalize(target_commonspace.xy - source_commonspace.xy);
  vec2 perpendicularDir = vec2(-flowlineDir.y, flowlineDir.x);
  vec2 normalsCommon = project_pixel_size(normals.xy);
  float gapCommon = project_pixel_size(gap);
  vec3 offsetCommon = vec3(
    flowlineDir * (instanceThickness * limitedOffsetDistances[1] + normalsCommon.y + endpointOffset * 1.05) -
    perpendicularDir * (instanceThickness * limitedOffsetDistances[0] + gapCommon + normalsCommon.x),
    0.0
  );
  
  DECKGL_FILTER_SIZE(offsetCommon, geometry);
  vec4 position_commonspace = mix(source_commonspace, target_commonspace, sourceOrTarget);
  vec4 offset_commonspace = vec4(offsetCommon, 0.0);
  gl_Position = project_common_position_to_clipspace(position_commonspace + offset_commonspace);
      
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  
  vec4 fillColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;
  vColor = mix(fillColor, vec4(outlineColor.xyz, outlineColor.w * fillColor.w), normals.z);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,QD=[0,132,193,255],Ny=[1,0,0,1,2,-3,1,1,-3,1,0,0,1,1,-3,0,1,0,1,0,0,0,1,0,0,0,0];function YD(n,e){return[-1,2*n,1,2*n,-n,1,n,-n,1,-1,2*n,1,n,-n,1,n,-n,1,-1,2*n,1,n,-n,1,-1,-n,1]}const $D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class kA extends ls{constructor(e){super(e)}getShaders(){return super.getShaders({vs:WD,fs:HD,modules:[ol,al],shaderCache:this.context.shaderCache})}initializeState(){const{attributeManager:e}=this.state;e.addInstanced({instanceSourcePositions:{accessor:"getSourcePosition",size:3,transition:!1,type:Pi.DOUBLE},instanceTargetPositions:{accessor:"getTargetPosition",size:3,transition:!1,type:Pi.DOUBLE},instanceThickness:{accessor:"getThickness",size:1,transition:!1},instanceEndpointOffsets:{accessor:"getEndpointOffsets",size:2,transition:!1},instanceColors:{accessor:"getColor",size:4,type:Pi.UNSIGNED_BYTE,transition:!1},instancePickable:{accessor:"getPickable",size:1,transition:!1}})}updateState({props:e,oldProps:t,changeFlags:r}){if(super.updateState({props:e,oldProps:t,changeFlags:r}),r.extensionsChanged){const{gl:i}=this.context;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(i)}),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{gl:t}=this.context,{outlineColor:r,thicknessUnit:i}=this.props;t.lineWidth(1),this.state.model.setUniforms({...e,outlineColor:r.map(o=>o/255),thicknessUnit:i*2,gap:.5}).draw()}_getModel(e){let t=[],r=[];const{drawOutline:i,outlineThickness:o}=this.props;if(i){t=t.concat(Ny);const f=o;r=r.concat(YD(f))}return t=t.concat(Ny),r=r.concat($D),new Ma(e,{id:this.props.id,...this.getShaders(),geometry:new il({drawMode:Pi.TRIANGLES,attributes:{positions:new Float32Array(t),normals:new Float32Array(r)}}),isInstanced:!0,shaderCache:this.context.shaderCache})}}kA.layerName="FlowLinesLayer";kA.defaultProps={getSourcePosition:{type:"accessor",value:n=>[0,0]},getTargetPosition:{type:"accessor",value:n=>[0,0]},getColor:{type:"accessor",value:QD},getThickness:{type:"accessor",value:n=>n.count},getPickable:{type:"accessor",value:n=>1},drawOutline:!0,thicknessUnit:12,outlineThickness:1,outlineColor:[255,255,255,255],parameters:{depthTest:!1}};const XD=`#define SHADER_NAME flow-circles-layer-fragment-shader
#define SOFT_OUTLINE 0.05
#define EPS 0.05
precision highp float;

uniform vec4 emptyColor;
uniform float outlineEmptyMix;

varying vec4 vColor;
varying vec2 unitPosition;
varying float unitInRadius;
varying float unitOutRadius;

float when_gt(float x, float y) {
  return max(sign(x - y), 0.0);
}

void main(void) {
  geometry.uv = unitPosition;
  float distToCenter = length(unitPosition);
  if (distToCenter > 1.0) {
    discard;
  }

  // See https://stackoverflow.com/questions/47285778
  vec4 ringColor = mix(
    emptyColor / 255., vColor,
    when_gt(unitInRadius, unitOutRadius)
  );
  vec4 outlineColor = mix(
    mix(vColor, emptyColor / 255., outlineEmptyMix),
    vColor,
    when_gt(unitInRadius, unitOutRadius)
  );
  
  float innerR = min(unitInRadius, unitOutRadius) * (1.0 - SOFT_OUTLINE);
  
  // Inner circle
  float step2 = innerR - 2.0 * EPS; 
  float step3 = innerR - EPS;
  
  // Ring
  float step4 = innerR;
  // float step5 = 1.0 - SOFT_OUTLINE - EPS;
  // float step6 = 1.0 - SOFT_OUTLINE;
  float step5 = 1.0 - 5.0 * EPS;
  float step6 = 1.0;
  
  gl_FragColor = vColor;
  gl_FragColor = mix(gl_FragColor, emptyColor / 255., smoothstep(step2, step3, distToCenter));
  gl_FragColor = mix(gl_FragColor, ringColor, smoothstep(step3, step4, distToCenter));
  gl_FragColor = mix(gl_FragColor, outlineColor, smoothstep(step5, step6, distToCenter));
  // gl_FragColor = mix(gl_FragColor, emptyColor / 255., smoothstep(step6, 1.0, distToCenter));
  gl_FragColor.a = vColor.a;
  gl_FragColor.a *= smoothstep(0.0, SOFT_OUTLINE, 1.0 - distToCenter);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,ZD=`#define SHADER_NAME flow-circles-layer-vertex-shader
#define radiusScale 100

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceInRadius;
attribute float instanceOutRadius;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform vec4 emptyColor;
uniform float outlineEmptyMix;

varying vec4 vColor;
varying vec2 unitPosition;
varying float unitInRadius;
varying float unitOutRadius;

void main(void) {
  geometry.worldPosition = instancePositions;

  float outerRadiusPixels = max(instanceInRadius, instanceOutRadius);
  unitInRadius = instanceInRadius / outerRadiusPixels; 
  unitOutRadius = instanceOutRadius / outerRadiusPixels; 

  // position on the containing square in [-1, 1] space
  unitPosition = positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;
                                                                                                    
  // Find the center of the point and add the current vertex
  vec3 offset = positions * project_pixel_size(outerRadiusPixels);
  DECKGL_FILTER_SIZE(offset, geometry);
  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
                            
  // Apply opacity to instance color, or return instance picking color
  vColor = vec4(instanceColors.rgb / 255., instanceColors.a / 255. * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,U3=[0,0,0,255],qD=[255,255,255,255],KD=.4;class mu extends ls{constructor(e){super(e)}getShaders(){return super.getShaders({vs:ZD,fs:XD,modules:[ol,al]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:Pi.DOUBLE,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceInRadius:{size:1,transition:!0,accessor:"getInRadius",defaultValue:1},instanceOutRadius:{size:1,transition:!0,accessor:"getOutRadius",defaultValue:1},instanceColors:{size:4,transition:!0,type:Pi.UNSIGNED_BYTE,accessor:"getColor",defaultValue:U3}})}updateState({props:e,oldProps:t,changeFlags:r}){if(super.updateState({props:e,oldProps:t,changeFlags:r}),r.extensionsChanged){const{gl:i}=this.context;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(i)}),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{emptyColor:t,outlineEmptyMix:r}=this.props;this.state.model.setUniforms({...e,emptyColor:t,outlineEmptyMix:r}).draw()}_getModel(e){const t=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new Ma(e,Object.assign(this.getShaders(),{id:this.props.id,geometry:new il({drawMode:Pi.TRIANGLE_FAN,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(t)}}}),isInstanced:!0}))}}mu.layerName="FlowCirclesLayer";mu.defaultProps={getColor:{type:"accessor",value:U3},emptyColor:{type:"accessor",value:qD},outlineEmptyMix:{type:"accessor",value:KD},getPosition:{type:"accessor",value:n=>n.position},getInRadius:{type:"accessor",value:1},getOutRadius:{type:"accessor",value:1},parameters:{depthTest:!1}};const JD=`#define SHADER_NAME icon-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute vec4 instanceIconFrames;
attribute float instanceColorModes;
attribute vec2 instanceOffsets;
attribute vec2 instancePixelOffset;

uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = angle * PI / 180.0;
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;

  vec2 iconSize = instanceIconFrames.zw;
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), 
    sizeMinPixels, sizeMaxPixels
  );
  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;
  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
  pixelOffset += instancePixelOffset;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);

  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); 
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }

  vTextureCoords = mix(
    instanceIconFrames.xy,
    instanceIconFrames.xy + iconSize,
    (positions.xy + 1.0) / 2.0
  ) / iconsTextureDim;

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);

  vColorMode = instanceColorModes;
}
`,eF=`#define SHADER_NAME icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  vec4 texColor = texture2D(iconsTexture, vTextureCoords);
  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
  float a = texColor.a * opacity * vColor.a;

  if (a < alphaCutoff) {
    discard;
  }

  gl_FragColor = vec4(color, a);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,tF=1024,nF=4,Uy=()=>{},zy={10241:9987,10240:9729,10242:33071,10243:33071};function rF(n){return Math.pow(2,Math.ceil(Math.log2(n)))}function iF(n,e,t,r){const i=Math.min(t/e.width,r/e.height),o=Math.floor(e.width*i),f=Math.floor(e.height*i);return i===1?{data:e,width:o,height:f}:(n.canvas.height=f,n.canvas.width=o,n.clearRect(0,0,o,f),n.drawImage(e,0,0,e.width,e.height,0,0,o,f),{data:n.canvas,width:o,height:f})}function Du(n){return n&&(n.id||n.url)}function sF(n,e,t,r){const i=n.width,o=n.height,f=new Zr(n.gl,{width:e,height:t,parameters:r});return OS(n,f,{targetY:0,width:i,height:o}),n.delete(),f}function Vy(n,e,t){for(let r=0;r<e.length;r++){const{icon:i,xOffset:o}=e[r],f=Du(i);n[f]={...i,x:o,y:t}}}function oF({icons:n,buffer:e,mapping:t={},xOffset:r=0,yOffset:i=0,rowHeight:o=0,canvasWidth:f}){let d=[];for(let m=0;m<n.length;m++){const _=n[m],E=Du(_);if(!t[E]){const{height:T,width:C}=_;r+C+e>f&&(Vy(t,d,i),r=0,i=o+i+e,o=0,d=[]),d.push({icon:_,xOffset:r}),r=r+C+e,o=Math.max(o,T)}}return d.length>0&&Vy(t,d,i),{mapping:t,rowHeight:o,xOffset:r,yOffset:i,canvasWidth:f,canvasHeight:rF(o+i+e)}}function aF(n,e,t){if(!n||!e)return null;t=t||{};const r={},{iterable:i,objectInfo:o}=Mp(n);for(const f of i){o.index++;const d=e(f,o),m=Du(d);if(!d)throw new Error("Icon is missing.");if(!d.url)throw new Error("Icon url is missing.");!r[m]&&(!t[m]||d.url!==t[m].url)&&(r[m]={...d,source:f,sourceIndex:o.index})}return r}class AF{constructor(e,{onUpdate:t=Uy,onError:r=Uy}){I(this,"gl",void 0),I(this,"onUpdate",void 0),I(this,"onError",void 0),I(this,"_loadOptions",null),I(this,"_texture",null),I(this,"_externalTexture",null),I(this,"_mapping",{}),I(this,"_textureParameters",null),I(this,"_pendingCount",0),I(this,"_autoPacking",!1),I(this,"_xOffset",0),I(this,"_yOffset",0),I(this,"_rowHeight",0),I(this,"_buffer",nF),I(this,"_canvasWidth",tF),I(this,"_canvasHeight",0),I(this,"_canvas",null),this.gl=e,this.onUpdate=t,this.onError=r}finalize(){var e;(e=this._texture)===null||e===void 0||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const t=this._autoPacking?Du(e):e;return this._mapping[t]||{}}setProps({loadOptions:e,autoPacking:t,iconAtlas:r,iconMapping:i,textureParameters:o}){if(e&&(this._loadOptions=e),t!==void 0&&(this._autoPacking=t),i&&(this._mapping=i),r){var f;(f=this._texture)===null||f===void 0||f.delete(),this._texture=null,this._externalTexture=r}o&&(this._textureParameters=o)}get isLoaded(){return this._pendingCount===0}packIcons(e,t){if(!this._autoPacking||typeof document>"u")return;const r=Object.values(aF(e,t,this._mapping)||{});if(r.length>0){const{mapping:i,xOffset:o,yOffset:f,rowHeight:d,canvasHeight:m}=oF({icons:r,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=d,this._mapping=i,this._xOffset=o,this._yOffset=f,this._canvasHeight=m,this._texture||(this._texture=new Zr(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||zy})),this._texture.height!==this._canvasHeight&&(this._texture=sF(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||zy)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(r)}}_loadIcons(e){const t=this._canvas.getContext("2d",{willReadFrequently:!0});for(const r of e)this._pendingCount++,If(r.url,this._loadOptions).then(i=>{const o=Du(r),f=this._mapping[o],{x:d,y:m,width:_,height:E}=f,{data:T,width:C,height:P}=iF(t,i,_,E);this._texture.setSubImageData({data:T,x:d+(_-C)/2,y:m+(E-P)/2,width:C,height:P}),f.width=C,f.height=P,this._texture.generateMipmap(),this.onUpdate()}).catch(i=>{this.onError({url:r.url,source:r.source,sourceIndex:r.sourceIndex,loadOptions:this._loadOptions,error:i})}).finally(()=>{this._pendingCount--})}}const z3=[0,0,0,255],lF={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:n=>n.position},getIcon:{type:"accessor",value:n=>n.icon},getColor:{type:"accessor",value:z3},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0}};class Xp extends ls{constructor(...e){super(...e),I(this,"state",void 0)}getShaders(){return super.getShaders({vs:JD,fs:eF,modules:[ol,al]})}initializeState(){this.state={iconManager:new AF(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:z3},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:t,oldProps:r,changeFlags:i}=e,o=this.getAttributeManager(),{iconAtlas:f,iconMapping:d,data:m,getIcon:_,textureParameters:E}=t,{iconManager:T}=this.state,C=f||this.internalState.isAsyncPropLoading("iconAtlas");if(T.setProps({loadOptions:t.loadOptions,autoPacking:!C,iconAtlas:f,iconMapping:C?d:null,textureParameters:E}),C?r.iconMapping!==t.iconMapping&&o.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&T.packIcons(m,_),i.extensionsChanged){var P;const{gl:R}=this.context;(P=this.state.model)===null||P===void 0||P.delete(),this.state.model=this._getModel(R),o.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:t,sizeMinPixels:r,sizeMaxPixels:i,sizeUnits:o,billboard:f,alphaCutoff:d}=this.props,{iconManager:m}=this.state,_=m.getTexture();_&&this.state.model.setUniforms(e).setUniforms({iconsTexture:_,iconsTextureDim:[_.width,_.height],sizeUnits:VA[o],sizeScale:t,sizeMinPixels:r,sizeMaxPixels:i,billboard:f,alphaCutoff:d}).draw()}_getModel(e){const t=[-1,-1,-1,1,1,1,1,-1];return new Ma(e,{...this.getShaders(),id:this.props.id,geometry:new il({drawMode:6,attributes:{positions:{size:2,value:new Float32Array(t)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var t;const r=(t=this.getCurrentLayer())===null||t===void 0?void 0:t.props.onIconError;r?r(e):Gt.error(e.error.message)()}getInstanceOffset(e){const{width:t,height:r,anchorX:i=t/2,anchorY:o=r/2}=this.state.iconManager.getIconMapping(e);return[t/2-i,r/2-o]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:t,y:r,width:i,height:o}=this.state.iconManager.getIconMapping(e);return[t,r,i,o]}}I(Xp,"defaultProps",lF);I(Xp,"layerName","IconLayer");const uF=`#define SHADER_NAME scatterplot-layer-vertex-shader

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceRadius;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;


void main(void) {
  geometry.worldPosition = instancePositions;
  outerRadiusPixels = clamp(
    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
    radiusMinPixels, radiusMaxPixels
  );
  float lineWidthPixels = clamp(
    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
    lineWidthMinPixels, lineWidthMaxPixels
  );
  outerRadiusPixels += stroked * lineWidthPixels / 2.0;
  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;
  unitPosition = edgePadding * positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
  
  if (billboard) {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = edgePadding * positions * outerRadiusPixels;
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,cF=`#define SHADER_NAME scatterplot-layer-fragment-shader

precision highp float;

uniform bool filled;
uniform float stroked;
uniform bool antialiasing;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition) * outerRadiusPixels;
  float inCircle = antialiasing ? 
    smoothedge(distToCenter, outerRadiusPixels) : 
    step(distToCenter, outerRadiusPixels);

  if (inCircle == 0.0) {
    discard;
  }

  if (stroked > 0.5) {
    float isLine = antialiasing ? 
      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
      step(innerUnitRadius * outerRadiusPixels, distToCenter);

    if (filled) {
      gl_FragColor = mix(vFillColor, vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
    }
  } else if (!filled) {
    discard;
  } else {
    gl_FragColor = vFillColor;
  }

  gl_FragColor.a *= inCircle;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,jy=[0,0,0,255],fF={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:n=>n.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:jy},getLineColor:{type:"accessor",value:jy},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class Zp extends ls{getShaders(){return super.getShaders({vs:uF,fs:cF,modules:[ol,al]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){if(super.updateState(e),e.changeFlags.extensionsChanged){var t;const{gl:r}=this.context;(t=this.state.model)===null||t===void 0||t.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{radiusUnits:t,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:o,stroked:f,filled:d,billboard:m,antialiasing:_,lineWidthUnits:E,lineWidthScale:T,lineWidthMinPixels:C,lineWidthMaxPixels:P}=this.props;this.state.model.setUniforms(e).setUniforms({stroked:f?1:0,filled:d,billboard:m,antialiasing:_,radiusUnits:VA[t],radiusScale:r,radiusMinPixels:i,radiusMaxPixels:o,lineWidthUnits:VA[E],lineWidthScale:T,lineWidthMinPixels:C,lineWidthMaxPixels:P}).draw()}_getModel(e){const t=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new Ma(e,{...this.getShaders(),id:this.props.id,geometry:new il({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(t)}}}),isInstanced:!0})}}I(Zp,"defaultProps",fF);I(Zp,"layerName","ScatterplotLayer");const hF=`#define SHADER_NAME multi-icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float gamma;
uniform bool sdf;
uniform float alphaCutoff;
uniform float sdfBuffer;
uniform float outlineBuffer;
uniform vec4 outlineColor;

varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  if (!picking_uActive) {
    float alpha = texture2D(iconsTexture, vTextureCoords).a;
    vec4 color = vColor;
    if (sdf) {
      float distance = alpha;
      alpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);

      if (outlineBuffer > 0.0) {
        float inFill = alpha;
        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);
        color = mix(outlineColor, vColor, inFill);
        alpha = inBorder;
      }
    }
    float a = alpha * color.a;
    
    if (a < alphaCutoff) {
      discard;
    }

    gl_FragColor = vec4(color.rgb, a * opacity);
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,sg=192/256,Gy=[],dF={getIconOffsets:{type:"accessor",value:n=>n.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class qp extends Xp{constructor(...e){super(...e),I(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:hF}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(t,{index:r,target:i})=>this.encodePickingColor(r,i)}})}updateState(e){super.updateState(e);const{props:t,oldProps:r}=e;let{outlineColor:i}=t;i!==r.outlineColor&&(i=i.map(o=>o/255),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!t.sdf&&t.outlineWidth&&Gt.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:t,smoothing:r,outlineWidth:i}=this.props,{outlineColor:o}=this.state,f=i?Math.max(r,sg*(1-i)):-1;if(e.uniforms={...e.uniforms,sdfBuffer:sg,outlineBuffer:f,gamma:r,sdf:!!t,outlineColor:o},super.draw(e),t&&i){const{iconManager:d}=this.state;d.getTexture()&&this.state.model.draw({uniforms:{outlineBuffer:sg}})}}getInstanceOffset(e){return e?Array.from(e).flatMap(t=>super.getInstanceOffset(t)):Gy}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(t=>super.getInstanceIconFrame(t)):Gy}}I(qp,"defaultProps",dF);I(qp,"layerName","MultiIconLayer");const vu=1e20;class gF{constructor({fontSize:e=24,buffer:t=3,radius:r=8,cutoff:i=.25,fontFamily:o="sans-serif",fontWeight:f="normal",fontStyle:d="normal"}={}){this.buffer=t,this.cutoff=i,this.radius=r;const m=this.size=e+t*4,_=this._createCanvas(m),E=this.ctx=_.getContext("2d",{willReadFrequently:!0});E.font=`${d} ${f} ${e}px ${o}`,E.textBaseline="alphabetic",E.textAlign="left",E.fillStyle="black",this.gridOuter=new Float64Array(m*m),this.gridInner=new Float64Array(m*m),this.f=new Float64Array(m),this.z=new Float64Array(m+1),this.v=new Uint16Array(m)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:r,actualBoundingBoxDescent:i,actualBoundingBoxLeft:o,actualBoundingBoxRight:f}=this.ctx.measureText(e),d=Math.ceil(r),m=0,_=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(f-o))),E=Math.min(this.size-this.buffer,d+Math.ceil(i)),T=_+2*this.buffer,C=E+2*this.buffer,P=Math.max(T*C,0),R=new Uint8ClampedArray(P),U={data:R,width:T,height:C,glyphWidth:_,glyphHeight:E,glyphTop:d,glyphLeft:m,glyphAdvance:t};if(_===0||E===0)return U;const{ctx:j,buffer:G,gridInner:Q,gridOuter:X}=this;j.clearRect(G,G,_,E),j.fillText(e,G,G+d);const q=j.getImageData(G,G,_,E);X.fill(vu,0,P),Q.fill(0,0,P);for(let ee=0;ee<E;ee++)for(let ie=0;ie<_;ie++){const pe=q.data[4*(ee*_+ie)+3]/255;if(pe===0)continue;const ue=(ee+G)*T+ie+G;if(pe===1)X[ue]=0,Q[ue]=vu;else{const me=.5-pe;X[ue]=me>0?me*me:0,Q[ue]=me<0?me*me:0}}Hy(X,0,0,T,C,T,this.f,this.v,this.z),Hy(Q,G,G,_,E,T,this.f,this.v,this.z);for(let ee=0;ee<P;ee++){const ie=Math.sqrt(X[ee])-Math.sqrt(Q[ee]);R[ee]=Math.round(255-255*(ie/this.radius+this.cutoff))}return U}}function Hy(n,e,t,r,i,o,f,d,m){for(let _=e;_<e+r;_++)Wy(n,t*o+_,o,i,f,d,m);for(let _=t;_<t+i;_++)Wy(n,_*o+e,1,r,f,d,m)}function Wy(n,e,t,r,i,o,f){o[0]=0,f[0]=-vu,f[1]=vu,i[0]=n[e];for(let d=1,m=0,_=0;d<r;d++){i[d]=n[e+d*t];const E=d*d;do{const T=o[m];_=(i[d]-i[T]+E-T*T)/(d-T)/2}while(_<=f[m]&&--m>-1);m++,o[m]=d,f[m]=_,f[m+1]=vu}for(let d=0,m=0;d<r;d++){for(;f[m+1]<d;)m++;const _=o[m],E=d-_;n[e+d*t]=i[_]+E*E}}const pF=32,mF=[];function vF(n){return Math.pow(2,Math.ceil(Math.log2(n)))}function yF({characterSet:n,getFontWidth:e,fontHeight:t,buffer:r,maxCanvasWidth:i,mapping:o={},xOffset:f=0,yOffset:d=0}){let m=0,_=f;const E=t+r*2;for(const T of n)if(!o[T]){const C=e(T);_+C+r*2>i&&(_=0,m++),o[T]={x:_+r,y:d+m*E+r,width:C,height:E,layoutWidth:C,layoutHeight:t},_+=C+r*2}return{mapping:o,xOffset:_,yOffset:d+m*E,canvasHeight:vF(d+(m+1)*E)}}function V3(n,e,t,r){let i=0;for(let f=e;f<t;f++){var o;const d=n[f];i+=((o=r[d])===null||o===void 0?void 0:o.layoutWidth)||0}return i}function j3(n,e,t,r,i,o){let f=e,d=0;for(let m=e;m<t;m++){const _=V3(n,m,m+1,i);d+_>r&&(f<m&&o.push(m),f=m,d=0),d+=_}return d}function _F(n,e,t,r,i,o){let f=e,d=e,m=e,_=0;for(let E=e;E<t;E++)if((n[E]===" "||n[E+1]===" "||E+1===t)&&(m=E+1),m>d){let T=V3(n,d,m,i);_+T>r&&(f<d&&(o.push(d),f=d,_=0),T>r&&(T=j3(n,d,m,r,i,o),f=o[o.length-1])),d=m,_+=T}return _}function wF(n,e,t,r,i=0,o){o===void 0&&(o=n.length);const f=[];return e==="break-all"?j3(n,i,o,t,r,f):_F(n,i,o,t,r,f),f}function bF(n,e,t,r,i,o){let f=0,d=0;for(let m=e;m<t;m++){const _=n[m],E=r[_];E?(d||(d=E.layoutHeight),i[m]=f+E.layoutWidth/2,f+=E.layoutWidth):(Gt.warn("Missing character: ".concat(_," (").concat(_.codePointAt(0),")"))(),i[m]=f,f+=pF)}o[0]=f,o[1]=d}function EF(n,e,t,r,i){const o=Array.from(n),f=o.length,d=new Array(f),m=new Array(f),_=new Array(f),E=(t==="break-word"||t==="break-all")&&isFinite(r)&&r>0,T=[0,0],C=[0,0];let P=0,R=0,U=0;for(let G=0;G<=f;G++){const Q=o[G];if((Q===`
`||G===f)&&(U=G),U>R){const X=E?wF(o,t,r,i,R,U):mF;for(let q=0;q<=X.length;q++){const ee=q===0?R:X[q-1],ie=q<X.length?X[q]:U;bF(o,ee,ie,i,d,C);for(let pe=ee;pe<ie;pe++){var j;const ue=o[pe],me=((j=i[ue])===null||j===void 0?void 0:j.layoutOffsetY)||0;m[pe]=P+C[1]/2+me,_[pe]=C[0]}P=P+C[1]*e,T[0]=Math.max(T[0],C[0])}R=U}Q===`
`&&(d[R]=0,m[R]=0,_[R]=0,R++)}return T[1]=P,{x:d,y:m,rowWidth:_,size:T}}function TF({value:n,length:e,stride:t,offset:r,startIndices:i,characterSet:o}){const f=n.BYTES_PER_ELEMENT,d=t?t/f:1,m=r?r/f:0,_=i[e]||Math.ceil((n.length-m)/d),E=o&&new Set,T=new Array(e);let C=n;if(d>1||m>0){const P=n.constructor;C=new P(_);for(let R=0;R<_;R++)C[R]=n[R*d+m]}for(let P=0;P<e;P++){const R=i[P],U=i[P+1]||_,j=C.subarray(R,U);T[P]=String.fromCodePoint.apply(null,j),E&&j.forEach(E.add,E)}if(E)for(const P of E)o.add(String.fromCodePoint(P));return{texts:T,characterCount:_}}class G3{constructor(e=5){I(this,"limit",void 0),I(this,"_cache",{}),I(this,"_order",[]),this.limit=e}get(e){const t=this._cache[e];return t&&(this._deleteOrder(e),this._appendOrder(e)),t}set(e,t){this._cache[e]?(this.delete(e),this._cache[e]=t,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=t,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const t=this._order.indexOf(e);t>=0&&this._order.splice(t,1)}_appendOrder(e){this._order.push(e)}}function xF(){const n=[];for(let e=32;e<128;e++)n.push(String.fromCharCode(e));return n}const zA={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:xF(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},Qy=1024,Yy=.9,$y=1.2,H3=3;let s0=new G3(H3);function SF(n,e){let t;typeof e=="string"?t=new Set(Array.from(e)):t=new Set(e);const r=s0.get(n);if(!r)return t;for(const i in r.mapping)t.has(i)&&t.delete(i);return t}function CF(n,e){for(let t=0;t<n.length;t++)e.data[4*t+3]=n[t]}function Xy(n,e,t,r){n.font="".concat(r," ").concat(t,"px ").concat(e),n.fillStyle="#000",n.textBaseline="alphabetic",n.textAlign="left"}function MF(n){Gt.assert(Number.isFinite(n)&&n>=H3,"Invalid cache limit"),s0=new G3(n)}class LF{constructor(){I(this,"props",{...zA}),I(this,"_key",void 0),I(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:e,buffer:t}=this.props;return(e*$y+t*2)/e}setProps(e={}){Object.assign(this.props,e),this._key=this._getKey();const t=SF(this._key,this.props.characterSet),r=s0.get(this._key);if(r&&t.size===0){this._atlas!==r&&(this._atlas=r);return}const i=this._generateFontAtlas(t,r);this._atlas=i,s0.set(this._key,i)}_generateFontAtlas(e,t){const{fontFamily:r,fontWeight:i,fontSize:o,buffer:f,sdf:d,radius:m,cutoff:_}=this.props;let E=t&&t.data;E||(E=document.createElement("canvas"),E.width=Qy);const T=E.getContext("2d",{willReadFrequently:!0});Xy(T,r,o,i);const{mapping:C,canvasHeight:P,xOffset:R,yOffset:U}=yF({getFontWidth:j=>T.measureText(j).width,fontHeight:o*$y,buffer:f,characterSet:e,maxCanvasWidth:Qy,...t&&{mapping:t.mapping,xOffset:t.xOffset,yOffset:t.yOffset}});if(E.height!==P){const j=T.getImageData(0,0,E.width,E.height);E.height=P,T.putImageData(j,0,0)}if(Xy(T,r,o,i),d){const j=new gF({fontSize:o,buffer:f,radius:m,cutoff:_,fontFamily:r,fontWeight:"".concat(i)});for(const G of e){const{data:Q,width:X,height:q,glyphTop:ee}=j.draw(G);C[G].width=X,C[G].layoutOffsetY=o*Yy-ee;const ie=T.createImageData(X,q);CF(Q,ie),T.putImageData(ie,C[G].x,C[G].y)}}else for(const j of e)T.fillText(j,C[j].x,C[j].y+f+o*Yy);return{xOffset:R,yOffset:U,mapping:C,data:E,width:E.width,height:E.height}}_getKey(){const{fontFamily:e,fontWeight:t,fontSize:r,buffer:i,sdf:o,radius:f,cutoff:d}=this.props;return o?"".concat(e," ").concat(t," ").concat(r," ").concat(i," ").concat(f," ").concat(d):"".concat(e," ").concat(t," ").concat(r," ").concat(i)}}const PF=`#define SHADER_NAME text-background-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec4 instanceRects;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec2 instancePixelOffsets;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform bool billboard;
uniform float opacity;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform vec4 padding;
uniform int sizeUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = radians(angle);
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;
  vLineWidth = instanceLineWidths;
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
    sizeMinPixels, sizeMaxPixels
  );

  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;

  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
  pixelOffset += instancePixelOffsets;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,kF=`#define SHADER_NAME text-background-layer-fragment-shader

precision highp float;

uniform bool stroked;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

void main(void) {
  geometry.uv = uv;

  vec2 pixelPosition = uv * dimensions;
  if (stroked) {
    float distToEdge = min(
      min(pixelPosition.x, dimensions.x - pixelPosition.x),
      min(pixelPosition.y, dimensions.y - pixelPosition.y)
    );
    float isBorder = smoothedge(distToEdge, vLineWidth);
    gl_FragColor = mix(vFillColor, vLineColor, isBorder);
  } else {
    gl_FragColor = vFillColor;
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,IF={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:n=>n.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class Kp extends ls{constructor(...e){super(...e),I(this,"state",void 0)}getShaders(){return super.getShaders({vs:PF,fs:kF,modules:[ol,al]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:t}=e;if(t.extensionsChanged){var r;const{gl:i}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(i),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{billboard:t,sizeScale:r,sizeUnits:i,sizeMinPixels:o,sizeMaxPixels:f,getLineWidth:d}=this.props;let{padding:m}=this.props;m.length<4&&(m=[m[0],m[1],m[0],m[1]]),this.state.model.setUniforms(e).setUniforms({billboard:t,stroked:!!d,padding:m,sizeUnits:VA[i],sizeScale:r,sizeMinPixels:o,sizeMaxPixels:f}).draw()}_getModel(e){const t=[0,0,1,0,1,1,0,1];return new Ma(e,{...this.getShaders(),id:this.props.id,geometry:new il({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(t)}}}),isInstanced:!0})}}I(Kp,"defaultProps",IF);I(Kp,"layerName","TextBackgroundLayer");const Zy={start:1,middle:0,end:-1},qy={top:1,center:0,bottom:-1},og=[0,0,0,255],RF=1,OF={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:og},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:zA.characterSet},fontFamily:zA.fontFamily,fontWeight:zA.fontWeight,lineHeight:RF,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:og},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:n=>n.text},getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:og},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class Jp extends Rp{constructor(...e){super(...e),I(this,"state",void 0),I(this,"getBoundingRect",(t,r)=>{let{size:[i,o]}=this.transformParagraph(t,r);const{fontSize:f}=this.state.fontAtlasManager.props;i/=f,o/=f;const{getTextAnchor:d,getAlignmentBaseline:m}=this.props,_=Zy[typeof d=="function"?d(t,r):d],E=qy[typeof m=="function"?m(t,r):m];return[(_-1)*i/2,(E-1)*o/2,i,o]}),I(this,"getIconOffsets",(t,r)=>{const{getTextAnchor:i,getAlignmentBaseline:o}=this.props,{x:f,y:d,rowWidth:m,size:[_,E]}=this.transformParagraph(t,r),T=Zy[typeof i=="function"?i(t,r):i],C=qy[typeof o=="function"?o(t,r):o],P=f.length,R=new Array(P*2);let U=0;for(let j=0;j<P;j++){const G=(1-T)*(_-m[j])/2;R[U++]=(T-1)*_/2+G+f[j],R[U++]=(C-1)*E/2+d[j]}return R})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new LF},this.props.maxWidth>0&&Gt.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(e){const{props:t,oldProps:r,changeFlags:i}=e;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||t.lineHeight!==r.lineHeight||t.wordBreak!==r.wordBreak||t.maxWidth!==r.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:t,fontWeight:r}=this.props,{fontAtlasManager:i,characterSet:o}=this.state,f={...e,characterSet:o,fontFamily:t,fontWeight:r};if(!i.mapping)return i.setProps(f),!0;for(const d in f)if(f[d]!==i.props[d])return i.setProps(f),!0;return!1}_updateText(){var e;const{data:t,characterSet:r}=this.props,i=(e=t.attributes)===null||e===void 0?void 0:e.getText;let{getText:o}=this.props,f=t.startIndices,d;const m=r==="auto"&&new Set;if(i&&f){const{texts:_,characterCount:E}=TF({...ArrayBuffer.isView(i)?{value:i}:i,length:t.length,startIndices:f,characterSet:m});d=E,o=(T,{index:C})=>_[C]}else{const{iterable:_,objectInfo:E}=Mp(t);f=[0],d=0;for(const T of _){E.index++;const C=Array.from(o(T,E)||"");m&&C.forEach(m.add,m),d+=C.length,f.push(d)}}this.setState({getText:o,startIndices:f,numInstances:d,characterSet:m||r})}transformParagraph(e,t){const{fontAtlasManager:r}=this.state,i=r.mapping,o=this.state.getText,{wordBreak:f,lineHeight:d,maxWidth:m}=this.props,_=o(e,t)||"";return EF(_,d,f,m*r.props.fontSize,i)}renderLayers(){const{startIndices:e,numInstances:t,getText:r,fontAtlasManager:{scale:i,texture:o,mapping:f},styleVersion:d}=this.state,{data:m,_dataDiff:_,getPosition:E,getColor:T,getSize:C,getAngle:P,getPixelOffset:R,getBackgroundColor:U,getBorderColor:j,getBorderWidth:G,backgroundPadding:Q,background:X,billboard:q,fontSettings:ee,outlineWidth:ie,outlineColor:pe,sizeScale:ue,sizeUnits:me,sizeMinPixels:Ce,sizeMaxPixels:ge,transitions:ke,updateTriggers:Me}=this.props,ze=this.getSubLayerClass("characters",qp),We=this.getSubLayerClass("background",Kp);return[X&&new We({getFillColor:U,getLineColor:j,getLineWidth:G,padding:Q,getPosition:E,getSize:C,getAngle:P,getPixelOffset:R,billboard:q,sizeScale:ue,sizeUnits:me,sizeMinPixels:Ce,sizeMaxPixels:ge,transitions:ke&&{getPosition:ke.getPosition,getAngle:ke.getAngle,getSize:ke.getSize,getFillColor:ke.getBackgroundColor,getLineColor:ke.getBorderColor,getLineWidth:ke.getBorderWidth,getPixelOffset:ke.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:Me.getPosition,getAngle:Me.getAngle,getSize:Me.getSize,getFillColor:Me.getBackgroundColor,getLineColor:Me.getBorderColor,getLineWidth:Me.getBorderWidth,getPixelOffset:Me.getPixelOffset,getBoundingRect:{getText:Me.getText,getTextAnchor:Me.getTextAnchor,getAlignmentBaseline:Me.getAlignmentBaseline,styleVersion:d}}}),{data:m.attributes&&m.attributes.background?{length:m.length,attributes:m.attributes.background}:m,_dataDiff:_,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new ze({sdf:ee.sdf,smoothing:Number.isFinite(ee.smoothing)?ee.smoothing:zA.smoothing,outlineWidth:ie/(ee.radius||zA.radius),outlineColor:pe,iconAtlas:o,iconMapping:f,getPosition:E,getColor:T,getSize:C,getAngle:P,getPixelOffset:R,billboard:q,sizeScale:ue*i,sizeUnits:me,sizeMinPixels:Ce*i,sizeMaxPixels:ge*i,transitions:ke&&{getPosition:ke.getPosition,getAngle:ke.getAngle,getColor:ke.getColor,getSize:ke.getSize,getPixelOffset:ke.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:Me.getText,getPosition:Me.getPosition,getAngle:Me.getAngle,getColor:Me.getColor,getSize:Me.getSize,getPixelOffset:Me.getPixelOffset,getIconOffsets:{getTextAnchor:Me.getTextAnchor,getAlignmentBaseline:Me.getAlignmentBaseline,styleVersion:d}}}),{data:m,_dataDiff:_,startIndices:e,numInstances:t,getIconOffsets:this.getIconOffsets,getIcon:r})]}static set fontAtlasCacheLimit(e){MF(e)}}I(Jp,"defaultProps",OF);I(Jp,"layerName","TextLayer");var nl;(function(n){n.LOCATION="location",n.FLOW="flow"})(nl||(nl={}));const DF=["filter","locationsEnabled","locationTotalsEnabled","locationLabelsEnabled","adaptiveScalesEnabled","animationEnabled","clusteringEnabled","clusteringLevel","fadeEnabled","fadeOpacityEnabled","clusteringAuto","darkMode","fadeAmount","colorScheme","highlightColor","maxTopFlowsDisplayNum","flowEndpointsInViewportMode"];var IA;(function(n){n.LOCATION="location",n.FLOW="flow"})(IA||(IA={}));class Fn extends Rp{constructor(e){super({...e,onHover:(t,r)=>{const i=Date.now();this.setState({highlightedObject:this._getHighlightedObject(t),lastHoverTime:i});const{onHover:o}=e;o&&this._getFlowmapLayerPickingInfo(t).then(f=>{(this.state?.lastHoverTime??0)<=i&&(this.setState({pickingInfo:f}),o(f,r))})},onClick:(t,r)=>{const{onClick:i}=e,o=Date.now();this.setState({lastClickTime:o}),i&&this._getFlowmapLayerPickingInfo(t).then(f=>{(this.state?.lastClickTime??0)<=o&&(this.setState({pickingInfo:f}),f&&i(f,r))})}})}initializeState(){this.state={accessors:new Wg(this.props),dataProvider:this._getOrMakeDataProvider(),layersData:void 0,highlightedObject:void 0,pickingInfo:void 0,lastHoverTime:void 0,lastClickTime:void 0}}getPickingInfo({info:e}){if(!e.object){const t=this.state?.pickingInfo?.object;if(t)return{...e,object:t,picked:!0}}return e}_getOrMakeDataProvider(){const{data:e,dataProvider:t}=this.props;if(D7(t))return t;if(O7(e)){const r=new F7(this.props);return r.setFlowmapData(e),r}throw new Error("FlowmapLayer: data must be a FlowmapDataProvider or FlowmapData")}_updateDataProvider(){this.setState({dataProvider:this._getOrMakeDataProvider()})}shouldUpdateState(e){const{changeFlags:t}=e;return t.viewportChanged?!0:super.shouldUpdateState(e)}updateState({oldProps:e,props:t,changeFlags:r}){if(r.propsChanged,r.dataChanged&&this._updateDataProvider(),(r.viewportChanged||r.dataChanged)&&this.setState({highlightedObject:void 0}),r.viewportChanged||r.dataChanged||r.propsChanged&&DF.some(i=>e[i]!==t[i])){const{dataProvider:i}=this.state||{};i&&(i.setFlowmapState(this._getFlowmapState()),i.updateLayersData(o=>{this.setState({layersData:o,highlightedObject:void 0})},r))}}_getSettingsState(){const{locationsEnabled:e,locationTotalsEnabled:t,locationLabelsEnabled:r,adaptiveScalesEnabled:i,animationEnabled:o,clusteringEnabled:f,clusteringLevel:d,fadeEnabled:m,fadeOpacityEnabled:_,clusteringAuto:E,darkMode:T,fadeAmount:C,colorScheme:P,highlightColor:R,maxTopFlowsDisplayNum:U,flowEndpointsInViewportMode:j}=this.props;return{locationsEnabled:e,locationTotalsEnabled:t,locationLabelsEnabled:r,adaptiveScalesEnabled:i,animationEnabled:o,clusteringEnabled:f,clusteringLevel:d,fadeEnabled:m,fadeOpacityEnabled:_,clusteringAuto:E,darkMode:T,fadeAmount:C,colorScheme:P,highlightColor:R,maxTopFlowsDisplayNum:U,flowEndpointsInViewportMode:j}}_getFlowmapState(){return{viewport:FF(this.context.viewport),filter:this.props.filter,settings:this._getSettingsState()}}async _getFlowmapLayerPickingInfo(e){const{index:t,sourceLayer:r}=e,{dataProvider:i,accessors:o}=this.state||{};if(!i||!o)return;const f={...e,picked:e.picked,layer:e.layer,index:e.index,x:e.x,y:e.y,coordinate:e.coordinate,event:e.event};if(r instanceof kA||r instanceof Mf){const d=t===-1?void 0:await i.getFlowByIndex(t);if(d){const m=await i.getLocationById(o.getFlowOriginId(d)),_=await i.getLocationById(o.getFlowDestId(d));if(m&&_)return{...f,object:{type:nl.FLOW,flow:d,origin:m,dest:_,count:o.getFlowMagnitude(d)}}}}else if(r instanceof mu){const d=t===-1?void 0:await i.getLocationByIndex(t);if(d){const m=o.getLocationId(d),_=o.getLocationName(d),E=await i.getTotalsForLocation(m),{circleAttributes:T}=this.state?.layersData||{};if(E&&T){const C=Jd(T,e.index);return{...f,object:{type:nl.LOCATION,location:d,id:m,name:_,totals:E,circleRadius:C}}}}}}_getHighlightedObject(e){const{index:t,sourceLayer:r}=e;if(!(t<0)){if(r instanceof kA||r instanceof Mf){const{lineAttributes:i}=this.state?.layersData||{};if(i){let o=y7(i,t);return this.props.fadeOpacityEnabled&&(o={...o,attributes:{...o.attributes,getColor:{...o.attributes.getColor,value:new Uint8Array([...o.attributes.getColor.value.slice(0,3),255])}}}),{type:IA.FLOW,lineAttributes:o}}}else if(r instanceof mu){const{circleAttributes:i}=this.state?.layersData||{};if(i)return{type:IA.LOCATION,coords:vy(i,t),radius:Jd(i,t)}}}}renderLayers(){const e=[];if(this.state?.layersData){const{layersData:t,highlightedObject:r}=this.state,{circleAttributes:i,lineAttributes:o,locationLabels:f}=t||{};if(i&&o){const d=uO(this._getSettingsState()),m=ss(d.outlineColor||(this.props.darkMode?"#000":"#fff")),_={data:o,parameters:{...this.props.parameters,depthTest:!1}};if(this.props.animationEnabled?e.push(new Mf({...this.getSubLayerProps({..._,id:"animated-flow-lines",drawOutline:!1,thicknessUnit:20})})):e.push(new kA({...this.getSubLayerProps({..._,id:"flow-lines",drawOutline:!0,outlineColor:m})})),e.push(new mu(this.getSubLayerProps({id:"circles",data:i,emptyColor:this.props.darkMode?[0,0,0,255]:[255,255,255,255],outlineEmptyMix:.4}))),r)switch(r.type){case IA.LOCATION:e.push(new Zp({...this.getSubLayerProps({id:"location-highlight",data:[r],pickable:!1,antialiasing:!0,stroked:!0,filled:!1,lineWidthUnits:"pixels",getLineWidth:2,radiusUnits:"pixels",getRadius:E=>E.radius,getLineColor:ss(this.props.highlightColor),getPosition:E=>E.coords})}));break;case IA.FLOW:e.push(new kA({...this.getSubLayerProps({id:"flow-highlight",data:r.lineAttributes,drawOutline:!0,pickable:!1,outlineColor:ss(this.props.highlightColor),outlineThickness:1,parameters:{depthTest:!1}})}));break}}f&&e.push(new Jp(this.getSubLayerProps({id:"location-labels",data:f,maxWidth:1e3,pickable:!1,fontFamily:"Helvetica",getPixelOffset:(d,{index:m})=>[0,Jd(i,m)+5],getPosition:(d,{index:m})=>vy(i,m),getText:d=>d,getSize:10,getColor:[255,255,255,255],getAngle:0,getTextAnchor:"middle",getAlignmentBaseline:"top"})))}return e}}Fn.defaultProps={darkMode:!0,fadeAmount:50,locationsEnabled:!0,locationTotalsEnabled:!0,locationLabelsEnabled:!1,animationEnabled:!1,clusteringEnabled:!0,fadeEnabled:!0,fadeOpacityEnabled:!1,clusteringAuto:!0,clusteringLevel:void 0,adaptiveScalesEnabled:!0,colorScheme:"Teal",highlightColor:"orange",maxTopFlowsDisplayNum:5e3,flowEndpointsInViewportMode:"any"};function FF(n){const{width:e,height:t,longitude:r,latitude:i,zoom:o,pitch:f,bearing:d}=n;return{width:e,height:t,longitude:r,latitude:i,zoom:o,pitch:f,bearing:d}}const Dn={darkMode:!0,colorScheme:"Teal",highlightColor:"#ff9b29",opacity:1,fadeEnabled:Fn.defaultProps.fadeEnabled,fadeOpacityEnabled:Fn.defaultProps.fadeOpacityEnabled,fadeAmount:Fn.defaultProps.fadeAmount,clusteringEnabled:Fn.defaultProps.clusteringEnabled,clusteringAuto:Fn.defaultProps.clusteringAuto,clusteringLevel:5,clusteringMethod:"HCA",animationEnabled:Fn.defaultProps.animationEnabled,adaptiveScalesEnabled:Fn.defaultProps.adaptiveScalesEnabled,locationsEnabled:Fn.defaultProps.locationsEnabled,locationTotalsEnabled:Fn.defaultProps.locationTotalsEnabled,locationLabelsEnabled:Fn.defaultProps.locationLabelsEnabled,maxTopFlowsDisplayNum:Fn.defaultProps.maxTopFlowsDisplayNum,flowEndpointsInViewportMode:"any"},BF=n=>{n.add(Dn,"darkMode"),n.add(Dn,"colorScheme",Object.keys(a3)),n.addColor(Dn,"highlightColor"),n.add(Dn,"animationEnabled"),n.add(Dn,"adaptiveScalesEnabled"),n.add(Dn,"locationsEnabled"),n.add(Dn,"locationTotalsEnabled"),n.add(Dn,"locationLabelsEnabled"),n.add(Dn,"flowEndpointsInViewportMode",["any","both"]),n.add(Dn,"maxTopFlowsDisplayNum").min(0).max(1e4).step(10).enable(Fn.defaultProps.maxTopFlowsDisplayNum),n.add(Dn,"opacity",0,1);const e=n.addFolder("Fade"),t=e.add(Dn,"fadeEnabled"),r=e.add(Dn,"fadeOpacityEnabled").enable(Fn.defaultProps.fadeEnabled),i=e.add(Dn,"fadeAmount").min(0).max(100).enable(Fn.defaultProps.fadeEnabled);t.onChange(E=>{i.enable(E),r.enable(E)});const o=n.addFolder("Clustering"),f=o.add(Dn,"clusteringEnabled"),d=o.add(Dn,"clusteringMethod",["HCA","H3"]).enable(Fn.defaultProps.clusteringEnabled),m=o.add(Dn,"clusteringAuto"),_=o.add(Dn,"clusteringLevel").min(0).max(20).step(1).enable(!Fn.defaultProps.clusteringAuto);f.onChange(E=>{m.enable(E),d.enable(E),_.enable(E&&!f.object.clusteringAuto)}),m.enable(Fn.defaultProps.clusteringEnabled).onChange(E=>{_.enable(!E)})},NF="modulepreload",UF=function(n,e){return new URL(n,e).href},Ky={},zF=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let _=function(E){return Promise.all(E.map(T=>Promise.resolve(T).then(C=>({status:"fulfilled",value:C}),C=>({status:"rejected",reason:C}))))};const f=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),m=d?.nonce||d?.getAttribute("nonce");i=_(t.map(E=>{if(E=UF(E,r),E in Ky)return;Ky[E]=!0;const T=E.endsWith(".css"),C=T?'[rel="stylesheet"]':"";if(r)for(let R=f.length-1;R>=0;R--){const U=f[R];if(U.href===E&&(!T||U.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${E}"]${C}`))return;const P=document.createElement("link");if(P.rel=T?"stylesheet":NF,T||(P.as="script"),P.crossOrigin="",P.href=E,m&&P.setAttribute("nonce",m),document.head.appendChild(P),T)return new Promise((R,U)=>{P.addEventListener("load",R),P.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${E}`)))})}))}function o(f){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=f,window.dispatchEvent(d),!d.defaultPrevented)throw f}return i.then(f=>{for(const d of f||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})},VF=Ue.createContext(null);function jF(n,e){const t=Array.isArray(n)?n[0]:n?n.x:0,r=Array.isArray(n)?n[1]:n?n.y:0,i=Array.isArray(e)?e[0]:e?e.x:0,o=Array.isArray(e)?e[1]:e?e.y:0;return t===i&&r===o}function Ls(n,e){if(n===e)return!0;if(!n||!e)return!1;if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!Ls(n[t],e[t]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof n=="object"&&typeof e=="object"){const t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(const i of t)if(!e.hasOwnProperty(i)||!Ls(n[i],e[i]))return!1;return!0}return!1}function GF(n){const e=n.clone();return e.pixelsToGLUnits=n.pixelsToGLUnits,e}function Jy(n,e){if(!n.getProjection)return;const t=n.getProjection(),r=e.getProjection();Ls(t,r)||e.setProjection(t)}function e_(n){return{longitude:n.center.lng,latitude:n.center.lat,zoom:n.zoom,pitch:n.pitch,bearing:n.bearing,padding:n.padding}}function t_(n,e){const t=e.viewState||e;let r=!1;if("longitude"in t&&"latitude"in t){const i=n.center;n.center=new i.constructor(t.longitude,t.latitude),r=r||i!==n.center}if("zoom"in t){const i=n.zoom;n.zoom=t.zoom,r=r||i!==n.zoom}if("bearing"in t){const i=n.bearing;n.bearing=t.bearing,r=r||i!==n.bearing}if("pitch"in t){const i=n.pitch;n.pitch=t.pitch,r=r||i!==n.pitch}return t.padding&&!n.isPaddingEqual(t.padding)&&(r=!0,n.padding=t.padding),r}const HF=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function n_(n){if(!n)return null;if(typeof n=="string"||("toJS"in n&&(n=n.toJS()),!n.layers))return n;const e={};for(const r of n.layers)e[r.id]=r;const t=n.layers.map(r=>{let i=null;"interactive"in r&&(i=Object.assign({},r),delete i.interactive);const o=e[r.ref];if(o){i=i||Object.assign({},r),delete i.ref;for(const f of HF)f in o&&(i[f]=o[f])}return i||r});return{...n,layers:t}}var r_={};const i_={version:8,sources:{},layers:[]},s_={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},ag={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},o_={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},WF=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],QF=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class rl{constructor(e,t,r){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=i=>{const o=this.props[o_[i.type]];o?o(i):i.type==="error"&&console.error(i.error)},this._onPointerEvent=i=>{(i.type==="mousemove"||i.type==="mouseout")&&this._updateHover(i);const o=this.props[s_[i.type]];o&&(this.props.interactiveLayerIds&&i.type!=="mouseover"&&i.type!=="mouseout"&&(i.features=this._hoveredFeatures||this._queryRenderedFeatures(i.point)),o(i),delete i.features)},this._onCameraEvent=i=>{if(!this._internalUpdate){const o=this.props[ag[i.type]];o&&o(i)}i.type in this._deferredEvents&&(this._deferredEvents[i.type]=!1)},this._MapClass=e,this.props=t,this._initialize(r)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const t=this.props;this.props=e;const r=this._updateSettings(e,t);r&&this._createShadowTransform(this._map);const i=this._updateSize(e),o=this._updateViewState(e,!0);this._updateStyle(e,t),this._updateStyleComponents(e,t),this._updateHandlers(e,t),(r||i||o&&!this._map.isMoving())&&this.redraw()}static reuse(e,t){const r=rl.savedMaps.pop();if(!r)return null;const i=r.map,o=i.getContainer();for(t.className=o.className;o.childNodes.length>0;)t.appendChild(o.childNodes[0]);i._container=t;const f=i._resizeObserver;f&&(f.disconnect(),f.observe(t)),r.setProps({...e,styleDiffing:!1}),i.resize();const{initialViewState:d}=e;return d&&(d.bounds?i.fitBounds(d.bounds,{...d.fitBoundsOptions,duration:0}):r._updateViewState(d,!1)),i.isStyleLoaded()?i.fire("load"):i.once("styledata",()=>i.fire("load")),i._update(),r}_initialize(e){const{props:t}=this,{mapStyle:r=i_}=t,i={...t,...t.initialViewState,accessToken:t.mapboxAccessToken||YF()||null,container:e,style:n_(r)},o=i.initialViewState||i.viewState||i;if(Object.assign(i,{center:[o.longitude||0,o.latitude||0],zoom:o.zoom||0,pitch:o.pitch||0,bearing:o.bearing||0}),t.gl){const E=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=E,t.gl)}const f=new this._MapClass(i);o.padding&&f.setPadding(o.padding),t.cursor&&(f.getCanvas().style.cursor=t.cursor),this._createShadowTransform(f);const d=f._render;f._render=E=>{this._inRender=!0,d.call(f,E),this._inRender=!1};const m=f._renderTaskQueue.run;f._renderTaskQueue.run=E=>{m.call(f._renderTaskQueue,E),this._onBeforeRepaint()},f.on("render",()=>this._onAfterRepaint());const _=f.fire;f.fire=this._fireEvent.bind(this,_),f.on("resize",()=>{this._renderTransform.resize(f.transform.width,f.transform.height)}),f.on("styledata",()=>{this._updateStyleComponents(this.props,{}),Jy(f.transform,this._renderTransform)}),f.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const E in s_)f.on(E,this._onPointerEvent);for(const E in ag)f.on(E,this._onCameraEvent);for(const E in o_)f.on(E,this._onEvent);this._map=f}recycle(){const t=this.map.getContainer().querySelector("[mapboxgl-children]");t?.remove(),rl.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const t=GF(e.transform);e.painter.transform=t,this._renderTransform=t}_updateSize(e){const{viewState:t}=e;if(t){const r=this._map;if(t.width!==r.transform.width||t.height!==r.transform.height)return r.resize(),!0}return!1}_updateViewState(e,t){if(this._internalUpdate)return!1;const r=this._map,i=this._renderTransform,{zoom:o,pitch:f,bearing:d}=i,m=r.isMoving();m&&(i.cameraElevationReference="sea");const _=t_(i,{...e_(r.transform),...e});if(m&&(i.cameraElevationReference="ground"),_&&t){const E=this._deferredEvents;E.move=!0,E.zoom||(E.zoom=o!==i.zoom),E.rotate||(E.rotate=d!==i.bearing),E.pitch||(E.pitch=f!==i.pitch)}return m||t_(r.transform,e),_}_updateSettings(e,t){const r=this._map;let i=!1;for(const o of WF)if(o in e&&!Ls(e[o],t[o])){i=!0;const f=r[`set${o[0].toUpperCase()}${o.slice(1)}`];f?.call(r,e[o])}return i}_updateStyle(e,t){if(e.cursor!==t.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==t.mapStyle){const{mapStyle:r=i_,styleDiffing:i=!0}=e,o={diff:i};return"localIdeographFontFamily"in e&&(o.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(n_(r),o),!0}return!1}_updateStyleComponents(e,t){const r=this._map;let i=!1;return r.isStyleLoaded()&&("light"in e&&r.setLight&&!Ls(e.light,t.light)&&(i=!0,r.setLight(e.light)),"fog"in e&&r.setFog&&!Ls(e.fog,t.fog)&&(i=!0,r.setFog(e.fog)),"terrain"in e&&r.setTerrain&&!Ls(e.terrain,t.terrain)&&(!e.terrain||r.getSource(e.terrain.source))&&(i=!0,r.setTerrain(e.terrain))),i}_updateHandlers(e,t){var r,i;const o=this._map;let f=!1;for(const d of QF){const m=(r=e[d])!==null&&r!==void 0?r:!0,_=(i=t[d])!==null&&i!==void 0?i:!0;Ls(m,_)||(f=!0,m?o[d].enable(m):o[d].disable())}return f}_queryRenderedFeatures(e){const t=this._map,r=t.transform,{interactiveLayerIds:i=[]}=this.props;try{return t.transform=this._renderTransform,t.queryRenderedFeatures(e,{layers:i.filter(t.getLayer.bind(t))})}catch{return[]}finally{t.transform=r}}_updateHover(e){var t;const{props:r}=this;if(r.interactiveLayerIds&&(r.onMouseMove||r.onMouseEnter||r.onMouseLeave)){const o=e.type,f=((t=this._hoveredFeatures)===null||t===void 0?void 0:t.length)>0,d=this._queryRenderedFeatures(e.point),m=d.length>0;!m&&f&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=d,m&&!f&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=o}else this._hoveredFeatures=null}_fireEvent(e,t,r){const i=this._map,o=i.transform,f=typeof t=="string"?t:t.type;return f==="move"&&this._updateViewState(this.props,!1),f in ag&&(typeof t=="object"&&(t.viewState=e_(o)),this._map.isMoving())?(i.transform=this._renderTransform,e.call(i,t,r),i.transform=o,i):(e.call(i,t,r),i)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const r in this._deferredEvents)this._deferredEvents[r]&&e.fire(r);this._internalUpdate=!1;const t=this._map.transform;e.transform=this._renderTransform,this._onAfterRepaint=()=>{Jy(this._renderTransform,t),e.transform=t}}}rl.savedMaps=[];function YF(){let n=null;if(typeof location<"u"){const e=/access_token=([^&\/]*)/.exec(location.search);n=e&&e[1]}try{n=n||r_.MapboxAccessToken}catch{}try{n=n||r_.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return n}const $F=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function XF(n){if(!n)return null;const e=n.map,t={getMap:()=>e,getCenter:()=>n.transform.center,getZoom:()=>n.transform.zoom,getBearing:()=>n.transform.bearing,getPitch:()=>n.transform.pitch,getPadding:()=>n.transform.padding,getBounds:()=>n.transform.getBounds(),project:r=>{const i=e.transform;e.transform=n.transform;const o=e.project(r);return e.transform=i,o},unproject:r=>{const i=e.transform;e.transform=n.transform;const o=e.unproject(r);return e.transform=i,o},queryTerrainElevation:(r,i)=>{const o=e.transform;e.transform=n.transform;const f=e.queryTerrainElevation(r,i);return e.transform=o,f},queryRenderedFeatures:(r,i)=>{const o=e.transform;e.transform=n.transform;const f=e.queryRenderedFeatures(r,i);return e.transform=o,f}};for(const r of ZF(e))!(r in t)&&!$F.includes(r)&&(t[r]=e[r].bind(e));return t}function ZF(n){const e=new Set;let t=n;for(;t;){for(const r of Object.getOwnPropertyNames(t))r[0]!=="_"&&typeof n[r]=="function"&&r!=="fire"&&r!=="setEventedParent"&&e.add(r);t=Object.getPrototypeOf(t)}return Array.from(e)}const qF=typeof document<"u"?Ue.useLayoutEffect:Ue.useEffect,KF=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function JF(n,e){for(const r of KF)r in e&&(n[r]=e[r]);const{RTLTextPlugin:t="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=e;t&&n.getRTLTextPluginStatus&&n.getRTLTextPluginStatus()==="unavailable"&&n.setRTLTextPlugin(t,r=>{r&&console.error(r)},!1)}const E0=Ue.createContext(null);function e9(n,e,t){const r=Ue.useContext(VF),[i,o]=Ue.useState(null),f=Ue.useRef(),{current:d}=Ue.useRef({mapLib:null,map:null});Ue.useEffect(()=>{const E=n.mapLib;let T=!0,C;return Promise.resolve(E||t).then(P=>{if(!T)return;if(!P)throw new Error("Invalid mapLib");const R="Map"in P?P:P.default;if(!R.Map)throw new Error("Invalid mapLib");if(JF(R,n),!R.supported||R.supported(n))n.reuseMaps&&(C=rl.reuse(n,f.current)),C||(C=new rl(R.Map,n,f.current)),d.map=XF(C),d.mapLib=R,o(C),r?.onMapMount(d.map,n.id);else throw new Error("Map is not supported by this browser")}).catch(P=>{const{onError:R}=n;R?R({type:"error",target:null,originalEvent:null,error:P}):console.error(P)}),()=>{T=!1,C&&(r?.onMapUnmount(n.id),n.reuseMaps?C.recycle():C.destroy())}},[]),qF(()=>{i&&i.setProps(n)}),Ue.useImperativeHandle(e,()=>d.map,[i]);const m=Ue.useMemo(()=>({position:"relative",width:"100%",height:"100%",...n.style}),[n.style]),_={height:"100%"};return Ue.createElement("div",{id:n.id,ref:f,style:m},i&&Ue.createElement(E0.Provider,{value:d},Ue.createElement("div",{"mapboxgl-children":"",style:_},n.children)))}var W3=l_();const t9=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function ka(n,e){if(!n||!e)return;const t=n.style;for(const r in e){const i=e[r];Number.isFinite(i)&&!t9.test(r)?t[r]=`${i}px`:t[r]=i}}function n9(n,e){const{map:t,mapLib:r}=Ue.useContext(E0),i=Ue.useRef({props:n});i.current.props=n;const o=Ue.useMemo(()=>{let U=!1;Ue.Children.forEach(n.children,Q=>{Q&&(U=!0)});const j={...n,element:U?document.createElement("div"):null},G=new r.Marker(j);return G.setLngLat([n.longitude,n.latitude]),G.getElement().addEventListener("click",Q=>{var X,q;(q=(X=i.current.props).onClick)===null||q===void 0||q.call(X,{type:"click",target:G,originalEvent:Q})}),G.on("dragstart",Q=>{var X,q;const ee=Q;ee.lngLat=o.getLngLat(),(q=(X=i.current.props).onDragStart)===null||q===void 0||q.call(X,ee)}),G.on("drag",Q=>{var X,q;const ee=Q;ee.lngLat=o.getLngLat(),(q=(X=i.current.props).onDrag)===null||q===void 0||q.call(X,ee)}),G.on("dragend",Q=>{var X,q;const ee=Q;ee.lngLat=o.getLngLat(),(q=(X=i.current.props).onDragEnd)===null||q===void 0||q.call(X,ee)}),G},[]);Ue.useEffect(()=>(o.addTo(t.getMap()),()=>{o.remove()}),[]);const{longitude:f,latitude:d,offset:m,style:_,draggable:E=!1,popup:T=null,rotation:C=0,rotationAlignment:P="auto",pitchAlignment:R="auto"}=n;return Ue.useEffect(()=>{ka(o.getElement(),_)},[_]),Ue.useImperativeHandle(e,()=>o,[]),(o.getLngLat().lng!==f||o.getLngLat().lat!==d)&&o.setLngLat([f,d]),m&&!jF(o.getOffset(),m)&&o.setOffset(m),o.isDraggable()!==E&&o.setDraggable(E),o.getRotation()!==C&&o.setRotation(C),o.getRotationAlignment()!==P&&o.setRotationAlignment(P),o.getPitchAlignment()!==R&&o.setPitchAlignment(R),o.getPopup()!==T&&o.setPopup(T),W3.createPortal(n.children,o.getElement())}Ue.memo(Ue.forwardRef(n9));function a_(n){return new Set(n?n.trim().split(/\s+/):[])}function r9(n,e){const{map:t,mapLib:r}=Ue.useContext(E0),i=Ue.useMemo(()=>document.createElement("div"),[]),o=Ue.useRef({props:n});o.current.props=n;const f=Ue.useMemo(()=>{const d={...n},m=new r.Popup(d);return m.setLngLat([n.longitude,n.latitude]),m.once("open",_=>{var E,T;(T=(E=o.current.props).onOpen)===null||T===void 0||T.call(E,_)}),m},[]);if(Ue.useEffect(()=>{const d=m=>{var _,E;(E=(_=o.current.props).onClose)===null||E===void 0||E.call(_,m)};return f.on("close",d),f.setDOMContent(i).addTo(t.getMap()),()=>{f.off("close",d),f.isOpen()&&f.remove()}},[]),Ue.useEffect(()=>{ka(f.getElement(),n.style)},[n.style]),Ue.useImperativeHandle(e,()=>f,[]),f.isOpen()&&((f.getLngLat().lng!==n.longitude||f.getLngLat().lat!==n.latitude)&&f.setLngLat([n.longitude,n.latitude]),n.offset&&!Ls(f.options.offset,n.offset)&&f.setOffset(n.offset),(f.options.anchor!==n.anchor||f.options.maxWidth!==n.maxWidth)&&(f.options.anchor=n.anchor,f.setMaxWidth(n.maxWidth)),f.options.className!==n.className)){const d=a_(f.options.className),m=a_(n.className);for(const _ of d)m.has(_)||f.removeClassName(_);for(const _ of m)d.has(_)||f.addClassName(_);f.options.className=n.className}return W3.createPortal(n.children,i)}Ue.memo(Ue.forwardRef(r9));function Yu(n,e,t,r){const i=Ue.useContext(E0),o=Ue.useMemo(()=>n(i),[]);return Ue.useEffect(()=>{const f=e,d=null,m=typeof e=="function"?e:null,{map:_}=i;return _.hasControl(o)||(_.addControl(o,f?.position),d&&d(i)),()=>{m&&m(i),_.hasControl(o)&&_.removeControl(o)}},[]),o}function i9(n){const e=Yu(({mapLib:t})=>new t.AttributionControl(n),{position:n.position});return Ue.useEffect(()=>{ka(e._container,n.style)},[n.style]),null}Ue.memo(i9);function s9(n){const e=Yu(({mapLib:t})=>new t.FullscreenControl({container:n.containerId&&document.getElementById(n.containerId)}),{position:n.position});return Ue.useEffect(()=>{ka(e._controlContainer,n.style)},[n.style]),null}Ue.memo(s9);function o9(n,e){const t=Ue.useRef({props:n}),r=Yu(({mapLib:i})=>{const o=new i.GeolocateControl(n),f=o._setupUI;return o._setupUI=d=>{o._container.hasChildNodes()||f(d)},o.on("geolocate",d=>{var m,_;(_=(m=t.current.props).onGeolocate)===null||_===void 0||_.call(m,d)}),o.on("error",d=>{var m,_;(_=(m=t.current.props).onError)===null||_===void 0||_.call(m,d)}),o.on("outofmaxbounds",d=>{var m,_;(_=(m=t.current.props).onOutOfMaxBounds)===null||_===void 0||_.call(m,d)}),o.on("trackuserlocationstart",d=>{var m,_;(_=(m=t.current.props).onTrackUserLocationStart)===null||_===void 0||_.call(m,d)}),o.on("trackuserlocationend",d=>{var m,_;(_=(m=t.current.props).onTrackUserLocationEnd)===null||_===void 0||_.call(m,d)}),o},{position:n.position});return t.current.props=n,Ue.useImperativeHandle(e,()=>r,[]),Ue.useEffect(()=>{ka(r._container,n.style)},[n.style]),null}Ue.memo(Ue.forwardRef(o9));function a9(n){const e=Yu(({mapLib:t})=>new t.NavigationControl(n),{position:n.position});return Ue.useEffect(()=>{ka(e._container,n.style)},[n.style]),null}Ue.memo(a9);function A9(n){const e=Yu(({mapLib:o})=>new o.ScaleControl(n),{position:n.position}),t=Ue.useRef(n),r=t.current;t.current=n;const{style:i}=n;return n.maxWidth!==void 0&&n.maxWidth!==r.maxWidth&&(e.options.maxWidth=n.maxWidth),n.unit!==void 0&&n.unit!==r.unit&&e.setUnit(n.unit),Ue.useEffect(()=>{ka(e._container,i)},[i]),null}Ue.memo(A9);const l9=zF(()=>import("./mapbox-gl-BnByogBZ.js").then(n=>n.m),[],import.meta.url),u9=Ue.forwardRef(function(e,t){return e9(e,t,l9)}),c9="pk.eyJ1IjoiaWx5YWJvIiwiYSI6ImNqcXdrcThpbjAwODQ0M3FqbHg0OHR6aTQifQ.pg_UKPa08PeDU8mDBCnfRg",Q3="mapbox://styles/mapbox/streets-v11",f9=Q3;function h9(){const n=UD(Dn,BF),[e,t]=Ue.useState(),[r,i]=Ue.useState(),[o,f]=Ue.useState();Ue.useEffect(()=>{(async()=>i(await SD(n.clusteringMethod)))()},[n.clusteringMethod]),Ue.useEffect(()=>{if(!e&&r?.locations){const[_,E]=[globalThis.innerWidth,globalThis.innerHeight],T=P3(r.locations,C=>[C.lon,C.lat],[_,E]);t({...T,latitude:T.latitude-.02,zoom:T.zoom+1,width:_,height:E})}},[r]);const d=({viewState:_})=>{t(_),f(void 0)},m=[];return r&&m.push(new Fn({id:"my-flowmap-layer",data:r,opacity:n.opacity,pickable:!0,darkMode:n.darkMode,colorScheme:n.colorScheme,fadeAmount:n.fadeAmount,fadeEnabled:n.fadeEnabled,fadeOpacityEnabled:n.fadeOpacityEnabled,locationsEnabled:n.locationsEnabled,locationTotalsEnabled:n.locationTotalsEnabled,locationLabelsEnabled:n.locationLabelsEnabled,animationEnabled:n.animationEnabled,clusteringEnabled:n.clusteringEnabled,clusteringAuto:n.clusteringAuto,clusteringLevel:n.clusteringLevel,adaptiveScalesEnabled:n.adaptiveScalesEnabled,highlightColor:n.highlightColor,maxTopFlowsDisplayNum:n.maxTopFlowsDisplayNum,flowEndpointsInViewportMode:n.flowEndpointsInViewportMode,getLocationId:_=>_.id,getLocationLat:_=>_.lat,getLocationLon:_=>_.lon,getFlowOriginId:_=>_.origin,getLocationName:_=>_.name,getFlowDestId:_=>_.dest,getFlowMagnitude:_=>_.count,onHover:_=>f(d9(_)),onClick:_=>console.log("clicked",_.object?.type,_.object,_)})),e?fr.jsxs("div",{className:`flowmap-container ${n.darkMode?"dark":"light"}`,style:{position:"relative"},children:[fr.jsx(Kw,{width:"100%",height:"100%",initialViewState:e,onViewStateChange:d,controller:!0,layers:m,style:{mixBlendMode:n.darkMode?"screen":"darken"},children:fr.jsx(u9,{mapboxAccessToken:c9,mapStyle:n.darkMode?f9:Q3})}),o&&fr.jsx("div",{className:"tooltip",style:o.position,children:o.content})]}):null}function d9(n){if(!n)return;const{x:e,y:t,object:r}=n,i={left:e,top:t};switch(r?.type){case nl.LOCATION:return{position:i,content:fr.jsxs(fr.Fragment,{children:[fr.jsx("div",{children:r.name}),fr.jsxs("div",{children:["Incoming trips: ",r.totals.incomingCount]}),fr.jsxs("div",{children:["Outgoing trips: ",r.totals.outgoingCount]}),fr.jsxs("div",{children:["Internal or round trips: ",r.totals.internalCount]})]})};case nl.FLOW:return{position:i,content:fr.jsxs(fr.Fragment,{children:[fr.jsxs("div",{children:[r.origin.id,"  ",r.dest.id]}),fr.jsx("div",{children:r.count})]})}}}NE.createRoot(document.getElementById("root")).render(fr.jsx(IE.StrictMode,{children:fr.jsx(h9,{})}));export{A_ as g};
